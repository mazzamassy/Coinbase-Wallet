"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[203],{90203:(e,t,a)=>{a.r(t),a.d(t,{WatchlistDiscovery:()=>L});var n=a(14041),r=a(32183),o=a(8867),s=a(86090),i=a(82733),c=a(92743),d=a(98053),l=a(31099),u=a(74146);const h="explore/tokens/marketCap";function m(){const e=(0,l.G)(),{data:t,isLoading:a,refetch:r}=(0,d.I)([h],(async()=>async function(e){const t={multichainEnabled:e?"1":"0"},{result:a}=await(0,u.hm)(h,t);return a.data}(e)));return(0,n.useMemo)((()=>({data:t,isLoading:a,refetch:r})),[t,a,r])}var p,f=a(32451),v=a(10058),g=a(4681),y=a(15654),b=a(44659),k=a(97541),w=a(86700),W=a(91971),C=a(581),A=a(31085);e=a.hmd(e),(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&p(e);var I,x,E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},M=(0,r.YK)({title:{id:"R5lQBf",defaultMessage:[{type:0,value:"Create a watchlist"}]},description:{id:"6fWljh",defaultMessage:[{type:0,value:"Add items to your watchlist and get alerted about important price movements"}]}}),L=(0,n.memo)(E((function(){var e,t=(0,o.A)().formatMessage,a=(0,s.W6)().goBack,r=m(),d=r.data,l=r.isLoading,u=null===(e=(0,c.t)().get("ETH"))||void 0===e?void 0:e.primaryAddress;(0,w.c)(f.fO.watchlist,f.j$.navigate_to_watchlist_discovery,{type:"end"});var h=(0,i.bj)(),p=(0,n.useCallback)((function(){h(),a()}),[h,a]);if(!u)throw new Error("WatchlistDiscovery: missing active ETH wallet");var I=(0,n.useMemo)((function(){return l?(0,A.jsx)(C.g,{description:t(M.description),title:t(M.title),isDiscovery:!0}):(0,A.jsxs)(y.T,{spacingHorizontal:3,gap:1,testID:"watchlist-discovery-list",spacingBottom:2,children:[(0,A.jsxs)(y.T,{spacingBottom:2,gap:1,children:[(0,A.jsx)(b.f,{overflow:"wrap",as:"h1",children:t(M.title)}),(0,A.jsx)(k.K,{as:"p",color:"foregroundMuted",children:t(M.description)})]}),null==d?void 0:d.map((function(e,t){return(0,A.jsx)(W._,{address:u,index:t,item:e})}))]})}),[d,t,l,u]);return(0,A.jsx)(g.ff,{height:"100%",header:(0,A.jsx)(v.jq,{variant:"secondary",handleBack:p,hasPageTitle:!0,isSticky:!0}),children:I})}),"useIntl{{ formatMessage }}\nuseHistory{{ goBack }}\nuseTopCoins{{ data, isLoading }}\nusePrimaryReceiveWallets{}\nusePerfMarkOnMount{}\nuseWatchlistDiscoveryButtonEvent{backEvent}\nuseCallback{handleGoBack}\nuseMemo{content}",(function(){return[o.A,s.W6,m,c.t,w.c,i.bj]})));(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(I.register(M,"messages","/workspaces/apps/extension/src/screens/Watchlist/WatchlistDiscovery.tsx"),I.register(L,"WatchlistDiscovery","/workspaces/apps/extension/src/screens/Watchlist/WatchlistDiscovery.tsx")),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&x(e)},91971:(e,t,a)=>{a.d(t,{_:()=>G});var n,r=a(14041),o=a(86090),s=a(82733),i=a(13394),c=a(4842),d=a(87432),l=a(76583),u=a(80587),h=a(70918),m=a(46166),p=a(48254),f=a(57256),v=a(27224),g=a(78392),y=a(52338),b=a(52365),k=a(84492),w=a(15654),W=a(28118),C=a(39262),A=a(94330),I=a(97541),x=a(32010),E=a(31085);e=a.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var M,L,j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},G=(0,r.memo)(j((function(e){var t,a=e.address,n=e.index,M=e.item,L=(0,o.W6)(),j=(0,p.W)({networkId:M.networkId,chainId:M.chainId,contractAddress:M.address,symbol:M.currencyCode,uuid:M.uuid,walletAddress:a}),G=j.isWatchable,H=j.isWatching,T=j.optimisticUpdate,P=j.resetUpdate,D=(0,u.s)({address:M.address,networkId:M.networkId,blockchain:M.blockchain,chainId:M.chainId,decimals:M.decimals,name:M.name,symbol:M.currencyCode,uuid:M.uuid}),S=(0,r.useMemo)((function(){return{chainName:M.blockchain,entityName:M.name,entityType:s.je.ASSET,rankIndex:n}}),[n,M.blockchain,M.name]),_=(0,s.bW)(S),U=(0,s.UV)(S);(0,d.y)(U);var B=(0,s.D3)({entityName:M.name,chainName:M.blockchain}),R=(0,h.h)(),N=(0,l.q)(R)(D.id),Q=(0,c.m8)(M.currencyCode,M.uuid,!0),F=Q.formattedPercent,O=Q.percentColor,q=Q.percentArrow,K=(0,r.useCallback)((function(){var e;_(),L.push("/portfolio/crypto/".concat(encodeURIComponent(null!==(e=null==N?void 0:N.id)&&void 0!==e?e:D.id),"/").concat(x.tR.Explore))}),[null==N?void 0:N.id,_,L,D.id]),V=(0,v.X)(D),$=(0,r.useMemo)((function(){return{currencyCode:D.symbol,iconUrl:D.imageUrl,showIconTooltipOverride:!1}}),[D.imageUrl,D.symbol]),z=(0,r.useCallback)((function(e){P(),(0,i.gf)({context:"component_error",error:new Error("WatchlistDiscoveryCell: ".concat(e)),severity:"error",isHandled:!1,isUserVisible:!0})}),[P]),J=(0,r.useCallback)((function(e){var t=e.isWatchingUpdate;B({componentName:t?"add":"remove"})}),[B]),X=(0,m.$)({blockchain:M.blockchain,networkId:M.networkId,chainId:M.chainId,contractAddress:M.address,handleError:z,handleSuccess:J,symbol:M.currencyCode,type:"OBJECT_TYPE_ASSET",uuid:M.uuid,walletAddress:a}),Y=X.addToWatchlist,Z=X.isAdding,ee=(0,f.R)({networkId:M.networkId,chainId:M.chainId,contractAddress:M.address,handleError:z,handleSuccess:J,symbol:M.currencyCode,type:"OBJECT_TYPE_ASSET",walletAddress:a}),te=ee.removeFromWatchlist,ae=ee.isRemoving,ne=(0,r.useCallback)((function(e){e.stopPropagation(),T(),H?te():Y()}),[Y,H,T,te]),re=(0,s._t)({chainName:M.blockchain,contractAddress:null!==(t=M.address)&&void 0!==t?t:"",entityName:M.name,componentName:"watchlist_discovery"});return(0,r.useEffect)((function(){G||re()}),[re,G]),G?(0,E.jsx)(W.o,{borderRadius:"roundedLarge",background:"backgroundAlternate",onPress:K,children:(0,E.jsx)(b.l,{media:(0,E.jsx)(g.E,{asset:$,width:32,height:32}),title:(0,E.jsx)(C.w,{as:"h1",noWrap:!0,overflow:"truncate",children:M.name}),description:(0,E.jsx)(A.C,{as:"p",color:"foregroundMuted",children:M.currencyCode}),detail:(0,E.jsxs)(k.z,{justifyContent:"flex-end",gap:1,children:[(0,E.jsxs)(w.T,{children:[(0,E.jsx)(A.C,{as:"p",align:"end",children:V}),(0,E.jsx)(I.K,{as:"p",color:O,align:"end",children:"".concat(q," ").concat(F)})]}),(0,E.jsx)(y.K,{name:H?"starActive":"starInactive",onPress:ne,disabled:Z||ae,variant:H?"primary":"secondary",testID:"watchlist-discovery-toggle",transparent:!0,compact:!0})]}),testID:"watchlist-discovery-cell",compact:!0})}):null}),"useHistory{history}\nuseAssetWatchlistState{{ isWatchable, isWatching, optimisticUpdate, resetUpdate }}\nuseWatchlistItem{watchedAsset}\nuseMemo{eventData}\nuseClickWatchlistDiscoveryCardEvent{cellClickEvent}\nuseViewWatchlistDiscoveryCardEvent{viewEvent}\nuseOnMount{}\nuseWatchlistButtonEvent{watchEvent}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseGetExploreAssetWallet{getExploreAssetWallet}\nuseGetPriceDetail{{ formattedPercent, percentColor, percentArrow }}\nuseCallback{handleNavigation}\nuseWatchedAssetPrice{formattedAmount}\nuseMemo{assetLike}\nuseCallback{handleError}\nuseCallback{handleSuccess}\nuseAddToWatchlist{{ addToWatchlist, isAdding }}\nuseRemoveFromWatchlist{{ removeFromWatchlist, isRemoving }}\nuseCallback{handleWatchlistUpdate}\nuseUnwatchableAssetEvent{unwatchableAssetEvent}\nuseEffect{}",(function(){return[o.W6,p.W,u.s,s.bW,s.UV,d.y,s.D3,h.h,l.q,c.m8,v.X,m.$,f.R,s._t]})));(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&M.register(G,"WatchlistDiscoveryCell","/workspaces/apps/extension/src/screens/Watchlist/components/WatchlistDiscoveryCell.tsx"),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)},581:(e,t,a)=>{a.d(t,{g:()=>m});var n,r=a(14041),o=a(60803),s=a(55799),i=a(15654),c=a(44659),d=a(97541),l=a(31085);e=a.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u,h,m=(0,r.memo)((function(e){var t=e.cta,a=void 0===t?void 0:t,n=e.description,u=void 0===n?void 0:n,h=e.isDiscovery,m=void 0!==h&&h,p=e.title;return(0,l.jsxs)(s.a,{flexBasis:1,flexGrow:1,flexDirection:"column",testID:"watchlist-".concat(m?"discovery-":"","loading"),children:[(0,l.jsxs)(i.T,{spacingHorizontal:3,spacingVertical:m?0:2,spacingBottom:m?3:0,gap:1,children:[(0,l.jsx)(c.f,{as:"h1",children:p}),!!u&&(0,l.jsx)(d.K,{as:"p",color:"foregroundMuted",children:u})]}),Array(4).fill((0,l.jsx)(o.x,{title:!0,description:!0,detail:!0,subdetail:!0,media:"asset",compact:!0})).map((function(e,t){return(0,l.jsx)(r.Fragment,{children:e},"watchlist-".concat(m?"discovery-":"","fallback-").concat(t))})),a]})}));(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&u.register(m,"WatchlistLoading","/workspaces/apps/extension/src/screens/Watchlist/components/WatchlistLoading.tsx"),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)},4842:(e,t,a)=>{a.d(t,{m8:()=>E});var n=a(14041),r=a(8867),o=a(95734),s=a(52344),i=a(11554),c=a(42626),d=a(54996);const l=(0,n.createContext)(void 0);var u=a(67651),h=a(60120),m=a(21154),p=a(94922);const f=(e,t)=>Object.keys(e).reduce(((a,n)=>{const r=e[n];return r&&(a[n]=(0,p.x)(r,t)),a}),{});function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},v.apply(null,arguments)}const g=e=>"light"in e,y=e=>"dark"in e;function b(e,t){return t?"light"===e?t.light.palette:t.dark.palette:function(e){const t=u.Bi,a=u.HF;return"light"===e?t:a}(e)}const k=e=>{let{name:t,palette:a,parentThemeConfig:n,spectrum:r}=e;const o=b(r,n),s=(e=>!g(e)&&!y(e))(a)?a:o,i=g(a)?a.light:s,c=y(a)?a.dark:s,d=v({},o,"light"===r?i:c);return{palette:d,rgbaStrings:f(d,r),interactableTokens:(0,m.b)({paletteConfig:d,spectrum:r}),name:t+"-"+r}},w=e=>{let{name:t,parentThemeConfig:a}=e;return""+(a?a.name+"-":"")+t},W=(0,h.B)((function(e){let{palette:t,parentThemeConfig:a,name:n}=e;const r=w({name:n,parentThemeConfig:a});return{name:r,light:k({name:r,palette:t,parentThemeConfig:a,spectrum:"light"}),dark:k({name:r,palette:t,parentThemeConfig:a,spectrum:"dark"})}}),w);const C=()=>{const e=(0,n.useContext)(l),t=W({palette:u.ME,name:"default"});return(0,n.useMemo)((()=>e||{config:t,activeConfig:t.light}),[e,t])},A=()=>C().activeConfig.rgbaStrings,I="\u2197",x="\u2198";function E(e,t,a,l,u,h){const{formatNumber:m}=(0,r.A)(),p=(0,o.M)(),f=A(),{asset:v,isFetched:g}=(0,s.Q)({assetSymbol:e,uuid:t,network:l,blockchain:u,contractAddress:h}),y=(0,i.S)({network:l,blockchain:u}),{data:b}=(0,d.o2)({assetId:v?.id,address:h,networkId:y,onlyPercentChangeResolutions:a?[c.ck]:void 0,enabled:g}),k=b?.prices.latestPrice,w=k?.amount,W=k?.percentChange.day,C=w?m(Math.abs(Number(w?.amount)),{style:"currency",currency:w?.currency,minimumFractionDigits:w?.scale}):"",E=!!W&&W>0,M=void 0!==W&&0===W,L=void 0!==W?p(Math.abs(W),2):"",j=(0,n.useMemo)((()=>M||!W?"":E?I:x),[M,W,E]),G=(0,n.useMemo)((()=>M||!W?"foregroundMuted":E?"positive":"negative"),[M,W,E]);return{formattedPercent:L,formattedAmount:C,color:v?.color??f.primary,prices:a?void 0:b,percentArrow:j,percentColor:G}}},31099:(e,t,a)=>{a.d(t,{G:()=>o});var n=a(66181),r=a(44592);function o(){return!(0,n.l)((0,r.R)("kill_explore_multichain"))}},80587:(e,t,a)=>{a.d(t,{s:()=>d});var n=a(14041),r=a(27301),o=a(52344),s=a(37341),i=a(77646),c=a(54996);function d(e){const{data:t}=(0,c.o2)({assetId:e.uuid}),a=e.networkId?(0,i.e)(e.networkId):void 0,d=new r.J(e.blockchain),{asset:l}=(0,o.Q)({network:a,blockchain:d,contractAddress:e.address,assetSymbol:e.symbol,uuid:e.uuid,suspense:!0});if(!l)throw new Error(`useWatchlistItem: unable to get Asset information for ${e.symbol}`);const u=(0,s.e)({name:l.name,currencyCode:l.symbol,address:e.address,decimals:e.decimals,imageURL:l.image_url,chainId:e.chainId,networkId:e.networkId,blockchain:e.blockchain,uuid:l.id,percentChangeDay:t?.prices.latestPrice.percentChange.day??0});return(0,n.useMemo)((()=>({symbol:l.symbol,name:l.name,imageUrl:l.image_url,priceChange:t?.prices.latestPrice.percentChange.day,latestPrice:t?.prices.latestPrice,uuid:l.id,id:u.id,network:u.network})),[l.id,l.image_url,l.name,l.symbol,u.id,u.network,t?.prices.latestPrice])}},46166:(e,t,a)=>{a.d(t,{$:()=>i});var n=a(14041),r=a(38851),o=a(31700),s=a(3887);function i({blockchain:e,chainId:t,networkId:a,contractAddress:i,symbol:c,type:d,uuid:l,walletAddress:u,handleSuccess:h,handleError:m}){const{mutateAsync:p,isLoading:f}=(0,r.n)({mutationFn:async()=>(0,s.w7)({blockchain:e,networkId:a,chainId:t,contractAddress:i,symbol:c,type:d,uuid:l,walletAddress:u})}),v=(0,n.useCallback)((async function(){try{await p(),o.qQ.invalidateQueries([s.SS,u]),o.qQ.invalidateQueries([u,c]),h({isWatchingUpdate:!0})}catch(e){m(e)}}),[p,u,c,h,m]);return(0,n.useMemo)((()=>({addToWatchlist:v,isAdding:f})),[f,v])}},48254:(e,t,a)=>{a.d(t,{W:()=>s});var n=a(14041),r=a(98053),o=a(3887);function s(e){const{isWatchable:t,isWatching:a}=function({contractAddress:e,networkId:t,chainId:a,symbol:s,uuid:i,walletAddress:c}){const d=Boolean(t&&e||t&&s||a&&e||a&&s||i),{data:l}=(0,r.I)([c,s],(async()=>(0,o.wq)({contractAddress:e,networkId:t,chainId:a,symbol:s,uuid:i,walletAddress:c})),{notifyOnChangeProps:["data"],suspense:!0,enabled:d});return(0,n.useMemo)((()=>({isWatching:!!d&&l?.isWatching,isWatchable:!!d&&l?.isWatchable})),[l?.isWatchable,l?.isWatching,d])}(e);if(void 0===a)throw new Error("useAssetWatchlistState: didn't receive isWatching data");const[s,i]=(0,n.useState)(a);(0,n.useEffect)((function(){i(a)}),[a]);const c=(0,n.useCallback)((function(){i((e=>!e))}),[]);return(0,n.useMemo)((()=>({isWatching:s,isWatchable:t,optimisticUpdate:c,resetUpdate:c})),[t,s,c])}},57256:(e,t,a)=>{a.d(t,{R:()=>i});var n=a(14041),r=a(38851),o=a(31700),s=a(3887);function i({networkId:e,chainId:t,contractAddress:a,symbol:i,type:c,walletAddress:d,handleSuccess:l,handleError:u}){const{mutateAsync:h,isLoading:m}=(0,r.n)({mutationFn:async()=>(0,s.Qv)({networkId:e,chainId:t,contractAddress:a,symbol:i,type:c,walletAddress:d})}),p=(0,n.useCallback)((async function(){try{await h(),o.qQ.invalidateQueries([s.SS,d]),o.qQ.invalidateQueries([d,i]),l({isWatchingUpdate:!1})}catch(e){u(e)}}),[h,d,i,l,u]);return(0,n.useMemo)((()=>({removeFromWatchlist:p,isRemoving:m})),[m,p])}},27224:(e,t,a)=>{a.d(t,{X:()=>r});var n=a(8867);function r(e){const{formatNumber:t}=(0,n.A)();return e.latestPrice?t(Math.abs(Number(e.latestPrice.amount.amount)),{style:"currency",currency:e.latestPrice.amount.currency,minimumFractionDigits:e.latestPrice.amount.scale}):""}}}]);
//# sourceMappingURL=203.js.map