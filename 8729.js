/*! For license information please see 8729.js.LICENSE.txt */
"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[8729],{65236:(e,t,n)=>{n.r(t),n.d(t,{CollectibleBuyListing:()=>y});var o,r=n(14041),i=n(23291),a=n(79071),l=n.n(a),s=n(92271),c=n(15654),u=n(66491),d=n(82501),f=n(98883),g=n(31085);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var p,b,m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},y=(0,r.memo)(m((function(){var e=(0,r.useCallback)((function(e){var t=e.error,n=e.errorHash;(0,i.op)({errorHash:n,errorMessage:t.message})}),[]),t=(0,r.useCallback)((function(e){var t=e.error;return(0,g.jsx)(u.U,{error:t})}),[]);return(0,g.jsx)(c.T,{height:"100%",testID:"collectible-buy-listing-wrapper",overflow:"scroll",children:(0,g.jsx)(s.t,{onError:e,renderFallback:t,children:(0,g.jsx)(f.Zd.Provider,{onSubmit:l(),initialValues:f.LX,children:(0,g.jsx)(f.Im.Provider,{children:(0,g.jsx)(d.q,{})})})})})}),"useCallback{logGlobalError}\nuseCallback{renderFallback}"));(p="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&p.register(y,"CollectibleBuyListing","/workspaces/apps/extension/src/screens/CollectibleBuyListing/CollectibleBuyListing.tsx"),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)},82501:(e,t,n)=>{n.d(t,{q:()=>p});var o,r=n(14041),i=n(6595),a=n(47299),l=n(19443),s=n(25655),c=n(87745),u=n(98883),d=n(31085);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var f,g,p=(0,r.memo)((function(){return(0,d.jsxs)(u.Im.Steps,{children:[(0,d.jsx)(c.C,{},"collectibleListingDetail"),(0,d.jsx)(a.I,{},"collectibleBuyListingInsufficientFunds"),(0,d.jsx)(i.E,{},"collectibleBuyListingConfirmation"),(0,d.jsx)(l.m,{},"collectibleBuyListingPhoneConfirmation"),(0,d.jsx)(s.L,{},"collectibleBuyListingStatus")]})}));(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&f.register(p,"CollectibleBuyListingStepper","/workspaces/apps/extension/src/screens/CollectibleBuyListing/CollectibleBuyListingStepper.tsx"),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},6595:(e,t,n)=>{n.d(t,{E:()=>R});var o=n(14041),r=n(32183),i=n(8867),a=n(86090),l=n(23291),s=n(87432),c=n(53404),u=n(7427),d=n(84632),f=n(24117),g=n(84168),p=n(64292),b=n(70960),m=n(69148),y=n(48097),h=n(70918),v=n(46845),x=n(32451),L=n(4118),C=n(61513),k=n(64887),w=n(24745),I=n(33396),T=n(37121),M=n(28672),S=n(98883),_=n(4244),E=n(36760),B=n(63162),A=n(16238),P=n.n(A);const j=(0,r.YK)({address:{id:"+pVL1h",defaultMessage:"Address"},walletUsed:{id:"H6R25Z",defaultMessage:"Wallet used"},network:{id:"0araSK",defaultMessage:"Network"},networkFee:{id:"/vyFO4",defaultMessage:"Network fee"}});function H({unsignedTx:e,wallet:t}){const{formatMessage:n}=(0,i.A)(),r=e.network.asChain()?.blockExplorerUrl||"",a=(0,E.j)(t),{formatToFiat:l,formatToFiatFeeRange:s}=(0,_.J9)(),c=(0,o.useMemo)((()=>{let n="";if(a){const t=e;n=s({fromCurrencyCode:t.feeCurrencyCode,decimals:t.feeCurrencyDecimal,upperBoundValue:t.upperBoundFee,isAbbreviated:!1,lowerBoundValue:t.lowerBoundFee,network:t.network,blockchain:t.blockchain})}else n=l({fromCurrencyCode:e.feeCurrencyCode,decimals:e.feeCurrencyDecimal,value:e.estimatedFee,isAbbreviated:!1,contractAddress:void 0,network:t.network,blockchain:t.blockchain});return n??""}),[a,e,s,l,t.network,t.blockchain]);return P()([{label:n(j.address),detailText:{text:(0,B.$)(e.recipientAddress),blockExplorerUrl:`${r}/address/${e.recipientAddress}`}},{label:n(j.walletUsed),detailText:{text:(0,B.$)(t.primaryAddress),blockExplorerUrl:`${r}/address/${t.primaryAddress}`}},{label:n(j.network),detailText:t.network.asChain()?.displayName||""},{label:n(j.networkFee),detailText:c}])}var D,G=n(50400),O=n(31085);e=n.hmd(e),(D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&D(e);var N,F,U="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},W=(0,r.YK)({buy:{id:"kBH2Wf",defaultMessage:[{type:0,value:"Buy"}]},cancel:{id:"Usjb5x",defaultMessage:[{type:0,value:"Cancel"}]},confirm:{id:"N2IrpM",defaultMessage:[{type:0,value:"Confirm"}],descriptin:"Button text for confirming a transaction"}}),R=(0,o.memo)(U((function(){var e,t=(0,f.gs)(),n=(0,d.n)(),r=(0,i.A)().formatMessage,_=(0,T.A)(S.Zd),E=_.unsignedTx.value,B=_.wallet.value,A=_.signedTx.onChange,P=_.txSigningError.onChange,j=_.platformDomain.value,D=(0,I.lE)(S.Im).goToStep,N=(0,a.g)(),F=N.contractAddress,U=N.tokenId,R=N.chainId,z=N.marketplace,V=N.offchainOrderId,K=(0,o.useMemo)((function(){return{contractAddress:F,tokenId:U,chainId:R,marketplace:z,offchainOrderId:V}}),[F,U,R,z,V]),X=(0,L.z)(x.fO.nft_listing_detail,x.H5.load_collectible_listing_confirmation,{logMetric:!0}).end;if((0,s.y)((function(){X()})),(0,l.j7)(K),!E)throw new Error("CollectibleBuyListingConfirmation: unsignedTx needs to be defined");var Y=(0,o.useMemo)((function(){if(!B)throw new Error("CollectibleBuyListingConfirmation: wallet needs to be defined");return B}),[B]),$=(0,h.h)(),Z=(0,v.J)($,E),q=H({unsignedTx:E,wallet:Y}),Q=(0,p.Z)({unsignedTxOrUserOp:E,wallet:Y,feeWallet:Z,flow:"buyListing"}),J=(0,m.f)(),ee=(0,y.u)({request:"buy-nft-listing",unsignedTxOrUserOp:E,wallet:Y}),te=ee.txScannerData,ne=ee.txScannerNotices,oe=ee.isTxScannerLoading,re=ee.isTxScannerError,ie=ee.txScannerLoadStartTime,ae=ee.resetLoadTimer,le=(0,g.X)(te),se=(0,b.$)({request:"buy-nft-listing",dappURL:j,blockchain:Y.blockchain.toString(),txScannerData:te,txScannerNotices:ne,walletIndex:null===(e=Y.selectedIndex)||void 0===e?void 0:e.toString(),isTxPreviewEnabled:J}),ce=(0,u.vQ)(Y.accountId),ue=ce.hasLocallyStoredKey,de=ce.isLedgerAccount,fe=(0,o.useCallback)((function(){de?(0,l.Ct)():ue&&(0,l.ec)()}),[ue,de]),ge=(0,o.useCallback)((function(){de&&(0,l.Vm)(),ue&&(0,l.Eo)()}),[ue,de]),pe=(0,o.useCallback)((function(){D("collectibleBuyListingPhoneConfirmation")}),[D]),be=(0,o.useCallback)((function(e){fe(),P(e),D("collectibleBuyListingStatus")}),[fe,P,D]),me=(0,o.useCallback)((function(e){ge(),A(e),D("collectibleBuyListingStatus")}),[ge,A,D]),ye=(0,o.useCallback)((function(){(0,l.vH)(K),D("collectibleListingDetail")}),[D,K]),he=(0,o.useCallback)((function(){(0,l.Rr)(K)}),[K]),ve=(0,G.A)({wallet:Y,unsignedTx:E,flow:c.nl.NftBuyListing,error:Q,confirmText:r(W.buy),cancelText:r(W.cancel),goToPhoneConfirmation:pe,onSignSuccess:me,onSignError:be,onCancel:ye,onConfirm:he,signButtonFirst:!1}),xe=ve.buttonProps,Le=ve.hardwareWalletScreen,Ce=ve.isHardwareWalletSigning,ke=(0,o.useMemo)((function(){var e,o;return!J||re?(0,O.jsx)(k.F,{analyticsData:se,txScannerNotices:ne}):oe?(0,O.jsx)(w.l,{}):(null==te||null===(e=te.assetChangeOperations)||void 0===e?void 0:e.length)||(null==te||null===(o=te.preAuthorizeOperations)||void 0===o?void 0:o.length)?(0,O.jsx)(C.B,{resetLoadTimer:ae,txScannerLoadStartTime:null==ie?void 0:ie.current,parsedOperations:te,userWalletAddress:Y.primaryAddress,analyticsData:se,isRevokeOperation:le,networkChainId:R,exchangeRatesMap:t,activeFiatCurrency:n}):(0,O.jsx)(k.F,{analyticsData:se,txScannerNotices:ne})}),[J,re,oe,te,se,ne,ae,ie,Y.primaryAddress,le,R,t,n]);return Ce?Le:(0,O.jsx)(M.Z,{headerText:r(W.buy),topSection:ke,detailRowItems:q,buttonProps:xe,handleBackButton:ye,error:Q})}),"useExchangeRatesMap{exchangeRatesMap}\nuseActiveFiatCurrency{activeFiatCurrency}\nuseIntl{{ formatMessage }}\nuseFields{{\n    unsignedTx: { value: unsignedTx },\n    wallet: { value: walletValue },\n    signedTx: { onChange: signedTxOnChange },\n    txSigningError: { onChange: txSigningErrorOnChange },\n    platformDomain: { value: platformDomainValue },\n  }}\nuseStepper{{ goToStep }}\nuseParams{{ contractAddress, tokenId, chainId, marketplace, offchainOrderId }}\nuseMemo{collectibleListingAnalyticsData}\nuseExtensionPerfMark{{ end: endLoadListingConfirmationPerfMark }}\nuseOnMount{}\nuseLogCollectibleListingConfirmationViewed{}\nuseMemo{wallet}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseTxFeeWallet{feeWallet}\nuseTransactionDetailRowItems{detailRowItems}\nuseTransactionDetailsErrors{transactionDetailsErrors}\nuseIsTxPreviewEnabled{isTxPreviewEnabled}\nuseTxScanner{{\n    txScannerData: parsedOperations,\n    txScannerNotices,\n    isTxScannerLoading,\n    isTxScannerError,\n    txScannerLoadStartTime,\n    resetLoadTimer,\n  }}\nuseIsRevokeOperation{isRevokeOperation}\nuseSignTransactionEventData{analyticsData}\nuseAccountById{{ hasLocallyStoredKey, isLedgerAccount }}\nuseCallback{logSigningErrorEvent}\nuseCallback{logSigningSuccessEvent}\nuseCallback{handleGoToPhoneConfirmation}\nuseCallback{handleSigningError}\nuseCallback{handleSigningSuccess}\nuseCallback{handleCancel}\nuseCallback{handleBuy}\nuseCollectibleTransactionSignAndSubmit{{ buttonProps, hardwareWalletScreen, isHardwareWalletSigning }}\nuseMemo{topSection}",(function(){return[f.gs,d.n,i.A,T.A,I.lE,a.g,L.z,s.y,l.j7,h.h,v.J,H,p.Z,m.f,y.u,g.X,b.$,u.vQ,G.A]})));(N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(N.register(W,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingConfirmation/CollectibleBuyListingConfirmation.tsx"),N.register(R,"CollectibleBuyListingConfirmation","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingConfirmation/CollectibleBuyListingConfirmation.tsx")),(F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&F(e)},47299:(e,t,n)=>{n.d(t,{I:()=>S});var o,r=n(14041),i=n(32183),a=n(8867),l=n(86090),s=n(23291),c=n(87432),u=n(32451),d=n(10058),f=n(4681),g=n(4118),p=n(33396),b=n(37121),m=n(85581),y=n(98139),h=n(15654),v=n(60149),x=n(97541),L=n(98883),C=n(41690),k=n(31085);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var w,I,T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},M=(0,i.YK)({notEnoughEth:{id:"nKfvOv",defaultMessage:[{type:0,value:"You don't have enough ETH to buy this NFT"}]},notEnoughEthDescription:{id:"bA/MSM",defaultMessage:[{type:0,value:"You can buy or transfer ETH using your Coinbase account or transfer it from another wallet."}]},buyOrTransfer:{id:"TzU5tO",defaultMessage:[{type:0,value:"Buy or transfer with Coinbase"}]},transferFromAnotherWallet:{id:"d1kD9D",defaultMessage:[{type:0,value:"Transfer from another wallet"}]}}),S=(0,r.memo)(T((function(){var e=(0,b.A)(L.Zd).wallet,t=(0,a.A)().formatMessage,n=(0,l.W6)().push,o=(0,p.lE)(L.Im).goBack,i=(0,l.g)(),w=i.contractAddress,I=i.tokenId,T=i.chainId,S=(0,r.useMemo)((function(){return{contractAddress:w,tokenId:I,chainId:T}}),[w,I,T]),_=(0,g.z)(u.fO.nft_listing_detail,u.H5.load_collectible_listing_confirmation,{logMetric:!1}).clear;(0,c.y)((function(){_()})),(0,s.J6)(S);var E=(0,r.useCallback)((function(){(0,s.Fc)(S),n((0,l.tW)(C.Q.ONRAMP_INTERSTITIAL,{mode:"nft"}))}),[S,n]),B=(0,r.useCallback)((function(){var t;(0,s.OV)(S),n((0,l.tW)(C.Q.RECEIVE_ADDRESS,{walletId:null===(t=e.value)||void 0===t?void 0:t.id}))}),[S,n,e.value]);return(0,k.jsxs)(f.ff,{header:(0,k.jsx)(d.jq,{variant:"secondary",handleBack:o}),children:[(0,k.jsxs)(h.T,{width:"100%",gap:2,alignItems:"center",spacingHorizontal:3,children:[(0,k.jsx)(y.K,{name:"noFees",dimension:"200x200"}),(0,k.jsx)(v.f,{as:"p",align:"center",children:t(M.notEnoughEth)}),(0,k.jsx)(x.K,{as:"p",align:"center",color:"foregroundMuted",children:t(M.notEnoughEthDescription)})]}),(0,k.jsxs)(h.T,{width:"100%",spacing:2,gap:2,children:[(0,k.jsx)(m.$,{block:!0,variant:"primary",onPress:E,children:t(M.buyOrTransfer)}),(0,k.jsx)(m.$,{block:!0,variant:"secondary",onPress:B,children:t(M.transferFromAnotherWallet)})]})]})}),"useFields{{ wallet: walletField }}\nuseIntl{{ formatMessage }}\nuseHistory{{ push }}\nuseStepper{{ goBack }}\nuseParams{{ contractAddress, tokenId, chainId }}\nuseMemo{analyticsData}\nuseExtensionPerfMark{{ clear: clearLoadListingConfirmationPerfMark }}\nuseOnMount{}\nuseLogCollectibleListingInsufficientFundsViewed{}\nuseCallback{handleBuyPress}\nuseCallback{handleTransferPress}",(function(){return[b.A,a.A,l.W6,p.lE,l.g,g.z,c.y,s.J6]})));(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(M,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingInsufficientFunds/CollectibleBuyListingInsufficientFunds.tsx"),w.register(S,"CollectibleBuyListingInsufficientFunds","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingInsufficientFunds/CollectibleBuyListingInsufficientFunds.tsx")),(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&I(e)},19443:(e,t,n)=>{n.d(t,{m:()=>_});var o,r=n(14041),i=n(32183),a=n(8867),l=n(86090),s=n(23291),c=n(26182),u=n(87432),d=n(21413),f=n(33396),g=n(37121),p=n(72162),b=n(93754),m=n(98883),y=n(50271),h=n(31085);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function x(){x=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var i=t&&t.prototype instanceof y?t:y,a=Object.create(i.prototype),l=new A(o||[]);return r(a,"_invoke",{value:S(e,n,l)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",g="suspendedYield",p="executing",b="completed",m={};function y(){}function h(){}function L(){}var C={};c(C,a,(function(){return this}));var k=Object.getPrototypeOf,w=k&&k(k(P([])));w&&w!==n&&o.call(w,a)&&(C=w);var I=L.prototype=y.prototype=Object.create(C);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function n(r,i,a,l){var s=d(e[r],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==v(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,l)}))}l(s.arg)}var i;r(this,"_invoke",{value:function(e,o){function r(){return new t((function(t,r){n(e,o,t,r)}))}return i=i?i.then(r,r):r()}})}function S(t,n,o){var r=f;return function(i,a){if(r===p)throw Error("Generator is already running");if(r===b){if("throw"===i)throw a;return{value:e,done:!0}}for(o.method=i,o.arg=a;;){var l=o.delegate;if(l){var s=_(l,o);if(s){if(s===m)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===f)throw r=b,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=p;var c=d(t,n,o);if("normal"===c.type){if(r=o.done?b:g,c.arg===m)continue;return{value:c.arg,done:o.done}}"throw"===c.type&&(r=b,o.method="throw",o.arg=c.arg)}}}function _(t,n){var o=n.method,r=t.iterator[o];if(r===e)return n.delegate=null,"throw"===o&&t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==o&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var i=d(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(v(t)+" is not iterable")}return h.prototype=L,r(I,"constructor",{value:L,configurable:!0}),r(L,"constructor",{value:h,configurable:!0}),h.displayName=c(L,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,L):(e.__proto__=L,c(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},T(M.prototype),c(M.prototype,l,(function(){return this})),t.AsyncIterator=M,t.async=function(e,n,o,r,i){void 0===i&&(i=Promise);var a=new M(u(e,n,o,r),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(I),c(I,s,"Generator"),c(I,a,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=P,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(o,r){return l.type="throw",l.arg=t,n.next=o,r&&(n.method="next",n.arg=e),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),B(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;B(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:P(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),m}},t}function L(e,t,n,o,r,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(o,r)}function C(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){L(i,o,r,a,l,"next",e)}function l(e){L(i,o,r,a,l,"throw",e)}a(void 0)}))}}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=i.call(n)).done)&&(l.push(o.value),l.length!==t);s=!0);}catch(e){c=!0,r=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var I,T,M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},S=(0,i.YK)({title:{id:"uxLC8E",defaultMessage:[{type:0,value:"Confirm transaction"}]},confirmOnPhone:{id:"LKMb7n",defaultMessage:[{type:0,value:"Confirm on phone"}]},confirmOnPhoneDescription:{id:"In3vOT",defaultMessage:[{type:0,value:"Open Coinbase Wallet on your phone to confirm this transaction."}]},resendNotificationHelperText:{id:"ZxCo5e",defaultMessage:[{type:0,value:"Don't see the notification?"}]},stillNotSeeingYourNotificationHelperText:{id:"Gdu4kE",defaultMessage:[{type:0,value:"Still don't see the notification? "},{type:1,value:"reconnectWallet"}]},reconnectWallet:{id:"s6u5ob",defaultMessage:[{type:0,value:"Reconnect your wallet"}]},retry:{id:"td35SU",defaultMessage:[{type:0,value:"Resend notification"}]}}),_=(0,r.memo)(M((function(){var e=(0,a.A)().formatMessage,t=(0,f.lE)(m.Im),n=t.goBack,o=t.goToStep,i=(0,g.A)(m.Zd),v=i.wallet,L=i.unsignedTx,w=i.txSigningError,I=i.signedTx,T=k((0,r.useState)(0),2),M=T[0],_=T[1],E=(0,r.useContext)(b.g).signOut,B=(0,l.g)(),A=B.contractAddress,P=B.tokenId,j=B.chainId,H=(0,r.useMemo)((function(){return{contractAddress:A,tokenId:P,chainId:j}}),[A,P,j]);if((0,s.B_)(H),null==v||!v.value)throw new Error("CollectibleBuyListingPhoneConfirmation: Wallet does not exist");if(!L.value)throw new Error("CollectibleBuyListingPhoneConfirmation: unsignedTx does not exist");var D=(0,r.useCallback)((function(e){(0,s.Pj)(),I.onChange(e),o("collectibleBuyListingStatus")}),[o,I]),G=(0,r.useCallback)((function(e){e.name===c.c.userRejectedWalletLinkRequest.name?(0,s.wQ)():(0,s.hj)(),w.onChange(e),o("collectibleBuyListingStatus")}),[w,o]),O=(0,r.useCallback)((function(){E()}),[E]),N=(0,y.$)({wallet:v.value,unsignedTx:L.value,onSuccess:D,onError:G}),F=N.signAndSubmitViaWalletlink,U=N.isUserCancelled,W=(0,r.useCallback)(C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,s.BF)(H),_((function(e){return e+1})),e.next=4,F();case 4:case"end":return e.stop()}}),e)}))),[H,F]);(0,u.y)((function(){F()}));var R=(0,r.useMemo)((function(){return{label:e(S.retry),onClick:(t=C(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.current=!0,e.next=3,W();case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})};var t}),[e,U,W]),z=(0,r.useMemo)((function(){return e(S.stillNotSeeingYourNotificationHelperText,{reconnectWallet:(0,h.jsx)(p.N_,{variant:"label1",color:"foregroundMuted",onPress:O,children:e(S.reconnectWallet)})})}),[e,O]),V=(0,r.useCallback)((function(){U.current=!0,n()}),[n,U]);return(0,h.jsx)(d._,{title:e(S.confirmOnPhone),description:e(S.confirmOnPhoneDescription),retryAction:R,secondaryActionLabel:e(S.resendNotificationHelperText),reconnectLabel:M>=4?z:void 0,onDismiss:V})}),"useIntl{{ formatMessage }}\nuseStepper{{ goBack, goToStep }}\nuseFields{{ wallet, unsignedTx, txSigningError, signedTx }}\nuseState{[sendRetryCount, setSendRetryCount](0)}\nuseContext{{ signOut }}\nuseParams{{ contractAddress, tokenId, chainId }}\nuseMemo{analyticsData}\nuseLogCollectibleListingPhoneConfirmationViewed{}\nuseCallback{onSuccess}\nuseCallback{onError}\nuseCallback{onSignOut}\nuseSignAndSubmitViaWalletlink{{ signAndSubmitViaWalletlink, isUserCancelled }}\nuseCallback{retryAction}\nuseOnMount{}\nuseMemo{retryActionProps}\nuseMemo{reconnectLabel}\nuseCallback{handleDismiss}",(function(){return[a.A,f.lE,g.A,l.g,s.B_,y.$,u.y]})));(I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(I.register(S,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingPhoneConfirmation/CollectibleBuyListingPhoneConfirmation.tsx"),I.register(_,"CollectibleBuyListingPhoneConfirmation","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingPhoneConfirmation/CollectibleBuyListingPhoneConfirmation.tsx")),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&T(e)},25655:(e,t,n)=>{n.d(t,{L:()=>T});var o,r=n(14041),i=n(32183),a=n(8867),l=n(86090),s=n(23291),c=n(4244),u=n(87432),d=n(52617),f=n(33396),g=n(37121),p=n(60149),b=n(97541),m=n(98883),y=n(41690),h=n(31085);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function L(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=v(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var C,k,w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},I=(0,i.YK)({title:{id:"Py41Hm",defaultMessage:[{type:0,value:"Your purchase is in progress"}]},failureTitle:{id:"m2ulu0",defaultMessage:[{type:0,value:"Something went wrong"}]},failureDescriptionUnknownError:{id:"5FdjQq",defaultMessage:[{type:0,value:"Please try again later."}]},goBack:{id:"H5+jZp",defaultMessage:[{type:0,value:"Go back"}]},done:{id:"6qlzBr",defaultMessage:[{type:0,value:"Done"}]},viewTranaction:{id:"G3i41f",defaultMessage:[{type:0,value:"View transaction"}]},description:{id:"jUgCi8",defaultMessage:[{type:0,value:"You paid "},{type:1,value:"eth"},{type:0,value:" to buy "},{type:1,value:"nftName"},{type:0,value:". No need to wait, we'll let you know when it's complete."}]}});function T(){var e=(0,a.A)().formatMessage,t=(0,l.W6)().push,n=(0,g.A)(m.Zd),o=n.unsignedTx,i=n.signedTx,v=n.txSigningError,C=n.collectible,k=n.wallet,w=(0,f.lE)(m.Im).goToStep,T=(0,l.g)(),M=T.contractAddress,S=T.tokenId,_=T.chainId,E=(0,r.useMemo)((function(){return{contractAddress:M,tokenId:S,chainId:_}}),[M,S,_]),B=(0,c.J9)().formatToCrypto,A=(0,r.useMemo)((function(){return i.value?d.n.SUCCESS:d.n.FAILURE}),[i.value]);(0,u.y)((function(){A===d.n.SUCCESS?(0,s.Uz)(E):(0,s.V2)(E)}));var P=(0,r.useCallback)((function(){(0,s.hm)(E),t(y.Q.TRANSACTIONS)}),[E,t]),j=(0,r.useCallback)((function(){(0,s.Q)(E),w("collectibleListingDetail")}),[E,w]),H=(0,r.useCallback)((function(){(0,s.FP)(E),w("collectibleListingDetail")}),[E,w]),D=(0,r.useMemo)((function(){return{key:"done",children:e(I.done),variant:"primary",onPress:j,testID:"buy-listing-success-done-btn"}}),[e,j]),G=(0,r.useMemo)((function(){return{key:"view-transaction",children:e(I.viewTranaction),variant:"secondary",onPress:P,testID:"buy-listing-view-transaction-btn"}}),[e,P]),O=(0,r.useMemo)((function(){return{key:"go-back",children:e(I.goBack),variant:"primary",onPress:H,testID:"buy-listing-failure-go-back-btn"}}),[e,H]),N=(0,r.useMemo)((function(){return B({currencyCode:k.value.currencyCode,decimals:k.value.decimals,value:o.value.transferValue,overridePrivacy:!0})}),[k.value,o.value,B]),F=(0,r.useMemo)((function(){var t,n;return A===d.n.SUCCESS?{status:A,title:(0,h.jsx)(p.f,{as:"span",children:e(I.title)}),amount:"",description:(0,h.jsx)(b.K,{as:"label",color:"foregroundMuted",children:e(I.description,{eth:N,nftName:null===(n=C.value)||void 0===n?void 0:n.name})}),primaryButtonProps:D,secondaryButtonProps:G}:{status:A,title:(0,h.jsx)(p.f,{as:"span",children:e(I.failureTitle)}),description:(0,h.jsx)(b.K,{as:"label",color:"foregroundMuted",children:(null===(t=v.value)||void 0===t?void 0:t.message)||e(I.failureDescriptionUnknownError)}),primaryButtonProps:O}}),[D,G,O,e,A,C.value,v.value,N]);return(0,h.jsx)(d.x,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},F))}w(T,"useIntl{{ formatMessage }}\nuseHistory{{ push }}\nuseFields{{\n    unsignedTx: unsignedTxField,\n    signedTx: signedTxField,\n    txSigningError: txSigningErrorField,\n    collectible: collectibleField,\n    wallet: walletField,\n  }}\nuseStepper{{ goToStep }}\nuseParams{{ contractAddress, tokenId, chainId }}\nuseMemo{analyticsData}\nuseCurrencyFormatter{{ formatToCrypto }}\nuseMemo{status}\nuseOnMount{}\nuseCallback{handleViewTransaction}\nuseCallback{handleDone}\nuseCallback{handleBack}\nuseMemo{doneButton: ButtonProps}\nuseMemo{viewTransactionButton: ButtonProps}\nuseMemo{goBackButton: ButtonProps}\nuseMemo{currencyAmountDisplay}\nuseMemo{transactionStatusProps: TransactionStatusProps}",(function(){return[a.A,l.W6,g.A,f.lE,l.g,c.J9,u.y]})),(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(C.register(I,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingStatus/CollectibleBuyListingStatus.tsx"),C.register(T,"CollectibleBuyListingStatus","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleBuyListingStatus/CollectibleBuyListingStatus.tsx")),(k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&k(e)},87745:(e,t,n)=>{n.d(t,{C:()=>z});var o=n(14041),r=n(32183),i=n(8867),a=n(86090),l=n(23291),s=n(87432),c=n(59659),u=n(63753);const d=(0,r.YK)({saleEndsIn:{id:"i+qIah",defaultMessage:"Sale ends in {time}"},saleEndsOn:{id:"Oizkka",defaultMessage:"Sale ends on {date}"}});function f(e){const{formatMessage:t}=(0,i.A)(),{value:n,type:o}=(0,u._)(e?.expirationTime);return o===u.d.TIME?{message:t(d.saleEndsIn,{time:n}),type:o}:n?{message:t(d.saleEndsOn,{date:n}),type:o}:{message:"",type:o}}var g=n(98053),p=n(28336);function b({contractAddress:e,tokenId:t,chainId:n,walletAddress:o,orderId:r=""}){return(0,g.I)([p.mC,e,t,n,o],(async()=>(0,p.QT)({contractAddress:e,tokenId:t,chainId:n,walletAddress:o,orderId:r})),{suspense:!1,useErrorBoundary:!1,staleTime:0,refetchInterval:!1,notifyOnChangeProps:["data"],retry:!1})}var m=n(27141),y=n(7124);function h({contractAddress:e,tokenId:t,chainId:n,wallet:r,orderId:i="",platformName:a}){const[s,c]=(0,o.useState)(!1),u=(0,o.useCallback)((e=>{e?.message?.includes("Balance too low")?(0,l.Ul)():(0,l.pT)(),c(!1)}),[]),d=(0,o.useCallback)((()=>{(0,l.rh)(),c(!1)}),[]),f=(0,o.useCallback)((()=>{(0,l.Un)(),c(!1)}),[]),{data:b,refetch:h,error:v}=function({contractAddress:e,tokenId:t,chainId:n,walletAddress:o,orderId:r,suspense:i=!0,enabled:a=!0,onSuccess:l,onError:s}){return(0,g.I)([p.IC,e,t,n,o,r,i],(async()=>(0,p.KC)({contractAddress:e,tokenId:t,chainId:n,walletAddress:o,orderId:r})),{suspense:i,useErrorBoundary:!1,staleTime:0,refetchInterval:!1,notifyOnChangeProps:["data"],retry:!1,cacheTime:0,enabled:a,onSuccess:l,onError:s})}({contractAddress:e,tokenId:t,chainId:n,walletAddress:r.primaryAddress,orderId:i,enabled:!1,onSuccess:l.cE,onError:u,suspense:!1}),x=(0,o.useMemo)((()=>{if(b)return b.steps[0].executables.map((({transaction:e})=>e))}),[b]),{txs:L,error:C}=(0,y.t)({wallet:r,transactions:x,platformName:a,txTokenAddress:m.DX,chainId:n,flow:"nftBuyListing",onGenerateUnsignedTransactionSuccess:d,onGenerateUnsignedTransactionError:f}),k=(0,o.useCallback)((function(){h(),c(!0)}),[h]);return(0,o.useMemo)((()=>({fetchBuyListingData:k,isFetching:s,txs:L,error:v??C})),[k,s,L,v,C])}var v,x=n(95516),L=n(77365),C=n(77235),k=n(57321),w=n(70918),I=n(57822),T=n(32451),M=n(4681),S=n(4118),_=n(33396),E=n(37121),B=n(98883),A=n(29589),P=n(16510),j=n(77448),H=n(17677),D=n(31085);e=n.hmd(e),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&v(e);var G,O,N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},F=(0,r.YK)({buy:{id:"PTqFaz",defaultMessage:[{type:0,value:"Buy"}]},buyInProgress:{id:"kd0nu/",defaultMessage:[{type:0,value:"Buy in progress"}]}}),U=["reservoir"],W=(0,o.memo)(N((function(e){var t=e.collectible,n=e.listingDetails,r=e.wallet,a=e.chainId,u=e.offchainOrderId,d=void 0===u?"":u,g=(0,i.A)().formatMessage,p=(0,E.A)(B.Zd),b=p.unsignedTx.onChange,m=p.signedTx.value,y=p.wallet.onChange,v=p.collectible.onChange,x=p.platformDomain.onChange,L=(0,_.lE)(B.Im).goToStep,C=(0,c.f)(),w=(0,o.useMemo)((function(){return{contractAddress:t.contractAddress,tokenId:t.tokenId,chainId:a}}),[t,a]);(0,l.P5)(w);var I=(0,S.z)(T.fO.nft_listing_detail,T.H5.load_collectible_listing_detail,{logMetric:!0}).end,M=(0,S.z)(T.fO.nft_listing_detail,T.H5.load_collectible_listing_confirmation,{logMetric:!0}).start;(0,s.y)((function(){I()})),(0,o.useEffect)((function(){y(r)}),[y,r]);var P=f(n),G=(0,o.useMemo)((function(){return n.orderPrice||n.bestAskPrice}),[n]),O=G.platformDomain,N=G.platform,W=G.listingPrice,R=(0,o.useCallback)((function(e){var t;null!=e&&null!==(t=e.message)&&void 0!==t&&t.includes("Balance too low")?L("collectibleBuyListingInsufficientFunds"):C(e)}),[L,C]),z=h({contractAddress:t.contractAddress,tokenId:t.tokenId,chainId:a,wallet:r,orderId:d,platformName:N}),V=z.fetchBuyListingData,K=z.isFetching,X=z.txs,Y=z.error,$=(0,o.useCallback)((function(){(0,l.fS)(w),M(),V()}),[w,M,V]);(0,o.useEffect)((function(){if(Y||void 0===X)R(Y);else if(0!==X.length){var e=X[0];b(e),v(t),x(O),L("collectibleBuyListingConfirmation")}}),[X,b,v,x,L,t,Y,O,C,R]);var Z=(0,o.useMemo)((function(){return!U.includes(N.toLowerCase())}),[N]),q=(0,o.useMemo)((function(){return(null==m?void 0:m.state)===k.W.PENDING?g(F.buyInProgress):g(F.buy)}),[g,m]);return(0,D.jsx)(A.CollectibleDetailCommerceContent,{address:t.contractAddress,tokenId:t.tokenId,chainId:a,tokenCount:"",includeOffers:!1,from:"Listing",listingAmounts:(0,D.jsx)(j.q,{listingPrice:W}),actionBar:Z?(0,D.jsx)(H.I,{loading:K,disabled:(null==m?void 0:m.state)===k.W.PENDING,buttonText:q,onBuyPress:$,expirationTimeMessage:P.message,platform:N,platformDomain:O,bestPricePlatform:n.bestAskPrice.platform}):(0,D.jsx)(D.Fragment,{}),showNavbarExternalLinks:!0})}),"useIntl{{ formatMessage }}\nuseFields{{\n    unsignedTx: { onChange: unsignedTxOnChange },\n    signedTx: { value: signedTx },\n    wallet: { onChange: walletOnChange },\n    collectible: { onChange: collectibleOnChange },\n    platformDomain: { onChange: platformDomainOnChange },\n  }}\nuseStepper{{ goToStep }}\nuseRethrowError{rethrowError}\nuseMemo{analyticsData}\nuseLogCollectibleListingDetailViewed{}\nuseExtensionPerfMark{{ end: endLoadListingDetailPerfMark }}\nuseExtensionPerfMark{{ start: startLoadListingConfirmationPerfMark }}\nuseOnMount{}\nuseEffect{}\nuseCollectibleListingExpirationDateTime{expirationTime}\nuseMemo{{\n    platformDomain,\n    platform: platformName,\n    listingPrice,\n  }}\nuseCallback{handleGenerateListingError}\nuseGenerateCollectibleListingTransaction{{\n    fetchBuyListingData,\n    isFetching,\n    txs,\n    error: generateListingTxError,\n  }}\nuseCallback{handleBuyPress}\nuseEffect{}\nuseMemo{isBuyEnabledForMarketplace}\nuseMemo{buttonText}",(function(){return[i.A,E.A,_.lE,c.f,l.P5,S.z,S.z,s.y,f,h]}))),R=(0,o.memo)(N((function(){var e=(0,a.g)(),t=e.contractAddress,n=e.tokenId,r=e.chainId,i=e.offchainOrderId,l=(0,w.h)(),s=(0,I.e)(l),c=(0,o.useMemo)((function(){return(0,C.JT)(s,r)}),[s,r]);if(void 0===c)throw new Error("no wallet available");var u=(0,x.Q)(),d=(0,L.X)({contractAddress:t,tokenId:n,chainId:r,includeFloorPrice:u,suspense:!1,userAddress:c.primaryAddress}),f=d.data,g=d.isLoading,p=b({contractAddress:t,tokenId:n,chainId:r,walletAddress:c.primaryAddress,orderId:i}),m=p.data,y=p.isLoading;if(g||y)return(0,D.jsx)(P.Y,{renderBlockButton:!0});if(!f)throw new Error("Unable to find collectible listing token");if(!m)throw new Error("Unable to fetch listing. Listing may be expired or deleted.");return(0,D.jsx)(W,{collectible:f,listingDetails:m,wallet:c,chainId:r,offchainOrderId:i})}),"useParams{{ contractAddress, tokenId, chainId, offchainOrderId }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseWalletsForWalletGroupId{wallets}\nuseMemo{nftWallet}\nuseIsNFTFloorPriceEnabled{useFloorPrice}\nuseTokenDetails{{ data: collectible, isLoading: isTokenDetailsLoading }}\nuseCollectibleMarketplaceListingDetails{{ data: listingDetails, isLoading: isMarketplaceListingDetailsLoading }}",(function(){return[a.g,w.h,I.e,x.Q,L.X,b]}))),z=(0,o.memo)((function(){return(0,D.jsx)(M.ff,{children:(0,D.jsx)(R,{})})}));(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(G.register(F,"messages","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),G.register(U,"DISABLED_BUY_LISTING_MARKETPLACES","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),G.register(W,"CollectibleListingDetailContent","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),G.register(R,"CollectibleListingDetail","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx"),G.register(z,"CollectibleListingDetailWrapper","/workspaces/apps/extension/src/screens/CollectibleBuyListing/steps/CollectibleListingDetail/CollectibleListingDetail.tsx")),(O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&O(e)},77448:(e,t,n)=>{n.d(t,{q:()=>k});var o=n(14041),r=n(96295),i=n(4244),a=n(27301),l=n(52689),s=n(2845),c=n(99172);const u=4n;function d({ethDisplayDecimals:e=u,isFiatAbbreviated:t=!0}){const{formatToCrypto:n,formatToFiat:d}=(0,i.J9)();return(0,o.useCallback)((function(o){return{[s.n2.ETH]:n({currencyCode:l.j.ETH,decimals:r.Kp,value:BigInt(o),maxDisplayDecimals:e,includeCode:!1,overridePrivacy:!0}),[s.n2.USD]:d({fromCurrencyCode:l.j.ETH,decimals:r.Kp,value:BigInt(o),isAbbreviated:t,contractAddress:"",network:c.lg.fromChainId({chainPrefix:r.RC,chainId:1n}),blockchain:new a.J(r.fz),includeCode:!0,formatZeroBalance:!1,overridePrivacy:!0})}}),[n,d,e,t])}var f,g=n(2673),p=n(84492),b=n(15654),m=n(44659),y=n(67209),h=n(93571),v=n(31085);e=n.hmd(e),(f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&f(e);var x,L,C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},k=(0,o.memo)(C((function(e){var t=e.listingPrice,n=d({ethDisplayDecimals:4n,isFiatAbbreviated:!1}),r=(0,o.useMemo)((function(){var e;return(0,v.jsxs)(p.z,{alignItems:"center",children:[(0,v.jsx)(g.I,{size:"s",name:"ethereum",color:"foreground",spacingEnd:.5}),(0,v.jsx)(m.f,{testID:"collectible-listing-eth-price",as:"p",children:null!==(e=n(t)[s.n2.ETH])&&void 0!==e?e:h.rg})]})}),[t,n]),i=(0,o.useMemo)((function(){var e;return(0,v.jsx)(y.V,{testID:"collectible-listing-usd-price",as:"div",children:null!==(e="".concat(n(t)[s.n2.USD]))&&void 0!==e?e:h.rg})}),[t,n]);return(0,v.jsx)(p.z,{justifyContent:"space-between",spacingHorizontal:3,spacingTop:2,testID:"collectible-listing-section",children:(0,v.jsx)(b.T,{alignItems:"flex-start",children:(0,v.jsxs)(v.Fragment,{children:[r,i]})})})}),"useGetListingPrice{getListingPrice}\nuseMemo{cryptoAmount}\nuseMemo{usdAmount}",(function(){return[d]})));(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&x.register(k,"CollectibleBuyListingAmounts","/workspaces/apps/extension/src/screens/Explore/components/CollectibleBuyListingAmounts/CollectibleBuyListingAmounts.tsx"),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)},17677:(e,t,n)=>{n.d(t,{I:()=>C});var o,r=n(14041),i=n(32183),a=n(8867),l=n(77235),s=n(85581),c=n(2673),u=n(15654),d=n(84492),f=n(37742),g=n(35001),p=n(94330),b=n(93952),m=n(31085);e=n.hmd(e),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&o(e);var y,h,v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},x="16px",L=(0,i.YK)({bestPriceLabel:{id:"6S3s5y",defaultMessage:[{type:0,value:"Best price"}]},bestPriceTooltip:{id:"S0rT0i",defaultMessage:[{type:0,value:"Best price sourced from "},{type:1,value:"platformDomain"},{type:0,value:". We scan multiple marketplaces to find the lowest sale price for this item."}]}}),C=(0,r.memo)(v((function(e){var t=e.loading,n=e.disabled,o=e.buttonText,i=e.onBuyPress,y=e.expirationTimeMessage,h=e.platform,v=e.platformDomain,C=e.bestPricePlatform,k=(0,a.A)().formatMessage,w=(0,r.useMemo)((function(){return(0,l.t1)({platform:h})}),[h]),I=(0,r.useMemo)((function(){return(0,l.t1)({platform:C})}),[C]),T=(0,r.useMemo)((function(){return w===I}),[w,I]),M=(0,r.useMemo)((function(){return(0,b.D)(w)}),[w]);return(0,m.jsxs)(u.T,{spacing:2,gap:1,children:[(0,m.jsx)(s.$,{testID:"nft-native-buy-button",onPress:i,loading:t,disabled:n,children:(0,m.jsx)(d.z,{gap:1,alignItems:"center",children:o})}),(0,m.jsxs)(d.z,{gap:3,children:[y?(0,m.jsxs)(d.z,{alignItems:"center",gap:1,children:[(0,m.jsx)(c.I,{size:"xs",name:"clock",color:"foreground"}),(0,m.jsx)(p.C,{as:"p",children:y})]}):null,(0,m.jsxs)(d.z,{alignItems:"center",gap:1,children:[(0,m.jsx)(f.W,{width:x,height:x,alt:"platform",source:M,shape:"squircle"}),T?(0,m.jsx)(p.C,{as:"p",children:k(L.bestPriceLabel)}):w,T?(0,m.jsx)(g.m,{gap:0,content:k(L.bestPriceTooltip,{platformDomain:v}),placement:"bottom",children:(0,m.jsx)(c.I,{size:"xs",name:"info",color:"foreground",testID:"collectible-listing-actions-info-icon"})}):null]})]})]})}),"useIntl{{ formatMessage }}\nuseMemo{platformName}\nuseMemo{bestPricePlatformName}\nuseMemo{isBestPrice}\nuseMemo{platformIcon}",(function(){return[a.A]})));(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(y.register(x,"ICON_SIZE","/workspaces/apps/extension/src/screens/Explore/components/CollectibleListingActions/CollectibleListingActions.tsx"),y.register(L,"messages","/workspaces/apps/extension/src/screens/Explore/components/CollectibleListingActions/CollectibleListingActions.tsx"),y.register(C,"CollectibleListingActions","/workspaces/apps/extension/src/screens/Explore/components/CollectibleListingActions/CollectibleListingActions.tsx")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)},98883:(e,t,n)=>{n.d(t,{Im:()=>i,LX:()=>a,Zd:()=>l});var o=n(33396),r=n(40019);const i=(0,o.KT)({steps:["collectibleListingDetail","collectibleBuyListingInsufficientFunds","collectibleBuyListingConfirmation","collectibleBuyListingPhoneConfirmation","collectibleBuyListingStatus"],defaultStep:"collectibleListingDetail"}),a={unsignedTx:void 0,signedTx:void 0,txSigningError:void 0,collectible:void 0,wallet:void 0,platformDomain:void 0},l=(0,r.A)({initialValues:a})},23291:(e,t,n)=>{n.d(t,{BF:()=>p,B_:()=>g,Ct:()=>M,Eo:()=>L,FP:()=>h,Fc:()=>s,J6:()=>l,OV:()=>c,P5:()=>i,Pj:()=>k,Q:()=>y,Rr:()=>f,Ul:()=>B,Un:()=>_,Uz:()=>b,V2:()=>m,Vm:()=>T,cE:()=>E,ec:()=>C,fS:()=>a,hj:()=>I,hm:()=>v,j7:()=>u,op:()=>x,pT:()=>A,rh:()=>S,vH:()=>d,wQ:()=>w});var o=n(34767),r=n(55452);function i(e){(0,r.cp)("buy_nft_listing.listing_detail.viewed",{loggingId:"534e2621-aed0-4b69-a3d0-bc19b97ad51f",action:o.X2.view,componentType:o.I5.page,...e})}function a(e){(0,r.Np)("buy_nft_listing.listing_detail.buy.clicked",{loggingId:"6bdea0a7-220b-440c-8285-1fff2aa9c949",action:o.X2.click,componentType:o.I5.button,...e})}function l(e){(0,r.cp)("buy_nft_listing.insufficient_funds.viewed",{loggingId:"2154ad11-bba2-427c-ab5b-371b4b294125",action:o.X2.view,componentType:o.I5.page,...e})}function s(e){(0,r.Np)("buy_nft_listing.insufficient_funds.buy.clicked",{loggingId:"2154ad11-bba2-427c-ab5b-371b4b294125",action:o.X2.click,componentType:o.I5.button,...e})}function c(e){(0,r.Np)("buy_nft_listing.insufficient_funds.receive.clicked",{loggingId:"2154ad11-bba2-427c-ab5b-371b4b294125",action:o.X2.click,componentType:o.I5.button,...e})}function u(e){(0,r.cp)("buy_nft_listing.confirmation_detail.viewed",{loggingId:"da8dd111-3eee-4264-8950-f1bc30efe471",action:o.X2.view,componentType:o.I5.page,...e})}function d(e){(0,r.Np)("buy_nft_listing.confirmation.cancel.clicked",{loggingId:"37678dc2-113d-4fd0-8dc6-d0611dbdf37f",action:o.X2.click,componentType:o.I5.button,...e})}function f(e){(0,r.Np)("buy_nft_listing.confirmation.confirm.clicked",{loggingId:"12791a43-8859-4451-8b2b-10f1f44ec388",action:o.X2.click,componentType:o.I5.button,...e})}function g(e){(0,r.cp)("buy_nft_listing.phone_confirmation.viewed",{loggingId:"37f420b3-c5c4-4c16-a8cc-7e9805c7cc54",action:o.X2.view,componentType:o.I5.page,...e})}function p(e){(0,r.Np)("buy_nft_listing.phone_confirmation.retry.clicked",{loggingId:"08cf6906-93e8-4f91-86eb-db1f3f4fe817",action:o.X2.click,componentType:o.I5.button,...e})}function b(e){(0,r.Np)("buy_nft_listing.status.success.viewed",{loggingId:"43bdbe37-eb25-45a3-92e6-6483861da1e7",action:o.X2.view,componentType:o.I5.page,...e})}function m(e){(0,r.Np)("buy_nft_listing.status.error.viewed",{loggingId:"e6d91d50-0575-46e8-96e7-dba814e6191b",action:o.X2.view,componentType:o.I5.page,...e})}function y(e){(0,r.Np)("buy_nft_listing.status.done.clicked",{loggingId:"c93cf96c-e4cd-4665-8569-81adc21b9021",action:o.X2.click,componentType:o.I5.button,...e})}function h(e){(0,r.Np)("buy_nft_listing.status.back.clicked",{loggingId:"309d28a0-e061-4e48-b003-329e57656bcf",action:o.X2.click,componentType:o.I5.button,...e})}function v(e){(0,r.Np)("buy_nft_listing.status.view_transaction.clicked",{loggingId:"d4091d5b-70fe-4db7-99a3-ff50d1704fa9",action:o.X2.click,componentType:o.I5.button,...e})}function x({errorHash:e,errorMessage:t}){(0,r.$s)("collectible_buy_listing.full_screen_error.viewed",{errorHash:e,errorMessage:t,loggingId:"9be24857-d288-49f6-9748-d2cc77dd9889",action:o.X2.view,componentType:o.I5.page})}function L(){(0,r.N8)({metricName:"buy_nft_listing.confirm_standalone",metricType:o.vj.count,value:1})}function C(){(0,r.N8)({metricName:"buy_nft_listing.error_standalone",metricType:o.vj.count,value:1})}function k(){(0,r.N8)({metricName:"buy_nft_listing.phone_confirmation.mobile_approve",metricType:o.vj.count,value:1})}function w(){(0,r.N8)({metricName:"buy_nft_listing.phone_confirmation.mobile_cancel",metricType:o.vj.count,value:1})}function I(){(0,r.N8)({metricName:"buy_nft_listing.phone_confirmation.wallet_link_error",metricType:o.vj.count,value:1})}function T(){(0,r.N8)({metricName:"buy_nft_listing.confirm_ledger",metricType:o.vj.count,value:1})}function M(){(0,r.N8)({metricName:"buy_nft_listing.error_ledger",metricType:o.vj.count,value:1})}function S(){(0,r.N8)({metricName:"buy_nft_listing.generate_unsigned_tx_success",metricType:o.vj.count,value:1})}function _(){(0,r.N8)({metricName:"buy_nft_listing.generate_unsigned_tx_failure",metricType:o.vj.count,value:1})}function E(){(0,r.N8)({metricName:"buy_nft_listing.fetch_buy_tx_data_success",metricType:o.vj.count,value:1})}function B(){(0,r.N8)({metricName:"buy_nft_listing.fetch_buy_tx_data_insufficient_funds",metricType:o.vj.count,value:1})}function A(){(0,r.N8)({metricName:"buy_nft_listing.fetch_buy_tx_data_error",metricType:o.vj.count,value:1})}},59659:(e,t,n)=>{n.d(t,{f:()=>r});var o=n(14041);function r(){const[e,t]=(0,o.useState)(null);return(0,o.useEffect)((function(){if(e)throw e}),[e]),t}},36760:(e,t,n)=>{n.d(t,{j:()=>i});var o=n(14041),r=n(46122);function i(e){return(0,o.useMemo)((()=>!!e&&(0,r.US)(e.network)),[e])}},93652:(e,t,n)=>{function o(e,t={}){let n;try{n=e.getClient(t)}catch{}return n}n.d(t,{K:()=>o})},72707:(e,t,n)=>{n.d(t,{b:()=>r});var o=n(52845);const r=async(e,{hash:t})=>{const n=[t],r=await e.request({method:"eth_getUserOperationReceipt",params:n});if(!r)return null;return{userOpHash:r.userOpHash,sender:r.sender,nonce:BigInt(r.nonce),actualGasUsed:BigInt(r.actualGasUsed),actualGasCost:BigInt(r.actualGasCost),success:r.success,receipt:{transactionHash:r.receipt.transactionHash,transactionIndex:BigInt(r.receipt.transactionIndex),blockHash:r.receipt.blockHash,blockNumber:BigInt(r.receipt.blockNumber),from:r.receipt.from,to:r.receipt.to,cumulativeGasUsed:BigInt(r.receipt.cumulativeGasUsed),status:o.$[r.receipt.status],gasUsed:BigInt(r.receipt.gasUsed),contractAddress:r.receipt.contractAddress,logsBloom:r.receipt.logsBloom,effectiveGasPrice:BigInt(r.receipt.effectiveGasPrice)},logs:r.logs.map((e=>({data:e.data,blockNumber:BigInt(e.blockNumber),blockHash:e.blockHash,transactionHash:e.transactionHash,logIndex:BigInt(e.logIndex),transactionIndex:BigInt(e.transactionIndex),address:e.address,topics:e.topics})))}}}}]);
//# sourceMappingURL=8729.js.map