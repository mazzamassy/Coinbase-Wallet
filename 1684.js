/*! For license information please see 1684.js.LICENSE.txt */
"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[1684],{87755:(e,t,r)=>{r.d(t,{D:()=>A});var n,a=r(14041),o=r(32183),i=r(8867),s=r(33874),c=r(86768),u=r(50259),l=r(26958),d=r(24905),f=r(59706),p=r(52338),g=r(85581),h=r(34107),m=r(15654),y=r(55799),v=r(60149),b=r(97541),w=r(94330),S=r(98055),E=r(72162),x=r(95974),_=r(70660),M=r(81475),L=r(31085);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var j,T,O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},C="hw-trouble-connecting",k=(0,o.YK)({tryAgainCTA:{id:"FazwRl",defaultMessage:[{type:0,value:"Try again"}]},backButtonAriaLabel:{id:"p72mKW",defaultMessage:[{type:0,value:"Go back"}]},errorMessage:{id:"29gmtd",defaultMessage:[{type:0,value:"Error: "},{type:1,value:"error"}]},havingTrouble:{id:"sPl3k8",defaultMessage:[{type:0,value:"Having trouble?"}]},gotIt:{id:"NYTGIb",defaultMessage:[{type:0,value:"Got it"}]}});function A(e){var t=e.statusCode,r=e.errorMessage,n=e.errorId,o=e.handleBack,j=(0,i.A)().formatMessage,T=(0,x.A)().goBack,O=(0,s.f)();(0,M.R)("errorMessage:",r,"statusCode:",t,"errorId:",n);var A=(0,c.bV)(t,n),I=(0,a.useCallback)((function(){o?o():T()}),[T,o]),D=(0,a.useCallback)((function(){(0,_.p4)(u.CO.LEDGER)}),[]);return(0,L.jsxs)(m.T,{height:d.pA,justifyContent:"space-between",testID:"".concat(C,"-container"),children:[(0,L.jsxs)(m.T,{children:[(0,L.jsx)(y.a,{offsetStart:1,children:(0,L.jsx)(p.K,{testID:"".concat(C,"-back-btn"),name:"backArrow",onPress:I,transparent:!0,accessibilityLabel:j(k.backButtonAriaLabel)})}),(0,L.jsx)(m.T,{alignItems:"center",justifyContent:"flex-start",spacingTop:3,children:t===c.UB?(0,L.jsx)(h.g,{name:"ledgerSignatureRejected",scaleMultiplier:1}):(0,L.jsx)(f.t,{illustration:"LedgerErrorMiami",children:(0,L.jsx)(h.g,{name:"ledgerFailed",scaleMultiplier:1})})})]}),(0,L.jsxs)(m.T,{gap:2,children:[(0,L.jsx)(v.f,{as:"p",children:j(A[0])}),(0,L.jsx)(b.K,{as:"p",color:O?"foreground":"foregroundMuted",children:j(A[1])}),void 0!==t&&!(0,c.ux)(t)&&(0,L.jsx)(w.C,{as:"p",children:j(k.errorMessage,{error:t})}),r&&(null==r?void 0:r.length)>0&&(0,L.jsx)(S.v,{as:"p",children:j(k.errorMessage,{error:r})})]}),(0,L.jsxs)(m.T,{alignItems:"center",gap:2,children:[(0,L.jsx)(g.$,{testID:"".concat(C,"-try-again-btn"),block:!0,onPress:I,children:t===c._c?j(k.gotIt):j(k.tryAgainCTA)}),(0,L.jsx)(l.V,{unset:!0,children:(0,L.jsx)(L.Fragment,{children:t!==c._c&&(0,L.jsx)(E.N_,{testID:"".concat(C,"-having-trouble"),variant:"body",color:"primary",onPress:D,children:j(k.havingTrouble)})})})]})]})}O(A,"useIntl{{ formatMessage }}\nuseOnboardingStepper{{ goBack }}\nuseMiamiIllustrationsEnabled{isMiamiIllustrationsEnabled}\nuseCallback{handleOnBackOrTryAgainPress}\nuseCallback{handleHavingTroublePress}",(function(){return[i.A,x.A,s.f]})),(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(j.register(C,"testIDPrefix","/workspaces/apps/extension/src/components/HardwareWallet/HWTroubleConnecting/HWTroubleConnecting.tsx"),j.register(k,"messages","/workspaces/apps/extension/src/components/HardwareWallet/HWTroubleConnecting/HWTroubleConnecting.tsx"),j.register(A,"HWTroubleConnecting","/workspaces/apps/extension/src/components/HardwareWallet/HWTroubleConnecting/HWTroubleConnecting.tsx")),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&T(e)},71989:(e,t,r)=>{r.d(t,{h:()=>S});var n,a,o,i=r(14041),s=r(9623),c=r(88751),u=r(86768),l=r(5961),d=r(2775),f=r(62207),p=r(42007),g=r(60156),h=r(63302),m=r(31085);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(){v=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),s=new A(n||[]);return a(i,"_invoke",{value:T(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",p="suspendedYield",g="executing",h="completed",m={};function b(){}function w(){}function S(){}var E={};u(E,i,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(I([])));_&&_!==r&&n.call(_,i)&&(E=_);var M=S.prototype=b.prototype=Object.create(E);function L(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(a,o,i,s){var c=d(e[a],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==y(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function T(t,r,n){var a=f;return function(o,i){if(a===g)throw Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=O(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=g;var u=d(t,r,n);if("normal"===u.type){if(a=n.done?h:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=h,n.method="throw",n.arg=u.arg)}}}function O(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(y(t)+" is not iterable")}return w.prototype=S,a(M,"constructor",{value:S,configurable:!0}),a(S,"constructor",{value:w,configurable:!0}),w.displayName=u(S,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,u(e,c,"GeneratorFunction")),e.prototype=Object.create(M),e},t.awrap=function(e){return{__await:e}},L(j.prototype),u(j.prototype,s,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new j(l(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},L(M),u(M,c,"Generator"),u(M,i,(function(){return this})),u(M,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function b(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function w(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){b(o,n,a,i,s,"next",e)}function s(e){b(o,n,a,i,s,"throw",e)}i(void 0)}))}}function S(e){var t=e.message,r=e.typedDataJson,n=e.signSuccess,a=e.signError,o=e.derivationPath,y=(0,l.G)(),b=(0,l.n)(),S=(0,i.useCallback)(w(v().mark((function e(){var i,l,p,m,y,w,S,E,x,_,M,L;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return",a(new Error("No derivation path was provided for ledger message.")));case 2:return e.prev=2,b(!0),e.next=6,navigator.hid.getDevices();case 6:if(0!==e.sent.filter((function(e){return e.vendorId===g.zL})).length){e.next=10;break}throw new c.o("TransportError",u.Ub,void 0);case 10:return e.next=12,(0,h.bv)({derivationPath:o});case 12:if(i=e.sent,l=i.address,!r){e.next=25;break}return p=JSON.parse(r),!0,m=s.TypedDataUtils.sanitizeData(p),y=m.domain,w=m.types,S=m.primaryType,E=m.message,x=s.TypedDataUtils.hashStruct("EIP712Domain",y,w,true).toString("hex"),_=s.TypedDataUtils.hashStruct(S,E,w,true).toString("hex"),e.next=22,(0,h.pH)({address:l,derivationPath:o,domainSeparatorHex:x,hashStructMessageHex:_});case 22:M=e.sent,b(!1),n((0,f.im)(M.signature));case 25:return e.next=27,(0,h.lT)({address:l,derivationPath:o,message:(0,d.LL)(t)});case 27:L=e.sent,b(!1),n((0,f.im)(L.signature)),e.next=36;break;case 32:e.prev=32,e.t0=e.catch(2),b(!1),a(e.t0);case 36:case"end":return e.stop()}}),e,null,[[2,32]])}))),[r,o,t,b,a,n]),E=(0,i.useMemo)((function(){return y?(0,m.jsx)(p.t,{onResend:S,requestType:"message"}):null}),[y,S]);return(0,i.useMemo)((function(){return{signMessageLedger:S,isSignMessageLedgerLoading:y,hardwareWalletScreen:E}}),[y,E,S])}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(S,"useIsHardwareWalletSigning{isHardwareWalletSigning}\nuseSetIsHardwareWalletSigning{setIsHardwareWalletSigning}\nuseCallback{signMessageLedger}\nuseMemo{hardwareWalletScreen}\nuseMemo{}",(function(){return[l.G,l.n]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(S,"useSignMessageLedger","/workspaces/apps/extension/src/hooks/useSignMessageLedger/useSignMessageLedger.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},96855:(e,t,r)=>{r.r(t),r.d(t,{SignMessage:()=>bt});var n=r(14041),a=r(32183),o=r(8867),i=r(2719),s=r(39249),c=r(84141),u=r(96295),l=r(58910),d=r(71847),f=r(48087),p=r(86768),g=r(46122),h=r(27301),m=r(99633),y=r(45843);function v(e){const t=(0,m.useRecoilValue)(y.H);return(0,n.useMemo)((()=>{const r=t.filter((t=>h.J.isEqual(t.blockchain,e)&&!t.isCustomNetwork()));return r.filter(((e,t)=>r.findIndex((t=>e.primaryAddress===t.primaryAddress))===t)).sort(((e,t)=>void 0!==e.selectedIndex&&void 0!==t.selectedIndex&&e.selectedIndex>t.selectedIndex?1:-1))}),[t,e])}function b(){return v(g.AA)}var w=r(54065);function S(){return v(w.lf)}var E=r(56979),x=r(48390),_=r(22698),M=r(22715);function L(e){const t=(0,M.yS)(e),r=t?x.L:_.j,n=E.b[t?x.L:_.j],a=b(),o=S(),{address:i}=e.params,s=t?a:o;if(!s)throw new Error("No wallets founds");const c=s?.find((e=>e.primaryAddress.toLowerCase()===i.toLowerCase()));if(!c)throw new Error(`Could not find a valid "${n}" wallet index when searching for the "${i}" address for the "${r}" dapp provider`);return c.accountId}var j=r(7427),T=r(84632),O=r(24117),C=r(5961),k=r(74745),A=r(85194),I=r(16835),D=r(52800),P=r(52978),R=r(71748),N=r(52689),H=r(99172),G=r(52493);function U({accountId:e,address:t,blockchainSymbol:r,contractAddress:a}){const o=R.sp[r],i=(0,G.H)();return(0,n.useMemo)((()=>{if(i)return i.find((r=>e===r.accountId&&t.toLowerCase()===r.primaryAddress.toLowerCase()&&H.lg.isEqual(r.network,o.networkSetting.defaultMainnet.network)&&h.J.isEqual(r.blockchain,o.blockchain)&&N.j.isEqual(r.currencyCode,o.currencyCode)&&(!a||r.contractAddress===a)))}),[e,t,a,o.blockchain,o.currencyCode,o.networkSetting.defaultMainnet.network,i])}var q=r(95068);const W=66;var B=r(2775);function F(e){const t=(0,B.m2)(e);return!t||!t.match(/^[ -~]+$/)&&((r=e).length===W&&/^0x[0-9a-f]+$/.test(r)||(0,q.P)(e))?e:t;var r}var z=r(53926),Q=r(16277),J=r(62396),V=r(62207),K=r(1048).Buffer;function $({activeAddress:e,activeWalletIndex:t,request:r,accountId:a,chainId:o}){const i=b(),s=S();return(0,n.useCallback)((async function(){const{address:n}=r.params,c=(0,M.yS)(r);let u;const l=c?i:s;let d=t;if(n.toLowerCase()!==e?.toLowerCase()){const e=l?.find((e=>e.primaryAddress.toLowerCase()===n.toLowerCase()));if(void 0===e)throw new Error("Could not find a valid wallet when searching for the address");d=e.selectedIndex}if(null==d)throw new Error("Active index is undefined");if(c){const{message:e,typedDataJson:t,addPrefix:n}=r.params;if(t&&e.length>W)throw new Error(`Refusing to sign a typed data message of length ${e.length}`);const i=(0,g.s8)(BigInt(d));if(J.g.isSCWAccount(a)){if(!o)throw new Error("Chain ID is required for SCW accounts");const r=(0,Q.$)(a,"signEthereumMessageScw");u=await r({message:t||e,accountId:a,chainId:BigInt(o)})}else{const t=(0,Q.$)(a,"signEthereumMessage");u=await t({message:(0,V.im)(e),derivationPath:i,accountId:a,addPrefix:n})}}else{const{message:e}=r.params,t=(0,w.jD)(BigInt(d)),n=(0,Q.$)(a,"signSolanaMessage");u=await n({message:K.from(e),derivationPath:t,accountId:a})}return u}),[r,i,s,t,e,a,o])}var Y=r(10058),X=r(4767),Z=r(4681),ee=r(44585),te=r(17010),re=r(61513),ne=r(24745),ae=r(59020),oe=r(46810),ie=r(31085);const se=(0,n.createContext)({activeKey:void 0,onChange:()=>{}}),ce=()=>(0,n.useContext)(se),ue=e=>{let{children:t,defaultActiveKey:r,onChange:a}=e;const[o,i]=(0,n.useState)(r),s=(0,n.useCallback)((e=>{null==a||a(e),i(e===o?void 0:e)}),[a,o]),c=(0,n.useMemo)((()=>({activeKey:o,onChange:s})),[o,s]);return(0,ie.jsx)(se.Provider,{value:c,children:t})};var le=r(86441);var de=r(15654),fe=r(49410);const pe=e=>{let{children:t,defaultActiveKey:r,onChange:a,testID:o,style:i}=e;const s=(0,le.v)({light:"line",dark:"lineHeavy"});return(0,ie.jsx)(ue,{defaultActiveKey:r,onChange:a,children:(0,ie.jsx)(de.T,{style:i,testID:o,width:"100%",children:(0,oe.f)(n.Children.toArray(t),(0,ie.jsx)(fe.c,{color:s}))})})},ge={normal:{spacingTop:2,spacingHorizontal:3,spacingBottom:3},dense:{spacingTop:2,spacingHorizontal:4,spacingBottom:4}},he={dense:200,normal:400};var me=r(24761),ye=r(72618),ve=r(27953),be=r(5782),we=r(55799),Se=r(84492),Ee=r(32077),xe=r(28118),_e=r(39262),Me=r(97541),Le=r(86574);const je=e=>"accordion-item-".concat(e,"-header"),Te=e=>"accordion-item-".concat(e,"-panel");function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(r),!0).forEach((function(t){ke(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ke(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ae=(0,n.memo)((e=>{let{media:t}=e;return(0,ie.jsx)(we.a,{flexGrow:0,flexShrink:0,children:t})})),Ie=(0,n.memo)((e=>{let{title:t,subtitle:r}=e;return(0,ie.jsx)(we.a,{className:be.OT,flexGrow:1,flexShrink:1,justifyContent:"flex-start",children:(0,ie.jsxs)(de.T,{children:[(0,ie.jsx)(_e.w,{as:"div",overflow:"wrap",children:t}),!!r&&(0,ie.jsx)(Me.K,{as:"div",className:be.YK,color:"foregroundMuted",overflow:"wrap",children:r})]})})})),De=(0,n.memo)((e=>{let{collapsed:t}=e;return(0,ie.jsx)(we.a,{justifyContent:"flex-end",children:(0,ie.jsx)(Ee.X,{rotate:t?-180:0})})})),Pe=(0,n.memo)((0,n.forwardRef)(((e,t)=>{let{itemKey:r,title:a,subtitle:o,onPress:i,media:s,collapsed:c=!1,testID:u}=e;const{onChange:l}=ce(),d=(0,me.vH)(),f=(0,ye.C)(ve.W7),p=(0,n.useCallback)((()=>{null==i||i(r),null==l||l(r)}),[i,l,r]);return(0,ie.jsx)("h2",{className:Le.I,children:(0,ie.jsx)(xe.o,{ref:t,noScaleOnPress:!0,transparentWhileInactive:!0,"aria-controls":Te(r),"aria-expanded":!c,background:"background",id:je(r),onPress:p,testID:u,width:"100%",children:(0,ie.jsxs)(Se.z,Ce(Ce({alignItems:"center",gap:2,minHeight:f,width:"100%"},d.outer),{},{children:[!!s&&(0,ie.jsx)(Ae,{media:s}),(0,ie.jsx)(Ie,{subtitle:o,title:a}),(0,ie.jsx)(De,{collapsed:c})]}))})})})));var Re=r(82154);function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){Ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ge(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ue=(0,n.memo)((0,n.forwardRef)(((e,t)=>{let{children:r,collapsed:n=!0,itemKey:a,testID:o,maxHeight:i}=e;const s=(0,ye.C)(he),c=(0,ye.C)(ge);return(0,ie.jsx)(Re.N,He(He({ref:t,collapsed:n,maxHeight:null!=i?i:s,testID:o},c),{},{accessibilityLabelledBy:je(a),id:Te(a),role:"region",children:r}))}))),qe=(0,n.memo)((e=>{let{itemKey:t,title:r,subtitle:n,children:a,onPress:o,media:i,testID:s,headerRef:c,panelRef:u,maxHeight:l,style:d}=e;const{activeKey:f}=ce(),p=f!==t;return(0,ie.jsxs)(de.T,{minWidth:300,style:d,testID:s,children:[(0,ie.jsx)(Pe,{ref:c,collapsed:p,itemKey:t,media:i,onPress:o,subtitle:n,testID:s&&"".concat(s,"-header"),title:r}),(0,ie.jsx)(Ue,{ref:u,collapsed:p,itemKey:t,maxHeight:l,testID:s&&"".concat(s,"-panel"),children:a})]})}));var We=r(22115),Be=r(85581),Fe=r(94330),ze=r(67209),Qe=r(87755),Je=r(26825),Ve=r(36913),Ke=r(71989),$e=r(74994),Ye=r(29740),Xe=r(67662);async function Ze(e,t,r,n){r({request:Xe.l.signEthereumMessageSuccess,dappURL:e.dappURL,blockchain:u.fz}),await chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e.eventId,action:Xe.l.signEthereumMessageSuccess,signature:(0,Ye.ensureHexString)((0,V.Ex)(t),!0),blockchain:u.fz,chainId:n}})}var et=r(69434);async function tt(e,t,r){r({request:et.J.signMessageSuccess,dappURL:e.dappURL,blockchain:l.KN}),await chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e.eventId,action:et.J.signMessageSuccess,signature:[...new Uint8Array(t)],blockchain:l.KN}})}var rt,nt=r(23426),at=r(79669),ot=r(92229),it=r(81475),st=r(19529);function ct(e){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ct(e)}function ut(){ut=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),s=new C(n||[]);return a(i,"_invoke",{value:L(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",p="suspendedYield",g="executing",h="completed",m={};function y(){}function v(){}function b(){}var w={};u(w,i,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(k([])));E&&E!==r&&n.call(E,i)&&(w=E);var x=b.prototype=y.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function r(a,o,i,s){var c=d(e[a],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==ct(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function L(t,r,n){var a=f;return function(o,i){if(a===g)throw Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=j(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=g;var u=d(t,r,n);if("normal"===u.type){if(a=n.done?h:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=h,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function k(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(ct(t)+" is not iterable")}return v.prototype=b,a(x,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(M.prototype),u(M.prototype,s,(function(){return this})),t.AsyncIterator=M,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new M(l(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=k,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:k(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function lt(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function dt(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){lt(o,n,a,i,s,"next",e)}function s(e){lt(o,n,a,i,s,"throw",e)}i(void 0)}))}}function ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(r),!0).forEach((function(t){gt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ct(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ct(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return mt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(rt="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&rt(e);var yt="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},vt=(0,a.YK)({message:{id:"nV7wyx",defaultMessage:[{type:0,value:"Message"}]},viewMessage:{id:"PtJZK+",defaultMessage:[{type:0,value:"Message data"}]},sign:{id:"rhTc67",defaultMessage:[{type:0,value:"Sign"}]},cancel:{id:"ISJVjg",defaultMessage:[{type:0,value:"Cancel"}]},title:{id:"9aVHbX",defaultMessage:[{type:0,value:"Confirm signature request"}]}});function bt(e){var t,r=e.data,a=r.request,g=r.kind,h=r.dappURL,m=r.eventId,y=r.kind,v=r.dappLogoURLAlt,b=r.dappLogoURL,w=(0,O.gs)(),S=(0,T.n)(),E=(0,z.yC)(h).hostname,x=(0,A.U2)(r.request,E),_=(0,M.yS)(x),R=(0,d.x)("message_scanner"),N=_?u.fz:l.KN,H=L(r.request),G=U({accountId:H,address:a.params.address,blockchainSymbol:N}),q=(0,P.S)(),W=G?q(G):void 0,B=null==W?void 0:W.hardwareDerivationPath,Q=(0,o.A)().formatMessage,J=(0,j.vQ)(H),V=J.isLedgerAccount,K=J.hasLocallyStoredKey,oe=(0,Ve.t)(),se=(0,n.useContext)(Je.L).disableConfirmButton,ce=ht((0,n.useState)(void 0),2),ue=ce[0],le=ce[1],fe=(0,at.X)(),ge=(0,ot.X)(),he=(0,nt.U)(),me=(0,C.G)(),ye=(0,C.n)(),ve=(0,f.S)(I.I.MESSAGE_SCANNER).messagePreviewDisclaimer,be=(0,n.useMemo)((function(){var e=x.params.message,t=x.params,r=t.addPrefix,n=t.typedDataJson;return{addPrefix:r,sanitizedTypedDataJson:_?n:null,readableMessage:r?F(e):e,sanitizedMessage:e,isSpecialMessage:!r&&!n&&_}}),[x,_]),Se=be.sanitizedTypedDataJson,Ee=be.readableMessage,xe=be.sanitizedMessage,Me=be.isSpecialMessage,Le=be.addPrefix,je=(0,n.useMemo)((function(){return{dappLogoURL:b,dappLogoURLAlt:v,dappURL:h}}),[b,v,h]),Te=(0,n.useMemo)((function(){var e;return null==G||null===(e=G.network.asChain())||void 0===e?void 0:e.chainId}),[G]),Oe=(0,n.useMemo)((function(){var e,t,r,n,o,i,s,c=Se?JSON.parse(Se):null;return{request:a.method,dappURL:E,blockchain:N,isMessageScannerEnabled:R,eip712DomainName:null!==(e=null==c||null===(t=c.domain)||void 0===t?void 0:t.name)&&void 0!==e?e:"",eip712DomainVersion:null!==(r=null==c||null===(n=c.domain)||void 0===n?void 0:n.version)&&void 0!==r?r:"",contractAddress:null!==(o=null==c||null===(i=c.domain)||void 0===i?void 0:i.verifyingContract)&&void 0!==o?o:"",chainId:null!==(s=null==Te?void 0:Te.toString())&&void 0!==s?s:"",eip712OfferType:c?(0,D.HW)(c):""}}),[N,Te,E,R,a.method,Se]);(0,s.yB)(Oe);var Ce=$({request:x,accountId:H,activeAddress:null==G?void 0:G.primaryAddress,activeWalletIndex:null==G?void 0:G.selectedIndex});(0,n.useEffect)((function(){se||(0,$e.gd)({dappURL:h,request:g,blockchain:N})}),[N,h,se,g]);var ke=(0,n.useCallback)((function(e){he({eventId:m,error:e,dappURL:h,blockchain:N,request:y,chainId:Te}),ge()?fe():(0,st.f)(50)}),[he,m,h,N,y,Te,ge,fe]),Ae=(0,n.useCallback)((function(e){(0,s.Y4)(pt(pt({},Oe),{},{errorName:e.name,errorMessage:e.message})),(0,it.R)(e),ke(e)}),[ke,Oe]),Ie=(0,n.useCallback)((function(){(0,s.sg)(Oe),ke(i.standardErrors.provider.userRejectedRequest({}))}),[ke,Oe]),De=(0,c.oM)(Oe),Pe=(0,n.useCallback)(function(){var e=dt(ut().mark((function e(t){return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=5;break}return e.next=3,Ze(r,t,De,Te);case 3:e.next=7;break;case 5:return e.next=7,tt(r,t,De);case 7:ge()?fe():(0,st.f)(50);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Te,r,fe,ge,_,De]),Re=(0,n.useCallback)((function(e){e.name.startsWith("Transport")?((0,it.R)(e),le(e)):Ae(e)}),[Ae]),Ne=(0,Ke.h)({message:xe,typedDataJson:Se,signSuccess:Pe,signError:Re,derivationPath:B}),He=Ne.signMessageLedger,Ge=Ne.isSignMessageLedgerLoading,Ue=Ne.hardwareWalletScreen,Ye=(0,n.useCallback)(dt(ut().mark((function e(){var t;return ut().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,s.R)(Oe),t=function(){Ce().then((function(e){Pe(e)})).catch((function(e){Ae(e)}))},!K){e.next=6;break}oe({accountId:H,unlockSuccess:t,unlockError:function(e){Ae(new Error("Unknown please try again"))}}),e.next=10;break;case 6:if(!V){e.next=10;break}if(!_){e.next=9;break}return e.abrupt("return",He());case 9:Ae(new Error("Cannot sign request for Ledger: Unsupported blockchain"));case 10:case"end":return e.stop()}}),e)}))),[Oe,K,V,Ce,Pe,Ae,oe,H,_,He]),Xe=(0,n.useCallback)((function(){le(void 0),ye(!1)}),[ye]),et=(0,n.useCallback)((function(e){return(0,ie.jsx)(Fe.C,{as:"span",color:"primary",children:e})}),[]),rt=(0,k.$)({signerAddress:null==G?void 0:G.primaryAddress,request:r.request,dappHostname:E,typedDataJson:Se,addPrefix:Le,analyticsData:Oe,wrapInnerWarningText:et,chainId:Te}),ct=rt.messageScannerLoadStartTime,lt=rt.resetLoadTimer,ft=rt.messageScannerData,gt=rt.warningMessage,mt=rt.isMessageScannerLoading,yt=rt.isMessageScannerError,bt=!!ft&&(ft.preAuthorizeOperations.length>0||ft.assetChangeOperations.length>0),wt=(0,n.useMemo)((function(){return gt||bt?"180px":"220px"}),[bt,gt]),St=(0,n.useMemo)((function(){return(0,ie.jsx)(we.a,{bordered:!0,borderRadius:"roundedSmall",borderColor:"secondary",spacingHorizontal:1,spacingTop:1,flexGrow:1,overflow:"scroll",children:(0,ie.jsx)(Fe.C,{as:"div",color:"foregroundMuted",testID:"message-content",children:(0,ie.jsx)("pre",{style:{whiteSpace:Se?"pre-wrap":"normal",maxHeight:wt},className:Et,children:Se||Ee})})})}),[wt,Ee,Se]);if((Me||ue||!_)&&V){var xt=p._c;return null!=ue&&ue.statusCode&&(xt=ue.statusCode),(0,ie.jsx)(de.T,{spacingHorizontal:3,spacingTop:3,children:(0,ie.jsx)(Qe.D,{statusCode:xt,handleBack:Xe})})}if(me)return Ue;var _t=R&&!mt&&bt&&!yt,Mt=R&&yt,Lt=R&&mt;return(0,ie.jsx)(Z.ff,{height:"100%",header:(0,ie.jsx)(Y.jq,{variant:"secondary",title:Q(vt.title)}),footer:(0,ie.jsxs)(de.T,{background:"background",width:"100%",spacingBottom:2,spacingTop:2,children:[gt?(0,ie.jsx)(ae.$,{spacingBottom:.5,message:gt,isDismissible:!1,showErrorIcon:!0,testID:"sign-message-warning"}):null,(0,ie.jsx)(de.T,{gap:2,testID:"button-area",spacingHorizontal:3,children:(0,ie.jsxs)(We.e,{accessibilityLabel:"Group",block:!0,children:[(0,ie.jsx)(Be.$,{testID:"cancel-message",onPress:Ie,block:!0,variant:"secondary",children:Q(vt.cancel)}),(0,ie.jsx)(Be.$,{testID:"sign-message",onPress:Ye,block:!0,loading:Ge,disabled:se,children:Q(vt.sign)})]})})]}),children:(0,ie.jsxs)(de.T,{height:"100%",testID:"signature-request-component",overflow:"auto",children:[W&&(0,ie.jsx)(ee.H,{walletGroup:W,signingAddress:x.params.address}),(0,ie.jsx)(te.g,{dappInfo:je}),(0,ie.jsxs)(de.T,{spacingHorizontal:R?void 0:3,spacingBottom:1,height:"100%",children:[Mt&&(0,ie.jsx)(X.G,{analyticsData:Oe}),Lt&&(0,ie.jsx)(ne.l,{operationSource:I.I.MESSAGE_SCANNER}),_t&&(0,ie.jsx)(re.B,{parsedOperations:ft,userWalletAddress:null!==(t=null==G?void 0:G.primaryAddress)&&void 0!==t?t:"",analyticsData:Oe,resetLoadTimer:lt,operationSource:I.I.MESSAGE_SCANNER,txScannerLoadStartTime:null==ct?void 0:ct.current,exchangeRatesMap:w,activeFiatCurrency:S}),_t?(0,ie.jsx)(pe,{testID:"message-container-accordion",children:(0,ie.jsx)(qe,{itemKey:"1",title:Q(vt.viewMessage),children:St})}):(0,ie.jsxs)(de.T,{spacingHorizontal:3,children:[(0,ie.jsxs)(_e.w,{as:"p",spacingTop:1,spacingBottom:1,spacingEnd:1,children:[Q(vt.message),":"]}),St]}),_t&&(0,ie.jsx)(ze.V,{as:"p",color:"foregroundMuted",spacingTop:2,spacingBottom:1,spacingHorizontal:2,testID:"message-scanner-disclaimer",children:ve}),(0,ie.jsx)(de.T,{})]})]})})}yt(bt,"useExchangeRatesMap{exchangeRatesMap}\nuseActiveFiatCurrency{activeFiatCurrency}\nuseSanitizeMessageSigningRequest{sanitizedRequest}\nuseIsFeatureEnabled{isMessageScannerEnabled}\nuseAccountIdFromWeb3Request{accountIdFromWeb3Request}\nuseSpecificWalletForAccountId{walletFromWeb3Request}\nuseGetWalletGroupForWallet{getWalletGroupForWallet}\nuseIntl{{\n    formatMessage\n  }}\nuseAccountById{{\n    isLedgerAccount,\n    hasLocallyStoredKey\n  }}\nuseHandleUnlockForTransaction{handleUnlockForTransaction}\nuseContext{{\n    disableConfirmButton\n  }}\nuseState{[ledgerError, setLedgerError](undefined)}\nuseHandleNextQueuedRequest{handleNextQueuedRequest}\nuseHasNextQueuedRequest{hasNextQueuedRequest}\nuseCancel{web3Cancel}\nuseIsHardwareWalletSigning{isHardwareWalletSigning}\nuseSetIsHardwareWalletSigning{setIsHardwareWalletSigning}\nuseTxPreviewMessages{{\n    messagePreviewDisclaimer\n  }}\nuseMemo{{\n    sanitizedTypedDataJson,\n    readableMessage,\n    sanitizedMessage,\n    isSpecialMessage,\n    addPrefix\n  }}\nuseMemo{dappInfo}\nuseMemo{chainId}\nuseMemo{analyticsData}\nuseTriggerWeb3SignMessageRequestViewed{}\nuseBuildDappMessageSignature{signMessage}\nuseEffect{}\nuseCallback{onCancel}\nuseCallback{onError}\nuseCallback{onReject}\nuseTriggerWeb3RequestSendingSuccessResponse{triggerWeb3RequestSendingSuccessResponse}\nuseCallback{onSignSuccess}\nuseCallback{signLedgerError}\nuseSignMessageLedger{{\n    signMessageLedger,\n    isSignMessageLedgerLoading,\n    hardwareWalletScreen\n  }}\nuseCallback{onSignMessage}\nuseCallback{handleLedgerErrorOnBack}\nuseCallback{wrapInnerWarningText}\nuseMessageScanner{{\n    messageScannerLoadStartTime,\n    resetLoadTimer,\n    messageScannerData,\n    warningMessage,\n    isMessageScannerLoading,\n    isMessageScannerError\n  }}\nuseMemo{messageContentHeight}\nuseMemo{messageContent}",(function(){return[O.gs,T.n,A.U2,d.x,L,U,P.S,o.A,j.vQ,Ve.t,at.X,ot.X,nt.U,C.G,C.n,f.S,s.yB,$,c.oM,Ke.h,k.$]}));var wt,St,Et="pmv46nh";r(9126),(wt="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(wt.register(vt,"messages","/workspaces/apps/extension/src/screens/Web3/SignMessage/SignMessage.tsx"),wt.register(bt,"SignMessage","/workspaces/apps/extension/src/screens/Web3/SignMessage/SignMessage.tsx"),wt.register(Et,"preSpacing","/workspaces/apps/extension/src/screens/Web3/SignMessage/SignMessage.tsx")),(St="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&St(e)},39249:(e,t,r)=>{r.d(t,{R:()=>g,Y4:()=>m,sg:()=>h,yB:()=>f});var n,a,o,i=r(34767),s=r(55452);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){(0,s.cp)("web3_request.sign_message.request_viewed",l({componentType:i.I5.page,action:i.X2.view},e))}function p(e){(0,s.N8)({metricType:i.vj.count,metricName:"web3_request.sign_message.pre_sign_message_clicked",value:1,tags:{web3_method:e.request,blockchain:e.blockchain,chain_id:e.chainId}}),(0,s.$s)("web3_request.sign_message.pre_sign_message_clicked",l({componentType:i.I5.button,action:i.X2.click},e),i.$c.high)}function g(e){(0,s.N8)({metricType:i.vj.count,metricName:"web3_request.sign_message.sign_message_clicked",value:1,tags:{web3_method:e.request,blockchain:e.blockchain,chain_id:e.chainId}}),(0,s.$s)("web3_request.sign_message.sign_message_clicked",l({componentType:i.I5.button,action:i.X2.click},e),i.$c.high)}function h(e){(0,s.$s)("web3_request.sign_message.cancel_message_clicked",l({componentType:i.I5.button,action:i.X2.click},e),i.$c.high)}function m(e){(0,s.$s)("web3_request.sign_message.error",l({componentType:i.I5.unknown,action:i.X2.measurement},e),i.$c.high)}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(f,"useLogEventOnMount{}",(function(){return[s.cp]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(a.register(f,"useTriggerWeb3SignMessageRequestViewed","/workspaces/libs/analytics/sign-message/SignMessage.tsx"),a.register(p,"triggerPreSignWeb3SignMessageClicked","/workspaces/libs/analytics/sign-message/SignMessage.tsx"),a.register(g,"triggerWeb3SignMessageClicked","/workspaces/libs/analytics/sign-message/SignMessage.tsx"),a.register(h,"triggerWeb3CancelMessageClicked","/workspaces/libs/analytics/sign-message/SignMessage.tsx"),a.register(m,"triggerWeb3SignMessageError","/workspaces/libs/analytics/sign-message/SignMessage.tsx")),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},74745:(e,t,r)=>{r.d(t,{$:()=>W});var n=r(14041),a=r(32183),o=r(8867),i=r(32550),s=r(56491),c=r(4244),u=r(71847),l=r(66181),d=r(98053),f=r(66430),p=r(93606);var g,h=r(88),m=r(7853),y=r(28556),v=r(22715),b=r(10328),w=r(16238),S=r.n(w),E=r(52042),x=r(16835),_=r(59484),M=r(52800),L=r(28889),j=r(28992),T=r(85194),O=r(62759);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function k(){k=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,i=Object.create(o.prototype),s=new A(n||[]);return a(i,"_invoke",{value:L(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",p="suspendedYield",g="executing",h="completed",m={};function y(){}function v(){}function b(){}var w={};u(w,i,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==r&&n.call(E,i)&&(w=E);var x=b.prototype=y.prototype=Object.create(w);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function M(e,t){function r(a,o,i,s){var c=d(e[a],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==C(l)&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function L(t,r,n){var a=f;return function(o,i){if(a===g)throw Error("Generator is already running");if(a===h){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=j(s,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=g;var u=d(t,r,n);if("normal"===u.type){if(a=n.done?h:p,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(a=h,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,m;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(C(t)+" is not iterable")}return v.prototype=b,a(x,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:v,configurable:!0}),v.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(M.prototype),u(M.prototype,s,(function(){return this})),t.AsyncIterator=M,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new M(l(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),u(x,c,"Generator"),u(x,i,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function A(e,t,r,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function I(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=r.hmd(e),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&g(e);var H,G,U="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},q=(0,a.YK)({specialSignatureDisclaimer:{id:"iQc2re",defaultMessage:[{type:0,value:"This type of request is sometimes used for malicious purposes. Only sign if you fully trust this site with access to your account"}]},seaportDisclaimer:{id:"RjXE/h",defaultMessage:[{type:0,value:"Warning: this dapp will remove crypto and NFTs from your wallet. Be sure you trust it."}]},forkWarningDisclaimer:{id:"m5H7GR",defaultMessage:[{type:0,value:"This request could possibly be replayed on a fork of Ethereum. Please verify the dapp."}]},variableAmountSendWarning:{id:"/7heCM",defaultMessage:[{type:0,value:"This order has a variable amount of "},{type:1,value:"variableAmount"},{type:0,value:". If the order is not immediately filled you may send less than the estimate above."}]},variableAmountReceiveWarning:{id:"bAd/Ws",defaultMessage:[{type:0,value:"This order has a variable amount of "},{type:1,value:"variableAmount"},{type:0,value:". If the order is not immediately filled you may receive less than the estimate above."}]},variableQuantitySendWarning:{id:"yDVVNn",defaultMessage:[{type:0,value:"This order has a variable quantity of "},{type:1,value:"variableAmount"},{type:0,value:" items. If the order is not immediately filled you may send less than the estimate above."}]},variableQuantityReceiveWarning:{id:"y0HD9o",defaultMessage:[{type:0,value:"This order has a variable quantity of "},{type:1,value:"variableAmount"},{type:0,value:" items. If the order is not immediately filled you may receive less than the estimate above."}]},permissionsManagerNotAllowed:{id:"2PgyQb",defaultMessage:[{type:0,value:"Spend permission request is not available."}]}});function W(e){var t=e.signerAddress,r=e.request,a=e.dappHostname,o=e.typedDataJson,i=e.addPrefix,s=e.analyticsData,c=e.wrapInnerWarningText,u=e.chainId,l=(0,h.lM)(),d=(0,n.useMemo)((function(){return u?(0,m.z)(u):void 0}),[u]);return B({signerAddress:t,request:r,dappHostname:a,typedDataJson:o,addPrefix:i,analyticsData:s,wrapInnerWarningText:c,onDataSelect:(0,n.useCallback)((function(e){var t=e.operations,r=(0,y.Q)(t.assetChangeOperations,u,null!=d?d:"");r&&l(r)}),[u,d,l])})}function B(e){var t=e.signerAddress,r=e.request,a=e.dappHostname,g=e.typedDataJson,h=e.addPrefix,m=e.analyticsData,y=e.wrapInnerWarningText,w=e.onDataSelect,C=(0,i.jE)(),D=(0,o.A)().formatMessage,P=(0,u.x)("message_scanner"),N=!(0,l.l)("kill_switch_eth_pow_fork_warning"),H=(0,u.x)("seaport_warning"),G=(0,c.J9)().formatToCrypto,U=(0,n.useRef)(),W=(0,n.useCallback)((function(){U.current=void 0}),[U]),B=(0,v.yS)(r),F=(0,n.useMemo)((function(){if(g&&""!==g&&r){var e=JSON.parse(g);return{typedDataJsonParsed:e,encodedJsonMessage:JSON.stringify(e,null,0),signTypedDataVersion:(0,T.yJ)(e,r.params.message)}}return{typedDataJsonParsed:void 0,encodedJsonMessage:void 0,messageType:void 0}}),[g,r]),z=F.typedDataJsonParsed,Q=F.encodedJsonMessage,J=F.signTypedDataVersion,V=(0,n.useMemo)((function(){return P&&B&&!!Q&&!!t&&!!J}),[P,Q,B,t,J]),K=(0,n.useMemo)((function(){return["MESSAGE_SCANNER_API_RESULT",b.createHash("md5").update(null!=Q?Q:"").digest("hex")]}),[Q]),$=(0,O.s)({queryClient:C,queryKey:K,logTimeout:s.yk,scannerService:x.I.MESSAGE_SCANNER}),Y=$.startRequestTimeout,X=$.clearRequestTimeout,Z=$.hasRequestTimedOut,ee=(0,n.useCallback)((function(e){var t,r,n=R(R({},m),{},{errorMessage:null==e||null===(t=e.message)||void 0===t?void 0:t.toString(),errorCode:null==e?void 0:e.code.toString(),errorStatus:null==e||null===(r=e.status)||void 0===r?void 0:r.toString()});(0,s.n7)(n)}),[m]),te=(0,n.useCallback)((function(e){var r,n=(0,j.ou)(e.decodedMessage.operations||[],m),a=(0,_.$)(n,t),o=(0,L.y)(a);return null==w||w({operations:a,notices:null!==(r=null==e?void 0:e.notices)&&void 0!==r?r:[]}),(0,s.D6)(R(R({},m),{},{numberOfOperations:o.numberOfOperations,operationType:o.operationType})),{operations:a,notices:null==e?void 0:e.notices}}),[m,t,w]),re=(0,n.useCallback)((function(e){var t=(null==e?void 0:e.operations)||{},r=t.preAuthorizeOperations,n=t.assetChangeOperations;if(null!=r&&r.length||null!=n&&n.length){var a=S()([].concat(I(r),I(n))).map((function(e){return e.operationType})),o=R(R({},m),{},{operationTypes:a.join(",")});a.length?(0,s.eS)(o):(0,s.I9)(o)}}),[m]),ne=(0,d.I)(K,function(){var e,r=(e=k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U.current=Date.now(),(0,s.zY)(m),Y(m),e.abrupt("return",(0,E.LU)(null!=t?t:"",null!=Q?Q:"",null!=J?J:"v1",a));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){A(o,n,a,i,s,"next",e)}function s(e){A(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}(),{staleTime:6e4,enabled:V,retry:!1,refetchOnWindowFocus:!1,onError:ee,onSuccess:re,select:te,onSettled:X}),ae=ne.data,oe=ne.isInitialLoading,ie=ne.isError,se=(0,n.useMemo)((function(){if(B){if(function({message:e,strictVerifyContractCheck:t}){let r;if("string"==typeof e)try{r=JSON.parse(e)}catch(e){return!1}else{if("object"!=typeof e||null===e)return!1;r=e}return r.domain?.verifyingContract&&"Spend Permission Manager"===r.domain.name&&(!t||(0,p.h)(r.domain.verifyingContract,f.b7))}({message:z,strictVerifyContractCheck:!1}))return{warningMessage:D(q.permissionsManagerNotAllowed),canContinue:!1};if(!h&&!z)return{warningMessage:D(q.specialSignatureDisclaimer),canContinue:!0};if(!z)return{warningMessage:void 0,canContinue:!0};var e=(0,M.V9)(z)&&(0,M.O0)(z)&&H,r=(0,M.Vy)(z)&&N;if((0,s.w_)(R(R({},m),{},{forkWarningShown:r})),e&&"opensea.io"!==a)return{warningMessage:D(q.seaportDisclaimer),canContinue:!0};if(r)return{warningMessage:D(q.forkWarningDisclaimer),canContinue:!0};if(!P)return{warningMessage:void 0,canContinue:!0};if(null!=ae&&ae.operations.assetChangeOperations){var n=ae.operations.assetChangeOperations.find((function(e){return e.operationType===x.S.BALANCE_TRANSFER_RANGE&&e.startAmountValue!==e.endAmountValue})),o=ae.operations.assetChangeOperations.find((function(e){return e.operationType===x.S.ITEM_TRANSFER&&"undefined"!==e.startQuantity&&"undefined"!==e.endQuantity&&e.startQuantity!==e.endQuantity}));if(n){var i=n.fromAddress.toLowerCase()===(null==t?void 0:t.toLowerCase()),c=Number(n.startAmountValue),u=Number(n.endAmountValue),l=BigInt(Math.min(c,u)),d=BigInt(Math.max(c,u)),g=G({currencyCode:n.currencyCode,decimals:n.decimals,value:l,includeCode:!1}),v=G({currencyCode:n.currencyCode,decimals:n.decimals,value:d,includeCode:!1}),b="".concat(g," - ").concat(v," ").concat(n.currencyCode.code),w=null==y?void 0:y(b),S=i?q.variableAmountSendWarning:q.variableAmountReceiveWarning;return{warningMessage:D(S,{variableAmount:w}),canContinue:!0}}if(o){var E=o.fromAddress.toLowerCase()===(null==t?void 0:t.toLowerCase()),_=Number(o.startQuantity),L=Number(o.endQuantity),j=BigInt(Math.min(_,L)),T=BigInt(Math.max(_,L)),O="".concat(j," - ").concat(T),C=null==y?void 0:y(O),k=E?q.variableQuantitySendWarning:q.variableQuantityReceiveWarning;return{warningMessage:D(k,{variableAmount:C}),canContinue:!0}}}}return{warningMessage:void 0,canContinue:!0}}),[B,h,z,H,N,m,P,null==ae?void 0:ae.operations.assetChangeOperations,D,a,t,G,y]),ce=se.warningMessage,ue=se.canContinue;return{messageScannerLoadStartTime:U,resetLoadTimer:W,messageScannerData:null==ae?void 0:ae.operations,messageScannerNotices:null==ae?void 0:ae.notices,warningMessage:ce,canContinue:ue,isMessageScannerLoading:oe,isMessageScannerError:ie||Z}}U(W,"useAddTrackedExchangeRates{addTrackedExchangeRates}\nuseMemo{networkId}\nuseCallback{handleDataSelect}\nuseMessageScannerBase{}",(function(){return[h.lM,B]})),U(B,"useQueryClient{queryClient}\nuseIntl{{ formatMessage }}\nuseIsFeatureEnabled{isMessageScannerEnabled}\nuseKillSwitch{}\nuseIsFeatureEnabled{isSeaportWarningEnabled}\nuseCurrencyFormatter{{ formatToCrypto }}\nuseRef{messageScannerLoadStartTime}\nuseCallback{resetLoadTimer}\nuseMemo{{ typedDataJsonParsed, encodedJsonMessage, signTypedDataVersion }}\nuseMemo{shouldRunMessageScanner}\nuseMemo{queryKey}\nuseStartRequestTimeout{{ startRequestTimeout, clearRequestTimeout, hasRequestTimedOut }}\nuseCallback{onMessageScanError}\nuseCallback{onMessageScanSelect}\nuseCallback{onMessageScanSuccess}\nuseQuery{{ data, isInitialLoading, isError }}\nuseMemo{{ warningMessage, canContinue }}",(function(){return[i.jE,o.A,u.x,l.l,u.x,c.J9,O.s,d.I]})),(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(q,"messages","/workspaces/libs/data/stores/TxScanner/hooks/useMessageScanner.tsx"),H.register(W,"useMessageScanner","/workspaces/libs/data/stores/TxScanner/hooks/useMessageScanner.tsx"),H.register(B,"useMessageScannerBase","/workspaces/libs/data/stores/TxScanner/hooks/useMessageScanner.tsx")),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&G(e)},4767:(e,t,r)=>{r.d(t,{G:()=>w});var n=r(14041),a=r(56491),o=r(32183),i=r(8867);const s=(0,o.YK)({mainTitle:{id:"hXAvR/",defaultMessage:"Message preview unavailable"},fallbackTextBody:{id:"qQVXHY",defaultMessage:"Unable to estimate asset changes. Please make sure you trust this app."}});function c(){const{formatMessage:e}=(0,i.A)();return(0,n.useMemo)((()=>({mainTitle:e(s.mainTitle),textBody:e(s.fallbackTextBody)})),[e])}var u,l=r(2673),d=r(55799),f=r(15654),p=r(84492),g=r(39262),h=r(97541),m=r(31085);e=r.hmd(e),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&u(e);var y,v,b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},w=(0,n.memo)(b((function(e){(0,a.oD)(e.analyticsData);var t=c(),r=t.mainTitle,n=t.textBody;return(0,m.jsx)(d.a,{flexDirection:"column",background:"backgroundAlternate",spacingHorizontal:2,spacingVertical:2,testID:"message-scanner-error",children:(0,m.jsx)(f.T,{children:(0,m.jsxs)(p.z,{justifyContent:"space-between",children:[(0,m.jsx)(l.I,{testID:"dapp-message-safety-tooltip-icon",name:"visibleActive",size:"s",color:"foregroundMuted",spacingEnd:2,spacingTop:.5}),(0,m.jsxs)(f.T,{children:[(0,m.jsx)(g.w,{as:"h4",children:r}),(0,m.jsx)(h.K,{as:"p",color:"foregroundMuted",spacingTop:1,children:n})]})]})})})}),"useLogMessageScannerErrorLoaded{}\nuseMessageScannerErrorCopy{{ mainTitle, textBody }}",(function(){return[a.oD,c]})));(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&y.register(w,"MessageScannerError","/workspaces/libs/wallet-cds-extension/components/MessageScannerError/MessageScannerError.tsx"),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&v(e)},17010:(e,t,r)=>{r.d(t,{g:()=>_});var n,a=r(14041),o=r(32183),i=r(8867),s=r(52135),c=r(2673),u=r(55799),l=r(84492),d=r(15654),f=r(37742),p=r(35001),g=r(39262),h=r(67209),m=r(31085);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},w=(0,o.YK)({title:{id:"h9N6xV",defaultMessage:[{type:0,value:"Review"}]},dappUrlRequestText:{id:"5yfU74",defaultMessage:[{type:0,value:"Request from "},{type:1,value:"dappURL"}]},dappUrlRevokeText:{id:"jKO2jb",defaultMessage:[{type:0,value:"Revoke allowance to "},{type:1,value:"dappURL"}]},headerTootltip:{id:"JaBWDp",defaultMessage:[{type:0,value:"Only sign if you fully trust this site with access to your account"}]}});function S(e){var t=e.dappInfo,r=e.icon,n=e.headerDappName,o=e.isRevokeOperation,v=(0,i.A)().formatMessage,b=t.dappLogoURL,S=t.dappLogoURLAlt,E=t.networkBadgeURL,x=t.networkBadgeAlt,_=t.dappURL,L=y((0,a.useState)(b),2),j=L[0],T=L[1],O=(0,a.useCallback)((function(){T(S)}),[S]),C=(0,a.useMemo)((function(){return n||(0,s.m)(_)}),[_,n]),k=(0,a.useMemo)((function(){return r?(0,m.jsx)(c.I,{name:r,size:"m",color:"foregroundMuted"}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(f.W,{source:j,resizeMode:"contain",width:32,height:32,shape:"squircle",alt:S,onError:O}),E?(0,m.jsx)("img",{className:M,src:E,alt:x}):null]})}),[S,r,x,E,O,j]);return(0,m.jsxs)(u.a,{alignItems:"flex-start",spacingHorizontal:3,spacingVertical:2,children:[(0,m.jsx)(l.z,{spacingEnd:2,height:"100%",alignSelf:"center",position:"relative",testID:"dapp-transaction-request-header",alignItems:"center",children:(0,m.jsx)(u.a,{position:"relative",children:k})}),(0,m.jsx)(l.z,{children:(0,m.jsxs)(d.T,{children:[(0,m.jsx)(g.w,{as:"h1",tabIndex:0,spacingBottom:.5,children:v(w.title)}),(0,m.jsxs)(u.a,{alignItems:"center",children:[(0,m.jsx)(h.V,{as:"span",color:"foregroundMuted",children:v(o?w.dappUrlRevokeText:w.dappUrlRequestText,{dappURL:(0,m.jsx)(h.V,{as:"span",color:"foreground",testID:"dapp-transaction-request-header-dapp-name",overflow:"break",children:C},"domain-name-style")})}),(0,m.jsx)(p.m,{content:v(w.headerTootltip),placement:"bottom",children:(0,m.jsx)(c.I,{name:"info",size:"xs",color:"foregroundMuted",spacingStart:1})})]})]})})]})}b(S,"useIntl{{\n    formatMessage\n  }}\nuseState{[sourceUrl, setSourceUrl](dappLogoURL)}\nuseCallback{setAlternativeDappLogoURL}\nuseMemo{dappName: string}\nuseMemo{image}",(function(){return[i.A]}));var E,x,_=(0,a.memo)(S),M="n1wo4ekf";r(85552),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(E.register(w,"messages","/workspaces/libs/wallet-cds-extension/components/TxDetails/DappTxRequestHeader.tsx"),E.register(S,"DappTxHeaderDetail","/workspaces/libs/wallet-cds-extension/components/TxDetails/DappTxRequestHeader.tsx"),E.register(_,"DappTxRequestHeader","/workspaces/libs/wallet-cds-extension/components/TxDetails/DappTxRequestHeader.tsx"),E.register(M,"networkBadge","/workspaces/libs/wallet-cds-extension/components/TxDetails/DappTxRequestHeader.tsx")),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&x(e)},9126:(e,t,r)=>{r.r(t)},85552:(e,t,r)=>{r.r(t)},67662:(e,t,r)=>{var n;r.d(t,{l:()=>n}),function(e){e.requestEthereumAccountsResponse="requestEthereumAccountsResponse",e.addEthereumChainDeny="addEthereumChainDeny",e.addEthereumChainApprove="addEthereumChainApprove",e.switchEthereumChainDeny="switchEthereumChainDeny",e.switchEthereumChainApprove="switchEthereumChainApprove",e.signEthereumMessageSuccess="signEthereumMessageSuccess",e.signEthereumTransactionSuccess="signEthereumTransactionSuccess",e.submitEthereumTransactionSuccess="submitEthereumTransactionSuccess",e.watchAssetApprove="watchAssetApprove",e.watchAssetDeny="watchAssetDeny",e.selectProviderApprove="selectProviderApprove",e.selectProviderDeny="selectProviderDeny",e.dappChainSwitched="dappChainSwitched"}(n||(n={}))},36913:(e,t,r)=>{r.d(t,{t:()=>u});var n=r(83815),a=r(79071),o=r.n(a),i=r(58341),s=r(42894),c=r(22535);function u(){const e=(0,n.Mf)();return(0,s.O)(((t,{accountId:r,unlockSuccess:n,unlockError:a=o()})=>{t&&t.unsubscribe();const s=r||e;return c.T.unlock({...i.uM.TransactionAccess,accountId:s}).subscribe((({status:e})=>{"SUCCESS"===e?n?.():a(new Error("Unlock Failed"))}),(e=>{a(e)}))}),[e])}},56328:(e,t,r)=>{r.d(t,{j:()=>s});var n=r(33396);const a=["loading","entry","username","backup","verify","password","success","import","importOrLink","link","scanQr","select-device","select-account","ledger-signing","ledger-connect-device","trezor-connect-device","ledger-success","hwTroubleConnecting","subdomain-cta","subdomain-education","subdomain-claim-success","subdomain-avatar","subdomain-basic-profile"],o=new URLSearchParams(window.location.search).get("step"),i=a.find((e=>e===o)),s=(0,n.KT)({steps:a,defaultStep:i??"loading"})},95974:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(33396),a=r(56328);function o(){return(0,n.lE)(a.j)}},19529:(e,t,r)=>{r.d(t,{f:()=>a});var n=r(34767);function a(e){(0,n.yu)().finally((()=>{setTimeout((()=>{window.close()}),e||0)}))}},23426:(e,t,r)=>{r.d(t,{U:()=>s});var n,a=r(14041),o=r(2719);!function(e){e.web3RequestCanceled="web3RequestCanceled",e.parentDisconnected="parentDisconnect"}(n||(n={}));var i=r(74994);function s(){return(0,a.useCallback)((async function({eventId:e,error:t,dappURL:r,blockchain:a,request:s,chainId:c}){return new Promise((u=>{(0,i.j)({request:s,dappURL:r,errorMessage:t.message,errorName:t.name,blockchain:a}),chrome.runtime.sendMessage({type:"extensionUIResponse",data:{id:e,action:n.web3RequestCanceled,error:(0,o.serializeError)(t,s),blockchain:a,chainId:c}},(()=>u()))}))}),[])}},92229:(e,t,r)=>{r.d(t,{X:()=>s});var n=r(14041),a=r(99633),o=r(40441),i=r(79669);function s(){const e=(0,a.useRecoilValue)(i.P);return(0,n.useCallback)((()=>{const t=(0,o.$)().get("originTabId");return null!==t&&(e[t]??[]).length>0}),[e])}},56491:(e,t,r)=>{r.d(t,{n7:()=>p,I9:()=>h,zY:()=>l,eS:()=>d,D6:()=>f,yk:()=>g,w_:()=>m,Yt:()=>c,$e:()=>u,oD:()=>y});var n=r(34767),a=r(52135),o=r(55452);const i={WEB_3_REQUEST_SCAN_MESSAGE_MISMATCHED_MESSAGE_FOR_TYPED_DATA:"scan_message.web3_request.mismatched_message_for_type_data",WEB_3_REQUEST_SCAN_MESSAGE_MISMATCHED_SANITIZED_DATA_FOR_TYPED_DATA:"scan_message.web3_request.mismatched_sanitized_data_for_type_data",WEB_3_REQUEST_SCAN_MESSAGE_MESSAGE_INFO:"scan_message.web3_request.scanned_message_info",WEB_3_REQUEST_SCAN_MESSAGE_ERROR_COMPONENT_LOADED:"scan_message.web3_request.scan_message_error_component_loaded",WEB_3_REQUEST_SCAN_MESSAGE_INVOKED:"scan_message.web3_request.scan_message_invoked",WEB_3_REQUEST_SCAN_MESSAGE_SUCCESS:"scan_message.web3_request.scan_message_success",WEB_3_REQUEST_SCAN_MESSAGE_SUCCESSFULLY_PARSED_OPERATIONS:"scan_message.web3_request.scan_message_successfully_parsed_operations",WEB_3_REQUEST_SCAN_MESSAGE_TIMEOUT:"scan_message.web3_request.scan_message_timeout",WEB_3_REQUEST_SCAN_MESSAGE_INVALID_QUERY:"scan_message.web3_request.scan_message_invalid_query",WEB_3_REQUEST_SCAN_MESSAGE_ERROR:"scan_message.web3_request.scan_message_error"};function s(e,t){return(0,o.N8)({metricName:e,metricType:n.vj.count,value:1,tags:{blockchain:t.blockchain,is_message_scanner_enabled:t.isMessageScannerEnabled,chain_id:t.chainId}}),(0,o.Np)(e,t)}function c(e){(0,o.Np)(i.WEB_3_REQUEST_SCAN_MESSAGE_MISMATCHED_MESSAGE_FOR_TYPED_DATA,{dappURL:(0,a.m)(e)})}function u(e){(0,o.Np)(i.WEB_3_REQUEST_SCAN_MESSAGE_MISMATCHED_SANITIZED_DATA_FOR_TYPED_DATA,{dappURL:(0,a.m)(e)})}function l(e){s(i.WEB_3_REQUEST_SCAN_MESSAGE_INVOKED,e)}function d(e){s(i.WEB_3_REQUEST_SCAN_MESSAGE_SUCCESS,e)}function f(e){s(i.WEB_3_REQUEST_SCAN_MESSAGE_SUCCESSFULLY_PARSED_OPERATIONS,e)}function p(e){s(i.WEB_3_REQUEST_SCAN_MESSAGE_ERROR,e)}function g(e){s(i.WEB_3_REQUEST_SCAN_MESSAGE_TIMEOUT,e)}function h(e){s(i.WEB_3_REQUEST_SCAN_MESSAGE_INVALID_QUERY,e)}function m(e){s(i.WEB_3_REQUEST_SCAN_MESSAGE_MESSAGE_INFO,e)}function y(e){(0,o.cp)(i.WEB_3_REQUEST_SCAN_MESSAGE_ERROR_COMPONENT_LOADED,{action:n.X2.render,componentType:n.I5.unknown,...e})}},22715:(e,t,r)=>{r.d(t,{Hs:()=>i,w$:()=>a,yS:()=>o});var n=r(69434);function a(e){return"wallet_sendCalls"===e.method}function o(e){return!!e&&["addEthereumChain","ethereumAddressFromSignedMessage","requestEthereumAccounts","signEthereumMessage","signEthereumTransaction","switchEthereumChain","watchAsset","wallet_sendCalls","wallet_showCallsStatus"].includes(e?.method)}function i(e){return[n.l.signMessage,n.l.sendTransaction,n.l.signTransaction,n.l.signAllTransactions].includes(e.method)}},66430:(e,t,r)=>{r.d(t,{a_:()=>n,b7:()=>a});const n=3,a="0xf85210B21cC50302F477BA56686d2019dC9b67Ad"},5961:(e,t,r)=>{r.d(t,{G:()=>o,n:()=>i});var n=r(99633),a=r(44944);function o(){return(0,n.useRecoilValue)(a.Y0)}function i(){return(0,n.useSetRecoilState)(a.Y0)}},44944:(e,t,r)=>{r.d(t,{Wi:()=>c,Y0:()=>i,an:()=>u,dO:()=>d,g_:()=>p,lr:()=>s,x0:()=>l});var n=r(18732),a=r(98226),o=r(99633);const i=(0,o.atom)({key:"isHardwareWalletSigning",default:!1}),s=(0,o.atom)({key:"hasCreatedSessionWithLedger",default:!1}),c=(0,o.atom)({key:"hardwareWalletEthAddressMapAtom",default:new Map}),u=(0,o.atom)({key:"selectedAddressesByAddress",default:{}}),l=(0,o.selector)({key:"selectedAddresses",get:function({get:e}){const t=e(u);return Object.values(t)}}),d=(0,o.selector)({key:"numberOfSelectedAddressesSelector",get:({get:e})=>e(l).length}),f=new a.J("hasSeenLedgerAddAddressNUX"),p=(0,o.atom)({key:"hasSeenLedgerAddAddressNUX",default:!1,effects:[(0,n.D)(f)]})},7853:(e,t,r)=>{r.d(t,{z:()=>s});var n=r(11554),a=r(71434),o=r(54065),i=r(10611);function s(e){let t;if(101===e)t=function(e){if(!e)throw new Error("No chainId provided");const t=i.D.fromChainId(BigInt(e));if(!t)return;return(0,o.uB)(t).network}(e);else t=(0,a.Q)(e);return(0,n.S)({network:t,blockchain:void 0})}},85194:(e,t,r)=>{r.d(t,{U2:()=>d,yJ:()=>l});var n=r(14041),a=r(9623),o=r.n(a),i=r(56491),s=r(46343),c=r.n(s),u=r(62207);function l(e,t){const r=(0,u.im)(t);try{if(o().hashForSignTypedDataLegacy({data:e}).equals(r))return"v1"}catch(e){}try{if(o().hashForSignTypedData_v3({data:e}).equals(r))return"v3"}catch(e){}try{if(o().hashForSignTypedData_v4({data:e}).equals(r))return"v4"}catch(e){}}function d(e,t){const r=(0,n.useCallback)((function(e,t){if("signEthereumMessage"!==e.method)return e;const{message:r,typedDataJson:n}=e.params;if(!n)return e;let o=JSON.parse(n);if("string"==typeof o&&(o=JSON.parse(o)),!l(o,r))throw(0,i.Yt)(t),new Error("Illegal typed data for messsage");const s=a.TypedDataUtils.sanitizeData(o);return c()(s,o)||(0,i.$e)(t),{...e,params:{...e.params,typedDataJson:JSON.stringify(s,null,1)}}}),[]);return(0,n.useMemo)((()=>r(e,t)),[r,e,t])}},81415:(e,t,r)=>{r.d(t,{Gy:()=>o,RU:()=>u,X3:()=>d,cP:()=>c,er:()=>l,qw:()=>f,yW:()=>i});var n=r(34565),a=r(89029);a.Decimal.set({precision:100});const o="0x0000000000000000000000000000000000000000";function i(e,t){const r=new a.Decimal(e),n=new a.Decimal(10).pow(Number(t));return r.mul(n)}function s(e,t){const r=new a.Decimal(e||0),n=new a.Decimal(10).pow(Number(t));return r.div(n)}function c(e,t){const r=(0,n.eH)(e),a=(0,n.eH)(t);return r.greaterThan(a)}function u(e){return"ETH"}function l(e){const t=i(e.toString(),BigInt(-9));return t.greaterThan(10)?t.toFixed(0,a.Decimal.ROUND_HALF_UP):t.greaterThan(1)?t.toDecimalPlaces(1,a.Decimal.ROUND_HALF_UP).toString():t.toSignificantDigits(2,a.Decimal.ROUND_HALF_UP).toFixed(9,a.Decimal.ROUND_HALF_UP).toString().replace(/0+$/,"").replace(/\.$/,"")}function d(e){if(""===e)return 0n;const t=Number(e).toFixed(18);return BigInt(i(t,18n).toFixed(0))}function f(e){return s(e.toString(),18n).toFixed(18)}},32077:(e,t,r)=>{r.d(t,{X:()=>S});var n=r(14041),a=r(95989),o=r(84137),i=r(29164);function s({children:e,isValidProp:t,...r}){t&&(0,o.D)(t),(r={...(0,n.useContext)(a.Q),...r}).isStatic=(0,i.M)((()=>r.isStatic));const s=(0,n.useMemo)((()=>r),[JSON.stringify(r.transition),r.transformPagePoint,r.reducedMotion]);return n.createElement(a.Q.Provider,{value:s},e)}var c=r(59812),u=r(2631);const l={property:"rotate",easing:u.cz,duration:u.Cp};var d=r(51101),f=r(2673),p=r(84492),g=r(29593),h=r(31085);const m=["rotate","size","color","testID","spacing","spacingBottom","spacingEnd","spacingHorizontal","spacingStart","spacingTop","spacingVertical"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}const S=(0,n.memo)((function(e){var t;let{rotate:r,size:n="s",color:a="foregroundMuted",testID:o,spacing:i,spacingBottom:u,spacingEnd:y,spacingHorizontal:b,spacingStart:S,spacingTop:E,spacingVertical:x}=e,_=w(e,m);const M=(0,g.q)({enterConfigs:[v(v({},l),{},{toValue:r})],initial:!1}),L={spacing:i,spacingBottom:u,spacingEnd:y,spacingHorizontal:b,spacingStart:S,spacingTop:E,spacingVertical:x},j=null!==(t=(0,d.d)())&&void 0!==t?t:a;return(0,h.jsx)(p.z,v(v({},L),{},{children:(0,h.jsx)(s,{reducedMotion:"user",children:(0,h.jsx)(c.m.div,v(v({},M),{},{"data-testid":"".concat(o,"-motion"),children:(0,h.jsx)(f.I,v({color:j,name:"caretUp",size:n},_))}))})}))}))},93606:(e,t,r)=>{r.d(t,{h:()=>o});var n=r(66077),a=r(95068);function o(e,t){if(!(0,a.P)(e,{strict:!1}))throw new n.M({address:e});if(!(0,a.P)(t,{strict:!1}))throw new n.M({address:t});return e.toLowerCase()===t.toLowerCase()}}}]);
//# sourceMappingURL=1684.js.map