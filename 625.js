"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[625],{61585:(e,t,n)=>{n.d(t,{L:()=>h});var a,r,i,s=n(14041),o=n(26651),c=n(6700),d=n(52338),u=n(2673),l=n(84492),p=n(15654),y=n(94330),m=n(73570),f=n(31085);function h(e){var t=e.networkId,n=e.address,a=e.learnMore,r=e.learnMorePress,i=e.includeLeftSideWarning,h=(0,o.d)(),b=(0,s.useCallback)((function(e){return function(){navigator.clipboard.writeText(e),h.show("Copied",{duration:1e3})}}),[h]),w=m.GB[t];return(0,f.jsxs)(l.z,{gap:1,alignItems:"center",children:[i&&(0,f.jsx)(u.I,{name:"warning",size:"s",color:"negative"}),(0,f.jsx)(p.T,{gap:2,children:(0,f.jsxs)(y.C,{testID:"prime-txn-detail-error",as:"p",children:["Address".concat(w?" on ".concat(w.name):" "," is not in the Onchain Address book"),n&&(0,f.jsxs)(l.z,{gap:1,alignItems:"center",children:[n,(0,f.jsx)(d.K,{name:"copy",transparent:!0,onPress:b(n)})]}),(0,f.jsx)(c.i,{variant:"label2",onClick:r,children:a})]})})]})}e=n.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(h,"useToast{toast}\nuseCallback{handleCopyAddress}",(function(){return[o.d]})),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&r.register(h,"PrimeAddressProtectionError","/workspaces/libs/wallet-cds-extension/components/TxDetails/PrimeAddressProtectionError.tsx"),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&i(e)},95998:(e,t,n)=>{n.d(t,{H:()=>P,Y:()=>A});var a=n(14041),r=n(32183),i=n(8867),s=n(70846),o=n(50170),c=n(9717),d=n(59020),u=n(61585),l=n(31085);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}e=n.hmd(e);var y,m=["analytics","chainDetails","shouldFormatErrorMessage"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=p(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&y(e);var w,g,k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},T=(0,r.YK)({primeNavigateToPrefix:{id:"Q8f/pz",defaultMessage:[{type:0,value:"Address/network pair not in address book. To add it, navigate to the"}]},primeLearnMoreLabel:{id:"lnZApC",defaultMessage:[{type:0,value:"Onchain Address Book"}]}});function A(e){var t,n,r,c=e.analytics,p=e.chainDetails,y=e.shouldFormatErrorMessage,f=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,m),b=(0,i.A)().formatMessage,w=b(T.primeNavigateToPrefix),g=b(T.primeLearnMoreLabel),k=(0,o.k)(),A=(0,a.useCallback)((function(){var t,n,a;chrome.tabs.create({url:(null===(t=x(null==f||null===(n=f.message)||void 0===n?void 0:n.toString(),k,g))||void 0===t?void 0:t.url)||(null===(a=e.learnMore)||void 0===a?void 0:a.url),active:!1})}),[null==f?void 0:f.message,k,null===(t=e.learnMore)||void 0===t?void 0:t.url,g]);(0,s.LY)({eventName:null==c?void 0:c.eventName,eventProperties:null==c?void 0:c.eventProperties,message:null==f||null===(n=f.message)||void 0===n?void 0:n.toString(),chainDetails:p});var S=(0,a.useMemo)((function(){var e,t;if(!y)return null;var n=P(null==f||null===(e=f.message)||void 0===e?void 0:e.toString());if(n){var a=n.networkId,r=n.address;return(0,l.jsx)(u.L,{networkId:a,address:r,learnMore:b(T.primeLearnMoreLabel),learnMorePress:A})}return v(null==f||null===(t=f.message)||void 0===t?void 0:t.toString(),w)}),[b,A,null==f?void 0:f.message,w,y]);return(0,l.jsx)(d.$,h(h({testID:"txn-detail-error"},f),{},{message:null!=S?S:null==f?void 0:f.message,learnMore:y?x(null==f||null===(r=f.message)||void 0===r?void 0:r.toString(),k,g):null==f?void 0:f.learnMore,onLearnMoreClick:A}))}function P(e){if(e.includes("not in address book")){var t,n,a=e.split(":"),r=null===(t=a[1])||void 0===t?void 0:t.trim(),i=null===(n=a[2])||void 0===n?void 0:n.trim(),s="";return i&&(s=r),{networkId:s,address:null!=i?i:r}}return null}function v(e,t){return e.includes("not in address book")?t:e}function x(e,t,n){if(e.includes("not in address book"))return{label:n,url:"".concat(c.ON,"/portfolio/").concat(t,"/settings/web3/address")}}k(A,"useIntl{{ formatMessage }}\nusePrimeActivePortfolioId{activePortfolioId}\nuseCallback{handleClickLearnMore}\nuseLogTransactionDetailError{}\nuseMemo{formattedMessage}",(function(){return[i.A,o.k,s.LY]})),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(w.register(T,"messages","/workspaces/libs/wallet-cds-extension/components/TxDetails/TxDetailError.tsx"),w.register(A,"TxDetailError","/workspaces/libs/wallet-cds-extension/components/TxDetails/TxDetailError.tsx"),w.register(P,"getTrustedAddressErrorMetadata","/workspaces/libs/wallet-cds-extension/components/TxDetails/TxDetailError.tsx"),w.register(v,"additionalContextFromMessage","/workspaces/libs/wallet-cds-extension/components/TxDetails/TxDetailError.tsx"),w.register(x,"learnMoreFromErrorMessage","/workspaces/libs/wallet-cds-extension/components/TxDetails/TxDetailError.tsx")),(g="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&g(e)},5950:(e,t,n)=>{n.d(t,{s:()=>i});var a=n(14041),r=n(36913);function i(){const e=(0,r.t)();return(0,a.useCallback)((function(t){return({unlockSuccess:n,unlockError:a})=>e({accountId:t,unlockSuccess:n,unlockError:a})}),[e])}},36913:(e,t,n)=>{n.d(t,{t:()=>d});var a=n(83815),r=n(79071),i=n.n(r),s=n(58341),o=n(42894),c=n(22535);function d(){const e=(0,a.Mf)();return(0,o.O)(((t,{accountId:n,unlockSuccess:a,unlockError:r=i()})=>{t&&t.unsubscribe();const o=n||e;return c.T.unlock({...s.uM.TransactionAccess,accountId:o}).subscribe((({status:e})=>{"SUCCESS"===e?a?.():r(new Error("Unlock Failed"))}),(e=>{r(e)}))}),[e])}},53107:(e,t,n)=>{n.d(t,{Im:()=>c,LX:()=>d,Zd:()=>u});var a=n(96295),r=n(99172),i=n(11993),s=n(33396),o=n(40019);const c=(0,s.KT)({steps:["entry","confirmationPreview","phoneConfirmation","selectAsset","selectWallet","selectNetwork","status","depositGas","loadingBestQuote","swapNux","gaslessSwapNux","adjustableSlippage","selectGasPaymentMethod"],defaultStep:"entry"}),d={selectedNetwork:r.lg.fromChainId({chainPrefix:a.RC,chainId:1n}),cryptoAmount:0n,enteredAmount:"",slippage:void 0,isFiat:!0,assetId:"",targetAssetId:"",targetAssetContractAddress:"",sourceWalletId:"",swapTradeResponse:void 0,ledgerSwapError:void 0,unsignedApproveTxResult:void 0,unsignedSwapTxResult:void 0,unsignedSwapTxResults:void 0,signedApproveTx:void 0,signedSwapTx:void 0,nonce:void 0,formDepositAmount:void 0,shouldUpdateCryptoAmount:!1,mode:i.z.Normal,browserMode:!1,networkFeeInFiat:void 0,isGaslessToggleDisabled:!1,aggregatorID:"",transactionDetailError:void 0},u=(0,o.A)({initialValues:d})},10654:(e,t,n)=>{n.d(t,{H:()=>o});var a=n(14041),r=n(24631),i=n(37121),s=n(53107);function o(){const{hasLocallyStoredKey:e}=(0,r.L)(),{selectedNetwork:{value:t},swapTradeResponse:{value:n},unsignedSwapTxResults:{value:o},mode:{value:c}}=(0,i.A)(s.Zd);return(0,a.useMemo)((()=>({isStandalone:e,network:t.rawValue,chainId:t.asChain()?.chainId??"",chainDisplayName:t.asChain()?.displayName??"",isLayer2:t.asChain()?.isLayer2??!1,isTestnet:t.asChain()?.isTestnet??!1,sourceCurrencyCode:n?.quote.fromAsset.currencyCode.rawValue??"",sourceAddress:n?.quote.fromAsset.address??"",targetAddress:n?.quote.toAsset.address??"",targetCurrencyCode:n?.quote.toAsset.currencyCode.rawValue??"",isMultiRouteSwap:Boolean(o&&o.length>1),hasCBOneSubscription:!1,swapMode:c})),[e,c,t,n?.quote.fromAsset.address,n?.quote.fromAsset.currencyCode.rawValue,n?.quote.toAsset.address,n?.quote.toAsset.currencyCode.rawValue,o])}},21455:(e,t,n)=>{n.d(t,{K1:()=>i,Mg:()=>o,we:()=>s});var a=n(34767),r=n(55452);function i(e){(0,r.Np)("transaction_unsigned_user_op_unknown_error",{errorMessage:e.message})}function s(e){(0,r.$s)("unsigned_user_op.data.logged",{action:a.X2.unknown,componentType:a.I5.unknown,...e})}function o({context:e}){(0,r.Np)("generate_user_op.start",{context:e})}},79637:(e,t,n)=>{n.d(t,{L:()=>o});var a=n(19684),r=n(23804);const i=3e3,s=1e4;function o({wallet:e}){let t;switch(e.blockchain.rawValue){case"ETH":t=async()=>async function({wallet:e}){const t=r.u.generateId(e);a.Mp.refreshBalances({context:{walletId:t}})}({wallet:e});break;case"SOL":t=async()=>async function({wallet:e}){const t=r.u.generateId(e);a.Lp.refreshBalances({context:{walletId:t}})}({wallet:e})}t&&(setTimeout(t,i),setTimeout(t,s))}},97441:(e,t,n)=>{n.d(t,{U:()=>c});var a=n(70156),r=n.n(a),i=n(62207),s=n(67620),o=n(1048).Buffer;function c(e,t,n,a=!1){const c=s.Address.getAddressValidationError(e,a);if(c)throw c;if(!s.Address.isValid(t))throw Error(`Invalid "contractAddress" value passed. Given:${t}`);return{toAddress:t,data:o.from(["a9059cbb",r()((0,i.LL)(e),64,"0"),r()(n.toString(16),64,"0")].join(""),"hex")}}},77547:(e,t,n)=>{n.d(t,{D:()=>d});var a=n(26182),r=n(29039),i=n(49143),s=n(36210),o=n(57321),c=n(77981);class d{constructor(e,t,n,a,r,i,s,o,c,d,u,l,p,y,m,f,h,b,w,g,k=new Map,T,A){this.toAddress=e,this.toDomain=t,this.fromAddress=n,this.fromDomain=a,this.walletIndex=r,this.nonce=i,this.weiValue=s,this.erc20Value=o,this.data=c,this.maxFeePerGas=d,this.maxPriorityFeePerGas=u,this.gasLimit=l,this.network=p,this.currencyCode=y,this.blockchain=m,this.transferValue=f,this.feeCurrencyCode=h,this.feeCurrencyDecimal=b,this.recipientAddress=w,this.recipientDomain=g,this.metadata=k,this.baseFeePerGas=T,this.l1GasFee=A}get estimatedFee(){throw a.c.unsupportedAccessToEstimatedFeeOn1559Tx}get lowerBoundFee(){return(this.baseFeePerGas+this.maxPriorityFeePerGas)*this.gasLimit+(this.l1GasFee??0n)}get upperBoundFee(){return this.maxFeePerGas*BigInt(this.gasLimit)+(this.l1GasFee??0n)}static createEtherTx({fromAddress:e,fromDomain:t,walletIndex:n,toAddress:a,toDomain:r,nonce:i,weiValue:s,data:o,maxFeePerGas:c,maxPriorityFeePerGas:u,gasLimit:l,network:p,currencyCode:y,feeCurrencyCode:m,feeCurrencyDecimal:f,blockchain:h,metadata:b,baseFeePerGas:w,l1GasFee:g}){return new d(a,r,e,t,n,i,s,void 0,o,c,u,l,p,y,h,s,m,f,a??"",r,b,w,g)}static createERC20Tx({fromAddress:e,fromDomain:t,walletIndex:n,contractAddress:a,contractDomain:r,recipientAddress:i,recipientDomain:s,nonce:o,erc20Value:c,data:u,maxFeePerGas:l,maxPriorityFeePerGas:p,gasLimit:y,network:m,currencyCode:f,feeCurrencyCode:h,feeCurrencyDecimal:b,blockchain:w,metadata:g=new Map,baseFeePerGas:k,l1GasFee:T}){return new d(a,r,e,t,n,o,0n,c,u,l,p,y,m,f,w,c,h,b,i,s,g,k,T)}asTransaction(e,t,n,a,d="original",u){return new i.oT({id:(0,c.A)(),createdAt:new Date,blockchain:this.blockchain,currencyCode:this.currencyCode,feeCurrencyCode:this.feeCurrencyCode,feeCurrencyDecimal:this.feeCurrencyDecimal,toAddress:this.recipientAddress,toDomain:this.recipientDomain,fromAddress:this.fromAddress,fromDomain:this.fromDomain,amount:this.transferValue,fee:this.upperBoundFee,state:o.W.PENDING,metadata:new s.l(a),network:this.network,txOrUserOpHash:e,userOpHash:void 0,accountId:n.accountId,walletIndex:n.selectedIndex??0n,txHash:e,isSent:!0,contractAddress:n.contractAddress,tokenName:n.displayName,tokenDecimal:n.decimals,walletId:n.id,nonce:t,pendingEthTxData:new r.U(this.baseFeePerGas,this.data,this.gasLimit,this.maxFeePerGas,this.maxPriorityFeePerGas,d,this.l1GasFee),type:u,transfers:[],deleted:!1})}}},13620:(e,t,n)=>{n.d(t,{U:()=>c});var a=n(26182),r=n(49143),i=n(36210),s=n(57321),o=n(77981);class c{constructor(e,t,n,a,r,i,s,o,c,d,u,l,p,y,m,f,h,b,w,g,k=new Map){this.toAddress=e,this.toDomain=t,this.fromAddress=n,this.fromDomain=a,this.walletIndex=r,this.nonce=i,this.weiValue=s,this.erc20Value=o,this.data=c,this.l1GasFee=d,this.gasPrice=u,this.gasLimit=l,this.network=p,this.currencyCode=y,this.blockchain=m,this.transferValue=f,this.feeCurrencyCode=h,this.feeCurrencyDecimal=b,this.recipientAddress=w,this.recipientDomain=g,this.metadata=k,this.estimatedFee=u*l+(d??0n)}get maxFeePerGas(){throw a.c.unsupported1559Property}get baseFeePerGas(){throw a.c.unsupported1559Property}get maxPriorityFeePerGas(){throw a.c.unsupported1559Property}static createEtherTx({fromAddress:e,fromDomain:t,walletIndex:n,toAddress:a,toDomain:r,nonce:i,weiValue:s,data:o,l1GasFee:d,gasPrice:u,gasLimit:l,network:p,currencyCode:y,feeCurrencyCode:m,feeCurrencyDecimal:f,blockchain:h,metadata:b}){return new c(a,r,e,t,n,i,s,void 0,o,d,u,l,p,y,h,s,m,f,a??"",r,b)}static createERC20Tx({fromAddress:e,fromDomain:t,walletIndex:n,contractAddress:a,contractDomain:r,recipientAddress:i,recipientDomain:s,nonce:o,erc20Value:d,data:u,l1GasFee:l,gasPrice:p,gasLimit:y,network:m,currencyCode:f,feeCurrencyCode:h,feeCurrencyDecimal:b,blockchain:w,metadata:g}){return new c(a,r,e,t,n,o,0n,d,u,l,p,y,m,f,w,d,h,b,i,s,g)}asTransaction(e,t,n,a,c,d){return new r.oT({id:(0,o.A)(),createdAt:new Date,confirmedAt:void 0,blockchain:this.blockchain,currencyCode:this.currencyCode,feeCurrencyCode:this.feeCurrencyCode,feeCurrencyDecimal:this.feeCurrencyDecimal,toAddress:this.recipientAddress,toDomain:this.recipientDomain,fromAddress:this.fromAddress,fromDomain:this.fromDomain,amount:this.transferValue,fee:this.estimatedFee,state:s.W.PENDING,metadata:new i.l(a),network:this.network,txHash:e,txOrUserOpHash:e,userOpHash:void 0,walletIndex:n.selectedIndex??0n,accountId:n.accountId,isSent:!0,contractAddress:n.contractAddress,tokenName:n.displayName,tokenDecimal:n.decimals,walletId:n.id,nonce:t,type:d})}}},91635:(e,t,n)=>{n.d(t,{f:()=>d});var a=n(5104),r=n(88389),i=n(49143),s=n(36210),o=n(57321),c=n(77981);class d{constructor(e,t,n,a,r,i,s,o,c,d,u,l,p,y,m,f,h,b,w,g,k,T,A,P){this.calls=e,this.callData=t,this.callGasLimit=n,this.initCode=a,this.paymasterAndData=r,this.paymasterSponsor=i,this.preVerificationGas=s,this.verificationGasLimit=o,this.maxFeePerGas=c,this.maxPriorityFeePerGas=d,this.nonce=u,this.recipientAddress=l,this.fromAddress=p,this.transferValue=y,this.blockchain=m,this.currencyCode=f,this.feeCurrencyCode=h,this.feeCurrencyDecimal=b,this.metadata=w,this.fromDomain=g,this.recipientDomain=k,this.network=T,this.isMaxSend=A,this.baseFeePerGas=P}get estimatedFee(){return(0,a.W)(this)}get lowerBoundFee(){return(0,r.R)({callGasLimit:this.callGasLimit,verificationGasLimit:this.verificationGasLimit,preVerificationGas:this.preVerificationGas,maxFeePerGas:this.maxFeePerGas,maxPriorityFeePerGas:this.maxPriorityFeePerGas,additionalParameters:{baseFeePerGas:this.baseFeePerGas}})}get upperBoundFee(){return(0,a.W)(this)}static createUserOp({baseFeePerGas:e,calls:t,callData:n,callGasLimit:a,initCode:r,paymasterAndData:i,paymasterSponsor:s,preVerificationGas:o,verificationGasLimit:c,maxFeePerGas:u,maxPriorityFeePerGas:l,nonce:p,recipientAddress:y,fromAddress:m,transferValue:f,blockchain:h,currencyCode:b,feeCurrencyCode:w,feeCurrencyDecimal:g,metadata:k,fromDomain:T,recipientDomain:A,network:P,isMaxSend:v}){return new d(t,n,a,r,i,s,o,c,u,l,p,y,m,f,h,b,w,g,k,T,A,P,v,e)}asTransaction(e,t,n,a,r,d){return new i.oT({id:(0,c.A)(),createdAt:new Date,blockchain:this.blockchain,currencyCode:this.currencyCode,feeCurrencyCode:this.feeCurrencyCode,feeCurrencyDecimal:this.feeCurrencyDecimal,toAddress:this.recipientAddress,toDomain:this.recipientDomain,fromAddress:this.fromAddress,fromDomain:this.fromDomain,amount:this.transferValue,fee:this.upperBoundFee,state:o.W.PENDING,metadata:new s.l(a),network:this.network,txOrUserOpHash:e,userOpHash:e,txHash:void 0,accountId:n.accountId,walletIndex:n.selectedIndex??0n,isSent:!0,contractAddress:n.contractAddress,tokenName:n.displayName,tokenDecimal:n.decimals,walletId:n.id,nonce:t,type:d,transfers:[],deleted:!1})}}},52303:(e,t,n)=>{n.d(t,{_:()=>r});var a=n(77547);function r(e){return e instanceof a.D}},63408:(e,t,n)=>{n.d(t,{T:()=>r});var a=n(13620);function r(e){return e instanceof a.U}},41092:(e,t,n)=>{n.d(t,{a:()=>r});var a=n(91635);function r(e){return e instanceof a.f}},53670:(e,t,n)=>{n.d(t,{Z:()=>G,C:()=>D});var a=n(3834),r=n(56018),i=n(54065),s=n(71776),o=n(16191),c=n(78918),d=n(80598);n(1048);var u=n(1048).Buffer;function l(e,t){const n=e.layout.span>=0?e.layout.span:function(e,t){let n=0;return e.layout.fields.forEach((e=>{e.span>=0?n+=Number(e.span):"function"==typeof e.alloc&&(n+=Number(e.alloc(t[e.property])))})),n}(e,t),a=u.alloc(n),r={instruction:e.index,...t};return e.layout.encode(r,a),a}var p=n(1048).Buffer;const y=Object.freeze({Transfer:{index:12,layout:c.struct([c.u8("instruction"),c.nu64("amount"),c.u8("decimals")]),property:"transferChecked"}});async function m(e){return(await a.PublicKey.findProgramAddress([new a.PublicKey(e.walletAddress).toBuffer(),new a.PublicKey(e.tokenProgramId).toBuffer(),new a.PublicKey(e.tokenMintAddress).toBuffer()],d.EK))[0]}var f=n(13394),h=n(81517),b=n(58524),w=n(44308),g=n(47340),k=n(1048).Buffer;function T(e,t,n){const r=new a.TransactionMessage({payerKey:e,recentBlockhash:n,instructions:t}).compileToV0Message();return k.from(r.serialize()).toString("base64")}var A=n(1048).Buffer;const P=A.alloc(64);function v(e){return e.equals(P)}var x=n(58910);function S(e,t){const n=e.serialize({verifySignatures:!1}).length,r=t.some((e=>e.programId.equals(a.ComputeBudgetProgram.programId)));return!function(e){return e.signatures.some((e=>e instanceof Uint8Array?!v(A.from(e)):!!e.signature&&!v(e.signature)))}(e)&&!r&&n+x.E8<x.XH}var I=n(47656),C=n(1048).Buffer;async function G(e){return e.nativeDappTransaction?D(e):e.wallet.contractAddress?async function({wallet:e,transactionAmount:t,recipientAddress:n,metadata:c,submissionParams:u,isSolanaPriorityFeeEnabled:g}){try{if(!e.contractAddress)throw new Error("Invalid wallet for sending SPL token");const f=e.primaryAddress,k=new a.PublicKey(e.primaryAddress),{blockhash:A}=await(0,w.l4)({rpcUrl:b.hR}),{priorityFeeInstruction:P,computeUnitLimitInstruction:v}=await(0,r.yc)([f,n]),x=await(0,w.Gf)({address:e.contractAddress,rpcUrl:b.hR}),S=x.value?.owner??d.x5.toBase58(),I=await m({walletAddress:f,tokenMintAddress:e.contractAddress,tokenProgramId:S});let G=0n,D=0n;G="EntireBalance"===t.kind?await(0,w.Fh)({ataAddress:I.toBase58(),rpcUrl:b.hR}):t.value;const F=[],O=await m({walletAddress:n,tokenMintAddress:e.contractAddress,tokenProgramId:S});(await(0,w.Gf)({address:O.toBase58(),rpcUrl:b.hR})).value||(D=await(0,w.FQ)(b.hR),F.push(function(e){const t=new a.PublicKey(e.payerAddress),n=new a.PublicKey(e.receiverAddress),r=new a.PublicKey(e.mintAddress),i=new a.PublicKey(e.tokenProgramId),s=[{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:e.ataPubkey,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:d.n3,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:d._X,isSigner:!1,isWritable:!1}];return new a.TransactionInstruction({keys:s,programId:d.EK,data:p.from([])})}({payerAddress:e.primaryAddress,mintAddress:e.contractAddress,receiverAddress:n,ataPubkey:O,tokenProgramId:S})));const E=function(e){const t=[{pubkey:e.sourceAta,isSigner:!1,isWritable:!0},{pubkey:new a.PublicKey(e.mintAddress),isSigner:!1,isWritable:!1},{pubkey:e.receiverAta,isSigner:!1,isWritable:!0},{pubkey:new a.PublicKey(e.owner),isSigner:!0,isWritable:!1}],n=l(y.Transfer,{amount:e.amount,decimals:e.decimals});return new a.TransactionInstruction({keys:t,data:n,programId:new a.PublicKey(e.tokenProgramId)})}({sourceAta:I,receiverAta:O,mintAddress:e.contractAddress,owner:f,amount:Number(G),decimals:Number(e.decimals),tokenProgramId:S});F.push(E),g&&(F.push(P),F.push(v));const L=T(k,F,A),U=await(0,w.bg)({transactionMessage:L,rpcUrl:b.hR}),[M,N]=await(0,h.mC)([e.primaryAddress,n]),_=new o.K(e.primaryAddress,M,n,N,0n,e.network,e.currencyCode,e.blockchain,G,i.Yw.currencyCodeForNetwork(),i.Yw.feeDecimalForNetwork(),U.networkFee??0n,C.from(""),c,F,D,void 0,void 0,!0,e.primaryAddress,u);return"Success"===U.kind?{kind:"Success",transaction:_,wallet:e,err:void 0}:{kind:"Failure",transaction:_,wallet:e,err:s.t.unableToGenerateUnsignedTransaction}}catch(e){throw(0,f.gf)({error:e,context:"solana-error",severity:"error",isHandled:!1}),e}}(e):async function({wallet:e,transactionAmount:t,recipientAddress:n,metadata:c,submissionParams:d,isSolanaPriorityFeeEnabled:u}){try{const l=e.primaryAddress,p=new a.PublicKey(l),y=new a.PublicKey(n),{blockhash:m}=await(0,w.l4)({rpcUrl:b.hR}),{priorityFeeInstruction:f,computeUnitLimitInstruction:g}=await(0,r.yc)([l,n]),k=a.SystemProgram.transfer({fromPubkey:p,toPubkey:y,lamports:0n}),A=T(p,[k].concat(u?[f,g]:[]),m),P=await(0,w.bg)({transactionMessage:A,rpcUrl:b.hR});let v=0n;"EntireBalance"===t.kind?(v=await(0,w.r1)({address:l,rpcUrl:b.hR}),"Success"===P.kind&&(v-=P.networkFee)):v=t.value;const[x,S]=await(0,h.mC)([e.primaryAddress,n]),I=[],G=a.SystemProgram.transfer({fromPubkey:p,toPubkey:y,lamports:Number(v)});I.push(G),u&&(I.push(f),I.push(g));const D=new o.K(e.primaryAddress,x,n,S,0n,e.network,e.currencyCode,e.blockchain,v,i.Yw.currencyCodeForNetwork(),i.Yw.feeDecimalForNetwork(),P.networkFee??0n,C.from(""),c,I,void 0,void 0,void 0,!0,e.primaryAddress,d);return"Success"===P.kind?{kind:"Success",transaction:D,err:void 0,wallet:e}:{kind:"Failure",transaction:D,err:s.t.unableToGenerateUnsignedTransaction}}catch(e){throw(0,f.gf)({error:e,context:"solana-error",severity:"error",isHandled:!1}),e}}(e)}async function D({wallet:e,nativeDappTransaction:t,metadata:n,shouldSavePendingTransaction:c,recipientAddress:d,transactionAmount:u,submissionParams:l,isSolanaPriorityFeeEnabled:p}){try{if(!t)throw new Error("Invalid transaction");const y=t,{priorityFeeInstruction:m,computeUnitLimitInstruction:f}=await(0,r.yc)([e.primaryAddress]),k=p?[m,f]:[];let T=[],A="";if((0,I.Y2)(y)){const e=y.message.addressTableLookups.map((e=>e.accountKey)),t=await(0,r.Hl)(e),n=a.TransactionMessage.decompile(y.message,{addressLookupTableAccounts:t});T=F(y,n.instructions,k),n.instructions=T,y.message=n.compileToV0Message(t),A=n.payerKey.toBase58()}else T=F(y,y.instructions,k),y.instructions=T,A=y.feePayer.toBase58();const P=(0,g.C)(T),v=function(e){if((0,I.Y2)(e))return C.from(e.message.serialize()).toString("base64");return e.serializeMessage().toString("base64")}(y),x=await(0,w.bg)({transactionMessage:v,rpcUrl:b.hR}),S="Amount"===u.kind?u.value:0n,G=(0,I.Y2)(y)?function(e){const t=e.filter((e=>"Transfer"===e.instructionType));if(0===t.length)return"";const{instructionParams:n}=t[0];return n.filter((e=>"to"===e.paramKey))[0].paramValue}(P):"",D=d||G,[O,E]=await(0,h.mC)([e.primaryAddress,D]),L=new o.K(e.primaryAddress,O,D,E,0n,e.network,e.currencyCode,e.blockchain,S,i.Yw.currencyCodeForNetwork(),i.Yw.feeDecimalForNetwork(),x.networkFee??0n,C.from(""),n,T,void 0,y,P,c,A,l);return"Success"===x.kind?{kind:"Success",transaction:L,wallet:e,err:void 0}:{kind:"Failure",transaction:L,wallet:e,err:s.t.unableToGetNetworkFee}}catch(e){throw(0,f.gf)({error:e,context:"solana-error",isHandled:!1,severity:"error"}),e}}function F(e,t,n){return S(e,t)?t.concat(n):t}},71776:(e,t,n)=>{n.d(t,{t:()=>a});class a extends Error{constructor(e,t,n){super(t),this.name=e,this.message=t,this.stack=n}}a.unableToFindWallet=new a("UnableToFindWallet",""),a.invalidConfiguration=new a("InvalidConfiguration",""),a.unableToGenerateUnsignedTransaction=new a("UnableToGenerateUnsignedTransaction","Unable to generate unsigned transaction"),a.unableToGetRecentBlockHash=new a("UnableToGetRecentBlockHash","Unable to get block hash"),a.transactionSimulationFailed=new a("TransactionSimulationFailed","Transaction simulation failed"),a.unableToSubmitTransaction=new a("TransactionSubmissionFailed","Unable to submit transaction"),a.wrongSignerFromDapp=new a("DappTransactionWrongSigner","Wrong signer address from request"),a.noFeePayerFound=new a("NoFeePayerFound","Transaction does not have a fee payer"),a.unableToGetNetworkFee=new a("UnableToGetNetworkFee","Unable to get network fee")},16191:(e,t,n)=>{n.d(t,{K:()=>o});var a=n(49143),r=n(36210),i=n(57321),s=n(77981);class o{constructor(e,t,n,a,r,i,s,o,c,d,u,l,p,y=new Map,m,f,h,b,w=!0,g,k){this.fromAddress=e,this.fromDomain=t,this.recipientAddress=n,this.recipientDomain=a,this.walletIndex=r,this.network=i,this.currencyCode=s,this.blockchain=o,this.transferValue=c,this.feeCurrencyCode=d,this.feeCurrencyDecimal=u,this.estimatedFee=l,this.data=p,this.metadata=y,this.instructions=m,this.extraFee=f,this.nativeDappTransaction=h,this.dappInstructionMetaData=b,this.shouldSavePendingTransaction=w,this.feePayerAddress=g,this.submissionParams=k}asTransaction(e,t,n,o){return new a.oT({id:(0,s.A)(),createdAt:new Date,blockchain:this.blockchain,currencyCode:this.currencyCode,feeCurrencyCode:this.feeCurrencyCode,feeCurrencyDecimal:this.feeCurrencyDecimal,toAddress:this.recipientAddress,toDomain:this.recipientDomain,fromAddress:this.fromAddress,fromDomain:this.fromDomain,amount:this.transferValue,fee:this.estimatedFee,state:i.W.PENDING,metadata:new r.l(o),network:this.network,txOrUserOpHash:e,userOpHash:void 0,accountId:n.accountId,walletIndex:n.selectedIndex??0n,txHash:e,isSent:!0,contractAddress:n.contractAddress,tokenName:n.displayName,tokenDecimal:n.decimals,walletId:n.id})}}},80598:(e,t,n)=>{n.d(t,{EK:()=>r,WT:()=>d,_X:()=>s,n3:()=>o,oA:()=>c,x5:()=>i});var a=n(3834);const r=new a.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),i=new a.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),s=new a.PublicKey("SysvarRent111111111111111111111111111111111"),o=new a.PublicKey("11111111111111111111111111111111"),c=new a.PublicKey("Vote111111111111111111111111111111111111111"),d=new a.PublicKey("Stake11111111111111111111111111111111111111")},47340:(e,t,n)=>{n.d(t,{P:()=>h,C:()=>b});var a=n(64142),r=n(39216),i=n.n(r),s=n(80598),o=n(62095),c=n(49064),d=n(37448),u=n(47656);function l(e){const t=(0,o.pK)(e),n=c._[t.data.instruction];let a;return(0,o.Jq)(t)?a=function(e){return{mint:e.keys.mint.pubkey,mintAuthority:e.data.mintAuthority}}(t):(0,o.Qs)(t)?a=function(e){return{account:e.keys.account.pubkey,mint:e.keys.mint.pubkey,owner:e.keys.owner.pubkey}}(t):(0,o.Oz)(t)?a=function(e){return{source:e.keys.account.pubkey,destination:e.keys.destination.pubkey,authority:e.keys.authority.pubkey}}(t):(0,o.Lg)(t)?a=function(e){return{account:e.keys.account.pubkey,requiredSignatures:e.data.m}}(t):(0,o.o)(t)?a=function(e){return{from:e.keys.source.pubkey,to:e.keys.destination.pubkey,amount:Number(e.data.amount)}}(t):(0,o.uD)(t)?a=function(e){return{account:e.keys.account.pubkey,delegate:e.keys.delegate.pubkey,owner:e.keys.owner.pubkey,amount:Number(e.data.amount)}}(t):(0,o.b3)(t)?a=function(e){return{account:e.keys.account.pubkey,owner:e.keys.owner.pubkey}}(t):(0,o.Yb)(t)?a=function(e){return{account:e.keys.account.pubkey,currentAuthority:e.keys.currentAuthority.pubkey,newAuthority:e.data.newAuthority,authorityType:d.I4[e.data.authorityType]}}(t):(0,o.aK)(t)?a=function(e){return{mint:e.keys.mint.pubkey,destination:e.keys.destination.pubkey,authority:e.keys.authority.pubkey,amount:Number(e.data.amount)}}(t):(0,o.wR)(t)?a=function(e){return{account:e.keys.account.pubkey,mint:e.keys.mint.pubkey,owner:e.keys.owner.pubkey,amount:Number(e.data.amount)}}(t):(0,o.Zl)(t)||(0,o.OE)(t)?a=function(e){return{account:e.keys.account.pubkey,mint:e.keys.mint.pubkey,authority:e.keys.authority.pubkey}}(t):(0,o.zP)(t)?a=function(e){return{owner:e.keys.owner.pubkey,from:e.keys.source.pubkey,to:e.keys.destination.pubkey,amount:Number(e.data.amount),mint:e.keys.mint.pubkey}}(t):(0,o.NY)(t)?a=function(e){return{account:e.keys.account.pubkey,mint:e.keys.mint.pubkey,delegate:e.keys.delegate.pubkey,owner:e.keys.owner.pubkey,amount:Number(e.data.amount)}}(t):(0,o.j)(t)?a=function(e){return{mint:e.keys.mint.pubkey,destination:e.keys.destination.pubkey,authority:e.keys.authority.pubkey,amount:Number(e.data.amount)}}(t):(0,o.Fx)(t)?a=function(e){return{account:e.keys.account.pubkey,mint:e.keys.mint.pubkey,owner:e.keys.owner.pubkey,amount:Number(e.data.amount)}}(t):(0,o.iY)(t)?a=function(e){return{account:e.keys.account.pubkey,mint:e.keys.mint.pubkey,owner:e.data.owner}}(t):(0,o.T)(t)?a=function(e){return{account:e.keys.account.pubkey}}(t):(0,o.nt)(t)?a=function(e){return{account:e.keys.account.pubkey,mint:e.keys.mint.pubkey,owner:e.data.owner}}(t):(0,o.Tz)(t)&&(a=function(e){return{mint:e.keys.mint.pubkey,mintAuthority:e.data.mintAuthority,freezeAuthority:e.data.freezeAuthority}}(t)),{instructionType:n,instructionParams:a?(0,u._g)(a):[]}}var p=n(3834);class y{static decodeInstruction(e){const t=p.StakeInstruction.decodeInstructionType(e);let n;switch(t){case"Authorize":n=this.decodeAuthorize(e);break;case"AuthorizeWithSeed":n=this.decodeAuthorizeWithSeed(e);break;case"Deactivate":n=this.decodeDeactivate(e);break;case"Delegate":n=this.decodeDelegate(e);break;case"Initialize":n=this.decodeInitialize(e);break;case"Merge":n=this.decodeMerge(e);break;case"Split":n=this.decodeSplit(e);break;case"Withdraw":n=this.decodeWithdraw(e);break;default:n={}}return{instructionType:t,instructionParams:(0,u._g)(n)}}static decodeInitialize(e){const t=p.StakeInstruction.decodeInitialize(e);return{staker:t.authorized.staker,withdrawer:t.authorized.withdrawer,custodian:t.lockup?.custodian}}static decodeDelegate(e){const t=p.StakeInstruction.decodeDelegate(e);return{stake:t.stakePubkey,vote:t.votePubkey,authorized:t.authorizedPubkey}}static decodeAuthorize(e){const t=p.StakeInstruction.decodeAuthorize(e),n={stake:t.stakePubkey,newAuthority:t.newAuthorizedPubkey};return t.custodianPubkey&&(n.custodian=t.custodianPubkey),n}static decodeAuthorizeWithSeed(e){const t=p.StakeInstruction.decodeAuthorizeWithSeed(e),n={stake:t.stakePubkey,newAuthority:t.newAuthorizedPubkey};return t.custodianPubkey&&(n.custodian=t.custodianPubkey),n}static decodeSplit(e){const t=p.StakeInstruction.decodeSplit(e);return{splitStake:t.splitStakePubkey,authorized:t.authorizedPubkey,amount:Number(t.lamports)/p.LAMPORTS_PER_SOL}}static decodeMerge(e){const t=p.StakeInstruction.decodeMerge(e);return{stake:t.stakePubkey,source:t.sourceStakePubKey,authority:t.authorizedPubkey}}static decodeWithdraw(e){const t=p.StakeInstruction.decodeWithdraw(e),n={authority:t.authorizedPubkey,to:t.toPubkey,amount:Number(t.lamports)/p.LAMPORTS_PER_SOL};return t.custodianPubkey&&(n.custodian=t.custodianPubkey),n}static decodeDeactivate(e){const t=p.StakeInstruction.decodeDeactivate(e);return{stake:t.stakePubkey,authority:t.authorizedPubkey}}}class m{static decodeInstruction(e){const t=p.SystemInstruction.decodeInstructionType(e);let n;switch(t){case"AdvanceNonceAccount":n=this.decodeNonceAdvance(e);break;case"Allocate":n=this.decodeAllocate(e);break;case"AllocateWithSeed":n=this.decodeAllocateWithSeed(e);break;case"Assign":n=this.decodeAssign(e);break;case"AssignWithSeed":n=this.decodeAssignWithSeed(e);break;case"AuthorizeNonceAccount":n=this.decodeNonceAuthorize(e);break;case"Create":n=this.decodeCreateAccount(e);break;case"CreateWithSeed":n=this.decodeCreateWithSeed(e);break;case"InitializeNonceAccount":n=this.decodeNonceInitialize(e);break;case"Transfer":n=this.decodeTransfer(e);break;case"TransferWithSeed":n=this.decodeTransferWithSeed(e);break;case"WithdrawNonceAccount":n=this.decodeNonceWithdraw(e);break;default:n={}}return{instructionType:t,instructionParams:(0,u._g)(n)}}static decodeCreateAccount(e){const t=p.SystemInstruction.decodeCreateAccount(e);return{from:t.fromPubkey,newAccount:t.newAccountPubkey,amount:Number(t.lamports)/p.LAMPORTS_PER_SOL,space:t.space}}static decodeTransfer(e){const t=p.SystemInstruction.decodeTransfer(e);return{from:t.fromPubkey,to:t.toPubkey,amount:Number(t.lamports)/p.LAMPORTS_PER_SOL}}static decodeTransferWithSeed(e){const t=p.SystemInstruction.decodeTransferWithSeed(e);return{from:t.fromPubkey,to:t.toPubkey,amount:Number(t.lamports)/p.LAMPORTS_PER_SOL}}static decodeAllocate(e){const t=p.SystemInstruction.decodeAllocate(e);return{account:t.accountPubkey,space:t.space}}static decodeAllocateWithSeed(e){const t=p.SystemInstruction.decodeAllocateWithSeed(e);return{account:t.accountPubkey,space:t.space}}static decodeAssign(e){return{account:p.SystemInstruction.decodeAssign(e).accountPubkey}}static decodeAssignWithSeed(e){return{account:p.SystemInstruction.decodeAssignWithSeed(e).accountPubkey}}static decodeCreateWithSeed(e){const t=p.SystemInstruction.decodeCreateWithSeed(e);return{account:t.newAccountPubkey,amount:Number(t.lamports)/p.LAMPORTS_PER_SOL,space:t.space}}static decodeNonceInitialize(e){const t=p.SystemInstruction.decodeNonceInitialize(e);return{nonceAccount:t.noncePubkey,authority:t.authorizedPubkey}}static decodeNonceAdvance(e){const t=p.SystemInstruction.decodeNonceAdvance(e);return{nonceAccount:t.noncePubkey,authority:t.authorizedPubkey}}static decodeNonceWithdraw(e){const t=p.SystemInstruction.decodeNonceWithdraw(e);return{nonceAccount:t.noncePubkey,to:t.toPubkey,authority:t.authorizedPubkey,amount:Number(t.lamports)/p.LAMPORTS_PER_SOL}}static decodeNonceAuthorize(e){const t=p.SystemInstruction.decodeNonceAuthorize(e);return{nonceAccount:t.noncePubkey,authority:t.authorizedPubkey,newAuthority:t.newAuthorizedPubkey}}}class f{static decodeInstruction(e){const t=p.VoteInstruction.decodeInstructionType(e);let n;switch(t){case"Authorize":n=this.decodeAuthorize(e);break;case"InitializeAccount":n=this.decodeInitializeAccount(e);break;case"Withdraw":n=this.decodeWithdraw(e);break;default:n={}}return{instructionType:t,instructionParams:(0,u._g)(n)}}static decodeInitializeAccount(e){const t=p.VoteInstruction.decodeInitializeAccount(e);return{vote:t.votePubkey,authorizedVoter:t.voteInit.authorizedVoter,authorizedWithdrawer:t.voteInit.authorizedWithdrawer,commission:t.voteInit.commission}}static decodeAuthorize(e){const t=p.VoteInstruction.decodeAuthorize(e);return{vote:t.votePubkey,authorized:t.authorizedPubkey,newAuthorized:t.newAuthorizedPubkey}}static decodeWithdraw(e){const t=p.VoteInstruction.decodeWithdraw(e);return{vote:t.votePubkey,authorizedWithdrawer:t.authorizedWithdrawerPubkey,amount:Number(t.lamports)/p.LAMPORTS_PER_SOL,to:t.toPubkey}}}const h="Program ID";function b(e){const t=[];for(const n of e){let e;switch(n.programId.toString()){case s.WT.toString():e=y.decodeInstruction(n);break;case s.n3.toString():e=m.decodeInstruction(n);break;case s.oA.toString():e=f.decodeInstruction(n);break;case a.x5.toString():e=l(n);break;case a.EK.toString():e={instructionType:"Create Token Account",instructionParams:[{paramKey:h,paramValue:n.programId.toString()}]};break;default:e={instructionType:"Unknown",instructionParams:[{paramKey:h,paramValue:n.programId.toString()}]},n.data.length&&e.instructionParams.push({paramKey:"data",paramValue:i().encode(n.data)})}t.push(e)}return t}},7220:(e,t,n)=>{n.d(t,{v:()=>o});var a=n(82325),r=n(34565),i=n(36332);const s=10n;async function o(e,t){if(e.isTestnet)return s;const n=(await(0,i.lE)({blockchainSymbol:t,testnet:!1}))[1];if(!n)throw a.p.unableToEstimateFee;return(0,r.Hc)(n)}},88273:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(37634);async function r(e){const{blockchain:t,currencyCode:n,network:r,addressType:i,accountId:s}=e,o=await(0,a.ni)({blockchain:t,currencyCode:n,addressType:i,isChangeAddress:!0,network:r,accountId:s});if(o)return o.address;const c=await(0,a.S4)({blockchain:t,currencyCode:n,addressType:i,isChangeAddress:!0,network:r,accountId:s});return c?.address}},74045:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(14041),r=n(32183),i=n(42104);const s=(0,r.YK)({networkFeeTooltip:{id:"MnkMuK",defaultMessage:"Applies to all transactions. Not paid to Coinbase."},networkAndApprovalFeeTooltip:{id:"pmYfiH",defaultMessage:"For approval & conversion. Applies to all transactions. Not paid to Coinbase."},web3ActivationBuyNFTNetworkFeeDescription:{id:"rTr16h",defaultMessage:"This is for network fees. Not paid to Coinbase."},web3ActivationSwapNetworkFeeDescription:{id:"CVtApE",defaultMessage:"Each step will require a network fee. This fee is not paid to Coinbase. {learnMore}"},nftCollectionNetworkFeeTooltip:{id:"+CfSUd",defaultMessage:"This sale requires a network fee to process as well as a one-time fee to approve this NFT collection for sale on {platform}. Not paid to Coinbase."},tokenApprovalNuxNetworkFeeDescription:{id:"9Zulof",defaultMessage:"This fee goes to the network\u2019s validators, not Coinbase."},generateTransactionDefaultZeroBalanceTrayText2:{id:"m1qUXQ",defaultMessage:"The network fee goes to network participants who process transactions, not Coinbase."},generateTransactionDefaultNotEnoughBalanceTrayText:{id:"HK8qU0",defaultMessage:"The network fee (also called a gas fee) goes to network participants who process transactions, not Coinbase. It may be less than our estimate."},swapNetworkFeeEstimateTooltip:{id:"VD9qh5",defaultMessage:"The network fee (also called a gas fee) goes to network participants who process transactions, not Coinbase. It may be less than our estimate."},swapGaslessNetworkFeeEstimateTooltip:{id:"j7SlmX",defaultMessage:"The network fee (also called a gas fee) goes to network participants, not Coinbase. It's charged in {gasToken}. If you don't have {gasToken}, you can deduct the fee from the swap, which is more convenient but also more expensive."}}),o=(0,r.YK)({networkFeeTooltip:{id:"derWOp",defaultMessage:"Applies to all transactions."},networkAndApprovalFeeTooltip:{id:"c6U3Td",defaultMessage:"For approval & conversion. Applies to all transactions."},web3ActivationBuyNFTNetworkFeeDescription:{id:"V/Jo28",defaultMessage:"This is for network fees."},web3ActivationSwapNetworkFeeDescription:{id:"bExL4T",defaultMessage:"Each step will require a network fee. {learnMore}"},nftCollectionNetworkFeeTooltip:{id:"zvxSIW",defaultMessage:"This sale requires a network fee to process as well as a one-time fee to approve this NFT collection for sale on {platform}."},tokenApprovalNuxNetworkFeeDescription:{id:"XHNssL",defaultMessage:"This fee goes to the network\u2019s validators."},generateTransactionDefaultZeroBalanceTrayText2:{id:"ILLTay",defaultMessage:"The network fee goes to network participants who process transactions."},generateTransactionDefaultNotEnoughBalanceTrayText:{id:"diOAFn",defaultMessage:"The network fee (also called a gas fee) goes to network participants who process transactions. It may be less than our estimate."},swapNetworkFeeEstimateTooltip:{id:"g3I7IU",defaultMessage:"The network fee (also called a gas fee) goes to network participants who process transactions. It may be less than our estimate."},swapGaslessNetworkFeeEstimateTooltip:{id:"TwxfKO",defaultMessage:"The network fee (also called a gas fee) goes to network participants. It's charged in {gasToken}. If you don't have {gasToken}, you can deduct the fee from the swap, which is more convenient but also more expensive."}});function c(e){return(0,a.useMemo)((()=>{switch(Number(e)){case i.u.BASE:case i.u.BASE_SEPOLIA:return o;default:return s}}),[e])}},65063:(e,t,n)=>{n.d(t,{t:()=>s});var a=n(14041),r=n(66181),i=n(14928);function s(){const e=(0,r.l)((0,i.T)("kill_balance_nudge_blockchain_eth")),t=(0,r.l)((0,i.T)("kill_balance_nudge_blockchain_sol"));return(0,a.useCallback)((function(n,a){switch(n){case"ETH":return e||!a?.isNudgeSupported;case"SOL":return t;default:return!1}}),[e,t])}},70210:(e,t,n)=>{n.d(t,{D:()=>d});var a=n(14041),r=n(79637),i=n(13394),s=n(65063),o=n(98837),c=n(31860);function d({wallet:e,unsignedTxOrUserOp:t,unsignedApproveTxOrUserOp:n,signSuccess:d,signError:u,handleUnlock:l,unlockSuccess:p,unlockError:y,skipSubmit:m=!1,txSubmissionType:f="original",source:h="extension",onSubmit:b,isMEVProtectionEnabled:w=!1}){const[g,k]=(0,a.useState)(!1),T=(0,o.O)(),A=(0,s.t)(),P=(0,a.useCallback)((async function(n){t&&T([t.asTransaction(n.txHash,n.nonce,e,t.metadata,f)])}),[T,f,t,e]),v=(0,a.useCallback)((()=>{A(e.blockchain.rawValue,e.network.asChain())&&(0,r.L)({wallet:e})}),[e,A]),x=(0,a.useCallback)((function(e){b&&b(e),P(e),v()}),[b,P,v]),S=(0,a.useCallback)((async function(t){n&&T([n.asTransaction(t.txHash,t.nonce,e,n.metadata,f)])}),[T,f,n,e]),I=(0,a.useCallback)((async function(){try{if(n&&await(0,c.Z)({unsignedTxOrUserOp:n,wallet:e,txSubmissionType:f,source:h,onSubmit:S}),!t)return null;const a=await(0,c.Z)({unsignedTxOrUserOp:t,wallet:e,txSubmissionType:f,skipSubmit:m,onSubmit:x,source:h,isMEVProtectionEnabled:w});d(a)}catch(e){(0,i.gf)({error:e,context:"sign_and_submit_transaction_error",isHandled:!1,severity:"error"}),u(e)}finally{k(!1)}}),[n,t,e,f,m,x,h,w,d,S,u]),C=(0,a.useCallback)((function(){return k(!0),l({unlockSuccess:function(){p?.(),I()},unlockError:function(e){e&&y?.(e),k(!1)}})}),[l,I,y,p]);return(0,a.useMemo)((()=>({signAndSubmitStandalone:C,isSignAndSubmitStandaloneLoading:g})),[g,C])}},66430:(e,t,n)=>{n.d(t,{a_:()=>a,b7:()=>r});const a=3,r="0xf85210B21cC50302F477BA56686d2019dC9b67Ad"},54343:(e,t,n)=>{n.d(t,{BW:()=>u,Xt:()=>l,_f:()=>s,d7:()=>i,km:()=>o,r_:()=>d,z1:()=>c});var a=n(63496),r=n(40700);a.standardErrors.provider.userRejectedRequest("User cancelled transaction");const i=200,s=r._f,o=r.km,c=r.z1,d=r.r_,u=12e4;var l;!function(e){e.SCW="scw_connection_type",e.EXTENSION="extension_connection_type"}(l||(l={}))},72137:(e,t,n)=>{n.d(t,{IJ:()=>o,bq:()=>r,c8:()=>s,nw:()=>a,tl:()=>i,vU:()=>c});class a extends Error{constructor(){super(...arguments),this.name="Get4337GasPricesError"}}class r extends Error{constructor(){super(...arguments),this.name="PaymasterSignatureError"}}class i extends Error{constructor(){super(...arguments),this.name="PaymasterStubError"}}class s extends Error{constructor(){super(...arguments),this.name="AcceptedPaymentTokensError"}}class o extends Error{constructor(){super(...arguments),this.name="InsufficientFundsForGasError"}}class c extends Error{constructor(){super(...arguments),this.name="InsufficientFundsForTransactionError"}}Error},86072:(e,t,n)=>{n.d(t,{T:()=>a});class a extends Error{constructor(e,t){super("Error generating unsigned user op"),this.errorData=e,this.partialUserOp=t}}},45085:(e,t,n)=>{n.d(t,{b:()=>i});var a=n(57761),r=n(10286);function i({calls:e}){return(0,r.p)({abi:a.AQc,functionName:"executeBatch",args:[e]})}},5104:(e,t,n)=>{function a(e){return(BigInt(e?.callGasLimit??0n)+BigInt(e?.verificationGasLimit??0n)+BigInt(e?.preVerificationGas??0n))*BigInt(e?.maxFeePerGas??0n)}n.d(t,{W:()=>a})},88389:(e,t,n)=>{function a(e){return(BigInt(e?.callGasLimit??0n)+BigInt(e?.verificationGasLimit??0n)+BigInt(e?.preVerificationGas??0n))*(BigInt(e?.additionalParameters?.baseFeePerGas??0n)+BigInt(e?.maxPriorityFeePerGas??0n))}n.d(t,{R:()=>a})},7853:(e,t,n)=>{n.d(t,{z:()=>o});var a=n(11554),r=n(71434),i=n(54065),s=n(10611);function o(e){let t;if(101===e)t=function(e){if(!e)throw new Error("No chainId provided");const t=s.D.fromChainId(BigInt(e));if(!t)return;return(0,i.uB)(t).network}(e);else t=(0,r.Q)(e);return(0,a.S)({network:t,blockchain:void 0})}},11993:(e,t,n)=>{var a;n.d(t,{z:()=>a}),function(e){e.Normal="normal",e.Gasless="gasless"}(a||(a={}))},88219:(e,t,n)=>{n.d(t,{J:()=>a});class a extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}a.UnknownTransactionType=new a("UnknownTransactionType","Unknown transaction type"),a.UnableToHexEncode=new a("UnableToHexEncode","Unable to hex encode"),a.SponsoredSendError=new a("SponsoredSendError","Error attempting to send sponsored transaction"),a.GaslessSwapError=new a("GaslessSwapError","Error attempting to submit gasless swap transaction")},98837:(e,t,n)=>{n.d(t,{O:()=>s});var a=n(14041),r=n(96488),i=n(46347);function s(){const{updatePaginatedTransactions:e}=(0,i.I)();return(0,a.useCallback)((function(t){e(t),(0,r.jc)(t)}),[e])}},76116:(e,t,n)=>{n.d(t,{Z:()=>gt});var a=n(84213),r=n(46122),i=n(96295),s=n(62396),o=n(62207),c=n(46702);const d=[{inputs:[{name:"address",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"uint256"}],type:"function"}];function u(e){const{functionName:t,args:n}=(0,c.J)({abi:d,data:e});if("transfer"===t&&2===n?.length)return{toAddress:n[0],value:BigInt(n[1])}}var l=n(26182),p=n(77547),y=n(81517),m=n(10395),f=n(13129),h=n(1048).Buffer;async function b({wallet:e,recipientAddress:t,metadata:n,transactionAmount:a,txOrUserOpConfig:i,isSponsoredTx:s}){const{selectedBaseFeePerGas:o,selectedMaxFeePerGas:c,selectedMaxPriorityFeePerGas:d,selectedGasLimit:u,dataBuffer:b,nonce:w}=i,{primaryAddress:g,network:k,currencyCode:T,blockchain:A,selectedIndex:P}=e;if(!k.asChain())throw m.D.invalidNetwork(k);const v=n.get(r.kV)?.toLocaleString()??"",x=b??h.from(new Uint8Array(0));if(void 0===P)throw l.c.unableToFindWallet;const S=r.vj.currencyCodeForNetwork(k),I=r.vj.feeDecimalForNetwork(k),{weiValue:C,baseFeePerGas:G,maxFeePerGas:D,maxPriorityFeePerGas:F,gasLimit:O,gasEstimationStatus:E,l1GasFee:L}=await(0,f.OB)({transactionAmount:a,data:x,wallet:e,recipientAddress:t,selectedBaseFeePerGas:o,selectedMaxFeePerGas:c,selectedMaxPriorityFeePerGas:d,selectedGasLimit:u,txSource:v,nonce:w,isSponsoredTx:s}),[U,M]=await(0,y.mC)([g,t]),N=p.D.createEtherTx({fromAddress:g,fromDomain:U,walletIndex:P,toAddress:t,toDomain:M,nonce:w,weiValue:C,data:x,maxFeePerGas:D,maxPriorityFeePerGas:F,gasLimit:O,network:k,currencyCode:T,feeCurrencyCode:S,feeCurrencyDecimal:I,blockchain:A,metadata:n,baseFeePerGas:G,l1GasFee:L});return"Success"===E?{kind:"Success",transaction:N,wallet:e,err:void 0}:{kind:"Failure",wallet:e,transaction:N,err:l.c.unableToEstimateGas}}var w=n(29263),g=n(97441);var k=n(13620),T=n(1048).Buffer;async function A({wallet:e,recipientAddress:t,transactionAmount:n,metadata:a,txOrUserOpConfig:i}){const{dataBuffer:s,selectedGasPrice:o,selectedGasLimit:c,nonce:d,erc20ContractAddress:u}=i,{primaryAddress:p,network:h,currencyCode:b,blockchain:w,selectedIndex:g}=e;if(!h.asChain())throw m.D.invalidNetwork(h);const A=s??T.from(new Uint8Array(0)),P=a.get(r.kV)?.toLocaleString()??"",{gasLimit:v,gasPrice:x,weiValue:S,gasEstimationStatus:I,l1GasFee:C}=await(0,f.tT)({transactionAmount:n,wallet:e,data:A,recipientAddress:t,selectedGasPrice:o,selectedGasLimit:c,contractAddress:u,txSource:P});if(void 0===g)throw l.c.unableToFindWallet;const G=r.vj,D=G.currencyCodeForNetwork(h),F=G.feeDecimalForNetwork(h),[O,E]=await(0,y.mC)([p,t]),L=k.U.createEtherTx({fromAddress:p,fromDomain:O,walletIndex:g,toAddress:t,toDomain:E,nonce:d,weiValue:S,data:A,l1GasFee:C,gasPrice:x,gasLimit:v,network:h,currencyCode:b,feeCurrencyCode:D,feeCurrencyDecimal:F,blockchain:w,metadata:a});return"Success"===I?{kind:"Success",transaction:L,wallet:e,err:void 0}:{kind:"Failure",transaction:L,wallet:e,err:l.c.unableToEstimateGas}}var P=n(66430);var v=n(34767),x=n(55452);var S=n(21455),I=n(55459);const C=8000n,G=4n;var D,F=n(78370);!function(e){e.GAS_ONLY="gasOnly",e.VALUE_ONLY="valueOnly",e.GAS_AND_VALUE="gasAndValue"}(D||(D={}));F.H;F.H;var O=n(54343),E=n(45085),L=n(5104);var U=n(13394),M=n(31700),N=n(74146);class _ extends F.H{constructor(e,t,n,a,r){super(e,t,n,a,r),this.status=e,this.code=t,this.message=n,this.description=a,this.errorDetail=r,this.name="GetMagicSpendQuoteSignatureError"}}function V({amount:e,chainId:t,walletAddress:n,sourceAsset:a,targetAsset:r,toAddressesInUserOps:i}){return["magicSpendQuoteSignature",{amount:e,chainId:t,walletAddress:n,sourceAsset:a,targetAsset:r,toAddressesInUserOps:i}]}async function R({amount:e,chainId:t,walletAddress:n,sourceAsset:a,targetAsset:r,toAddressesInUserOps:i,scwUrl:s}){const o=await M.qQ.fetchQuery({queryKey:V({amount:e,chainId:t,walletAddress:n,sourceAsset:a,targetAsset:r,toAddressesInUserOps:i}),queryFn:async()=>async function({amount:e,chainId:t,walletAddress:n,sourceAsset:a,targetAsset:r,toAddressesInUserOps:i,scwUrl:s}){try{return await(0,N.l0)(`${s}/api/v3/coinbase.dex.RetailDexService/GetMagicSpendSignatureQuoteV2`,{source_asset:a,target_asset:r,amount:e.toString(),amount_reference:"source",wallet_address:n,chain_id:t.toString(),metadata:{client:"cb-wallet-scw"},to_addresses_in_user_ops:i},{isThirdParty:!0,authenticated:!1,method:"POST"})}catch(e){const t=new _(e.status,e.code,e.message,e.description,e.errorDetail);throw(0,U.gf)({error:t,context:"scw-error",severity:"error",isHandled:!0}),t}}({amount:e,chainId:t,walletAddress:n,sourceAsset:a,targetAsset:r,toAddressesInUserOps:i,scwUrl:s})});return c=o,{...c,expiresAt:c.quoteExpiryAt,quoteExpiryAt:void 0,mfaRequired:c.mfaRequired??!1};var c}var B=n(81415),W=n(57761),H=n(86072),z=n(21508),K=n(64543),j=n(27301),Q=n(52689),q=n(66409),Y=n(92881),X=n(49143),Z=(n(62251),n(51917),n(89029)),$=n.n(Z);var J=n(99172),ee=n(10286),te=n(81788),ne=n(87204),ae=n(24117),re=n(409),ie=n(7853),se=n(9492);async function oe(e){const{params:t}=e;return M.qQ.fetchQuery(function(e){return["exchangeRate",(0,se.t)(JSON.stringify(e))]}(t),(async()=>async function({params:e,options:t}){const{isQuoteV3Enabled:n=!1}=t??{},{tokenAddress:a,chainId:r,currencyCode:i,fiatExchangeRateCurrency:s}=e,o={code:i,chainId:r.toString(),networkId:(0,ie.z)(r)??"",contractAddress:a},[c,d]=await Promise.all([M.qQ.fetchQuery([ae.oF,(0,se.t)(JSON.stringify(o))],(async function(){const e=(0,ne.q2)([],[o])[0];return(0,ne.Ol)({params:e,options:{isQuoteV3Enabled:n}})})),M.qQ.fetchQuery([ae.bj,(0,Y.W3)([s.code])],(async function(){return(0,ne.HH)((0,Y.W3)([s.code]))}))]),u=(0,ae.Xp)([{data:c}],d,s.id),l=u?.[0];if(!l)throw new Error("Failed to fetch exchange rate");return{[(0,re.LQ)(l)]:l.rate}}(e)))}const ce=new($())(5);async function de({config:e,tokenAddress:t,paymasterAddress:n,owner:a,chainId:r,exchangeRatesMap:i}){const[s,o,c]=await Promise.all([(0,W.bbF)(e,{address:t}),(0,W.ZO2)(e,{address:t}),(0,W.$hd)(e,{address:t,args:[a,n]})]),d=new Q.j(o),u=J.lg.fromChainId({chainId:BigInt(r)}),l=new j.J("ETH"),p={...i,...await oe({params:{tokenAddress:t,chainId:r,currencyCode:d,fiatExchangeRateCurrency:q.o.USD}})},y=(0,K.y)({currencyCode:d,decimals:BigInt(s),value:c,network:u,exchangeRatesMap:p,contractAddress:t,blockchain:l});if(y?.gte(ce.div(2)))return;const m=(0,z.J)({exchangeRatesMap:p,currencyCode:d,value:ce,contractAddress:t,network:u,blockchain:l});if(!m)return;const f=function(e,t){if(!Number(e)||!t)return;const n=new Z.Decimal(e),a=(0,B.yW)(n.toString(),t).toFixed(0);return BigInt(a)}(m.toString(),BigInt(s));if(!f)throw new Error("Failed to convert token amount to bigint");return{target:t,value:0n,data:(0,ee.p)({abi:te.xw,functionName:"approve",args:[n,f]})}}const ue={callDataForERC20PaymasterApproval:void 0,callsForERC20PaymasterApproval:void 0};var le=n(74212),pe=n(38671);var ye=n(51676);var me=n(26746),fe=n(72137),he=n(47075),be=n(38903),we=n(40723);async function ge(e){return M.qQ.fetchQuery(function(e){return["acceptedPaymentTokens",(0,he.A)({entryPoint:e.entryPoint,chainId:e.chainId})]}(e),(async()=>{try{return await async function({entryPoint:e,paymasterService:t,chainId:n,dappOrigin:a}){!function({paymasterURL:e,chainId:t}){(0,x.Np)("paymaster.get_accepted_payment_tokens.start",{data:{paymasterURL:e,chainId:t}})}({paymasterURL:t?.paymasterURL,chainId:n});const r=t?.paymasterURL,i=[e,(0,be.cK)(n),{dappOrigin:a,paymasterURL:r,appContext:t?.dappContext}],s=await(0,we.tY)("pm_getAcceptedPaymentTokens",i,(0,me.Iq)(n));if(s.error)throw function({paymasterURL:e,chainId:t,errorMessage:n}){(0,x.Np)("paymaster.get_accepted_payment_tokens.failure",{data:{paymasterURL:e,chainId:t,errorMessage:n}})}({paymasterURL:r,chainId:n,errorMessage:s.error.message}),new fe.c8(s.error.message);return function({paymasterURL:e,chainId:t}){(0,x.Np)("paymaster.get_accepted_payment_tokens.success",{data:{paymasterURL:e,chainId:t}})}({paymasterURL:r,chainId:n}),s.result}(e)}catch(t){if(e.paymasterService?.paymasterURL)throw new fe.c8(t.message);return}}),{staleTime:O.BW})}async function ke({chainId:e}){const t=await(0,f.Wr)(e);if(t.error)throw new fe.nw(t.error.message);return t}var Te=n(48428),Ae=n(7861);async function Pe({chainId:e,sender:t,nonceKey:n}){return M.qQ.fetchQuery(["readEntryPointGetNonce",(0,he.A)({chainId:e,sender:t,nonceKey:n})],(async()=>(0,W.iWX)((0,Ae.z)(),{chainId:e,args:[t,n]})),{staleTime:0})}function ve({userOp:e,entryPoint:t,chainId:n}){return["paymasterSignature",(0,he.A)({userOp:e,entryPoint:t,chainId:n})]}async function xe({userOp:e,entryPoint:t,paymasterService:n,chainId:a,dappOrigin:r,paymasterType:i}){return M.qQ.fetchQuery({queryKey:ve({userOp:e,entryPoint:t,chainId:a}),queryFn:async()=>async function({userOp:e,entryPoint:t,chainId:n,paymasterService:a,dappOrigin:r,paymasterType:i}){try{const s=async function({userOp:e,entryPoint:t,paymasterService:n,chainId:a,dappOrigin:r,paymasterType:i}){!function({paymasterURL:e,chainId:t}){(0,x.$s)("paymaster_signature_start",{componentType:v.I5.button,action:v.X2.click,data:{paymasterURL:e,chainId:t}})}({paymasterURL:n?.paymasterURL,chainId:a});const s=(0,be.nj)(e.preVerificationGas),o=(0,be.nj)(e.verificationGasLimit),c={sender:e.sender,nonce:(0,be.nj)(e.nonce),initCode:e.initCode,callData:e.callData,callGasLimit:(0,be.nj)(e.callGasLimit),verificationGasLimit:o,preVerificationGas:s,maxFeePerGas:(0,be.nj)(e.maxFeePerGas),maxPriorityFeePerGas:(0,be.nj)(e.maxPriorityFeePerGas),signature:O.km,paymasterAndData:"0x"},d=n?.paymasterURL,u=[c,t,(0,be.cK)(a),{dappOrigin:r,paymasterUrl:d,appContext:n?.dappContext,paymasterRoute:i}],l=await(0,we.tY)("pm_getPaymasterData",u,(0,me.Iq)(a));if(l.error)throw function({paymasterURL:e,chainId:t,errorMessage:n}){(0,x.$s)("paymaster_signature_failure",{componentType:v.I5.button,action:v.X2.click,data:{paymasterURL:e,chainId:t,errorMessage:n}})}({paymasterURL:d,chainId:a,errorMessage:l.error.message}),new fe.bq(l.error.message);return function({paymasterURL:e,chainId:t,tokenPayment:n}){(0,x.$s)("paymaster_signature_success",{componentType:v.I5.button,action:v.X2.click,data:{paymasterURL:e,chainId:t,tokenPayment:n}})}({paymasterURL:d,chainId:a,tokenPayment:l?.result?.tokenPayment?.name}),{paymasterAndData:l.result.paymasterAndData,tokenPayment:l.result.tokenPayment}}({userOp:e,entryPoint:t,paymasterService:a,chainId:n,dappOrigin:r,paymasterType:i});return await s}catch(e){if(a?.paymasterURL)throw new fe.bq(e.message);return}}({userOp:e,entryPoint:t,chainId:a,paymasterService:n,dappOrigin:r,paymasterType:i})})}n(58524);const Se="paymaster-type";async function Ie(e){return M.qQ.fetchQuery(function(e){return["paymasterStubData",(0,he.A)({userOp:e.userOp,entryPoint:e.entryPoint,chainId:e.chainId})]}(e),(async()=>{try{return await async function({userOp:e,entryPoint:t,paymasterService:n,chainId:a,dappOrigin:r}){!function({paymasterURL:e,chainId:t}){(0,x.$s)("paymaster_stub_data_start",{componentType:v.I5.button,action:v.X2.click,data:{paymasterURL:e,chainId:t}})}({paymasterURL:n?.paymasterURL,chainId:a});const i=(0,be.nj)(e.preVerificationGas),s=(0,be.nj)(e.verificationGasLimit),o={sender:e.sender,nonce:(0,be.nj)(e.nonce),initCode:e.initCode,callData:e.callData,callGasLimit:(0,be.nj)(e.callGasLimit),verificationGasLimit:s,preVerificationGas:i,maxFeePerGas:(0,be.nj)(e.maxFeePerGas),maxPriorityFeePerGas:(0,be.nj)(e.maxPriorityFeePerGas),signature:e.signature},c=n?.paymasterURL,d=[o,t,(0,be.cK)(a),{dappOrigin:r,paymasterUrl:c,appContext:n?.dappContext}],u=await(0,we.oV)("pm_getPaymasterStubData",d,(0,me.Iq)(a));if(u.body?.error)throw function({paymasterURL:e,chainId:t,errorMessage:n}){(0,x.$s)("paymaster_stub_data_failure",{componentType:v.I5.button,action:v.X2.click,data:{paymasterURL:e,chainId:t,errorMessage:n}})}({paymasterURL:c,chainId:a,errorMessage:u.body?.error?.message}),new fe.tl(u.body?.error?.message);const l=u.headers[Se];return function({paymasterURL:e,chainId:t,paymasterType:n}){(0,x.$s)("paymaster_stub_data_success",{componentType:v.I5.button,action:v.X2.click,data:{paymasterURL:e,paymasterType:n,chainId:t}})}({paymasterURL:c,paymasterType:l,chainId:a}),{result:u.body?.result,paymasterType:l}}(e)}catch(t){if(e.paymasterService?.paymasterURL)throw new fe.tl(t.message);return}}),{staleTime:O.BW})}async function Ce({nonce:e,sender:t,initCode:n,callData:a,maxPriorityFeePerGas:r,maxFeePerGas:i,dappOrigin:s,isPaymasterApplicable:o,shouldMakePaymasterCall:c,entryPoint:d,chainId:u,paymasterService:l}){const p={nonce:e,sender:t,initCode:n,callData:a,maxPriorityFeePerGas:r,maxFeePerGas:i,signature:O.km,preVerificationGas:O.r_,verificationGasLimit:O.r_,callGasLimit:O.r_};let y,m={};if(void 0!==s&&Boolean(o)&&c)try{y=await Ie({userOp:p,entryPoint:d,chainId:u,paymasterService:l,dappOrigin:s})}catch(e){m={paymasterStubError:e}}return{paymasterStubInfo:y?.result,paymasterType:y?.paymasterType,paymasterStubInfoErrors:m}}var Ge=n(30818),De=n(85769);const Fe=BigInt(5e5),Oe=BigInt(2);async function Ee({chainId:e,entryPointAddress:t,userOp:n,stateOverrides:a}){const r=(0,Ae.z)().getClient({chainId:e}),i={sender:n.sender,nonce:n.nonce,initCode:n.initCode,callData:n.callData,maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas,paymasterAndData:n.paymasterAndData,signature:n.signature,callGasLimit:n.callGasLimit,preVerificationGas:n.preVerificationGas,verificationGasLimit:n.verificationGasLimit};return function(e){return{preVerificationGas:e.preVerificationGas*Oe,verificationGasLimit:e.verificationGasLimit+Fe,callGasLimit:e.callGasLimit}}(await(0,De.C)(r,{userOperation:i,entryPoint:t},a))}async function Le({chainId:e,sender:t,nonceKey:n,paymentMethod:a,calls:r,gasLimitOverride:i,maxPriorityFeePerGasOverride:s,maxFeePerGasOverride:o,accountInitCode:c,callData:d,appPaymasterService:u,dappOrigin:l,isPaymasterApplicable:p,nativeBalance:y,isMaxSendApplicable:m=!1,selectedPaymentToken:f,scwUrl:h,suppressLegacyMagicSpend:b,exchangeRatesMap:w,config:g}){(0,S.Mg)({context:"generateUnsignedUserOpBase"});const k=!!u?.paymasterURL,{acceptedPaymentTokensResult:T,acceptedPaymentTokensErrors:A}=await async function({isPaymasterApplicable:e,dappOrigin:t,entryPoint:n,paymasterService:a,chainId:r}){let i,s={};if(Boolean(e)&&void 0!==t)try{i=await ge({entryPoint:n,paymasterService:a,chainId:r,dappOrigin:t})}catch(e){s={paymasterError:e}}return{acceptedPaymentTokensResult:i,acceptedPaymentTokensErrors:s}}({isPaymasterApplicable:p,dappOrigin:l,entryPoint:W.x_n,paymasterService:u,chainId:e}),P=function({chainId:e,hasPaymasterURL:t}){const n=I.Z.getIsFeatureEnabled("scw_app_paymasters"),a=I.Z.getIsFeatureEnabled("scw_sepolia_paymaster"),r=I.Z.getIsFeatureEnabled("scw_cloud_paymasters"),i=e===le.E.id,s=e===pe.Z.id;return t?n:i?r:!!s&&a}({chainId:e,hasPaymasterURL:k}),{nonce:F,gasPriceData:U,byteCode:M,maxPriorityFeePerGas:N,maxFeePerGas:_,baseFeePerGas:V}=await async function({chainId:e,sender:t,nonceKey:n,maxPriorityFeePerGasOverride:a,maxFeePerGasOverride:r}){const[i,s,o]=await Promise.allSettled([Pe({chainId:e,sender:t,nonceKey:n}),ke({chainId:e}),(0,Te.E)({chainId:e,address:t})]),c=s?.value;let d=0n,u=0n,l=0n;if(void 0!==c&&(d=a??BigInt(c.normalPriorityFee),u=r??BigInt(c.normalMaxFeePerGas),l=BigInt(c.baseFee)),[i,s,o].some((e=>"rejected"===e.status)))throw new H.T({nonceError:"rejected"===i.status?i.reason:void 0,gasPriceError:"rejected"===s.status?s.reason:void 0,byteCodeError:"rejected"===o.status?o.reason:void 0},{nonce:"fulfilled"===i.status?i.value:void 0,sender:t,callData:"0x",maxPriorityFeePerGas:d,maxFeePerGas:u,additionalParameters:{baseFeePerGas:l}});return{nonce:i.value,gasPriceData:c,byteCode:o.value,maxPriorityFeePerGas:d,maxFeePerGas:u,baseFeePerGas:l}}({chainId:e,sender:t,nonceKey:n,maxPriorityFeePerGasOverride:s,maxFeePerGasOverride:o});let z;z=M?O._f:c,k&&e&&function({paymasterURL:e,chainId:t,isPaymasterEnabled:n}){(0,x.$s)("paymaster_received",{action:v.X2.click,componentType:v.I5.button,paymasterURL:e,chainId:t,isPaymasterEnabled:n})}({paymasterURL:u?.paymasterURL,chainId:e,isPaymasterEnabled:P});const{paymasterStubInfo:K,paymasterType:j,paymasterStubInfoErrors:Q}=await Ce({nonce:F,sender:t,initCode:z,callData:d,maxPriorityFeePerGas:N,maxFeePerGas:_,dappOrigin:l,isPaymasterApplicable:p,shouldMakePaymasterCall:P,entryPoint:W.x_n,chainId:e,paymasterService:u}),q=function({selectedPaymentToken:e,chainId:t}){const n=ye.ay.fromChainId(BigInt(t));return!!e&&e===n?.baseAssetCurrencyCode}({selectedPaymentToken:f,chainId:e}),Y=I.Z.getIsFeatureEnabled("scw_universal_erc20_paymaster");let X=d,Z=r,$=K,J=Q;const ee="UNIVERSAL_ERC20"===j&&Y;if(g&&w&&!q&&ee){const{callDataForERC20PaymasterApproval:n,callsForERC20PaymasterApproval:a}=await async function({acceptedPaymentTokensResult:e,selectedPaymentToken:t,sender:n,chainId:a,exchangeRatesMap:r,config:i,calls:s}){if(!e?.acceptedTokens||!e?.paymasterAddress)return ue;const o=e.acceptedTokens[0],c=e.acceptedTokens.find((e=>e.name===t))??o;if(!c?.address)return ue;const d=await de({config:i,tokenAddress:c.address,paymasterAddress:e.paymasterAddress,owner:n,chainId:a,exchangeRatesMap:r});if(!d)return ue;const u=[d,...s];return{callDataForERC20PaymasterApproval:(0,E.b)({calls:u}),callsForERC20PaymasterApproval:u}}({acceptedPaymentTokensResult:T,selectedPaymentToken:f,sender:t,chainId:e,exchangeRatesMap:w,config:g,calls:r});if(n&&a){const{paymasterStubInfo:r,paymasterStubInfoErrors:i}=await Ce({nonce:F,sender:t,initCode:z,callData:n,maxPriorityFeePerGas:N,maxFeePerGas:_,dappOrigin:l,isPaymasterApplicable:p,shouldMakePaymasterCall:P,entryPoint:W.x_n,chainId:e,paymasterService:u});r?.paymasterAndData&&(X=n,Z=a,$=r,J=i)}}const te=q||!k&&!!$?.tokenPayment&&!Y,ne=te?void 0:$?.paymasterAndData,{userOpGasData:ae,maxGasLimit:re,unsignedUserOpWithUserOpGasEstimation:ie}=await async function({nonce:e,sender:t,initCode:n,callData:a,maxPriorityFeePerGas:r,maxFeePerGas:i,paymasterAndData:s,baseFeePerGas:o,chainId:c,entryPointAddress:d,paymentMethod:u,gasLimitOverride:l}){const p={nonce:e,sender:t,initCode:n,callData:a,maxPriorityFeePerGas:r,maxFeePerGas:i,paymasterAndData:s,signature:O.km,preVerificationGas:O.r_,verificationGasLimit:O.r_,callGasLimit:O.r_,additionalParameters:{baseFeePerGas:o}};let y;const m="WALLET"===u?void 0:{[t]:{balance:Ge.Ao}};try{y=await Ee({chainId:c,userOp:p,entryPointAddress:d,stateOverrides:m})}catch(e){throw new H.T({userOpGasError:e},p)}const f=function(e,t,n=0n){return void 0!==e&&void 0!==t?e>t?e:t:e??t??n}(y.callGasLimit,l);let h;return h=y&&void 0!==e&&void 0!==i&&void 0!==r&&void 0!==o?{...p,paymasterAndData:O.z1,preVerificationGas:y.preVerificationGas,verificationGasLimit:y?.verificationGasLimit??0n,callGasLimit:f}:void 0,{userOpGasData:y,maxGasLimit:f,unsignedUserOpWithUserOpGasEstimation:h}}({nonce:F,sender:t,initCode:z,callData:X,maxPriorityFeePerGas:N,maxFeePerGas:0n===_?BigInt(U.normalMaxFeePerGas):_,paymasterAndData:ne||O.z1,baseFeePerGas:V,chainId:e,entryPointAddress:W.x_n,paymentMethod:a,gasLimitOverride:i}),{paymasterInfo:se,paymasterInfoErrors:oe}=await async function({unsignedUserOp:e,dappOrigin:t,isPaymasterApplicable:n,shouldMakePaymasterCall:a,entryPoint:r,chainId:i,paymasterService:s,paymasterType:o}){let c,d={};if(void 0!==e&&void 0!==t&&Boolean(n)&&a)try{c=await xe({userOp:e,entryPoint:r,chainId:i,paymasterService:s,dappOrigin:t,paymasterType:o})}catch(e){d={paymasterError:e}}return{paymasterInfo:c,paymasterInfoErrors:d}}({unsignedUserOp:ie,dappOrigin:l,isPaymasterApplicable:p,shouldMakePaymasterCall:P,entryPoint:W.x_n,chainId:e,paymasterService:u,paymasterType:j}),ce={...A,...J,...oe},me=te?void 0:$?.sponsor?.name,fe=te?void 0:se?.paymasterAndData,{callDataForMaxSend:he,callsForMaxSend:be}=function({balance:e,calls:t,isMaxSendApplicable:n,paymasterAndData:a,paymasterService:r,paymentMethod:i,unsignedUserOpWithUserOpGasEstimation:s}){const o={callDataForMaxSend:void 0,callsForMaxSend:void 0};if(!n||a||r?.paymasterURL||"WALLET"!==i)return o;if(1!==t.filter((e=>e.value>0n)).length)return o;const c=t.find((e=>e.value>0n));if(!c)return o;if(!e)return o;const d=(0,L.W)(s);if(e===c.value&&e>d){const n=t.map((t=>t===c?{...c,value:e-d}:t));return{callDataForMaxSend:(0,E.b)({calls:n}),callsForMaxSend:n}}return o}({balance:y,calls:Z,isMaxSendApplicable:m,paymasterAndData:fe,paymasterService:u,paymentMethod:a,unsignedUserOpWithUserOpGasEstimation:ie}),we=Boolean(fe),Ae=Z.every((e=>0n===e.value));let ve;"COINBASE_ETH_WALLET"!==a||b||(ve=Ae?we?void 0:D.GAS_ONLY:we?D.VALUE_ONLY:D.GAS_AND_VALUE);let Se=0n;ve===D.GAS_AND_VALUE&&(Se=C),we&&("COINBASE_USDC_WALLET"===a||"COINBASE_ETH_WALLET"===a&&!Ae)&&(Se=G*re);const Ie=re+Se;let De;if(he&&be&&(X=he,Z=be),ve){const n=function({calls:e,maxFeePerGas:t,magicSpendFlow:n,gasEstimatesWithoutPaymaster:a}){const r=e.reduce(((e,t)=>e+t.value),0n);return n===D.VALUE_ONLY?r:r+t*(a.callGasLimit+3n*a.verificationGasLimit+a.preVerificationGas+(n===D.GAS_AND_VALUE?C:0n))}({calls:Z,maxFeePerGas:_,gasEstimatesWithoutPaymaster:ae,magicSpendFlow:ve});if(n>0n)try{De=await R({amount:(0,B.qw)(n),chainId:e,walletAddress:t,sourceAsset:"ETH",targetAsset:"ETH",toAddressesInUserOps:Z.map((e=>e.target)),scwUrl:h})}catch(e){throw new H.T({magicSpendQuoteSignatureError:e},ie)}}const Fe=T?.acceptedTokens,Oe="APP"===j&&$?.tokenPayment||ee,Le=we?j:"NONE";return(0,S.we)({chainId:e,magicSpendFlow:ve,paymasterURL:u?.paymasterURL,isPaymasterEnabled:P,transactionPaymentMethod:a,hasPaymasterData:Boolean(se?.paymasterAndData),hasPaymasterStubData:Boolean($?.paymasterAndData),hasMagicSpendQuoteSignature:Boolean(De),isAppPaymastersEnabled:I.Z.getIsFeatureEnabled("scw_app_paymasters"),isBaseSepoliaPaymasterEnabled:I.Z.getIsFeatureEnabled("scw_sepolia_paymaster"),isCloudPaymastersEnabled:I.Z.getIsFeatureEnabled("scw_cloud_paymasters"),isUniversalPaymasterEnabled:Y,selectedPaymentToken:f,acceptedPaymentTokens:(Fe??[]).map((e=>e.name)),paymasterType:Le,context:"generateUnsignedUserOpBase"}),{nonce:F,sender:t,initCode:z,callData:X,maxPriorityFeePerGas:N,maxFeePerGas:_,paymasterInfo:se,acceptedPaymentTokens:Oe?Fe:[],paymasterAndData:fe||O.z1,preVerificationGas:ae?.preVerificationGas??0n,verificationGasLimit:ae?.verificationGasLimit??0n,callGasLimit:Ie,additionalParameters:{baseFeePerGas:V},sponsorName:me,tokenPayment:te?void 0:se?.tokenPayment,callDataForMaxSend:he,callsForMaxSend:be,magicSpendQuoteSignature:De,magicSpendFlow:ve,additionalErrorsForLogging:ce,paymasterType:Le,callsForFinalUserOp:Z}}var Ue=n(79734),Me=n(96415),Ne=n(98226),_e=n(66656),Ve=n(91635);const Re=new Ne.J("debugMaxFeePerGas"),Be=new Ne.J("debugMaxPriorityFeePerGas");function We(e,t,n){if(0===e.length||e.length>1)return 0n;const a=e[0];if(a.value>0n&&"0x"!==a.data)return 0n;if(a.value>0n)return a.value;if(a.target.toLowerCase()===t.contractAddress?.toLowerCase())try{const e=u(a.data);if(n.toLowerCase()===e?.toAddress?.toLowerCase())return e?.value}catch(e){}return 0n}function He({wallet:e,partialUserOp:t,config:n,err:a,recipientAddress:r,fromDomain:i,recipientDomain:s,feeCurrencyCode:o,feeCurrencyDecimal:c,metadata:d}){const{primaryAddress:u,network:l,currencyCode:p,blockchain:y}=e,m=We(n.calls,e,r);return{kind:"Failure",wallet:e,transaction:Ve.f.createUserOp({baseFeePerGas:t.additionalParameters?.baseFeePerGas,calls:n.calls,callData:t.callData,callGasLimit:t?.callGasLimit,initCode:t?.initCode,paymasterAndData:t?.paymasterAndData,preVerificationGas:t?.preVerificationGas,verificationGasLimit:t?.verificationGasLimit,maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas,nonce:t.nonce??0n,fromAddress:u,transferValue:m,blockchain:y,currencyCode:p,feeCurrencyCode:o,feeCurrencyDecimal:c??0n,metadata:d,fromDomain:i,recipientDomain:s,recipientAddress:r,network:l,isMaxSend:m===e.balance}),err:a}}async function ze({wallet:e,recipientAddress:t,metadata:n,txOrUserOpConfig:a}){const i=a,s=i.originChain?J.lg.fromChainId({chainId:BigInt(i.originChain.chainId)}):e.network,{primaryAddress:o,currencyCode:c,blockchain:d}=e,u=(l=i.calls,p=o,l.some((e=>e.target?.toLowerCase()===p?.toLowerCase()))&&(l.length>1||void 0!==l[0].data&&"0x"!==l[0].data)?new Error("Self calls are not allowed."):l.some((e=>e.target?.toLowerCase()===P.b7.toLowerCase()))?new Error("Spend permission calls are not allowed."):void 0);var l,p;const f=s.asChain();if(!f)throw m.D.invalidNetwork(s);const h=r.vj.currencyCodeForNetwork(s),b=r.vj.feeDecimalForNetwork(s);let w,g;if(!Me.K&&_e.i.has(Re)&&_e.i.has(Be)){const{maxFeePerGas:e,maxPriorityFeePerGas:t}=function(){const{maxFeePerGas:e,maxPriorityFeePerGas:t}={maxFeePerGas:_e.i.get(Re),maxPriorityFeePerGas:_e.i.get(Be)};return{maxFeePerGas:e,maxPriorityFeePerGas:t}}();w=e,g=t}const k={chainId:f.chainId,sender:o,nonceKey:i.nonceKey??0n,paymentMethod:i.paymentMethod,dappOrigin:i.dappOrigin??Ue.l5,scwUrl:"https://keys.coinbase.com",calls:i.calls,callData:i.callData,appPaymasterService:i.paymasterService,nativeBalance:e.isBaseAsset?e.balance??0n:0n,accountInitCode:i.accountInitCode,isMaxSendApplicable:i.isMaxSendApplicable,isPaymasterApplicable:i.isPaymasterApplicable,maxFeePerGasOverride:w,maxPriorityFeePerGasOverride:g};let T,A;try{[T,A]=await(0,y.mC)([o,t]);const a=await Le(k);if(u&&!i.allowSelfCalls)return He({wallet:e,config:i,recipientAddress:t,fromDomain:T,recipientDomain:A,feeCurrencyCode:h,feeCurrencyDecimal:b,metadata:n,partialUserOp:a,err:u});const r=We(a.callsForMaxSend??i.calls,e,t);return{kind:"Success",transaction:Ve.f.createUserOp({baseFeePerGas:a.additionalParameters?.baseFeePerGas,calls:a.callsForMaxSend??i.calls,callData:a.callData,callGasLimit:a.callGasLimit,initCode:a.initCode,paymasterAndData:a.paymasterAndData,paymasterSponsor:a.sponsorName,preVerificationGas:a.preVerificationGas,verificationGasLimit:a.verificationGasLimit,maxFeePerGas:a.maxFeePerGas,maxPriorityFeePerGas:a.maxPriorityFeePerGas,nonce:a.nonce,fromAddress:o,transferValue:r,blockchain:d,currencyCode:c,feeCurrencyCode:h,feeCurrencyDecimal:b??0n,metadata:n,fromDomain:T,recipientDomain:A,recipientAddress:t,network:s,isMaxSend:Boolean(a.callDataForMaxSend)}),wallet:e,err:void 0}}catch(a){const r=a?.partialUserOp;return r?He({wallet:e,config:i,recipientAddress:t,fromDomain:T,recipientDomain:A,feeCurrencyCode:h,feeCurrencyDecimal:b,metadata:n,partialUserOp:r,err:a}):{kind:"Failure",wallet:e,err:a}}}var Ke=n(58910),je=n(53670),Qe=n(11339),qe=n(71748),Ye=n(36800),Xe=n(7220),Ze=n(88273);var $e=n(37634),Je=n(96488),et=n(34565),tt=n(75857),nt=n.n(tt),at=n(39608),rt=n(22767),it=n(36332),st=n(82325),ot=n(29039),ct=n(36210),dt=n(57321),ut=n(77981);class lt{constructor(e){this.transferValue=e.transferValue,this.estimatedFee=e.estimatedFee,this.feeRate=e.feeRate,this.blockchain=e.blockchain,this.currencyCode=e.currencyCode,this.feeCurrencyCode=e.feeCurrencyCode,this.feeCurrencyDecimal=e.feeCurrencyDecimal,this.fromAddress=e.fromAddress,this.fromDomain=e.fromDomain,this.recipientAddress=e.recipientAddress,this.recipientDomain=e.recipientDomain,this.metadata=e.metadata,this.network=e.network,this.coinSelection=e.coinSelection,this.txSubmissionType=e.txSubmissionType}asTransaction(e,t,n,a){return new X.oT({id:(0,ut.A)(),createdAt:new Date,blockchain:this.blockchain,currencyCode:this.currencyCode,feeCurrencyCode:this.feeCurrencyCode,feeCurrencyDecimal:this.feeCurrencyDecimal,toAddress:this.recipientAddress,toDomain:this.recipientDomain,fromAddress:this.fromAddress,fromDomain:this.fromDomain,amount:this.transferValue,fee:this.estimatedFee,state:dt.W.PENDING,metadata:new ct.l(a),network:this.network,accountId:n.accountId,walletIndex:n.selectedIndex??0n,txOrUserOpHash:e,userOpHash:void 0,txHash:e,isSent:!0,contractAddress:n.contractAddress,tokenName:n.displayName,tokenDecimal:n.decimals,walletId:n.id,nonce:t,pendingUTXOTxData:new ot.t(this.txSubmissionType,this.feeRate,this.coinSelection.inputs.map((e=>({hash:e.hash,index:BigInt(e.index)}))))})}}var pt=n(1048).Buffer;var yt=n(26282);async function mt({wallet:e,transactionAmount:t,recipientAddress:n,metadata:a,txOrUserOpConfig:r,isUTXOScriptFromTransactionEnabled:i=!0}){const s=function(e){return"UTXO"===e?.txType&&["original","speedUp","cancel"].includes(e.txSubmissionType)}(o=r)?o:{txType:"UTXO",txSubmissionType:"original"};var o;const c=s?.originalInputs,d=e.blockchain.rawValue;if(!(0,qe._J)(d))throw new Error(`Invalid blockchain symbol ${d} for utxo configuration`);const u=qe.sp[d],l=await(0,$e.bu)({blockchain:e.blockchain,currencyCode:e.currencyCode,network:e.network,accountId:e.accountId}),p=(0,Ze.A)({blockchain:e.blockchain,currencyCode:e.currencyCode,network:e.network,addressType:u.defaultReceiveType,accountId:e.accountId}),[m,f]=await Promise.all([(0,Xe.v)(e.network,d),p]),h=[];if(i){const t=!1,n=l.map((e=>e.address)),{rawTransactions:a}=await new yt.Np(e,t).getUTXOWalletTxs({addresses:n,ownedAddresses:new Set(...n)}),r=function({addresses:e,rawTransactions:t}){const n=new Map(e.map((e=>[e.address,e]))),a=t.reduce((function(e,t){return t.outputs.forEach((function(a){const{address:r}=a;if(n.has(r)){const n=e.get(r);if(n&&n.height>t.height)return e;e.set(r,{...a,value:BigInt(a.value),height:t.height,time:t.time})}})),e}),new Map);return Array.from(a).map((([,e])=>({...e,value:(0,et.Ls)(e.value),script:pt.from(e.script,"hex")})))}({addresses:l,rawTransactions:a});h.push(...r)}else{const t=[];for(let n=0;n<l.length;n+=Ye.am){const a=l.slice(n,n+Ye.am).map((e=>e.address));t.push((0,rt.Ix)({blockchainSymbol:d,addresses:a,testnet:e.network.isTestnet}))}const n=await Promise.all(t).then(nt());h.push(...n)}const b=h.map((t=>({...t,addressType:(0,at.Z)(d,t.address,e.network.isTestnet)}))),w=(await(0,Je.x_)(u.blockchain.rawValue)).flatMap((e=>e.pendingUTXOTxData?.utxos??[])),g=b.filter((e=>w.some((t=>e.hash===t?.hash&&BigInt(e.index)===t?.index)))),k=b.filter((e=>c?.some((t=>e.hash===t?.hash&&BigInt(e.index)===t?.index)))),T=g.filter((e=>!k.some((t=>e.hash===t?.hash&&e.index===t?.index))));if(!f)throw st.p.changeAddressNotFound;const A=(0,et.Ls)(m);let P;if("original"===s.txSubmissionType||"speedUp"===s.txSubmissionType)switch(t.kind){case"EntireBalance":P=await(0,it.xP)({blockchainSymbol:d,utxos:b,toAddress:n,feeRate:A,isTestnet:e.network.isTestnet,excludeUTXOs:T,hardcodedTotalFee:s?.hardcodedTotalFee?(0,et.Ls)(s?.hardcodedTotalFee):void 0});break;case"Amount":P=(0,it.bn)({blockchainSymbol:d,utxos:b,toAddress:n,changeAddress:f,amount:(0,et.Ls)(t.value),feeRate:A,testnet:e.network.isTestnet,includeUTXOs:k,excludeUTXOs:T,hardcodedTotalFee:s?.hardcodedTotalFee?(0,et.Ls)(s?.hardcodedTotalFee):void 0});break;default:throw new Error("Unhandled switch case, should never happen")}else{if("cancel"!==s.txSubmissionType)throw new Error("Unhandled txSubmissionType");P=await(0,it.xP)({blockchainSymbol:d,utxos:k,toAddress:f,feeRate:A,isTestnet:e.network.isTestnet,excludeUTXOs:T,hardcodedTotalFee:s?.hardcodedTotalFee?(0,et.Ls)(s?.hardcodedTotalFee):void 0})}const v=P.outputs.filter((e=>e.address!==f)).map((e=>(0,et.Hc)(e.value))).reduce(((e,t)=>BigInt(e)+BigInt(t)),0n),[x,S]=await(0,y.mC)([e.primaryAddress,n]);return{kind:"Success",transaction:new lt({blockchain:e.blockchain,coinSelection:P,fromAddress:e.primaryAddress,fromDomain:x,recipientAddress:n,recipientDomain:S,transferValue:v,currencyCode:e.currencyCode,network:e.network,estimatedFee:(0,et.Hc)(P.fee),feeRate:(0,et.Hc)(A),feeCurrencyCode:e.currencyCode,feeCurrencyDecimal:e.decimals,metadata:a,txSubmissionType:"original"}),wallet:e,err:void 0}}var ft=n(19223),ht=n(96472),bt=n(91745);const wt={[Ke.KN]:je.Z,[i.fz]:async function(e){const{wallet:t}=e;if("UTXO"===e.txOrUserOpConfig.txType)throw new Error("UTXO transaction not supported here");if(s.g.isSCWAccount(e.wallet.accountId)&&"UserOp"!==e.txOrUserOpConfig.txType)throw new Error("Got eoa config for an scw account");if("UserOp"===e.txOrUserOpConfig.txType)return ze(e);let n;if(e.txOrUserOpConfig.dataBuffer?.length)try{u((0,o.Ex)(e.txOrUserOpConfig.dataBuffer)),n=!1}catch(e){n=!0}if((t.isBaseAsset||n)&&e.txOrUserOpConfig){if("1559"===e.txOrUserOpConfig.txType)return b(e);if("Legacy"===e.txOrUserOpConfig.txType)return A(e)}if(e.txOrUserOpConfig){if("1559"===e.txOrUserOpConfig.txType)return async function({wallet:e,recipientAddress:t,transactionAmount:n,metadata:a,txOrUserOpConfig:r,isSponsoredTx:i,skipChecksumValidation:s=!1}){const{nonce:o}=r;if(!e.contractAddress)throw l.c.invalidERC20;const c="Amount"===n.kind?n.value:await(0,w.$)(e.primaryAddress,e.contractAddress,e.network),d=(0,g.U)(t,e.contractAddress,c,s),u={...r,txType:"1559",dataBuffer:d.data},m=await b({wallet:e,recipientAddress:d.toAddress,metadata:a,transactionAmount:{kind:"Amount",value:0n},txOrUserOpConfig:u,isSponsoredTx:i});if(!(m.transaction instanceof p.D))throw l.c.unableToFindSignedTx;const f=m.transaction,[h,k,T]=await(0,y.mC)([f.fromAddress,e.contractAddress,t]),A=p.D.createERC20Tx({fromAddress:f.fromAddress,fromDomain:h,walletIndex:f.walletIndex,contractAddress:e.contractAddress,contractDomain:k,recipientAddress:t,recipientDomain:T,nonce:o,erc20Value:c,data:f.data,maxFeePerGas:f.maxFeePerGas,maxPriorityFeePerGas:f.maxPriorityFeePerGas,gasLimit:f.gasLimit,network:f.network,currencyCode:f.currencyCode,feeCurrencyCode:f.feeCurrencyCode,feeCurrencyDecimal:f.feeCurrencyDecimal,blockchain:f.blockchain,metadata:a,baseFeePerGas:f.baseFeePerGas,l1GasFee:f.l1GasFee});return"Success"===m.kind?{kind:"Success",transaction:A,wallet:e,err:void 0}:{kind:"Failure",wallet:e,err:l.c.unableToEstimateGas}}(e);if("Legacy"===e.txOrUserOpConfig.txType)return async function({wallet:e,recipientAddress:t,transactionAmount:n,metadata:a,txOrUserOpConfig:r}){const{nonce:i}=r;if(!e.contractAddress)throw l.c.invalidERC20;const s="Amount"===n.kind?n.value:await(0,w.$)(e.primaryAddress,e.contractAddress,e.network),o=(0,g.U)(t,e.contractAddress,s),c={...r,dataBuffer:o.data},d=await A({wallet:e,recipientAddress:o.toAddress,transactionAmount:{kind:"Amount",value:0n},metadata:a,txOrUserOpConfig:c});if(!(d.transaction instanceof k.U))throw l.c.unableToFindSignedTx;const u=d.transaction,[p,m,f]=await(0,y.mC)([u.fromAddress,e.contractAddress,t]),h=k.U.createERC20Tx({fromAddress:u.fromAddress,fromDomain:p,walletIndex:u.walletIndex,contractAddress:e.contractAddress,contractDomain:m,recipientAddress:t,recipientDomain:f,nonce:i,erc20Value:s,data:u.data,l1GasFee:u.l1GasFee,gasPrice:u.gasPrice,gasLimit:u.gasLimit,network:u.network,currencyCode:u.currencyCode,feeCurrencyCode:u.feeCurrencyCode,feeCurrencyDecimal:u.feeCurrencyDecimal,blockchain:u.blockchain,metadata:a});return"Success"===d.kind?{kind:"Success",transaction:h,wallet:e,err:void 0}:{kind:"Failure",wallet:e,err:l.c.unableToEstimateGas}}(e)}return e.txOrUserOpConfig},[Qe.wE]:mt,[ft.Gv]:mt,[ht.bN]:mt};async function gt({wallet:e,recipientAddress:t,transactionAmount:n,metadata:i,txOrUserOpConfig:s,isSponsoredTx:o=!1,isUTXOScriptFromTransactionEnabled:c,isSolanaPriorityFeeEnabled:d,skipChecksumValidation:u=!1}){const l=e.blockchain.rawValue,p=e.network.asChain(),{chainId:y,displayName:m,isCustomNetwork:f,isTestnet:h}=p??{},b=(i.get(r.kV)??"").toLocaleString(),w="legacy",g={start:a.ly,success:a.un,fail:a.fO,data:{loggingId:"317dbef1-e3c9-463c-b3a0-56505ae43c84",action:v.X2.measurement,componentType:v.I5.unknown,isMax:"EntireBalance"===n.kind,uuid:(0,ut.A)(),currencyCode:e.currencyCode.rawValue,blockchain:e.blockchain.rawValue,chainId:y,chainName:m,isCustomNetwork:f,isTestnet:h,type:w,txSource:b,isSponsoredTx:o},metricTags:{blockchain:l,chain_id:f?void 0:y?.toString(),tx_source:b,tx_type:w}},k=wt[l];return(0,bt.U)((async()=>k({wallet:e,recipientAddress:t,transactionAmount:n,metadata:i,txOrUserOpConfig:s,isUTXOScriptFromTransactionEnabled:c,isSolanaPriorityFeeEnabled:d,isSponsoredTx:o,skipChecksumValidation:u})),g)}},31860:(e,t,n)=>{n.d(t,{Z:()=>j});var a=n(84213),r=n(46122),i=n(96295),s=n(21228),o=n(26746),c=n(33581),d=n(16277),u=n(10395),l=n(57321),p=n(77981),y=n(62207),m=n(303);async function f({tx:e,accountId:t,skipNonceCheck:n=!1,skipSubmit:a=!1,skipPrepare:i=!1,isMEVProtectionEnabled:f}){const h=e.network.asChain();if(!h)throw u.D.invalidNetwork(e.network);const b=h.chainId,w=(0,d.$)(t,"signAndSubmitETH1559Transaction"),g=(0,r.s8)(e.walletIndex);let k=0n;i||(k=await async function({tx:e,skipNonceCheck:t=!1,ethereumChain:n}){const a=await(0,o.Wp)(e.fromAddress,e.network),r=await(0,c.d5)(BigInt(a),BigInt(n.chainId),e.fromAddress),i=await(0,m.l)(e,a,r,t);return i}({tx:e,ethereumChain:h,skipNonceCheck:n}));const T=await w({accountId:t,derivationPath:g,skipSubmit:a,skipPrepare:i,isMEVProtectionEnabled:f,unsignedTx:{toAddress:e.toAddress,weiValue:(0,y.aZ)(e.weiValue),data:e.data,nonce:Number(k),maxFeePerGas:(0,y.aZ)(e.maxFeePerGas),maxPriorityFeePerGas:(0,y.aZ)(e.maxPriorityFeePerGas),gasLimit:(0,y.aZ)(e.gasLimit),chainId:b}});return new s.K((0,p.A)(),e.fromAddress,e.toAddress,k,BigInt(b),T.data,(0,y.rk)(T.hash.toString("hex")),e.weiValue,e.erc20Value,e.blockchain,e.currencyCode,l.W.PENDING,0n)}var h=n(51676);async function b({tx:e,accountId:t,skipNonceCheck:n=!1,skipSubmit:a=!1,skipPrepare:i=!1,isMEVProtectionEnabled:f}){const b=e.network.asChain();if(!b)throw u.D.invalidNetwork(e.network);const w=(0,r.s8)(e.walletIndex);let g=0n;return i||(g=await async function({tx:e,skipNonceCheck:t=!1,ethereumChain:n}){const a=await(0,o.Wp)(e.fromAddress,e.network),r=await(0,c.d5)(a,BigInt(n.chainId),e.fromAddress);let i;const s=e.network.asChain();i=s?.chainId===h.ay.whitelisted.LOCALHOST_8545.chainId?a:await(0,m.l)(e,a,r,t);return i}({tx:e,skipNonceCheck:n,ethereumChain:b})),async function(e,t,n,a,r,i,o){const c=e.network.asChain();if(!c)throw u.D.invalidNetwork(e.network);let m;const f=[1,3,4,5,42,1337,31337].includes(c.chainId);if(f){const s=(0,d.$)(n,"signAndSubmitETH2930Transaction");m=await s({accountId:n,derivationPath:t,skipSubmit:r,skipPrepare:i,isMEVProtectionEnabled:o,unsignedTx:{toAddress:e.toAddress??null,weiValue:(0,y.aZ)(e.weiValue),data:e.data,nonce:Number(a),gasPriceInWei:(0,y.aZ)(e.gasPrice),gasLimit:(0,y.aZ)(e.gasLimit),chainId:c.chainId}})}else{const s=(0,d.$)(n,"signAndSubmitETHLegacyTransaction");m=await s({accountId:n,derivationPath:t,skipSubmit:r,skipPrepare:i,isMEVProtectionEnabled:o,unsignedTx:{toAddress:e.toAddress??null,weiValue:(0,y.aZ)(e.weiValue),data:e.data,nonce:Number(a),gasPriceInWei:(0,y.aZ)(e.gasPrice),gasLimit:(0,y.aZ)(e.gasLimit),chainId:c.chainId}})}return new s.K((0,p.A)(),e.fromAddress,e.toAddress,a,BigInt(c.chainId),m.data,(0,y.rk)(m.hash.toString("hex")),e.weiValue,e.erc20Value,e.blockchain,e.currencyCode,l.W.PENDING,0n)}(e,w,t,g,a,i,f)}var w=n(52303),g=n(63408),k=n(13394),T=n(88219),A=n(62895),P=n(26182),v=n(41092);class x{constructor(e,t,n,a,r,i,s,o,c,d,u,l){this.id=e,this.fromAddress=t,this.toAddress=n,this.nonce=a,this.chainId=r,this.signedData=i,this.txHash=s,this.callDataValue=o,this.blockchain=c,this.currencyCode=d,this.state=u,this.notFoundCount=l}}var S=n(54065),I=n(58910),C=n(58524),G=n(44308),D=n(25074),F=n(71776),O=n(10611),E=n(22596),L=n(3834);var U=n(11339),M=n(71748),N=n(72895),_=n(49639);function V(){return(0,N.qL)("utxo_signed_tx")}async function R({unsignedTxOrUserOp:e,wallet:t,onSubmit:n,txSubmissionType:a}){if(!e.coinSelection)throw T.J.UnknownTransactionType;const r=t.blockchain.rawValue;if(!(0,M._J)(r))throw new Error(`Invalid blockchain symbol ${r} for utxo configuration`);const{blockchain:i,currencyCode:s,network:o,coinSelection:c}=e,u=c.inputs.map((e=>e.address)),y=(0,d.$)(t.accountId,"signAndSubmitUTXOTransaction"),{data:m,hash:f}=await y({accountId:t.accountId,blockchain:i,currencyCode:s,addressesStr:u,network:o,wallet:t,coinSelection:c}),h=new _.B({id:(0,p.A)(),signedTransactionData:m,txHash:f,state:l.W.PENDING,network:o,currencyCode:s,notFoundCount:0n,blockchain:i});return await async function(e){return await V().upsert(e.asDMO,["id"]),e}(h),n(h),h}var B=n(19223),W=n(96472),H=n(91745),z=n(34767);const K={[i.fz]:async function({unsignedTxOrUserOp:e,wallet:t,txSubmissionType:n,onSubmit:a,skipSubmit:r,skipPrepare:i,isMEVProtectionEnabled:o=!1}){let m;const h=new A.s("sign_submit_ethereum");if((0,v.a)(e))h.startSpan("sign_userop"),m=await async function({userOp:e,accountId:t,skipSubmit:n=!1,skipPrepare:a=!1}){const r=e.network.asChain();if(!r)throw u.D.invalidNetwork(e.network);const i=(0,d.$)(t,"signAndSubmitETHUserOp"),s=await i({accountId:t,skipSubmit:n,skipPrepare:a,unsignedTx:{sender:e.fromAddress,callData:e.callData,callGasLimit:e.callGasLimit,nonce:e.nonce,initCode:e.initCode,verificationGasLimit:e.verificationGasLimit,preVerificationGas:e.preVerificationGas,maxFeePerGas:e.maxFeePerGas,maxPriorityFeePerGas:e.maxPriorityFeePerGas,paymasterAndData:e.paymasterAndData,chainId:BigInt(r.chainId)}});return new x((0,p.A)(),e.fromAddress,e.recipientAddress,e.nonce,BigInt(r.chainId),s.data,(0,y.rk)(s.hash.toString("hex")),e.calls.map((e=>e.value)).reduce(((e,t)=>e+t),0n),e.blockchain,e.currencyCode,l.W.PENDING,0n)}({userOp:e,accountId:t.accountId,skipSubmit:r,skipPrepare:i}),h.endSpan("sign_userop");else if((0,g.T)(e))h.startSpan("sign_transaction"),m=await b({tx:e,accountId:t.accountId,skipNonceCheck:void 0!==e.nonce,skipSubmit:r,skipPrepare:i,isMEVProtectionEnabled:o}),h.endSpan("sign_transaction");else{if(!(0,w._)(e))throw T.J.UnknownTransactionType;h.startSpan("sign1559_transaction"),m=await f({tx:e,accountId:t.accountId,skipNonceCheck:void 0!==e.nonce,skipSubmit:r,skipPrepare:i,isMEVProtectionEnabled:o}),h.endSpan("sign1559_transaction")}if(r)return h.done(),m;let S;if(h.startSpan("insert_signed_transaction"),m instanceof s.K?S=await(0,c.Iz)(m):m instanceof x&&(S=m),h.endSpan("insert_signed_transaction"),!S)throw(0,k.gf)({error:P.c.transactionSignatureMissing,context:"transactions",severity:"error",isHandled:!1}),P.c.transactionSignatureMissing;return h.startSpan("on_submit"),a(S),h.endSpan("on_submit"),h.done(),m},[I.KN]:async function({unsignedTxOrUserOp:e,wallet:t,onSubmit:n,txSubmissionType:a,skipSubmit:r}){try{const a=e;let i,s;const{blockhash:o,lastValidBlockHeight:c}=await(0,G.l4)({rpcUrl:C.hR});if(a.nativeDappTransaction){const{data:e,hash:n}=await async function(e,t,n,a,r,i){const s=(0,S.jD)(i||0n);if(e instanceof L.Transaction)return(0,d.$)(t,"partialSignAndSubmitSolanaTransaction")({accountId:t,derivationPath:s,solanaTx:e,skipSubmit:a,sendOptions:r});if(e instanceof L.VersionedTransaction)return(0,d.$)(t,"signAndSubmitSolanaVersionedTransaction")({accountId:t,derivationPath:s,solanaTx:e,skipSubmit:a,sendOptions:r});throw T.J.UnknownTransactionType}(a.nativeDappTransaction,t.accountId,0,r??!1,a.submissionParams,t.selectedIndex);i=e,s=n}else{const e=function(e,t,n){const a=new L.TransactionMessage({payerKey:new L.PublicKey(e.primaryAddress),recentBlockhash:n,instructions:t.instructions??[]}).compileToV0Message();return new L.VersionedTransaction(a)}(t,a,o),{data:n,hash:c}=await async function(e,t,n,a,r){const i=(0,S.jD)(r||0n);if(e instanceof L.Transaction)return(0,d.$)(t,"signAndSubmitSolanaTransaction")({accountId:t,derivationPath:i,solanaTx:e,skipSubmit:n,sendOptions:a});if(e instanceof L.VersionedTransaction)return(0,d.$)(t,"signAndSubmitSolanaVersionedTransaction")({accountId:t,derivationPath:i,solanaTx:e,skipSubmit:n,sendOptions:a});throw T.J.UnknownTransactionType}(e,t.accountId,r??!1,a.submissionParams,t.selectedIndex);i=n,s=c}if(r)return new E.B((0,p.A)(),t.primaryAddress,a.recipientAddress,BigInt(a.network.asChain()?.chainId??O.D.whitelisted.SOLANA_MAINNET.chainId),i,"",a.transferValue,a.blockchain,S.Yw.currencyCode,l.W.PENDING,o,c,0n);if(s){const e=new E.B((0,p.A)(),t.primaryAddress,a.recipientAddress,BigInt(a.network.asChain()?.chainId??O.D.whitelisted.SOLANA_MAINNET.chainId),i,s,a.transferValue,a.blockchain,S.Yw.currencyCode,l.W.PENDING,o,c,0n);return await(0,D.KA)(e),a.shouldSavePendingTransaction&&n(e),e}throw F.t.unableToSubmitTransaction}catch(e){throw(0,k.gf)({error:e,context:"solana-error",severity:"error",isHandled:!1}),e}},[U.wE]:R,[B.Gv]:R,[W.bN]:R};async function j({unsignedTxOrUserOp:e,wallet:t,txSubmissionType:n,onSubmit:i,skipSubmit:s=!1,skipPrepare:o=!1,source:c="extension",txType:d="extension",isMEVProtectionEnabled:u=!1,walletProviderName:l}){const y=t.blockchain.rawValue,m=e.network.asChain(),{displayName:f,chainId:h,isCustomNetwork:b,isTestnet:w}=m??{},g=(e.metadata.get(r.kV)??"").toLocaleString(),k={start:a.CX,success:a.nr,fail:a.s,data:{action:z.X2.measurement,componentType:z.I5.unknown,currencyCode:e.currencyCode.rawValue,chainName:f,chainId:h,isCustomNetwork:b,isTestnet:w,isContractDeploy:!e.recipientAddress,blockchain:e.blockchain.rawValue,uuid:(0,p.A)(),type:d,source:c,txSource:g,amount:e.transferValue.toString(),feeCurrencyCode:e.feeCurrencyCode.rawValue,feeCurrencyDecimal:e.feeCurrencyDecimal.toString(),fromAddress:e.fromAddress,fromDomain:e.fromDomain,toAddress:e.recipientAddress,toDomain:e.recipientDomain,network:e.network.rawValue,...e.metadata.get(S.gx)&&{solanaSwapStep:(e.metadata.get(S.gx)??"")?.toLocaleString()},walletProviderName:l},metricTags:{blockchain:y,chain_id:b?void 0:h?.toString(),tx_source:g,tx_type:d},addSuccessDataToLog:({txHash:e})=>({txHash:e})},T=K[y];return(0,H.U)((async()=>T({unsignedTxOrUserOp:e,wallet:t,onSubmit:i,txSubmissionType:n,skipSubmit:s,skipPrepare:o,isMEVProtectionEnabled:u})),k)}},46845:(e,t,n)=>{n.d(t,{J:()=>c});var a=n(14041),r=n(27301),i=n(52689),s=n(99172),o=n(57822);function c(e,{blockchain:t,feeCurrencyCode:n,network:c}={}){const d=(0,o.e)(e);return(0,a.useMemo)((()=>{if(d)return function(e,{blockchain:t,feeCurrencyCode:n,network:a}){if(t&&n&&a)return e.find((e=>s.lg.isEqual(e.network,a)&&r.J.isEqual(e.blockchain,t)&&i.j.isEqual(e.currencyCode,n)&&e.isBaseAsset))}(d,{blockchain:t,feeCurrencyCode:n,network:c})}),[t,n,c,d])}},81415:(e,t,n)=>{n.d(t,{Gy:()=>i,RU:()=>d,X3:()=>l,cP:()=>c,er:()=>u,qw:()=>p,yW:()=>s});var a=n(34565),r=n(89029);r.Decimal.set({precision:100});const i="0x0000000000000000000000000000000000000000";function s(e,t){const n=new r.Decimal(e),a=new r.Decimal(10).pow(Number(t));return n.mul(a)}function o(e,t){const n=new r.Decimal(e||0),a=new r.Decimal(10).pow(Number(t));return n.div(a)}function c(e,t){const n=(0,a.eH)(e),r=(0,a.eH)(t);return n.greaterThan(r)}function d(e){return"ETH"}function u(e){const t=s(e.toString(),BigInt(-9));return t.greaterThan(10)?t.toFixed(0,r.Decimal.ROUND_HALF_UP):t.greaterThan(1)?t.toDecimalPlaces(1,r.Decimal.ROUND_HALF_UP).toString():t.toSignificantDigits(2,r.Decimal.ROUND_HALF_UP).toFixed(9,r.Decimal.ROUND_HALF_UP).toString().replace(/0+$/,"").replace(/\.$/,"")}function l(e){if(""===e)return 0n;const t=Number(e).toFixed(18);return BigInt(s(t,18n).toFixed(0))}function p(e){return o(e.toString(),18n).toFixed(18)}},91745:(e,t,n)=>{n.d(t,{U:()=>s});var a=n(55452),r=n(34767),i=n(52747);async function s(e,{start:t,success:n,fail:s,data:o,metricTags:c,addSuccessDataToLog:d}){(0,a.Np)(t,o),(0,a.N8)({metricName:t,metricType:r.vj.count,value:1,tags:c});try{const t=await e(),i=d?.(t)??{};return(0,a.Np)(n,{...o,...i}),(0,a.N8)({metricName:n,metricType:r.vj.count,value:1,tags:c}),t}catch(e){throw(0,a.Np)(s,{...o,errorMessage:(0,i.u)(e)}),(0,a.N8)({metricName:s,metricType:r.vj.count,value:1,tags:c}),e}}},40700:(e,t,n)=>{n.d(t,{_f:()=>a,km:()=>r,r_:()=>s,z1:()=>i});const a="0x",r="0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000001949fc7c88032b9fcb5f6efc7a7b8c63668eae9871b765e23123bb473ff57aa831a7c0d9276168ebcc29f2875a0239cffdf2a9cd1c2007c5c77c071db9264df1d000000000000000000000000000000000000000000000000000000000000002549960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97630500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008a7b2274797065223a22776562617574686e2e676574222c226368616c6c656e6765223a2273496a396e6164474850596759334b7156384f7a4a666c726275504b474f716d59576f4d57516869467773222c226f726967696e223a2268747470733a2f2f7369676e2e636f696e626173652e636f6d222c2263726f73734f726967696e223a66616c73657d00000000000000000000000000000000000000000000",i="0x",s=0n},57761:(e,t,n)=>{n.d(t,{$hd:()=>c,AQc:()=>r,ZO2:()=>u,bbF:()=>d,iWX:()=>l,x_n:()=>o});n(13404),n(56434),n(98246),n(60399);var a=n(57692);n(15581),n(35990),n(93381);const r=[{type:"constructor",inputs:[],stateMutability:"nonpayable"},{type:"fallback",stateMutability:"payable"},{type:"receive",stateMutability:"payable"},{type:"function",inputs:[],name:"REPLAYABLE_NONCE_KEY",outputs:[{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"owner",internalType:"address",type:"address"}],name:"addOwnerAddress",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"x",internalType:"bytes32",type:"bytes32"},{name:"y",internalType:"bytes32",type:"bytes32"}],name:"addOwnerPublicKey",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"functionSelector",internalType:"bytes4",type:"bytes4"}],name:"canSkipChainIdValidation",outputs:[{name:"",internalType:"bool",type:"bool"}],stateMutability:"pure"},{type:"function",inputs:[],name:"domainSeparator",outputs:[{name:"",internalType:"bytes32",type:"bytes32"}],stateMutability:"view"},{type:"function",inputs:[],name:"eip712Domain",outputs:[{name:"fields",internalType:"bytes1",type:"bytes1"},{name:"name",internalType:"string",type:"string"},{name:"version",internalType:"string",type:"string"},{name:"chainId",internalType:"uint256",type:"uint256"},{name:"verifyingContract",internalType:"address",type:"address"},{name:"salt",internalType:"bytes32",type:"bytes32"},{name:"extensions",internalType:"uint256[]",type:"uint256[]"}],stateMutability:"view"},{type:"function",inputs:[],name:"entryPoint",outputs:[{name:"",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[{name:"target",internalType:"address",type:"address"},{name:"value",internalType:"uint256",type:"uint256"},{name:"data",internalType:"bytes",type:"bytes"}],name:"execute",outputs:[],stateMutability:"payable"},{type:"function",inputs:[{name:"calls",internalType:"struct CoinbaseSmartWallet.Call[]",type:"tuple[]",components:[{name:"target",internalType:"address",type:"address"},{name:"value",internalType:"uint256",type:"uint256"},{name:"data",internalType:"bytes",type:"bytes"}]}],name:"executeBatch",outputs:[],stateMutability:"payable"},{type:"function",inputs:[{name:"calls",internalType:"bytes[]",type:"bytes[]"}],name:"executeWithoutChainIdValidation",outputs:[],stateMutability:"payable"},{type:"function",inputs:[{name:"userOp",internalType:"struct UserOperation",type:"tuple",components:[{name:"sender",internalType:"address",type:"address"},{name:"nonce",internalType:"uint256",type:"uint256"},{name:"initCode",internalType:"bytes",type:"bytes"},{name:"callData",internalType:"bytes",type:"bytes"},{name:"callGasLimit",internalType:"uint256",type:"uint256"},{name:"verificationGasLimit",internalType:"uint256",type:"uint256"},{name:"preVerificationGas",internalType:"uint256",type:"uint256"},{name:"maxFeePerGas",internalType:"uint256",type:"uint256"},{name:"maxPriorityFeePerGas",internalType:"uint256",type:"uint256"},{name:"paymasterAndData",internalType:"bytes",type:"bytes"},{name:"signature",internalType:"bytes",type:"bytes"}]}],name:"getUserOpHashWithoutChainId",outputs:[{name:"",internalType:"bytes32",type:"bytes32"}],stateMutability:"view"},{type:"function",inputs:[],name:"implementation",outputs:[{name:"$",internalType:"address",type:"address"}],stateMutability:"view"},{type:"function",inputs:[{name:"owners",internalType:"bytes[]",type:"bytes[]"}],name:"initialize",outputs:[],stateMutability:"payable"},{type:"function",inputs:[{name:"account",internalType:"address",type:"address"}],name:"isOwnerAddress",outputs:[{name:"",internalType:"bool",type:"bool"}],stateMutability:"view"},{type:"function",inputs:[{name:"account",internalType:"bytes",type:"bytes"}],name:"isOwnerBytes",outputs:[{name:"",internalType:"bool",type:"bool"}],stateMutability:"view"},{type:"function",inputs:[{name:"x",internalType:"bytes32",type:"bytes32"},{name:"y",internalType:"bytes32",type:"bytes32"}],name:"isOwnerPublicKey",outputs:[{name:"",internalType:"bool",type:"bool"}],stateMutability:"view"},{type:"function",inputs:[{name:"hash",internalType:"bytes32",type:"bytes32"},{name:"signature",internalType:"bytes",type:"bytes"}],name:"isValidSignature",outputs:[{name:"result",internalType:"bytes4",type:"bytes4"}],stateMutability:"view"},{type:"function",inputs:[],name:"nextOwnerIndex",outputs:[{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"index",internalType:"uint256",type:"uint256"}],name:"ownerAtIndex",outputs:[{name:"",internalType:"bytes",type:"bytes"}],stateMutability:"view"},{type:"function",inputs:[],name:"ownerCount",outputs:[{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[],name:"proxiableUUID",outputs:[{name:"",internalType:"bytes32",type:"bytes32"}],stateMutability:"view"},{type:"function",inputs:[{name:"index",internalType:"uint256",type:"uint256"},{name:"owner",internalType:"bytes",type:"bytes"}],name:"removeLastOwner",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"index",internalType:"uint256",type:"uint256"},{name:"owner",internalType:"bytes",type:"bytes"}],name:"removeOwnerAtIndex",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[],name:"removedOwnersCount",outputs:[{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"hash",internalType:"bytes32",type:"bytes32"}],name:"replaySafeHash",outputs:[{name:"",internalType:"bytes32",type:"bytes32"}],stateMutability:"view"},{type:"function",inputs:[{name:"newImplementation",internalType:"address",type:"address"},{name:"data",internalType:"bytes",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable"},{type:"function",inputs:[{name:"userOp",internalType:"struct UserOperation",type:"tuple",components:[{name:"sender",internalType:"address",type:"address"},{name:"nonce",internalType:"uint256",type:"uint256"},{name:"initCode",internalType:"bytes",type:"bytes"},{name:"callData",internalType:"bytes",type:"bytes"},{name:"callGasLimit",internalType:"uint256",type:"uint256"},{name:"verificationGasLimit",internalType:"uint256",type:"uint256"},{name:"preVerificationGas",internalType:"uint256",type:"uint256"},{name:"maxFeePerGas",internalType:"uint256",type:"uint256"},{name:"maxPriorityFeePerGas",internalType:"uint256",type:"uint256"},{name:"paymasterAndData",internalType:"bytes",type:"bytes"},{name:"signature",internalType:"bytes",type:"bytes"}]},{name:"userOpHash",internalType:"bytes32",type:"bytes32"},{name:"missingAccountFunds",internalType:"uint256",type:"uint256"}],name:"validateUserOp",outputs:[{name:"validationData",internalType:"uint256",type:"uint256"}],stateMutability:"nonpayable"},{type:"event",anonymous:!1,inputs:[{name:"index",internalType:"uint256",type:"uint256",indexed:!0},{name:"owner",internalType:"bytes",type:"bytes",indexed:!1}],name:"AddOwner"},{type:"event",anonymous:!1,inputs:[{name:"index",internalType:"uint256",type:"uint256",indexed:!0},{name:"owner",internalType:"bytes",type:"bytes",indexed:!1}],name:"RemoveOwner"},{type:"event",anonymous:!1,inputs:[{name:"implementation",internalType:"address",type:"address",indexed:!0}],name:"Upgraded"},{type:"error",inputs:[{name:"owner",internalType:"bytes",type:"bytes"}],name:"AlreadyOwner"},{type:"error",inputs:[],name:"Initialized"},{type:"error",inputs:[{name:"owner",internalType:"bytes",type:"bytes"}],name:"InvalidEthereumAddressOwner"},{type:"error",inputs:[{name:"key",internalType:"uint256",type:"uint256"}],name:"InvalidNonceKey"},{type:"error",inputs:[{name:"owner",internalType:"bytes",type:"bytes"}],name:"InvalidOwnerBytesLength"},{type:"error",inputs:[],name:"LastOwner"},{type:"error",inputs:[{name:"index",internalType:"uint256",type:"uint256"}],name:"NoOwnerAtIndex"},{type:"error",inputs:[{name:"ownersRemaining",internalType:"uint256",type:"uint256"}],name:"NotLastOwner"},{type:"error",inputs:[{name:"selector",internalType:"bytes4",type:"bytes4"}],name:"SelectorNotAllowed"},{type:"error",inputs:[],name:"Unauthorized"},{type:"error",inputs:[],name:"UnauthorizedCallContext"},{type:"error",inputs:[],name:"UpgradeFailed"},{type:"error",inputs:[{name:"index",internalType:"uint256",type:"uint256"},{name:"expectedOwner",internalType:"bytes",type:"bytes"},{name:"actualOwner",internalType:"bytes",type:"bytes"}],name:"WrongOwnerAtIndex"}],i=[{type:"event",inputs:[{name:"owner",type:"address",indexed:!0},{name:"spender",type:"address",indexed:!0},{name:"value",type:"uint256",indexed:!1}],name:"Approval"},{type:"event",inputs:[{name:"from",type:"address",indexed:!0},{name:"to",type:"address",indexed:!0},{name:"value",type:"uint256",indexed:!1}],name:"Transfer"},{type:"function",inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"spender",type:"address"},{name:"amount",type:"uint256"}],name:"approve",outputs:[{type:"bool"}],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[],name:"decimals",outputs:[{type:"uint8"}],stateMutability:"view"},{type:"function",inputs:[],name:"name",outputs:[{type:"string"}],stateMutability:"view"},{type:"function",inputs:[],name:"symbol",outputs:[{type:"string"}],stateMutability:"view"},{type:"function",inputs:[],name:"totalSupply",outputs:[{type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],name:"transfer",outputs:[{type:"bool"}],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{type:"bool"}],stateMutability:"nonpayable"}],s=[{type:"error",inputs:[{name:"preOpGas",internalType:"uint256",type:"uint256"},{name:"paid",internalType:"uint256",type:"uint256"},{name:"validAfter",internalType:"uint48",type:"uint48"},{name:"validUntil",internalType:"uint48",type:"uint48"},{name:"targetSuccess",internalType:"bool",type:"bool"},{name:"targetResult",internalType:"bytes",type:"bytes"}],name:"ExecutionResult"},{type:"error",inputs:[{name:"opIndex",internalType:"uint256",type:"uint256"},{name:"reason",internalType:"string",type:"string"}],name:"FailedOp"},{type:"error",inputs:[{name:"sender",internalType:"address",type:"address"}],name:"SenderAddressResult"},{type:"error",inputs:[{name:"aggregator",internalType:"address",type:"address"}],name:"SignatureValidationFailed"},{type:"error",inputs:[{name:"returnInfo",internalType:"struct IEntryPoint.ReturnInfo",type:"tuple",components:[{name:"preOpGas",internalType:"uint256",type:"uint256"},{name:"prefund",internalType:"uint256",type:"uint256"},{name:"sigFailed",internalType:"bool",type:"bool"},{name:"validAfter",internalType:"uint48",type:"uint48"},{name:"validUntil",internalType:"uint48",type:"uint48"},{name:"paymasterContext",internalType:"bytes",type:"bytes"}]},{name:"senderInfo",internalType:"struct IStakeManager.StakeInfo",type:"tuple",components:[{name:"stake",internalType:"uint256",type:"uint256"},{name:"unstakeDelaySec",internalType:"uint256",type:"uint256"}]},{name:"factoryInfo",internalType:"struct IStakeManager.StakeInfo",type:"tuple",components:[{name:"stake",internalType:"uint256",type:"uint256"},{name:"unstakeDelaySec",internalType:"uint256",type:"uint256"}]},{name:"paymasterInfo",internalType:"struct IStakeManager.StakeInfo",type:"tuple",components:[{name:"stake",internalType:"uint256",type:"uint256"},{name:"unstakeDelaySec",internalType:"uint256",type:"uint256"}]}],name:"ValidationResult"},{type:"error",inputs:[{name:"returnInfo",internalType:"struct IEntryPoint.ReturnInfo",type:"tuple",components:[{name:"preOpGas",internalType:"uint256",type:"uint256"},{name:"prefund",internalType:"uint256",type:"uint256"},{name:"sigFailed",internalType:"bool",type:"bool"},{name:"validAfter",internalType:"uint48",type:"uint48"},{name:"validUntil",internalType:"uint48",type:"uint48"},{name:"paymasterContext",internalType:"bytes",type:"bytes"}]},{name:"senderInfo",internalType:"struct IStakeManager.StakeInfo",type:"tuple",components:[{name:"stake",internalType:"uint256",type:"uint256"},{name:"unstakeDelaySec",internalType:"uint256",type:"uint256"}]},{name:"factoryInfo",internalType:"struct IStakeManager.StakeInfo",type:"tuple",components:[{name:"stake",internalType:"uint256",type:"uint256"},{name:"unstakeDelaySec",internalType:"uint256",type:"uint256"}]},{name:"paymasterInfo",internalType:"struct IStakeManager.StakeInfo",type:"tuple",components:[{name:"stake",internalType:"uint256",type:"uint256"},{name:"unstakeDelaySec",internalType:"uint256",type:"uint256"}]},{name:"aggregatorInfo",internalType:"struct IEntryPoint.AggregatorStakeInfo",type:"tuple",components:[{name:"aggregator",internalType:"address",type:"address"},{name:"stakeInfo",internalType:"struct IStakeManager.StakeInfo",type:"tuple",components:[{name:"stake",internalType:"uint256",type:"uint256"},{name:"unstakeDelaySec",internalType:"uint256",type:"uint256"}]}]}],name:"ValidationResultWithAggregation"},{type:"event",anonymous:!1,inputs:[{name:"userOpHash",internalType:"bytes32",type:"bytes32",indexed:!0},{name:"sender",internalType:"address",type:"address",indexed:!0},{name:"factory",internalType:"address",type:"address",indexed:!1},{name:"paymaster",internalType:"address",type:"address",indexed:!1}],name:"AccountDeployed"},{type:"event",anonymous:!1,inputs:[],name:"BeforeExecution"},{type:"event",anonymous:!1,inputs:[{name:"account",internalType:"address",type:"address",indexed:!0},{name:"totalDeposit",internalType:"uint256",type:"uint256",indexed:!1}],name:"Deposited"},{type:"event",anonymous:!1,inputs:[{name:"aggregator",internalType:"address",type:"address",indexed:!0}],name:"SignatureAggregatorChanged"},{type:"event",anonymous:!1,inputs:[{name:"account",internalType:"address",type:"address",indexed:!0},{name:"totalStaked",internalType:"uint256",type:"uint256",indexed:!1},{name:"unstakeDelaySec",internalType:"uint256",type:"uint256",indexed:!1}],name:"StakeLocked"},{type:"event",anonymous:!1,inputs:[{name:"account",internalType:"address",type:"address",indexed:!0},{name:"withdrawTime",internalType:"uint256",type:"uint256",indexed:!1}],name:"StakeUnlocked"},{type:"event",anonymous:!1,inputs:[{name:"account",internalType:"address",type:"address",indexed:!0},{name:"withdrawAddress",internalType:"address",type:"address",indexed:!1},{name:"amount",internalType:"uint256",type:"uint256",indexed:!1}],name:"StakeWithdrawn"},{type:"event",anonymous:!1,inputs:[{name:"userOpHash",internalType:"bytes32",type:"bytes32",indexed:!0},{name:"sender",internalType:"address",type:"address",indexed:!0},{name:"paymaster",internalType:"address",type:"address",indexed:!0},{name:"nonce",internalType:"uint256",type:"uint256",indexed:!1},{name:"success",internalType:"bool",type:"bool",indexed:!1},{name:"actualGasCost",internalType:"uint256",type:"uint256",indexed:!1},{name:"actualGasUsed",internalType:"uint256",type:"uint256",indexed:!1}],name:"UserOperationEvent"},{type:"event",anonymous:!1,inputs:[{name:"userOpHash",internalType:"bytes32",type:"bytes32",indexed:!0},{name:"sender",internalType:"address",type:"address",indexed:!0},{name:"nonce",internalType:"uint256",type:"uint256",indexed:!1},{name:"revertReason",internalType:"bytes",type:"bytes",indexed:!1}],name:"UserOperationRevertReason"},{type:"event",anonymous:!1,inputs:[{name:"account",internalType:"address",type:"address",indexed:!0},{name:"withdrawAddress",internalType:"address",type:"address",indexed:!1},{name:"amount",internalType:"uint256",type:"uint256",indexed:!1}],name:"Withdrawn"},{type:"function",inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"initCode",internalType:"bytes",type:"bytes"},{name:"sender",internalType:"address",type:"address"},{name:"paymasterAndData",internalType:"bytes",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view"},{type:"function",inputs:[{name:"unstakeDelaySec",internalType:"uint32",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable"},{type:"function",inputs:[{name:"account",internalType:"address",type:"address"}],name:"balanceOf",outputs:[{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"account",internalType:"address",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable"},{type:"function",inputs:[{name:"",internalType:"address",type:"address"}],name:"deposits",outputs:[{name:"deposit",internalType:"uint112",type:"uint112"},{name:"staked",internalType:"bool",type:"bool"},{name:"stake",internalType:"uint112",type:"uint112"},{name:"unstakeDelaySec",internalType:"uint32",type:"uint32"},{name:"withdrawTime",internalType:"uint48",type:"uint48"}],stateMutability:"view"},{type:"function",inputs:[{name:"account",internalType:"address",type:"address"}],name:"getDepositInfo",outputs:[{name:"info",internalType:"struct IStakeManager.DepositInfo",type:"tuple",components:[{name:"deposit",internalType:"uint112",type:"uint112"},{name:"staked",internalType:"bool",type:"bool"},{name:"stake",internalType:"uint112",type:"uint112"},{name:"unstakeDelaySec",internalType:"uint32",type:"uint32"},{name:"withdrawTime",internalType:"uint48",type:"uint48"}]}],stateMutability:"view"},{type:"function",inputs:[{name:"sender",internalType:"address",type:"address"},{name:"key",internalType:"uint192",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"initCode",internalType:"bytes",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"userOp",internalType:"struct UserOperation",type:"tuple",components:[{name:"sender",internalType:"address",type:"address"},{name:"nonce",internalType:"uint256",type:"uint256"},{name:"initCode",internalType:"bytes",type:"bytes"},{name:"callData",internalType:"bytes",type:"bytes"},{name:"callGasLimit",internalType:"uint256",type:"uint256"},{name:"verificationGasLimit",internalType:"uint256",type:"uint256"},{name:"preVerificationGas",internalType:"uint256",type:"uint256"},{name:"maxFeePerGas",internalType:"uint256",type:"uint256"},{name:"maxPriorityFeePerGas",internalType:"uint256",type:"uint256"},{name:"paymasterAndData",internalType:"bytes",type:"bytes"},{name:"signature",internalType:"bytes",type:"bytes"}]}],name:"getUserOpHash",outputs:[{name:"",internalType:"bytes32",type:"bytes32"}],stateMutability:"view"},{type:"function",inputs:[{name:"opsPerAggregator",internalType:"struct IEntryPoint.UserOpsPerAggregator[]",type:"tuple[]",components:[{name:"userOps",internalType:"struct UserOperation[]",type:"tuple[]",components:[{name:"sender",internalType:"address",type:"address"},{name:"nonce",internalType:"uint256",type:"uint256"},{name:"initCode",internalType:"bytes",type:"bytes"},{name:"callData",internalType:"bytes",type:"bytes"},{name:"callGasLimit",internalType:"uint256",type:"uint256"},{name:"verificationGasLimit",internalType:"uint256",type:"uint256"},{name:"preVerificationGas",internalType:"uint256",type:"uint256"},{name:"maxFeePerGas",internalType:"uint256",type:"uint256"},{name:"maxPriorityFeePerGas",internalType:"uint256",type:"uint256"},{name:"paymasterAndData",internalType:"bytes",type:"bytes"},{name:"signature",internalType:"bytes",type:"bytes"}]},{name:"aggregator",internalType:"contract IAggregator",type:"address"},{name:"signature",internalType:"bytes",type:"bytes"}]},{name:"beneficiary",internalType:"address payable",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"ops",internalType:"struct UserOperation[]",type:"tuple[]",components:[{name:"sender",internalType:"address",type:"address"},{name:"nonce",internalType:"uint256",type:"uint256"},{name:"initCode",internalType:"bytes",type:"bytes"},{name:"callData",internalType:"bytes",type:"bytes"},{name:"callGasLimit",internalType:"uint256",type:"uint256"},{name:"verificationGasLimit",internalType:"uint256",type:"uint256"},{name:"preVerificationGas",internalType:"uint256",type:"uint256"},{name:"maxFeePerGas",internalType:"uint256",type:"uint256"},{name:"maxPriorityFeePerGas",internalType:"uint256",type:"uint256"},{name:"paymasterAndData",internalType:"bytes",type:"bytes"},{name:"signature",internalType:"bytes",type:"bytes"}]},{name:"beneficiary",internalType:"address payable",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"key",internalType:"uint192",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"callData",internalType:"bytes",type:"bytes"},{name:"opInfo",internalType:"struct EntryPoint.UserOpInfo",type:"tuple",components:[{name:"mUserOp",internalType:"struct EntryPoint.MemoryUserOp",type:"tuple",components:[{name:"sender",internalType:"address",type:"address"},{name:"nonce",internalType:"uint256",type:"uint256"},{name:"callGasLimit",internalType:"uint256",type:"uint256"},{name:"verificationGasLimit",internalType:"uint256",type:"uint256"},{name:"preVerificationGas",internalType:"uint256",type:"uint256"},{name:"paymaster",internalType:"address",type:"address"},{name:"maxFeePerGas",internalType:"uint256",type:"uint256"},{name:"maxPriorityFeePerGas",internalType:"uint256",type:"uint256"}]},{name:"userOpHash",internalType:"bytes32",type:"bytes32"},{name:"prefund",internalType:"uint256",type:"uint256"},{name:"contextOffset",internalType:"uint256",type:"uint256"},{name:"preOpGas",internalType:"uint256",type:"uint256"}]},{name:"context",internalType:"bytes",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",internalType:"uint256",type:"uint256"}],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"",internalType:"address",type:"address"},{name:"",internalType:"uint192",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",internalType:"uint256",type:"uint256"}],stateMutability:"view"},{type:"function",inputs:[{name:"op",internalType:"struct UserOperation",type:"tuple",components:[{name:"sender",internalType:"address",type:"address"},{name:"nonce",internalType:"uint256",type:"uint256"},{name:"initCode",internalType:"bytes",type:"bytes"},{name:"callData",internalType:"bytes",type:"bytes"},{name:"callGasLimit",internalType:"uint256",type:"uint256"},{name:"verificationGasLimit",internalType:"uint256",type:"uint256"},{name:"preVerificationGas",internalType:"uint256",type:"uint256"},{name:"maxFeePerGas",internalType:"uint256",type:"uint256"},{name:"maxPriorityFeePerGas",internalType:"uint256",type:"uint256"},{name:"paymasterAndData",internalType:"bytes",type:"bytes"},{name:"signature",internalType:"bytes",type:"bytes"}]},{name:"target",internalType:"address",type:"address"},{name:"targetCallData",internalType:"bytes",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"userOp",internalType:"struct UserOperation",type:"tuple",components:[{name:"sender",internalType:"address",type:"address"},{name:"nonce",internalType:"uint256",type:"uint256"},{name:"initCode",internalType:"bytes",type:"bytes"},{name:"callData",internalType:"bytes",type:"bytes"},{name:"callGasLimit",internalType:"uint256",type:"uint256"},{name:"verificationGasLimit",internalType:"uint256",type:"uint256"},{name:"preVerificationGas",internalType:"uint256",type:"uint256"},{name:"maxFeePerGas",internalType:"uint256",type:"uint256"},{name:"maxPriorityFeePerGas",internalType:"uint256",type:"uint256"},{name:"paymasterAndData",internalType:"bytes",type:"bytes"},{name:"signature",internalType:"bytes",type:"bytes"}]}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"withdrawAddress",internalType:"address payable",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable"},{type:"function",inputs:[{name:"withdrawAddress",internalType:"address payable",type:"address"},{name:"withdrawAmount",internalType:"uint256",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"}],o="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",c=(0,a.b)({abi:i,functionName:"allowance"}),d=(0,a.b)({abi:i,functionName:"decimals"}),u=(0,a.b)({abi:i,functionName:"symbol"}),l=(0,a.b)({abi:s,address:o,functionName:"getNonce"})},39608:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(68583),r=n(41655),i=n(74996),s=n(67612),o=n.n(s);function c(e,t,n){(0,a.j)({blockchainSymbol:e,address:t,testnet:n});const s=(0,r.N)(e,n);return(0,i.E)(t,s)?"BECH32":function(e,t){let n;try{n=o().address.fromBase58Check(e)}catch{return!1}return n.version===t.scriptHash}(t,s)?"P2SH":"LEGACY"}},74996:(e,t,n)=>{n.d(t,{E:()=>i});var a=n(67612),r=n.n(a);function i(e,t){let n;try{n=r().address.fromBech32(e)}catch{return!1}return n.prefix===t.bech32&&0===n.version}},89887:(e,t,n)=>{n.d(t,{D:()=>c});var a=n(82823),r=n.n(a),i=n(40705);const s=new(r())(1e8),o=new(r())(1e3);function c(e){const t=(0,i.jn)(e,o);return(0,i.jn)(s.mul(t),e)}},64868:(e,t,n)=>{n.d(t,{S:()=>o});var a=n(82823),r=n.n(a),i=n(39565),s=n(66987);function o(e,t,n,a=""){const o=new(r())(1);return n?(0,s.l)(e,t,o,a).fee:(0,i.O)(e,t,o,[],a).fee}},27936:(e,t,n)=>{n.d(t,{_:()=>o});var a=n(82823),r=n.n(a),i=n(36610),s=n(29366);function o(e,t,n,a,o){if(!s.Pj(n))return{inputs:void 0,outputs:void 0,fee:new(r())(0)};let c=s.gc([],t),d=i.Yz;const u=[],l=s.h7(t);for(let p=0;p<e.length;++p){const y=e[p],m=s.wg(y),f=s.Pj(y.value);c=i.WQ(c,m),f&&(d=i.WQ(d,f)),u.push(y);const h=o?i.T9(o,i.lK(i.WQ(n,new(r())(1)),c)):i.lK(n,c);if(!i.lt(d,i.WQ(l,h)))return s.jE(u,t,n,a,o)}return{fee:o||i.lK(n,c)}}},36610:(e,t,n)=>{n.d(t,{T9:()=>h,WQ:()=>s,Yz:()=>i,be:()=>y,gt:()=>f,jb:()=>c,lK:()=>u,lt:()=>m,y4:()=>p});var a=n(82823),r=n.n(a);const i=new(r())(0);new(r())(1);function s(...e){return e.reduce(o)}function o(e,t){return e.add(t)}function c(...e){return e.reduce(d)}function d(e,t){return e.sub(t)}function u(...e){return e.reduce(l)}function l(e,t){return e.mul(t)}function p(e,t){if(!t.isZero())return e.div(t)}function y(e){return!!r().isBN(e)&&e.isZero()}function m(e,t){return!(!r().isBN(e)||!r().isBN(t))&&e.lt(t)}function f(e,t){return!(!r().isBN(e)||!r().isBN(t))&&e.gt(t)}function h(...e){return e.reduce(((e,t)=>t.gt(e)?t:e),i)}},39565:(e,t,n)=>{n.d(t,{O:()=>d});var a=n(27936),r=n(82823),i=n.n(r),s=n(36610),o=n(29366);function c(e,t){return(0,s.jb)(e.value,(0,s.lK)(t,(0,o.wg)(e)))}function d(e,t,n,r,d,l){const p=e.sort(((e,t)=>{const a=r.some((t=>t.hash===e.hash&&t.index===e.index));return a===r.some((e=>e.hash===t.hash&&e.index===t.index))?(0,s.jb)(c(t,n),c(e,n)).toNumber():a?-1:1})),y=function(e,t,n,a,r){if(!o.Pj(n))return{fee:s.Yz};let c=o.gc([],t),d=s.Yz;const u=[],l=o.h7(t),p=o.wt(void 0,n);for(const y of e){const e=o.wg(y),m=r?s.T9(r,s.lK(s.WQ(n,new(i())(1)),s.WQ(c,e))):s.lK(n,s.WQ(c,e)),f=o.Pj(y.value);if(!(f&&s.gt(s.WQ(d,f),s.WQ(l,m,p))||(c=s.WQ(c,e),f&&(d=s.WQ(d,f)),u.push(y),s.lt(d,s.WQ(l,m)))))return o.jE(u,t,n,a,r)}return{fee:r||s.lK(n,c)}}(p,t,n,d,l);if(y.inputs&&u(r,y.inputs))return y;const m=(0,a._)(p,t,n,d,l);return u(r,m.inputs)?m:{fee:m.fee}}function u(e,t){return 0===e.length||t?.some((t=>e.some((e=>e.hash===t.hash&&e.index===t.index))))}},66987:(e,t,n)=>{n.d(t,{l:()=>o});var a=n(82823),r=n.n(a),i=n(36610),s=n(29366);function o(e,t,n,a,o){if(!s.Pj(n))return{fee:(0,i.lK)(n,new(r())(0))};const c=s.gc(e,t),d=o||(0,i.lK)(n,c);if(0===t.length)return{fee:d};const u=s.h7(e),l=s.h7(t),p=(0,i.jb)(u,l,d);if(!p||p.isNeg())return{fee:d};const y=t.reduce(((e,t)=>e+(t.value?0:1)),0);if((0,i.be)(p)&&0===y)return s.jE(e,t,n,a);const m=t.filter((e=>e.value===i.Yz)).length,f=(0,i.y4)(p,new(r())(m));if(!t.every((e=>void 0!==e.value||(0,i.gt)(f??new(r())(0),s.wt(e,n)))))return{fee:d};const h=t.map((e=>e.value!==i.Yz?e:{...e,value:f}));return s.jE(e,h,n,a)}},29366:(e,t,n)=>{n.d(t,{Pj:()=>m,gc:()=>y,h7:()=>f,jE:()=>b,wg:()=>u,wt:()=>p});var a=n(82823),r=n.n(a),i=n(30613),s=n(36610);const o=new(r())(10),c={LEGACY:new(r())(148),P2SH:new(r())(92),BECH32:new(r())(69)},d={LEGACY:new(r())(34),P2SH:new(r())(32),BECH32:new(r())(31)};function u(e){return c[e?.addressType||"LEGACY"]}function l(e){return d[e?.type||"LEGACY"]}function p(e,t){return(0,s.lK)(u(void 0),t)}function y(e,t){const n=e.reduce(((e,t)=>(0,s.WQ)(e,u(t))),s.Yz),a=t.reduce(((e,t)=>(0,s.WQ)(e,l(t))),s.Yz);return(0,s.WQ)((0,s.WQ)(o,n),a)}function m(e){if(!e.isNeg())return e}function f(e){return e.reduce(((e,t)=>(0,s.WQ)(e,m(t.value??s.Yz)||s.Yz)),s.Yz)}const h=l(void 0);function b(e,t,n,a,r){const o=y(e,t),c=r||(0,s.lK)(n,(0,s.WQ)(o,h)),d=(0,s.jb)((0,s.jb)(f(e),f(t)),c);let u=t;(0,s.gt)(d,p(0,n))&&(u=t.concat({value:d,address:a}));const l=(0,s.jb)(f(e),f(u));return l?{inputs:e.map((e=>(0,i.c)(e))),outputs:u,fee:l}:{fee:(0,s.lK)(n,o),inputs:e,outputs:u}}},36332:(e,t,n)=>{n.d(t,{lE:()=>o,bn:()=>b,xP:()=>k});var a=n(82823),r=n.n(a),i=n(68758),s=n(40705);async function o({blockchainSymbol:e,testnet:t}){const n=[],a=[1,3,6,12];for(const o of a){const a=await(0,i.T)({blockchainSymbol:e,endpoint:"/v1/estimateFee",body:{blocks:o,testnet:t}}),{body:c}=a,d=c&&(0,s.wP)(c.fee,8);if(!d)throw new Error("unexpected response");const u=(0,s.jn)(d,new(r())(1024));n.push(u)}return n}var c=n(68583),d=n(39608),u=n(27936),l=n(36610),p=n(39565),y=n(29366),m=n(89887),f=n(64868);class h extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}function b({blockchainSymbol:e,utxos:t,toAddress:n,changeAddress:a,amount:i,feeRate:s,testnet:o,includeUTXOs:b,excludeUTXOs:w,hardcodedTotalFee:g}){(0,c.j)({blockchainSymbol:e,address:a,testnet:o}),(0,c.j)({blockchainSymbol:e,address:n,testnet:o});const k=t.filter((e=>!w.some((t=>t.hash===e.hash&&t.index===e.index)))).filter((e=>{if(b.some((t=>t.hash===e.hash&&t.index===e.index)))return!0;const t=(0,y.wg)(e),n=(0,l.lK)(s,t),a=(0,y.Pj)(e.value);return!(a&&(0,l.gt)(n,a))})),T=k.sort(((e,t)=>{const n=b.some((t=>t.hash===e.hash&&t.index===e.index)),a=b.some((e=>e.hash===t.hash&&e.index===t.index));return n&&a?t.value.gt(e.value)?1:-1:n?-1:a||t.value.gt(e.value)?1:-1})),A={address:n,value:i,type:(0,d.Z)(e,n,o)},P="DOGE"===e?(0,f.S)(T,[A],!1):new(r())(0),v="DOGE"===e?(0,m.D)(P):s,x=(0,p.O)(T,[A],new(r())(v),b,a,g);if(void 0===x.inputs||void 0===x.outputs){const e=(0,u._)(k,[A],v,a);throw void 0===e.inputs||void 0===e.outputs?h.unableToSelectCoins:h.excludedUTXOsPrecludeCoinSelection}return{inputs:x.inputs,outputs:x.outputs,fee:new(r())(x.fee)}}h.unableToSelectCoins=new h("UnableToSelectCoins","Unable to select coins"),h.excludedUTXOsPrecludeCoinSelection=new h("excludedUTXOsPrecludeCoinSelection","pending transactions are preventing coin selection");var w=n(30613),g=n(66987);async function k({blockchainSymbol:e,utxos:t,toAddress:n,feeRate:a,isTestnet:i,excludeUTXOs:s,hardcodedTotalFee:o}){const c=t.map((t=>({...t,addressType:(0,d.Z)(e,t.address,i)}))).filter((e=>!s.some((t=>t.hash===e.hash&&t.index===e.index)))).filter((e=>{const t=(0,y.wg)(e),n=(0,l.lK)(a,t),r=(0,y.Pj)(e.value);return!(r&&(0,l.gt)(n,r))})),u=[{address:n,type:(0,d.Z)(e,n,i),value:l.Yz}],p="DOGE"===e?(0,f.S)(c,u,!0):new(r())(0),b="DOGE"===e?(0,m.D)(p):a,k=(0,g.l)(c,u,b,n,o);if(void 0===k.inputs||void 0===k.outputs)throw h.unableToSelectCoins;return{inputs:k.inputs.map((e=>(0,w.c)(e))),outputs:k.outputs,fee:new(r())(k.fee)}}},30613:(e,t,n)=>{function a(e){const t={...e};return delete t.addressType,t}n.d(t,{c:()=>a})}}]);
//# sourceMappingURL=625.js.map