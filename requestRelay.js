/*! For license information please see requestRelay.js.LICENSE.txt */
(()=>{var __webpack_modules__={34767:(e,t,n)=>{"use strict";n.d(t,{$s:()=>Ue,DD:()=>et,I5:()=>h,N8:()=>Ve,Po:()=>Je,TT:()=>f,X2:()=>p,br:()=>Ye,om:()=>Ze,vj:()=>d});n(18047),n(68839),n(14041);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}let l=function(e){return e.fbclid="fbclid",e.gclid="gclid",e.msclkid="msclkid",e.ptclid="ptclid",e.ttclid="ttclid",e.utm_source="utm_source",e.utm_medium="utm_medium",e.utm_campaign="utm_campaign",e.utm_term="utm_term",e.utm_content="utm_content",e}({});let u=function(e){return e.low="low",e.high="high",e}({}),d=function(e){return e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram",e}({}),h=function(e){return e.unknown="unknown",e.banner="banner",e.button="button",e.card="card",e.chart="chart",e.content_script="content_script",e.dropdown="dropdown",e.link="link",e.page="page",e.modal="modal",e.table="table",e.search_bar="search_bar",e.service_worker="service_worker",e.text="text",e.text_input="text_input",e.tray="tray",e.checkbox="checkbox",e.icon="icon",e.app="app",e}({}),p=function(e){return e.unknown="unknown",e.blur="blur",e.click="click",e.change="change",e.dismiss="dismiss",e.focus="focus",e.hover="hover",e.select="select",e.measurement="measurement",e.move="move",e.process="process",e.render="render",e.scroll="scroll",e.view="view",e.search="search",e.keyPress="keyPress",e}({}),f=function(e){return e.unknown="unknown",e.web="web",e.android="android",e.ios="ios",e.mobile_web="mobile_web",e.tablet_web="tablet_web",e.server="server",e.windows="windows",e.macos="macos",e.extension="extension",e}({}),m=function(e){return e[e.notLoggedIn=0]="notLoggedIn",e[e.loggedIn=1]="loggedIn",e}({}),y=function(e){return e.ac="ac",e.af="af",e.ah="ah",e.al="al",e.am="am",e.ar="ar",e.as="as",e}({}),g=function(e){return e.pv="pv",e}({});const b="https://analytics-service-dev.cbhq.net",v=5e3,w="analytics-db",E="Analytics SDK:",_=Object.values(l),S="pageview",T="session_duration",A="1",N="web",C=["access_token","refresh_token","reset_token"],M=/^(https?:\/\/)/;function R(e){return{eventsEndpoint:e+"/amp",metricsEndPoint:e+"/metrics",exposureEndpoint:e+"/track-exposures",tracesEndpoint:e+"/traces"}}const x=s(s({authCookie:"logged_in",amplitudeApiKey:"",batchEventsPeriod:v,batchEventsThreshold:30,batchMetricsPeriod:v,batchMetricsThreshold:30,batchTracesPeriod:v,batchTracesThreshold:30,headers:{},interactionManager:null,isAlwaysAuthed:!1,isProd:!1,isInternalApplication:!1,onError:(e,t)=>{console.error(E,e,t)},platform:f.unknown,projectName:"",ricTimeoutScheduleEvent:1e3,ricTimeoutSetDevice:500,showDebugLogging:!1,trackUserId:!1,version:null,apiEndpoint:b},R(b)),{},{steps:{},disableReporting:!1});!function(e,...t){t.reduce(((e,t)=>n=>e(t(n))),e)}((e=>{if(!e.isProd)return e.isInternalApplication?(e.apiEndpoint="https://analytics-service-internal-dev.cbhq.net",s(s({},e),R(e.apiEndpoint))):e;const t=(e=>e.apiEndpoint?M.test(e.apiEndpoint)?e.apiEndpoint:`https://${e.apiEndpoint}`:e.isInternalApplication?"https://analytics-service-internal.cbhq.net":"https://as.coinbase.com")(e);return s(s({},e),{},{apiEndpoint:t},R(t))}),(function(e){const t=e.revokedQueryParams?e.revokedQueryParams:[];return s(s({},e),{},{revokedQueryParams:C.concat(t)})}),(function(e){return e.disableReporting&&Object.assign(e,s(s({},e),{},{onError:()=>{}})),s({},e)}));const k=[f.web,f.mobile_web,f.tablet_web];function I(){return"android"===x.platform}function O(){return"ios"===x.platform}function P(){return k.includes(x.platform)}const L={amplitudeOSName:null,amplitudeOSVersion:null,amplitudeDeviceModel:null,browserName:null,browserMajor:null,osName:null,userAgent:null,width:null,height:null},D={countryCode:null,deviceId:null,device_os:null,isOptOut:!1,locale:null,jwt:null,session_lcc_id:null,userAgent:null,userId:null},B=e=>e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,B),j=()=>x.isAlwaysAuthed||!!D.userId,q=()=>{const e={};return D.countryCode&&(e.country_code=D.countryCode),e},$={breadcrumbs:[],initialUAAData:{},pageKey:"",pageKeyRegex:{},pagePath:"",prevPageKey:"",prevPagePath:""};const U={eventId:0,sequenceNumber:0,sessionId:0,lastEventTime:0,sessionStart:0,sessionUUID:null,userId:null,ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0};function F(e){Object.assign(U,e)}function V(){return document?.referrer??""}const H=()=>P()?(Object.keys($.initialUAAData).length>0||(new URLSearchParams(G()),$.initialUAAData=s(s(s({},W()),z()),(()=>{const e=V();if(!e)return{};const t=new URL(e);return t.hostname===K()?{}:{referrer:e,referring_domain:t.hostname}})())),$.initialUAAData):$.initialUAAData,z=()=>{const e=new URLSearchParams(G()),t={};return _.forEach((n=>{e.has(n)&&(t[n]=(e.get(n)||"").toLowerCase())})),t},W=()=>{const e={};return _.forEach((t=>{U[t]&&(e[t]=U[t])})),e},K=()=>window?.location?.hostname||"",G=()=>x.revokedQueryParams?function(e,t){const n=new RegExp(`[&?]${t.join("=.*?(&|$)|")}=.*?(&|$)`,"g");return e.replace(n,"").replace(/^&/,"?")}(window?.location?.search||"",x.revokedQueryParams):window?.location?.search||"",Q=()=>window?.location?.pathname||"",J=()=>{const e=x.overrideWindowLocation?$.pagePath:Q()+G();e&&e!==$.pagePath&&(e!==$.pagePath&&Y(),$.pagePath=e,$.pageKeyRegex&&Object.keys($.pageKeyRegex).some((e=>{if($.pageKeyRegex[e].test($.pagePath))return $.pageKey=e,!0})))},Y=()=>{if(P()){const e=V();if(!$.prevPagePath&&e){const t=new URL(e);if(t.hostname===K())return void($.prevPagePath=t.pathname)}}$.prevPagePath=$.pagePath,$.prevPageKey=$.pageKey},X=e=>{P()&&Object.assign(e,H())};const Z={};function ee(){return x.platform!==f.unknown||(x.onError(new Error("SDK platform not initialized")),!1)}const te={eventsQueue:[],eventsScheduled:!1,metricsQueue:[],metricsScheduled:!1,tracesQueue:[],tracesScheduled:!1};function ne(e){Object.assign(te,e)}const re={ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0},ie={ac:20,af:5,ah:1,al:1,am:0,ar:10,as:20},ae={pv:25},se={xs:0,s:1,m:1,l:2,xl:2,xxl:2},oe=e=>{Object.assign(re,e)},ce=e=>{(e=>{switch(e.action){case p.click:re.ac+=1;break;case p.focus:re.af+=1;break;case p.hover:re.ah+=1;break;case p.move:re.am+=1;break;case p.scroll:re.al+=1;break;case p.search:re.ar+=1;break;case p.select:re.as+=1}})(e),e.event_type!==S?e.event_type===T&&((e=>{if(!e.session_rank)return;const t=e.session_rank;Object.values(y).forEach((e=>{re.sqs+=re[e]*ie[e]})),Object.values(g).forEach((e=>{re.sqs+=re[e]*ae[e]})),re.sqs*=se[t]})(e),Object.assign(e,re),oe({ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0})):re.pv+=1};function le(){return(new Date).getTime()}const ue={timeStart:le(),timeOnPagePath:0,timeOnPageKey:0,prevTimeOnPagePath:0,prevTimeOnPageKey:0,sessionDuration:0,sessionEnd:0,sessionStart:0,prevSessionDuration:0};function de(e){Object.assign(ue,e)}const he={isReady:!1,idbKeyval:null};const pe=async(e,t)=>{if(he.idbKeyval)try{await he.idbKeyval.set(e,t)}catch{x.onError(new Error("IndexedDB:Set:InternalError"))}},fe=()=>{"server"!==x.platform&&(F({sessionStart:ue.sessionStart,ac:re.ac,af:re.af,ah:re.ah,al:re.al,am:re.am,ar:re.ar,as:re.as,pv:re.pv}),D.userId&&F({userId:D.userId}),pe(w,U))},me="rgb(5,177,105)",ye=11,ge=e=>{const t=e.metricName,n=e.data,r=e.importance||u.low;if(!x.showDebugLogging||!console)return;const i=`%c ${E}`,a=`color:${me};font-size:${ye}px;`,s=`Importance: ${r}`;console.group(i,a,t,s),n.forEach((e=>{e.event_type?console.log(e.event_type,e):console.log(e)})),console.groupEnd()},be=e=>{const t=e.metricName,n=e.data,r=e.importance||u.low;if(!x.showDebugLogging||!console)return;const i=`color:${me};font-size:${ye}px;`,a=`%c ${E}`,s=`Importance: ${r}`;console.log(a,i,t,n,s)},ve=e=>e-U.lastEventTime>18e5,we=e=>{ce(e);const t=e.event_type;delete e.event_type;const n=e.deviceId?e.deviceId:null,r=e.timestamp;return delete e.timestamp,F({eventId:U.eventId+1}),F({sequenceNumber:U.sequenceNumber+1}),(()=>{const e=le();U.sessionId&&U.lastEventTime&&U.sessionUUID&&!ve(e)||(U.sessionId=e,U.sessionUUID=B(),de({sessionStart:e}),be({metricName:"Started new session:",data:{persistentData:U,timeStone:ue}})),U.lastEventTime=e})(),fe(),{device_id:D.deviceId||n||null,user_id:D.userId,timestamp:r,event_id:U.eventId,session_id:U.sessionId||-1,event_type:t,version_name:x.version||null,platform:x.platform||null,os_name:L.amplitudeOSName,os_version:L.amplitudeOSVersion,device_model:L.amplitudeDeviceModel,language:D.locale,event_properties:s(s({},e),{},{session_uuid:U.sessionUUID,height:L.height,width:L.width}),user_properties:q(),uuid:B(),library:{name:"@cbhq/client-analytics",version:"11.0.5"},sequence_number:U.sequenceNumber,user_agent:L.userAgent||D.userAgent}},Ee=e=>e.map((e=>we(e))),_e=e=>e.map((e=>(e=>{const t=e.tags||{},n=s(s({authed:j()?"true":"false",platform:x.platform},t),{},{project_name:x.projectName,version_name:x.version||null});return{metric_name:e.metricName,page_path:e.pagePath||null,value:e.value,tags:n,type:e.metricType}})(e))),Se=e=>0!==te.metricsQueue.length&&(te.metricsQueue.length>=x.batchMetricsThreshold||(te.metricsScheduled||(te.metricsScheduled=!0,setTimeout((()=>{te.metricsScheduled=!1,e(_e(te.metricsQueue)),te.metricsQueue=[]}),x.batchMetricsPeriod)),!1)),Te=e=>0!==te.tracesQueue.length&&(te.tracesQueue.length>=x.batchTracesThreshold||(te.tracesScheduled||(te.tracesScheduled=!0,setTimeout((()=>{te.tracesScheduled=!1,e(te.tracesQueue),te.tracesQueue=[]}),x.batchTracesPeriod)),!1)),Ae=e=>{P()&&window?.requestIdleCallback?window.requestIdleCallback(e,{timeout:x.ricTimeoutScheduleEvent}):(I()||O())&&x.interactionManager?x.interactionManager.runAfterInteractions(e):e()},Ne="application/x-www-form-urlencoded; charset=UTF-8";const Ce=e=>{const t=e.data,n=e.importance,r=e.isJSON,i=e.onError,a=e.url,o=n||u.low,c=function({isJSON:e,data:t}){const n=!P()||e;return{contentType:n?"application/json":Ne,body:n?JSON.stringify(t):new URLSearchParams(t).toString()}}({isJSON:r,data:t}),l=c.body,d=c.contentType;function h(){const e=new XMLHttpRequest;e.open("POST",a,!0),Object.keys(x.headers||{}).forEach((t=>{e.setRequestHeader(t,x.headers[t])})),e.setRequestHeader("Content-Type",Ne),D.jwt&&e.setRequestHeader("authorization",`Bearer ${D.jwt}`),e.send(l)}if(!P()||r||!("sendBeacon"in navigator)||o!==u.low||x.headers&&0!==Object.keys(x.headers).length)if(P()&&!r)h();else{const e=s(s({},x.headers),{},{"Content-Type":d});D.jwt&&(e.Authorization=`Bearer ${D.jwt}`),fetch(a,{method:"POST",mode:"no-cors",headers:e,body:l}).catch((e=>{i(e,{context:"AnalyticsSDKApiError"})}))}else{const e=new Blob([l],{type:Ne});try{navigator.sendBeacon.bind(navigator)(a,e)||h()}catch(e){x.onError(e),h()}}};class Me extends Error{constructor(e){super(e),this.name="CircularJsonReference",this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}}class Re extends Me{constructor(...e){super(...e),this.name="DomReferenceInAnalyticsEvent"}}const xe=(e,t=u.low)=>{var n;(e&&te.eventsQueue.push(e),he.isReady)&&(!x.trackUserId||D.userId?(t===u.high||(n=ke,0!==te.eventsQueue.length&&(te.eventsQueue.length>=x.batchEventsThreshold||(te.eventsScheduled||(te.eventsScheduled=!0,setTimeout((()=>{te.eventsScheduled=!1,n(Ee(te.eventsQueue)),te.eventsQueue=[]}),x.batchEventsPeriod)),0))))&&Ie(t):te.eventsQueue.length>10&&(x.trackUserId=!1,x.onError(new Error("userId not set in Logged-in"))))},ke=(e,t=u.low)=>{if(D.isOptOut||0===e.length)return;let n;try{n=JSON.stringify(e)}catch(t){const i=e.map((e=>e.event_type)).join(", "),a=r((e=>{try{const n=[];for(const r of e){const e=s({},r);r.event_properties&&(e.event_properties=s(s({},e.event_properties),{},{currentTarget:null,target:null,relatedTarget:null,_dispatchInstances:null,_targetInst:null,view:(t=r.event_properties.view,["string","number","boolean"].includes(typeof t)?r.event_properties.view:null)})),n.push(e)}return[!0,JSON.stringify(n)]}catch(e){return[!1,""]}var t})(e),2),o=a[0],c=a[1];if(!o)return void x.onError(new Me(t instanceof Error?t.message:"unknown"),{listEventType:i});n=c,x.onError(new Re("Found DOM element reference"),{listEventType:i,stringifiedEventData:n})}const i=s(s({},{e:n,v:"2",upload_time:le().toString()}),{},{client:x.amplitudeApiKey});Ce({url:x.eventsEndpoint,data:i,importance:t,onError:x.onError}),ge({metricName:"Batch Events",data:e,importance:t})},Ie=(e=u.low)=>{ke(Ee(te.eventsQueue),e),ne({eventsQueue:[]})},Oe=Object.values(p),Pe=Object.values(h),Le=e=>Oe.includes(e)?e:p.unknown,De=e=>Pe.includes(e)?e:h.unknown,Be=(e,t,n)=>{const r={auth:j()?m.loggedIn:m.notLoggedIn,action:Le(e),component_type:De(t),logging_id:n,platform:x.platform,project_name:x.projectName};return"number"==typeof D.userTypeEnum&&(r.user_type_enum=D.userTypeEnum),r},je=e=>{const t=le();if(!e)return x.onError(new Error("missing logData")),s(s({},Be(p.unknown,h.unknown)),{},{locale:D.locale,session_lcc_id:D.session_lcc_id,timestamp:t,time_start:ue.timeStart});const n=s(s(s({},e),Be(e.action,e.componentType,e.loggingId)),{},{locale:D.locale,session_lcc_id:D.session_lcc_id,timestamp:t,time_start:ue.timeStart});return delete n.componentType,delete n.loggingId,n},qe={blacklistRegex:[],isEnabled:!1};function $e(){return{page_key:$.pageKey,page_path:$.pagePath,prev_page_key:$.prevPageKey,prev_page_path:$.prevPagePath}}function Ue(e,t,n=u.low){if(D.isOptOut)return;if(!ee())return;const r=je(t);!function(e){qe.isEnabled&&(J(),Object.assign(e,$e()))}(r),X(r),function(e){Object.keys(Z).length>0&&Object.assign(e,Z)}(r),r.has_double_fired=!1,r.event_type=e,n===u.high?xe(r,n):Ae((()=>{xe(r)}))}function Fe(e,t=!1){t?Ce({url:x.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:x.onError}):Ae((()=>{Ce({url:x.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:x.onError})})),ge({metricName:"Batch Metrics",data:e})}function Ve(e){if(!ee())return;f.server!==x.platform&&!e.pagePath&&$.pagePath&&(e.pagePath=$.pagePath);const t=s(!Object.keys(Z).length?s({},e.tags):s(s({},e.tags),Z),{},{locale:D.locale});if(t&&Object.assign(e,{tags:t}),te.metricsQueue.push(e),Se(Fe)){Fe(_e(te.metricsQueue)),te.metricsQueue=[]}}const He={Button:{label:"cb_button",uuid:"e921a074-40e6-4371-8700-134d5cd633e6",componentType:h.button}};function ze(e,t,n){const r=n.componentName,i=n.data;Ue(e.label,s({componentType:e.componentType,action:t,loggingId:e.uuid,component_name:r},i))}p.click,p.hover,p.click,p.hover;function We(e,t=!1){t?Ce({url:x.tracesEndpoint,data:{traces:e},isJSON:!0,onError:x.onError}):Ae((()=>{Ce({url:x.tracesEndpoint,data:{traces:e},isJSON:!0,onError:x.onError})})),ge({metricName:"Batch Traces",data:e})}const Ke=1e6;function Ge(e){return e*Ke}function Qe(e=function(){return window?.crypto}()){const t=new Uint32Array(2);e?.getRandomValues(t);return((BigInt(t[0])<<BigInt(32))+BigInt(t[1])).toString()}function Je(e){return t=e.trace_id,{"x-datadog-origin":"rum","x-datadog-parent-id":e.span_id,"x-datadog-sampling-priority":"1","x-datadog-trace-id":t};var t}function Ye(e){const t=e.name,n=e.traceId,r=e.spanId,i=e.start,a=e.duration,o=e.resource,c=e.meta,l=e.parentId;return{duration:a?Ge(a):0,name:t,resource:o,service:x.projectName,span_id:r??Qe(),start:i?Ge(i):0,trace_id:n??Qe(),parent_id:l??A,type:N,meta:s(s(s({platform:x.platform},$.pageKey?{page_key:$.pageKey}:{}),Z.ujs?.length?{last_ujs:Z.ujs[Z.ujs.length-1]}:{}),c??{})}}function Xe(e,t){e.forEach((e=>function(e,t){const n=s(s({},e.meta),t.meta),r={start:t.start?Ge(t.start):e.start,duration:t.duration?Ge(t.duration):e.duration};Object.assign(e,t,s({meta:n},r))}(e,t)))}function Ze(e,t){ee()&&function(e){return e.length>0}(e)&&(t&&Xe(e,t),te.tracesQueue.push(e),Te(We)&&(We(te.tracesQueue),te.tracesQueue=[]))}function et(){return{"X-CB-Device-ID":D.deviceId||"unknown","X-CB-Is-Logged-In":D.userId?"true":"false","X-CB-Pagekey":$.pageKey||"unknown","X-CB-UJS":(e=Z.ujs,void 0===e||0===e.length?"":e.join(",")),"X-CB-Platform":x.platform||"unknown","X-CB-Project-Name":x.projectName||"unknown","X-CB-Session-UUID":U.sessionUUID||"unknown","X-CB-Version-Name":x.version?String(x.version):"unknown"};var e}},86740:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var r=n(24783),i=n(1572);class a{static isSQLiteFamily(e){return["sqlite","cordova","react-native","nativescript","sqljs","expo","better-sqlite3","capacitor"].includes(e.options.type)}static isMySQLFamily(e){return["mysql","mariadb"].includes(e.options.type)}static isReleaseVersionOrGreater(e,t){return null!=e.version&&i.g.isGreaterOrEqual(e.version,t)}static isPostgresFamily(e){return["postgres","aurora-postgres"].includes(e.options.type)}static buildDriverOptions(e,t){if(e.url){const n=this.parseConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const e of Object.keys(n))void 0===n[e]&&delete n[e];return Object.assign({},e,n)}return Object.assign({},e)}static buildMongoDBDriverOptions(e,t){if(e.url){const n=this.parseMongoDBConnectionUrl(e.url);t&&t.useSid&&n.database&&(n.sid=n.database);for(const e of Object.keys(n))void 0===n[e]&&delete n[e];return Object.assign({},e,n)}return Object.assign({},e)}static buildAlias({maxAliasLength:e},t,...n){"string"==typeof t?(n.unshift(t),t={shorten:!1,joiner:"_"}):t=Object.assign({shorten:!1,joiner:"_"},t);const i=1===n.length?n[0]:n.join(t.joiner);if(e&&e>0&&i.length>e){if(!0===t.shorten){const t=(0,r.ml)(i);if(t.length<e)return t}return(0,r.tW)(i,{length:e})}return i}static buildColumnAlias({maxAliasLength:e},t,...n){return this.buildAlias({maxAliasLength:e},t,...n)}static parseConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),r=e.substr(n+2),i=r.indexOf("/"),a=-1!==i?r.substr(0,i):r;let s=-1!==i?r.substr(i+1):void 0;s&&-1!==s.indexOf("?")&&(s=s.substr(0,s.indexOf("?")));const o=a.lastIndexOf("@"),c=a.substr(0,o),l=a.substr(o+1);let u=c,d="";const h=c.indexOf(":");-1!==h&&(u=c.substr(0,h),d=c.substr(h+1));const[p,f]=l.split(":");return{type:t,host:p,username:decodeURIComponent(u),password:decodeURIComponent(d),port:f?parseInt(f):void 0,database:s||void 0}}static parseMongoDBConnectionUrl(e){const t=e.split(":")[0],n=e.indexOf("//"),r=e.substr(n+2),i=r.indexOf("/"),a=-1!==i?r.substr(0,i):r;let s,o,c,l,u=-1!==i?r.substr(i+1):void 0,d="",h={};if(u&&-1!==u.indexOf("?")){d=u.substr(u.indexOf("?")+1,u.length);let e,t;d.split("&").forEach((n=>{e=n.split("=")[0],t=n.split("=")[1],h[e]=t})),l=h.replicaSet,u=u.substr(0,u.indexOf("?"))}const p=a.lastIndexOf("@"),f=a.substr(0,p),m=a.substr(p+1);let y=f,g="";const b=f.indexOf(":");-1!==b&&(y=f.substr(0,b),g=f.substr(b+1)),l?c=m:[s,o]=m.split(":");let v={type:t,host:s,hostReplicaSet:c,username:decodeURIComponent(y),password:decodeURIComponent(g),port:o?parseInt(o):void 0,database:u||void 0};for(const[e,t]of Object.entries(h))v[e]=t;return v}}},47037:(e,t,n)=>{"use strict";var r=n(93499);r.V},34165:(e,t,n)=>{"use strict";n.d(t,{T:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Cannot attach entity "${e}" to its parent. Please make sure parent is saved in the database before saving children nodes.`)}}},28028:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});var r=n(93499);class i extends r.V{constructor(e,t){super();const n=e.primaryColumns.reduce(((e,t,n)=>(t.setEntityValue(e,n+1),e)),{});this.message=`Cannot use given entity id "${t}" because "${e.targetName}" contains multiple primary columns, you must provide object in following form: ${JSON.stringify(n)} as an id.`}}},11866:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Cannot ${e}, given value must be instance of entity class, instead object literal is given. Or you must specify an entity target to method call.`)}}},80601:(e,t,n)=>{"use strict";n.d(t,{j:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Circular relations detected: ${e}. To resolve this issue you need to set nullable: true somewhere in this dependency structure.`)}}},80345:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var r=n(93499);class i extends r.V{constructor(e,t){super(`Column type for ${e.constructor.name}#${t} is not defined and cannot be guessed. Make sure you have turned on an "emitDecoratorMetadata": true option in tsconfig.json. Also make sure you have imported "reflect-metadata" on top of the main entry file in your application (before any entity imported).If you are using JavaScript instead of TypeScript you must explicitly provide a column type.`)}}},55854:(e,t,n)=>{"use strict";n.d(t,{e:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Connection with ${e} database is not established. Check connection configuration.`)}}},1430:(e,t,n)=>{"use strict";var r=n(93499);r.V},4857:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Custom repository ${"function"==typeof e?e.name:e.constructor.name} does not have managed entity. Did you forget to specify entity for it @EntityRepository(MyEntity)? `)}}},72287:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Custom repository ${"function"==typeof e?e.name:e.constructor.name} was not found. Did you forgot to put @EntityRepository decorator on it?`)}}},19108:(e,t,n)=>{"use strict";n.d(t,{E:()=>i});var r=n(93499);class i extends r.V{constructor(e,t,n){super();const r="string"==typeof t?t:t.name;this.message=`Data type "${r}" in "${e.entityMetadata.targetName}.${e.propertyName}" is not supported by "${n}" database.`}}},59855:(e,t,n)=>{"use strict";n.d(t,{l:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Driver option (${e}) is not set. Please set it to perform connection to the database.`)}}},50722:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var r=n(93499);class i extends r.V{constructor(e,t){super(`${e} package has not been found installed. Try to install it: npm install ${t} --save`)}}},81719:(e,t,n)=>{"use strict";n.d(t,{p:()=>s});var r=n(93499),i=n(91481),a=n(5471);class s extends r.V{constructor(e,t){super(),this.message=`Could not find any entity of type "${this.stringifyTarget(e)}" matching: ${this.stringifyCriteria(t)}`}stringifyTarget(e){return a.t.isEntitySchema(e)?e.options.name:"function"==typeof e||i.B.isObject(e)&&"name"in e?e.name:e}stringifyCriteria(e){try{return JSON.stringify(e,null,4)}catch(e){}return""+e}}},45200:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var r=n(93499);class i extends r.V{constructor(e,t){super(e),Object.setPrototypeOf(this,i.prototype),this.message=`Property "${e}" was not found in "${t.targetName}". Make sure your query is correct.`}}},94086:(e,t,n)=>{"use strict";n.d(t,{u:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(),1===e.length?this.message=`Relation "${e[0]}" was not found; please check if it is correct and really exists in your entity.`:this.message=`Relations ${e.map((e=>`"${e}"`)).join(", ")} were not found; please check if relations are correct and they exist in your entities.`}}},13149:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Array initializations are not allowed in entity relations. Please remove array initialization (= []) from "${e.entityMetadata.targetName}#${e.propertyPath}". This is ORM requirement to make relations to work properly. Refer docs for more information.`)}}},28412:(e,t,n)=>{"use strict";n.d(t,{s:()=>i});var r=n(93499);class i extends r.V{constructor(){super('Cannot perform insert query because values are not defined. Call "qb.values(...)" method to specify inserted values.')}}},71365:(e,t,n)=>{"use strict";n.d(t,{r:()=>i});var r=n(93499);class i extends r.V{constructor(){super("Your database does not support LIMIT on UPDATE statements.")}}},95601:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});var r=n(93499);class i extends r.V{constructor(){super("Locking not supported on given driver.")}}},3864:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Entity "${e.name}" does not have delete date columns.`)}}},86741:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(93499);class i extends r.V{constructor(e,t=[]){super(`Wrong driver: "${e}" given. Supported drivers are: ${t.map((e=>`"${e}"`)).join(", ")}.`)}}},57719:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Entity "${e.name}" does not have a primary column. Primary column is required to have in all your entities. Use @PrimaryColumn decorator to add a primary column to your entity.`)}}},854:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(93499);class i extends r.V{constructor(e,t){super(`Cannot ${e}, given value must be an entity, instead "${t}" is given.`)}}},63849:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Option "${e}" is not set in your connection options, please define "${e}" option in your connection options or ormconfig.json`)}}},52738:(e,t,n)=>{"use strict";n.d(t,{e:()=>i});var r=n(93499);class i extends r.V{constructor(){super("Entity manager is not using single database connection and cannot be released. Only entity managers created by connection#createEntityManagerWithSingleDatabaseConnection methods have a single database connection and they should be released.")}}},19174:(e,t,n)=>{"use strict";n.d(t,{G:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Entity ${e} does not have version or update date columns.`)}}},86192:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var r=n(93499);class i extends r.V{constructor(){super("RDBMS does not support OFFSET without LIMIT in SELECT statements. You must use limit in conjunction with offset function (or take in conjunction with skip function if you are using pagination).")}}},9772:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});var r=n(93499);class i extends r.V{constructor(){super("The optimistic lock can be used only with getOne() method.")}}},97201:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});var r=n(93499);class i extends r.V{constructor(e,t,n){super(`The optimistic lock on entity ${e} failed, version ${t} was expected, but is actually ${n}.`)}}},54770:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(93499);class i extends r.V{constructor(){super("An open transaction is required for pessimistic lock.")}}},52806:(e,t,n)=>{"use strict";n.d(t,{k:()=>i});var r=n(93499);class i extends r.V{constructor(e,t){super(`Primary column ${e.constructor.name}#${t} cannot be nullable. Its not allowed for primary keys. Try to remove nullable option.`)}}},75672:(e,t,n)=>{"use strict";n.d(t,{C:()=>a});var r=n(91481),i=n(93499);class a extends i.V{constructor(e,t,n){if(super(n.toString().replace(/^error: /,"").replace(/^Error: /,"").replace(/^Request/,"")),this.query=e,this.parameters=t,this.driverError=n,n){const{name:e,...t}=n;r.B.assign(this,{...t})}}}},76320:(e,t,n)=>{"use strict";n.d(t,{E:()=>i});var r=n(93499);class i extends r.V{constructor(){super("Query runner already released. Cannot run queries anymore.")}}},76965:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(93499);class i extends r.V{constructor(){super("Database connection provided by a query runner was already released, cannot continue to use its querying methods anymore.")}}},43025:(e,t,n)=>{"use strict";n.d(t,{J:()=>i});var r=n(93499);class i extends r.V{constructor(){super("OUTPUT or RETURNING clause only supported by Microsoft SQL Server or PostgreSQL or MariaDB databases.")}}},83159:(e,t,n)=>{"use strict";n.d(t,{j:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Removed entity "${e.metadata.name}" is also scheduled for update operation. Make sure you are not updating and removing same object (note that update or remove may be executed by cascade operations).`)}}},45046:(e,t,n)=>{"use strict";n.d(t,{S:()=>i});var r=n(93499);class i extends r.V{constructor(e){super(`Internal error. Subject ${e.metadata.targetName} must have an identifier to perform operation.`)}}},60765:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=n(93499);class i extends r.V{constructor(){super("Transaction is not started yet, start transaction before committing or rolling it back.")}}},93499:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});class r extends Error{get name(){return this.constructor.name}constructor(e){super(e),Object.setPrototypeOf?Object.setPrototypeOf(this,new.target.prototype):this.__proto__=new.target.prototype}}},14268:(e,t,n)=>{"use strict";n.d(t,{E:()=>i});var r=n(93499);class i extends r.V{constructor(){super('Cannot perform update query because update values are not defined. Call "qb.set(...)" method to specify updated values.')}}},26883:(e,t,n)=>{"use strict";n.d(t,{tX:()=>i,Xp:()=>m,IU:()=>d,zB:()=>s.z,lG:()=>f.l,WZ:()=>p.W,Yg:()=>u,hz:()=>h.h,ol:()=>o,ku:()=>a,VR:()=>r.V});var r=n(93499);r.V;n(47037),n(45046);class i extends r.V{constructor(e){super(`Cannot create a "${e}" connection because connection to the database already established.`)}}n(95601),n(55854),n(28028);r.V;n(11866),n(14268);class a extends r.V{constructor(e){super(`Tree repositories are not supported in ${e.options.type} driver.`)}}var s=n(72287);n(60765);class o extends r.V{constructor(){super("Transaction already started for the given connection, commit current transaction before starting a new one.")}}n(81719);var c=n(91481),l=n(5471);class u extends r.V{constructor(e){super(),this.message=`No metadata for "${this.stringifyTarget(e)}" was found.`}stringifyTarget(e){return l.t.isEntitySchema(e)?e.options.name:"function"==typeof e||c.B.isObject(e)&&"name"in e?e.name:e}}n(854),n(97201),n(71365),n(52806);class d extends r.V{constructor(e){super(`Custom entity repository ${"function"==typeof e?e.name:e.constructor.name}  cannot inherit Repository class without entity being set in the @EntityRepository decorator.`)}}var h=n(76965);n(34165),n(4857),n(3864);r.V;n(80601),n(43025);r.V;r.V;n(57719),n(45200),n(86741);var p=n(50722);r.V;n(1430),n(19174),n(28412),n(9772);r.V;var f=n(59855);n(94086);r.V;n(54770);r.V;n(19108),n(13149);r.V;n(75672),n(52738);r.V;r.V;n(83159);r.V;r.V;n(80345),n(76320),n(86192);class m extends r.V{constructor(e){super(`Cannot execute operation on "${e}" connection because connection is not yet established.`)}}n(63849)},41598:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});var r=n(5471);class i{constructor(e,t,n=!0,r=!1,i,a){this["@instanceof"]=Symbol.for("FindOperator"),this._type=e,this._value=t,this._useParameter=n,this._multipleParameters=r,this._getSql=i,this._objectLiteralParameters=a}get useParameter(){return r.t.isFindOperator(this._value)?this._value.useParameter:this._useParameter}get multipleParameters(){return r.t.isFindOperator(this._value)?this._value.multipleParameters:this._multipleParameters}get type(){return this._type}get value(){return r.t.isFindOperator(this._value)?this._value.value:this._value}get objectLiteralParameters(){return r.t.isFindOperator(this._value)?this._value.objectLiteralParameters:this._objectLiteralParameters}get child(){if(r.t.isFindOperator(this._value))return this._value}get getSql(){return r.t.isFindOperator(this._value)?this._value.getSql:this._getSql}}},68625:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var r=n(94086),i=n(86740);class a{static isFindOneOptions(e){const t=e;return t&&(Array.isArray(t.select)||Array.isArray(t.relations)||"object"==typeof t.select||"object"==typeof t.relations||"object"==typeof t.where||"object"==typeof t.join||"object"==typeof t.order||"object"==typeof t.cache||"boolean"==typeof t.cache||"number"==typeof t.cache||"string"==typeof t.comment||"object"==typeof t.lock||"object"==typeof t.loadRelationIds||"boolean"==typeof t.loadRelationIds||"boolean"==typeof t.loadEagerRelations||"boolean"==typeof t.withDeleted||"string"==typeof t.relationLoadStrategy||"boolean"==typeof t.transaction)}static isFindManyOptions(e){const t=e;return t&&(this.isFindOneOptions(t)||"number"==typeof t.skip||"number"==typeof t.take||"string"==typeof t.skip||"string"==typeof t.take)}static extractFindManyOptionsAlias(e){if(this.isFindManyOptions(e)&&e.join)return e.join.alias}static applyOptionsToTreeQueryBuilder(e,t){if(null==t?void 0:t.relations){const n=[...t.relations];if(a.applyRelationsRecursively(e,n,e.expressionMap.mainAlias.name,e.expressionMap.mainAlias.metadata,""),n.length>0)throw new r.u(n)}return e}static applyRelationsRecursively(e,t,n,r,a){let s=[];if(a){const e=new RegExp("^"+a.replace(".","\\.")+"\\.");s=t.filter((t=>t.match(e))).map((t=>t.replace(e,""))).filter((e=>r.findRelationWithPropertyPath(e)))}else s=t.filter((e=>r.findRelationWithPropertyPath(e)));s.forEach((s=>{let o=i.I.buildAlias(e.connection.driver,{joiner:"__"},n,s);const c=n+"."+s;e.leftJoinAndSelect(c,o),t.splice(t.indexOf(a?a+"."+s:s),1);const l=e.expressionMap.joinAttributes.find((e=>e.entityOrProperty===c));this.applyRelationsRecursively(e,t,l.alias.name,l.metadata,a?a+"."+s:s);const u=r.relations.find((e=>e.propertyName===s));u&&this.joinEagerRelations(e,o,u.inverseEntityMetadata)}))}static joinEagerRelations(e,t,n){n.eagerRelations.forEach((n=>{let r=i.I.buildAlias(e.connection.driver,e.connection.namingStrategy.eagerJoinRelationAlias(t,n.propertyPath)),a=!0;for(const i of e.expressionMap.joinAttributes)if(void 0===i.condition&&void 0===i.mapToProperty&&void 0===i.isMappingMany&&"LEFT"===i.direction&&i.entityOrProperty===`${t}.${n.propertyPath}`){a=!1,r=i.alias.name;break}a&&e.leftJoin(t+"."+n.propertyPath,r);let s=!0;for(const t of e.expressionMap.selects)if(void 0===t.aliasName&&void 0===t.virtual&&t.selection===r){s=!1;break}s&&e.addSelect(r),this.joinEagerRelations(e,r,n.inverseEntityMetadata)}))}}},80211:(e,t,n)=>{"use strict";n.d(t,{In:()=>i});var r=n(41598);function i(e){return new r.q("in",e,!0,!0)}},24611:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AuroraMysqlDriver:()=>c,AuroraPostgresDriver:()=>u,BetterSqlite3Driver:()=>y,CockroachDriver:()=>l,MongoDriver:()=>r,MongoEntityManager:()=>a,MongoQueryRunner:()=>i,MongoRepository:()=>s,MysqlDriver:()=>p,OracleDriver:()=>f,PostgresDriver:()=>o,SapDriver:()=>h,SqlServerDriver:()=>d,SqliteDriver:()=>m});class r{}class i{}class a{}class s{}class o{}class c{}class l{}class u{}class d{}class h{}class p{}class f{}class m{}class y{}},62392:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});class r{constructor(e){this["@instanceof"]=Symbol.for("Brackets"),this.whereFactory=e}}},7109:(e,t,n)=>{"use strict";n.d(t,{N:()=>o});var r=n(50504),i=n(38689),a=n(43025),s=n(5471);class o extends r.o{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("DeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createDeleteExpression(),e.trim()}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let r=!1;try{!0===this.expressionMap.useTransaction&&!1===n.isTransactionActive&&(await n.startTransaction(),r=!0),!0===this.expressionMap.callListeners&&this.expressionMap.mainAlias.hasMetadata&&await n.broadcaster.broadcast("BeforeRemove",this.expressionMap.mainAlias.metadata);const a=await n.query(e,t,!0),s=i.P.from(a);return!0===this.expressionMap.callListeners&&this.expressionMap.mainAlias.hasMetadata&&await n.broadcaster.broadcast("AfterRemove",this.expressionMap.mainAlias.metadata),r&&await n.commitTransaction(),s}catch(e){if(r)try{await n.rollbackTransaction()}catch(e){}throw e}finally{n!==this.queryRunner&&await n.release()}}from(e,t){e=s.t.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("delete"))throw new a.J;return this.expressionMap.returning=e,this}createDeleteExpression(){const e=this.getTableName(this.getMainTableName()),t=this.createWhereExpression(),n=this.createReturningExpression("delete");return""===n?`DELETE FROM ${e}${t}`:"mssql"===this.connection.driver.options.type?`DELETE FROM ${e} OUTPUT ${n}${t}`:`DELETE FROM ${e}${t} RETURNING ${n}`}}},98947:(e,t,n)=>{"use strict";n.d(t,{v:()=>f});var r=n(50504),i=n(49015),a=n(43025),s=n(28412),o=n(89547),c=n(1746),l=n(26883),u=n(77981),d=n(86740),h=n(91481),p=n(5471);class f extends r.o{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("InsertQueryBuilder")}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createInsertExpression(),e.trim()}async execute(){const e=this.getValueSets();if(0===e.length)return new i.T;const t=this.obtainQueryRunner();let n=!1;try{if(!0===this.expressionMap.useTransaction&&!1===t.isTransactionActive&&(await t.startTransaction(),n=!0),!0===this.expressionMap.callListeners&&this.expressionMap.mainAlias.hasMetadata){const n=new c.M;e.forEach((e=>{t.broadcaster.broadcastBeforeInsertEvent(n,this.expressionMap.mainAlias.metadata,e)})),await n.wait()}let r=null,a=null;const s=new o.V(t,this.expressionMap),l=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const e of this.expressionMap.returning)l.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(e));!0===this.expressionMap.updateEntity&&this.expressionMap.mainAlias.hasMetadata&&(e.length>1&&"oracle"===this.connection.driver.options.type||(this.expressionMap.extraReturningColumns=this.expressionMap.mainAlias.metadata.getInsertionReturningColumns()),l.push(...this.expressionMap.extraReturningColumns.filter((e=>!l.includes(e))))),l.length>0&&"mssql"===this.connection.driver.options.type&&(r=this.connection.driver.buildTableVariableDeclaration("@OutputTable",l),a="SELECT * FROM @OutputTable");const[u,d]=this.getQueryAndParameters(),h=[r,u,a].filter((e=>null!=e)).join(";\n\n"),p=await t.query(h,d,!0),f=i.T.from(p);if(!0===this.expressionMap.updateEntity&&this.expressionMap.mainAlias.hasMetadata&&await s.insert(f,e),!0===this.expressionMap.callListeners&&this.expressionMap.mainAlias.hasMetadata){const n=new c.M;e.forEach((e=>{t.broadcaster.broadcastAfterInsertEvent(n,this.expressionMap.mainAlias.metadata,e)})),await n.wait()}return n&&await t.commitTransaction(),f}catch(e){if(n)try{await t.rollbackTransaction()}catch(e){}throw e}finally{t!==this.queryRunner&&await t.release()}}into(e,t){e=p.t.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e);return this.expressionMap.setMainAlias(n),this.expressionMap.insertColumns=t||[],this}values(e){return this.expressionMap.valuesSet=e,this}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("insert"))throw new a.J;return this.expressionMap.returning=e,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}onConflict(e){return this.expressionMap.onConflict=e,this}orIgnore(e=!0){return this.expressionMap.onIgnore=!!e,this}orUpdate(e,t,n){return Array.isArray(e)?(this.expressionMap.onUpdate={overwrite:e,conflict:t,skipUpdateIfNoValuesChanged:null==n?void 0:n.skipUpdateIfNoValuesChanged},this):(this.expressionMap.onUpdate={conflict:null==e?void 0:e.conflict_target,columns:null==e?void 0:e.columns,overwrite:null==e?void 0:e.overwrite,skipUpdateIfNoValuesChanged:null==n?void 0:n.skipUpdateIfNoValuesChanged},this)}createInsertExpression(){const e=this.getTableName(this.getMainTableName()),t=this.createValuesExpression(),n="oracle"===this.connection.driver.options.type&&this.getValueSets().length>1?null:this.createReturningExpression("insert"),r=this.createColumnNamesExpression();let i="INSERT ";if((d.I.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type)&&(i+=""+(this.expressionMap.onIgnore?" IGNORE ":"")),i+=`INTO ${e}`,this.alias!==this.getMainTableName()&&d.I.isPostgresFamily(this.connection.driver)&&(i+=` AS "${this.alias}"`),r?i+=`(${r})`:t||!d.I.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type||(i+="()"),n&&"mssql"===this.connection.driver.options.type&&(i+=` OUTPUT ${n}`),t?"oracle"===this.connection.driver.options.type&&this.getValueSets().length>1?i+=` ${t}`:i+=` VALUES ${t}`:d.I.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type?i+=" VALUES ()":i+=" DEFAULT VALUES","on-conflict-do-update"===this.connection.driver.supportedUpsertType){if(this.expressionMap.onIgnore)i+=" ON CONFLICT DO NOTHING ";else if(this.expressionMap.onConflict)i+=` ON CONFLICT ${this.expressionMap.onConflict} `;else if(this.expressionMap.onUpdate){const{overwrite:t,columns:n,conflict:r,skipUpdateIfNoValuesChanged:a}=this.expressionMap.onUpdate;let s="ON CONFLICT";Array.isArray(r)?s+=` ( ${r.map((e=>this.escape(e))).join(", ")} )`:r&&(s+=` ON CONSTRAINT ${this.escape(r)}`),Array.isArray(t)?(i+=` ${s} DO UPDATE SET `,i+=null==t?void 0:t.map((e=>`${this.escape(e)} = EXCLUDED.${this.escape(e)}`)).join(", "),i+=" "):n&&(i+=` ${s} DO UPDATE SET `,i+=n.map((e=>`${this.escape(e)} = :${e}`)).join(", "),i+=" "),Array.isArray(t)&&a&&d.I.isPostgresFamily(this.connection.driver)&&(i+=" WHERE (",i+=t.map((t=>`${e}.${this.escape(t)} IS DISTINCT FROM EXCLUDED.${this.escape(t)}`)).join(" OR "),i+=") ")}}else if("on-duplicate-key-update"===this.connection.driver.supportedUpsertType){if(this.expressionMap.onUpdate){const{overwrite:e,columns:t}=this.expressionMap.onUpdate;Array.isArray(e)?(i+=" ON DUPLICATE KEY UPDATE ",i+=e.map((e=>`${this.escape(e)} = VALUES(${this.escape(e)})`)).join(", "),i+=" "):Array.isArray(t)&&(i+=" ON DUPLICATE KEY UPDATE ",i+=t.map((e=>`${this.escape(e)} = :${e}`)).join(", "),i+=" ")}}else if(this.expressionMap.onUpdate)throw new l.VR("onUpdate is not supported by the current database driver");return n&&(d.I.isPostgresFamily(this.connection.driver)||"oracle"===this.connection.driver.options.type||"cockroachdb"===this.connection.driver.options.type||d.I.isMySQLFamily(this.connection.driver))&&(i+=` RETURNING ${n}`),"mssql"===this.connection.driver.options.type&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.mainAlias.metadata.columns.filter((e=>this.expressionMap.insertColumns.length>0?-1!==this.expressionMap.insertColumns.indexOf(e.propertyPath):e.isInsert)).some((e=>this.isOverridingAutoIncrementBehavior(e)))&&(i=`SET IDENTITY_INSERT ${e} ON; ${i}; SET IDENTITY_INSERT ${e} OFF`),i}getInsertedColumns(){return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.columns.filter((e=>this.expressionMap.insertColumns.length?-1!==this.expressionMap.insertColumns.indexOf(e.propertyPath):!!e.isInsert&&!!(!e.isGenerated||"increment"!==e.generationStrategy||"spanner"===this.connection.driver.options.type||"oracle"===this.connection.driver.options.type||d.I.isSQLiteFamily(this.connection.driver)||d.I.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type||"mssql"===this.connection.driver.options.type&&this.isOverridingAutoIncrementBehavior(e)))):[]}createColumnNamesExpression(){const e=this.getInsertedColumns();if(e.length>0)return e.map((e=>this.escape(e.databaseName))).join(", ");if(!this.expressionMap.mainAlias.hasMetadata&&!this.expressionMap.insertColumns.length){const e=this.getValueSets();if(1===e.length)return Object.keys(e[0]).map((e=>this.escape(e))).join(", ")}return this.expressionMap.insertColumns.map((e=>this.escape(e))).join(", ")}createValuesExpression(){const e=this.getValueSets(),t=this.getInsertedColumns();if(t.length>0){let n="";return e.forEach(((r,i)=>{t.forEach(((a,s)=>{0===s&&("oracle"===this.connection.driver.options.type&&e.length>1||"sap"===this.connection.driver.options.type&&e.length>1?n+=" SELECT ":n+="(");let o=a.getEntityValue(r);if("function"!=typeof o&&(o=this.connection.driver.preparePersistentValue(o,a)),a.isVersion&&void 0===o)n+="1";else if(a.isDiscriminator)n+=this.createParameter(this.expressionMap.mainAlias.metadata.discriminatorValue);else if(a.isGenerated&&"uuid"===a.generationStrategy&&!this.connection.driver.isUUIDGenerationSupported()&&void 0===o)o=(0,u.A)(),n+=this.createParameter(o),i in this.expressionMap.locallyGenerated||(this.expressionMap.locallyGenerated[i]={}),a.setEntityValue(this.expressionMap.locallyGenerated[i],o);else if(void 0===o)"oracle"===this.connection.driver.options.type&&e.length>1||d.I.isSQLiteFamily(this.connection.driver)||"sap"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type?void 0!==a.default&&null!==a.default?n+=this.connection.driver.normalizeDefault(a):n+="NULL":n+="DEFAULT";else if(null===o&&"spanner"===this.connection.driver.options.type)n+="NULL";else if("function"==typeof o)n+=o();else{"mssql"===this.connection.driver.options.type&&(o=this.connection.driver.parametrizeValue(a,o));const e=this.createParameter(o);if(!d.I.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type||-1===this.connection.driver.spatialTypes.indexOf(a.type))d.I.isPostgresFamily(this.connection.driver)&&-1!==this.connection.driver.spatialTypes.indexOf(a.type)?null!=a.srid?n+=`ST_SetSRID(ST_GeomFromGeoJSON(${e}), ${a.srid})::${a.type}`:n+=`ST_GeomFromGeoJSON(${e})::${a.type}`:"mssql"===this.connection.driver.options.type&&-1!==this.connection.driver.spatialTypes.indexOf(a.type)?n+=a.type+"::STGeomFromText("+e+", "+(a.srid||"0")+")":n+=e;else{const t=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";null!=a.srid?n+=`${t}(${e}, ${a.srid})`:n+=`${t}(${e})`}}s===t.length-1?i===e.length-1?"oracle"===this.connection.driver.options.type&&e.length>1?n+=" FROM DUAL ":"sap"===this.connection.driver.options.type&&e.length>1?n+=" FROM dummy ":n+=")":"oracle"===this.connection.driver.options.type&&e.length>1?n+=" FROM DUAL UNION ALL ":"sap"===this.connection.driver.options.type&&e.length>1?n+=" FROM dummy UNION ALL ":n+="), ":n+=", "}))})),"()"===n?"":n}{let t="";return e.forEach(((n,r)=>{Object.keys(n).forEach(((i,a)=>{0===a&&(t+="(");const s=n[i];"function"==typeof s?t+=s():void 0===s?"oracle"===this.connection.driver.options.type&&e.length>1||d.I.isSQLiteFamily(this.connection.driver)||"sap"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type?t+="NULL":t+="DEFAULT":null===s&&"spanner"===this.connection.driver.options.type||(t+=this.createParameter(s)),a===Object.keys(n).length-1?r===e.length-1?t+=")":t+="), ":t+=", "}))})),"()"===t?"":t}}getValueSets(){if(Array.isArray(this.expressionMap.valuesSet))return this.expressionMap.valuesSet;if(h.B.isObject(this.expressionMap.valuesSet))return[this.expressionMap.valuesSet];throw new s.s}isOverridingAutoIncrementBehavior(e){return e.isPrimary&&e.isGenerated&&"increment"===e.generationStrategy&&this.getValueSets().some((t=>void 0!==e.getEntityValue(t)&&null!==e.getEntityValue(t)))}}},29333:(e,t,n)=>{"use strict";n.d(t,{L:()=>o});var r=n(77253),i=n(91481),a=n(26883),s=n(86740);class o{constructor(e,t,n){this.connection=e,this.queryExpressionMap=t,this.isSelectedEvaluated=!1,this.relationEvaluated=!1,i.B.assign(this,n||{})}get isMany(){return void 0!==this.isMappingMany?this.isMappingMany:!!this.relation&&(this.relation.isManyToMany||this.relation.isOneToMany)}get isSelected(){if(!this.isSelectedEvaluated){let e=()=>{for(const e of this.queryExpressionMap.selects){if(e.selection===this.alias.name)return!0;if(this.metadata&&this.metadata.columns.find((t=>e.selection===this.alias.name+"."+t.propertyPath)))return!0}return!1};this.isSelectedCache=e(),this.isSelectedEvaluated=!0}return this.isSelectedCache}get tablePath(){return this.metadata?this.metadata.tablePath:this.entityOrProperty}get parentAlias(){if(r.n.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(0,this.entityOrProperty.indexOf("."))}get relationPropertyPath(){if(r.n.isAliasProperty(this.entityOrProperty))return this.entityOrProperty.substr(this.entityOrProperty.indexOf(".")+1)}get relation(){if(!this.relationEvaluated){let e=()=>{if(!r.n.isAliasProperty(this.entityOrProperty))return;const e=this.queryExpressionMap.findAliasByName(this.parentAlias);let t=e.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(t)return t;if(e.metadata.parentEntityMetadata&&(t=e.metadata.parentEntityMetadata.findRelationWithPropertyPath(this.relationPropertyPath),t))return t;throw new a.VR(`Relation with property path ${this.relationPropertyPath} in entity was not found.`)};this.relationCache=e.bind(this)(),this.relationEvaluated=!0}return this.relationCache}get metadata(){return this.relation?this.relation.inverseEntityMetadata:this.connection.hasMetadata(this.entityOrProperty)?this.connection.getMetadata(this.entityOrProperty):void 0}get junctionAlias(){if(!this.relation)throw new a.VR("Cannot get junction table for join without relation.");return this.relation.isOwning?s.I.buildAlias(this.connection.driver,this.parentAlias,this.alias.name):s.I.buildAlias(this.connection.driver,this.alias.name,this.parentAlias)}get mapToPropertyParentAlias(){if(this.mapToProperty)return this.mapToProperty.split(".")[0]}get mapToPropertyPropertyName(){if(this.mapToProperty)return this.mapToProperty.split(".")[1]}}},50504:(e,t,n)=>{"use strict";n.d(t,{o:()=>y});var r=n(91481),i=n(26883);class a{constructor(e){r.B.assign(this,e||{})}get target(){return this.metadata.target}get hasMetadata(){return!!this._metadata}set metadata(e){this._metadata=e}get metadata(){if(!this._metadata)throw new i.VR(`Cannot get entity metadata for the given alias "${this.name}"`);return this._metadata}}var s=n(29333),o=n(34851),c=n(25579);class l{constructor(e){this.connection=e,this.relationLoadStrategy="join",this.queryEntity=!1,this.aliases=[],this.queryType="select",this.selects=[],this.maxExecutionTime=0,this.selectDistinct=!1,this.selectDistinctOn=[],this.extraReturningColumns=[],this.onConflict="",this.onIgnore=!1,this.joinAttributes=[],this.relationIdAttributes=[],this.relationCountAttributes=[],this.wheres=[],this.havings=[],this.orderBys={},this.groupBys=[],this.withDeleted=!1,this.parameters={},this.disableEscaping=!0,this.enableRelationIdValues=!1,this.extraAppendedAndWhereCondition="",this.subQuery=!1,this.aliasNamePrefixingEnabled=!0,this.cache=!1,this.options=[],this.insertColumns=[],this.whereEntities=[],this.updateEntity=!0,this.callListeners=!0,this.useTransaction=!1,this.nativeParameters={},this.locallyGenerated={},this.commonTableExpressions=[],e.options.relationLoadStrategy&&(this.relationLoadStrategy=e.options.relationLoadStrategy)}get allOrderBys(){if(!Object.keys(this.orderBys).length&&this.mainAlias.hasMetadata&&-1===this.options.indexOf("disable-global-order")){const e=this.mainAlias.metadata.orderBy||{};return Object.keys(e).reduce(((t,n)=>(t[this.mainAlias.name+"."+n]=e[n],t)),{})}return this.orderBys}setMainAlias(e){return this.mainAlias=e,e}createAlias(e){let t=e.name;!t&&e.tablePath&&(t=e.tablePath),t||"function"!=typeof e.target||(t=e.target.name),t||"string"!=typeof e.target||(t=e.target);const n=new a;return n.type=e.type,t&&(n.name=t),e.metadata&&(n.metadata=e.metadata),e.target&&!n.hasMetadata&&(n.metadata=this.connection.getMetadata(e.target)),e.tablePath&&(n.tablePath=e.tablePath),e.subQuery&&(n.subQuery=e.subQuery),this.aliases.push(n),n}findAliasByName(e){const t=this.aliases.find((t=>t.name===e));if(!t)throw new i.VR(`"${e}" alias was not found. Maybe you forgot to join it?`);return t}findColumnByAliasExpression(e){const[t,n]=e.split(".");return this.findAliasByName(t).metadata.findColumnWithPropertyName(n)}get relationMetadata(){if(!this.mainAlias)throw new i.VR("Entity to work with is not specified!");const e=this.mainAlias.metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new i.VR(`Relation ${this.relationPropertyPath} was not found in entity ${this.mainAlias.name}`);return e}clone(){const e=new l(this.connection);return e.queryType=this.queryType,e.selects=this.selects.map((e=>e)),e.maxExecutionTime=this.maxExecutionTime,e.selectDistinct=this.selectDistinct,e.selectDistinctOn=this.selectDistinctOn,this.aliases.forEach((t=>e.aliases.push(new a(t)))),e.relationLoadStrategy=this.relationLoadStrategy,e.mainAlias=this.mainAlias,e.valuesSet=this.valuesSet,e.returning=this.returning,e.onConflict=this.onConflict,e.onIgnore=this.onIgnore,e.onUpdate=this.onUpdate,e.joinAttributes=this.joinAttributes.map((e=>new s.L(this.connection,this,e))),e.relationIdAttributes=this.relationIdAttributes.map((e=>new o.q(this,e))),e.relationCountAttributes=this.relationCountAttributes.map((e=>new c.m(this,e))),e.wheres=this.wheres.map((e=>({...e}))),e.havings=this.havings.map((e=>({...e}))),e.orderBys=Object.assign({},this.orderBys),e.groupBys=this.groupBys.map((e=>e)),e.limit=this.limit,e.offset=this.offset,e.skip=this.skip,e.take=this.take,e.lockMode=this.lockMode,e.onLocked=this.onLocked,e.lockVersion=this.lockVersion,e.lockTables=this.lockTables,e.withDeleted=this.withDeleted,e.parameters=Object.assign({},this.parameters),e.disableEscaping=this.disableEscaping,e.enableRelationIdValues=this.enableRelationIdValues,e.extraAppendedAndWhereCondition=this.extraAppendedAndWhereCondition,e.subQuery=this.subQuery,e.aliasNamePrefixingEnabled=this.aliasNamePrefixingEnabled,e.cache=this.cache,e.cacheId=this.cacheId,e.cacheDuration=this.cacheDuration,e.relationPropertyPath=this.relationPropertyPath,e.of=this.of,e.insertColumns=this.insertColumns,e.whereEntities=this.whereEntities,e.updateEntity=this.updateEntity,e.callListeners=this.callListeners,e.useTransaction=this.useTransaction,e.nativeParameters=Object.assign({},this.nativeParameters),e.comment=this.comment,e.commonTableExpressions=this.commonTableExpressions.map((e=>({alias:e.alias,queryBuilder:"string"==typeof e.queryBuilder?e.queryBuilder:e.queryBuilder.clone(),options:e.options}))),e}}var u=n(62392),d=n(41598),h=n(80211),p=n(45200),f=n(5471);const m=/[.*+\-?^${}()|[\]\\]/g;class y{constructor(e,t){this["@instanceof"]=Symbol.for("QueryBuilder"),this.parameterIndex=0,f.t.isQueryBuilder(e)?(this.connection=e.connection,this.queryRunner=e.queryRunner,this.expressionMap=e.expressionMap.clone()):(this.connection=e,this.queryRunner=t,this.expressionMap=new l(this.connection))}get alias(){if(!this.expressionMap.mainAlias)throw new i.VR("Main alias is not set");return this.expressionMap.mainAlias.name}select(e,t){this.expressionMap.queryType="select",Array.isArray(e)?this.expressionMap.selects=e.map((e=>({selection:e}))):e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);const r=n(17915).w;return f.t.isSelectQueryBuilder(this)?this:new r(this)}insert(){this.expressionMap.queryType="insert";const e=n(98947).v;return f.t.isInsertQueryBuilder(this)?this:new e(this)}update(e,t){const r=t||e;if("function"==typeof(e=f.t.isEntitySchema(e)?e.options.name:e)||"string"==typeof e){const t=this.createFromAlias(e);this.expressionMap.setMainAlias(t)}this.expressionMap.queryType="update",this.expressionMap.valuesSet=r;const i=n(61035).b;return f.t.isUpdateQueryBuilder(this)?this:new i(this)}delete(){this.expressionMap.queryType="delete";const e=n(7109).N;return f.t.isDeleteQueryBuilder(this)?this:new e(this)}softDelete(){this.expressionMap.queryType="soft-delete";const e=n(79081).x;return f.t.isSoftDeleteQueryBuilder(this)?this:new e(this)}restore(){this.expressionMap.queryType="restore";const e=n(79081).x;return f.t.isSoftDeleteQueryBuilder(this)?this:new e(this)}relation(e,t){const r=2===arguments.length?e:void 0,i=2===arguments.length?t:e;if(this.expressionMap.queryType="relation",this.expressionMap.relationPropertyPath=i,r){const e=this.createFromAlias(r);this.expressionMap.setMainAlias(e)}const a=n(29225).M;return f.t.isRelationQueryBuilder(this)?this:new a(this)}hasRelation(e,t){const n=this.connection.getMetadata(e);return(Array.isArray(t)?t:[t]).every((e=>!!n.findRelationWithPropertyPath(e)))}hasParameter(e){var t;return(null===(t=this.parentQueryBuilder)||void 0===t?void 0:t.hasParameter(e))||e in this.expressionMap.parameters}setParameter(e,t){if("function"==typeof t)throw new i.VR(`Function parameter isn't supported in the parameters. Please check "${e}" parameter.`);if(!e.match(/^([A-Za-z0-9_.]+)$/))throw new i.VR("QueryBuilder parameter keys may only contain numbers, letters, underscores, or periods.");return this.parentQueryBuilder&&this.parentQueryBuilder.setParameter(e,t),this.expressionMap.parameters[e]=t,this}setParameters(e){for(const[t,n]of Object.entries(e))this.setParameter(t,n);return this}createParameter(e){let t;do{t="orm_param_"+this.parameterIndex++}while(this.hasParameter(t));return this.setParameter(t,e),`:${t}`}setNativeParameters(e){return this.parentQueryBuilder&&this.parentQueryBuilder.setNativeParameters(e),Object.keys(e).forEach((t=>{this.expressionMap.nativeParameters[t]=e[t]})),this}getParameters(){const e=Object.assign({},this.expressionMap.parameters);if(this.expressionMap.mainAlias&&this.expressionMap.mainAlias.hasMetadata){const t=this.expressionMap.mainAlias.metadata;if(t.discriminatorColumn&&t.parentEntityMetadata){const n=t.childEntityMetadatas.filter((e=>e.discriminatorColumn)).map((e=>e.discriminatorValue));n.push(t.discriminatorValue),e.discriminatorColumnValues=n}}return e}printSql(){const[e,t]=this.getQueryAndParameters();return this.connection.logger.logQuery(e,t),this}getSql(){return this.getQueryAndParameters()[0]}getQueryAndParameters(){const e=this.getQuery(),t=this.getParameters();return this.connection.driver.escapeQueryWithParameters(e,t,this.expressionMap.nativeParameters)}async execute(){const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();try{return await n.query(e,t)}finally{n!==this.queryRunner&&await n.release()}}createQueryBuilder(){return new this.constructor(this.connection,this.queryRunner)}clone(){return new this.constructor(this)}comment(e){return this.expressionMap.comment=e,this}disableEscaping(){return this.expressionMap.disableEscaping=!1,this}escape(e){return this.expressionMap.disableEscaping?this.connection.driver.escape(e):e}setQueryRunner(e){return this.queryRunner=e,this}callListeners(e){return this.expressionMap.callListeners=e,this}useTransaction(e){return this.expressionMap.useTransaction=e,this}addCommonTableExpression(e,t,n){return this.expressionMap.commonTableExpressions.push({queryBuilder:e,alias:t,options:n||{}}),this}getTableName(e){return e.split(".").map((e=>""===e?e:this.escape(e))).join(".")}getMainTableName(){if(!this.expressionMap.mainAlias)throw new i.VR('Entity where values should be inserted is not specified. Call "qb.into(entity)" method to specify it.');return this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata.tablePath:this.expressionMap.mainAlias.tablePath}createFromAlias(e,t){if(this.connection.hasMetadata(e)){const n=this.connection.getMetadata(e);return this.expressionMap.createAlias({type:"from",name:t,metadata:this.connection.getMetadata(e),tablePath:n.tablePath})}{if("string"==typeof e){const n="("===e.substr(0,1)&&")"===e.substr(-1);return this.expressionMap.createAlias({type:"from",name:t,tablePath:n?void 0:e,subQuery:n?e:void 0})}const n=e(this.subQuery());this.setParameters(n.getParameters());const r=n.getQuery();return this.expressionMap.createAlias({type:"from",name:t,subQuery:r})}}replacePropertyNames(e){for(const n of this.expressionMap.aliases){if(!n.hasMetadata)continue;const r=this.expressionMap.aliasNamePrefixingEnabled?`${n.name}.`:"",i=this.expressionMap.aliasNamePrefixingEnabled?`${this.escape(n.name)}.`:"",a={};for(const e of n.metadata.relations)e.joinColumns.length>0&&(a[e.propertyPath]=e.joinColumns[0].databaseName);for(const e of n.metadata.relations)for(const t of[...e.joinColumns,...e.inverseJoinColumns]){const n=`${e.propertyPath}.${t.referencedColumn.propertyPath}`;a[n]=t.databaseName}for(const e of n.metadata.columns)a[e.databaseName]=e.databaseName;for(const e of n.metadata.columns)a[e.propertyName]=e.databaseName;for(const e of n.metadata.columns)a[e.propertyPath]=e.databaseName;e=e.replace(new RegExp(`([ =(]|^.{0})${t=r,t.replace(m,"\\$&")}([^ =(),]+)(?=[ =),]|.{0}$)`,"gm"),((e,t,n)=>a[n]?`${t}${i}${this.escape(a[n])}`:e))}var t;return e}createComment(){return this.expressionMap.comment?`/* ${this.expressionMap.comment.replace("*/","")} */ `:""}createWhereExpression(){const e=[],t=this.createWhereClausesExpression(this.expressionMap.wheres);if(t.length>0&&"1=1"!==t&&e.push(this.replacePropertyNames(t)),this.expressionMap.mainAlias.hasMetadata){const t=this.expressionMap.mainAlias.metadata;if("select"===this.expressionMap.queryType&&!this.expressionMap.withDeleted&&t.deleteDateColumn){const n=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+t.deleteDateColumn.propertyName:t.deleteDateColumn.propertyName,r=`${this.replacePropertyNames(n)} IS NULL`;e.push(r)}if(t.discriminatorColumn&&t.parentEntityMetadata){const n=this.expressionMap.aliasNamePrefixingEnabled?this.expressionMap.mainAlias.name+"."+t.discriminatorColumn.databaseName:t.discriminatorColumn.databaseName,r=`${this.replacePropertyNames(n)} IN (:...discriminatorColumnValues)`;e.push(r)}}if(this.expressionMap.extraAppendedAndWhereCondition){const t=this.replacePropertyNames(this.expressionMap.extraAppendedAndWhereCondition);e.push(t)}return e.length?1===e.length?` WHERE ${e[0]}`:` WHERE ( ${e.join(" ) AND ( ")} )`:""}createReturningExpression(e){const t=this.getReturningColumns(),n=this.connection.driver;if("string"!=typeof this.expressionMap.returning&&this.expressionMap.extraReturningColumns.length>0&&n.isReturningSqlSupported(e)&&t.push(...this.expressionMap.extraReturningColumns.filter((e=>-1===t.indexOf(e)))),t.length){let e=t.map((e=>{const t=this.escape(e.databaseName);return"mssql"===n.options.type?"insert"===this.expressionMap.queryType||"update"===this.expressionMap.queryType||"soft-delete"===this.expressionMap.queryType||"restore"===this.expressionMap.queryType?"INSERTED."+t:this.escape(this.getMainTableName())+"."+t:t})).join(", ");return"oracle"===n.options.type&&(e+=" INTO "+t.map((e=>this.createParameter({type:n.columnTypeToNativeParameter(e.type),dir:n.oracle.BIND_OUT}))).join(", ")),"mssql"===n.options.type&&("insert"!==this.expressionMap.queryType&&"update"!==this.expressionMap.queryType||(e+=" INTO @OutputTable")),e}return"string"==typeof this.expressionMap.returning?this.expressionMap.returning:""}getReturningColumns(){const e=[];return Array.isArray(this.expressionMap.returning)&&this.expressionMap.returning.forEach((t=>{this.expressionMap.mainAlias.hasMetadata&&e.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(t))})),e}createWhereClausesExpression(e){return e.map(((e,t)=>{const n=this.createWhereConditionExpression(e.condition);switch(e.type){case"and":return(t>0?"AND ":"")+n;case"or":return(t>0?"OR ":"")+n}return n})).join(" ").trim()}createWhereConditionExpression(e,t=!1){if("string"==typeof e)return e;if(Array.isArray(e))return 0===e.length?"1=1":1!==e.length||t?"("+this.createWhereClausesExpression(e)+")":this.createWhereClausesExpression(e);const{driver:n}=this.connection;switch(e.operator){case"lessThan":return`${e.parameters[0]} < ${e.parameters[1]}`;case"lessThanOrEqual":return`${e.parameters[0]} <= ${e.parameters[1]}`;case"arrayContains":return`${e.parameters[0]} @> ${e.parameters[1]}`;case"arrayContainedBy":return`${e.parameters[0]} <@ ${e.parameters[1]}`;case"arrayOverlap":return`${e.parameters[0]} && ${e.parameters[1]}`;case"moreThan":return`${e.parameters[0]} > ${e.parameters[1]}`;case"moreThanOrEqual":return`${e.parameters[0]} >= ${e.parameters[1]}`;case"notEqual":return`${e.parameters[0]} != ${e.parameters[1]}`;case"equal":return`${e.parameters[0]} = ${e.parameters[1]}`;case"ilike":return"postgres"===n.options.type||"cockroachdb"===n.options.type?`${e.parameters[0]} ILIKE ${e.parameters[1]}`:`UPPER(${e.parameters[0]}) LIKE UPPER(${e.parameters[1]})`;case"like":return`${e.parameters[0]} LIKE ${e.parameters[1]}`;case"between":return`${e.parameters[0]} BETWEEN ${e.parameters[1]} AND ${e.parameters[2]}`;case"in":return e.parameters.length<=1?"0=1":`${e.parameters[0]} IN (${e.parameters.slice(1).join(", ")})`;case"any":return`${e.parameters[0]} = ANY(${e.parameters[1]})`;case"isNull":return`${e.parameters[0]} IS NULL`;case"not":return`NOT(${this.createWhereConditionExpression(e.condition)})`;case"brackets":return`${this.createWhereConditionExpression(e.condition,!0)}`}throw new TypeError(`Unsupported FindOperator ${d.q.constructor.name}`)}createCteExpression(){if(!this.hasCommonTableExpressions())return"";const e=this.connection.driver.cteCapabilities.requiresRecursiveHint;return"WITH "+this.expressionMap.commonTableExpressions.map((t=>{const n="string"==typeof t.queryBuilder?t.queryBuilder:t.queryBuilder.getQuery();if("string"!=typeof t.queryBuilder){if(t.queryBuilder.hasCommonTableExpressions())throw new i.VR(`Nested CTEs aren't supported (CTE: ${t.alias})`);if(!this.connection.driver.cteCapabilities.writable&&!f.t.isSelectQueryBuilder(t.queryBuilder))throw new i.VR(`Only select queries are supported in CTEs in ${this.connection.options.type} (CTE: ${t.alias})`);this.setParameters(t.queryBuilder.getParameters())}let r=this.escape(t.alias);if(t.options.columnNames){const e=t.options.columnNames.map((e=>this.escape(e)));if(f.t.isSelectQueryBuilder(t.queryBuilder)&&t.queryBuilder.expressionMap.selects.length&&t.options.columnNames.length!==t.queryBuilder.expressionMap.selects.length)throw new i.VR(`cte.options.columnNames length (${t.options.columnNames.length}) doesn't match subquery select list length ${t.queryBuilder.expressionMap.selects.length} (CTE: ${t.alias})`);r+=`(${e.join(", ")})`}return[t.options.recursive&&e?"RECURSIVE":"",r,t.options.materialized&&this.connection.driver.cteCapabilities.materializedHint?"MATERIALIZED":"","AS",`(${n})`].filter(Boolean).join(" ")})).join(", ")+" "}getWhereInIdsCondition(e){const t=this.expressionMap.mainAlias.metadata,n=(Array.isArray(e)?e:[e]).map((e=>t.ensureEntityIdMap(e)));if(!t.hasMultiplePrimaryKeys){const e=t.primaryColumns[0];if(!e.transformer&&!e.relationMetadata&&!e.embeddedMetadata)return{[e.propertyName]:(0,h.In)(n.map((t=>e.getEntityValue(t,!1))))}}return new u.A((e=>{for(const t of n)e.orWhere(new u.A((e=>e.where(t))))}))}findColumnsForPropertyPath(e){let t=this.expressionMap.mainAlias;const n=[],r=e.split(".");for(;r.length>1;){const e=r[0];if(!(null==t?void 0:t.hasMetadata))break;if(t.metadata.hasEmbeddedWithPropertyPath(e))r.unshift(`${r.shift()}.${r.shift()}`);else{if(!t.metadata.hasRelationWithPropertyPath(e))break;{const i=this.expressionMap.joinAttributes.find((t=>t.relationPropertyPath===e));if(!(null==i?void 0:i.alias)){const t=n.length>0?`${n.join(".")}.${e}`:e;throw new Error(`Cannot find alias for relation at ${t}`)}t=i.alias,n.push(...e.split(".")),r.shift()}}}if(!t)throw new Error(`Cannot find alias for property ${e}`);const i=r.join("."),a=t.metadata.findColumnsWithPropertyPath(i);if(!a.length)throw new p.K(e,t.metadata);return[t,n,a]}createPropertyPath(e,t,n=""){const r=[];for(const i of Object.keys(t)){const a=n?`${n}.${i}`:i;if(null===t[i]||"object"!=typeof t[i]||f.t.isFindOperator(t[i]))r.push(a);else if(e.hasEmbeddedWithPropertyPath(a)){const n=this.createPropertyPath(e,t[i],a);r.push(...n)}else if(e.hasRelationWithPropertyPath(a)){const n=e.findRelationWithPropertyPath(a);if("one-to-one"===n.relationType||"many-to-one"===n.relationType){const e=n.joinColumns.map((e=>e.referencedColumn)).filter((e=>!!e));if(e.length>0&&e.every((e=>e.getEntityValue(t[i],!1)))){r.push(a);continue}}if("one-to-many"===n.relationType||"many-to-many"===n.relationType)throw new Error(`Cannot query across ${n.relationType} for property ${a}`);const s=n.inverseEntityMetadata.primaryColumns;if(s.length>0&&s.every((e=>e.getEntityValue(t[i],!1)))){const e=s.map((e=>`${a}.${e.propertyPath}`));r.push(...e);continue}const o=this.createPropertyPath(n.inverseEntityMetadata,t[i]).map((e=>`${a}.${e}`));r.push(...o)}else r.push(a)}return r}*getPredicates(e){if(this.expressionMap.mainAlias.hasMetadata){const t=this.createPropertyPath(this.expressionMap.mainAlias.metadata,e);for(const n of t){const[t,r,i]=this.findColumnsForPropertyPath(n);for(const n of i){let i=e;for(const e of r){if(!i||!(e in i)){i={};break}i=i[e]}const a=this.expressionMap.aliasNamePrefixingEnabled?`${t.name}.${n.propertyPath}`:n.propertyPath,s=n.getEntityValue(i,!0);yield[a,s]}}}else for(const t of Object.keys(e)){const n=e[t],r=this.expressionMap.aliasNamePrefixingEnabled?`${this.alias}.${t}`:t;yield[r,n]}}getWherePredicateCondition(e,t){if(f.t.isFindOperator(t)){let n=[];if(t.useParameter)if(t.objectLiteralParameters)this.setParameters(t.objectLiteralParameters);else if(t.multipleParameters)for(const e of t.value)n.push(this.createParameter(e));else n.push(this.createParameter(t.value));return"raw"===t.type?t.getSql?t.getSql(e):{operator:"equal",parameters:[e,t.value]}:"not"===t.type?t.child?{operator:t.type,condition:this.getWherePredicateCondition(e,t.child)}:{operator:"notEqual",parameters:[e,...n]}:{operator:t.type,parameters:[e,...n]}}return{operator:"equal",parameters:[e,this.createParameter(t)]}}getWhereCondition(e){if("string"==typeof e)return e;if(f.t.isBrackets(e)){const t=this.createQueryBuilder();return t.parentQueryBuilder=this,t.expressionMap.mainAlias=this.expressionMap.mainAlias,t.expressionMap.aliasNamePrefixingEnabled=this.expressionMap.aliasNamePrefixingEnabled,t.expressionMap.parameters=this.expressionMap.parameters,t.expressionMap.nativeParameters=this.expressionMap.nativeParameters,t.expressionMap.wheres=[],e.whereFactory(t),{operator:f.t.isNotBrackets(e)?"not":"brackets",condition:t.expressionMap.wheres}}if("function"==typeof e)return e(this);const t=Array.isArray(e)?e:[e],n=[];for(const e of t){const t=[];for(const[n,r]of this.getPredicates(e))t.push({type:"and",condition:this.getWherePredicateCondition(n,r)});n.push({type:"or",condition:t})}return 1===n.length?n[0].condition:n}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner()}hasCommonTableExpressions(){return this.expressionMap.commonTableExpressions.length>0}}},77253:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});class r{static isAliasProperty(e){if("string"!=typeof e||-1===e.indexOf("."))return!1;const[t,n]=e.split(".");return!(!t||!n)&&(-1===e.indexOf("(")&&-1===e.indexOf(")"))}}},29225:(e,t,n)=>{"use strict";n.d(t,{M:()=>c});var r=n(50504),i=n(26883),a=n(91481);class s{constructor(e,t){this.queryBuilder=e,this.expressionMap=t}async update(e){const t=this.expressionMap.relationMetadata;if(t.isManyToOne||t.isOneToOneOwner){const n=t.joinColumns.reduce(((t,n)=>{const r=a.B.isObject(e)?n.referencedColumn.getEntityValue(e):e;return n.setEntityValue(t,r),t}),{});if(!this.expressionMap.of||Array.isArray(this.expressionMap.of)&&!this.expressionMap.of.length)return;await this.queryBuilder.createQueryBuilder().update(t.entityMetadata.target).set(n).whereInIds(this.expressionMap.of).execute()}else if((t.isOneToOneNotOwner||t.isOneToMany)&&null===e){const e={};t.inverseRelation.joinColumns.forEach((t=>{e[t.propertyName]=null}));const n=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],r={},i=[];n.forEach(((e,n)=>{t.inverseRelation.joinColumns.map(((t,s)=>{const o="joinColumn_"+n+"_"+s;r[o]=a.B.isObject(e)?t.referencedColumn.getEntityValue(e):e,i.push(`${t.propertyPath} = :${o}`)}))}));const s=i.map((e=>"("+e+")")).join(" OR ");if(!s)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(e).where(s).setParameters(r).execute()}else if(t.isOneToOneNotOwner||t.isOneToMany){if(Array.isArray(this.expressionMap.of))throw new i.VR("You cannot update relations of multiple entities with the same related object. Provide a single entity into .of method.");const n=this.expressionMap.of,r=t.inverseRelation.joinColumns.reduce(((e,t)=>{const r=a.B.isObject(n)?t.referencedColumn.getEntityValue(n):n;return t.setEntityValue(e,r),e}),{});if(!e||Array.isArray(e)&&!e.length)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(r).whereInIds(e).execute()}else{const n=t.junctionEntityMetadata,r=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],i=Array.isArray(e)?e:[e],s=t.isManyToManyOwner?r:i,o=t.isManyToManyOwner?i:r,c=[];if(s.forEach((e=>{o.forEach((t=>{const r={};n.ownerColumns.forEach((t=>{r[t.databaseName]=a.B.isObject(e)?t.referencedColumn.getEntityValue(e):e})),n.inverseColumns.forEach((e=>{r[e.databaseName]=a.B.isObject(t)?e.referencedColumn.getEntityValue(t):t})),c.push(r)}))})),!c.length)return;"oracle"===this.queryBuilder.connection.driver.options.type||"sap"===this.queryBuilder.connection.driver.options.type?await Promise.all(c.map((e=>this.queryBuilder.createQueryBuilder().insert().into(n.tableName).values(e).execute()))):await this.queryBuilder.createQueryBuilder().insert().into(n.tableName).values(c).execute()}}}class o{constructor(e,t){this.queryBuilder=e,this.expressionMap=t}async remove(e){const t=this.expressionMap.relationMetadata;if(t.isOneToMany){const n=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],r=Array.isArray(e)?e:[e],i={};t.inverseRelation.joinColumns.forEach((e=>{i[e.propertyName]=null}));const s={},o=[];n.forEach(((e,n)=>{o.push(...r.map(((r,i)=>[...t.inverseRelation.joinColumns.map(((t,r)=>{const o="joinColumn_"+n+"_"+i+"_"+r;return s[o]=a.B.isObject(e)?t.referencedColumn.getEntityValue(e):e,`${t.propertyPath} = :${o}`})),...t.inverseRelation.entityMetadata.primaryColumns.map(((e,t)=>{const n="primaryColumn_"+i+"_"+i+"_"+t;return s[n]=a.B.isObject(r)?e.getEntityValue(r):r,`${e.propertyPath} = :${n}`}))].join(" AND "))))}));const c=o.map((e=>"("+e+")")).join(" OR ");if(!c)return;await this.queryBuilder.createQueryBuilder().update(t.inverseEntityMetadata.target).set(i).where(c).setParameters(s).execute()}else{const n=t.junctionEntityMetadata,r=Array.isArray(this.expressionMap.of)?this.expressionMap.of:[this.expressionMap.of],i=Array.isArray(e)?e:[e],s=t.isManyToManyOwner?r:i,o=t.isManyToManyOwner?i:r,c={},l=[];s.forEach(((e,t)=>{l.push(...o.map(((r,i)=>[...n.ownerColumns.map(((n,r)=>{const s="firstValue_"+t+"_"+i+"_"+r;return c[s]=a.B.isObject(e)?n.referencedColumn.getEntityValue(e):e,`${n.databaseName} = :${s}`})),...n.inverseColumns.map(((e,n)=>{const s="secondValue_"+t+"_"+i+"_"+n;return c[s]=a.B.isObject(r)?e.referencedColumn.getEntityValue(r):r,`${e.databaseName} = :${s}`}))].join(" AND "))))}));const u=l.map((e=>"("+e+")")).join(" OR ");await this.queryBuilder.createQueryBuilder().delete().from(n.tableName).where(u).setParameters(c).execute()}}}class c extends r.o{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("RelationQueryBuilder")}getQuery(){return""}of(e){return this.expressionMap.of=e,this}async set(e){const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new i.VR("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToMany||t.isOneToMany)throw new i.VR(`Set operation is only supported for many-to-one and one-to-one relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .add() method instead.`);if(t.joinColumns&&t.joinColumns.length>1&&(!a.B.isObject(e)||Object.keys(e).length<t.joinColumns.length))throw new i.VR('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new s(this,this.expressionMap).update(e)}async add(e){if(Array.isArray(e)&&0===e.length)return;const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new i.VR("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new i.VR(`Add operation is only supported for many-to-many and one-to-many relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .set() method instead.`);if(t.joinColumns&&t.joinColumns.length>1&&(!a.B.isObject(e)||Object.keys(e).length<t.joinColumns.length))throw new i.VR('Value to be set into the relation must be a map of relation ids, for example: .set({ firstName: "...", lastName: "..." })');return new s(this,this.expressionMap).update(e)}async remove(e){if(Array.isArray(e)&&0===e.length)return;const t=this.expressionMap.relationMetadata;if(!this.expressionMap.of)throw new i.VR("Entity whose relation needs to be set is not set. Use .of method to define whose relation you want to set.");if(t.isManyToOne||t.isOneToOne)throw new i.VR(`Add operation is only supported for many-to-many and one-to-many relations. However given "${t.propertyPath}" has ${t.relationType} relation. Use .set(null) method instead.`);return new o(this,this.expressionMap).remove(e)}async addAndRemove(e,t){await this.remove(t),await this.add(e)}async loadOne(){return this.loadMany().then((e=>e[0]))}async loadMany(){let e=this.expressionMap.of;if(!a.B.isObject(e)){const t=this.expressionMap.mainAlias.metadata;if(t.hasMultiplePrimaryKeys)throw new i.VR("Cannot load entity because only one primary key was specified, however entity contains multiple primary keys");e=t.primaryColumns[0].createValueMap(e)}return this.connection.relationLoader.load(this.expressionMap.relationMetadata,e,this.queryRunner)}}},89547:(e,t,n)=>{"use strict";n.d(t,{V:()=>i});var r=n(26883);class i{constructor(e,t){this.queryRunner=e,this.expressionMap=t}async update(e,t){const n=this.expressionMap.mainAlias.metadata;await Promise.all(t.map((async(t,i)=>{if(this.queryRunner.connection.driver.isReturningSqlSupported("update")){"oracle"===this.queryRunner.connection.driver.options.type&&Array.isArray(e.raw)&&this.expressionMap.extraReturningColumns.length>0&&(e.raw=e.raw.reduce(((e,t,n)=>(e[this.expressionMap.extraReturningColumns[n].databaseName]=t[0],e)),{}));const r=Array.isArray(e.raw)?e.raw[i]:e.raw,a=this.queryRunner.connection.driver.createGeneratedMap(n,r);a&&(this.queryRunner.manager.merge(n.target,t,a),e.generatedMaps.push(a))}else{const i=this.expressionMap.extraReturningColumns;if(i.length>0){const a=this.expressionMap.mainAlias.metadata.getEntityIdMap(t);if(!a)throw new r.VR("Cannot update entity because entity id is not set in the entity.");const s=await this.queryRunner.manager.createQueryBuilder().select(n.primaryColumns.map((e=>n.targetName+"."+e.propertyPath))).addSelect(i.map((e=>n.targetName+"."+e.propertyPath))).from(n.target,n.targetName).where(a).withDeleted().setOption("create-pojo").getOne();s&&(this.queryRunner.manager.merge(n.target,t,s),e.generatedMaps.push(s))}}})))}async insert(e,t){const n=this.expressionMap.mainAlias.metadata;let i=n.getInsertionReturningColumns();const a=this.queryRunner.connection.driver.isReturningSqlSupported("insert");i=i.filter((e=>!e.isGenerated||!0===a));const s=t.map(((r,i)=>{"oracle"===this.queryRunner.connection.driver.options.type&&Array.isArray(e.raw)&&this.expressionMap.extraReturningColumns.length>0&&(e.raw=e.raw.reduce(((e,t,n)=>(e[this.expressionMap.extraReturningColumns[n].databaseName]=t[0],e)),{}));const a=Array.isArray(e.raw)?e.raw[i]:e.raw,s=this.queryRunner.connection.driver.createGeneratedMap(n,a,i,t.length)||{};return i in this.expressionMap.locallyGenerated&&this.queryRunner.manager.merge(n.target,s,this.expressionMap.locallyGenerated[i]),this.queryRunner.manager.merge(n.target,r,s),s}));if(i.length>0&&!this.queryRunner.connection.driver.isReturningSqlSupported("insert")){const e=t.map((e=>{const t=n.getEntityIdMap(e);if(!t)throw new r.VR("Cannot update entity because entity id is not set in the entity.");return t})),a=await this.queryRunner.manager.createQueryBuilder().select(n.primaryColumns.map((e=>n.targetName+"."+e.propertyPath))).addSelect(i.map((e=>n.targetName+"."+e.propertyPath))).from(n.target,n.targetName).where(e).setOption("create-pojo").getMany();t.forEach(((e,t)=>{this.queryRunner.manager.merge(n.target,s[t],a[t]),this.queryRunner.manager.merge(n.target,e,a[t])}))}t.forEach(((t,r)=>{const i=n.getEntityIdMap(t);e.identifiers.push(i),e.generatedMaps.push(s[r])}))}getUpdationReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter((e=>e.isUpdateDate||e.isVersion))}getSoftDeletionReturningColumns(){return this.expressionMap.mainAlias.metadata.columns.filter((e=>e.isUpdateDate||e.isVersion||e.isDeleteDate))}}},17915:(e,t,n)=>{"use strict";n.d(t,{w:()=>R});var r=n(33324),i=n(86740),a=n(91481),s=n(1048).Buffer;class o{constructor(e,t,n,r,i){this.expressionMap=e,this.driver=t,this.rawRelationIdResults=n,this.rawRelationCountResults=r,this.queryRunner=i}transform(e,t){const n=this.group(e,t),r=[];if("TxOrUserOpDMO_id"in(e[0]||{})&&e.every((e=>"TxOrUserOpDMO_id"in e))){let n=t.metadata;if(n.discriminatorColumn){const r=e.map((e=>e[i.I.buildAlias(this.driver,t.name,t.metadata.discriminatorColumn.databaseName)])),a=n.childEntityMetadatas.find((e=>void 0!==r.find((t=>t===e.discriminatorValue))));a&&(n=a)}const a=[];n.columns.forEach((e=>{e.name__=`TxOrUserOpDMO_${e.databaseName}`,a.push(e)}));for(let t=0;t<e.length;++t){const n=e[t];let i={},s=!1;for(let e=0;e<a.length;++e){const t=a[e],r=n[t.name__];void 0===r||t.isVirtual||(i[t.databaseName]=this.driver.prepareHydratedValue(r,t),null!==r&&(s=!0))}s&&r.push(i)}return r}return n.forEach((e=>{const n=this.transformRawResultsGroup(e,t);void 0===n||Object.values(n).every((e=>null===e))||r.push(n)})),r}group(e,t){const n=new Map,r=[];return"view"===t.metadata.tableType?r.push(...t.metadata.columns.map((e=>i.I.buildAlias(this.driver,t.name,e.databaseName)))):r.push(...t.metadata.primaryColumns.map((e=>i.I.buildAlias(this.driver,t.name,e.databaseName)))),e.forEach((e=>{const t=r.map((t=>{const n=e[t];return s.isBuffer(n)?n.toString("hex"):a.B.isObject(n)?JSON.stringify(n):n})).join("_"),i=n.get(t);i?i.push(e):n.set(t,[e])})),n}transformRawResultsGroup(e,t){let n=t.metadata;if(n.discriminatorColumn){const r=e.map((e=>e[i.I.buildAlias(this.driver,t.name,t.metadata.discriminatorColumn.databaseName)])),a=n.childEntityMetadatas.find((e=>void 0!==r.find((t=>t===e.discriminatorValue))));a&&(n=a)}let r=n.create(this.queryRunner,{fromDeserializer:!0,pojo:-1!==this.expressionMap.options.indexOf("create-pojo")});const a=this.transformColumns(e,t,r,n),s=this.transformJoins(e,r,t,n),o=this.transformRelationIds(e,t,r,n),c=this.transformRelationCounts(e,t,r);if(a)return r;return 0===n.primaryColumns.filter((e=>!1===e.isVirtual)).length&&(s||o||c)?r:void 0}transformColumns(e,t,n,r){let a=!1;return r.columns.forEach((s=>{if(r.childEntityMetadatas.length>0&&-1!==r.childEntityMetadatas.findIndex((e=>e.target===s.target)))return;const o=e[0][i.I.buildAlias(this.driver,t.name,s.databaseName)];void 0===o||s.isVirtual||this.expressionMap.selects.find((e=>e.selection===t.name||e.selection===t.name+"."+s.propertyPath))&&(s.setEntityValue(n,this.driver.prepareHydratedValue(o,s)),null!==o&&(a=!0))})),a}transformJoins(e,t,n,r){let i=!1;return this.expressionMap.joinAttributes.forEach((a=>{if(!a.metadata)return;if(!a.isSelected)return;if(a.relation&&!r.relations.find((e=>e===a.relation)))return;if(a.mapToProperty){if(a.mapToPropertyParentAlias!==n.name)return}else if(!a.relation||a.parentAlias!==n.name||a.relationPropertyPath!==a.relation.propertyPath)return;let s=this.transform(e,a.alias);s=a.isMany?s:s[0],s=a.isMany||void 0!==s?s:null,void 0!==s&&(a.mapToPropertyPropertyName?t[a.mapToPropertyPropertyName]=s:a.relation.setEntityValue(t,s),i=!0)})),i}transformRelationIds(e,t,n,r){let i=!1;return this.rawRelationIdResults.forEach(((r,a)=>{if(r.relationIdAttribute.parentAlias!==t.name)return;const s=r.relationIdAttribute.relation,o=this.createValueMapFromJoinColumns(s,r.relationIdAttribute.parentAlias,e);if(null==o)return;this.prepareDataForTransformRelationIds();const c=this.hashEntityIds(s,o),l=this.relationIdMaps[a][c]||[],u=r.relationIdAttribute.mapToPropertyPropertyPath.split("."),d=(e,t,n)=>{const r=e.shift();return r&&0===e.length?(t[r]=n,t):r&&e.length>0?void d(e,t[r],n):t};s.isOneToOne||s.isManyToOne?void 0!==l[0]&&(d(u,n,l[0]),i=!0):(d(u,n,l),i=i||l.length>0)})),i}transformRelationCounts(e,t,n){let r=!1;return this.rawRelationCountResults.filter((e=>e.relationCountAttribute.parentAlias===t.name)).forEach((a=>{const s=a.relationCountAttribute.relation;let o;o=s.isOneToMany?s.inverseRelation.joinColumns[0].referencedColumn.databaseName:s.isOwning?s.joinColumns[0].referencedColumn.databaseName:s.inverseRelation.joinColumns[0].referencedColumn.databaseName;const c=e[0][i.I.buildAlias(this.driver,t.name,o)];null!=c&&(n[a.relationCountAttribute.mapToPropertyPropertyName]=0,a.results.filter((e=>e.parentId===c)).forEach((e=>{n[a.relationCountAttribute.mapToPropertyPropertyName]=parseInt(e.cnt),r=!0})))})),r}createValueMapFromJoinColumns(e,t,n){let r;return r=e.isManyToOne||e.isOneToOneOwner?e.entityMetadata.primaryColumns.map((e=>e)):e.isOneToMany||e.isOneToOneNotOwner?e.inverseRelation.joinColumns.map((e=>e)):e.isOwning?e.joinColumns.map((e=>e)):e.inverseRelation.inverseJoinColumns.map((e=>e)),r.reduce(((r,a)=>(n.forEach((n=>{e.isManyToOne||e.isOneToOneOwner?r[a.databaseName]=this.driver.prepareHydratedValue(n[i.I.buildAlias(this.driver,t,a.databaseName)],a):r[a.databaseName]=this.driver.prepareHydratedValue(n[i.I.buildAlias(this.driver,t,a.referencedColumn.databaseName)],a)})),r)),{})}extractEntityPrimaryIds(e,t){let n;return n=e.isManyToOne||e.isOneToOneOwner?e.entityMetadata.primaryColumns.map((e=>e)):e.isOneToMany||e.isOneToOneNotOwner?e.inverseRelation.joinColumns.map((e=>e)):e.isOwning?e.joinColumns.map((e=>e)):e.inverseRelation.inverseJoinColumns.map((e=>e)),n.reduce(((e,n)=>(e[n.databaseName]=t[n.databaseName],e)),{})}prepareDataForTransformRelationIds(){this.relationIdMaps||(this.relationIdMaps=this.rawRelationIdResults.map((e=>{const t=e.relationIdAttribute.relation;let n;return n=t.isManyToOne||t.isOneToOneOwner?t.joinColumns:t.isOneToMany||t.isOneToOneNotOwner?t.inverseEntityMetadata.primaryColumns:t.isOwning?t.inverseJoinColumns:t.inverseRelation.joinColumns,e.results.reduce(((i,a)=>{let s=n.reduce(((e,n)=>{let i=a[n.databaseName];return t.isOneToMany||t.isOneToOneNotOwner?(n.isVirtual&&n.referencedColumn&&n.referencedColumn.propertyName!==n.propertyName&&(i=n.referencedColumn.createValueMap(i)),r.m.mergeDeep(e,n.createValueMap(i))):(!n.isPrimary&&n.referencedColumn.referencedColumn&&(i=n.referencedColumn.referencedColumn.createValueMap(i)),r.m.mergeDeep(e,n.referencedColumn.createValueMap(i)))}),{});if(1!==n.length||e.relationIdAttribute.disableMixedMap||(s=t.isOneToMany||t.isOneToOneNotOwner?n[0].getEntityValue(s):n[0].referencedColumn.getEntityValue(s)),void 0!==s){const e=this.hashEntityIds(t,a);i[e]?i[e].push(s):i[e]=[s]}return i}),{})})))}hashEntityIds(e,t){const n=this.extractEntityPrimaryIds(e,t);return JSON.stringify(n)}}var c=n(54770),l=n(19174),u=n(97201),d=n(9772),h=n(29333),p=n(34851),f=n(25579),m=n(93499);class y{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationIdAttributes=n}async load(e){const t=this.relationIdAttributes.map((async t=>{if(t.relation.isManyToOne||t.relation.isOneToOneOwner){if(t.queryBuilderFactory)throw new m.V("Additional condition can not be used with ManyToOne or OneToOne owner relations.");const n={},r=e.map((e=>{const r={},a=[];t.relation.joinColumns.forEach((n=>{r[n.databaseName]=this.connection.driver.prepareHydratedValue(e[i.I.buildAlias(this.connection.driver,t.parentAlias,n.databaseName)],n.referencedColumn);const s=`${n.databaseName}:${r[n.databaseName]}`;-1===a.indexOf(s)&&a.push(s)})),t.relation.entityMetadata.primaryColumns.forEach((n=>{r[n.databaseName]=this.connection.driver.prepareHydratedValue(e[i.I.buildAlias(this.connection.driver,t.parentAlias,n.databaseName)],n);const s=`${n.databaseName}:${r[n.databaseName]}`;-1===a.indexOf(s)&&a.push(s)})),a.sort();const s=a.join("::");return n[s]?null:(n[s]=!0,r)})).filter((e=>e));return{relationIdAttribute:t,results:r}}if(t.relation.isOneToMany||t.relation.isOneToOneNotOwner){const n=t.relation,a=n.isOwning?n.joinColumns:n.inverseRelation.joinColumns,s=n.inverseEntityMetadata.target,o=n.inverseEntityMetadata.tableName,c=t.alias||o,l={},u={},d=e.map(((e,n)=>{const r=[],s={},o=a.map((a=>{const o=a.databaseName+n,l=e[i.I.buildAlias(this.connection.driver,t.parentAlias,a.referencedColumn.databaseName)],u=`${c}:${a.propertyPath}:${l}`;return-1!==r.indexOf(u)?"":(r.push(u),s[o]=l,c+"."+a.propertyPath+" = :"+o)})).filter((e=>e)).join(" AND ");r.sort();const d=r.join("::");return l[d]?"":(l[d]=!0,Object.assign(u,s),o)})).filter((e=>e)).map((e=>"("+e+")")).join(" OR ");if(!d)return{relationIdAttribute:t,results:[]};const h=this.connection.createQueryBuilder(this.queryRunner);r.m.uniq([...a,...n.inverseRelation.entityMetadata.primaryColumns],(e=>e.propertyPath)).forEach((e=>{h.addSelect(c+"."+e.propertyPath,e.databaseName)})),h.from(s,c).where("("+d+")").setParameters(u),t.queryBuilderFactory&&t.queryBuilderFactory(h);const p=await h.getRawMany();return p.forEach((e=>{a.forEach((t=>{e[t.databaseName]=this.connection.driver.prepareHydratedValue(e[t.databaseName],t.referencedColumn)})),n.inverseRelation.entityMetadata.primaryColumns.forEach((t=>{e[t.databaseName]=this.connection.driver.prepareHydratedValue(e[t.databaseName],t)}))})),{relationIdAttribute:t,results:p}}{const n=t.relation,r=n.isOwning?n.joinColumns:n.inverseRelation.inverseJoinColumns,a=n.isOwning?n.inverseJoinColumns:n.inverseRelation.joinColumns,s=t.junctionAlias,o=t.joinInverseSideMetadata.tableName,c=t.alias||o,l=n.isOwning?n.junctionEntityMetadata.tableName:n.inverseRelation.junctionEntityMetadata.tableName,u=e.map((e=>r.reduce(((n,r)=>(n[r.propertyPath]=e[i.I.buildAlias(this.connection.driver,t.parentAlias,r.referencedColumn.databaseName)],n)),{})));if(0===u.length)return{relationIdAttribute:t,results:[]};const d={},h={},p=u.map(((e,t)=>{const n=[],r={},i=Object.keys(e).map((i=>{const a=i+t,o=e[i],c=`${s}:${i}:${o}`;return-1!==n.indexOf(c)?"":(n.push(c),r[a]=o,s+"."+i+" = :"+a)})).filter((e=>e)).join(" AND ");n.sort();const a=n.join("::");return h[a]?"":(h[a]=!0,Object.assign(d,r),i)})).filter((e=>e)),f=a.map((e=>s+"."+e.propertyPath+" = "+c+"."+e.referencedColumn.propertyPath)).join(" AND "),m=p.map((e=>"("+e+" AND "+f+")")).join(" OR "),y=this.connection.createQueryBuilder(this.queryRunner);a.forEach((e=>{y.addSelect(s+"."+e.propertyPath,e.databaseName).addOrderBy(s+"."+e.propertyPath)})),r.forEach((e=>{y.addSelect(s+"."+e.propertyPath,e.databaseName).addOrderBy(s+"."+e.propertyPath)})),y.from(o,c).innerJoin(l,s,m).setParameters(d),t.queryBuilderFactory&&t.queryBuilderFactory(y);const g=await y.getRawMany();return g.forEach((e=>{[...r,...a].forEach((t=>{e[t.databaseName]=this.connection.driver.prepareHydratedValue(e[t.databaseName],t.referencedColumn)}))})),{relationIdAttribute:t,results:g}}}));return Promise.all(t)}}class g{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationIds.forEach((e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationIdAttributes.push(t)})),this.expressionMap.joinAttributes.forEach((e=>{e.metadata&&!e.metadata.isJunction&&e.metadata.relationIds.forEach((t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationIdAttributes.push(n)}))}))}metadataToAttribute(e,t){return new p.q(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}class b{constructor(e,t,n){this.connection=e,this.queryRunner=t,this.relationCountAttributes=n}async load(e){const t=(e,t,n)=>n.indexOf(e)===t,n=this.relationCountAttributes.map((async n=>{if(n.relation.isOneToMany){const r=n.relation,i=r.inverseRelation,a=i.joinColumns[0].referencedColumn.propertyName,s=r.inverseEntityMetadata.target,o=r.inverseEntityMetadata.tableName,c=n.alias||o,l=i.propertyName;let u=e.map((e=>e[n.parentAlias+"_"+a])).filter((e=>!!e));if(u=u.filter(t),0===u.length)return{relationCountAttribute:n,results:[]};const d=this.connection.createQueryBuilder(this.queryRunner);return d.select(c+"."+l,"parentId").addSelect("COUNT(*)","cnt").from(s,c).where(c+"."+l+" IN (:...ids)").addGroupBy(c+"."+l).setParameter("ids",u),n.queryBuilderFactory&&n.queryBuilderFactory(d),{relationCountAttribute:n,results:await d.getRawMany()}}{let r,i,a,s;n.relation.isOwning?(r=n.relation.joinColumns[0].referencedColumn.databaseName,i=n.relation.inverseJoinColumns[0].referencedColumn.databaseName,a=n.relation.junctionEntityMetadata.columns[0],s=n.relation.junctionEntityMetadata.columns[1]):(r=n.relation.inverseRelation.inverseJoinColumns[0].referencedColumn.databaseName,i=n.relation.inverseRelation.joinColumns[0].referencedColumn.databaseName,a=n.relation.junctionEntityMetadata.columns[1],s=n.relation.junctionEntityMetadata.columns[0]);let o=e.map((e=>e[n.parentAlias+"_"+r])).filter((e=>!!e));if(o=o.filter(t),0===o.length)return{relationCountAttribute:n,results:[]};const c=n.junctionAlias,l=n.joinInverseSideMetadata.tableName,u=n.alias||l,d=n.relation.junctionEntityMetadata.tableName,h=c+"."+a.propertyName+" IN ("+o.map((e=>isNaN(e)?"'"+e+"'":e))+") AND "+c+"."+s.propertyName+" = "+u+"."+i,p=this.connection.createQueryBuilder(this.queryRunner);return p.select(c+"."+a.propertyName,"parentId").addSelect("COUNT("+p.escape(u)+"."+p.escape(i)+")","cnt").from(l,u).innerJoin(d,c,h).addGroupBy(c+"."+a.propertyName),n.queryBuilderFactory&&n.queryBuilderFactory(p),{relationCountAttribute:n,results:await p.getRawMany()}}}));return Promise.all(n)}}class v{constructor(e){this.expressionMap=e}transform(){this.expressionMap.mainAlias&&this.expressionMap.mainAlias.metadata.relationCounts.forEach((e=>{const t=this.metadataToAttribute(this.expressionMap.mainAlias.name,e);this.expressionMap.relationCountAttributes.push(t)})),this.expressionMap.joinAttributes.forEach((e=>{e.metadata&&!e.metadata.isJunction&&e.metadata.relationCounts.forEach((t=>{const n=this.metadataToAttribute(e.alias.name,t);this.expressionMap.relationCountAttributes.push(n)}))}))}metadataToAttribute(e,t){return new f.m(this.expressionMap,{relationName:e+"."+t.relation.propertyName,mapToProperty:e+"."+t.propertyName,alias:t.alias,queryBuilderFactory:t.queryBuilderFactory})}}var w=n(50504),E=n(95601),_=n(86192),S=n(81719),T=n(26883),A=n(68625),N=n(88272),C=n(45200),M=n(5471);class R extends w.o{constructor(){super(...arguments),this["@instanceof"]=Symbol.for("SelectQueryBuilder"),this.findOptions={},this.selects=[],this.joins=[],this.conditions="",this.orderBys=[],this.relationMetadatas=[]}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createSelectExpression(),e+=this.createJoinExpression(),e+=this.createWhereExpression(),e+=this.createGroupByExpression(),e+=this.createHavingExpression(),e+=this.createOrderByExpression(),e+=this.createLimitOffsetExpression(),e+=this.createLockExpression(),e=e.trim(),this.expressionMap.subQuery&&(e="("+e+")"),e}setFindOptions(e){return this.findOptions=e,this.applyFindOptions(),this}subQuery(){const e=this.createQueryBuilder();return e.expressionMap.subQuery=!0,e.parentQueryBuilder=this,e}select(e,t){if(this.expressionMap.queryType="select",Array.isArray(e))this.expressionMap.selects=e.map((e=>({selection:e})));else if("function"==typeof e){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&(this.expressionMap.selects=[{selection:e,aliasName:t}]);return this}addSelect(e,t){if(!e)return this;if(Array.isArray(e))this.expressionMap.selects=this.expressionMap.selects.concat(e.map((e=>({selection:e}))));else if("function"==typeof e){const n=e(this.subQuery());this.setParameters(n.getParameters()),this.expressionMap.selects.push({selection:n.getQuery(),aliasName:t})}else e&&this.expressionMap.selects.push({selection:e,aliasName:t});return this}maxExecutionTime(e){return this.expressionMap.maxExecutionTime=e,this}distinct(e=!0){return this.expressionMap.selectDistinct=e,this}distinctOn(e){return this.expressionMap.selectDistinctOn=e,this}from(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}addFrom(e,t){const n=this.createFromAlias(e,t);return this.expressionMap.mainAlias||this.expressionMap.setMainAlias(n),this}innerJoin(e,t,n,r){return this.join("INNER",e,t,n,r),this}leftJoin(e,t,n,r){return this.join("LEFT",e,t,n,r),this}innerJoinAndSelect(e,t,n,r){return this.addSelect(t),this.innerJoin(e,t,n,r),this}leftJoinAndSelect(e,t,n,r){return this.addSelect(t),this.leftJoin(e,t,n,r),this}innerJoinAndMapMany(e,t,n,r,i){return this.addSelect(n),this.join("INNER",t,n,r,i,e,!0),this}innerJoinAndMapOne(e,t,n,r,i){return this.addSelect(n),this.join("INNER",t,n,r,i,e,!1),this}leftJoinAndMapMany(e,t,n,r,i){return this.addSelect(n),this.join("LEFT",t,n,r,i,e,!0),this}leftJoinAndMapOne(e,t,n,r,i){return this.addSelect(n),this.join("LEFT",t,n,r,i,e,!1),this}loadRelationIdAndMap(e,t,n,r){const i=new p.q(this.expressionMap);return i.mapToProperty=e,i.relationName=t,"string"==typeof n&&(i.alias=n),"object"==typeof n&&n.disableMixedMap&&(i.disableMixedMap=!0),i.queryBuilderFactory=r,this.expressionMap.relationIdAttributes.push(i),i.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:i.junctionAlias,metadata:i.relation.junctionEntityMetadata}),this}loadRelationCountAndMap(e,t,n,r){const i=new f.m(this.expressionMap);return i.mapToProperty=e,i.relationName=t,i.alias=n,i.queryBuilderFactory=r,this.expressionMap.relationCountAttributes.push(i),this.expressionMap.createAlias({type:"other",name:i.junctionAlias}),i.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"other",name:i.junctionAlias,metadata:i.relation.junctionEntityMetadata}),this}loadAllRelationIds(e){return this.expressionMap.mainAlias.metadata.relations.forEach((t=>{void 0!==e&&void 0!==e.relations&&-1===e.relations.indexOf(t.propertyPath)||this.loadRelationIdAndMap(this.expressionMap.mainAlias.name+"."+t.propertyPath,this.expressionMap.mainAlias.name+"."+t.propertyPath,e)})),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}having(e,t){return this.expressionMap.havings.push({type:"simple",condition:e}),t&&this.setParameters(t),this}andHaving(e,t){return this.expressionMap.havings.push({type:"and",condition:e}),t&&this.setParameters(t),this}orHaving(e,t){return this.expressionMap.havings.push({type:"or",condition:e}),t&&this.setParameters(t),this}groupBy(e){return this.expressionMap.groupBys=e?[e]:[],this}addGroupBy(e){return this.expressionMap.groupBys.push(e),this}orderBy(e,t="ASC",n){if(void 0!==t&&"ASC"!==t&&"DESC"!==t)throw new T.VR('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(void 0!==n&&"NULLS FIRST"!==n&&"NULLS LAST"!==n)throw new T.VR('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return this.expressionMap.orderBys=e?"object"==typeof e?e:n?{[e]:{order:t,nulls:n}}:{[e]:t}:{},this}addOrderBy(e,t="ASC",n){if(void 0!==t&&"ASC"!==t&&"DESC"!==t)throw new T.VR('SelectQueryBuilder.addOrderBy "order" can accept only "ASC" and "DESC" values.');if(void 0!==n&&"NULLS FIRST"!==n&&"NULLS LAST"!==n)throw new T.VR('SelectQueryBuilder.addOrderBy "nulls" can accept only "NULLS FIRST" and "NULLS LAST" values.');return this.expressionMap.orderBys[e]=n?{order:t,nulls:n}:t,this}limit(e){if(this.expressionMap.limit=this.normalizeNumber(e),void 0!==this.expressionMap.limit&&isNaN(this.expressionMap.limit))throw new T.VR('Provided "limit" value is not a number. Please provide a numeric value.');return this}offset(e){if(this.expressionMap.offset=this.normalizeNumber(e),void 0!==this.expressionMap.offset&&isNaN(this.expressionMap.offset))throw new T.VR('Provided "offset" value is not a number. Please provide a numeric value.');return this}take(e){if(this.expressionMap.take=this.normalizeNumber(e),void 0!==this.expressionMap.take&&isNaN(this.expressionMap.take))throw new T.VR('Provided "take" value is not a number. Please provide a numeric value.');return this}skip(e){if(this.expressionMap.skip=this.normalizeNumber(e),void 0!==this.expressionMap.skip&&isNaN(this.expressionMap.skip))throw new T.VR('Provided "skip" value is not a number. Please provide a numeric value.');return this}useIndex(e){return this.expressionMap.useIndex=e,this}setLock(e,t,n){return this.expressionMap.lockMode=e,this.expressionMap.lockVersion=t,this.expressionMap.lockTables=n,this}setOnLocked(e){return this.expressionMap.onLocked=e,this}withDeleted(){return this.expressionMap.withDeleted=!0,this}async getRawOne(){return(await this.getRawMany())[0]}async getRawMany(){if("optimistic"===this.expressionMap.lockMode)throw new d.M;this.expressionMap.queryEntity=!1;const e=this.obtainQueryRunner();let t=!1;try{!0===this.expressionMap.useTransaction&&!1===e.isTransactionActive&&(await e.startTransaction(),t=!0);const n=await this.loadRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch(e){}throw n}finally{e!==this.queryRunner&&await e.release()}}async getRawAndEntities(){const e=this.obtainQueryRunner();let t=!1;try{!0===this.expressionMap.useTransaction&&!1===e.isTransactionActive&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch(e){}throw n}finally{e!==this.queryRunner&&await e.release()}}async getOne(){const e=(await this.getRawAndEntities()).entities[0];if(e&&"optimistic"===this.expressionMap.lockMode&&this.expressionMap.lockVersion){const t=this.expressionMap.mainAlias.metadata;if(this.expressionMap.lockVersion instanceof Date){const n=t.updateDateColumn.getEntityValue(e);if(n.getTime()!==this.expressionMap.lockVersion.getTime())throw new u.z(t.name,this.expressionMap.lockVersion,n)}else{const n=t.versionColumn.getEntityValue(e);if(n!==this.expressionMap.lockVersion)throw new u.z(t.name,this.expressionMap.lockVersion,n)}}return void 0===e?null:e}async getOneOrFail(){const e=await this.getOne();if(!e)throw new S.p(this.expressionMap.mainAlias.target,this);return e}async getMany(){if("optimistic"===this.expressionMap.lockMode)throw new d.M;return(await this.getRawAndEntities()).entities}async getCount(){if("optimistic"===this.expressionMap.lockMode)throw new d.M;const e=this.obtainQueryRunner();let t=!1;try{!0===this.expressionMap.useTransaction&&!1===e.isTransactionActive&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!1;const n=await this.executeCountQuery(e);return t&&await e.commitTransaction(),n}catch(n){if(t)try{await e.rollbackTransaction()}catch(e){}throw n}finally{e!==this.queryRunner&&await e.release()}}async getManyAndCount(){if("optimistic"===this.expressionMap.lockMode)throw new d.M;const e=this.obtainQueryRunner();let t=!1;try{!0===this.expressionMap.useTransaction&&!1===e.isTransactionActive&&(await e.startTransaction(),t=!0),this.expressionMap.queryEntity=!0;const n=await this.executeEntitiesAndRawResults(e);this.expressionMap.queryEntity=!1;const r=this.expressionMap.cacheId;this.expressionMap.cacheId=r?`${r}-count`:r;const i=await this.executeCountQuery(e),a=[n.entities,i];return t&&await e.commitTransaction(),a}catch(n){if(t)try{await e.rollbackTransaction()}catch(e){}throw n}finally{e!==this.queryRunner&&await e.release()}}async stream(){this.expressionMap.queryEntity=!1;const[e,t]=this.getQueryAndParameters(),n=this.obtainQueryRunner();let r=!1;try{!0===this.expressionMap.useTransaction&&!1===n.isTransactionActive&&(await n.startTransaction(),r=!0);const i=()=>{if(n!==this.queryRunner)return n.release()},a=n.stream(e,t,i,i);return r&&await n.commitTransaction(),a}catch(e){if(r)try{await n.rollbackTransaction()}catch(e){}throw e}}cache(e,t){return"boolean"==typeof e?this.expressionMap.cache=e:"number"==typeof e?(this.expressionMap.cache=!0,this.expressionMap.cacheDuration=e):"string"!=typeof e&&"number"!=typeof e||(this.expressionMap.cache=!0,this.expressionMap.cacheId=e),t&&(this.expressionMap.cacheDuration=t),this}setOption(e){return this.expressionMap.options.push(e),this}join(e,t,n,r,i,a,s){this.setParameters(i||{});const o=new h.L(this.connection,this.expressionMap);if(o.direction=e,o.mapToProperty=a,o.isMappingMany=s,o.entityOrProperty=t,o.condition=r||void 0,this.expressionMap.joinAttributes.push(o),o.metadata){if(o.metadata.deleteDateColumn&&!this.expressionMap.withDeleted){const e=`${n}.${o.metadata.deleteDateColumn.propertyName} IS NULL`;o.condition=o.condition?` ${o.condition} AND ${e}`:`${e}`}o.alias=this.expressionMap.createAlias({type:"join",name:n,metadata:o.metadata}),o.relation&&o.relation.junctionEntityMetadata&&this.expressionMap.createAlias({type:"join",name:o.junctionAlias,metadata:o.relation.junctionEntityMetadata})}else{let e="";if("function"==typeof t){const n=t(this.subQuery());this.setParameters(n.getParameters()),e=n.getQuery()}else e=t;const r="function"==typeof t||"("===t.substr(0,1)&&")"===t.substr(-1);o.alias=this.expressionMap.createAlias({type:"join",name:n,tablePath:!1===r?t:void 0,subQuery:!0===r?e:void 0})}}createSelectExpression(){if(!this.expressionMap.mainAlias)throw new T.VR("Cannot build query because main alias is not set (call qb#from method)");const e=[],t=[];if(this.expressionMap.mainAlias.hasMetadata){const n=this.expressionMap.mainAlias.metadata;e.push(...this.buildEscapedEntityColumnSelects(this.expressionMap.mainAlias.name,n)),t.push(...this.findEntityColumnSelects(this.expressionMap.mainAlias.name,n))}this.expressionMap.joinAttributes.forEach((n=>{if(n.metadata)e.push(...this.buildEscapedEntityColumnSelects(n.alias.name,n.metadata)),t.push(...this.findEntityColumnSelects(n.alias.name,n.metadata));else{const r=this.expressionMap.selects.some((e=>e.selection===n.alias.name));if(r){e.push({selection:this.escape(n.alias.name)+".*"});const r=this.expressionMap.selects.find((e=>e.selection===n.alias.name));t.push(r)}}})),this.expressionMap.selects.filter((e=>-1===t.indexOf(e))).forEach((t=>e.push({selection:this.replacePropertyNames(t.selection),aliasName:t.aliasName}))),0===e.length&&e.push({selection:"*"});let n="";this.expressionMap.useIndex&&i.I.isMySQLFamily(this.connection.driver)&&(n=` USE INDEX (${this.expressionMap.useIndex})`);const r=this.expressionMap.aliases.filter((e=>"from"===e.type&&(e.tablePath||e.subQuery))).map((e=>e.subQuery?e.subQuery+" "+this.escape(e.name):this.getTableName(e.tablePath)+" "+this.escape(e.name))),a=this.createSelectDistinctExpression(),s=e.map((e=>e.selection+(e.aliasName?" AS "+this.escape(e.aliasName):""))).join(", ");return a+s+" FROM "+r.join(", ")+this.createTableLockExpression()+n}createSelectDistinctExpression(){const{selectDistinct:e,selectDistinctOn:t,maxExecutionTime:n}=this.expressionMap,{driver:r}=this.connection;let a="SELECT ";if(n>0&&i.I.isMySQLFamily(r)&&(a+=`/*+ MAX_EXECUTION_TIME(${this.expressionMap.maxExecutionTime}) */ `),i.I.isPostgresFamily(r)&&t.length>0){a=`SELECT DISTINCT ON (${t.map((e=>this.replacePropertyNames(e))).join(", ")}) `}else e&&(a="SELECT DISTINCT ");return a}createJoinExpression(){return this.expressionMap.joinAttributes.map((e=>{const t=e.relation,n=e.tablePath,r=e.alias.name;let i=e.condition?" AND ("+e.condition+")":"";const a=e.parentAlias;if(!a||!t){const t=e.alias.subQuery?e.alias.subQuery:this.getTableName(n);return" "+e.direction+" JOIN "+t+" "+this.escape(r)+this.createTableLockExpression()+(e.condition?" ON "+this.replacePropertyNames(e.condition):"")}if(t.isManyToOne||t.isOneToOneOwner){const s=t.joinColumns.map((e=>r+"."+e.referencedColumn.propertyPath+"="+a+"."+t.propertyPath+"."+e.referencedColumn.propertyPath)).join(" AND ");return" "+e.direction+" JOIN "+this.getTableName(n)+" "+this.escape(r)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+i)}if(t.isOneToMany||t.isOneToOneNotOwner){const s=t.inverseRelation.joinColumns.map((e=>("entity-child"===t.inverseEntityMetadata.tableType&&t.inverseEntityMetadata.discriminatorColumn&&(i+=" AND "+r+"."+t.inverseEntityMetadata.discriminatorColumn.databaseName+"='"+t.inverseEntityMetadata.discriminatorValue+"'"),r+"."+t.inverseRelation.propertyPath+"."+e.referencedColumn.propertyPath+"="+a+"."+e.referencedColumn.propertyPath))).join(" AND ");return" "+e.direction+" JOIN "+this.getTableName(n)+" "+this.escape(r)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(s+i)}{const s=t.junctionEntityMetadata.tablePath,o=e.junctionAlias;let c="",l="";return t.isOwning?(c=t.joinColumns.map((e=>o+"."+e.propertyPath+"="+a+"."+e.referencedColumn.propertyPath)).join(" AND "),l=t.inverseJoinColumns.map((e=>r+"."+e.referencedColumn.propertyPath+"="+o+"."+e.propertyPath)).join(" AND ")):(c=t.inverseRelation.inverseJoinColumns.map((e=>o+"."+e.propertyPath+"="+a+"."+e.referencedColumn.propertyPath)).join(" AND "),l=t.inverseRelation.joinColumns.map((e=>r+"."+e.referencedColumn.propertyPath+"="+o+"."+e.propertyPath)).join(" AND "))," "+e.direction+" JOIN "+this.getTableName(s)+" "+this.escape(o)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(c)+" "+e.direction+" JOIN "+this.getTableName(n)+" "+this.escape(r)+this.createTableLockExpression()+" ON "+this.replacePropertyNames(l+i)}})).join(" ")}createGroupByExpression(){return this.expressionMap.groupBys&&this.expressionMap.groupBys.length?" GROUP BY "+this.replacePropertyNames(this.expressionMap.groupBys.join(", ")):""}createOrderByExpression(){const e=this.expressionMap.allOrderBys;return Object.keys(e).length>0?" ORDER BY "+Object.keys(e).map((t=>"string"==typeof e[t]?this.replacePropertyNames(t)+" "+e[t]:this.replacePropertyNames(t)+" "+e[t].order+" "+e[t].nulls)).join(", "):""}createLimitOffsetExpression(){let e=this.expressionMap.offset,t=this.expressionMap.limit;if(e||t||0!==this.expressionMap.joinAttributes.length||(e=this.expressionMap.skip,t=this.expressionMap.take),"mssql"===this.connection.driver.options.type){let n="";if((t||e)&&Object.keys(this.expressionMap.allOrderBys).length<=0&&(n=" ORDER BY (SELECT NULL)"),t&&e)return n+" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return n+" OFFSET 0 ROWS FETCH NEXT "+t+" ROWS ONLY";if(e)return n+" OFFSET "+e+" ROWS"}else if(i.I.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type||"sap"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)throw new _.w}else if(i.I.isSQLiteFamily(this.connection.driver)){if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" LIMIT -1 OFFSET "+e}else if("oracle"===this.connection.driver.options.type){if(t&&e)return" OFFSET "+e+" ROWS FETCH NEXT "+t+" ROWS ONLY";if(t)return" FETCH NEXT "+t+" ROWS ONLY";if(e)return" OFFSET "+e+" ROWS"}else{if(t&&e)return" LIMIT "+t+" OFFSET "+e;if(t)return" LIMIT "+t;if(e)return" OFFSET "+e}return""}createTableLockExpression(){if("mssql"===this.connection.driver.options.type)switch(this.expressionMap.lockMode){case"pessimistic_read":return" WITH (HOLDLOCK, ROWLOCK)";case"pessimistic_write":return" WITH (UPDLOCK, ROWLOCK)";case"dirty_read":return" WITH (NOLOCK)"}return""}createLockExpression(){const e=this.connection.driver;let t="";if(this.expressionMap.lockTables){if(!i.I.isPostgresFamily(e)&&"cockroachdb"!==e.options.type)throw new T.VR("Lock tables not supported in selected driver");if(this.expressionMap.lockTables.length<1)throw new T.VR("lockTables cannot be an empty array");t=" OF "+this.expressionMap.lockTables.join(", ")}let n="";switch("nowait"===this.expressionMap.onLocked?n=" NOWAIT":"skip_locked"===this.expressionMap.onLocked&&(n=" SKIP LOCKED"),this.expressionMap.lockMode){case"pessimistic_read":if("mysql"===e.options.type||"aurora-mysql"===e.options.type)return i.I.isReleaseVersionOrGreater(e,"8.0.0")?" FOR SHARE"+t+n:" LOCK IN SHARE MODE";if("mariadb"===e.options.type)return" LOCK IN SHARE MODE";if(i.I.isPostgresFamily(e))return" FOR SHARE"+t+n;if("oracle"===e.options.type)return" FOR UPDATE";if("mssql"===e.options.type)return"";throw new E.t;case"pessimistic_write":if(i.I.isMySQLFamily(e)||"aurora-mysql"===e.options.type||"oracle"===e.options.type)return" FOR UPDATE"+n;if(i.I.isPostgresFamily(e)||"cockroachdb"===e.options.type)return" FOR UPDATE"+t+n;if("mssql"===e.options.type)return"";throw new E.t;case"pessimistic_partial_write":if(i.I.isPostgresFamily(e))return" FOR UPDATE"+t+" SKIP LOCKED";if(i.I.isMySQLFamily(e))return" FOR UPDATE SKIP LOCKED";throw new E.t;case"pessimistic_write_or_fail":if(i.I.isPostgresFamily(e)||"cockroachdb"===e.options.type)return" FOR UPDATE"+t+" NOWAIT";if(i.I.isMySQLFamily(e))return" FOR UPDATE NOWAIT";throw new E.t;case"for_no_key_update":if(i.I.isPostgresFamily(e)||"cockroachdb"===e.options.type)return" FOR NO KEY UPDATE"+t+n;throw new E.t;case"for_key_share":if(i.I.isPostgresFamily(e))return" FOR KEY SHARE"+t+n;throw new E.t;default:return""}}createHavingExpression(){if(!this.expressionMap.havings||!this.expressionMap.havings.length)return"";const e=this.expressionMap.havings.map(((e,t)=>{switch(e.type){case"and":return(t>0?"AND ":"")+this.replacePropertyNames(e.condition);case"or":return(t>0?"OR ":"")+this.replacePropertyNames(e.condition);default:return this.replacePropertyNames(e.condition)}})).join(" ");return e.length?" HAVING "+e:""}buildEscapedEntityColumnSelects(e,t){const n=this.expressionMap.selects.some((t=>t.selection===e)),r=[];if(n&&r.push(...t.columns.filter((e=>!0===e.isSelect))),r.push(...t.columns.filter((t=>this.expressionMap.selects.some((n=>n.selection===e+"."+t.propertyPath))))),0===r.length)return[];const a=this.expressionMap.queryEntity?t.primaryColumns.filter((e=>-1===r.indexOf(e))):[],s=[...r,...a],o=[];return s.forEach((t=>{let r=this.escape(e)+"."+this.escape(t.databaseName);if(-1!==this.connection.driver.spatialTypes.indexOf(t.type)){if(i.I.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type){const e=this.connection.driver.options.legacySpatialSupport;r=`${e?"AsText":"ST_AsText"}(${r})`}i.I.isPostgresFamily(this.connection.driver)&&(r=t.precision?`ST_AsGeoJSON(${r}, ${t.precision})::json`:`ST_AsGeoJSON(${r})::json`),"mssql"===this.connection.driver.options.type&&(r=`${r}.ToString()`)}const a=this.expressionMap.selects.filter((n=>n.selection===e+"."+t.propertyPath));a.length?a.forEach((n=>{o.push({selection:r,aliasName:n.aliasName?n.aliasName:i.I.buildAlias(this.connection.driver,e,t.databaseName),virtual:n.virtual})})):o.push({selection:r,aliasName:i.I.buildAlias(this.connection.driver,e,t.databaseName),virtual:n})})),o}findEntityColumnSelects(e,t){const n=this.expressionMap.selects.find((t=>t.selection===e));return n?[n]:this.expressionMap.selects.filter((n=>t.columns.some((t=>n.selection===e+"."+t.propertyPath))))}computeCountExpression(){const e=this.expressionMap.mainAlias.name,t=this.expressionMap.mainAlias.metadata.primaryColumns,n=this.escape(e);if(0===this.expressionMap.joinAttributes.length&&0===this.expressionMap.relationIdAttributes.length&&0===this.expressionMap.relationCountAttributes.length)return"COUNT(1)";if("cockroachdb"===this.connection.driver.options.type||i.I.isPostgresFamily(this.connection.driver))return"COUNT(DISTINCT("+t.map((e=>`${n}.${this.escape(e.databaseName)}`)).join(", ")+"))";if(i.I.isMySQLFamily(this.connection.driver))return"COUNT(DISTINCT "+t.map((e=>`${n}.${this.escape(e.databaseName)}`)).join(", ")+")";if("mssql"===this.connection.driver.options.type){const e=t.map((e=>`${n}.${this.escape(e.databaseName)}`)).join(", '|;|', ");return 1===t.length?`COUNT(DISTINCT(${e}))`:`COUNT(DISTINCT(CONCAT(${e})))`}if("spanner"===this.connection.driver.options.type){if(1===t.length)return`COUNT(DISTINCT(${n}.${this.escape(t[0].databaseName)}))`;return`COUNT(DISTINCT(CONCAT(${t.map((e=>`CAST(${n}.${this.escape(e.databaseName)} AS STRING)`)).join(", '|;|', ")})))`}return"COUNT(DISTINCT("+t.map((e=>`${n}.${this.escape(e.databaseName)}`)).join(" || '|;|' || ")+"))"}async executeCountQuery(e){const t=this.computeCountExpression(),n=await this.clone().orderBy().groupBy().offset(void 0).limit(void 0).skip(void 0).take(void 0).select(t,"cnt").setOption("disable-global-order").loadRawResults(e);return n&&n[0]&&n[0].cnt?parseInt(n[0].cnt):0}applyFindOptions(){if(this.expressionMap.mainAlias.metadata){if(this.findOptions.relationLoadStrategy&&(this.expressionMap.relationLoadStrategy=this.findOptions.relationLoadStrategy),this.findOptions.comment&&this.comment(this.findOptions.comment),this.findOptions.withDeleted&&this.withDeleted(),this.findOptions.select){const e=Array.isArray(this.findOptions.select)?r.m.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select;this.buildSelect(e,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.select(this.selects),this.selects=[],this.findOptions.relations){const e=Array.isArray(this.findOptions.relations)?r.m.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations;this.buildRelations(e,"object"==typeof this.findOptions.select?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),!1!==this.findOptions.loadEagerRelations&&"join"===this.expressionMap.relationLoadStrategy&&this.buildEagerRelations(e,"object"==typeof this.findOptions.select?this.findOptions.select:void 0,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name)}if(this.selects.length&&this.addSelect(this.selects),this.findOptions.where&&(this.conditions=this.buildWhere(this.findOptions.where,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.conditions.length&&this.andWhere("("!==this.conditions.substr(0,1)?"("+this.conditions+")":this.conditions)),this.findOptions.order&&this.buildOrder(this.findOptions.order,this.expressionMap.mainAlias.metadata,this.expressionMap.mainAlias.name),this.joins.length&&this.joins.forEach((e=>{e.select&&!e.selection?"inner"===e.type?this.innerJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoinAndSelect(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):"inner"===e.type?this.innerJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias):this.leftJoin(`${e.parentAlias}.${e.relationMetadata.propertyPath}`,e.alias)})),void 0!==this.findOptions.skip&&this.skip(this.findOptions.skip),void 0!==this.findOptions.take&&this.take(this.findOptions.take),"number"==typeof this.findOptions.cache||"boolean"==typeof this.findOptions.cache?this.cache(this.findOptions.cache):"object"==typeof this.findOptions.cache&&this.cache(this.findOptions.cache.id,this.findOptions.cache.milliseconds),this.findOptions.join&&(this.findOptions.join.leftJoin&&Object.keys(this.findOptions.join.leftJoin).forEach((e=>{this.leftJoin(this.findOptions.join.leftJoin[e],e)})),this.findOptions.join.innerJoin&&Object.keys(this.findOptions.join.innerJoin).forEach((e=>{this.innerJoin(this.findOptions.join.innerJoin[e],e)})),this.findOptions.join.leftJoinAndSelect&&Object.keys(this.findOptions.join.leftJoinAndSelect).forEach((e=>{this.leftJoinAndSelect(this.findOptions.join.leftJoinAndSelect[e],e)})),this.findOptions.join.innerJoinAndSelect&&Object.keys(this.findOptions.join.innerJoinAndSelect).forEach((e=>{this.innerJoinAndSelect(this.findOptions.join.innerJoinAndSelect[e],e)}))),this.findOptions.lock)if("optimistic"===this.findOptions.lock.mode)this.setLock(this.findOptions.lock.mode,this.findOptions.lock.version);else if("pessimistic_read"===this.findOptions.lock.mode||"pessimistic_write"===this.findOptions.lock.mode||"dirty_read"===this.findOptions.lock.mode||"pessimistic_partial_write"===this.findOptions.lock.mode||"pessimistic_write_or_fail"===this.findOptions.lock.mode||"for_no_key_update"===this.findOptions.lock.mode||"for_key_share"===this.findOptions.lock.mode){const e=this.findOptions.lock.tables?this.findOptions.lock.tables.map((e=>{const t=this.expressionMap.aliases.find((t=>t.metadata.tableNameWithoutPrefix===e));if(!t)throw new T.VR(`"${e}" is not part of this query`);return this.escape(t.name)})):void 0;this.setLock(this.findOptions.lock.mode,void 0,e),this.findOptions.lock.onLocked&&this.setOnLocked(this.findOptions.lock.onLocked)}!0===this.findOptions.loadRelationIds?this.loadAllRelationIds():"object"==typeof this.findOptions.loadRelationIds&&this.loadAllRelationIds(this.findOptions.loadRelationIds),!1!==this.findOptions.loadEagerRelations&&A.H.joinEagerRelations(this,this.expressionMap.mainAlias.name,this.expressionMap.mainAlias.metadata),!0===this.findOptions.transaction&&(this.expressionMap.useTransaction=!0)}}async executeEntitiesAndRawResults(e){if(!this.expressionMap.mainAlias)throw new T.VR('Alias is not set. Use "from" method to set an alias.');if(("pessimistic_read"===this.expressionMap.lockMode||"pessimistic_write"===this.expressionMap.lockMode||"pessimistic_partial_write"===this.expressionMap.lockMode||"pessimistic_write_or_fail"===this.expressionMap.lockMode||"for_no_key_update"===this.expressionMap.lockMode||"for_key_share"===this.expressionMap.lockMode)&&!e.isTransactionActive)throw new c.A;if("optimistic"===this.expressionMap.lockMode){const e=this.expressionMap.mainAlias.metadata;if(!e.versionColumn&&!e.updateDateColumn)throw new l.G(e.name)}const t=new y(this.connection,e,this.expressionMap.relationIdAttributes),n=new b(this.connection,e,this.expressionMap.relationCountAttributes);new g(this.expressionMap).transform();new v(this.expressionMap).transform();let a=[],s=[];if((this.expressionMap.skip||this.expressionMap.take)&&this.expressionMap.joinAttributes.length>0){const[t,n]=this.createOrderByCombinedWithSelectExpression("distinctAlias"),r=this.expressionMap.mainAlias.metadata,s=this.expressionMap.mainAlias.name,o=r.primaryColumns.map((e=>{const t=this.escape("distinctAlias"),r=this.escape(i.I.buildAlias(this.connection.driver,s,e.databaseName));n[r]||(n[r]="ASC");const a=i.I.buildAlias(this.connection.driver,"ids_"+s,e.databaseName);return`${t}.${r} AS ${this.escape(a)}`}));if(a=await new R(this.connection,e).select(`DISTINCT ${o.join(", ")}`).addSelect(t).from(`(${this.clone().orderBy().getQuery()})`,"distinctAlias").offset(this.expressionMap.skip).limit(this.expressionMap.take).orderBy(n).cache(this.expressionMap.cache?this.expressionMap.cache:this.expressionMap.cacheId,this.expressionMap.cacheDuration).setParameters(this.getParameters()).setNativeParameters(this.expressionMap.nativeParameters).getRawMany(),a.length>0){let t="";const n={};if(r.hasMultiplePrimaryKeys)t=a.map(((e,t)=>r.primaryColumns.map((r=>{const i=`orm_distinct_ids_${t}_${r.databaseName}`;return n[i]=e[`ids_${s}_${r.databaseName}`],`${s}.${r.propertyPath}=:${i}`})).join(" AND "))).join(" OR ");else{const e=i.I.buildAlias(this.connection.driver,"ids_"+s,r.primaryColumns[0].databaseName),o=a.map((t=>t[e]));o.every((e=>"number"==typeof e))?t=`${s}.${r.primaryColumns[0].propertyPath} IN (${o.join(", ")})`:(n.orm_distinct_ids=o,t=s+"."+r.primaryColumns[0].propertyPath+" IN (:...orm_distinct_ids)")}a=await this.clone().mergeExpressionMap({extraAppendedAndWhereCondition:t}).setParameters(n).loadRawResults(e)}}else a=await this.loadRawResults(e);if(a.length>0){const r=await t.load(a),i=await n.load(a),c=new o(this.expressionMap,this.connection.driver,r,i,this.queryRunner);s=c.transform(a,this.expressionMap.mainAlias),!0===this.expressionMap.callListeners&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("Load",this.expressionMap.mainAlias.metadata,s)}return"query"===this.expressionMap.relationLoadStrategy&&await Promise.all(this.relationMetadatas.map((async e=>{const t=e.inverseEntityMetadata.target,n=e.inverseEntityMetadata.targetName,i=Array.isArray(this.findOptions.select)?r.m.propertyPathsToTruthyObject(this.findOptions.select):this.findOptions.select,a=Array.isArray(this.findOptions.relations)?r.m.propertyPathsToTruthyObject(this.findOptions.relations):this.findOptions.relations,o=this.createQueryBuilder().select(n).from(t,n).setFindOptions({select:i?r.m.deepValue(i,e.propertyPath):void 0,order:this.findOptions.order?r.m.deepValue(this.findOptions.order,e.propertyPath):void 0,relations:a?r.m.deepValue(a,e.propertyPath):void 0,withDeleted:this.findOptions.withDeleted,relationLoadStrategy:this.findOptions.relationLoadStrategy});if(s.length>0){const t=await this.connection.relationIdLoader.loadManyToManyRelationIdsAndGroup(e,s,void 0,o);s.forEach((n=>{const r=t.find((e=>e.entity===n));if(r){const t=void 0===r.related?null:r.related;e.setEntityValue(n,t)}}))}}))),{raw:a,entities:s}}createOrderByCombinedWithSelectExpression(e){const t=this.expressionMap.allOrderBys,n=Object.keys(t).map((t=>{if(-1!==t.indexOf(".")){const n=t.split("."),r=n[0],a=n.slice(1).join("."),s=this.expressionMap.findAliasByName(r).metadata.findColumnWithPropertyPath(a);return this.escape(e)+"."+this.escape(i.I.buildAlias(this.connection.driver,r,s.databaseName))}return this.expressionMap.selects.find((e=>e.selection===t||e.aliasName===t))?this.escape(e)+"."+t:""})).join(", "),r={};return Object.keys(t).forEach((n=>{if(-1!==n.indexOf(".")){const a=n.split("."),s=a[0],o=a.slice(1).join("."),c=this.expressionMap.findAliasByName(s).metadata.findColumnWithPropertyPath(o);r[this.escape(e)+"."+this.escape(i.I.buildAlias(this.connection.driver,s,c.databaseName))]=t[n]}else this.expressionMap.selects.find((e=>e.selection===n||e.aliasName===n))?r[this.escape(e)+"."+n]=t[n]:r[n]=t[n]})),[n,r]}async loadRawResults(e){const[t,n]=this.getQueryAndParameters(),r=t+" -- PARAMETERS: "+JSON.stringify(n),i="object"==typeof this.connection.options.cache?this.connection.options.cache:{};let a,s=!1;if(this.connection.queryResultCache&&(this.expressionMap.cache||i.alwaysEnabled))try{if(a=await this.connection.queryResultCache.getFromCache({identifier:this.expressionMap.cacheId,query:r,duration:this.expressionMap.cacheDuration||i.duration||1e3},e),a&&!this.connection.queryResultCache.isExpired(a))return JSON.parse(a.result)}catch(e){if(!i.ignoreErrors)throw e;s=!0}const o=await e.query(t,n,!0);if(!s&&this.connection.queryResultCache&&(this.expressionMap.cache||i.alwaysEnabled))try{await this.connection.queryResultCache.storeInCache({identifier:this.expressionMap.cacheId,query:r,time:(new Date).getTime(),duration:this.expressionMap.cacheDuration||i.duration||1e3,result:JSON.stringify(o.records)},a,e)}catch(e){if(!i.ignoreErrors)throw e}return o.records}mergeExpressionMap(e){return a.B.assign(this.expressionMap,e),this}normalizeNumber(e){return"number"==typeof e||null==e?e:Number(e)}obtainQueryRunner(){return this.queryRunner||this.connection.createQueryRunner("slave")}buildSelect(e,t,n,r){for(let i in e){if(void 0===e[i]||!1===e[i])continue;const a=r?r+"."+i:i,s=t.findColumnWithPropertyPathStrict(a),o=t.findEmbeddedWithPropertyPath(a),c=t.findRelationWithPropertyPath(a);if(!o&&!s&&!c)throw new C.K(a,t);s?this.selects.push(n+"."+a):o&&this.buildSelect(e[i],t,n,i)}}buildRelations(e,t,n,a,s){e&&Object.keys(e).forEach((o=>{const c=e[o],l=s?s+"."+o:o,u=n.findEmbeddedWithPropertyPath(l),d=n.findRelationWithPropertyPath(l);if(!u&&!d)throw new C.K(l,n);if(u)this.buildRelations(c,"object"==typeof t?r.m.deepValue(t,u.propertyPath):void 0,n,a,l);else if(d){let e=a+"_"+l.replace(".","_");e=i.I.buildAlias(this.connection.driver,{joiner:"__"},a,e),!0!==c&&"object"!=typeof c||("query"===this.expressionMap.relationLoadStrategy?this.relationMetadatas.push(d):(this.joins.push({type:"left",select:!0,selection:t&&"object"==typeof t[o]?t[o]:void 0,alias:e,parentAlias:a,relationMetadata:d}),t&&"object"==typeof t[o]&&this.buildSelect(t[o],d.inverseEntityMetadata,e))),"object"==typeof c&&"join"===this.expressionMap.relationLoadStrategy&&this.buildRelations(c,"object"==typeof t?r.m.deepValue(t,d.propertyPath):void 0,d.inverseEntityMetadata,e,void 0)}}))}buildEagerRelations(e,t,n,a,s){e&&Object.keys(e).forEach((o=>{const c=e[o],l=s?s+"."+o:o,u=n.findEmbeddedWithPropertyPath(l),d=n.findRelationWithPropertyPath(l);if(!u&&!d)throw new C.K(l,n);if(u)this.buildEagerRelations(c,"object"==typeof t?r.m.deepValue(t,u.propertyPath):void 0,n,a,l);else if(d){let e=a+"_"+l.replace(".","_");e=i.I.buildAlias(this.connection.driver,{joiner:"__"},a,e),!0!==c&&"object"!=typeof c||d.inverseEntityMetadata.eagerRelations.forEach((n=>{let r=e+"_"+n.propertyPath.replace(".","_");r=i.I.buildAlias(this.connection.driver,{joiner:"__"},e,r);this.joins.find((e=>e.alias===r))||this.joins.push({type:"left",select:!0,alias:r,parentAlias:e,selection:void 0,relationMetadata:n}),t&&"object"==typeof t[o]&&this.buildSelect(t[o],d.inverseEntityMetadata,e)})),"object"==typeof c&&this.buildEagerRelations(c,"object"==typeof t?r.m.deepValue(t,d.propertyPath):void 0,d.inverseEntityMetadata,e,void 0)}}))}buildOrder(e,t,n,r){for(let a in e){if(void 0===e[a])continue;const s=r?r+"."+a:a,o=t.findColumnWithPropertyPathStrict(s),c=t.findEmbeddedWithPropertyPath(s),l=t.findRelationWithPropertyPath(s);if(!c&&!o&&!l)throw new C.K(s,t);if(o){let t="object"==typeof e[a]?e[a].direction:e[a];t="DESC"===t||"desc"===t||-1===t?"DESC":"ASC";let r="object"==typeof e[a]?e[a].nulls:void 0;r="first"===(null==r?void 0:r.toLowerCase())?"NULLS FIRST":"last"===(null==r?void 0:r.toLowerCase())?"NULLS LAST":void 0,this.addOrderBy(`${n}.${s}`,t,r)}else if(c)this.buildOrder(e[a],t,n,s);else if(l){let t=n+"_"+s.replace(".","_");t=i.I.buildAlias(this.connection.driver,{joiner:"__"},n,t);this.joins.find((e=>e.alias===t))||this.joins.push({type:"left",select:!1,alias:t,parentAlias:n,selection:void 0,relationMetadata:l}),this.buildOrder(e[a],l.inverseEntityMetadata,t)}}}buildWhere(e,t,n,r){let a="";if(Array.isArray(e))a="("+e.map((e=>this.buildWhere(e,t,n,r))).filter((e=>!!e)).map((e=>"("+e+")")).join(" OR ")+")";else{let s=[];for(let a in e){if(void 0===e[a]||null===e[a])continue;const o=r?r+"."+a:a,c=t.findColumnWithPropertyPathStrict(o),l=t.findEmbeddedWithPropertyPath(o),u=t.findRelationWithPropertyPath(o);if(!l&&!c&&!u)throw new C.K(o,t);if(c){const t=`${n}.${o}`;let r=e[a];M.t.isEqualOperator(e[a])&&(r=e[a].value),c.transformer&&(r=N.W.transformTo(c.transformer,r)),s.push(this.createWhereConditionExpression(this.getWherePredicateCondition(t,r)))}else if(l){const r=this.buildWhere(e[a],t,n,o);r&&s.push(r)}else if(u){if("object"==typeof e[a]){if(Object.keys(e[a]).every((t=>void 0===e[a][t])))continue}if(M.t.isFindOperator(e[a]))if("moreThan"===e[a].type||"lessThan"===e[a].type){const t="moreThan"===e[a].type?">":"<",r=this.subQuery();if(u.isManyToManyOwner)r.select("COUNT(*)").from(u.joinTableName,u.joinTableName).where(u.joinColumns.map((e=>`${u.joinTableName}.${e.propertyName} = ${n}.${e.referencedColumn.propertyName}`)).join(" AND "));else if(u.isManyToManyNotOwner)r.select("COUNT(*)").from(u.inverseRelation.joinTableName,u.inverseRelation.joinTableName).where(u.inverseRelation.inverseJoinColumns.map((e=>`${u.inverseRelation.joinTableName}.${e.propertyName} = ${n}.${e.referencedColumn.propertyName}`)).join(" AND "));else{if(!u.isOneToMany)throw new Error("This relation isn't supported by given find operator");r.select("COUNT(*)").from(u.inverseEntityMetadata.target,u.inverseEntityMetadata.tableName).where(u.inverseRelation.joinColumns.map((e=>`${u.inverseEntityMetadata.tableName}.${e.propertyName} = ${n}.${e.referencedColumn.propertyName}`)).join(" AND "))}this.andWhere(r.getSql()+" "+t+" "+parseInt(e[a].value))}else{if(!(u.isManyToOne||u.isOneToOne&&u.isOneToOneOwner))throw new Error("This relation isn't supported by given find operator");{const t=`${n}.${o}`;s.push(this.createWhereConditionExpression(this.getWherePredicateCondition(t,e[a])))}}else{let t=n+"_"+u.propertyPath.replace(".","_");t=i.I.buildAlias(this.connection.driver,{joiner:"__"},n,t);const r=this.joins.find((e=>e.alias===t));r?"left"===r.type&&(r.type="inner"):this.joins.push({type:"inner",select:!1,selection:void 0,alias:t,parentAlias:n,relationMetadata:u});const o=this.buildWhere(e[a],u.inverseEntityMetadata,t);o&&s.push(o)}}}a=s.join(" AND ")}return a}}},79081:(e,t,n)=>{"use strict";n.d(t,{x:()=>p});var r=n(50504),i=n(46763),a=n(43025),s=n(89547),o=n(71365),c=n(3864),l=n(14268),u=n(26883),d=n(86740),h=n(5471);class p extends r.o{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("SoftDeleteQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createUpdateExpression();return e+=this.createCteExpression(),e+=this.createOrderByExpression(),e+=this.createLimitExpression(),e.trim()}async execute(){const e=this.obtainQueryRunner();let t=!1;try{!0===this.expressionMap.useTransaction&&!1===e.isTransactionActive&&(await e.startTransaction(),t=!0),!0===this.expressionMap.callListeners&&this.expressionMap.mainAlias.hasMetadata&&("soft-delete"===this.expressionMap.queryType?await e.broadcaster.broadcast("BeforeSoftRemove",this.expressionMap.mainAlias.metadata):"restore"===this.expressionMap.queryType&&await e.broadcaster.broadcast("BeforeRecover",this.expressionMap.mainAlias.metadata));const n=new s.V(e,this.expressionMap);!0===this.expressionMap.updateEntity&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=n.getSoftDeletionReturningColumns());const[r,a]=this.getQueryAndParameters(),o=await e.query(r,a,!0),c=i.L.from(o);return!0===this.expressionMap.updateEntity&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await n.update(c,this.expressionMap.whereEntities),!0===this.expressionMap.callListeners&&this.expressionMap.mainAlias.hasMetadata&&("soft-delete"===this.expressionMap.queryType?await e.broadcaster.broadcast("AfterSoftRemove",this.expressionMap.mainAlias.metadata):"restore"===this.expressionMap.queryType&&await e.broadcaster.broadcast("AfterRecover",this.expressionMap.mainAlias.metadata)),t&&await e.commitTransaction(),c}catch(n){if(t)try{await e.rollbackTransaction()}catch(e){}throw n}finally{e!==this.queryRunner&&await e.release()}}from(e,t){e=h.t.isEntitySchema(e)?e.options.name:e;const n=this.createFromAlias(e,t);return this.expressionMap.setMainAlias(n),this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("update"))throw new a.J;return this.expressionMap.returning=e,this}orderBy(e,t="ASC",n){return this.expressionMap.orderBys=e?"object"==typeof e?e:n?{[e]:{order:t,nulls:n}}:{[e]:t}:{},this}addOrderBy(e,t="ASC",n){return this.expressionMap.orderBys[e]=n?{order:t,nulls:n}:t,this}limit(e){return this.expressionMap.limit=e,this}whereEntity(e){if(!this.expressionMap.mainAlias.hasMetadata)throw new u.VR(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const t=Array.isArray(e)?e:[e];return t.forEach((e=>{const t=this.expressionMap.mainAlias.metadata.getEntityIdMap(e);if(!t)throw new u.VR("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(t)})),this.expressionMap.whereEntities=t,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}createUpdateExpression(){const e=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0;if(!e)throw new u.VR(`Cannot get entity metadata for the given alias "${this.expressionMap.mainAlias}"`);if(!e.deleteDateColumn)throw new c.A(e);const t=[];switch(this.expressionMap.queryType){case"soft-delete":t.push(this.escape(e.deleteDateColumn.databaseName)+" = CURRENT_TIMESTAMP");break;case"restore":t.push(this.escape(e.deleteDateColumn.databaseName)+" = NULL");break;default:throw new u.VR('The queryType must be "soft-delete" or "restore"')}if(e.versionColumn&&t.push(this.escape(e.versionColumn.databaseName)+" = "+this.escape(e.versionColumn.databaseName)+" + 1"),e.updateDateColumn&&t.push(this.escape(e.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"),t.length<=0)throw new l.E;const n=this.createWhereExpression(),r=this.createReturningExpression("update");return""===r?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")}${n}`:"mssql"===this.connection.driver.options.type?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")} OUTPUT ${r}${n}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${t.join(", ")}${n} RETURNING ${r}`}createOrderByExpression(){const e=this.expressionMap.orderBys;return Object.keys(e).length>0?" ORDER BY "+Object.keys(e).map((t=>"string"==typeof e[t]?this.replacePropertyNames(t)+" "+e[t]:this.replacePropertyNames(t)+" "+e[t].order+" "+e[t].nulls)).join(", "):""}createLimitExpression(){let e=this.expressionMap.limit;if(e){if(d.I.isMySQLFamily(this.connection.driver))return" LIMIT "+e;throw new o.r}return""}}},61035:(e,t,n)=>{"use strict";n.d(t,{b:()=>p});var r=n(50504),i=n(46763),a=n(43025),s=n(89547),o=n(71365),c=n(14268),l=n(26883),u=n(45200),d=n(86740),h=n(1048).Buffer;class p extends r.o{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("UpdateQueryBuilder"),this.expressionMap.aliasNamePrefixingEnabled=!1}getQuery(){let e=this.createComment();return e+=this.createCteExpression(),e+=this.createUpdateExpression(),e+=this.createOrderByExpression(),e+=this.createLimitExpression(),e.trim()}async execute(){const e=this.obtainQueryRunner();let t=!1;try{!0===this.expressionMap.useTransaction&&!1===e.isTransactionActive&&(await e.startTransaction(),t=!0),!0===this.expressionMap.callListeners&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("BeforeUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet);let n=null,r=null;const a=new s.V(e,this.expressionMap),o=[];if(Array.isArray(this.expressionMap.returning)&&this.expressionMap.mainAlias.hasMetadata)for(const e of this.expressionMap.returning)o.push(...this.expressionMap.mainAlias.metadata.findColumnsWithPropertyPath(e));!0===this.expressionMap.updateEntity&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&(this.expressionMap.extraReturningColumns=a.getUpdationReturningColumns(),o.push(...this.expressionMap.extraReturningColumns.filter((e=>!o.includes(e))))),o.length>0&&"mssql"===this.connection.driver.options.type&&(n=this.connection.driver.buildTableVariableDeclaration("@OutputTable",o),r="SELECT * FROM @OutputTable");const[c,l]=this.getQueryAndParameters(),u=[n,c,r],d=await e.query(u.filter((e=>null!=e)).join(";\n\n"),l,!0),h=i.L.from(d);return!0===this.expressionMap.updateEntity&&this.expressionMap.mainAlias.hasMetadata&&this.expressionMap.whereEntities.length>0&&await a.update(h,this.expressionMap.whereEntities),!0===this.expressionMap.callListeners&&this.expressionMap.mainAlias.hasMetadata&&await e.broadcaster.broadcast("AfterUpdate",this.expressionMap.mainAlias.metadata,this.expressionMap.valuesSet),t&&await e.commitTransaction(),h}catch(n){if(t)try{await e.rollbackTransaction()}catch(e){}throw n}finally{e!==this.queryRunner&&await e.release()}}set(e){return this.expressionMap.valuesSet=e,this}where(e,t){this.expressionMap.wheres=[];const n=this.getWhereCondition(e);return n&&(this.expressionMap.wheres=[{type:"simple",condition:n}]),t&&this.setParameters(t),this}andWhere(e,t){return this.expressionMap.wheres.push({type:"and",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}orWhere(e,t){return this.expressionMap.wheres.push({type:"or",condition:this.getWhereCondition(e)}),t&&this.setParameters(t),this}whereInIds(e){return this.where(this.getWhereInIdsCondition(e))}andWhereInIds(e){return this.andWhere(this.getWhereInIdsCondition(e))}orWhereInIds(e){return this.orWhere(this.getWhereInIdsCondition(e))}output(e){return this.returning(e)}returning(e){if(!this.connection.driver.isReturningSqlSupported("update"))throw new a.J;return this.expressionMap.returning=e,this}orderBy(e,t="ASC",n){return this.expressionMap.orderBys=e?"object"==typeof e?e:n?{[e]:{order:t,nulls:n}}:{[e]:t}:{},this}addOrderBy(e,t="ASC",n){return this.expressionMap.orderBys[e]=n?{order:t,nulls:n}:t,this}limit(e){return this.expressionMap.limit=e,this}whereEntity(e){if(!this.expressionMap.mainAlias.hasMetadata)throw new l.VR(".whereEntity method can only be used on queries which update real entity table.");this.expressionMap.wheres=[];const t=Array.isArray(e)?e:[e];return t.forEach((e=>{const t=this.expressionMap.mainAlias.metadata.getEntityIdMap(e);if(!t)throw new l.VR("Provided entity does not have ids set, cannot perform operation.");this.orWhereInIds(t)})),this.expressionMap.whereEntities=t,this}updateEntity(e){return this.expressionMap.updateEntity=e,this}createUpdateExpression(){const e=this.getValueSet(),t=this.expressionMap.mainAlias.hasMetadata?this.expressionMap.mainAlias.metadata:void 0,n={};for(let t in e)void 0!==e[t]&&(n[t]=e[t]);const r=[],i=[];if(t?(this.createPropertyPath(t,n).forEach((e=>{const a=t.findColumnsWithPropertyPath(e);if(a.length<=0)throw new u.K(e,t);a.forEach((e=>{if(!e.isUpdate||i.includes(e))return;i.push(e);let t=e.getEntityValue(n);if(!e.referencedColumn||"object"!=typeof t||t instanceof Date||null===t||h.isBuffer(t)?"function"!=typeof t&&(t=this.connection.driver.preparePersistentValue(t,e)):t=e.referencedColumn.getEntityValue(t),"function"==typeof t)r.push(this.escape(e.databaseName)+" = "+t());else if("sap"!==this.connection.driver.options.type&&"spanner"!==this.connection.driver.options.type||null!==t){"mssql"===this.connection.driver.options.type&&(t=this.connection.driver.parametrizeValue(e,t));const n=this.createParameter(t);let i=null;if(!d.I.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type||-1===this.connection.driver.spatialTypes.indexOf(e.type))i="postgres"===this.connection.driver.options.type&&-1!==this.connection.driver.spatialTypes.indexOf(e.type)?null!=e.srid?`ST_SetSRID(ST_GeomFromGeoJSON(${n}), ${e.srid})::${e.type}`:`ST_GeomFromGeoJSON(${n})::${e.type}`:"mssql"===this.connection.driver.options.type&&-1!==this.connection.driver.spatialTypes.indexOf(e.type)?e.type+"::STGeomFromText("+n+", "+(e.srid||"0")+")":n;else{const t=this.connection.driver.options.legacySpatialSupport?"GeomFromText":"ST_GeomFromText";i=null!=e.srid?`${t}(${n}, ${e.srid})`:`${t}(${n})`}r.push(this.escape(e.databaseName)+" = "+i)}else r.push(this.escape(e.databaseName)+" = NULL")}))})),(r.length>0||0===Object.keys(n).length)&&(t.versionColumn&&-1===i.indexOf(t.versionColumn)&&r.push(this.escape(t.versionColumn.databaseName)+" = "+this.escape(t.versionColumn.databaseName)+" + 1"),t.updateDateColumn&&-1===i.indexOf(t.updateDateColumn)&&r.push(this.escape(t.updateDateColumn.databaseName)+" = CURRENT_TIMESTAMP"))):Object.keys(n).map((e=>{let t=n[e];if("function"==typeof t)r.push(this.escape(e)+" = "+t());else if("sap"!==this.connection.driver.options.type&&"spanner"!==this.connection.driver.options.type||null!==t){const n=this.createParameter(t);r.push(this.escape(e)+" = "+n)}else r.push(this.escape(e)+" = NULL")})),r.length<=0)throw new c.E;const a=this.createWhereExpression(),s=this.createReturningExpression("update");return""===s?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${r.join(", ")}${a}`:"mssql"===this.connection.driver.options.type?`UPDATE ${this.getTableName(this.getMainTableName())} SET ${r.join(", ")} OUTPUT ${s}${a}`:`UPDATE ${this.getTableName(this.getMainTableName())} SET ${r.join(", ")}${a} RETURNING ${s}`}createOrderByExpression(){const e=this.expressionMap.orderBys;return Object.keys(e).length>0?" ORDER BY "+Object.keys(e).map((t=>"string"==typeof e[t]?this.replacePropertyNames(t)+" "+e[t]:this.replacePropertyNames(t)+" "+e[t].order+" "+e[t].nulls)).join(", "):""}createLimitExpression(){let e=this.expressionMap.limit;if(e){if(d.I.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type)return" LIMIT "+e;throw new o.r}return""}getValueSet(){if("object"==typeof this.expressionMap.valuesSet)return this.expressionMap.valuesSet;throw new c.E}}},25579:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});var r=n(77253),i=n(91481),a=n(93499);class s{constructor(e,t){this.expressionMap=e,i.B.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!r.n.isAliasProperty(this.relationName))throw new a.V("Given value must be a string representation of alias property");return this.relationName.split(".")[0]}get relationProperty(){if(!r.n.isAliasProperty(this.relationName))throw new a.V("Given value is a string representation of alias property");return this.relationName.split(".")[1]}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rc"}get relation(){if(!r.n.isAliasProperty(this.relationName))throw new a.V("Given value is a string representation of alias property");const[e,t]=this.relationName.split("."),n=this.expressionMap.findAliasByName(e).metadata.findRelationWithPropertyPath(t);if(!n)throw new a.V(`Relation with property path ${t} in entity was not found.`);return n}get metadata(){if(!r.n.isAliasProperty(this.relationName))throw new a.V("Given value is a string representation of alias property");const e=this.relationName.split(".")[0];return this.expressionMap.findAliasByName(e).metadata}get mapToPropertyPropertyName(){return this.mapToProperty.split(".")[1]}}},34851:(e,t,n)=>{"use strict";n.d(t,{q:()=>s});var r=n(77253),i=n(91481),a=n(93499);class s{constructor(e,t){this.queryExpressionMap=e,this.disableMixedMap=!1,i.B.assign(this,t||{})}get joinInverseSideMetadata(){return this.relation.inverseEntityMetadata}get parentAlias(){if(!r.n.isAliasProperty(this.relationName))throw new a.V("Given value must be a string representation of alias property");return this.relationName.substr(0,this.relationName.indexOf("."))}get relationPropertyPath(){if(!r.n.isAliasProperty(this.relationName))throw new a.V("Given value must be a string representation of alias property");return this.relationName.substr(this.relationName.indexOf(".")+1)}get relation(){if(!r.n.isAliasProperty(this.relationName))throw new a.V("Given value must be a string representation of alias property");const e=this.queryExpressionMap.findAliasByName(this.parentAlias).metadata.findRelationWithPropertyPath(this.relationPropertyPath);if(!e)throw new a.V(`Relation with property path ${this.relationPropertyPath} in entity was not found.`);return e}get junctionAlias(){const[e,t]=this.relationName.split(".");return e+"_"+t+"_rid"}get junctionMetadata(){return this.relation.junctionEntityMetadata}get mapToPropertyParentAlias(){return this.mapToProperty.substr(0,this.mapToProperty.indexOf("."))}get mapToPropertyPropertyPath(){return this.mapToProperty.substr(this.mapToProperty.indexOf(".")+1)}}},38689:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});class r{static from(e){const t=new this;return t.raw=e.records,t.affected=e.affected,t}}},49015:(e,t,n)=>{"use strict";n.d(t,{T:()=>r});class r{constructor(){this.identifiers=[],this.generatedMaps=[]}static from(e){const t=new this;return t.raw=e.raw,t}}},46763:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});class r{constructor(){this.generatedMaps=[]}static from(e){const t=new this;return t.raw=e.records,t.affected=e.affected,t}}},1746:(e,t,n)=>{"use strict";n.d(t,{M:()=>r});class r{constructor(){this.count=0,this.promises=[]}async wait(){return this.promises.length>0&&await Promise.all(this.promises),this}}},88272:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});class r{static transformFrom(e,t){if(Array.isArray(e)){return e.slice().reverse().reduce(((e,t)=>t.from(e)),t)}return e.from(t)}static transformTo(e,t){return Array.isArray(e)?e.reduce(((e,t)=>t.to(e)),t):e.to(t)}}},5471:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});class r{static isMssqlParameter(e){return this.check(e,"MssqlParameter")}static isEntityMetadata(e){return this.check(e,"EntityMetadata")}static isColumnMetadata(e){return this.check(e,"ColumnMetadata")}static isQueryBuilder(e){return this.check(e,"QueryBuilder")||this.check(e,"SelectQueryBuilder")||this.check(e,"InsertQueryBuilder")||this.check(e,"DeleteQueryBuilder")||this.check(e,"UpdateQueryBuilder")||this.check(e,"SoftDeleteQueryBuilder")||this.check(e,"RelationQueryBuilder")}static isSelectQueryBuilder(e){return this.check(e,"SelectQueryBuilder")}static isInsertQueryBuilder(e){return this.check(e,"InsertQueryBuilder")}static isDeleteQueryBuilder(e){return this.check(e,"DeleteQueryBuilder")}static isUpdateQueryBuilder(e){return this.check(e,"UpdateQueryBuilder")}static isSoftDeleteQueryBuilder(e){return this.check(e,"SoftDeleteQueryBuilder")}static isRelationQueryBuilder(e){return this.check(e,"RelationQueryBuilder")}static isBrackets(e){return this.check(e,"Brackets")||this.check(e,"NotBrackets")}static isNotBrackets(e){return this.check(e,"NotBrackets")}static isSubject(e){return this.check(e,"Subject")}static isRdbmsSchemaBuilder(e){return this.check(e,"RdbmsSchemaBuilder")}static isMongoEntityManager(e){return this.check(e,"MongoEntityManager")}static isSqljsEntityManager(e){return this.check(e,"SqljsEntityManager")}static isEntitySchema(e){return this.check(e,"EntitySchema")}static isBaseEntityConstructor(e){return"function"==typeof e&&"function"==typeof e.hasId&&"function"==typeof e.save&&"function"==typeof e.useDataSource}static isFindOperator(e){return this.check(e,"FindOperator")||this.check(e,"EqualOperator")}static isEqualOperator(e){return this.check(e,"EqualOperator")}static isQuery(e){return this.check(e,"Query")}static isTable(e){return this.check(e,"Table")}static isTableCheck(e){return this.check(e,"TableCheck")}static isTableColumn(e){return this.check(e,"TableColumn")}static isTableExclusion(e){return this.check(e,"TableExclusion")}static isTableForeignKey(e){return this.check(e,"TableForeignKey")}static isTableIndex(e){return this.check(e,"TableIndex")}static isTableUnique(e){return this.check(e,"TableUnique")}static isView(e){return this.check(e,"View")}static isDataSource(e){return this.check(e,"DataSource")}static check(e,t){return"object"==typeof e&&null!==e&&e["@instanceof"]===Symbol.for(t)}}},91481:(e,t,n)=>{"use strict";n.d(t,{B:()=>r});class r{static isObject(e){return null!==e&&"object"==typeof e}static assign(e,...t){for(const n of t)for(const t of Object.getOwnPropertyNames(n))e[t]=n[t]}static mixedListToArray(e){return null!==e&&"object"==typeof e?Object.keys(e).map((t=>e[t])):e}}},33324:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});class r{static chunk(e,t){return Array.from(Array(Math.ceil(e.length/t)),((n,r)=>e.slice(r*t,r*t+t)))}static splitClassesAndStrings(e){return[e.filter((e=>"string"!=typeof e)),e.filter((e=>"string"==typeof e))]}static groupBy(e,t){return e.reduce(((e,n)=>{const r=t(n);let i=e.find((e=>e.id===r));return i||(i={id:r,items:[]},e.push(i)),i.items.push(n),e}),[])}static uniq(e,t){return e.reduce(((e,n)=>{let r=!1;if("function"==typeof t){const i=t(n);r=!!e.find((e=>t(e)===i))}else r="string"==typeof t?!!e.find((e=>e[t]===n[t])):-1!==e.indexOf(n);return r||e.push(n),e}),[])}static isPlainObject(e){return null!=e&&(!e.constructor||e.constructor===Object)}static mergeArrayKey(e,t,n,r){r.has(n)?e[t]=r.get(n):n instanceof Promise||(this.isPlainObject(n)||Array.isArray(n)?(e[t]||(e[t]=Array.isArray(n)?[]:{}),r.set(n,e[t]),this.merge(e[t],n,r),r.delete(n)):e[t]=n)}static mergeObjectKey(e,t,n,r){r.has(n)?Object.assign(e,{[t]:r.get(n)}):n instanceof Promise||(this.isPlainObject(n)||Array.isArray(n)?(e[t]||Object.assign(e,{[t]:Array.isArray(n)?[]:{}}),r.set(n,e[t]),this.merge(e[t],n,r),r.delete(n)):Object.assign(e,{[t]:n}))}static merge(e,t,n=new Map){if(this.isPlainObject(e)&&this.isPlainObject(t))for(const r of Object.keys(t))"__proto__"!==r&&this.mergeObjectKey(e,r,t[r],n);if(Array.isArray(e)&&Array.isArray(t))for(let r=0;r<t.length;r++)this.mergeArrayKey(e,r,t[r],n)}static mergeDeep(e,...t){if(!t.length)return e;for(const n of t)r.merge(e,n);return e}static deepCompare(...e){let t,n,r,i;if(arguments.length<1)return!0;for(t=1,n=arguments.length;t<n;t++)if(r=[],i=[],!this.compare2Objects(r,i,arguments[0],arguments[t]))return!1;return!0}static deepValue(e,t){const n=t.split(".");for(let t=0,r=n.length;t<r;t++)e=e[n[t]];return e}static replaceEmptyObjectsWithBooleans(e){for(let t in e)e[t]&&"object"==typeof e[t]&&(0===Object.keys(e[t]).length?e[t]=!0:this.replaceEmptyObjectsWithBooleans(e[t]))}static propertyPathsToTruthyObject(e){let t={};for(let n of e){const e=n.split(".");if(!e.length)continue;t[e[0]]&&!0!==t[e[0]]||(t[e[0]]={});let r=t[e[0]];for(let[t,n]of e.entries())0!==t&&(r[n]?r=r[n]:t===e.length-1?(r[n]={},r=null):(r[n]={},r=r[n]))}return this.replaceEmptyObjectsWithBooleans(t),t}static compareIds(e,t){return null!=e&&null!=t&&(("string"==typeof e.id&&"string"==typeof t.id||"number"==typeof e.id&&"number"==typeof t.id)&&1===Object.keys(e).length&&1===Object.keys(t).length?e.id===t.id:r.deepCompare(e,t))}static toBoolean(e){return"boolean"==typeof e?e:"string"==typeof e?"true"===e||"1"===e:"number"==typeof e&&e>0}static zipObject(e,t){return e.reduce(((e,n,r)=>(e[n]=t[r],e)),{})}static isArraysEqual(e,t){return e.length===t.length&&e.every((e=>-1!==t.indexOf(e)))}static areMutuallyExclusive(...e){return!e.some((t=>{const n=e.filter((e=>e!==t));return t.some((e=>n.some((t=>t.includes(e)))))}))}static compare2Objects(e,t,n,r){let i;if(Number.isNaN(n)&&Number.isNaN(r))return!0;if(n===r)return!0;if(null===n||null===r||void 0===n||void 0===r)return!1;if(("function"==typeof n.equals||"function"==typeof n.equals)&&n.equals(r))return!0;if("function"==typeof n&&"function"==typeof r||n instanceof Date&&r instanceof Date||n instanceof RegExp&&r instanceof RegExp||"string"==typeof n&&"string"==typeof r||"number"==typeof n&&"number"==typeof r)return n.toString()===r.toString();if("object"!=typeof n||"object"!=typeof r)return!1;if(n.isPrototypeOf(r)||r.isPrototypeOf(n))return!1;if(n.constructor!==r.constructor)return!1;if(n.prototype!==r.prototype)return!1;if(e.indexOf(n)>-1||t.indexOf(r)>-1)return!1;for(i in r){if(r.hasOwnProperty(i)!==n.hasOwnProperty(i))return!1;if(typeof r[i]!=typeof n[i])return!1}for(i in n){if(r.hasOwnProperty(i)!==n.hasOwnProperty(i))return!1;if(typeof r[i]!=typeof n[i])return!1;switch(typeof n[i]){case"object":case"function":if(e.push(n),t.push(r),!this.compare2Objects(e,t,n[i],r[i]))return!1;e.pop(),t.pop();break;default:if(n[i]!==r[i])return!1}}return!0}}},24783:(e,t,n)=>{"use strict";n.d(t,{LW:()=>s,ml:()=>c,nx:()=>o,tW:()=>l,xQ:()=>a});var r=n(13229),i=n.n(r);function a(e,t=!1){return e.replace(/^([A-Z])|[\s-_](\w)/g,(function(e,n,r,i){return!0===t&&0===i?n:r?r.toUpperCase():n.toLowerCase()}))}function s(e){return e.replace(/([A-Z])([A-Z])([a-z])/g,"$1_$2$3").replace(/([a-z0-9])([A-Z])/g,"$1_$2").toLowerCase()}function o(e){return e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()))}function c(e,t={}){const{segmentLength:n=4,separator:r="__",termLength:i=2}=t;return e.split(r).reduce(((e,t)=>{const r=t.replace(/([a-z\xE0-\xFF])([A-Z\xC0-\xDF])/g,"$1 $2").split(" "),a=r.length>1?i:n,s=r.map((e=>e.substr(0,a))).join("");return e.push(s),e}),[]).join(r)}function l(e,t={}){const n=i()("sha256");n.update(e,"utf8");const r=n.digest("hex");return t.length?r.slice(0,t.length):r}},1572:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});class r{static isGreaterOrEqual(e,t){const n=i(e),r=i(t);return n[0]>r[0]||n[0]===r[0]&&n[1]>r[1]||n[0]===r[0]&&n[1]===r[1]&&n[2]>=r[2]}}function i(e=""){const t=[0,0,0];return e.split(".").forEach(((e,n)=>t[n]=parseInt(e,10))),t}},21939:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletSDK=void 0;const r=n(84243),i=n(96691),a=n(29740),s=n(69030),o=n(90466),c=n(96182),l=n(78152),u=n(37344),d=n(62253),h=n(80104),p=n(14892);class f{constructor(e){var t,n,r;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;const o=e.linkAPIUrl||i.LINK_API_URL;void 0===e.overrideIsMetaMask?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=e.overrideIsMetaMask,this._overrideIsCoinbaseWallet=null===(t=e.overrideIsCoinbaseWallet)||void 0===t||t,this._overrideIsCoinbaseBrowser=null!==(n=e.overrideIsCoinbaseBrowser)&&void 0!==n&&n,this._diagnosticLogger=e.diagnosticLogger,this._reloadOnDisconnect=null===(r=e.reloadOnDisconnect)||void 0===r||r;const m=new URL(o),y=`${m.protocol}//${m.host}`;if(this._storage=new s.ScopedLocalStorage(`-walletlink:${y}`),this._storage.setItem("version",f.VERSION),this.walletExtension||this.coinbaseBrowser)return;this._relayEventManager=new u.RelayEventManager;const g=(0,a.isMobileWeb)(),b=e.uiConstructor||(e=>g?new l.MobileRelayUI(e):new d.WalletLinkRelayUI(e)),v={linkAPIUrl:o,version:p.LIB_VERSION,darkMode:!!e.darkMode,uiConstructor:b,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger,reloadOnDisconnect:this._reloadOnDisconnect,enableMobileWalletLink:e.enableMobileWalletLink};this._relay=g?new c.MobileRelay(v):new h.WalletLinkRelay(v),this.setAppInfo(e.appName,e.appLogoUrl),e.headlessMode||this._relay.attachUI()}makeWeb3Provider(e="",t=1){const n=this.walletExtension;if(n)return this.isCipherProvider(n)||n.setProviderInfo(e,t),!1===this._reloadOnDisconnect&&"function"==typeof n.disableReloadOnDisconnect&&n.disableReloadOnDisconnect(),n;const r=this.coinbaseBrowser;if(r)return r;const i=this._relay;if(!i||!this._relayEventManager||!this._storage)throw new Error("Relay not initialized, should never happen");return e||i.setConnectDisabled(!0),new o.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(i),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:e,chainId:t,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(e,t){var n;this._appName=e||"DApp",this._appLogoUrl=t||(0,a.getFavicon)();const r=this.walletExtension;r?this.isCipherProvider(r)||r.setAppInfo(this._appName,this._appLogoUrl):null===(n=this._relay)||void 0===n||n.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var e;const t=null==this?void 0:this.walletExtension;t?t.close():null===(e=this._relay)||void 0===e||e.resetAndReload()}getQrUrl(){var e,t;return null!==(t=null===(e=this._relay)||void 0===e?void 0:e.getQRCodeUrl())&&void 0!==t?t:null}getCoinbaseWalletLogo(e,t=240){return(0,r.walletLogo)(e,t)}get walletExtension(){var e;return null!==(e=window.coinbaseWalletExtension)&&void 0!==e?e:window.walletLinkExtension}get coinbaseBrowser(){var e,t;try{const n=null!==(e=window.ethereum)&&void 0!==e?e:null===(t=window.top)||void 0===t?void 0:t.ethereum;if(!n)return;return"isCoinbaseBrowser"in n&&n.isCoinbaseBrowser?n:void 0}catch(e){return}}isCipherProvider(e){return"boolean"==typeof e.isCipher&&e.isCipher}}t.CoinbaseWalletSDK=f,f.VERSION=p.LIB_VERSION},84243:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.walletLogo=void 0;t.walletLogo=(e,t)=>{let n;switch(e){case"standard":default:return n=t,`data:image/svg+xml,%3Csvg width='${t}' height='${n}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return n=t,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${n}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return n=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return n=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return n=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return n=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`}}},96691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LINK_API_URL=void 0,t.LINK_API_URL="https://www.walletlink.org"},47778:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.standardErrorCodes=void 0,t.standardErrorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}}},63496:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.standardErrors=void 0;const r=n(47778),i=n(66394);function a(e,t){const[n,r]=o(t);return new c(e,n||(0,i.getMessageFromCode)(e),r)}function s(e,t){const[n,r]=o(t);return new l(e,n||(0,i.getMessageFromCode)(e),r)}function o(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}t.standardErrors={rpc:{parse:e=>a(r.standardErrorCodes.rpc.parse,e),invalidRequest:e=>a(r.standardErrorCodes.rpc.invalidRequest,e),invalidParams:e=>a(r.standardErrorCodes.rpc.invalidParams,e),methodNotFound:e=>a(r.standardErrorCodes.rpc.methodNotFound,e),internal:e=>a(r.standardErrorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return a(t,e)},invalidInput:e=>a(r.standardErrorCodes.rpc.invalidInput,e),resourceNotFound:e=>a(r.standardErrorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>a(r.standardErrorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>a(r.standardErrorCodes.rpc.transactionRejected,e),methodNotSupported:e=>a(r.standardErrorCodes.rpc.methodNotSupported,e),limitExceeded:e=>a(r.standardErrorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>s(r.standardErrorCodes.provider.userRejectedRequest,e),unauthorized:e=>s(r.standardErrorCodes.provider.unauthorized,e),unsupportedMethod:e=>s(r.standardErrorCodes.provider.unsupportedMethod,e),disconnected:e=>s(r.standardErrorCodes.provider.disconnected,e),chainDisconnected:e=>s(r.standardErrorCodes.provider.chainDisconnected,e),unsupportedChain:e=>s(r.standardErrorCodes.provider.unsupportedChain,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:r}=e;if(!n||"string"!=typeof n)throw new Error('"message" must be a nonempty string');return new l(t,n,r)}}};class c extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==n&&(this.data=n)}}class l extends c{constructor(e,t,n){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,n)}}},2719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.standardErrors=t.standardErrorCodes=t.serializeError=t.getMessageFromCode=t.getErrorCode=void 0;const r=n(47778);Object.defineProperty(t,"standardErrorCodes",{enumerable:!0,get:function(){return r.standardErrorCodes}});const i=n(63496);Object.defineProperty(t,"standardErrors",{enumerable:!0,get:function(){return i.standardErrors}});const a=n(95085);Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return a.serializeError}});const s=n(66394);Object.defineProperty(t,"getErrorCode",{enumerable:!0,get:function(){return s.getErrorCode}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return s.getMessageFromCode}})},95085:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=void 0;const r=n(42331),i=n(14892),a=n(47778),s=n(66394);t.serializeError=function(e,t){const n=(0,s.serialize)(function(e){if("string"==typeof e)return{message:e,code:a.standardErrorCodes.rpc.internal};if((0,r.isErrorResponse)(e))return Object.assign(Object.assign({},e),{message:e.errorMessage,code:e.errorCode,data:{method:e.method}});return e}(e),{shouldIncludeStack:!0}),o=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");o.searchParams.set("version",i.LIB_VERSION),o.searchParams.set("code",n.code.toString());const c=function(e,t){const n=null==e?void 0:e.method;if(n)return n;if(void 0===t)return;if("string"==typeof t)return t;if(!Array.isArray(t))return t.method;if(t.length>0)return t[0].method;return}(n.data,t);return c&&o.searchParams.set("method",c),o.searchParams.set("message",n.message),Object.assign(Object.assign({},n),{docUrl:o.href})}},66394:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.getErrorCode=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const r=n(47778),i="Unspecified error message.";function a(e,n=i){if(e&&Number.isInteger(e)){const n=e.toString();if(l(r.errorValues,n))return r.errorValues[n].message;if(o(e))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return n}function s(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!r.errorValues[t]||!!o(e)}function o(e){return e>=-32099&&e<=-32e3}function c(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){return"object"==typeof e&&null!==e&&t in e&&"string"==typeof e[t]}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=a,t.isValidCode=s,t.getErrorCode=function(e){var t;return"number"==typeof e?e:function(e){return"object"==typeof e&&null!==e&&("number"==typeof e.code||"number"==typeof e.errorCode)}(e)?null!==(t=e.code)&&void 0!==t?t:e.errorCode:void 0},t.serialize=function(e,{shouldIncludeStack:t=!1}={}){const n={};if(e&&"object"==typeof e&&!Array.isArray(e)&&l(e,"code")&&s(e.code)){const t=e;n.code=t.code,t.message&&"string"==typeof t.message?(n.message=t.message,l(t,"data")&&(n.data=t.data)):(n.message=a(n.code),n.data={originalError:c(e)})}else n.code=r.standardErrorCodes.rpc.internal,n.message=u(e,"message")?e.message:i,n.data={originalError:c(e)};return t&&(n.stack=u(e,"stack")?e.stack:void 0),n}},6496:(e,t)=>{"use strict";function n(){return e=>e}var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ProviderType=t.RegExpString=t.IntNumber=t.BigIntString=t.AddressString=t.HexString=t.OpaqueType=void 0,t.OpaqueType=n,t.HexString=e=>e,t.AddressString=e=>e,t.BigIntString=e=>e,t.IntNumber=function(e){return Math.floor(e)},t.RegExpString=e=>e,function(e){e.CoinbaseWallet="CoinbaseWallet",e.MetaMask="MetaMask",e.Unselected=""}(r||(t.ProviderType=r={}))},29740:function(e,t,n){"use strict";var r=n(1048).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isMobileWeb=t.getLocation=t.isInIFrame=t.createQrUrl=t.getFavicon=t.range=t.isBigNumber=t.ensureParsedJSONObject=t.ensureBN=t.ensureRegExpString=t.ensureIntNumber=t.ensureBuffer=t.ensureAddressString=t.ensureEvenLengthHexString=t.ensureHexString=t.isHexString=t.prepend0x=t.strip0x=t.has0xPrefix=t.hexStringFromIntNumber=t.intNumberFromHexString=t.bigIntStringFromBN=t.hexStringFromBuffer=t.hexStringToUint8Array=t.uint8ArrayToHex=t.randomBytesHex=void 0;const a=i(n(82823)),s=n(2719),o=n(6496),c=/^[0-9]*$/,l=/^[a-f0-9]*$/;function u(e){return[...e].map((e=>e.toString(16).padStart(2,"0"))).join("")}function d(e){return e.startsWith("0x")||e.startsWith("0X")}function h(e){return d(e)?e.slice(2):e}function p(e){return d(e)?`0x${e.slice(2)}`:`0x${e}`}function f(e){if("string"!=typeof e)return!1;const t=h(e).toLowerCase();return l.test(t)}function m(e,t=!1){if("string"==typeof e){const n=h(e).toLowerCase();if(l.test(n))return(0,o.HexString)(t?`0x${n}`:n)}throw s.standardErrors.rpc.invalidParams(`"${String(e)}" is not a hexadecimal string`)}function y(e,t=!1){let n=m(e,!1);return n.length%2==1&&(n=(0,o.HexString)(`0${n}`)),t?(0,o.HexString)(`0x${n}`):n}function g(e){if("number"==typeof e&&Number.isInteger(e))return(0,o.IntNumber)(e);if("string"==typeof e){if(c.test(e))return(0,o.IntNumber)(Number(e));if(f(e))return(0,o.IntNumber)(new a.default(y(e,!1),16).toNumber())}throw s.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)}function b(e){if(null==e||"function"!=typeof e.constructor)return!1;const{constructor:t}=e;return"function"==typeof t.config&&"number"==typeof t.EUCLID}function v(){try{return null!==window.frameElement}catch(e){return!1}}t.randomBytesHex=function(e){return u(crypto.getRandomValues(new Uint8Array(e)))},t.uint8ArrayToHex=u,t.hexStringToUint8Array=function(e){return new Uint8Array(e.match(/.{1,2}/g).map((e=>parseInt(e,16))))},t.hexStringFromBuffer=function(e,t=!1){const n=e.toString("hex");return(0,o.HexString)(t?`0x${n}`:n)},t.bigIntStringFromBN=function(e){return(0,o.BigIntString)(e.toString(10))},t.intNumberFromHexString=function(e){return(0,o.IntNumber)(new a.default(y(e,!1),16).toNumber())},t.hexStringFromIntNumber=function(e){return(0,o.HexString)(`0x${new a.default(e).toString(16)}`)},t.has0xPrefix=d,t.strip0x=h,t.prepend0x=p,t.isHexString=f,t.ensureHexString=m,t.ensureEvenLengthHexString=y,t.ensureAddressString=function(e){if("string"==typeof e){const t=h(e).toLowerCase();if(f(t)&&40===t.length)return(0,o.AddressString)(p(t))}throw s.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(e)}`)},t.ensureBuffer=function(e){if(r.isBuffer(e))return e;if("string"==typeof e){if(f(e)){const t=y(e,!1);return r.from(t,"hex")}return r.from(e,"utf8")}throw s.standardErrors.rpc.invalidParams(`Not binary data: ${String(e)}`)},t.ensureIntNumber=g,t.ensureRegExpString=function(e){if(e instanceof RegExp)return(0,o.RegExpString)(e.toString());throw s.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(e)}`)},t.ensureBN=function(e){if(null!==e&&(a.default.isBN(e)||b(e)))return new a.default(e.toString(10),10);if("number"==typeof e)return new a.default(g(e));if("string"==typeof e){if(c.test(e))return new a.default(e,10);if(f(e))return new a.default(y(e,!1),16)}throw s.standardErrors.rpc.invalidParams(`Not an integer: ${String(e)}`)},t.ensureParsedJSONObject=function(e){if("string"==typeof e)return JSON.parse(e);if("object"==typeof e)return e;throw s.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(e)}`)},t.isBigNumber=b,t.range=function(e,t){return Array.from({length:t-e},((t,n)=>e+n))},t.getFavicon=function(){const e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:t,host:n}=document.location,r=e?e.getAttribute("href"):null;return!r||r.startsWith("javascript:")||r.startsWith("vbscript:")?null:r.startsWith("http://")||r.startsWith("https://")||r.startsWith("data:")?r:r.startsWith("//")?t+r:`${t}//${n}${r}`},t.createQrUrl=function(e,t,n,r,i,a){return`${n}/#/link?${new URLSearchParams({[r?"parent-id":"id"]:e,secret:t,server:n,v:i,chainId:a.toString()}).toString()}`},t.isInIFrame=v,t.getLocation=function(){try{return v()&&window.top?window.top.location:window.location}catch(e){return window.location}},t.isMobileWeb=function(){var e;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(null===(e=null===window||void 0===window?void 0:window.navigator)||void 0===e?void 0:e.userAgent)}},14144:(e,t,n)=>{"use strict";const r=n(21939),i=n(90466);var a=n(21939);var s=n(90466);t.Ay=r.CoinbaseWalletSDK,"undefined"!=typeof window&&(window.CoinbaseWalletSDK=r.CoinbaseWalletSDK,window.CoinbaseWalletProvider=i.CoinbaseWalletProvider,window.WalletLink=r.CoinbaseWalletSDK,window.WalletLinkProvider=i.CoinbaseWalletProvider)},13049:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cipher=void 0;const r=n(29740);t.Cipher=class{constructor(e){this.secret=e}async encrypt(e){const t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");const n=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.importKey("raw",(0,r.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),a=new TextEncoder,s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:n},i,a.encode(e)),o=s.slice(s.byteLength-16),c=s.slice(0,s.byteLength-16),l=new Uint8Array(o),u=new Uint8Array(c),d=new Uint8Array([...n,...l,...u]);return(0,r.uint8ArrayToHex)(d)}async decrypt(e){const t=this.secret;if(64!==t.length)throw Error("secret must be 256 bits");return new Promise(((n,i)=>{!async function(){const a=await crypto.subtle.importKey("raw",(0,r.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=(0,r.hexStringToUint8Array)(e),o=s.slice(0,12),c=s.slice(12,28),l=s.slice(28),u=new Uint8Array([...l,...c]),d={name:"AES-GCM",iv:new Uint8Array(o)};try{const e=await window.crypto.subtle.decrypt(d,a,u),t=new TextDecoder;n(t.decode(e))}catch(e){i(e)}}()}))}}},69030:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScopedLocalStorage=void 0;t.ScopedLocalStorage=class{constructor(e){this.scope=e}setItem(e,t){localStorage.setItem(this.scopedKey(e),t)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),t=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);"string"==typeof r&&r.startsWith(e)&&t.push(r)}t.forEach((e=>localStorage.removeItem(e)))}scopedKey(e){return`${this.scope}:${e}`}}},88690:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}'},34760:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.injectCssReset=void 0;const i=r(n(88690));t.injectCssReset=function(){const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(i.default)),document.documentElement.appendChild(e)}},90466:function(e,t,n){"use strict";var r=n(1048).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletProvider=void 0;const a=i(n(82823)),s=n(28985),o=n(2719),c=n(29740),l=n(96182),u=n(89293),d=n(89474),h=n(42331),p=i(n(9623)),f=n(22705),m=n(77803),y=n(6892),g="DefaultChainId",b="DefaultJsonRpcUrl";class v extends s.EventEmitter{constructor(e){var t,n;super(),this._filterPolyfill=new m.FilterPolyfill(this),this._subscriptionManager=new y.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=e.chainId,this._jsonRpcUrlFromOpts=e.jsonRpcUrl,this._overrideIsMetaMask=e.overrideIsMetaMask,this._relayProvider=e.relayProvider,this._storage=e.storage,this._relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=null===(t=e.overrideIsCoinbaseWallet)||void 0===t||t,this.isCoinbaseBrowser=null!==(n=e.overrideIsCoinbaseBrowser)&&void 0!==n&&n,this.qrUrl=e.qrUrl;const r=this.getChainId(),i=(0,c.prepend0x)(r.toString(16));this.emit("connect",{chainIdStr:i});const a=this._storage.getItem(u.LOCAL_STORAGE_ADDRESSES_KEY);if(a){const e=a.split(" ");""!==e[0]&&(this._addresses=e.map((e=>(0,c.ensureAddressString)(e))),this.emit("accountsChanged",e))}this._subscriptionManager.events.on("notification",(e=>{this.emit("message",{type:e.method,data:e.params})})),this._isAuthorized()&&this.initializeRelay(),window.addEventListener("message",(e=>{var t;if(e.origin===location.origin&&e.source===window&&"walletLinkMessage"===e.data.type&&"dappChainSwitched"===e.data.data.action){const n=e.data.data.chainId,r=null!==(t=e.data.data.jsonRpcUrl)&&void 0!==t?t:this.jsonRpcUrl;this.updateProviderInfo(r,Number(n))}}))}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,c.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var e;return null!==(e=this._storage.getItem(b))&&void 0!==e?e:this._jsonRpcUrlFromOpts}set jsonRpcUrl(e){this._storage.setItem(b,e)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(e,t){this.isCoinbaseBrowser||(this._chainIdFromOpts=t,this._jsonRpcUrlFromOpts=e),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(e,t){this.jsonRpcUrl=e;const n=this.getChainId();this._storage.setItem(g,t.toString(10));!((0,c.ensureIntNumber)(t)!==n)&&this.hasMadeFirstChainChangedEmission||(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(e,t,n,r,i,a){const s=await this.initializeRelay(),o=await s.watchAsset(e,t,n,r,i,null==a?void 0:a.toString()).promise;return!(0,h.isErrorResponse)(o)&&!!o.result}async addEthereumChain(e,t,n,r,i,a){var s,o;if((0,c.ensureIntNumber)(e)===this.getChainId())return!1;const l=await this.initializeRelay(),u=l.inlineAddEthereumChain(e.toString());this._isAuthorized()||u||await l.requestEthereumAccounts().promise;const d=await l.addEthereumChain(e.toString(),t,i,n,r,a).promise;return!(0,h.isErrorResponse)(d)&&(!0===(null===(s=d.result)||void 0===s?void 0:s.isApproved)&&this.updateProviderInfo(t[0],e),!0===(null===(o=d.result)||void 0===o?void 0:o.isApproved))}async switchEthereumChain(e){const t=await this.initializeRelay(),n=await t.switchEthereumChain(e.toString(10),this.selectedAddress||void 0).promise;if((0,h.isErrorResponse)(n)){if(!n.errorCode)return;throw n.errorCode===o.standardErrorCodes.provider.unsupportedChain?o.standardErrors.provider.unsupportedChain():o.standardErrors.provider.custom({message:n.errorMessage,code:n.errorCode})}const r=n.result;r.isApproved&&r.rpcUrl.length>0&&this.updateProviderInfo(r.rpcUrl,e)}setAppInfo(e,t){this.initializeRelay().then((n=>n.setAppInfo(e,t)))}async enable(){var e;return null===(e=this.diagnostic)||void 0===e||e.log(f.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?d.Session.hash(this._relay.session.id):void 0}),this._isAuthorized()?[...this._addresses]:await this.send("eth_requestAccounts")}async close(){(await this.initializeRelay()).resetAndReload()}send(e,t){try{const n=this._send(e,t);if(n instanceof Promise)return n.catch((t=>{throw(0,o.serializeError)(t,e)}))}catch(t){throw(0,o.serializeError)(t,e)}}_send(e,t){if("string"==typeof e){const n={jsonrpc:"2.0",id:0,method:e,params:Array.isArray(t)?t:void 0!==t?[t]:[]};return this._sendRequestAsync(n).then((e=>e.result))}if("function"==typeof t){const n=e,r=t;return this._sendAsync(n,r)}if(Array.isArray(e)){return e.map((e=>this._sendRequest(e)))}const n=e;return this._sendRequest(n)}async sendAsync(e,t){try{return this._sendAsync(e,t).catch((t=>{throw(0,o.serializeError)(t,e)}))}catch(t){return Promise.reject((0,o.serializeError)(t,e))}}async _sendAsync(e,t){if("function"!=typeof t)throw new Error("callback is required");if(Array.isArray(e)){const n=t;return void this._sendMultipleRequestsAsync(e).then((e=>n(null,e))).catch((e=>n(e,null)))}const n=t;return this._sendRequestAsync(e).then((e=>n(null,e))).catch((e=>n(e,null)))}async request(e){try{return this._request(e).catch((t=>{throw(0,o.serializeError)(t,e.method)}))}catch(t){return Promise.reject((0,o.serializeError)(t,e.method))}}async _request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw o.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:e});const{method:t,params:n}=e;if("string"!=typeof t||0===t.length)throw o.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:e});if(void 0!==n&&!Array.isArray(n)&&("object"!=typeof n||null===n))throw o.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:e});const r=void 0===n?[]:n,i=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:t,params:r,jsonrpc:"2.0",id:i})).result}async scanQRCode(e){const t=await this.initializeRelay(),n=await t.scanQRCode((0,c.ensureRegExpString)(e)).promise;if((0,h.isErrorResponse)(n))throw(0,o.serializeError)(n.errorMessage,"scanQRCode");if("string"!=typeof n.result)throw(0,o.serializeError)("result was not a string","scanQRCode");return n.result}async genericRequest(e,t){const n=await this.initializeRelay(),r=await n.genericRequest(e,t).promise;if((0,h.isErrorResponse)(r))throw(0,o.serializeError)(r.errorMessage,"generic");if("string"!=typeof r.result)throw(0,o.serializeError)("result was not a string","generic");return r.result}async connectAndSignIn(e){var t;let n;null===(t=this.diagnostic)||void 0===t||t.log(f.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::connectAndSignIn",sessionIdHash:this._relay?d.Session.hash(this._relay.session.id):void 0});try{const t=await this.initializeRelay();if(!(t instanceof l.MobileRelay))throw new Error("connectAndSignIn is only supported on mobile");if(n=await t.connectAndSignIn(e).promise,(0,h.isErrorResponse)(n))throw new Error(n.errorMessage)}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw o.standardErrors.provider.userRejectedRequest("User denied account authorization");throw e}if(!n.result)throw new Error("accounts received is empty");const{accounts:r}=n.result;return this._setAddresses(r),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),n.result}async selectProvider(e){const t=await this.initializeRelay(),n=await t.selectProvider(e).promise;if((0,h.isErrorResponse)(n))throw(0,o.serializeError)(n.errorMessage,"selectProvider");if("string"!=typeof n.result)throw(0,o.serializeError)("result was not a string","selectProvider");return n.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(e){const t={jsonrpc:"2.0",id:e.id},{method:n}=e;if(t.result=this._handleSynchronousMethods(e),void 0===t.result)throw new Error(`Coinbase Wallet does not support calling ${n} synchronously without a callback. Please provide a callback parameter to call ${n} asynchronously.`);return t}_setAddresses(e,t){if(!Array.isArray(e))throw new Error("addresses is not an array");const n=e.map((e=>(0,c.ensureAddressString)(e)));JSON.stringify(n)!==JSON.stringify(this._addresses)&&(this._addresses=n,this.emit("accountsChanged",this._addresses),this._storage.setItem(u.LOCAL_STORAGE_ADDRESSES_KEY,n.join(" ")))}_sendRequestAsync(e){return new Promise(((t,n)=>{try{const r=this._handleSynchronousMethods(e);if(void 0!==r)return t({jsonrpc:"2.0",id:e.id,result:r});const i=this._handleAsynchronousFilterMethods(e);if(void 0!==i)return void i.then((n=>t(Object.assign(Object.assign({},n),{id:e.id})))).catch((e=>n(e)));const a=this._handleSubscriptionMethods(e);if(void 0!==a)return void a.then((n=>t({jsonrpc:"2.0",id:e.id,result:n.result}))).catch((e=>n(e)))}catch(e){return n(e)}this._handleAsynchronousMethods(e).then((n=>n&&t(Object.assign(Object.assign({},n),{id:e.id})))).catch((e=>n(e)))}))}_sendMultipleRequestsAsync(e){return Promise.all(e.map((e=>this._sendRequestAsync(e))))}_handleSynchronousMethods(e){const{method:t}=e,n=e.params||[];switch(t){case"eth_accounts":return this._eth_accounts();case"eth_coinbase":return this._eth_coinbase();case"eth_uninstallFilter":return this._eth_uninstallFilter(n);case"net_version":return this._net_version();case"eth_chainId":return this._eth_chainId();default:return}}async _handleAsynchronousMethods(e){const{method:t}=e,n=e.params||[];switch(t){case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_sign":return this._eth_sign(n);case"eth_ecRecover":return this._eth_ecRecover(n);case"personal_sign":return this._personal_sign(n);case"personal_ecRecover":return this._personal_ecRecover(n);case"eth_signTransaction":return this._eth_signTransaction(n);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(n);case"eth_sendTransaction":return this._eth_sendTransaction(n);case"eth_signTypedData_v1":return this._eth_signTypedData_v1(n);case"eth_signTypedData_v2":return this._throwUnsupportedMethodError();case"eth_signTypedData_v3":return this._eth_signTypedData_v3(n);case"eth_signTypedData_v4":case"eth_signTypedData":return this._eth_signTypedData_v4(n);case"cbWallet_arbitrary":return this._cbwallet_arbitrary(n);case"wallet_addEthereumChain":return this._wallet_addEthereumChain(n);case"wallet_switchEthereumChain":return this._wallet_switchEthereumChain(n);case"wallet_watchAsset":return this._wallet_watchAsset(n)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(e,this.jsonRpcUrl).catch((t=>{var n;throw t.code!==o.standardErrorCodes.rpc.methodNotFound&&t.code!==o.standardErrorCodes.rpc.methodNotSupported||null===(n=this.diagnostic)||void 0===n||n.log(f.EVENTS.METHOD_NOT_IMPLEMENTED,{method:e.method,sessionIdHash:this._relay?d.Session.hash(this._relay.session.id):void 0}),t}))}_handleAsynchronousFilterMethods(e){const{method:t}=e,n=e.params||[];switch(t){case"eth_newFilter":return this._eth_newFilter(n);case"eth_newBlockFilter":return this._eth_newBlockFilter();case"eth_newPendingTransactionFilter":return this._eth_newPendingTransactionFilter();case"eth_getFilterChanges":return this._eth_getFilterChanges(n);case"eth_getFilterLogs":return this._eth_getFilterLogs(n)}}_handleSubscriptionMethods(e){switch(e.method){case"eth_subscribe":case"eth_unsubscribe":return this._subscriptionManager.handleRequest(e)}}_isKnownAddress(e){try{const t=(0,c.ensureAddressString)(e);return this._addresses.map((e=>(0,c.ensureAddressString)(e))).includes(t)}catch(e){}return!1}_ensureKnownAddress(e){var t;if(!this._isKnownAddress(e))throw null===(t=this.diagnostic)||void 0===t||t.log(f.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(e){const t=e.from?(0,c.ensureAddressString)(e.from):this.selectedAddress;if(!t)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(t);return{fromAddress:t,toAddress:e.to?(0,c.ensureAddressString)(e.to):null,weiValue:null!=e.value?(0,c.ensureBN)(e.value):new a.default(0),data:e.data?(0,c.ensureBuffer)(e.data):r.alloc(0),nonce:null!=e.nonce?(0,c.ensureIntNumber)(e.nonce):null,gasPriceInWei:null!=e.gasPrice?(0,c.ensureBN)(e.gasPrice):null,maxFeePerGas:null!=e.maxFeePerGas?(0,c.ensureBN)(e.maxFeePerGas):null,maxPriorityFeePerGas:null!=e.maxPriorityFeePerGas?(0,c.ensureBN)(e.maxPriorityFeePerGas):null,gasLimit:null!=e.gas?(0,c.ensureBN)(e.gas):null,chainId:e.chainId?(0,c.ensureIntNumber)(e.chainId):this.getChainId()}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw o.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw o.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(e,t,n,r){this._ensureKnownAddress(t);try{const i=await this.initializeRelay(),a=await i.signEthereumMessage(e,t,n,r).promise;if((0,h.isErrorResponse)(a))throw new Error(a.errorMessage);return{jsonrpc:"2.0",id:0,result:a.result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw o.standardErrors.provider.userRejectedRequest("User denied message signature");throw e}}async _ethereumAddressFromSignedMessage(e,t,n){const r=await this.initializeRelay(),i=await r.ethereumAddressFromSignedMessage(e,t,n).promise;if((0,h.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,c.hexStringFromIntNumber)(this.getChainId())}getChainId(){const e=this._storage.getItem(g);if(!e)return(0,c.ensureIntNumber)(this._chainIdFromOpts);const t=parseInt(e,10);return(0,c.ensureIntNumber)(t)}async _eth_requestAccounts(){var e;if(null===(e=this.diagnostic)||void 0===e||e.log(f.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?d.Session.hash(this._relay.session.id):void 0}),this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let t;try{const e=await this.initializeRelay();if(t=await e.requestEthereumAccounts().promise,(0,h.isErrorResponse)(t))throw new Error(t.errorMessage)}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw o.standardErrors.provider.userRejectedRequest("User denied account authorization");throw e}if(!t.result)throw new Error("accounts received is empty");return this._setAddresses(t.result),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(e){this._requireAuthorization();const t=(0,c.ensureAddressString)(e[0]),n=(0,c.ensureBuffer)(e[1]);return this._signEthereumMessage(n,t,!1)}_eth_ecRecover(e){const t=(0,c.ensureBuffer)(e[0]),n=(0,c.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,n,!1)}_personal_sign(e){this._requireAuthorization();const t=(0,c.ensureBuffer)(e[0]),n=(0,c.ensureAddressString)(e[1]);return this._signEthereumMessage(t,n,!0)}_personal_ecRecover(e){const t=(0,c.ensureBuffer)(e[0]),n=(0,c.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,n,!0)}async _eth_signTransaction(e){this._requireAuthorization();const t=this._prepareTransactionParams(e[0]||{});try{const e=await this.initializeRelay(),n=await e.signEthereumTransaction(t).promise;if((0,h.isErrorResponse)(n))throw new Error(n.errorMessage);return{jsonrpc:"2.0",id:0,result:n.result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw o.standardErrors.provider.userRejectedRequest("User denied transaction signature");throw e}}async _eth_sendRawTransaction(e){const t=(0,c.ensureBuffer)(e[0]),n=await this.initializeRelay(),r=await n.submitEthereumTransaction(t,this.getChainId()).promise;if((0,h.isErrorResponse)(r))throw new Error(r.errorMessage);return{jsonrpc:"2.0",id:0,result:r.result}}async _eth_sendTransaction(e){this._requireAuthorization();const t=this._prepareTransactionParams(e[0]||{});try{const e=await this.initializeRelay(),n=await e.signAndSubmitEthereumTransaction(t).promise;if((0,h.isErrorResponse)(n))throw new Error(n.errorMessage);return{jsonrpc:"2.0",id:0,result:n.result}}catch(e){if("string"==typeof e.message&&e.message.match(/(denied|rejected)/i))throw o.standardErrors.provider.userRejectedRequest("User denied transaction signature");throw e}}async _eth_signTypedData_v1(e){this._requireAuthorization();const t=(0,c.ensureParsedJSONObject)(e[0]),n=(0,c.ensureAddressString)(e[1]);this._ensureKnownAddress(n);const r=p.default.hashForSignTypedDataLegacy({data:t}),i=JSON.stringify(t,null,2);return this._signEthereumMessage(r,n,!1,i)}async _eth_signTypedData_v3(e){this._requireAuthorization();const t=(0,c.ensureAddressString)(e[0]),n=(0,c.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(t);const r=p.default.hashForSignTypedData_v3({data:n}),i=JSON.stringify(n,null,2);return this._signEthereumMessage(r,t,!1,i)}async _eth_signTypedData_v4(e){this._requireAuthorization();const t=(0,c.ensureAddressString)(e[0]),n=(0,c.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(t);const r=p.default.hashForSignTypedData_v4({data:n}),i=JSON.stringify(n,null,2);return this._signEthereumMessage(r,t,!1,i)}async _cbwallet_arbitrary(e){const t=e[0],n=e[1];if("string"!=typeof n)throw new Error("parameter must be a string");if("object"!=typeof t||null===t)throw new Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(t,n)}}async _wallet_addEthereumChain(e){var t,n,r,i;const a=e[0];if(0===(null===(t=a.rpcUrls)||void 0===t?void 0:t.length))return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!a.chainName||""===a.chainName.trim())throw o.standardErrors.rpc.invalidParams("chainName is a required field");if(!a.nativeCurrency)throw o.standardErrors.rpc.invalidParams("nativeCurrency is a required field");const s=parseInt(a.chainId,16);return await this.addEthereumChain(s,null!==(n=a.rpcUrls)&&void 0!==n?n:[],null!==(r=a.blockExplorerUrls)&&void 0!==r?r:[],a.chainName,null!==(i=a.iconUrls)&&void 0!==i?i:[],a.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(e){const t=e[0];return await this.switchEthereumChain(parseInt(t.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(e){const t=Array.isArray(e)?e[0]:e;if(!t.type)throw o.standardErrors.rpc.invalidParams("Type is required");if("ERC20"!==(null==t?void 0:t.type))throw o.standardErrors.rpc.invalidParams(`Asset of type '${t.type}' is not supported`);if(!(null==t?void 0:t.options))throw o.standardErrors.rpc.invalidParams("Options are required");if(!(null==t?void 0:t.options.address))throw o.standardErrors.rpc.invalidParams("Address is required");const n=this.getChainId(),{address:r,symbol:i,image:a,decimals:s}=t.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(t.type,r,i,s,a,n)}}_eth_uninstallFilter(e){const t=(0,c.ensureHexString)(e[0]);return this._filterPolyfill.uninstallFilter(t)}async _eth_newFilter(e){const t=e[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(t)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(e){const t=(0,c.ensureHexString)(e[0]);return this._filterPolyfill.getFilterChanges(t)}_eth_getFilterLogs(e){const t=(0,c.ensureHexString)(e[0]);return this._filterPolyfill.getFilterLogs(t)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then((e=>(e.setAccountsCallback(((e,t)=>this._setAddresses(e,t))),e.setChainCallback(((e,t)=>{this.updateProviderInfo(t,parseInt(e,10))})),e.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=e,e)))}}t.CoinbaseWalletProvider=v},22705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTS=void 0,t.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",METHOD_NOT_IMPLEMENTED:"walletlink_sdk.method_not_implemented",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"}},77803:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterFromParam=t.FilterPolyfill=void 0;const r=n(6496),i=n(29740),a={jsonrpc:"2.0",id:0};function s(e){return{fromBlock:c(e.fromBlock),toBlock:c(e.toBlock),addresses:void 0===e.address?null:Array.isArray(e.address)?e.address:[e.address],topics:e.topics||[]}}function o(e){const t={fromBlock:l(e.fromBlock),toBlock:l(e.toBlock),topics:e.topics};return null!==e.addresses&&(t.address=e.addresses),t}function c(e){if(void 0===e||"latest"===e||"pending"===e)return"latest";if("earliest"===e)return(0,r.IntNumber)(0);if((0,i.isHexString)(e))return(0,i.intNumberFromHexString)(e);throw new Error(`Invalid block option: ${String(e)}`)}function l(e){return"latest"===e?e:(0,i.hexStringFromIntNumber)(e)}function u(){return Object.assign(Object.assign({},a),{error:{code:-32e3,message:"filter not found"}})}function d(){return Object.assign(Object.assign({},a),{result:[]})}t.FilterPolyfill=class{constructor(e){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,r.IntNumber)(1),this.REQUEST_THROTTLE_INTERVAL=1e3,this.lastFetchTimestamp=new Date(0),this.resolvers=[],this.provider=e}async newFilter(e){const t=s(e),n=this.makeFilterId(),r=await this.setInitialCursorPosition(n,t.fromBlock);return console.info(`Installing new log filter(${n}):`,t,"initial cursor position:",r),this.logFilters.set(n,t),this.setFilterTimeout(n),(0,i.hexStringFromIntNumber)(n)}async newBlockFilter(){const e=this.makeFilterId(),t=await this.setInitialCursorPosition(e,"latest");return console.info(`Installing new block filter (${e}) with initial cursor position:`,t),this.blockFilters.add(e),this.setFilterTimeout(e),(0,i.hexStringFromIntNumber)(e)}async newPendingTransactionFilter(){const e=this.makeFilterId(),t=await this.setInitialCursorPosition(e,"latest");return console.info(`Installing new block filter (${e}) with initial cursor position:`,t),this.pendingTransactionFilters.add(e),this.setFilterTimeout(e),(0,i.hexStringFromIntNumber)(e)}uninstallFilter(e){const t=(0,i.intNumberFromHexString)(e);return console.info(`Uninstalling filter (${t})`),this.deleteFilter(t),!0}getFilterChanges(e){const t=(0,i.intNumberFromHexString)(e);return this.timeouts.has(t)&&this.setFilterTimeout(t),this.logFilters.has(t)?this.getLogFilterChanges(t):this.blockFilters.has(t)?this.getBlockFilterChanges(t):this.pendingTransactionFilters.has(t)?this.getPendingTransactionFilterChanges(t):Promise.resolve(u())}async getFilterLogs(e){const t=(0,i.intNumberFromHexString)(e),n=this.logFilters.get(t);return n?this.sendAsyncPromise(Object.assign(Object.assign({},a),{method:"eth_getLogs",params:[o(n)]})):u()}makeFilterId(){return(0,r.IntNumber)(++this.nextFilterId)}sendAsyncPromise(e){return new Promise(((t,n)=>{this.provider.sendAsync(e,((e,r)=>e?n(e):Array.isArray(r)||null==r?n(new Error(`unexpected response received: ${JSON.stringify(r)}`)):void t(r)))}))}deleteFilter(e){console.info(`Deleting filter (${e})`),this.logFilters.delete(e),this.blockFilters.delete(e),this.pendingTransactionFilters.delete(e),this.cursors.delete(e),this.timeouts.delete(e)}async getLogFilterChanges(e){const t=this.logFilters.get(e),n=this.cursors.get(e);if(!n||!t)return u();const s=await this.getCurrentBlockHeight(),c="latest"===t.toBlock?s:t.toBlock;if(n>s)return d();if(n>Number(t.toBlock))return d();console.info(`Fetching logs from ${n} to ${c} for filter ${e}`);const l=await this.sendAsyncPromise(Object.assign(Object.assign({},a),{method:"eth_getLogs",params:[o(Object.assign(Object.assign({},t),{fromBlock:n,toBlock:c}))]}));if(Array.isArray(l.result)){const t=l.result.map((e=>(0,i.intNumberFromHexString)(e.blockNumber||"0x0"))),a=Math.max(...t);if(a&&a>n){const t=(0,r.IntNumber)(a+1);console.info(`Moving cursor position for filter (${e}) from ${n} to ${t}`),this.cursors.set(e,t)}}return l}async getBlockFilterChanges(e){const t=this.cursors.get(e);if(!t)return u();const n=await this.getCurrentBlockHeight();if(t>n)return d();console.info(`Fetching blocks from ${t} to ${n} for filter (${e})`);const s=(await Promise.all((0,i.range)(t,n+1).map((e=>this.getBlockHashByNumber((0,r.IntNumber)(e)))))).filter((e=>!!e)),o=(0,r.IntNumber)(t+s.length);return console.info(`Moving cursor position for filter (${e}) from ${t} to ${o}`),this.cursors.set(e,o),Object.assign(Object.assign({},a),{result:s})}async getPendingTransactionFilterChanges(e){return Promise.resolve(d())}async setInitialCursorPosition(e,t){const n=await this.getCurrentBlockHeight(),r="number"==typeof t&&t>n?t:n;return this.cursors.set(e,r),r}setFilterTimeout(e){const t=this.timeouts.get(e);t&&window.clearTimeout(t);const n=window.setTimeout((()=>{console.info(`Filter (${e}) timed out`),this.deleteFilter(e)}),3e5);this.timeouts.set(e,n)}async getCurrentBlockHeight(){const e=new Date;if(e.getTime()-this.lastFetchTimestamp.getTime()>this.REQUEST_THROTTLE_INTERVAL){this.lastFetchTimestamp=e;const t=await this._getCurrentBlockHeight();this.currentBlockHeight=t,this.resolvers.forEach((e=>e(t))),this.resolvers=[]}return this.currentBlockHeight?this.currentBlockHeight:new Promise((e=>this.resolvers.push(e)))}async _getCurrentBlockHeight(){const{result:e}=await this.sendAsyncPromise(Object.assign(Object.assign({},a),{method:"eth_blockNumber",params:[]}));return(0,i.intNumberFromHexString)((0,i.ensureHexString)(e))}async getBlockHashByNumber(e){const t=await this.sendAsyncPromise(Object.assign(Object.assign({},a),{method:"eth_getBlockByNumber",params:[(0,i.hexStringFromIntNumber)(e),!1]}));return t.result&&"string"==typeof t.result.hash?(0,i.ensureHexString)(t.result.hash):null}},t.filterFromParam=s},6892:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionManager=void 0;const r=n(94745),i=n(60834),a=()=>{};t.SubscriptionManager=class{constructor(e){const t=new r.PollingBlockTracker({provider:e,pollingInterval:15e3,setSkipCacheFlag:!0}),{events:n,middleware:a}=i({blockTracker:t,provider:e});this.events=n,this.subscriptionMiddleware=a}async handleRequest(e){const t={};return await this.subscriptionMiddleware(e,t,a,a),t}destroy(){this.subscriptionMiddleware.destroy()}}},89293:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayAbstract=t.APP_VERSION_KEY=t.LOCAL_STORAGE_ADDRESSES_KEY=t.WALLET_USER_NAME_KEY=void 0;const r=n(2719);t.WALLET_USER_NAME_KEY="walletUsername",t.LOCAL_STORAGE_ADDRESSES_KEY="Addresses",t.APP_VERSION_KEY="AppVersion";t.RelayAbstract=class{async makeEthereumJSONRPCRequest(e,t){if(!t)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(t,{method:"POST",body:JSON.stringify(e),mode:"cors",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((t=>{if(!t)throw r.standardErrors.rpc.parse({});const n=t,{error:i}=n;if(i)throw(0,r.serializeError)(i,e.method);return n}))}}},37344:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RelayEventManager=void 0;const r=n(29740);t.RelayEventManager=class{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,t=(0,r.prepend0x)(e.toString(16));return this.callbacks.get(t)&&this.callbacks.delete(t),e}}},89474:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Session=void 0;const r=n(13229),i=n(29740),a="session:id",s="session:secret",o="session:linked";class c{constructor(e,t,n,a){this._storage=e,this._id=t||(0,i.randomBytesHex)(16),this._secret=n||(0,i.randomBytesHex)(32),this._key=(new r.sha256).update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!a}static load(e){const t=e.getItem(a),n=e.getItem(o),r=e.getItem(s);return t&&r?new c(e,t,r,"1"===n):null}static hash(e){return(new r.sha256).update(e).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this._storage.setItem(a,this._id),this._storage.setItem(s,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(o,this._linked?"1":"0")}}t.Session=c},96182:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileRelay=void 0;const r=n(29740),i=n(80104),a=n(78152);class s extends i.WalletLinkRelay{constructor(e){var t;super(e),this._enableMobileWalletLink=null!==(t=e.enableMobileWalletLink)&&void 0!==t&&t}requestEthereumAccounts(){return this._enableMobileWalletLink?super.requestEthereumAccounts():{promise:new Promise((()=>{const e=(0,r.getLocation)();e.href=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(e.href)}`})),cancel:()=>{}}}publishWeb3RequestEvent(e,t){if(super.publishWeb3RequestEvent(e,t),!(this._enableMobileWalletLink&&this.ui instanceof a.MobileRelayUI))return;let n=!1;switch(t.method){case"requestEthereumAccounts":case"connectAndSignIn":n=!0,this.ui.openCoinbaseWalletDeeplink(this.getQRCodeUrl());break;case"switchEthereumChain":return;default:n=!0,this.ui.openCoinbaseWalletDeeplink()}n&&window.addEventListener("blur",(()=>{window.addEventListener("focus",(()=>{this.connection.checkUnseenEvents()}),{once:!0})}),{once:!0})}handleWeb3ResponseMessage(e){super.handleWeb3ResponseMessage(e),this._enableMobileWalletLink&&this.ui instanceof a.MobileRelayUI&&this.ui.closeOpenedWindow()}connectAndSignIn(e){if(!this._enableMobileWalletLink)throw new Error("connectAndSignIn is supported only when enableMobileWalletLink is on");return this.sendRequest({method:"connectAndSignIn",params:{appName:this.appName,appLogoUrl:this.appLogoUrl,domain:window.location.hostname,aud:window.location.href,version:"1",type:"eip4361",nonce:e.nonce,iat:(new Date).toISOString(),chainId:`eip155:${this.dappDefaultChain}`,statement:e.statement,resources:e.resources}})}}t.MobileRelay=s},78152:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileRelayUI=void 0;const r=n(91627);t.MobileRelayUI=class{constructor(e){this.attached=!1,this.darkMode=!1,this.openedWindow=null,this.redirectDialog=new r.RedirectDialog,this.darkMode=e.darkMode}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}setConnected(e){}closeOpenedWindow(){var e;null===(e=this.openedWindow)||void 0===e||e.close(),this.openedWindow=null}redirectToCoinbaseWallet(e){const t=new URL("https://go.cb-w.com/walletlink");t.searchParams.append("redirect_url",window.location.href),e&&t.searchParams.append("wl_url",e),this.openedWindow=window.open(t.href,"cbw-opener"),this.openedWindow&&setTimeout((()=>this.closeOpenedWindow()),5e3)}openCoinbaseWalletDeeplink(e){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",darkMode:this.darkMode,onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}}),setTimeout((()=>{this.redirectToCoinbaseWallet(e)}),99)}showConnecting(e){return()=>{this.closeOpenedWindow(),this.redirectDialog.clear()}}hideRequestEthereumAccounts(){this.closeOpenedWindow(),this.redirectDialog.clear()}requestEthereumAccounts(){}addEthereumChain(){}watchAsset(){}selectProvider(){}switchEthereumChain(){}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}reloadUI(){}setStandalone(){}setConnectDisabled(){}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}isStandalone(){return!1}}},80104:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkRelay=void 0;const r=n(2719),i=n(6496),a=n(29740),s=n(22705),o=n(89293),c=n(89474),l=n(16118),u=n(42331),d=n(62253);class h extends o.RelayAbstract{constructor(e){var t;super(),this.accountsCallback=null,this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.chainCallback=null,this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.linkedUpdated=e=>{var t;this.isLinked=e;const n=this.storage.getItem(o.LOCAL_STORAGE_ADDRESSES_KEY);if(e&&(this.session.linked=e),this.isUnlinkedErrorState=!1,n){const r=n.split(" "),i="true"===this.storage.getItem("IsStandaloneSigning");if(""!==r[0]&&!e&&this.session.linked&&!i){this.isUnlinkedErrorState=!0;const e=this.getSessionIdHash();null===(t=this.diagnostic)||void 0===t||t.log(s.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:e})}}},this.metadataUpdated=(e,t)=>{this.storage.setItem(e,t)},this.chainUpdated=(e,t)=>{this.chainCallbackParams.chainId===e&&this.chainCallbackParams.jsonRpcUrl===t||(this.chainCallbackParams={chainId:e,jsonRpcUrl:t},this.chainCallback&&this.chainCallback(e,t))},this.accountUpdated=e=>{this.accountsCallback&&this.accountsCallback([e]),h.accountRequestCallbackIds.size>0&&(Array.from(h.accountRequestCallbackIds.values()).forEach((t=>{const n={type:"WEB3_RESPONSE",id:t,response:{method:"requestEthereumAccounts",result:[e]}};this.invokeCallback(Object.assign(Object.assign({},n),{id:t}))})),h.accountRequestCallbackIds.clear())},this.connectedUpdated=e=>{this.ui.setConnected(e)},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.options=e;const{session:n,ui:r,connection:i}=this.subscribe();this._session=n,this.connection=i,this.relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this._reloadOnDisconnect=null===(t=e.reloadOnDisconnect)||void 0===t||t,this.ui=r}subscribe(){const e=c.Session.load(this.storage)||new c.Session(this.storage).save(),{linkAPIUrl:t,diagnostic:n}=this,r=new l.WalletLinkConnection({session:e,linkAPIUrl:t,diagnostic:n,listener:this}),{version:i,darkMode:a}=this.options,s=this.options.uiConstructor({linkAPIUrl:t,version:i,darkMode:a,session:e});return r.connect(),{session:e,ui:s,connection:r}}attachUI(){this.ui.attach()}resetAndReload(){Promise.race([this.connection.setSessionMetadata("__destroyed","1"),new Promise((e=>setTimeout((()=>e(null)),1e3)))]).then((()=>{var e,t;const n=this.ui.isStandalone();null===(e=this.diagnostic)||void 0===e||e.log(s.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const r=c.Session.load(this.storage);if((null==r?void 0:r.id)===this._session.id?this.storage.clear():r&&(null===(t=this.diagnostic)||void 0===t||t.log(s.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:c.Session.hash(r.id)})),this._reloadOnDisconnect)return void this.ui.reloadUI();this.accountsCallback&&this.accountsCallback([],!0);const{session:i,ui:a,connection:o}=this.subscribe();this._session=i,this.connection=o,this.ui=a,n&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.attachUI()})).catch((e=>{var t;null===(t=this.diagnostic)||void 0===t||t.log(s.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${e}`,sessionIdHash:this.getSessionIdHash()})}))}setAppInfo(e,t){this.appName=e,this.appLogoUrl=t}getStorageItem(e){return this.storage.getItem(e)}get session(){return this._session}setStorageItem(e,t){this.storage.setItem(e,t)}signEthereumMessage(e,t,n,r){return this.sendRequest({method:"signEthereumMessage",params:{message:(0,a.hexStringFromBuffer)(e,!0),address:t,addPrefix:n,typedDataJson:r||null}})}ethereumAddressFromSignedMessage(e,t,n){return this.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:(0,a.hexStringFromBuffer)(e,!0),signature:(0,a.hexStringFromBuffer)(t,!0),addPrefix:n}})}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,a.bigIntStringFromBN)(e.weiValue),data:(0,a.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,a.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?(0,a.bigIntStringFromBN)(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?(0,a.bigIntStringFromBN)(e.gasPriceInWei):null,gasLimit:e.gasLimit?(0,a.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,a.bigIntStringFromBN)(e.weiValue),data:(0,a.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,a.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?(0,a.bigIntStringFromBN)(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?(0,a.bigIntStringFromBN)(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?(0,a.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,t){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:(0,a.hexStringFromBuffer)(e,!0),chainId:t}})}scanQRCode(e){return this.sendRequest({method:"scanQRCode",params:{regExp:e}})}getQRCodeUrl(){return(0,a.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(e,t){return this.sendRequest({method:"generic",params:{action:t,data:e}})}sendGenericMessage(e){return this.sendRequest(e)}sendRequest(e){let t=null;const n=(0,a.randomBytesHex)(8),r=r=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,e.method,r),null==t||t()};return{promise:new Promise(((i,a)=>{this.ui.isStandalone()||(t=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:r,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(n,(e=>{if(null==t||t(),(0,u.isErrorResponse)(e))return a(new Error(e.errorMessage));i(e)})),this.ui.isStandalone()?this.sendRequestStandalone(n,e):this.publishWeb3RequestEvent(n,e)})),cancel:r}}setConnectDisabled(e){this.ui.setConnectDisabled(e)}setAccountsCallback(e){this.accountsCallback=e}setChainCallback(e){this.chainCallback=e}setDappDefaultChainCallback(e){this.dappDefaultChain=e,this.ui instanceof d.WalletLinkRelayUI&&this.ui.setChainId(e)}publishWeb3RequestEvent(e,t){var n;const r={type:"WEB3_REQUEST",id:e,request:t},i=c.Session.load(this.storage);null===(n=this.diagnostic)||void 0===n||n.log(s.EVENTS.WEB3_REQUEST,{eventId:r.id,method:`relay::${t.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:i?c.Session.hash(i.id):"",isSessionMismatched:((null==i?void 0:i.id)!==this._session.id).toString()}),this.publishEvent("Web3Request",r,!0).then((e=>{var n;null===(n=this.diagnostic)||void 0===n||n.log(s.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:r.id,method:`relay::${t.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:i?c.Session.hash(i.id):"",isSessionMismatched:((null==i?void 0:i.id)!==this._session.id).toString()})})).catch((e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:r.id,response:{method:t.method,errorMessage:e.message}})}))}publishWeb3RequestCanceledEvent(e){const t={type:"WEB3_REQUEST_CANCELED",id:e};this.publishEvent("Web3RequestCanceled",t,!1).then()}publishEvent(e,t,n){return this.connection.publishEvent(e,t,n)}handleWeb3ResponseMessage(e){var t;const{response:n}=e;if(null===(t=this.diagnostic)||void 0===t||t.log(s.EVENTS.WEB3_RESPONSE,{eventId:e.id,method:`relay::${n.method}`,sessionIdHash:this.getSessionIdHash()}),"requestEthereumAccounts"===n.method)return h.accountRequestCallbackIds.forEach((t=>this.invokeCallback(Object.assign(Object.assign({},e),{id:t})))),void h.accountRequestCallbackIds.clear();this.invokeCallback(e)}handleErrorResponse(e,t,n,i){var a;const s=null!==(a=null==n?void 0:n.message)&&void 0!==a?a:(0,r.getMessageFromCode)(i);this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:e,response:{method:t,errorMessage:s,errorCode:i}})}invokeCallback(e){const t=this.relayEventManager.callbacks.get(e.id);t&&(t(e.response),this.relayEventManager.callbacks.delete(e.id))}requestEthereumAccounts(){const e={method:"requestEthereumAccounts",params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},t=(0,a.randomBytesHex)(8),n=n=>{this.publishWeb3RequestCanceledEvent(t),this.handleErrorResponse(t,e.method,n)};return{promise:new Promise(((i,a)=>{if(this.relayEventManager.callbacks.set(t,(e=>{if(this.ui.hideRequestEthereumAccounts(),(0,u.isErrorResponse)(e))return a(new Error(e.errorMessage));i(e)})),this.ui.inlineAccountsResponse()){const e=e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:t,response:{method:"requestEthereumAccounts",result:e}})};this.ui.requestEthereumAccounts({onCancel:n,onAccounts:e})}else{const e=r.standardErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>n(e)})}h.accountRequestCallbackIds.add(t),this.ui.inlineAccountsResponse()||this.ui.isStandalone()||this.publishWeb3RequestEvent(t,e)})),cancel:n}}selectProvider(e){const t="selectProvider",n=(0,a.randomBytesHex)(8);return{cancel:e=>{this.publishWeb3RequestCanceledEvent(n),this.handleErrorResponse(n,t,e)},promise:new Promise(((t,r)=>{this.relayEventManager.callbacks.set(n,(e=>{if((0,u.isErrorResponse)(e))return r(new Error(e.errorMessage));t(e)}));this.ui.selectProvider&&this.ui.selectProvider({onApprove:e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n,response:{method:"selectProvider",result:e}})},onCancel:e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:n,response:{method:"selectProvider",result:i.ProviderType.Unselected}})},providerOptions:e})}))}}watchAsset(e,t,n,r,i,s){const o={method:"watchAsset",params:{type:e,options:{address:t,symbol:n,decimals:r,image:i},chainId:s}};let c=null;const l=(0,a.randomBytesHex)(8),d=e=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,o.method,e),null==c||c()};this.ui.inlineWatchAsset()||(c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload}));return{cancel:d,promise:new Promise(((a,d)=>{this.relayEventManager.callbacks.set(l,(e=>{if(null==c||c(),(0,u.isErrorResponse)(e))return d(new Error(e.errorMessage));a(e)}));const h=e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:l,response:{method:"watchAsset",result:!1}})},p=()=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:l,response:{method:"watchAsset",result:!0}})};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:p,onCancel:h,type:e,address:t,symbol:n,decimals:r,image:i,chainId:s}),this.ui.inlineWatchAsset()||this.ui.isStandalone()||this.publishWeb3RequestEvent(l,o)}))}}addEthereumChain(e,t,n,r,i,s){const o={method:"addEthereumChain",params:{chainId:e,rpcUrls:t,blockExplorerUrls:r,chainName:i,iconUrls:n,nativeCurrency:s}};let c=null;const l=(0,a.randomBytesHex)(8),d=e=>{this.publishWeb3RequestCanceledEvent(l),this.handleErrorResponse(l,o.method,e),null==c||c()};this.ui.inlineAddEthereumChain(e)||(c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload}));return{promise:new Promise(((t,n)=>{this.relayEventManager.callbacks.set(l,(e=>{if(null==c||c(),(0,u.isErrorResponse)(e))return n(new Error(e.errorMessage));t(e)}));const r=e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:l,response:{method:"addEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},i=e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:l,response:{method:"addEthereumChain",result:{isApproved:!0,rpcUrl:e}}})};this.ui.inlineAddEthereumChain(e)&&this.ui.addEthereumChain({onCancel:r,onApprove:i,chainId:o.params.chainId,rpcUrls:o.params.rpcUrls,blockExplorerUrls:o.params.blockExplorerUrls,chainName:o.params.chainName,iconUrls:o.params.iconUrls,nativeCurrency:o.params.nativeCurrency}),this.ui.inlineAddEthereumChain(e)||this.ui.isStandalone()||this.publishWeb3RequestEvent(l,o)})),cancel:d}}switchEthereumChain(e,t){const n={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:t})},i=(0,a.randomBytesHex)(8);return{promise:new Promise(((t,a)=>{this.relayEventManager.callbacks.set(i,(e=>(0,u.isErrorResponse)(e)&&e.errorCode?a(r.standardErrors.provider.custom({code:e.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."})):(0,u.isErrorResponse)(e)?a(new Error(e.errorMessage)):void t(e)));this.ui.switchEthereumChain({onCancel:t=>{var n;if(t){const a=null!==(n=(0,r.getErrorCode)(t))&&void 0!==n?n:r.standardErrorCodes.provider.unsupportedChain;this.handleErrorResponse(i,"switchEthereumChain",t instanceof Error?t:r.standardErrors.provider.unsupportedChain(e),a)}else this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:i,response:{method:"switchEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},onApprove:e=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:i,response:{method:"switchEthereumChain",result:{isApproved:!0,rpcUrl:e}}})},chainId:n.params.chainId,address:n.params.address}),this.ui.inlineSwitchEthereumChain()||this.ui.isStandalone()||this.publishWeb3RequestEvent(i,n)})),cancel:e=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,n.method,e)}}}inlineAddEthereumChain(e){return this.ui.inlineAddEthereumChain(e)}getSessionIdHash(){return c.Session.hash(this._session.id)}sendRequestStandalone(e,t){const n=n=>{this.handleErrorResponse(e,t.method,n)},r=t=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:e,response:t})};switch(t.method){case"signEthereumMessage":this.ui.signEthereumMessage({request:t,onSuccess:r,onCancel:n});break;case"signEthereumTransaction":this.ui.signEthereumTransaction({request:t,onSuccess:r,onCancel:n});break;case"submitEthereumTransaction":this.ui.submitEthereumTransaction({request:t,onSuccess:r,onCancel:n});break;case"ethereumAddressFromSignedMessage":this.ui.ethereumAddressFromSignedMessage({request:t,onSuccess:r});break;default:n()}}}t.WalletLinkRelay=h,h.accountRequestCallbackIds=new Set},16118:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkConnection=void 0;const r=n(6496),i=n(13049),a=n(22705),s=n(89293),o=n(89474),c=n(10106),l=n(67891);t.WalletLinkConnection=class{constructor({session:e,linkAPIUrl:t,listener:n,diagnostic:u,WebSocketClass:d=WebSocket}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,r.IntNumber)(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=e=>{if(!e)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",t=>e.JsonRpcUrl&&this.handleChainUpdated(t,e.JsonRpcUrl)]]).forEach(((t,n)=>{const r=e[n];void 0!==r&&t(r)}))},this.handleDestroyed=e=>{var t,n;"1"===e&&(null===(t=this.listener)||void 0===t||t.resetAndReload(),null===(n=this.diagnostic)||void 0===n||n.log(a.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:this.isDestroyed,sessionIdHash:o.Session.hash(this.session.id)}))},this.handleAccountUpdated=async e=>{var t,n;try{const n=await this.cipher.decrypt(e);null===(t=this.listener)||void 0===t||t.accountUpdated(n)}catch(e){null===(n=this.diagnostic)||void 0===n||n.log(a.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}},this.handleMetadataUpdated=async(e,t)=>{var n,r;try{const r=await this.cipher.decrypt(t);null===(n=this.listener)||void 0===n||n.metadataUpdated(e,r)}catch(t){null===(r=this.diagnostic)||void 0===r||r.log(a.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:e})}},this.handleWalletUsernameUpdated=async e=>{this.handleMetadataUpdated(s.WALLET_USER_NAME_KEY,e)},this.handleAppVersionUpdated=async e=>{this.handleMetadataUpdated(s.APP_VERSION_KEY,e)},this.handleChainUpdated=async(e,t)=>{var n,r;try{const r=await this.cipher.decrypt(e),i=await this.cipher.decrypt(t);null===(n=this.listener)||void 0===n||n.chainUpdated(r,i)}catch(e){null===(r=this.diagnostic)||void 0===r||r.log(a.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}},this.session=e,this.cipher=new i.Cipher(e.secret),this.diagnostic=u,this.listener=n;const h=new l.WalletLinkWebSocket(`${t}/rpc`,d);h.setConnectionStateListener((async t=>{var n;null===(n=this.diagnostic)||void 0===n||n.log(a.EVENTS.CONNECTED_STATE_CHANGE,{state:t,sessionIdHash:o.Session.hash(e.id)});let r=!1;switch(t){case l.ConnectionState.DISCONNECTED:if(!this.destroyed){const e=async()=>{await new Promise((e=>setTimeout(e,5e3))),this.destroyed||h.connect().catch((()=>{e()}))};e()}break;case l.ConnectionState.CONNECTED:try{await this.authenticate(),this.sendIsLinked(),this.sendGetSessionConfig(),r=!0}catch(e){}this.updateLastHeartbeat(),setInterval((()=>{this.heartbeat()}),1e4),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();case l.ConnectionState.CONNECTING:}this.connected!==r&&(this.connected=r)})),h.setIncomingDataListener((t=>{var n,r,i;switch(t.type){case"Heartbeat":return void this.updateLastHeartbeat();case"IsLinkedOK":case"Linked":{const r="IsLinkedOK"===t.type?t.linked:void 0;null===(n=this.diagnostic)||void 0===n||n.log(a.EVENTS.LINKED,{sessionIdHash:o.Session.hash(e.id),linked:r,type:t.type,onlineGuests:t.onlineGuests}),this.linked=r||t.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":null===(r=this.diagnostic)||void 0===r||r.log(a.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:o.Session.hash(e.id),metadata_keys:t&&t.metadata?Object.keys(t.metadata):void 0}),this.handleSessionMetadataUpdated(t.metadata);break;case"Event":this.handleIncomingEvent(t)}void 0!==t.id&&(null===(i=this.requestResolutions.get(t.id))||void 0===i||i(t))})),this.ws=h,this.http=new c.WalletLinkHTTP(t,e.id,e.key)}connect(){var e;if(this.destroyed)throw new Error("instance is destroyed");null===(e=this.diagnostic)||void 0===e||e.log(a.EVENTS.STARTED_CONNECTING,{sessionIdHash:o.Session.hash(this.session.id)}),this.ws.connect()}destroy(){var e;this.destroyed=!0,this.ws.disconnect(),null===(e=this.diagnostic)||void 0===e||e.log(a.EVENTS.DISCONNECTED,{sessionIdHash:o.Session.hash(this.session.id)}),this.listener=void 0}get isDestroyed(){return this.destroyed}get connected(){return this._connected}set connected(e){var t,n;this._connected=e,e&&(null===(t=this.onceConnected)||void 0===t||t.call(this)),null===(n=this.listener)||void 0===n||n.connectedUpdated(e)}setOnceConnected(e){return new Promise((t=>{this.connected?e().then(t):this.onceConnected=()=>{e().then(t),this.onceConnected=void 0}}))}get linked(){return this._linked}set linked(e){var t,n;this._linked=e,e&&(null===(t=this.onceLinked)||void 0===t||t.call(this)),null===(n=this.listener)||void 0===n||n.linkedUpdated(e)}setOnceLinked(e){return new Promise((t=>{this.linked?e().then(t):this.onceLinked=()=>{e().then(t),this.onceLinked=void 0}}))}async handleIncomingEvent(e){var t,n;if("Event"===e.type&&"Web3Response"===e.event)try{const n=await this.cipher.decrypt(e.data),r=JSON.parse(n);if("WEB3_RESPONSE"!==r.type)return;null===(t=this.listener)||void 0===t||t.handleWeb3ResponseMessage(r)}catch(e){null===(n=this.diagnostic)||void 0===n||n.log(a.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}async checkUnseenEvents(){if(this.connected){await new Promise((e=>setTimeout(e,250)));try{await this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}}else this.shouldFetchUnseenEventsOnConnect=!0}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1;(await this.http.fetchUnseenEvents()).forEach((e=>this.handleIncomingEvent(e)))}async setSessionMetadata(e,t){const n={type:"SetSessionConfig",id:(0,r.IntNumber)(this.nextReqId++),sessionId:this.session.id,metadata:{[e]:t}};return this.setOnceConnected((async()=>{const e=await this.makeRequest(n);if("Fail"===e.type)throw new Error(e.error||"failed to set session metadata")}))}async publishEvent(e,t,n=!1){const i=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{origin:location.origin,relaySource:window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),a={type:"PublishEvent",id:(0,r.IntNumber)(this.nextReqId++),sessionId:this.session.id,event:e,data:i,callWebhook:n};return this.setOnceLinked((async()=>{const e=await this.makeRequest(a);if("Fail"===e.type)throw new Error(e.error||"failed to publish event");return e.eventId}))}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>2e4)this.ws.disconnect();else try{this.ws.sendData("h")}catch(e){}}async makeRequest(e,t=6e4){const n=e.id;let r;return this.sendData(e),Promise.race([new Promise(((e,i)=>{r=window.setTimeout((()=>{i(new Error(`request ${n} timed out`))}),t)})),new Promise((e=>{this.requestResolutions.set(n,(t=>{clearTimeout(r),e(t),this.requestResolutions.delete(n)}))}))])}async authenticate(){const e={type:"HostSession",id:(0,r.IntNumber)(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key},t=await this.makeRequest(e);if("Fail"===t.type)throw new Error(t.error||"failed to authentcate")}sendIsLinked(){const e={type:"IsLinked",id:(0,r.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}sendGetSessionConfig(){const e={type:"GetSessionConfig",id:(0,r.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}}},10106:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkHTTP=void 0;t.WalletLinkHTTP=class{constructor(e,t,n){this.linkAPIUrl=e,this.sessionId=t;const r=`${t}:${n}`;this.auth=`Basic ${btoa(r)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map((e=>fetch(`${this.linkAPIUrl}/events/${e.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}})))).catch((e=>console.error("Unabled to mark event as failed:",e)))}async fetchUnseenEvents(){var e;const t=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(t.ok){const{events:n,error:r}=await t.json();if(r)throw new Error(`Check unseen events failed: ${r}`);const i=null!==(e=null==n?void 0:n.filter((e=>"Web3Response"===e.event)).map((e=>({type:"Event",sessionId:this.sessionId,eventId:e.id,event:e.event,data:e.data}))))&&void 0!==e?e:[];return this.markUnseenEventsAsSeen(i),i}throw new Error(`Check unseen events failed: ${t.status}`)}}},67891:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkWebSocket=t.ConnectionState=void 0,function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED"}(n||(t.ConnectionState=n={}));t.WalletLinkWebSocket=class{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,t=WebSocket){this.WebSocketClass=t,this.webSocket=null,this.pendingData=[],this.url=e.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise(((e,t)=>{var r;let i;try{this.webSocket=i=new this.WebSocketClass(this.url)}catch(e){return void t(e)}null===(r=this.connectionStateListener)||void 0===r||r.call(this,n.CONNECTING),i.onclose=e=>{var r;this.clearWebSocket(),t(new Error(`websocket error ${e.code}: ${e.reason}`)),null===(r=this.connectionStateListener)||void 0===r||r.call(this,n.DISCONNECTED)},i.onopen=t=>{var r;if(e(),null===(r=this.connectionStateListener)||void 0===r||r.call(this,n.CONNECTED),this.pendingData.length>0){[...this.pendingData].forEach((e=>this.sendData(e))),this.pendingData=[]}},i.onmessage=e=>{var t,n;if("h"===e.data)null===(t=this.incomingDataListener)||void 0===t||t.call(this,{type:"Heartbeat"});else try{const t=JSON.parse(e.data);null===(n=this.incomingDataListener)||void 0===n||n.call(this,t)}catch(e){}}}))}disconnect(){var e;const{webSocket:t}=this;if(t){this.clearWebSocket(),null===(e=this.connectionStateListener)||void 0===e||e.call(this,n.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{t.close()}catch(e){}}}sendData(e){const{webSocket:t}=this;if(!t)return this.pendingData.push(e),void this.connect();t.send(e)}clearWebSocket(){const{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}}},42331:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorResponse=void 0,t.isErrorResponse=function(e){return void 0!==e.errorMessage}},62253:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WalletLinkRelayUI=void 0;const r=n(34760),i=n(14999),a=n(62841);t.WalletLinkRelayUI=class{constructor(e){this.standalone=null,this.attached=!1,this.snackbar=new a.Snackbar({darkMode:e.darkMode}),this.linkFlow=new i.LinkFlow({darkMode:e.darkMode,version:e.version,sessionId:e.session.id,sessionSecret:e.session.secret,linkAPIUrl:e.linkAPIUrl,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const e=document.documentElement,t=document.createElement("div");t.className="-cbwsdk-css-reset",e.appendChild(t),this.linkFlow.attach(t),this.snackbar.attach(t),this.attached=!0,(0,r.injectCssReset)()}setConnected(e){this.linkFlow.setConnected(e)}setChainId(e){this.linkFlow.setChainId(e)}setConnectDisabled(e){this.linkFlow.setConnectDisabled(e)}addEthereumChain(){}watchAsset(){}switchEthereumChain(){}requestEthereumAccounts(e){this.linkFlow.open({onCancel:e.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}showConnecting(e){let t;return t=e.isUnlinkedErrorState?{autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:{message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(t)}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(e){this.standalone=e}isStandalone(){var e;return null!==(e=this.standalone)&&void 0!==e&&e}}},5967:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer;border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}"},97829:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CoinbaseWalletSteps=t.ConnectItem=t.ConnectContent=void 0;const i=r(n(9546)),a=n(5181),s=n(29740),o=n(14892),c=n(69734),l=r(n(1119)),u=n(14860),d=r(n(84162)),h=n(23830),p=n(77357),f=r(n(5967)),m={title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",icon:l.default,steps:b},y=e=>"light"===e?"#FFFFFF":"#0A0B0D";function g({title:e,description:t,icon:n,theme:r}){return(0,a.h)("div",{className:(0,i.default)("-cbwsdk-connect-item",r)},(0,a.h)("div",null,(0,a.h)("img",{src:n,alt:e})),(0,a.h)("div",{className:"-cbwsdk-connect-item-copy-wrapper"},(0,a.h)("h3",{className:"-cbwsdk-connect-item-title"},e),(0,a.h)("p",{className:"-cbwsdk-connect-item-description"},t)))}function b({theme:e}){return(0,a.h)("ol",{className:"-cbwsdk-wallet-steps"},(0,a.h)("li",{className:(0,i.default)("-cbwsdk-wallet-steps-item",e)},(0,a.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,a.h)("li",{className:(0,i.default)("-cbwsdk-wallet-steps-item",e)},(0,a.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},(0,a.h)("span",null,"Tap ",(0,a.h)("strong",null,"Scan")," "),(0,a.h)("span",{className:(0,i.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",e)},(0,a.h)(u.QRCodeIcon,{fill:y(e)})))))}t.ConnectContent=function(e){const{theme:t}=e,n=(0,s.createQrUrl)(e.sessionId,e.sessionSecret,e.linkAPIUrl,e.isParentConnection,e.version,e.chainId),r=m.steps;return(0,a.h)("div",{"data-testid":"connect-content",className:(0,i.default)("-cbwsdk-connect-content",t)},(0,a.h)("style",null,f.default),(0,a.h)("div",{className:"-cbwsdk-connect-content-header"},(0,a.h)("h2",{className:(0,i.default)("-cbwsdk-connect-content-heading",t)},"Scan to connect with our mobile app"),e.onCancel&&(0,a.h)("button",{type:"button",className:"-cbwsdk-cancel-button",onClick:e.onCancel},(0,a.h)(c.CloseIcon,{fill:"light"===t?"#0A0B0D":"#FFFFFF"}))),(0,a.h)("div",{className:"-cbwsdk-connect-content-layout"},(0,a.h)("div",{className:"-cbwsdk-connect-content-column-left"},(0,a.h)(g,{title:m.title,description:m.description,icon:m.icon,theme:t})),(0,a.h)("div",{className:"-cbwsdk-connect-content-column-right"},(0,a.h)("div",{className:"-cbwsdk-connect-content-qr-wrapper"},(0,a.h)(h.QRCode,{content:n,width:200,height:200,fgColor:"#000",bgColor:"transparent",image:{svg:d.default,width:25,height:25}}),(0,a.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:o.LIB_VERSION}),(0,a.h)("input",{type:"hidden",value:n})),(0,a.h)(r,{theme:t}),!e.isConnected&&(0,a.h)("div",{"data-testid":"connecting-spinner",className:(0,i.default)("-cbwsdk-connect-content-qr-connecting",t)},(0,a.h)(p.Spinner,{size:36,color:"dark"===t?"#FFF":"#000"}),(0,a.h)("p",null,"Connecting...")))))},t.ConnectItem=g,t.CoinbaseWalletSteps=b},52307:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}"},75169:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectDialog=void 0;const i=r(n(9546)),a=n(5181),s=n(83817),o=n(97829),c=n(10733),l=r(n(52307));t.ConnectDialog=e=>{const{isOpen:t,darkMode:n}=e,[r,u]=(0,s.useState)(!t),[d,h]=(0,s.useState)(!t);(0,s.useEffect)((()=>{const e=[window.setTimeout((()=>{h(!t)}),10)];return t?u(!1):e.push(window.setTimeout((()=>{u(!0)}),360)),()=>{e.forEach(window.clearTimeout)}}),[t]);const p=n?"dark":"light";return(0,a.h)("div",{class:(0,i.default)("-cbwsdk-connect-dialog-container",r&&"-cbwsdk-connect-dialog-container-hidden")},(0,a.h)("style",null,l.default),(0,a.h)("div",{class:(0,i.default)("-cbwsdk-connect-dialog-backdrop",p,d&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,a.h)("div",{class:"-cbwsdk-connect-dialog"},(0,a.h)("div",{class:(0,i.default)("-cbwsdk-connect-dialog-box",d&&"-cbwsdk-connect-dialog-box-hidden")},e.connectDisabled?null:(0,a.h)(o.ConnectContent,{theme:p,version:e.version,sessionId:e.sessionId,sessionSecret:e.sessionSecret,linkAPIUrl:e.linkAPIUrl,isConnected:e.isConnected,isParentConnection:e.isParentConnection,chainId:e.chainId,onCancel:e.onCancel}),(0,a.h)(c.TryExtensionContent,{theme:p}))))}},14999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkFlow=void 0;const r=n(5181),i=n(75169);t.LinkFlow=class{constructor(e){this.connected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=e.darkMode,this.version=e.version,this.sessionId=e.sessionId,this.sessionSecret=e.sessionSecret,this.linkAPIUrl=e.linkAPIUrl,this.isParentConnection=e.isParentConnection}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",e.appendChild(this.root),this.render()}setConnected(e){this.connected!==e&&(this.connected=e,this.render())}setChainId(e){this.chainId!==e&&(this.chainId=e,this.render())}detach(){var e;this.root&&((0,r.render)(null,this.root),null===(e=this.root.parentElement)||void 0===e||e.removeChild(this.root))}setConnectDisabled(e){this.connectDisabled=e}open(e){this.isOpen=!0,this.onCancel=e.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){this.root&&(0,r.render)((0,r.h)(i.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.connected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)}}},23830:function(e,t,n){"use strict";var r=n(1048).Buffer,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.QRCode=void 0;const a=n(5181),s=n(83817),o=i(n(23079));t.QRCode=e=>{const[t,n]=(0,s.useState)("");return(0,s.useEffect)((()=>{var t,i;const a=new o.default({content:e.content,background:e.bgColor||"#ffffff",color:e.fgColor||"#000000",container:"svg",ecl:"M",width:null!==(t=e.width)&&void 0!==t?t:256,height:null!==(i=e.height)&&void 0!==i?i:256,padding:0,image:e.image}),s=r.from(a.svg(),"utf8").toString("base64");n(`data:image/svg+xml;base64,${s}`)}),[e.bgColor,e.content,e.fgColor,e.height,e.image,e.width]),t?(0,a.h)("img",{src:t,alt:"QR Code"}):null}},16841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}"},91627:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RedirectDialog=void 0;const i=r(n(9546)),a=n(5181),s=n(34760),o=n(18436),c=r(n(16841));t.RedirectDialog=class{constructor(){this.root=null}attach(){const e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),(0,s.injectCssReset)()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&((0,a.render)(null,this.root),e&&(0,a.render)((0,a.h)(l,Object.assign({},e,{onDismiss:()=>{this.clear()}})),this.root))}};const l=({title:e,buttonText:t,darkMode:n,onButtonClick:r,onDismiss:s})=>{const l=n?"dark":"light";return(0,a.h)(o.SnackbarContainer,{darkMode:n},(0,a.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,a.h)("style",null,c.default),(0,a.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:s}),(0,a.h)("div",{class:(0,i.default)("-cbwsdk-redirect-dialog-box",l)},(0,a.h)("p",null,e),(0,a.h)("button",{onClick:r},t))))}},86523:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}"},62841:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SnackbarInstance=t.SnackbarContainer=t.Snackbar=void 0;const i=r(n(9546)),a=n(5181),s=n(83817),o=r(n(86523));t.Snackbar=class{constructor(e){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=e.darkMode}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",e.appendChild(this.root),this.render()}presentItem(e){const t=this.nextItemKey++;return this.items.set(t,e),this.render(),()=>{this.items.delete(t),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,a.render)((0,a.h)("div",null,(0,a.h)(t.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map((([e,n])=>(0,a.h)(t.SnackbarInstance,Object.assign({},n,{key:e})))))),this.root)}};t.SnackbarContainer=e=>(0,a.h)("div",{class:(0,i.default)("-cbwsdk-snackbar-container")},(0,a.h)("style",null,o.default),(0,a.h)("div",{class:"-cbwsdk-snackbar"},e.children));t.SnackbarInstance=({autoExpand:e,message:t,menuItems:n})=>{const[r,o]=(0,s.useState)(!0),[c,l]=(0,s.useState)(null!=e&&e);(0,s.useEffect)((()=>{const e=[window.setTimeout((()=>{o(!1)}),1),window.setTimeout((()=>{l(!0)}),1e4)];return()=>{e.forEach(window.clearTimeout)}}));return(0,a.h)("div",{class:(0,i.default)("-cbwsdk-snackbar-instance",r&&"-cbwsdk-snackbar-instance-hidden",c&&"-cbwsdk-snackbar-instance-expanded")},(0,a.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:()=>{l(!c)}},(0,a.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,a.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},t),(0,a.h)("div",{class:"-gear-container"},!c&&(0,a.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,a.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,a.h)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=",class:"-gear-icon",title:"Expand"}))),n&&n.length>0&&(0,a.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},n.map(((e,t)=>(0,a.h)("div",{class:(0,i.default)("-cbwsdk-snackbar-instance-menu-item",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:e.onClick,key:t},(0,a.h)("svg",{width:e.svgWidth,height:e.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,a.h)("path",{"fill-rule":e.defaultFillRule,"clip-rule":e.defaultClipRule,d:e.path,fill:"#AAAAAA"})),(0,a.h)("span",{class:(0,i.default)("-cbwsdk-snackbar-instance-menu-item-info",e.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},e.info))))))}},18436:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(62841),t)},3143:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}"},77357:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Spinner=void 0;const i=n(5181),a=r(n(3143));t.Spinner=e=>{var t;const n=null!==(t=e.size)&&void 0!==t?t:64,r=e.color||"#000";return(0,i.h)("div",{class:"-cbwsdk-spinner"},(0,i.h)("style",null,a.default),(0,i.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:n,height:n}},(0,i.h)("circle",{style:{cx:50,cy:50,r:45,stroke:r}})))}},70164:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}"},10733:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TryExtensionContent=void 0;const i=r(n(9546)),a=n(5181),s=n(83817),o=n(41870),c=n(33294),l=n(65719),u=r(n(70164));t.TryExtensionContent=function({theme:e}){const[t,n]=(0,s.useState)(!1),r=(0,s.useCallback)((()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")}),[]),d=(0,s.useCallback)((()=>{t?window.location.reload():(r(),n(!0))}),[r,t]);return(0,a.h)("div",{class:(0,i.default)("-cbwsdk-try-extension",e)},(0,a.h)("style",null,u.default),(0,a.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,a.h)("h3",{class:(0,i.default)("-cbwsdk-try-extension-heading",e)},"Or try the Coinbase Wallet browser extension"),(0,a.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,a.h)("button",{class:(0,i.default)("-cbwsdk-try-extension-cta",e),onClick:d},t?"Refresh":"Install"),(0,a.h)("div",null,!t&&(0,a.h)(o.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:"light"===e?"#0052FF":"#588AF5"})))),(0,a.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,a.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,a.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,a.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,a.h)("span",{class:(0,i.default)("-cbwsdk-try-extension-list-item-icon",e)},(0,a.h)(c.LaptopIcon,{fill:"light"===e?"#0A0B0D":"#FFFFFF"}))),(0,a.h)("div",{class:(0,i.default)("-cbwsdk-try-extension-list-item-copy",e)},"Connect with dapps with just one click on your desktop browser")),(0,a.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,a.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,a.h)("span",{class:(0,i.default)("-cbwsdk-try-extension-list-item-icon",e)},(0,a.h)(l.SafeIcon,{fill:"light"===e?"#0A0B0D":"#FFFFFF"}))),(0,a.h)("div",{class:(0,i.default)("-cbwsdk-try-extension-list-item-copy",e)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}},41870:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrowLeftIcon=void 0;const r=n(5181);t.ArrowLeftIcon=function(e){return(0,r.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},e),(0,r.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}},69734:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CloseIcon=void 0;const r=n(5181);t.CloseIcon=function(e){return(0,r.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),(0,r.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}},33294:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaptopIcon=void 0;const r=n(5181);t.LaptopIcon=function(e){return(0,r.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e),(0,r.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,r.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}},14860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QRCodeIcon=void 0;const r=n(5181);t.QRCodeIcon=function(e){return(0,r.h)("svg",Object.assign({width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},e),(0,r.h)("path",{d:"M3 3V8.99939L5 8.99996V5H9V3H3Z"}),(0,r.h)("path",{d:"M15 21L21 21V15.0006L19 15V19L15 19V21Z"}),(0,r.h)("path",{d:"M21 9H19V5H15.0006L15 3H21V9Z"}),(0,r.h)("path",{d:"M3 15V21H8.99939L8.99996 19H5L5 15H3Z"}))}},84162:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default='\n    <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <circle cx="50" cy="50" r="50" fill="white"/>\n        <circle cx="49.9996" cy="49.9996" r="43.6363" fill="#1B53E4"/>\n        <circle cx="49.9996" cy="49.9996" r="43.6363" stroke="white"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.3379 49.9484C19.3379 66.8508 33.04 80.553 49.9425 80.553C66.8449 80.553 80.5471 66.8508 80.5471 49.9484C80.5471 33.0459 66.8449 19.3438 49.9425 19.3438C33.04 19.3438 19.3379 33.0459 19.3379 49.9484ZM44.0817 40.0799C41.8725 40.0799 40.0817 41.8708 40.0817 44.0799V55.8029C40.0817 58.012 41.8725 59.8029 44.0817 59.8029H55.8046C58.0138 59.8029 59.8046 58.012 59.8046 55.8029V44.0799C59.8046 41.8708 58.0138 40.0799 55.8046 40.0799H44.0817Z" fill="white"/>\n    </svg>\n'},65719:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SafeIcon=void 0;const r=n(5181);t.SafeIcon=function(e){return(0,r.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},e),(0,r.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}},1119:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMTQiIGN5PSIxNCIgcj0iMTQiIGZpbGw9IiMwMDUyRkYiLz48cGF0aCBkPSJNMjMuODUyIDE0QTkuODM0IDkuODM0IDAgMCAxIDE0IDIzLjg1MiA5LjgzNCA5LjgzNCAwIDAgMSA0LjE0OCAxNCA5LjgzNCA5LjgzNCAwIDAgMSAxNCA0LjE0OCA5LjgzNCA5LjgzNCAwIDAgMSAyMy44NTIgMTRaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTExLjE4NSAxMi41MDRjMC0uNDU2IDAtLjcxLjA5OC0uODYyLjA5OC0uMTUyLjE5Ni0uMzA0LjM0My0uMzU1LjE5Ni0uMTAyLjM5Mi0uMTAyLjg4MS0uMTAyaDIuOTg2Yy40OSAwIC42ODYgMCAuODgyLjEwMi4xNDYuMTAxLjI5My4yMDMuMzQyLjM1NS4wOTguMjAzLjA5OC40MDYuMDk4Ljg2MnYyLjk5MmMwIC40NTcgMCAuNzEtLjA5OC44NjMtLjA5OC4xNTItLjE5NS4zMDQtLjM0Mi4zNTUtLjE5Ni4xMDEtLjM5Mi4xMDEtLjg4Mi4xMDFoLTIuOTg2Yy0uNDkgMC0uNjg1IDAtLjg4LS4xMDEtLjE0OC0uMTAyLS4yOTUtLjIwMy0uMzQ0LS4zNTUtLjA5OC0uMjAzLS4wOTgtLjQwNi0uMDk4LS44NjN2LTIuOTkyWiIgZmlsbD0iIzAwNTJGRiIvPjwvc3ZnPg=="},73437:(e,t,n)=>{var r=n(1048).Buffer;const i=n(73079),a=n(82823);function s(e){return e.startsWith("int[")?"int256"+e.slice(3):"int"===e?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):"uint"===e?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):"fixed"===e?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):"ufixed"===e?"ufixed128x128":e}function o(e){return parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function c(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[parseInt(t[1],10),parseInt(t[2],10)]}function l(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?""===t[2]?"dynamic":parseInt(t[2],10):null}function u(e){var t=typeof e;if("string"===t)return i.isHexString(e)?new a(i.stripHexPrefix(e),16):new a(e,10);if("number"===t)return new a(e);if(e.toArray)return e;throw new Error("Argument is not a number")}function d(e,t){var n,s,h,p;if("address"===e)return d("uint160",u(t));if("bool"===e)return d("uint8",t?1:0);if("string"===e)return d("bytes",new r(t,"utf8"));if(function(e){return e.lastIndexOf("]")===e.length-1}(e)){if(void 0===t.length)throw new Error("Not an array?");if("dynamic"!==(n=l(e))&&0!==n&&t.length>n)throw new Error("Elements exceed array size: "+n);for(p in h=[],e=e.slice(0,e.lastIndexOf("[")),"string"==typeof t&&(t=JSON.parse(t)),t)h.push(d(e,t[p]));if("dynamic"===n){var f=d("uint256",t.length);h.unshift(f)}return r.concat(h)}if("bytes"===e)return t=new r(t),h=r.concat([d("uint256",t.length),t]),t.length%32!=0&&(h=r.concat([h,i.zeros(32-t.length%32)])),h;if(e.startsWith("bytes")){if((n=o(e))<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return i.setLengthRight(t,32)}if(e.startsWith("uint")){if((n=o(e))%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if((s=u(t)).bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+s.bitLength());if(s<0)throw new Error("Supplied uint is negative");return s.toArrayLike(r,"be",32)}if(e.startsWith("int")){if((n=o(e))%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if((s=u(t)).bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+s.bitLength());return s.toTwos(256).toArrayLike(r,"be",32)}if(e.startsWith("ufixed")){if(n=c(e),(s=u(t))<0)throw new Error("Supplied ufixed is negative");return d("uint256",s.mul(new a(2).pow(new a(n[1]))))}if(e.startsWith("fixed"))return n=c(e),d("int256",u(t).mul(new a(2).pow(new a(n[1]))));throw new Error("Unsupported or invalid type: "+e)}function h(e){return"string"===e||"bytes"===e||"dynamic"===l(e)}function p(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var n,a,c=[],l=0;l<e.length;l++){var d=s(e[l]),h=t[l];if("bytes"===d)c.push(h);else if("string"===d)c.push(new r(h,"utf8"));else if("bool"===d)c.push(new r(h?"01":"00","hex"));else if("address"===d)c.push(i.setLength(h,20));else if(d.startsWith("bytes")){if((n=o(d))<1||n>32)throw new Error("Invalid bytes<N> width: "+n);c.push(i.setLengthRight(h,n))}else if(d.startsWith("uint")){if((n=o(d))%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if((a=u(h)).bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+a.bitLength());c.push(a.toArrayLike(r,"be",n/8))}else{if(!d.startsWith("int"))throw new Error("Unsupported or invalid type: "+d);if((n=o(d))%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if((a=u(h)).bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+a.bitLength());c.push(a.toTwos(n).toArrayLike(r,"be",n/8))}}return r.concat(c)}e.exports={rawEncode:function(e,t){var n=[],i=[],a=32*e.length;for(var o in e){var c=s(e[o]),l=d(c,t[o]);h(c)?(n.push(d("uint256",a)),i.push(l),a+=l.length):n.push(l)}return r.concat(n.concat(i))},solidityPack:p,soliditySHA3:function(e,t){return i.keccak(p(e,t))}}},9623:(e,t,n)=>{var r=n(1048).Buffer;const i=n(73079),a=n(73437),s={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},o={encodeData(e,t,n,s=!0){const o=["bytes32"],c=[this.hashType(e,n)];if(s){const l=(e,t,o)=>{if(void 0!==n[t])return["bytes32",null==o?"0x0000000000000000000000000000000000000000000000000000000000000000":i.keccak(this.encodeData(t,o,n,s))];if(void 0===o)throw new Error(`missing value for field ${e} of type ${t}`);if("bytes"===t)return["bytes32",i.keccak(o)];if("string"===t)return"string"==typeof o&&(o=r.from(o,"utf8")),["bytes32",i.keccak(o)];if(t.lastIndexOf("]")===t.length-1){const n=t.slice(0,t.lastIndexOf("[")),r=o.map((t=>l(e,n,t)));return["bytes32",i.keccak(a.rawEncode(r.map((([e])=>e)),r.map((([,e])=>e))))]}return[t,o]};for(const r of n[e]){const[e,n]=l(r.name,r.type,t[r.name]);o.push(e),c.push(n)}}else for(const a of n[e]){let e=t[a.name];if(void 0!==e)if("bytes"===a.type)o.push("bytes32"),e=i.keccak(e),c.push(e);else if("string"===a.type)o.push("bytes32"),"string"==typeof e&&(e=r.from(e,"utf8")),e=i.keccak(e),c.push(e);else if(void 0!==n[a.type])o.push("bytes32"),e=i.keccak(this.encodeData(a.type,e,n,s)),c.push(e);else{if(a.type.lastIndexOf("]")===a.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");o.push(a.type),c.push(e)}}return a.rawEncode(o,c)},encodeType(e,t){let n="",r=this.findTypeDependencies(e,t).filter((t=>t!==e));r=[e].concat(r.sort());for(const e of r){if(!t[e])throw new Error("No type definition specified: "+e);n+=e+"("+t[e].map((({name:e,type:t})=>t+" "+e)).join(",")+")"}return n},findTypeDependencies(e,t,n=[]){if(e=e.match(/^\w*/)[0],n.includes(e)||void 0===t[e])return n;n.push(e);for(const r of t[e])for(const e of this.findTypeDependencies(r.type,t,n))!n.includes(e)&&n.push(e);return n},hashStruct(e,t,n,r=!0){return i.keccak(this.encodeData(e,t,n,r))},hashType(e,t){return i.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const n in s.properties)e[n]&&(t[n]=e[n]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){const n=this.sanitizeData(e),a=[r.from("1901","hex")];return a.push(this.hashStruct("EIP712Domain",n.domain,n.types,t)),"EIP712Domain"!==n.primaryType&&a.push(this.hashStruct(n.primaryType,n.message,n.types,t)),i.keccak(r.concat(a))}};e.exports={TYPED_MESSAGE_SCHEMA:s,TypedDataUtils:o,hashForSignTypedDataLegacy:function(e){return function(e){const t=new Error("Expect argument to be non-empty array");if("object"!=typeof e||!e.length)throw t;const n=e.map((function(e){return"bytes"===e.type?i.toBuffer(e.value):e.value})),r=e.map((function(e){return e.type})),s=e.map((function(e){if(!e.name)throw t;return e.type+" "+e.name}));return a.soliditySHA3(["bytes32","bytes32"],[a.soliditySHA3(new Array(e.length).fill("string"),s),a.soliditySHA3(r,n)])}(e.data)},hashForSignTypedData_v3:function(e){return o.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return o.hash(e.data)}}},73079:(e,t,n)=>{var r=n(1048).Buffer;const i=n(92934),a=n(82823);function s(e){return r.allocUnsafe(e).fill(0)}function o(e,t,n){const r=s(t);return e=c(e),n?e.length<t?(e.copy(r),r):e.slice(0,t):e.length<t?(e.copy(r,t-e.length),r):e.slice(-t)}function c(e){if(!r.isBuffer(e))if(Array.isArray(e))e=r.from(e);else if("string"==typeof e)e=l(e)?r.from((t=u(e)).length%2?"0"+t:t,"hex"):r.from(e);else if("number"==typeof e)e=intToBuffer(e);else if(null==e)e=r.allocUnsafe(0);else if(a.isBN(e))e=e.toArrayLike(r);else{if(!e.toArray)throw new Error("invalid type");e=r.from(e.toArray())}var t;return e}function l(e){return"string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/)}function u(e){return"string"==typeof e&&e.startsWith("0x")?e.slice(2):e}e.exports={zeros:s,setLength:o,setLengthRight:function(e,t){return o(e,t,!0)},isHexString:l,stripHexPrefix:u,toBuffer:c,bufferToHex:function(e){return"0x"+(e=c(e)).toString("hex")},keccak:function(e,t){return e=c(e),t||(t=256),i("keccak"+t).update(e).digest()}}},23079:e=>{function t(e){this.mode=r.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,n=this.data.length;t<n;t++){var i=[],a=this.data.charCodeAt(t);a>65536?(i[0]=240|(1835008&a)>>>18,i[1]=128|(258048&a)>>>12,i[2]=128|(4032&a)>>>6,i[3]=128|63&a):a>2048?(i[0]=224|(61440&a)>>>12,i[1]=128|(4032&a)>>>6,i[2]=128|63&a):a>128?(i[0]=192|(1984&a)>>>6,i[1]=128|63&a):i[0]=a,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function n(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,n=this.parsedData.length;t<n;t++)e.put(this.parsedData[t],8)}},n.prototype={addData:function(e){var n=new t(e);this.dataList.push(n),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[r][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=y.getLostPoint(this);(0==n||e>r)&&(e=r,t=n)}return t},createMovieClip:function(e,t,n){var r=e.createEmptyMovieClip(t,n);this.make();for(var i=0;i<this.modules.length;i++)for(var a=1*i,s=0;s<this.modules[i].length;s++){var o=1*s;this.modules[i][s]&&(r.beginFill(0,100),r.moveTo(o,a),r.lineTo(o+1,a),r.lineTo(o+1,a+1),r.lineTo(o,a+1),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=y.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var r=e[t],i=e[n];if(null==this.modules[r][i])for(var a=-2;a<=2;a++)for(var s=-2;s<=2;s++)this.modules[r+a][i+s]=-2==a||2==a||-2==s||2==s||0==a&&0==s}},setupTypeNumber:function(e){for(var t=y.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r}for(n=0;n<18;n++){r=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,r=y.getBCHTypeInfo(n),i=0;i<15;i++){var a=!e&&1==(r>>i&1);i<6?this.modules[i][8]=a:i<8?this.modules[i+1][8]=a:this.modules[this.moduleCount-15+i][8]=a}for(i=0;i<15;i++){a=!e&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=a:i<9?this.modules[8][15-i-1+1]=a:this.modules[8][15-i-1]=a}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,r=this.moduleCount-1,i=7,a=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var o=0;o<2;o++)if(null==this.modules[r][s-o]){var c=!1;a<e.length&&(c=1==(e[a]>>>i&1)),y.getMask(t,r,s-o)&&(c=!c),this.modules[r][s-o]=c,-1==--i&&(a++,i=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}}},n.PAD0=236,n.PAD1=17,n.createData=function(e,t,r){for(var i=w.getRSBlocks(e,t),a=new E,s=0;s<r.length;s++){var o=r[s];a.put(o.mode,4),a.put(o.getLength(),y.getLengthInBits(o.mode,e)),o.write(a)}var c=0;for(s=0;s<i.length;s++)c+=i[s].dataCount;if(a.getLengthInBits()>8*c)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*c+")");for(a.getLengthInBits()+4<=8*c&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=8*c||(a.put(n.PAD0,8),a.getLengthInBits()>=8*c));)a.put(n.PAD1,8);return n.createBytes(a,i)},n.createBytes=function(e,t){for(var n=0,r=0,i=0,a=new Array(t.length),s=new Array(t.length),o=0;o<t.length;o++){var c=t[o].dataCount,l=t[o].totalCount-c;r=Math.max(r,c),i=Math.max(i,l),a[o]=new Array(c);for(var u=0;u<a[o].length;u++)a[o][u]=255&e.buffer[u+n];n+=c;var d=y.getErrorCorrectPolynomial(l),h=new v(a[o],d.getLength()-1).mod(d);s[o]=new Array(d.getLength()-1);for(u=0;u<s[o].length;u++){var p=u+h.getLength()-s[o].length;s[o][u]=p>=0?h.get(p):0}}var f=0;for(u=0;u<t.length;u++)f+=t[u].totalCount;var m=new Array(f),g=0;for(u=0;u<r;u++)for(o=0;o<t.length;o++)u<a[o].length&&(m[g++]=a[o][u]);for(u=0;u<i;u++)for(o=0;o<t.length;o++)u<s[o].length&&(m[g++]=s[o][u]);return m};for(var r={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i=1,a=0,s=3,o=2,c=0,l=1,u=2,d=3,h=4,p=5,f=6,m=7,y={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;y.getBCHDigit(t)-y.getBCHDigit(y.G15)>=0;)t^=y.G15<<y.getBCHDigit(t)-y.getBCHDigit(y.G15);return(e<<10|t)^y.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;y.getBCHDigit(t)-y.getBCHDigit(y.G18)>=0;)t^=y.G18<<y.getBCHDigit(t)-y.getBCHDigit(y.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return y.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case c:return(t+n)%2==0;case l:return t%2==0;case u:return n%3==0;case d:return(t+n)%3==0;case h:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case p:return t*n%2+t*n%3==0;case f:return(t*n%2+t*n%3)%2==0;case m:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new v([1],0),n=0;n<e;n++)t=t.multiply(new v([1,g.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:case r.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r++)for(var i=0;i<t;i++){for(var a=0,s=e.isDark(r,i),o=-1;o<=1;o++)if(!(r+o<0||t<=r+o))for(var c=-1;c<=1;c++)i+c<0||t<=i+c||0==o&&0==c||s==e.isDark(r+o,i+c)&&a++;a>5&&(n+=3+a-5)}for(r=0;r<t-1;r++)for(i=0;i<t-1;i++){var l=0;e.isDark(r,i)&&l++,e.isDark(r+1,i)&&l++,e.isDark(r,i+1)&&l++,e.isDark(r+1,i+1)&&l++,0!=l&&4!=l||(n+=3)}for(r=0;r<t;r++)for(i=0;i<t-6;i++)e.isDark(r,i)&&!e.isDark(r,i+1)&&e.isDark(r,i+2)&&e.isDark(r,i+3)&&e.isDark(r,i+4)&&!e.isDark(r,i+5)&&e.isDark(r,i+6)&&(n+=40);for(i=0;i<t;i++)for(r=0;r<t-6;r++)e.isDark(r,i)&&!e.isDark(r+1,i)&&e.isDark(r+2,i)&&e.isDark(r+3,i)&&e.isDark(r+4,i)&&!e.isDark(r+5,i)&&e.isDark(r+6,i)&&(n+=40);var u=0;for(i=0;i<t;i++)for(r=0;r<t;r++)e.isDark(r,i)&&u++;return n+=10*(Math.abs(100*u/t/t-50)/5)}},g={glog:function(e){if(e<1)throw new Error("glog("+e+")");return g.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return g.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},b=0;b<8;b++)g.EXP_TABLE[b]=1<<b;for(b=8;b<256;b++)g.EXP_TABLE[b]=g.EXP_TABLE[b-4]^g.EXP_TABLE[b-5]^g.EXP_TABLE[b-6]^g.EXP_TABLE[b-8];for(b=0;b<255;b++)g.LOG_TABLE[g.EXP_TABLE[b]]=b;function v(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var r=0;r<e.length-n;r++)this.num[r]=e[r+n]}function w(e,t){this.totalCount=e,this.dataCount=t}function E(){this.buffer=[],this.length=0}v.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var r=0;r<e.getLength();r++)t[n+r]^=g.gexp(g.glog(this.get(n))+g.glog(e.get(r)));return new v(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=g.glog(this.get(0))-g.glog(e.get(0)),n=new Array(this.getLength()),r=0;r<this.getLength();r++)n[r]=this.get(r);for(r=0;r<e.getLength();r++)n[r]^=g.gexp(g.glog(e.get(r))+t);return new v(n,0).mod(e)}},w.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],w.getRSBlocks=function(e,t){var n=w.getRsBlockTable(e,t);if(null==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=n.length/3,i=[],a=0;a<r;a++)for(var s=n[3*a+0],o=n[3*a+1],c=n[3*a+2],l=0;l<s;l++)i.push(new w(o,c));return i},w.getRsBlockTable=function(e,t){switch(t){case i:return w.RS_BLOCK_TABLE[4*(e-1)+0];case a:return w.RS_BLOCK_TABLE[4*(e-1)+1];case s:return w.RS_BLOCK_TABLE[4*(e-1)+2];case o:return w.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},E.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var _=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function S(e){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},"string"==typeof e&&(e={content:e}),e)for(var t in e)this.options[t]=e[t];if("string"!=typeof this.options.content)throw new Error("Expected 'content' as string!");if(0===this.options.content.length)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0&&this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");var r=this.options.content,c=function(e,t){for(var n=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),r=1,i=0,a=0,s=_.length;a<=s;a++){var o=_[a];if(!o)throw new Error("Content too long: expected "+i+" but got "+n);switch(t){case"L":i=o[0];break;case"M":i=o[1];break;case"Q":i=o[2];break;case"H":i=o[3];break;default:throw new Error("Unknwon error correction level: "+t)}if(n<=i)break;r++}if(r>_.length)throw new Error("Content too long");return r}(r,this.options.ecl),l=function(e){switch(e){case"L":return i;case"M":return a;case"Q":return s;case"H":return o;default:throw new Error("Unknwon error correction level: "+e)}}(this.options.ecl);this.qrcode=new n(c,l),this.qrcode.addData(r),this.qrcode.make()}S.prototype.svg=function(e){var t=this.options||{},n=this.qrcode.modules;void 0===e&&(e={container:t.container||"svg"});for(var r=void 0===t.pretty||!!t.pretty,i=r?"  ":"",a=r?"\r\n":"",s=t.width,o=t.height,c=n.length,l=s/(c+2*t.padding),u=o/(c+2*t.padding),d=void 0!==t.join&&!!t.join,h=void 0!==t.swap&&!!t.swap,p=void 0===t.xmlDeclaration||!!t.xmlDeclaration,f=void 0!==t.predefined&&!!t.predefined,m=f?i+'<defs><path id="qrmodule" d="M0 0 h'+u+" v"+l+' H0 z" style="fill:'+t.color+';shape-rendering:crispEdges;" /></defs>'+a:"",y=i+'<rect x="0" y="0" width="'+s+'" height="'+o+'" style="fill:'+t.background+';shape-rendering:crispEdges;"/>'+a,g="",b="",v=0;v<c;v++)for(var w=0;w<c;w++){if(n[w][v]){var E=w*l+t.padding*l,_=v*u+t.padding*u;if(h){var S=E;E=_,_=S}if(d){var T=l+E,A=u+_;E=Number.isInteger(E)?Number(E):E.toFixed(2),_=Number.isInteger(_)?Number(_):_.toFixed(2),T=Number.isInteger(T)?Number(T):T.toFixed(2),b+="M"+E+","+_+" V"+(A=Number.isInteger(A)?Number(A):A.toFixed(2))+" H"+T+" V"+_+" H"+E+" Z "}else g+=f?i+'<use x="'+E.toString()+'" y="'+_.toString()+'" href="#qrmodule" />'+a:i+'<rect x="'+E.toString()+'" y="'+_.toString()+'" width="'+l+'" height="'+u+'" style="fill:'+t.color+';shape-rendering:crispEdges;"/>'+a}}d&&(g=i+'<path x="0" y="0" style="fill:'+t.color+';shape-rendering:crispEdges;" d="'+b+'" />');let N="";if(void 0!==this.options.image&&this.options.image.svg){const e=s*this.options.image.width/100,t=o*this.options.image.height/100;N+=`<svg x="${s/2-e/2}" y="${o/2-t/2}" width="${e}" height="${t}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`,N+=this.options.image.svg+a,N+="</svg>"}var C="";switch(e.container){case"svg":p&&(C+='<?xml version="1.0" standalone="yes"?>'+a),C+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+s+'" height="'+o+'">'+a,C+=m+y+g,C+=N,C+="</svg>";break;case"svg-viewbox":p&&(C+='<?xml version="1.0" standalone="yes"?>'+a),C+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+s+" "+o+'">'+a,C+=m+y+g,C+=N,C+="</svg>";break;case"g":C+='<g width="'+s+'" height="'+o+'">'+a,C+=m+y+g,C+=N,C+="</g>";break;default:C+=(m+y+g+N).replace(/^\s+/,"")}return C},e.exports=S},14892:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LIB_VERSION=void 0,t.LIB_VERSION="3.9.0"},92934:(e,t,n)=>{e.exports=n(41566)(n(69379))},41566:(e,t,n)=>{const r=n(52954),i=n(46632);e.exports=function(e){const t=r(e),n=i(e);return function(e,r){switch("string"==typeof e?e.toLowerCase():e){case"keccak224":return new t(1152,448,null,224,r);case"keccak256":return new t(1088,512,null,256,r);case"keccak384":return new t(832,768,null,384,r);case"keccak512":return new t(576,1024,null,512,r);case"sha3-224":return new t(1152,448,6,224,r);case"sha3-256":return new t(1088,512,6,256,r);case"sha3-384":return new t(832,768,6,384,r);case"sha3-512":return new t(576,1024,6,512,r);case"shake128":return new n(1344,256,31,r);case"shake256":return new n(1088,512,31,r);default:throw new Error("Invald algorithm: "+e)}}}},52954:(e,t,n)=>{var r=n(1048).Buffer;const{Transform:i}=n(34156);e.exports=e=>class t extends i{constructor(t,n,r,i,a){super(a),this._rate=t,this._capacity=n,this._delimitedSuffix=r,this._hashBitLength=i,this._options=a,this._state=new e,this._state.initialize(t,n),this._finalized=!1}_transform(e,t,n){let r=null;try{this.update(e,t)}catch(e){r=e}n(r)}_flush(e){let t=null;try{this.push(this.digest())}catch(e){t=e}e(t)}update(e,t){if(!r.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return r.isBuffer(e)||(e=r.from(e,t)),this._state.absorb(e),this}digest(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let t=this._state.squeeze(this._hashBitLength/8);return void 0!==e&&(t=t.toString(e)),this._resetState(),t}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},46632:(e,t,n)=>{var r=n(1048).Buffer;const{Transform:i}=n(34156);e.exports=e=>class t extends i{constructor(t,n,r,i){super(i),this._rate=t,this._capacity=n,this._delimitedSuffix=r,this._options=i,this._state=new e,this._state.initialize(t,n),this._finalized=!1}_transform(e,t,n){let r=null;try{this.update(e,t)}catch(e){r=e}n(r)}_flush(){}_read(e){this.push(this.squeeze(e))}update(e,t){if(!r.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return r.isBuffer(e)||(e=r.from(e,t)),this._state.absorb(e),this}squeeze(e,t){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let n=this._state.squeeze(e);return void 0!==t&&(n=n.toString(t)),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},88820:(e,t)=>{const n=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];t.p1600=function(e){for(let t=0;t<24;++t){const r=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],a=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],o=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],u=e[7]^e[17]^e[27]^e[37]^e[47],d=e[8]^e[18]^e[28]^e[38]^e[48],h=e[9]^e[19]^e[29]^e[39]^e[49];let p=d^(a<<1|s>>>31),f=h^(s<<1|a>>>31);const m=e[0]^p,y=e[1]^f,g=e[10]^p,b=e[11]^f,v=e[20]^p,w=e[21]^f,E=e[30]^p,_=e[31]^f,S=e[40]^p,T=e[41]^f;p=r^(o<<1|c>>>31),f=i^(c<<1|o>>>31);const A=e[2]^p,N=e[3]^f,C=e[12]^p,M=e[13]^f,R=e[22]^p,x=e[23]^f,k=e[32]^p,I=e[33]^f,O=e[42]^p,P=e[43]^f;p=a^(l<<1|u>>>31),f=s^(u<<1|l>>>31);const L=e[4]^p,D=e[5]^f,B=e[14]^p,j=e[15]^f,q=e[24]^p,$=e[25]^f,U=e[34]^p,F=e[35]^f,V=e[44]^p,H=e[45]^f;p=o^(d<<1|h>>>31),f=c^(h<<1|d>>>31);const z=e[6]^p,W=e[7]^f,K=e[16]^p,G=e[17]^f,Q=e[26]^p,J=e[27]^f,Y=e[36]^p,X=e[37]^f,Z=e[46]^p,ee=e[47]^f;p=l^(r<<1|i>>>31),f=u^(i<<1|r>>>31);const te=e[8]^p,ne=e[9]^f,re=e[18]^p,ie=e[19]^f,ae=e[28]^p,se=e[29]^f,oe=e[38]^p,ce=e[39]^f,le=e[48]^p,ue=e[49]^f,de=m,he=y,pe=b<<4|g>>>28,fe=g<<4|b>>>28,me=v<<3|w>>>29,ye=w<<3|v>>>29,ge=_<<9|E>>>23,be=E<<9|_>>>23,ve=S<<18|T>>>14,we=T<<18|S>>>14,Ee=A<<1|N>>>31,_e=N<<1|A>>>31,Se=M<<12|C>>>20,Te=C<<12|M>>>20,Ae=R<<10|x>>>22,Ne=x<<10|R>>>22,Ce=I<<13|k>>>19,Me=k<<13|I>>>19,Re=O<<2|P>>>30,xe=P<<2|O>>>30,ke=D<<30|L>>>2,Ie=L<<30|D>>>2,Oe=B<<6|j>>>26,Pe=j<<6|B>>>26,Le=$<<11|q>>>21,De=q<<11|$>>>21,Be=U<<15|F>>>17,je=F<<15|U>>>17,qe=H<<29|V>>>3,$e=V<<29|H>>>3,Ue=z<<28|W>>>4,Fe=W<<28|z>>>4,Ve=G<<23|K>>>9,He=K<<23|G>>>9,ze=Q<<25|J>>>7,We=J<<25|Q>>>7,Ke=Y<<21|X>>>11,Ge=X<<21|Y>>>11,Qe=ee<<24|Z>>>8,Je=Z<<24|ee>>>8,Ye=te<<27|ne>>>5,Xe=ne<<27|te>>>5,Ze=re<<20|ie>>>12,et=ie<<20|re>>>12,tt=se<<7|ae>>>25,nt=ae<<7|se>>>25,rt=oe<<8|ce>>>24,it=ce<<8|oe>>>24,at=le<<14|ue>>>18,st=ue<<14|le>>>18;e[0]=de^~Se&Le,e[1]=he^~Te&De,e[10]=Ue^~Ze&me,e[11]=Fe^~et&ye,e[20]=Ee^~Oe&ze,e[21]=_e^~Pe&We,e[30]=Ye^~pe&Ae,e[31]=Xe^~fe&Ne,e[40]=ke^~Ve&tt,e[41]=Ie^~He&nt,e[2]=Se^~Le&Ke,e[3]=Te^~De&Ge,e[12]=Ze^~me&Ce,e[13]=et^~ye&Me,e[22]=Oe^~ze&rt,e[23]=Pe^~We&it,e[32]=pe^~Ae&Be,e[33]=fe^~Ne&je,e[42]=Ve^~tt&ge,e[43]=He^~nt&be,e[4]=Le^~Ke&at,e[5]=De^~Ge&st,e[14]=me^~Ce&qe,e[15]=ye^~Me&$e,e[24]=ze^~rt&ve,e[25]=We^~it&we,e[34]=Ae^~Be&Qe,e[35]=Ne^~je&Je,e[44]=tt^~ge&Re,e[45]=nt^~be&xe,e[6]=Ke^~at&de,e[7]=Ge^~st&he,e[16]=Ce^~qe&Ue,e[17]=Me^~$e&Fe,e[26]=rt^~ve&Ee,e[27]=it^~we&_e,e[36]=Be^~Qe&Ye,e[37]=je^~Je&Xe,e[46]=ge^~Re&ke,e[47]=be^~xe&Ie,e[8]=at^~de&Se,e[9]=st^~he&Te,e[18]=qe^~Ue&Ze,e[19]=$e^~Fe&et,e[28]=ve^~Ee&Oe,e[29]=we^~_e&Pe,e[38]=Qe^~Ye&pe,e[39]=Je^~Xe&fe,e[48]=Re^~ke&Ve,e[49]=xe^~Ie&He,e[0]^=n[2*t],e[1]^=n[2*t+1]}}},69379:(e,t,n)=>{var r=n(1048).Buffer;const i=n(88820);function a(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}a.prototype.initialize=function(e,t){for(let e=0;e<50;++e)this.state[e]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1},a.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<this.count%4*8,this.count+=1,this.count===this.blockSize&&(i.p1600(this.state),this.count=0)},a.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<this.count%4*8,0!=(128&e)&&this.count===this.blockSize-1&&i.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<(this.blockSize-1)%4*8,i.p1600(this.state),this.count=0,this.squeezing=!0},a.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=r.alloc(e);for(let n=0;n<e;++n)t[n]=this.state[~~(this.count/4)]>>>this.count%4*8&255,this.count+=1,this.count===this.blockSize&&(i.p1600(this.state),this.count=0);return t},a.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing},e.exports=a},75135:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(50046);function i(e,t,n){try{Reflect.apply(e,t,n)}catch(e){setTimeout((()=>{throw e}))}}class a extends r.EventEmitter{emit(e,...t){let n="error"===e;const r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const n=new Error("Unhandled error."+(e?` (${e.message})`:""));throw n.context=e,n}const a=r[e];if(void 0===a)return!1;if("function"==typeof a)i(a,this,t);else{const e=a.length,n=function(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}(a);for(let r=0;r<e;r+=1)i(n[r],this,t)}return!0}}t.default=a},12267:(e,t,n)=>{"use strict";const r=t;r.bignum=n(82823),r.define=n(70424).define,r.base=n(81284),r.constants=n(34962),r.decoders=n(98720),r.encoders=n(87912)},70424:(e,t,n)=>{"use strict";const r=n(87912),i=n(98720),a=n(35615);function s(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new s(e,t)},s.prototype._createNamed=function(e){const t=this.name;function n(e){this._initNamed(e,t)}return a(n,e),n.prototype._initNamed=function(t,n){e.call(this,t,n)},new n(this)},s.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(i[e])),this.decoders[e]},s.prototype.decode=function(e,t,n){return this._getDecoder(t).decode(e,n)},s.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(r[e])),this.encoders[e]},s.prototype.encode=function(e,t,n){return this._getEncoder(t).encode(e,n)}},9428:(e,t,n)=>{"use strict";const r=n(35615),i=n(49963).a,a=n(19845).Buffer;function s(e,t){i.call(this,t),a.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function o(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return o.isEncoderBuffer(e)||(e=new o(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=a.byteLength(e);else{if(!a.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}r(s,i),t.t=s,s.isDecoderBuffer=function(e){if(e instanceof s)return!0;return"object"==typeof e&&a.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},s.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},s.prototype.restore=function(e){const t=new s(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,i.prototype.restore.call(this,e.reporter),t},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},s.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const n=new s(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+e,this.offset+=e,n},s.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.d=o,o.isEncoderBuffer=function(e){if(e instanceof o)return!0;return"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},o.prototype.join=function(e,t){return e||(e=a.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(n){n.join(e,t),t+=n.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):a.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},81284:(e,t,n)=>{"use strict";const r=t;r.Reporter=n(49963).a,r.DecoderBuffer=n(9428).t,r.EncoderBuffer=n(9428).d,r.Node=n(67410)},67410:(e,t,n)=>{"use strict";const r=n(49963).a,i=n(9428).d,a=n(9428).t,s=n(7784),o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o);function l(e,t,n){const r={};this._baseState=r,r.name=n,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}e.exports=l;const u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){const e=this._baseState,t={};u.forEach((function(n){t[n]=e[n]}));const n=new this.constructor(t.parent);return n._baseState=t,n},l.prototype._wrap=function(){const e=this._baseState;c.forEach((function(t){this[t]=function(){const n=new this.constructor(this);return e.children.push(n),n[t].apply(n,arguments)}}),this)},l.prototype._init=function(e){const t=this._baseState;s(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),s.equal(t.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(e){const t=this._baseState,n=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==n.length&&(s(null===t.children),t.children=n,n.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(s(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(n){n==(0|n)&&(n|=0);const r=e[n];t[r]=n})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){l.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),o.forEach((function(e){l.prototype[e]=function(){const t=this._baseState,n=Array.prototype.slice.call(arguments);return s(null===t.tag),t.tag=e,this._useArgs(n),this}})),l.prototype.use=function(e){s(e);const t=this._baseState;return s(null===t.use),t.use=e,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(e){const t=this._baseState;return s(null===t.default),t.default=e,t.optional=!0,this},l.prototype.explicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.explicit=e,this},l.prototype.implicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.implicit=e,this},l.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},l.prototype.key=function(e){const t=this._baseState;return s(null===t.key),t.key=e,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(e){const t=this._baseState;return s(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},l.prototype.contains=function(e){const t=this._baseState;return s(null===t.use),t.contains=e,this},l.prototype._decode=function(e,t){const n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));let r,i=n.default,s=!0,o=null;if(null!==n.key&&(o=e.enterKey(n.key)),n.optional){let r=null;if(null!==n.explicit?r=n.explicit:null!==n.implicit?r=n.implicit:null!==n.tag&&(r=n.tag),null!==r||n.any){if(s=this._peekTag(e,r,n.any),e.isError(s))return s}else{const r=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),s=!0}catch(e){s=!1}e.restore(r)}}if(n.obj&&s&&(r=e.enterObject()),s){if(null!==n.explicit){const t=this._decodeTag(e,n.explicit);if(e.isError(t))return t;e=t}const r=e.offset;if(null===n.use&&null===n.choice){let t;n.any&&(t=e.save());const r=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(r))return r;n.any?i=e.raw(t):e=r}if(t&&t.track&&null!==n.tag&&t.track(e.path(),r,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),n.any||(i=null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t)),e.isError(i))return i;if(n.any||null!==n.choice||null===n.children||n.children.forEach((function(n){n._decode(e,t)})),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){const r=new a(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(r,t)}}return n.obj&&s&&(i=e.leaveObject(r)),null===n.key||null===i&&!0!==s?null!==o&&e.exitKey(o):e.leaveKey(o,n.key,i),i},l.prototype._decodeGeneric=function(e,t,n){const r=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,r.args[0],n):/str$/.test(e)?this._decodeStr(t,e,n):"objid"===e&&r.args?this._decodeObjid(t,r.args[0],r.args[1],n):"objid"===e?this._decodeObjid(t,null,null,n):"gentime"===e||"utctime"===e?this._decodeTime(t,e,n):"null_"===e?this._decodeNull(t,n):"bool"===e?this._decodeBool(t,n):"objDesc"===e?this._decodeStr(t,e,n):"int"===e||"enum"===e?this._decodeInt(t,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,t._reporterState.obj)._decode(t,n):t.error("unknown tag: "+e)},l.prototype._getUse=function(e,t){const n=this._baseState;return n.useDecoder=this._use(e,t),s(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},l.prototype._decodeChoice=function(e,t){const n=this._baseState;let r=null,i=!1;return Object.keys(n.choice).some((function(a){const s=e.save(),o=n.choice[a];try{const n=o._decode(e,t);if(e.isError(n))return!1;r={type:a,value:n},i=!0}catch(t){return e.restore(s),!1}return!0}),this),i?r:e.error("Choice not matched")},l.prototype._createEncoderBuffer=function(e){return new i(e,this.reporter)},l.prototype._encode=function(e,t,n){const r=this._baseState;if(null!==r.default&&r.default===e)return;const i=this._encodeValue(e,t,n);return void 0===i||this._skipDefault(i,t,n)?void 0:i},l.prototype._encodeValue=function(e,t,n){const i=this._baseState;if(null===i.parent)return i.children[0]._encode(e,t||new r);let a=null;if(this.reporter=t,i.optional&&void 0===e){if(null===i.default)return;e=i.default}let s=null,o=!1;if(i.any)a=this._createEncoderBuffer(e);else if(i.choice)a=this._encodeChoice(e,t);else if(i.contains)s=this._getUse(i.contains,n)._encode(e,t),o=!0;else if(i.children)s=i.children.map((function(n){if("null_"===n._baseState.tag)return n._encode(null,t,e);if(null===n._baseState.key)return t.error("Child should have a key");const r=t.enterKey(n._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const i=n._encode(e[n._baseState.key],t,e);return t.leaveKey(r),i}),this).filter((function(e){return e})),s=this._createEncoderBuffer(s);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return t.error("Too many args for : "+i.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const n=this.clone();n._baseState.implicit=null,s=this._createEncoderBuffer(e.map((function(n){const r=this._baseState;return this._getUse(r.args[0],e)._encode(n,t)}),n))}else null!==i.use?a=this._getUse(i.use,n)._encode(e,t):(s=this._encodePrimitive(i.tag,e),o=!0);if(!i.any&&null===i.choice){const e=null!==i.implicit?i.implicit:i.tag,n=null===i.implicit?"universal":"context";null===e?null===i.use&&t.error("Tag could be omitted only for .use()"):null===i.use&&(a=this._encodeComposite(e,o,n,s))}return null!==i.explicit&&(a=this._encodeComposite(i.explicit,!1,"context",a)),a},l.prototype._encodeChoice=function(e,t){const n=this._baseState,r=n.choice[e.type];return r||s(!1,e.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(e.value,t)},l.prototype._encodePrimitive=function(e,t){const n=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&n.args)return this._encodeObjid(t,n.reverseArgs[0],n.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,n.args&&n.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},l.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},l.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},49963:(e,t,n)=>{"use strict";const r=n(35615);function i(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function a(e,t){this.path=e,this.rethrow(t)}t.a=i,i.prototype.isError=function(e){return e instanceof a},i.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},i.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},i.prototype.enterKey=function(e){return this._reporterState.path.push(e)},i.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},i.prototype.leaveKey=function(e,t,n){const r=this._reporterState;this.exitKey(e),null!==r.obj&&(r.obj[t]=n)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},i.prototype.leaveObject=function(e){const t=this._reporterState,n=t.obj;return t.obj=e,n},i.prototype.error=function(e){let t;const n=this._reporterState,r=e instanceof a;if(t=r?e:new a(n.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!n.options.partial)throw t;return r||n.errors.push(t),t},i.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},r(a,Error),a.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},76457:(e,t)=>{"use strict";function n(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const r=e[n];t[r]=n})),t}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=n(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=n(t.tag)},34962:(e,t,n)=>{"use strict";const r=t;r._reverse=function(e){const t={};return Object.keys(e).forEach((function(n){(0|n)==n&&(n|=0);const r=e[n];t[r]=n})),t},r.der=n(76457)},23975:(e,t,n)=>{"use strict";const r=n(35615),i=n(82823),a=n(9428).t,s=n(67410),o=n(76457);function c(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){s.call(this,"der",e)}function u(e,t){let n=e.readUInt8(t);if(e.isError(n))return n;const r=o.tagClass[n>>6],i=0==(32&n);if(31==(31&n)){let r=n;for(n=0;128==(128&r);){if(r=e.readUInt8(t),e.isError(r))return r;n<<=7,n|=127&r}}else n&=31;return{cls:r,primitive:i,tag:n,tagStr:o.tag[n]}}function d(e,t,n){let r=e.readUInt8(n);if(e.isError(r))return r;if(!t&&128===r)return null;if(0==(128&r))return r;const i=127&r;if(i>4)return e.error("length octect is too long");r=0;for(let t=0;t<i;t++){r<<=8;const t=e.readUInt8(n);if(e.isError(t))return t;r|=t}return r}e.exports=c,c.prototype.decode=function(e,t){return a.isDecoderBuffer(e)||(e=new a(e,t)),this.tree._decode(e,t)},r(l,s),l.prototype._peekTag=function(e,t,n){if(e.isEmpty())return!1;const r=e.save(),i=u(e,'Failed to peek tag: "'+t+'"');return e.isError(i)?i:(e.restore(r),i.tag===t||i.tagStr===t||i.tagStr+"of"===t||n)},l.prototype._decodeTag=function(e,t,n){const r=u(e,'Failed to decode tag of "'+t+'"');if(e.isError(r))return r;let i=d(e,r.primitive,'Failed to get length of "'+t+'"');if(e.isError(i))return i;if(!n&&r.tag!==t&&r.tagStr!==t&&r.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(r.primitive||null!==i)return e.skip(i,'Failed to match body of: "'+t+'"');const a=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(i=e.offset-a.offset,e.restore(a),e.skip(i,'Failed to match body of: "'+t+'"'))},l.prototype._skipUntilEnd=function(e,t){for(;;){const n=u(e,t);if(e.isError(n))return n;const r=d(e,n.primitive,t);if(e.isError(r))return r;let i;if(i=n.primitive||null!==r?e.skip(r):this._skipUntilEnd(e,t),e.isError(i))return i;if("end"===n.tagStr)break}},l.prototype._decodeList=function(e,t,n,r){const i=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const a=n.decode(e,"der",r);if(e.isError(a)&&t)break;i.push(a)}return i},l.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let n="";for(let e=0;e<t.length/2;e++)n+=String.fromCharCode(t.readUInt16BE(2*e));return n}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},l.prototype._decodeObjid=function(e,t,n){let r;const i=[];let a=0,s=0;for(;!e.isEmpty();)s=e.readUInt8(),a<<=7,a|=127&s,0==(128&s)&&(i.push(a),a=0);128&s&&i.push(a);const o=i[0]/40|0,c=i[0]%40;if(r=n?i:[o,c].concat(i.slice(1)),t){let e=t[r.join(" ")];void 0===e&&(e=t[r.join(".")]),void 0!==e&&(r=e)}return r},l.prototype._decodeTime=function(e,t){const n=e.raw().toString();let r,i,a,s,o,c;if("gentime"===t)r=0|n.slice(0,4),i=0|n.slice(4,6),a=0|n.slice(6,8),s=0|n.slice(8,10),o=0|n.slice(10,12),c=0|n.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");r=0|n.slice(0,2),i=0|n.slice(2,4),a=0|n.slice(4,6),s=0|n.slice(6,8),o=0|n.slice(8,10),c=0|n.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,i-1,a,s,o,c,0)},l.prototype._decodeNull=function(){return null},l.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},l.prototype._decodeInt=function(e,t){const n=e.raw();let r=new i(n);return t&&(r=t[r.toString(10)]||r),r},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},98720:(e,t,n)=>{"use strict";const r=t;r.der=n(23975),r.pem=n(13850)},13850:(e,t,n)=>{"use strict";const r=n(35615),i=n(19845).Buffer,a=n(23975);function s(e){a.call(this,e),this.enc="pem"}r(s,a),e.exports=s,s.prototype.decode=function(e,t){const n=e.toString().split(/[\r\n]+/g),r=t.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let o=-1,c=-1;for(let e=0;e<n.length;e++){const t=n[e].match(s);if(null!==t&&t[2]===r){if(-1!==o){if("END"!==t[1])break;c=e;break}if("BEGIN"!==t[1])break;o=e}}if(-1===o||-1===c)throw new Error("PEM section not found for: "+r);const l=n.slice(o+1,c).join("");l.replace(/[^a-z0-9+/=]+/gi,"");const u=i.from(l,"base64");return a.prototype.decode.call(this,u,t)}},35775:(e,t,n)=>{"use strict";const r=n(35615),i=n(19845).Buffer,a=n(67410),s=n(76457);function o(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){a.call(this,"der",e)}function l(e){return e<10?"0"+e:e}e.exports=o,o.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},r(c,a),c.prototype._encodeComposite=function(e,t,n,r){const a=function(e,t,n,r){let i;"seqof"===e?e="seq":"setof"===e&&(e="set");if(s.tagByName.hasOwnProperty(e))i=s.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return r.error("Unknown tag: "+e);i=e}if(i>=31)return r.error("Multi-octet tag encoding unsupported");t||(i|=32);return i|=s.tagClassByName[n||"universal"]<<6,i}(e,t,n,this.reporter);if(r.length<128){const e=i.alloc(2);return e[0]=a,e[1]=r.length,this._createEncoderBuffer([e,r])}let o=1;for(let e=r.length;e>=256;e>>=8)o++;const c=i.alloc(2+o);c[0]=a,c[1]=128|o;for(let e=1+o,t=r.length;t>0;e--,t>>=8)c[e]=255&t;return this._createEncoderBuffer([c,r])},c.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=i.alloc(2*e.length);for(let n=0;n<e.length;n++)t.writeUInt16BE(e.charCodeAt(n),2*n);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},c.prototype._encodeObjid=function(e,t,n){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let r=0;for(let t=0;t<e.length;t++){let n=e[t];for(r++;n>=128;n>>=7)r++}const a=i.alloc(r);let s=a.length-1;for(let t=e.length-1;t>=0;t--){let n=e[t];for(a[s--]=127&n;(n>>=7)>0;)a[s--]=128|127&n}return this._createEncoderBuffer(a)},c.prototype._encodeTime=function(e,t){let n;const r=new Date(e);return"gentime"===t?n=[l(r.getUTCFullYear()),l(r.getUTCMonth()+1),l(r.getUTCDate()),l(r.getUTCHours()),l(r.getUTCMinutes()),l(r.getUTCSeconds()),"Z"].join(""):"utctime"===t?n=[l(r.getUTCFullYear()%100),l(r.getUTCMonth()+1),l(r.getUTCDate()),l(r.getUTCHours()),l(r.getUTCMinutes()),l(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(n,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!i.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=i.from(t)}if(i.isBuffer(e)){let t=e.length;0===e.length&&t++;const n=i.alloc(t);return e.copy(n),0===e.length&&(n[0]=0),this._createEncoderBuffer(n)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let n=1;for(let t=e;t>=256;t>>=8)n++;const r=new Array(n);for(let t=r.length-1;t>=0;t--)r[t]=255&e,e>>=8;return 128&r[0]&&r.unshift(0),this._createEncoderBuffer(i.from(r))},c.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},c.prototype._skipDefault=function(e,t,n){const r=this._baseState;let i;if(null===r.default)return!1;const a=e.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,t,n).join()),a.length!==r.defaultBuffer.length)return!1;for(i=0;i<a.length;i++)if(a[i]!==r.defaultBuffer[i])return!1;return!0}},87912:(e,t,n)=>{"use strict";const r=t;r.der=n(35775),r.pem=n(48962)},48962:(e,t,n)=>{"use strict";const r=n(35615),i=n(35775);function a(e){i.call(this,e),this.enc="pem"}r(a,i),e.exports=a,a.prototype.encode=function(e,t){const n=i.prototype.encode.call(this,e).toString("base64"),r=["-----BEGIN "+t.label+"-----"];for(let e=0;e<n.length;e+=64)r.push(n.slice(e,e+64));return r.push("-----END "+t.label+"-----"),r.join("\n")}},26537:(module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>Snackbar});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14041),react_dom_client__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25873),_assets_gear_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(19219),_assets_logo_footer_svg__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(20125),_Snackbar_css__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(47380),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(31085),enterModule;function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw i}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}module=__webpack_require__.hmd(module),enterModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0,enterModule&&enterModule(module);var __signature__="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},Snackbar=function(){function Snackbar(e){_classCallCheck(this,Snackbar),this.darkMode=void 0,this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=e.darkMode}return _createClass(Snackbar,[{key:"attach",value:function(e){this.root=(0,react_dom_client__WEBPACK_IMPORTED_MODULE_1__.H)(e),this.render()}},{key:"presentItem",value:function(e){var t=this,n=this.nextItemKey++;return this.items.set(n,e),this.render(),function(){t.items.delete(n),t.render()}}},{key:"clear",value:function(){this.items.clear(),this.render()}},{key:"render",value:function(){this.root&&this.root.render((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(SnackbarContainer,{darkMode:this.darkMode,children:Array.from(this.items.entries()).map((function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(SnackbarInstance,_objectSpread(_objectSpread({},r),{},{key:n}))}))}))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}])}(),reactHotLoader,leaveModule;function SnackbarContainer(e){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"snackbar-container",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("style",{children:_Snackbar_css__WEBPACK_IMPORTED_MODULE_5__.A}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"snackbar",children:e.children})]})}function SnackbarInstance(e){var t=e.autoExpand,n=e.message,r=e.menuItems,i=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),2),a=i[0],s=i[1],o=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null!=t&&t),2),c=o[0],l=o[1];(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var e=[window.setTimeout((function(){s(!1)}),1),window.setTimeout((function(){l(!0)}),1e4)];return function(){e.forEach(window.clearTimeout)}}),[]);var u=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){l(!c)}),[c]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"snackbar-instance ".concat(a&&"snackbar-instance-hidden"," ").concat(c&&"snackbar-instance-expanded"),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"snackbar-instance-header",onClick:u,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("img",{src:_assets_logo_footer_svg__WEBPACK_IMPORTED_MODULE_3__,className:"snackbar-instance-header-cblogo",alt:"wallet logo"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"snackbar-instance-header-message",children:n}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"-gear-container",children:[!c&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("img",{src:_assets_gear_svg__WEBPACK_IMPORTED_MODULE_2__,className:"-gear-icon",title:"Expand",alt:"expand"})]})]}),r&&r.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("div",{className:"snackbar-instance-menu",children:r.map((function(e,t){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)("div",{className:"snackbar-instance-menu-item ".concat(e.isRed&&"snackbar-instance-menu-item-is-red"),onClick:e.onClick,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("svg",{width:e.svgWidth,height:e.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("path",{fillRule:e.defaultFillRule,clipRule:e.defaultClipRule,d:e.path,fill:"#AAAAAA"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)("span",{className:"snackbar-instance-menu-item-info ".concat(e.isRed&&"snackbar-instance-menu-item-info-is-red"),children:e.info})]},t)}))})]})}__signature__(SnackbarInstance,"useState{[hidden, setHidden](true)}\nuseState{[expanded, setExpanded](autoExpand ?? false)}\nuseEffect{}\nuseCallback{toggleExpanded}"),reactHotLoader="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0,reactHotLoader&&(reactHotLoader.register(Snackbar,"Snackbar","/workspaces/apps/extension/src/external-libs/Snackbar/Snackbar.tsx"),reactHotLoader.register(SnackbarContainer,"SnackbarContainer","/workspaces/apps/extension/src/external-libs/Snackbar/Snackbar.tsx"),reactHotLoader.register(SnackbarInstance,"SnackbarInstance","/workspaces/apps/extension/src/external-libs/Snackbar/Snackbar.tsx")),leaveModule="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0,leaveModule&&leaveModule(module)},59092:(e,t,n)=>{"use strict";var r,i=n(34767),a=n(55452);e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var s,o;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function c(e){var t=e.successes,n=e.fails,r=e.criticalFails;t>0&&(0,a.N8)({metricName:"exchange_rate_fetch_success",metricType:i.vj.count,value:t}),n>0&&(0,a.N8)({metricName:"exchange_rate_fetch_fail",metricType:i.vj.count,value:n}),r.forEach((function(e,t){(0,a.N8)({metricName:"critical_exchange_rate_fail",metricType:i.vj.count,value:e,tags:{asset:t}})}))}(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&s.register(c,"logRateResults","/workspaces/libs/analytics/data/Portfolio.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},84213:(e,t,n)=>{"use strict";var r,i=n(34767),a=n(55452);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e=n.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var u,d,h="task.receive_transaction.tx_received";function p(e){(0,a.Np)("confirm_transaction.gas_price_failure",c({loggingId:"26ee3024-b786-48e0-9554-f8458664821a"},e))}function f(e){(0,a.Np)("confirm_transaction.fee_wallet_balance_mismatch",c({},e))}function m(e){var t,n;(0,a.Np)("confirm_transaction.gas_price_success",{loggingId:"5735417b-822e-43ee-8747-5bebb2c4d5ef",chainId:null!==(t=e.chainId)&&void 0!==t?t:"",blockchain:e.blockchain,chainName:null!==(n=e.chainName)&&void 0!==n?n:""})}function y(){(0,a.Np)("eth_tx_accepted_but_reverted",{loggingId:"740f6ed8-0a25-4ce5-ab5f-c14815a3faa6"})}function g(){(0,a.Np)("solana_tx_accepted_but_reverted",{loggingId:"b15cba39-3793-42cf-b8d6-93f30842234e"})}function b(){(0,a.Np)("xrp_tx_accepted_but_reverted",{loggingId:"fb487e99-20cb-4b63-87f4-7cfb9e6c4de3"})}function v(){(0,a.Np)("xlm_tx_accepted_but_reverted",{loggingId:"f05b98be-6b99-4967-9644-e1804730ffb0"})}function w(e){(0,a.Np)("task.resubmit_transaction.fail",{loggingId:"3450e9d1-0cc4-445d-a3b0-9afb2063aa4b",networkRawValue:e})}function E(e){var t=e.data,n=e.errorMessage;(0,a.Np)("nudge.invalid_data",{loggingId:"542ab748-a8a2-4b05-b9f0-7d9b64e60eea",data:t,errorMessage:n})}function _(e){(0,a.Np)("nudge.connection_error",{loggingId:"53e4f5df-968b-4284-bdcf-dc679c58119a",event:JSON.stringify(e)})}function S(){(0,a.Np)("nudge.connection_opened",{loggingId:"ce58aee7-cd4b-4c30-a004-d4e342d9ac4a"})}function T(e){var t=e.txSource,n=e.blockchain,r=e.chainId,i=e.chainName,s=e.txHash,o=e.isContractDeploy,c=e.isFirstPartyRPC,l=e.isSponsoredTx,u=e.isGaslessSwap;(0,a.Np)("tx_dropped",{loggingId:"eab43568-c7da-4527-9ccd-d6695088d93c",txSource:t,blockchain:n,chainId:r,chainName:i,txHash:s,isContractDeploy:o,isFirstPartyRPC:c,isSponsoredTx:l,isGaslessSwap:u})}function A(e){var t=e.txSource,n=e.blockchain,r=e.chainId,i=e.chainName,s=e.txHash,o=e.isContractDeploy,c=e.isFirstPartyRPC,l=e.isSponsoredTx,u=e.isGaslessSwap;(0,a.Np)("tx_failed",{loggingId:"a75f8247-37fa-4414-92b7-7f4bc0f84cbd",txSource:t,blockchain:n,chainId:r,chainName:i,txHash:s,isContractDeploy:o,isFirstPartyRPC:c,isSponsoredTx:l,isGaslessSwap:u})}function N(e){var t,n;(0,a.Np)("tx_confirmed",c(c({},e),{},{chainId:null!==(t=e.chainId)&&void 0!==t?t:-1,chainName:null!==(n=e.chainName)&&void 0!==n?n:""}))}function C(e){var t,n;(0,a.Np)(h,c(c({},e),{},{chainId:null!==(t=e.chainId)&&void 0!==t?t:-1,chainName:null!==(n=e.chainName)&&void 0!==n?n:""}))}function M(e){(0,a.Np)("tx_dropped_by_relayer",c({},e))}function R(e){var t=e.blockchain,n=e.chainId,r=e.chainName,i=e.currencyCode,s=e.contractAddress,o=e.networkName;(0,a.Np)("potential_exchange_rate_issue",{loggingId:"7c067630-bb8c-11ec-8422-0242ac120002",blockchain:t,currencyCode:i,contractAddress:null!=s?s:"",networkName:o,chainName:null!=r?r:"",chainId:null!=n?n:""})}function x(e){return(0,a.N8)({metricName:"transactions.sync.start",metricType:i.vj.count,value:1,tags:c({},e)})}function k(e){return(0,a.N8)({metricName:"transactions.sync.success",metricType:i.vj.count,value:1,tags:c({},e)})}function I(e){return(0,a.N8)({metricName:"transactions.sync.fail",metricType:i.vj.count,value:1,tags:c({},e)})}function O(){return(0,a.N8)({metricName:"transactions.had_malicious_zero_value_transfer",metricType:i.vj.count,value:1})}(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register("task.tx_generation.start","txGenerationStart","/workspaces/libs/analytics/data/Transactions.tsx"),u.register("task.tx_generation.success","txGenerationSuccess","/workspaces/libs/analytics/data/Transactions.tsx"),u.register("task.tx_generation.fail","txGenerationFail","/workspaces/libs/analytics/data/Transactions.tsx"),u.register("task.confirm_transaction.tx_submitted.start","txSubmittedStart","/workspaces/libs/analytics/data/Transactions.tsx"),u.register("task.confirm_transaction.tx_submitted.success","txSubmittedSuccess","/workspaces/libs/analytics/data/Transactions.tsx"),u.register("task.confirm_transaction.tx_submitted.fail","txSubmittedFail","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(h,"txReceived","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(p,"logConfirmTransactionGasPriceFailure","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(f,"logConfirmTransactionFeeWalletBalanceMismatch","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(m,"logConfirmTransactionGasPriceSuccess","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(y,"logEthTransactionAcceptedButReverted","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(g,"logSolanaTxAcceptedButReverted","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(b,"logXrpTransactionAcceptedButReverted","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(v,"logXlmTransactionAcceptedButReverted","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(w,"logResubmitTransactionFail","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(E,"logNudgeInvalidData","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(_,"logNudgeConnectionError","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(S,"logNudgeConnectionOpened","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(T,"logTxDropped","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(A,"logTxFailed","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(N,"logTxConfirmed","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(C,"logTxRecieved","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(M,"logTxDroppedByRelayer","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(R,"logPotentialExchangeRateIssue","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(x,"triggerSyncTransactionsStart","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(k,"triggerSyncTransactionsSuccess","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(I,"triggerSyncTransactionsFail","/workspaces/libs/analytics/data/Transactions.tsx"),u.register(O,"triggerHadMaliciousZeroValueTransfer","/workspaces/libs/analytics/data/Transactions.tsx")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},47403:(e,t,n)=>{"use strict";var r=n(25636).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var a=e.charAt(i),s=a.charCodeAt(0);if(255!==t[s])throw new TypeError(a+" is ambiguous");t[s]=i}var o=e.length,c=e.charAt(0),l=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return r.alloc(0);for(var n=0,i=0,a=0;e[n]===c;)i++,n++;for(var s=(e.length-n)*l+1>>>0,u=new Uint8Array(s);e[n];){var d=t[e.charCodeAt(n)];if(255===d)return;for(var h=0,p=s-1;(0!==d||h<a)&&-1!==p;p--,h++)d+=o*u[p]>>>0,u[p]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");a=h,n++}for(var f=s-a;f!==s&&0===u[f];)f++;var m=r.allocUnsafe(i+(s-f));m.fill(0,0,i);for(var y=i;f!==s;)m[y++]=u[f++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var n=0,i=0,a=0,s=t.length;a!==s&&0===t[a];)a++,n++;for(var l=(s-a)*u+1>>>0,d=new Uint8Array(l);a!==s;){for(var h=t[a],p=0,f=l-1;(0!==h||p<i)&&-1!==f;f--,p++)h+=256*d[f]>>>0,d[f]=h%o>>>0,h=h/o>>>0;if(0!==h)throw new Error("Non-zero carry");i=p,a++}for(var m=l-i;m!==l&&0===d[m];)m++;for(var y=c.repeat(n);m<l;++m)y+=e.charAt(d[m]);return y},decodeUnsafe:d,decode:function(e){var t=d(e);if(t)return t;throw new Error("Non-base"+o+" character")}}}},7991:(e,t)=>{"use strict";t.byteLength=function(e){var t=o(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,a=o(e),s=a[0],c=a[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,c)),u=0,d=c>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t);1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,a=[],s=16383,o=0,l=r-i;o<l;o+=s)a.push(c(e,o,o+s>l?l:o+s));1===i?(t=e[r-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return a.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=a[s],r[a.charCodeAt(s)]=s;function o(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var i,a,s=[],o=t;o<r;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(n[(a=i)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},82823:function(e,t,n){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function a(e,t,n){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var s;"object"==typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{s="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:n(8379).Buffer}catch(e){}function o(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function c(e,t,n){var r=o(e,n);return n-1>=t&&(r|=o(e,n-1)<<4),r}function l(e,t,n,i){for(var a=0,s=0,o=Math.min(e.length,n),c=t;c<o;c++){var l=e.charCodeAt(c)-48;a*=i,s=l>=49?l-49+10:l>=17?l-17+10:l,r(l>=0&&s<i,"Invalid character"),a+=s}return a}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(a.isBN=function(e){return e instanceof a||null!==e&&"object"==typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},a.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},a.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,s,o=0;if("be"===n)for(i=e.length-1,a=0;i>=0;i-=3)s=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===n)for(i=0,a=0;i<e.length;i+=3)s=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this._strip()},a.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,a=0,s=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=c(e,t,r)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;else for(r=(e.length-t)%2==0?t+1:t;r<e.length;r+=2)i=c(e,t,r)<<a,this.words[s]|=67108863&i,a>=18?(a-=18,s+=1,this.words[s]|=i>>>26):a+=8;this._strip()},a.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var a=e.length-n,s=a%r,o=Math.min(a,a-s)+n,c=0,u=n;u<o;u+=r)c=l(e,u,u+r,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==s){var d=1;for(c=l(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype._move=function(e){u(e,this)},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{a.prototype[Symbol.for("nodejs.util.inspect.custom")]=d}catch(e){a.prototype.inspect=d}else a.prototype.inspect=d;function d(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,a=0,s=0;s<this.length;s++){var o=this.words[s],c=(16777215&(o<<i|a)).toString(16);a=o>>>24-i&16777215,(i+=2)>=26&&(i-=26,s--),n=0!==a||s!==this.length-1?h[6-c.length]+c+n:c+n}for(0!==a&&(n=a.toString(16)+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var l=p[e],u=f[e];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modrn(u).toString(e);n=(d=d.idivn(u)).isZero()?m+n:h[l-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16,2)},s&&(a.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function m(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],a=0|t.words[0],s=i*a,o=67108863&s,c=s/67108864|0;n.words[0]=o;for(var l=1;l<r;l++){for(var u=c>>>26,d=67108863&c,h=Math.min(l,t.length-1),p=Math.max(0,l-e.length+1);p<=h;p++){var f=l-p|0;u+=(s=(i=0|e.words[f])*(a=0|t.words[p])+d)/67108864|0,d=67108863&s}n.words[l]=0|d,c=0|u}return 0!==c?n.words[l]=0|c:n.length--,n._strip()}a.prototype.toArrayLike=function(e,t,n){this._strip();var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,a);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,i),s},a.prototype._toArrayLikeLE=function(e,t){for(var n=0,r=0,i=0,a=0;i<this.length;i++){var s=this.words[i]<<a|r;e[n++]=255&s,n<e.length&&(e[n++]=s>>8&255),n<e.length&&(e[n++]=s>>16&255),6===a?(n<e.length&&(e[n++]=s>>24&255),r=0,a=0):(r=s>>>24,a+=2)}if(n<e.length)for(e[n++]=r;n<e.length;)e[n++]=0},a.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,r=0,i=0,a=0;i<this.length;i++){var s=this.words[i]<<a|r;e[n--]=255&s,n>=0&&(e[n--]=s>>8&255),n>=0&&(e[n--]=s>>16&255),6===a?(n>=0&&(e[n--]=s>>24&255),r=0,a=0):(r=s>>>24,a+=2)}if(n>=0)for(e[n--]=r;n>=0;)e[n--]=0},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0==(8191&t)&&(n+=13,t>>>=13),0==(127&t)&&(n+=7,t>>>=7),0==(15&t)&&(n+=4,t>>>=4),0==(3&t)&&(n+=2,t>>>=2),0==(1&t)&&n++,n},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},a.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},a.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this._strip()},a.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},a.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,a=0;a<r.length;a++)t=(0|n.words[a])+(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<n.length;a++)t=(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var a=0,s=0;s<r.length;s++)a=(t=(0|n.words[s])-(0|r.words[s])+a)>>26,this.words[s]=67108863&t;for(;0!==a&&s<n.length;s++)a=(t=(0|n.words[s])+a)>>26,this.words[s]=67108863&t;if(0===a&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var y=function(e,t,n){var r,i,a,s=e.words,o=t.words,c=n.words,l=0,u=0|s[0],d=8191&u,h=u>>>13,p=0|s[1],f=8191&p,m=p>>>13,y=0|s[2],g=8191&y,b=y>>>13,v=0|s[3],w=8191&v,E=v>>>13,_=0|s[4],S=8191&_,T=_>>>13,A=0|s[5],N=8191&A,C=A>>>13,M=0|s[6],R=8191&M,x=M>>>13,k=0|s[7],I=8191&k,O=k>>>13,P=0|s[8],L=8191&P,D=P>>>13,B=0|s[9],j=8191&B,q=B>>>13,$=0|o[0],U=8191&$,F=$>>>13,V=0|o[1],H=8191&V,z=V>>>13,W=0|o[2],K=8191&W,G=W>>>13,Q=0|o[3],J=8191&Q,Y=Q>>>13,X=0|o[4],Z=8191&X,ee=X>>>13,te=0|o[5],ne=8191&te,re=te>>>13,ie=0|o[6],ae=8191&ie,se=ie>>>13,oe=0|o[7],ce=8191&oe,le=oe>>>13,ue=0|o[8],de=8191&ue,he=ue>>>13,pe=0|o[9],fe=8191&pe,me=pe>>>13;n.negative=e.negative^t.negative,n.length=19;var ye=(l+(r=Math.imul(d,U))|0)+((8191&(i=(i=Math.imul(d,F))+Math.imul(h,U)|0))<<13)|0;l=((a=Math.imul(h,F))+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(f,U),i=(i=Math.imul(f,F))+Math.imul(m,U)|0,a=Math.imul(m,F);var ge=(l+(r=r+Math.imul(d,H)|0)|0)+((8191&(i=(i=i+Math.imul(d,z)|0)+Math.imul(h,H)|0))<<13)|0;l=((a=a+Math.imul(h,z)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,U),i=(i=Math.imul(g,F))+Math.imul(b,U)|0,a=Math.imul(b,F),r=r+Math.imul(f,H)|0,i=(i=i+Math.imul(f,z)|0)+Math.imul(m,H)|0,a=a+Math.imul(m,z)|0;var be=(l+(r=r+Math.imul(d,K)|0)|0)+((8191&(i=(i=i+Math.imul(d,G)|0)+Math.imul(h,K)|0))<<13)|0;l=((a=a+Math.imul(h,G)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(w,U),i=(i=Math.imul(w,F))+Math.imul(E,U)|0,a=Math.imul(E,F),r=r+Math.imul(g,H)|0,i=(i=i+Math.imul(g,z)|0)+Math.imul(b,H)|0,a=a+Math.imul(b,z)|0,r=r+Math.imul(f,K)|0,i=(i=i+Math.imul(f,G)|0)+Math.imul(m,K)|0,a=a+Math.imul(m,G)|0;var ve=(l+(r=r+Math.imul(d,J)|0)|0)+((8191&(i=(i=i+Math.imul(d,Y)|0)+Math.imul(h,J)|0))<<13)|0;l=((a=a+Math.imul(h,Y)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(S,U),i=(i=Math.imul(S,F))+Math.imul(T,U)|0,a=Math.imul(T,F),r=r+Math.imul(w,H)|0,i=(i=i+Math.imul(w,z)|0)+Math.imul(E,H)|0,a=a+Math.imul(E,z)|0,r=r+Math.imul(g,K)|0,i=(i=i+Math.imul(g,G)|0)+Math.imul(b,K)|0,a=a+Math.imul(b,G)|0,r=r+Math.imul(f,J)|0,i=(i=i+Math.imul(f,Y)|0)+Math.imul(m,J)|0,a=a+Math.imul(m,Y)|0;var we=(l+(r=r+Math.imul(d,Z)|0)|0)+((8191&(i=(i=i+Math.imul(d,ee)|0)+Math.imul(h,Z)|0))<<13)|0;l=((a=a+Math.imul(h,ee)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(N,U),i=(i=Math.imul(N,F))+Math.imul(C,U)|0,a=Math.imul(C,F),r=r+Math.imul(S,H)|0,i=(i=i+Math.imul(S,z)|0)+Math.imul(T,H)|0,a=a+Math.imul(T,z)|0,r=r+Math.imul(w,K)|0,i=(i=i+Math.imul(w,G)|0)+Math.imul(E,K)|0,a=a+Math.imul(E,G)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,Y)|0)+Math.imul(b,J)|0,a=a+Math.imul(b,Y)|0,r=r+Math.imul(f,Z)|0,i=(i=i+Math.imul(f,ee)|0)+Math.imul(m,Z)|0,a=a+Math.imul(m,ee)|0;var Ee=(l+(r=r+Math.imul(d,ne)|0)|0)+((8191&(i=(i=i+Math.imul(d,re)|0)+Math.imul(h,ne)|0))<<13)|0;l=((a=a+Math.imul(h,re)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(R,U),i=(i=Math.imul(R,F))+Math.imul(x,U)|0,a=Math.imul(x,F),r=r+Math.imul(N,H)|0,i=(i=i+Math.imul(N,z)|0)+Math.imul(C,H)|0,a=a+Math.imul(C,z)|0,r=r+Math.imul(S,K)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(T,K)|0,a=a+Math.imul(T,G)|0,r=r+Math.imul(w,J)|0,i=(i=i+Math.imul(w,Y)|0)+Math.imul(E,J)|0,a=a+Math.imul(E,Y)|0,r=r+Math.imul(g,Z)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(b,Z)|0,a=a+Math.imul(b,ee)|0,r=r+Math.imul(f,ne)|0,i=(i=i+Math.imul(f,re)|0)+Math.imul(m,ne)|0,a=a+Math.imul(m,re)|0;var _e=(l+(r=r+Math.imul(d,ae)|0)|0)+((8191&(i=(i=i+Math.imul(d,se)|0)+Math.imul(h,ae)|0))<<13)|0;l=((a=a+Math.imul(h,se)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(I,U),i=(i=Math.imul(I,F))+Math.imul(O,U)|0,a=Math.imul(O,F),r=r+Math.imul(R,H)|0,i=(i=i+Math.imul(R,z)|0)+Math.imul(x,H)|0,a=a+Math.imul(x,z)|0,r=r+Math.imul(N,K)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(C,K)|0,a=a+Math.imul(C,G)|0,r=r+Math.imul(S,J)|0,i=(i=i+Math.imul(S,Y)|0)+Math.imul(T,J)|0,a=a+Math.imul(T,Y)|0,r=r+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,ee)|0)+Math.imul(E,Z)|0,a=a+Math.imul(E,ee)|0,r=r+Math.imul(g,ne)|0,i=(i=i+Math.imul(g,re)|0)+Math.imul(b,ne)|0,a=a+Math.imul(b,re)|0,r=r+Math.imul(f,ae)|0,i=(i=i+Math.imul(f,se)|0)+Math.imul(m,ae)|0,a=a+Math.imul(m,se)|0;var Se=(l+(r=r+Math.imul(d,ce)|0)|0)+((8191&(i=(i=i+Math.imul(d,le)|0)+Math.imul(h,ce)|0))<<13)|0;l=((a=a+Math.imul(h,le)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(L,U),i=(i=Math.imul(L,F))+Math.imul(D,U)|0,a=Math.imul(D,F),r=r+Math.imul(I,H)|0,i=(i=i+Math.imul(I,z)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,z)|0,r=r+Math.imul(R,K)|0,i=(i=i+Math.imul(R,G)|0)+Math.imul(x,K)|0,a=a+Math.imul(x,G)|0,r=r+Math.imul(N,J)|0,i=(i=i+Math.imul(N,Y)|0)+Math.imul(C,J)|0,a=a+Math.imul(C,Y)|0,r=r+Math.imul(S,Z)|0,i=(i=i+Math.imul(S,ee)|0)+Math.imul(T,Z)|0,a=a+Math.imul(T,ee)|0,r=r+Math.imul(w,ne)|0,i=(i=i+Math.imul(w,re)|0)+Math.imul(E,ne)|0,a=a+Math.imul(E,re)|0,r=r+Math.imul(g,ae)|0,i=(i=i+Math.imul(g,se)|0)+Math.imul(b,ae)|0,a=a+Math.imul(b,se)|0,r=r+Math.imul(f,ce)|0,i=(i=i+Math.imul(f,le)|0)+Math.imul(m,ce)|0,a=a+Math.imul(m,le)|0;var Te=(l+(r=r+Math.imul(d,de)|0)|0)+((8191&(i=(i=i+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;l=((a=a+Math.imul(h,he)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(j,U),i=(i=Math.imul(j,F))+Math.imul(q,U)|0,a=Math.imul(q,F),r=r+Math.imul(L,H)|0,i=(i=i+Math.imul(L,z)|0)+Math.imul(D,H)|0,a=a+Math.imul(D,z)|0,r=r+Math.imul(I,K)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(O,K)|0,a=a+Math.imul(O,G)|0,r=r+Math.imul(R,J)|0,i=(i=i+Math.imul(R,Y)|0)+Math.imul(x,J)|0,a=a+Math.imul(x,Y)|0,r=r+Math.imul(N,Z)|0,i=(i=i+Math.imul(N,ee)|0)+Math.imul(C,Z)|0,a=a+Math.imul(C,ee)|0,r=r+Math.imul(S,ne)|0,i=(i=i+Math.imul(S,re)|0)+Math.imul(T,ne)|0,a=a+Math.imul(T,re)|0,r=r+Math.imul(w,ae)|0,i=(i=i+Math.imul(w,se)|0)+Math.imul(E,ae)|0,a=a+Math.imul(E,se)|0,r=r+Math.imul(g,ce)|0,i=(i=i+Math.imul(g,le)|0)+Math.imul(b,ce)|0,a=a+Math.imul(b,le)|0,r=r+Math.imul(f,de)|0,i=(i=i+Math.imul(f,he)|0)+Math.imul(m,de)|0,a=a+Math.imul(m,he)|0;var Ae=(l+(r=r+Math.imul(d,fe)|0)|0)+((8191&(i=(i=i+Math.imul(d,me)|0)+Math.imul(h,fe)|0))<<13)|0;l=((a=a+Math.imul(h,me)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(j,H),i=(i=Math.imul(j,z))+Math.imul(q,H)|0,a=Math.imul(q,z),r=r+Math.imul(L,K)|0,i=(i=i+Math.imul(L,G)|0)+Math.imul(D,K)|0,a=a+Math.imul(D,G)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,Y)|0)+Math.imul(O,J)|0,a=a+Math.imul(O,Y)|0,r=r+Math.imul(R,Z)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(x,Z)|0,a=a+Math.imul(x,ee)|0,r=r+Math.imul(N,ne)|0,i=(i=i+Math.imul(N,re)|0)+Math.imul(C,ne)|0,a=a+Math.imul(C,re)|0,r=r+Math.imul(S,ae)|0,i=(i=i+Math.imul(S,se)|0)+Math.imul(T,ae)|0,a=a+Math.imul(T,se)|0,r=r+Math.imul(w,ce)|0,i=(i=i+Math.imul(w,le)|0)+Math.imul(E,ce)|0,a=a+Math.imul(E,le)|0,r=r+Math.imul(g,de)|0,i=(i=i+Math.imul(g,he)|0)+Math.imul(b,de)|0,a=a+Math.imul(b,he)|0;var Ne=(l+(r=r+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;l=((a=a+Math.imul(m,me)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,r=Math.imul(j,K),i=(i=Math.imul(j,G))+Math.imul(q,K)|0,a=Math.imul(q,G),r=r+Math.imul(L,J)|0,i=(i=i+Math.imul(L,Y)|0)+Math.imul(D,J)|0,a=a+Math.imul(D,Y)|0,r=r+Math.imul(I,Z)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(O,Z)|0,a=a+Math.imul(O,ee)|0,r=r+Math.imul(R,ne)|0,i=(i=i+Math.imul(R,re)|0)+Math.imul(x,ne)|0,a=a+Math.imul(x,re)|0,r=r+Math.imul(N,ae)|0,i=(i=i+Math.imul(N,se)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,se)|0,r=r+Math.imul(S,ce)|0,i=(i=i+Math.imul(S,le)|0)+Math.imul(T,ce)|0,a=a+Math.imul(T,le)|0,r=r+Math.imul(w,de)|0,i=(i=i+Math.imul(w,he)|0)+Math.imul(E,de)|0,a=a+Math.imul(E,he)|0;var Ce=(l+(r=r+Math.imul(g,fe)|0)|0)+((8191&(i=(i=i+Math.imul(g,me)|0)+Math.imul(b,fe)|0))<<13)|0;l=((a=a+Math.imul(b,me)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(j,J),i=(i=Math.imul(j,Y))+Math.imul(q,J)|0,a=Math.imul(q,Y),r=r+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,ee)|0)+Math.imul(D,Z)|0,a=a+Math.imul(D,ee)|0,r=r+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,re)|0)+Math.imul(O,ne)|0,a=a+Math.imul(O,re)|0,r=r+Math.imul(R,ae)|0,i=(i=i+Math.imul(R,se)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,se)|0,r=r+Math.imul(N,ce)|0,i=(i=i+Math.imul(N,le)|0)+Math.imul(C,ce)|0,a=a+Math.imul(C,le)|0,r=r+Math.imul(S,de)|0,i=(i=i+Math.imul(S,he)|0)+Math.imul(T,de)|0,a=a+Math.imul(T,he)|0;var Me=(l+(r=r+Math.imul(w,fe)|0)|0)+((8191&(i=(i=i+Math.imul(w,me)|0)+Math.imul(E,fe)|0))<<13)|0;l=((a=a+Math.imul(E,me)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(j,Z),i=(i=Math.imul(j,ee))+Math.imul(q,Z)|0,a=Math.imul(q,ee),r=r+Math.imul(L,ne)|0,i=(i=i+Math.imul(L,re)|0)+Math.imul(D,ne)|0,a=a+Math.imul(D,re)|0,r=r+Math.imul(I,ae)|0,i=(i=i+Math.imul(I,se)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,se)|0,r=r+Math.imul(R,ce)|0,i=(i=i+Math.imul(R,le)|0)+Math.imul(x,ce)|0,a=a+Math.imul(x,le)|0,r=r+Math.imul(N,de)|0,i=(i=i+Math.imul(N,he)|0)+Math.imul(C,de)|0,a=a+Math.imul(C,he)|0;var Re=(l+(r=r+Math.imul(S,fe)|0)|0)+((8191&(i=(i=i+Math.imul(S,me)|0)+Math.imul(T,fe)|0))<<13)|0;l=((a=a+Math.imul(T,me)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863,r=Math.imul(j,ne),i=(i=Math.imul(j,re))+Math.imul(q,ne)|0,a=Math.imul(q,re),r=r+Math.imul(L,ae)|0,i=(i=i+Math.imul(L,se)|0)+Math.imul(D,ae)|0,a=a+Math.imul(D,se)|0,r=r+Math.imul(I,ce)|0,i=(i=i+Math.imul(I,le)|0)+Math.imul(O,ce)|0,a=a+Math.imul(O,le)|0,r=r+Math.imul(R,de)|0,i=(i=i+Math.imul(R,he)|0)+Math.imul(x,de)|0,a=a+Math.imul(x,he)|0;var xe=(l+(r=r+Math.imul(N,fe)|0)|0)+((8191&(i=(i=i+Math.imul(N,me)|0)+Math.imul(C,fe)|0))<<13)|0;l=((a=a+Math.imul(C,me)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(j,ae),i=(i=Math.imul(j,se))+Math.imul(q,ae)|0,a=Math.imul(q,se),r=r+Math.imul(L,ce)|0,i=(i=i+Math.imul(L,le)|0)+Math.imul(D,ce)|0,a=a+Math.imul(D,le)|0,r=r+Math.imul(I,de)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(O,de)|0,a=a+Math.imul(O,he)|0;var ke=(l+(r=r+Math.imul(R,fe)|0)|0)+((8191&(i=(i=i+Math.imul(R,me)|0)+Math.imul(x,fe)|0))<<13)|0;l=((a=a+Math.imul(x,me)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(j,ce),i=(i=Math.imul(j,le))+Math.imul(q,ce)|0,a=Math.imul(q,le),r=r+Math.imul(L,de)|0,i=(i=i+Math.imul(L,he)|0)+Math.imul(D,de)|0,a=a+Math.imul(D,he)|0;var Ie=(l+(r=r+Math.imul(I,fe)|0)|0)+((8191&(i=(i=i+Math.imul(I,me)|0)+Math.imul(O,fe)|0))<<13)|0;l=((a=a+Math.imul(O,me)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(j,de),i=(i=Math.imul(j,he))+Math.imul(q,de)|0,a=Math.imul(q,he);var Oe=(l+(r=r+Math.imul(L,fe)|0)|0)+((8191&(i=(i=i+Math.imul(L,me)|0)+Math.imul(D,fe)|0))<<13)|0;l=((a=a+Math.imul(D,me)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var Pe=(l+(r=Math.imul(j,fe))|0)+((8191&(i=(i=Math.imul(j,me))+Math.imul(q,fe)|0))<<13)|0;return l=((a=Math.imul(q,me))+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,c[0]=ye,c[1]=ge,c[2]=be,c[3]=ve,c[4]=we,c[5]=Ee,c[6]=_e,c[7]=Se,c[8]=Te,c[9]=Ae,c[10]=Ne,c[11]=Ce,c[12]=Me,c[13]=Re,c[14]=xe,c[15]=ke,c[16]=Ie,c[17]=Oe,c[18]=Pe,0!==l&&(c[19]=l,n.length++),n};function g(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,a=0;a<n.length-1;a++){var s=i;i=0;for(var o=67108863&r,c=Math.min(a,t.length-1),l=Math.max(0,a-e.length+1);l<=c;l++){var u=a-l,d=(0|e.words[u])*(0|t.words[l]),h=67108863&d;o=67108863&(h=h+o|0),i+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}n.words[a]=o,r=s,s=i}return 0!==r?n.words[a]=r:n.length--,n._strip()}function b(e,t,n){return g(e,t,n)}function v(e,t){this.x=e,this.y=t}Math.imul||(y=m),a.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?y(this,e,t):n<63?m(this,e,t):n<1024?g(this,e,t):b(this,e,t)},v.prototype.makeRBT=function(e){for(var t=new Array(e),n=a.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},v.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},v.prototype.permute=function(e,t,n,r,i,a){for(var s=0;s<a;s++)r[s]=t[e[s]],i[s]=n[e[s]]},v.prototype.transform=function(e,t,n,r,i,a){this.permute(a,e,t,n,r,i);for(var s=1;s<i;s<<=1)for(var o=s<<1,c=Math.cos(2*Math.PI/o),l=Math.sin(2*Math.PI/o),u=0;u<i;u+=o)for(var d=c,h=l,p=0;p<s;p++){var f=n[u+p],m=r[u+p],y=n[u+p+s],g=r[u+p+s],b=d*y-h*g;g=d*g+h*y,y=b,n[u+p]=f+y,r[u+p]=m+g,n[u+p+s]=f-y,r[u+p+s]=m-g,p!==o&&(b=c*d-l*h,h=c*h+l*d,d=b)}},v.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},v.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},v.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},v.prototype.convert13b=function(e,t,n,i){for(var a=0,s=0;s<t;s++)a+=0|e[s],n[2*s]=8191&a,a>>>=13,n[2*s+1]=8191&a,a>>>=13;for(s=2*t;s<i;++s)n[s]=0;r(0===a),r(0==(-8192&a))},v.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},v.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),a=this.stub(r),s=new Array(r),o=new Array(r),c=new Array(r),l=new Array(r),u=new Array(r),d=new Array(r),h=n.words;h.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,l,r),this.transform(s,a,o,c,r,i),this.transform(l,a,u,d,r,i);for(var p=0;p<r;p++){var f=o[p]*u[p]-c[p]*d[p];c[p]=o[p]*d[p]+c[p]*u[p],o[p]=f}return this.conjugate(o,c,r),this.transform(o,c,h,a,r,i),this.conjugate(h,a,r),this.normalize13b(h,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),b(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,i=0;i<this.length;i++){var a=(0|this.words[i])*e,s=(67108863&a)+(67108863&n);n>>=26,n+=a/67108864|0,n+=s>>>26,this.words[i]=67108863&s}return 0!==n&&(this.words[i]=n,this.length++),t?this.ineg():this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=e.words[r]>>>i&1}return t}(e);if(0===t.length)return new a(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},a.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,c=(0|this.words[t])-o<<n;this.words[t]=c|s,s=o>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},a.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,n){var i;r("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var a=e%26,s=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,c=n;if(i-=s,i=Math.max(0,i),c){for(var l=0;l<s;l++)c.words[l]=this.words[l];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,l=0;l<this.length;l++)this.words[l]=this.words[l+s];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=i);l--){var d=0|this.words[l];this.words[l]=u<<26-a|d>>>a,u=d&o}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},a.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,n){var i,a,s=e.length+n;this._expand(s);var o=0;for(i=0;i<e.length;i++){a=(0|this.words[i+n])+o;var c=(0|e.words[i])*t;o=((a-=67108863&c)>>26)-(c/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)o=(a=(0|this.words[i+n])+o)>>26,this.words[i+n]=67108863&a;if(0===o)return this._strip();for(r(-1===o),o=0,i=0;i<this.length;i++)o=(a=-(0|this.words[i])+o)>>26,this.words[i]=67108863&a;return this.negative=1,this._strip()},a.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var o,c=r.length-i.length;if("mod"!==t){(o=new a(null)).length=c+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=r.clone()._ishlnsubmul(i,1,c);0===u.negative&&(r=u,o&&(o.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|r.words[i.length+d])+(0|r.words[i.length+d-1]);for(h=Math.min(h/s|0,67108863),r._ishlnsubmul(i,h,d);0!==r.negative;)h--,r.negative=0,r._ishlnsubmul(i,1,d),r.isZero()||(r.negative^=1);o&&(o.words[d]=h)}return o&&o._strip(),r._strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:o||null,mod:r}},a.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(i=o.div.neg()),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(i=o.div.neg()),{div:i,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,s,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),a=n.cmp(r);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=(1<<26)%e,i=0,a=this.length-1;a>=0;a--)i=(n*i+(0|this.words[a]))%e;return t?-i:i},a.prototype.modn=function(e){return this.modrn(e)},a.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var a=(0|this.words[i])+67108864*n;this.words[i]=a/e|0,n=a%e}return this._strip(),t?this.ineg():this},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new a(1),s=new a(0),o=new a(0),c=new a(1),l=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++l;for(var u=n.clone(),d=t.clone();!t.isZero();){for(var h=0,p=1;0==(t.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(u),s.isub(d)),i.iushrn(1),s.iushrn(1);for(var f=0,m=1;0==(n.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(n.iushrn(f);f-- >0;)(o.isOdd()||c.isOdd())&&(o.iadd(u),c.isub(d)),o.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(o),s.isub(c)):(n.isub(t),o.isub(i),c.isub(s))}return{a:o,b:c,gcd:n.iushln(l)}},a.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new a(1),o=new a(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,u=1;0==(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0==(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(o)):(n.isub(t),o.isub(s))}return(i=0===t.cmpn(1)?s:o).cmpn(0)<0&&i.iadd(e),i},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var a=t;t=n,n=a}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,s=n;0!==a&&s<this.length;s++){var o=0|this.words[s];a=(o+=a)>>>26,o&=67108863,this.words[s]=o}return 0!==a&&(this.words[s]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new N(e)},a.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var w={k256:null,p224:null,p192:null,p25519:null};function E(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function S(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function T(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function N(e){if("string"==typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function C(e){N.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},E.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},E.prototype.split=function(e,t){e.iushrn(this.n,0,t)},E.prototype.imulK=function(e){return e.imul(this.k)},i(_,E),_.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&n,i=10;i<e.length;i++){var s=0|e.words[i];e.words[i-10]=(s&n)<<4|a>>>22,a=s}a>>>=22,e.words[i-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},_.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(S,E),i(T,E),i(A,E),A.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(w[e])return w[e];var t;if("k256"===e)t=new _;else if("p224"===e)t=new S;else if("p192"===e)t=new T;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new A}return w[e]=t,t},N.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},N.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},N.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},N.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},N.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},N.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},N.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},N.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},N.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},N.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},N.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},N.prototype.isqr=function(e){return this.imul(e,e.clone())},N.prototype.sqr=function(e){return this.mul(e,e)},N.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new a(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var o=new a(1).toRed(this),c=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new a(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,i),h=this.pow(e,i.addn(1).iushrn(1)),p=this.pow(e,i),f=s;0!==p.cmp(o);){for(var m=p,y=0;0!==m.cmp(o);y++)m=m.redSqr();r(y<f);var g=this.pow(d,new a(1).iushln(f-y-1));h=h.redMul(g),d=g.redSqr(),p=p.redMul(d),f=y}return h},N.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},N.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new a(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],s=0,o=0,c=t.bitLength()%26;for(0===c&&(c=26),r=t.length-1;r>=0;r--){for(var l=t.words[r],u=c-1;u>=0;u--){var d=l>>u&1;i!==n[0]&&(i=this.sqr(i)),0!==d||0!==s?(s<<=1,s|=d,(4===++o||0===r&&0===u)&&(i=this.mul(i,n[s]),o=0,s=0)):o=0}c=26}return i},N.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},N.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new C(e)},i(C,N),C.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},C.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},C.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},C.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},C.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=n.nmd(e),this)},47048:(e,t,n)=>{var r;function i(e){this.rand=e}if(e.exports=function(e){return r||(r=new i(null)),r.generate(e)},e.exports.Rand=i,i.prototype.generate=function(e){return this._rand(e)},i.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=n(10328);if("function"!=typeof a.randomBytes)throw new Error("Not supported");i.prototype._rand=function(e){return a.randomBytes(e)}}catch(e){}},60921:(e,t,n)=>{var r=n(25636).Buffer;function i(e){r.isBuffer(e)||(e=r.from(e));for(var t=e.length/4|0,n=new Array(t),i=0;i<t;i++)n[i]=e.readUInt32BE(4*i);return n}function a(e){for(;0<e.length;e++)e[0]=0}function s(e,t,n,r,i){for(var a,s,o,c,l=n[0],u=n[1],d=n[2],h=n[3],p=e[0]^t[0],f=e[1]^t[1],m=e[2]^t[2],y=e[3]^t[3],g=4,b=1;b<i;b++)a=l[p>>>24]^u[f>>>16&255]^d[m>>>8&255]^h[255&y]^t[g++],s=l[f>>>24]^u[m>>>16&255]^d[y>>>8&255]^h[255&p]^t[g++],o=l[m>>>24]^u[y>>>16&255]^d[p>>>8&255]^h[255&f]^t[g++],c=l[y>>>24]^u[p>>>16&255]^d[f>>>8&255]^h[255&m]^t[g++],p=a,f=s,m=o,y=c;return a=(r[p>>>24]<<24|r[f>>>16&255]<<16|r[m>>>8&255]<<8|r[255&y])^t[g++],s=(r[f>>>24]<<24|r[m>>>16&255]<<16|r[y>>>8&255]<<8|r[255&p])^t[g++],o=(r[m>>>24]<<24|r[y>>>16&255]<<16|r[p>>>8&255]<<8|r[255&f])^t[g++],c=(r[y>>>24]<<24|r[p>>>16&255]<<16|r[f>>>8&255]<<8|r[255&m])^t[g++],[a>>>=0,s>>>=0,o>>>=0,c>>>=0]}var o=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var n=[],r=[],i=[[],[],[],[]],a=[[],[],[],[]],s=0,o=0,c=0;c<256;++c){var l=o^o<<1^o<<2^o<<3^o<<4;l=l>>>8^255&l^99,n[s]=l,r[l]=s;var u=e[s],d=e[u],h=e[d],p=257*e[l]^16843008*l;i[0][s]=p<<24|p>>>8,i[1][s]=p<<16|p>>>16,i[2][s]=p<<8|p>>>24,i[3][s]=p,p=16843009*h^65537*d^257*u^16843008*s,a[0][l]=p<<24|p>>>8,a[1][l]=p<<16|p>>>16,a[2][l]=p<<8|p>>>24,a[3][l]=p,0===s?s=o=1:(s=u^e[e[e[h^u]]],o^=e[e[o]])}return{SBOX:n,INV_SBOX:r,SUB_MIX:i,INV_SUB_MIX:a}}();function l(e){this._key=i(e),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var e=this._key,t=e.length,n=t+6,r=4*(n+1),i=[],a=0;a<t;a++)i[a]=e[a];for(a=t;a<r;a++){var s=i[a-1];a%t==0?(s=s<<8|s>>>24,s=c.SBOX[s>>>24]<<24|c.SBOX[s>>>16&255]<<16|c.SBOX[s>>>8&255]<<8|c.SBOX[255&s],s^=o[a/t|0]<<24):t>6&&a%t==4&&(s=c.SBOX[s>>>24]<<24|c.SBOX[s>>>16&255]<<16|c.SBOX[s>>>8&255]<<8|c.SBOX[255&s]),i[a]=i[a-t]^s}for(var l=[],u=0;u<r;u++){var d=r-u,h=i[d-(u%4?0:4)];l[u]=u<4||d<=4?h:c.INV_SUB_MIX[0][c.SBOX[h>>>24]]^c.INV_SUB_MIX[1][c.SBOX[h>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[h>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[255&h]]}this._nRounds=n,this._keySchedule=i,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(e){return s(e=i(e),this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},l.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),n=r.allocUnsafe(16);return n.writeUInt32BE(t[0],0),n.writeUInt32BE(t[1],4),n.writeUInt32BE(t[2],8),n.writeUInt32BE(t[3],12),n},l.prototype.decryptBlock=function(e){var t=(e=i(e))[1];e[1]=e[3],e[3]=t;var n=s(e,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),a=r.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[3],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[1],12),a},l.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},e.exports.AES=l},4029:(e,t,n)=>{var r=n(60921),i=n(25636).Buffer,a=n(47589),s=n(35615),o=n(24803),c=n(72444),l=n(62379);function u(e,t,n,s){a.call(this);var c=i.alloc(4,0);this._cipher=new r.AES(t);var u=this._cipher.encryptBlock(c);this._ghash=new o(u),n=function(e,t,n){if(12===t.length)return e._finID=i.concat([t,i.from([0,0,0,1])]),i.concat([t,i.from([0,0,0,2])]);var r=new o(n),a=t.length,s=a%16;r.update(t),s&&(s=16-s,r.update(i.alloc(s,0))),r.update(i.alloc(8,0));var c=8*a,u=i.alloc(8);u.writeUIntBE(c,0,8),r.update(u),e._finID=r.state;var d=i.from(e._finID);return l(d),d}(this,n,u),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}s(u,a),u.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=i.alloc(t,0),this._ghash.update(t))}this._called=!0;var n=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(n),this._len+=e.length,n},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var n=0;e.length!==t.length&&n++;for(var r=Math.min(e.length,t.length),i=0;i<r;++i)n+=e[i]^t[i];return n}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},u.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=u},50178:(e,t,n)=>{var r=n(90692),i=n(42096),a=n(50006);t.createCipher=t.Cipher=r.createCipher,t.createCipheriv=t.Cipheriv=r.createCipheriv,t.createDecipher=t.Decipher=i.createDecipher,t.createDecipheriv=t.Decipheriv=i.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(a)}},42096:(e,t,n)=>{var r=n(4029),i=n(25636).Buffer,a=n(78197),s=n(17695),o=n(47589),c=n(60921),l=n(28981);function u(e,t,n){o.call(this),this._cache=new d,this._last=void 0,this._cipher=new c.AES(t),this._prev=i.from(n),this._mode=e,this._autopadding=!0}function d(){this.cache=i.allocUnsafe(0)}function h(e,t,n){var o=a[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof n&&(n=i.from(n)),"GCM"!==o.mode&&n.length!==o.iv)throw new TypeError("invalid iv length "+n.length);if("string"==typeof t&&(t=i.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===o.type?new s(o.module,t,n,!0):"auth"===o.type?new r(o.module,t,n,!0):new u(o.module,t,n)}n(35615)(u,o),u.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,t),r.push(n);return i.concat(r)},u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var n=-1;for(;++n<t;)if(e[n+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=i.concat([this.cache,e])},d.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var n=a[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=l(t,!1,n.key,n.iv);return h(e,r.key,r.iv)},t.createDecipheriv=h},90692:(e,t,n)=>{var r=n(78197),i=n(4029),a=n(25636).Buffer,s=n(17695),o=n(47589),c=n(60921),l=n(28981);function u(e,t,n){o.call(this),this._cache=new h,this._cipher=new c.AES(t),this._prev=a.from(n),this._mode=e,this._autopadding=!0}n(35615)(u,o),u.prototype._update=function(e){var t,n;this._cache.add(e);for(var r=[];t=this._cache.get();)n=this._mode.encrypt(this,t),r.push(n);return a.concat(r)};var d=a.alloc(16,16);function h(){this.cache=a.allocUnsafe(0)}function p(e,t,n){var o=r[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=a.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof n&&(n=a.from(n)),"GCM"!==o.mode&&n.length!==o.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===o.type?new s(o.module,t,n):"auth"===o.type?new i(o.module,t,n):new u(o.module,t,n)}u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},h.prototype.add=function(e){this.cache=a.concat([this.cache,e])},h.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},h.prototype.flush=function(){for(var e=16-this.cache.length,t=a.allocUnsafe(e),n=-1;++n<e;)t.writeUInt8(e,n);return a.concat([this.cache,t])},t.createCipheriv=p,t.createCipher=function(e,t){var n=r[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=l(t,!1,n.key,n.iv);return p(e,i.key,i.iv)}},24803:(e,t,n)=>{var r=n(25636).Buffer,i=r.alloc(16,0);function a(e){var t=r.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function s(e){this.h=e,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}s.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},s.prototype._multiply=function(){for(var e,t,n,r=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],i=[0,0,0,0],s=-1;++s<128;){for(0!=(this.state[~~(s/8)]&1<<7-s%8)&&(i[0]^=r[0],i[1]^=r[1],i[2]^=r[2],i[3]^=r[3]),n=0!=(1&r[3]),t=3;t>0;t--)r[t]=r[t]>>>1|(1&r[t-1])<<31;r[0]=r[0]>>>1,n&&(r[0]=r[0]^225<<24)}this.state=a(i)},s.prototype.update=function(e){var t;for(this.cache=r.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},s.prototype.final=function(e,t){return this.cache.length&&this.ghash(r.concat([this.cache,i],16)),this.ghash(a([0,e,0,t])),this.state},e.exports=s},62379:e=>{e.exports=function(e){for(var t,n=e.length;n--;){if(255!==(t=e.readUInt8(n))){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}},15923:(e,t,n)=>{var r=n(72444);t.encrypt=function(e,t){var n=r(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},t.decrypt=function(e,t){var n=e._prev;e._prev=t;var i=e._cipher.decryptBlock(t);return r(i,n)}},82840:(e,t,n)=>{var r=n(25636).Buffer,i=n(72444);function a(e,t,n){var a=t.length,s=i(t,e._cache);return e._cache=e._cache.slice(a),e._prev=r.concat([e._prev,n?t:s]),s}t.encrypt=function(e,t,n){for(var i,s=r.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=r.allocUnsafe(0)),!(e._cache.length<=t.length)){s=r.concat([s,a(e,t,n)]);break}i=e._cache.length,s=r.concat([s,a(e,t.slice(0,i),n)]),t=t.slice(i)}return s}},43081:(e,t,n)=>{var r=n(25636).Buffer;function i(e,t,n){for(var r,i,s=-1,o=0;++s<8;)r=t&1<<7-s?128:0,o+=(128&(i=e._cipher.encryptBlock(e._prev)[0]^r))>>s%8,e._prev=a(e._prev,n?r:i);return o}function a(e,t){var n=e.length,i=-1,a=r.allocUnsafe(e.length);for(e=r.concat([e,r.from([t])]);++i<n;)a[i]=e[i]<<1|e[i+1]>>7;return a}t.encrypt=function(e,t,n){for(var a=t.length,s=r.allocUnsafe(a),o=-1;++o<a;)s[o]=i(e,t[o],n);return s}},73250:(e,t,n)=>{var r=n(25636).Buffer;function i(e,t,n){var i=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=r.concat([e._prev.slice(1),r.from([n?t:i])]),i}t.encrypt=function(e,t,n){for(var a=t.length,s=r.allocUnsafe(a),o=-1;++o<a;)s[o]=i(e,t[o],n);return s}},97306:(e,t,n)=>{var r=n(72444),i=n(25636).Buffer,a=n(62379);function s(e){var t=e._cipher.encryptBlockRaw(e._prev);return a(e._prev),t}t.encrypt=function(e,t){var n=Math.ceil(t.length/16),a=e._cache.length;e._cache=i.concat([e._cache,i.allocUnsafe(16*n)]);for(var o=0;o<n;o++){var c=s(e),l=a+16*o;e._cache.writeUInt32BE(c[0],l+0),e._cache.writeUInt32BE(c[1],l+4),e._cache.writeUInt32BE(c[2],l+8),e._cache.writeUInt32BE(c[3],l+12)}var u=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),r(t,u)}},77347:(e,t)=>{t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},78197:(e,t,n)=>{var r={ECB:n(77347),CBC:n(15923),CFB:n(82840),CFB8:n(73250),CFB1:n(43081),OFB:n(43228),CTR:n(97306),GCM:n(97306)},i=n(50006);for(var a in i)i[a].module=r[i[a].mode];e.exports=i},43228:(e,t,n)=>{var r=n(1048).Buffer,i=n(72444);function a(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(e,t){for(;e._cache.length<t.length;)e._cache=r.concat([e._cache,a(e)]);var n=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),i(t,n)}},17695:(e,t,n)=>{var r=n(60921),i=n(25636).Buffer,a=n(47589);function s(e,t,n,s){a.call(this),this._cipher=new r.AES(t),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=s,this._mode=e}n(35615)(s,a),s.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},e.exports=s},67172:(e,t,n)=>{var r=n(70681),i=n(50178),a=n(78197),s=n(15913),o=n(28981);function c(e,t,n){if(e=e.toLowerCase(),a[e])return i.createCipheriv(e,t,n);if(s[e])return new r({key:t,iv:n,mode:e});throw new TypeError("invalid suite type")}function l(e,t,n){if(e=e.toLowerCase(),a[e])return i.createDecipheriv(e,t,n);if(s[e])return new r({key:t,iv:n,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}t.createCipher=t.Cipher=function(e,t){var n,r;if(e=e.toLowerCase(),a[e])n=a[e].key,r=a[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");n=8*s[e].key,r=s[e].iv}var i=o(t,!1,n,r);return c(e,i.key,i.iv)},t.createCipheriv=t.Cipheriv=c,t.createDecipher=t.Decipher=function(e,t){var n,r;if(e=e.toLowerCase(),a[e])n=a[e].key,r=a[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");n=8*s[e].key,r=s[e].iv}var i=o(t,!1,n,r);return l(e,i.key,i.iv)},t.createDecipheriv=t.Decipheriv=l,t.listCiphers=t.getCiphers=function(){return Object.keys(s).concat(i.getCiphers())}},70681:(e,t,n)=>{var r=n(47589),i=n(52431),a=n(35615),s=n(25636).Buffer,o={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function c(e){r.call(this);var t,n=e.mode.toLowerCase(),i=o[n];t=e.decrypt?"decrypt":"encrypt";var a=e.key;s.isBuffer(a)||(a=s.from(a)),"des-ede"!==n&&"des-ede-cbc"!==n||(a=s.concat([a,a.slice(0,8)]));var c=e.iv;s.isBuffer(c)||(c=s.from(c)),this._des=i.create({key:a,iv:c,type:t})}o.des=o["des-cbc"],o.des3=o["des-ede3-cbc"],e.exports=c,a(c,r),c.prototype._update=function(e){return s.from(this._des.update(e))},c.prototype._final=function(){return s.from(this._des.final())}},15913:(e,t)=>{t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},84215:(e,t,n)=>{var r=n(1048).Buffer,i=n(82823),a=n(22644);function s(e){var t,n=e.modulus.byteLength();do{t=new i(a(n))}while(t.cmp(e.modulus)>=0||!t.umod(e.prime1)||!t.umod(e.prime2));return t}function o(e,t){var n=function(e){var t=s(e);return{blinder:t.toRed(i.mont(e.modulus)).redPow(new i(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(t),a=t.modulus.byteLength(),o=new i(e).mul(n.blinder).umod(t.modulus),c=o.toRed(i.mont(t.prime1)),l=o.toRed(i.mont(t.prime2)),u=t.coefficient,d=t.prime1,h=t.prime2,p=c.redPow(t.exponent1).fromRed(),f=l.redPow(t.exponent2).fromRed(),m=p.isub(f).imul(u).umod(d).imul(h);return f.iadd(m).imul(n.unblinder).umod(t.modulus).toArrayLike(r,"be",a)}o.getr=s,e.exports=o},83982:(e,t,n)=>{e.exports=n(4716)},59553:(e,t,n)=>{var r=n(25636).Buffer,i=n(13257),a=n(34156),s=n(35615),o=n(9807),c=n(46680),l=n(4716);function u(e){a.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=i(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){a.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hash=i(t.hash),this._tag=t.id,this._signType=t.sign}function h(e){return new u(e)}function p(e){return new d(e)}Object.keys(l).forEach((function(e){l[e].id=r.from(l[e].id,"hex"),l[e.toLowerCase()]=l[e]})),s(u,a.Writable),u.prototype._write=function(e,t,n){this._hash.update(e),n()},u.prototype.update=function(e,t){return"string"==typeof e&&(e=r.from(e,t)),this._hash.update(e),this},u.prototype.sign=function(e,t){this.end();var n=this._hash.digest(),r=o(n,e,this._hashType,this._signType,this._tag);return t?r.toString(t):r},s(d,a.Writable),d.prototype._write=function(e,t,n){this._hash.update(e),n()},d.prototype.update=function(e,t){return"string"==typeof e&&(e=r.from(e,t)),this._hash.update(e),this},d.prototype.verify=function(e,t,n){"string"==typeof t&&(t=r.from(t,n)),this.end();var i=this._hash.digest();return c(t,i,e,this._signType,this._tag)},e.exports={Sign:h,Verify:p,createSign:h,createVerify:p}},9807:(e,t,n)=>{var r=n(25636).Buffer,i=n(45262),a=n(84215),s=n(13360).ec,o=n(82823),c=n(15069),l=n(36646);function u(e,t,n,a){if((e=r.from(e.toArray())).length<t.byteLength()){var s=r.alloc(t.byteLength()-e.length);e=r.concat([s,e])}var o=n.length,c=function(e,t){e=d(e,t),e=e.mod(t);var n=r.from(e.toArray());if(n.length<t.byteLength()){var i=r.alloc(t.byteLength()-n.length);n=r.concat([i,n])}return n}(n,t),l=r.alloc(o);l.fill(1);var u=r.alloc(o);return u=i(a,u).update(l).update(r.from([0])).update(e).update(c).digest(),l=i(a,u).update(l).digest(),{k:u=i(a,u).update(l).update(r.from([1])).update(e).update(c).digest(),v:l=i(a,u).update(l).digest()}}function d(e,t){var n=new o(e),r=(e.length<<3)-t.bitLength();return r>0&&n.ishrn(r),n}function h(e,t,n){var a,s;do{for(a=r.alloc(0);8*a.length<e.bitLength();)t.v=i(n,t.k).update(t.v).digest(),a=r.concat([a,t.v]);s=d(a,e),t.k=i(n,t.k).update(t.v).update(r.from([0])).digest(),t.v=i(n,t.k).update(t.v).digest()}while(-1!==s.cmp(e));return s}function p(e,t,n,r){return e.toRed(o.mont(n)).redPow(t).fromRed().mod(r)}e.exports=function(e,t,n,i,f){var m=c(t);if(m.curve){if("ecdsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");return function(e,t){var n=l[t.curve.join(".")];if(!n)throw new Error("unknown curve "+t.curve.join("."));var i=new s(n).keyFromPrivate(t.privateKey),a=i.sign(e);return r.from(a.toDER())}(e,m)}if("dsa"===m.type){if("dsa"!==i)throw new Error("wrong private key type");return function(e,t,n){var i,a=t.params.priv_key,s=t.params.p,c=t.params.q,l=t.params.g,f=new o(0),m=d(e,c).mod(c),y=!1,g=u(a,c,e,n);for(;!1===y;)f=p(l,i=h(c,g,n),s,c),0===(y=i.invm(c).imul(m.add(a.mul(f))).mod(c)).cmpn(0)&&(y=!1,f=new o(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e));128&t[0]&&(t=[0].concat(t));var n=e.length+t.length+4,i=[48,n,2,e.length];return i=i.concat(e,[2,t.length],t),r.from(i)}(f,y)}(e,m,n)}if("rsa"!==i&&"ecdsa/rsa"!==i)throw new Error("wrong private key type");e=r.concat([f,e]);for(var y=m.modulus.byteLength(),g=[0,1];e.length+g.length+1<y;)g.push(255);g.push(0);for(var b=-1;++b<e.length;)g.push(e[b]);return a(g,m)},e.exports.getKey=u,e.exports.makeKey=h},46680:(e,t,n)=>{var r=n(25636).Buffer,i=n(82823),a=n(13360).ec,s=n(15069),o=n(36646);function c(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}e.exports=function(e,t,n,l,u){var d=s(n);if("ec"===d.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(e,t,n){var r=o[n.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var i=new a(r),s=n.data.subjectPrivateKey.data;return i.verify(t,e,s)}(e,t,d)}if("dsa"===d.type){if("dsa"!==l)throw new Error("wrong public key type");return function(e,t,n){var r=n.data.p,a=n.data.q,o=n.data.g,l=n.data.pub_key,u=s.signature.decode(e,"der"),d=u.s,h=u.r;c(d,a),c(h,a);var p=i.mont(r),f=d.invm(a),m=o.toRed(p).redPow(new i(t).mul(f).mod(a)).fromRed().mul(l.toRed(p).redPow(h.mul(f).mod(a)).fromRed()).mod(r).mod(a);return 0===m.cmp(h)}(e,t,d)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");t=r.concat([u,t]);for(var h=d.modulus.byteLength(),p=[1],f=0;t.length+p.length+2<h;)p.push(255),f++;p.push(0);for(var m=-1;++m<t.length;)p.push(t[m]);p=r.from(p);var y=i.mont(d.modulus);e=(e=new i(e).toRed(y)).redPow(new i(d.publicExponent)),e=r.from(e.fromRed().toArray());var g=f<8?1:0;for(h=Math.min(e.length,p.length),e.length!==p.length&&(g=1),m=-1;++m<h;)g|=e[m]^p[m];return 0===g}},39216:(e,t,n)=>{var r=n(47403);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},72444:(e,t,n)=>{var r=n(1048).Buffer;e.exports=function(e,t){for(var n=Math.min(e.length,t.length),i=new r(n),a=0;a<n;++a)i[a]=e[a]^t[a];return i}},1048:(e,t,n)=>{"use strict";const r=n(7991),i=n(39318),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function o(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|m(e,t);let r=o(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const i=function(e){if(c.isBuffer(e)){const t=0|f(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||J(e.length)?o(0):h(e);if("Buffer"===e.type&&Array.isArray(e.data))return h(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return u(e),o(e<0?0:0|f(e))}function h(e){const t=e.length<0?0:0|f(e.length),n=o(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function f(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function m(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(i)return r?-1:W(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return N(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function b(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),J(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){let a,s=1,o=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,c/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let r=-1;for(a=n;a<o;a++)if(l(e,a)===l(t,-1===r?0:a-r)){if(-1===r&&(r=a),a-r+1===c)return r*s}else-1!==r&&(a-=a-r),r=-1}else for(n+c>o&&(n=o-c),a=n;a>=0;a--){let n=!0;for(let r=0;r<c;r++)if(l(e,a+r)!==l(t,r)){n=!1;break}if(n)return a}return-1}function w(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const a=t.length;let s;for(r>a/2&&(r=a/2),s=0;s<r;++s){const r=parseInt(t.substr(2*s,2),16);if(J(r))return s;e[n+s]=r}return s}function E(e,t,n,r){return G(W(t,e.length-n),e,n,r)}function _(e,t,n,r){return G(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return G(K(t),e,n,r)}function T(e,t,n,r){return G(function(e,t){let n,r,i;const a=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function N(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let a=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=n){let n,r,o,c;switch(s){case 1:t<128&&(a=t);break;case 2:n=e[i+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(a=c));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:n=e[i+1],r=e[i+2],o=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&o)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&o,c>65535&&c<1114112&&(a=c))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},c.allocUnsafe=function(e){return d(e)},c.allocUnsafeSlow=function(e){return d(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(Q(t,Uint8Array))i+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?N(this,0,e):y.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(c.prototype[a]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,i){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const o=Math.min(a,s),l=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<o;++e)if(l[e]!==u[e]){a=l[e],s=u[e];break}return a<s?-1:s<a?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let a=!1;for(;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":case"latin1":case"binary":return _(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function M(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=Y[e[r]];return i}function k(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function I(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,n,r,i,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r,i){F(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function L(e,t,n,r,i){F(t,r,i,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function D(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,a){return t=+t,n>>>=0,a||D(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function j(e,t,n,r,a){return t=+t,n>>>=0,a||D(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||I(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=X((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=X((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=this[e],i=1,a=0;for(;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||I(e,t,this.length);let r=t,i=1,a=this[e+--r];for(;r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return e>>>=0,t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||I(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=X((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=X((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||H(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||I(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||I(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||I(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||I(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){O(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=X((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=X((function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);O(this,e,t,n,r-1,-r)}let i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=X((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=X((function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const a=c.isBuffer(e)?e:c.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};const q={};function $(e,t,n){q[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function U(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function F(e,t,n,r,i,a){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=a>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(a+1)}${r}`:`>= -(2${r} ** ${8*(a+1)-1}${r}) and < 2 ** ${8*(a+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new q.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||H(t,e.length-(n+1))}(r,i,a)}function V(e,t){if("number"!=typeof e)throw new q.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,n){if(Math.floor(e)!==e)throw V(e,n),new q.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new q.ERR_BUFFER_OUT_OF_BOUNDS;throw new q.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),$("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=U(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=U(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const z=/[^+/0-9A-Za-z-_]/g;function W(e,t){let n;t=t||1/0;const r=e.length;let i=null;const a=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function K(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},43934:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},47589:(e,t,n)=>{var r=n(25636).Buffer,i=n(31983).Transform,a=n(18888).I;function s(e){i.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(35615)(s,i),s.prototype.update=function(e,t,n){"string"==typeof e&&(e=r.from(e,t));var i=this._update(e);return this.hashMode?this:(n&&(i=this._toString(i,n)),i)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(e,t,n){var r;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){r=e}finally{n(r)}},s.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},s.prototype._finalOrDigest=function(e){var t=this.__final()||r.alloc(0);return e&&(t=this._toString(t,e,!0)),t},s.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new a(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var r=this._decoder.write(e);return n&&(r+=this._decoder.end()),r},e.exports=s},9546:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.r(t),n.d(t,{clsx:()=>i,default:()=>a});const a=i},45517:(e,t,n)=>{var r=n(1048).Buffer,i=n(13360),a=n(82823);e.exports=function(e){return new o(e)};var s={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function o(e){this.curveType=s[e],this.curveType||(this.curveType={name:e}),this.curve=new i.ec(this.curveType.name),this.keys=void 0}function c(e,t,n){Array.isArray(e)||(e=e.toArray());var i=new r(e);if(n&&i.length<n){var a=new r(n-i.length);a.fill(0),i=r.concat([a,i])}return t?i.toString(t):i}s.p224=s.secp224r1,s.p256=s.secp256r1=s.prime256v1,s.p192=s.secp192r1=s.prime192v1,s.p384=s.secp384r1,s.p521=s.secp521r1,o.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},o.prototype.computeSecret=function(e,t,n){return t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),c(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),n,this.curveType.byteLength)},o.prototype.getPublicKey=function(e,t){var n=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(n[n.length-1]%2?n[0]=7:n[0]=6),c(n,e)},o.prototype.getPrivateKey=function(e){return c(this.keys.getPrivate(),e)},o.prototype.setPublicKey=function(e,t){return t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this.keys._importPublic(e),this},o.prototype.setPrivateKey=function(e,t){t=t||"utf8",r.isBuffer(e)||(e=new r(e,t));var n=new a(e);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this}},13257:(e,t,n)=>{"use strict";var r=n(35615),i=n(63275),a=n(25586),s=n(13229),o=n(47589);function c(e){o.call(this,"digest"),this._hash=e}r(c,o),c.prototype._update=function(e){this._hash.update(e)},c.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new i:"rmd160"===e||"ripemd160"===e?new a:new c(s(e))}},94277:(e,t,n)=>{var r=n(63275);e.exports=function(e){return(new r).update(e).digest()}},45262:(e,t,n)=>{"use strict";var r=n(35615),i=n(1719),a=n(47589),s=n(25636).Buffer,o=n(94277),c=n(25586),l=n(13229),u=s.alloc(128);function d(e,t){a.call(this,"digest"),"string"==typeof t&&(t=s.from(t));var n="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>n)?t=("rmd160"===e?new c:l(e)).update(t).digest():t.length<n&&(t=s.concat([t,u],n));for(var r=this._ipad=s.allocUnsafe(n),i=this._opad=s.allocUnsafe(n),o=0;o<n;o++)r[o]=54^t[o],i[o]=92^t[o];this._hash="rmd160"===e?new c:l(e),this._hash.update(r)}r(d,a),d.prototype._update=function(e){this._hash.update(e)},d.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new c:l(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new d("rmd160",t):"md5"===e?new i(o,t):new d(e,t)}},1719:(e,t,n)=>{"use strict";var r=n(35615),i=n(25636).Buffer,a=n(47589),s=i.alloc(128),o=64;function c(e,t){a.call(this,"digest"),"string"==typeof t&&(t=i.from(t)),this._alg=e,this._key=t,t.length>o?t=e(t):t.length<o&&(t=i.concat([t,s],o));for(var n=this._ipad=i.allocUnsafe(o),r=this._opad=i.allocUnsafe(o),c=0;c<o;c++)n[c]=54^t[c],r[c]=92^t[c];this._hash=[n]}r(c,a),c.prototype._update=function(e){this._hash.push(e)},c.prototype._final=function(){var e=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,e]))},e.exports=c},30242:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(i>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}},e.exports=n},10328:(e,t,n)=>{"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=n(22644),t.createHash=t.Hash=n(13257),t.createHmac=t.Hmac=n(45262);var r=n(83982),i=Object.keys(r),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);t.getHashes=function(){return a};var s=n(88619);t.pbkdf2=s.pbkdf2,t.pbkdf2Sync=s.pbkdf2Sync;var o=n(67172);t.Cipher=o.Cipher,t.createCipher=o.createCipher,t.Cipheriv=o.Cipheriv,t.createCipheriv=o.createCipheriv,t.Decipher=o.Decipher,t.createDecipher=o.createDecipher,t.Decipheriv=o.Decipheriv,t.createDecipheriv=o.createDecipheriv,t.getCiphers=o.getCiphers,t.listCiphers=o.listCiphers;var c=n(27019);t.DiffieHellmanGroup=c.DiffieHellmanGroup,t.createDiffieHellmanGroup=c.createDiffieHellmanGroup,t.getDiffieHellman=c.getDiffieHellman,t.createDiffieHellman=c.createDiffieHellman,t.DiffieHellman=c.DiffieHellman;var l=n(59553);t.createSign=l.createSign,t.Sign=l.Sign,t.createVerify=l.createVerify,t.Verify=l.Verify,t.createECDH=n(45517);var u=n(44055);t.publicEncrypt=u.publicEncrypt,t.privateEncrypt=u.privateEncrypt,t.publicDecrypt=u.publicDecrypt,t.privateDecrypt=u.privateDecrypt;var d=n(69904);t.randomFill=d.randomFill,t.randomFillSync=d.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},28437:e=>{var t=1e3,n=60*t,r=60*n,i=24*r,a=7*i,s=365.25*i;function o(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}e.exports=function(e,c){c=c||{};var l=typeof e;if("string"===l&&e.length>0)return function(e){if((e=String(e)).length>100)return;var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!o)return;var c=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*a;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===l&&isFinite(e))return c.long?function(e){var a=Math.abs(e);if(a>=i)return o(e,a,i,"day");if(a>=r)return o(e,a,r,"hour");if(a>=n)return o(e,a,n,"minute");if(a>=t)return o(e,a,t,"second");return e+" ms"}(e):function(e){var a=Math.abs(e);if(a>=i)return Math.round(e/i)+"d";if(a>=r)return Math.round(e/r)+"h";if(a>=n)return Math.round(e/n)+"m";if(a>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},20124:(e,t,n)=>{var r=n(39907);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==r&&"env"in r&&(e="MISSING_ENV_VAR".DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=n(27891)(t);const{formatters:i}=e.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},27891:(e,t,n)=>{e.exports=function(e){function t(e){let n,i,a,s=null;function o(...e){if(!o.enabled)return;const r=o,i=Number(new Date),a=i-(n||i);r.diff=a,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";s++;const a=t.formatters[i];if("function"==typeof a){const t=e[s];n=a.call(r,t),e.splice(s,1),s--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=r,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==t.namespaces&&(i=t.namespaces,a=t.enabled(e)),a),set:e=>{s=e}}),"function"==typeof t.init&&t.init(o),o}function r(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(i),...t.skips.map(i).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(28437),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((n=>{t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}},89029:function(e,t,n){var r;!function(i){"use strict";var a,s,o,c=9e15,l=1e9,u="0123456789abcdef",d="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",h="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",p={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-c,maxE:c,crypto:!1},f=!0,m="[DecimalError] ",y=m+"Invalid argument: ",g=m+"Precision limit exceeded",b=m+"crypto unavailable",v="[object Decimal]",w=Math.floor,E=Math.pow,_=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,S=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,T=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,A=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,N=1e7,C=7,M=d.length-1,R=h.length-1,x={toStringTag:v};function k(e){var t,n,r,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)r=e[t]+"",(n=C-r.length)&&(a+=F(n)),a+=r;s=e[t],(n=C-(r=s+"").length)&&(a+=F(n))}else if(0===s)return"0";for(;s%10==0;)s/=10;return a+s}function I(e,t,n){if(e!==~~e||e<t||e>n)throw Error(y+e)}function O(e,t,n,r){var i,a,s,o;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=C,i=0):(i=Math.ceil((t+1)/C),t%=C),a=E(10,C-t),o=e[i]%a|0,null==r?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),s=n<4&&99999==o||n>3&&49999==o||5e4==o||0==o):s=(n<4&&o+1==a||n>3&&o+1==a/2)&&(e[i+1]/a/100|0)==E(10,t-2)-1||(o==a/2||0==o)&&0==(e[i+1]/a/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),s=(r||n<4)&&9999==o||!r&&n>3&&4999==o):s=((r||n<4)&&o+1==a||!r&&n>3&&o+1==a/2)&&(e[i+1]/a/1e3|0)==E(10,t-3)-1,s}function P(e,t,n){for(var r,i,a=[0],s=0,o=e.length;s<o;){for(i=a.length;i--;)a[i]*=t;for(a[0]+=u.indexOf(e.charAt(s++)),r=0;r<a.length;r++)a[r]>n-1&&(void 0===a[r+1]&&(a[r+1]=0),a[r+1]+=a[r]/n|0,a[r]%=n)}return a.reverse()}x.absoluteValue=x.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),D(e)},x.ceil=function(){return D(new this.constructor(this),this.e+1,2)},x.clampedTo=x.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(y+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},x.comparedTo=x.cmp=function(e){var t,n,r,i,a=this,s=a.d,o=(e=new a.constructor(e)).d,c=a.s,l=e.s;if(!s||!o)return c&&l?c!==l?c:s===o?0:!s^c<0?1:-1:NaN;if(!s[0]||!o[0])return s[0]?c:o[0]?-l:0;if(c!==l)return c;if(a.e!==e.e)return a.e>e.e^c<0?1:-1;for(t=0,n=(r=s.length)<(i=o.length)?r:i;t<n;++t)if(s[t]!==o[t])return s[t]>o[t]^c<0?1:-1;return r===i?0:r>i^c<0?1:-1},x.cosine=x.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+C,r.rounding=1,n=function(e,t){var n,r,i;if(t.isZero())return t;r=t.d.length,r<32?i=(1/X(4,n=Math.ceil(r/3))).toString():(n=16,i="2.3283064365386962890625e-10");e.precision+=n,t=Y(e,1,t.times(i),new e(1));for(var a=n;a--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=n,t}(r,Z(r,n)),r.precision=e,r.rounding=t,D(2==o||3==o?n.neg():n,e,t,!0)):new r(1):new r(NaN)},x.cubeRoot=x.cbrt=function(){var e,t,n,r,i,a,s,o,c,l,u=this,d=u.constructor;if(!u.isFinite()||u.isZero())return new d(u);for(f=!1,(a=u.s*E(u.s*u,1/3))&&Math.abs(a)!=1/0?r=new d(a.toString()):(n=k(u.d),(a=((e=u.e)-n.length+1)%3)&&(n+=1==a||-2==a?"0":"00"),a=E(n,1/3),e=w((e+1)/3)-(e%3==(e<0?-1:2)),(r=new d(n=a==1/0?"5e"+e:(n=a.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=u.s),s=(e=d.precision)+3;;)if(l=(c=(o=r).times(o).times(o)).plus(u),r=L(l.plus(u).times(o),l.plus(c),s+2,1),k(o.d).slice(0,s)===(n=k(r.d)).slice(0,s)){if("9999"!=(n=n.slice(s-3,s+1))&&(i||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(D(r,e+1,1),t=!r.times(r).times(r).eq(u));break}if(!i&&(D(o,e+1,0),o.times(o).times(o).eq(u))){r=o;break}s+=4,i=1}return f=!0,D(r,e,d.rounding,t)},x.decimalPlaces=x.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-w(this.e/C))*C,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},x.dividedBy=x.div=function(e){return L(this,new this.constructor(e))},x.dividedToIntegerBy=x.divToInt=function(e){var t=this.constructor;return D(L(this,new t(e),0,1,1),t.precision,t.rounding)},x.equals=x.eq=function(e){return 0===this.cmp(e)},x.floor=function(){return D(new this.constructor(this),this.e+1,3)},x.greaterThan=x.gt=function(e){return this.cmp(e)>0},x.greaterThanOrEqualTo=x.gte=function(e){var t=this.cmp(e);return 1==t||0===t},x.hyperbolicCosine=x.cosh=function(){var e,t,n,r,i,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;n=s.precision,r=s.rounding,s.precision=n+Math.max(a.e,a.sd())+4,s.rounding=1,(i=a.d.length)<32?t=(1/X(4,e=Math.ceil(i/3))).toString():(e=16,t="2.3283064365386962890625e-10"),a=Y(s,1,a.times(t),new s(1),!0);for(var c,l=e,u=new s(8);l--;)c=a.times(a),a=o.minus(c.times(u.minus(c.times(u))));return D(a,s.precision=n,s.rounding=r,!0)},x.hyperbolicSine=x.sinh=function(){var e,t,n,r,i=this,a=i.constructor;if(!i.isFinite()||i.isZero())return new a(i);if(t=a.precision,n=a.rounding,a.precision=t+Math.max(i.e,i.sd())+4,a.rounding=1,(r=i.d.length)<3)i=Y(a,2,i,i,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,i=Y(a,2,i=i.times(1/X(5,e)),i,!0);for(var s,o=new a(5),c=new a(16),l=new a(20);e--;)s=i.times(i),i=i.times(o.plus(s.times(c.times(s).plus(l))))}return a.precision=t,a.rounding=n,D(i,t,n,!0)},x.hyperbolicTangent=x.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,L(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},x.inverseCosine=x.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,a=n.rounding;return-1!==r?0===r?t.isNeg()?$(n,i,a):new n(0):new n(NaN):t.isZero()?$(n,i+4,a).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=$(n,i+4,a).times(.5),n.precision=i,n.rounding=a,e.minus(t))},x.inverseHyperbolicCosine=x.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,f=!1,n=n.times(n).minus(1).sqrt().plus(n),f=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},x.inverseHyperbolicSine=x.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,f=!1,n=n.times(n).plus(1).sqrt().plus(n),f=!0,r.precision=e,r.rounding=t,n.ln())},x.inverseHyperbolicTangent=x.atanh=function(){var e,t,n,r,i=this,a=i.constructor;return i.isFinite()?i.e>=0?new a(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=a.precision,t=a.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?D(new a(i),e,t,!0):(a.precision=n=r-i.e,i=L(i.plus(1),new a(1).minus(i),n+e,1),a.precision=e+4,a.rounding=1,i=i.ln(),a.precision=e,a.rounding=t,i.times(.5))):new a(NaN)},x.inverseSine=x.asin=function(){var e,t,n,r,i=this,a=i.constructor;return i.isZero()?new a(i):(t=i.abs().cmp(1),n=a.precision,r=a.rounding,-1!==t?0===t?((e=$(a,n+4,r).times(.5)).s=i.s,e):new a(NaN):(a.precision=n+6,a.rounding=1,i=i.div(new a(1).minus(i.times(i)).sqrt().plus(1)).atan(),a.precision=n,a.rounding=r,i.times(2)))},x.inverseTangent=x.atan=function(){var e,t,n,r,i,a,s,o,c,l=this,u=l.constructor,d=u.precision,h=u.rounding;if(l.isFinite()){if(l.isZero())return new u(l);if(l.abs().eq(1)&&d+4<=R)return(s=$(u,d+4,h).times(.25)).s=l.s,s}else{if(!l.s)return new u(NaN);if(d+4<=R)return(s=$(u,d+4,h).times(.5)).s=l.s,s}for(u.precision=o=d+10,u.rounding=1,e=n=Math.min(28,o/C+2|0);e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(f=!1,t=Math.ceil(o/C),r=1,c=l.times(l),s=new u(l),i=l;-1!==e;)if(i=i.times(c),a=s.minus(i.div(r+=2)),i=i.times(c),void 0!==(s=a.plus(i.div(r+=2))).d[t])for(e=t;s.d[e]===a.d[e]&&e--;);return n&&(s=s.times(2<<n-1)),f=!0,D(s,u.precision=d,u.rounding=h,!0)},x.isFinite=function(){return!!this.d},x.isInteger=x.isInt=function(){return!!this.d&&w(this.e/C)>this.d.length-2},x.isNaN=function(){return!this.s},x.isNegative=x.isNeg=function(){return this.s<0},x.isPositive=x.isPos=function(){return this.s>0},x.isZero=function(){return!!this.d&&0===this.d[0]},x.lessThan=x.lt=function(e){return this.cmp(e)<0},x.lessThanOrEqualTo=x.lte=function(e){return this.cmp(e)<1},x.logarithm=x.log=function(e){var t,n,r,i,a,s,o,c,l=this,u=l.constructor,d=u.precision,h=u.rounding;if(null==e)e=new u(10),t=!0;else{if(n=(e=new u(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new u(n&&!n[0]?-1/0:1!=l.s?NaN:n?0:1/0);if(t)if(n.length>1)a=!0;else{for(i=n[0];i%10==0;)i/=10;a=1!==i}if(f=!1,s=K(l,o=d+5),r=t?q(u,o+10):K(e,o),O((c=L(s,r,o,1)).d,i=d,h))do{if(s=K(l,o+=10),r=t?q(u,o+10):K(e,o),c=L(s,r,o,1),!a){+k(c.d).slice(i+1,i+15)+1==1e14&&(c=D(c,d+1,0));break}}while(O(c.d,i+=10,h));return f=!0,D(c,d,h)},x.minus=x.sub=function(e){var t,n,r,i,a,s,o,c,l,u,d,h,p=this,m=p.constructor;if(e=new m(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new m(e.d||p.s!==e.s?p:NaN):e=new m(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(l=p.d,h=e.d,o=m.precision,c=m.rounding,!l[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!l[0])return new m(3===c?-0:0);e=new m(p)}return f?D(e,o,c):e}if(n=w(e.e/C),u=w(p.e/C),l=l.slice(),a=u-n){for((d=a<0)?(t=l,a=-a,s=h.length):(t=h,n=u,s=l.length),a>(r=Math.max(Math.ceil(o/C),s)+2)&&(a=r,t.length=1),t.reverse(),r=a;r--;)t.push(0);t.reverse()}else{for((d=(r=l.length)<(s=h.length))&&(s=r),r=0;r<s;r++)if(l[r]!=h[r]){d=l[r]<h[r];break}a=0}for(d&&(t=l,l=h,h=t,e.s=-e.s),s=l.length,r=h.length-s;r>0;--r)l[s++]=0;for(r=h.length;r>a;){if(l[--r]<h[r]){for(i=r;i&&0===l[--i];)l[i]=N-1;--l[i],l[r]+=N}l[r]-=h[r]}for(;0===l[--s];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(e.d=l,e.e=j(l,n),f?D(e,o,c):e):new m(3===c?-0:0)},x.modulo=x.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?D(new r(n),r.precision,r.rounding):(f=!1,9==r.modulo?(t=L(n,e.abs(),0,3,1)).s*=e.s:t=L(n,e,0,r.modulo,1),t=t.times(e),f=!0,n.minus(t))},x.naturalExponential=x.exp=function(){return W(this)},x.naturalLogarithm=x.ln=function(){return K(this)},x.negated=x.neg=function(){var e=new this.constructor(this);return e.s=-e.s,D(e)},x.plus=x.add=function(e){var t,n,r,i,a,s,o,c,l,u,d=this,h=d.constructor;if(e=new h(e),!d.d||!e.d)return d.s&&e.s?d.d||(e=new h(e.d||d.s===e.s?d:NaN)):e=new h(NaN),e;if(d.s!=e.s)return e.s=-e.s,d.minus(e);if(l=d.d,u=e.d,o=h.precision,c=h.rounding,!l[0]||!u[0])return u[0]||(e=new h(d)),f?D(e,o,c):e;if(a=w(d.e/C),r=w(e.e/C),l=l.slice(),i=a-r){for(i<0?(n=l,i=-i,s=u.length):(n=u,r=a,s=l.length),i>(s=(a=Math.ceil(o/C))>s?a+1:s+1)&&(i=s,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((s=l.length)-(i=u.length)<0&&(i=s,n=u,u=l,l=n),t=0;i;)t=(l[--i]=l[i]+u[i]+t)/N|0,l[i]%=N;for(t&&(l.unshift(t),++r),s=l.length;0==l[--s];)l.pop();return e.d=l,e.e=j(l,r),f?D(e,o,c):e},x.precision=x.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(y+e);return n.d?(t=U(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},x.round=function(){var e=this,t=e.constructor;return D(new t(e),e.e+1,t.rounding)},x.sine=x.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+C,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:Y(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/X(5,n)),t=Y(e,2,t,t);for(var i,a=new e(5),s=new e(16),o=new e(20);n--;)i=t.times(t),t=t.times(a.plus(i.times(s.times(i).minus(o))));return t}(r,Z(r,n)),r.precision=e,r.rounding=t,D(o>2?n.neg():n,e,t,!0)):new r(NaN)},x.squareRoot=x.sqrt=function(){var e,t,n,r,i,a,s=this,o=s.d,c=s.e,l=s.s,u=s.constructor;if(1!==l||!o||!o[0])return new u(!l||l<0&&(!o||o[0])?NaN:o?s:1/0);for(f=!1,0==(l=Math.sqrt(+s))||l==1/0?(((t=k(o)).length+c)%2==0&&(t+="0"),l=Math.sqrt(t),c=w((c+1)/2)-(c<0||c%2),r=new u(t=l==1/0?"5e"+c:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new u(l.toString()),n=(c=u.precision)+3;;)if(r=(a=r).plus(L(s,a,n+2,1)).times(.5),k(a.d).slice(0,n)===(t=k(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(D(r,c+1,1),e=!r.times(r).eq(s));break}if(!i&&(D(a,c+1,0),a.times(a).eq(s))){r=a;break}n+=4,i=1}return f=!0,D(r,c,u.rounding,e)},x.tangent=x.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=L(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,D(2==o||4==o?n.neg():n,e,t,!0)):new r(NaN)},x.times=x.mul=function(e){var t,n,r,i,a,s,o,c,l,u=this,d=u.constructor,h=u.d,p=(e=new d(e)).d;if(e.s*=u.s,!(h&&h[0]&&p&&p[0]))return new d(!e.s||h&&!h[0]&&!p||p&&!p[0]&&!h?NaN:h&&p?0*e.s:e.s/0);for(n=w(u.e/C)+w(e.e/C),(c=h.length)<(l=p.length)&&(a=h,h=p,p=a,s=c,c=l,l=s),a=[],r=s=c+l;r--;)a.push(0);for(r=l;--r>=0;){for(t=0,i=c+r;i>r;)o=a[i]+p[r]*h[i-r-1]+t,a[i--]=o%N|0,t=o/N|0;a[i]=(a[i]+t)%N|0}for(;!a[--s];)a.pop();return t?++n:a.shift(),e.d=a,e.e=j(a,n),f?D(e,d.precision,d.rounding):e},x.toBinary=function(e,t){return ee(this,2,e,t)},x.toDecimalPlaces=x.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(I(e,0,l),void 0===t?t=r.rounding:I(t,0,8),D(n,e+n.e+1,t))},x.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=B(r,!0):(I(e,0,l),void 0===t?t=i.rounding:I(t,0,8),n=B(r=D(new i(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},x.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?n=B(i):(I(e,0,l),void 0===t?t=a.rounding:I(t,0,8),n=B(r=D(new a(i),e+i.e+1,t),!1,e+r.e+1)),i.isNeg()&&!i.isZero()?"-"+n:n},x.toFraction=function(e){var t,n,r,i,a,s,o,c,l,u,d,h,p=this,m=p.d,g=p.constructor;if(!m)return new g(p);if(l=n=new g(1),r=c=new g(0),s=(a=(t=new g(r)).e=U(m)-p.e-1)%C,t.d[0]=E(10,s<0?C+s:s),null==e)e=a>0?t:l;else{if(!(o=new g(e)).isInt()||o.lt(l))throw Error(y+o);e=o.gt(t)?a>0?t:l:o}for(f=!1,o=new g(k(m)),u=g.precision,g.precision=a=m.length*C*2;d=L(o,t,0,1,1),1!=(i=n.plus(d.times(r))).cmp(e);)n=r,r=i,i=l,l=c.plus(d.times(i)),c=i,i=t,t=o.minus(d.times(i)),o=i;return i=L(e.minus(n),r,0,1,1),c=c.plus(i.times(l)),n=n.plus(i.times(r)),c.s=l.s=p.s,h=L(l,r,a,1).minus(p).abs().cmp(L(c,n,a,1).minus(p).abs())<1?[l,r]:[c,n],g.precision=u,f=!0,h},x.toHexadecimal=x.toHex=function(e,t){return ee(this,16,e,t)},x.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:I(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(f=!1,n=L(n,e,0,t,1).times(e),f=!0,D(n)):(e.s=n.s,n=e),n},x.toNumber=function(){return+this},x.toOctal=function(e,t){return ee(this,8,e,t)},x.toPower=x.pow=function(e){var t,n,r,i,a,s,o=this,c=o.constructor,l=+(e=new c(e));if(!(o.d&&e.d&&o.d[0]&&e.d[0]))return new c(E(+o,l));if((o=new c(o)).eq(1))return o;if(r=c.precision,a=c.rounding,e.eq(1))return D(o,r,a);if((t=w(e.e/C))>=e.d.length-1&&(n=l<0?-l:l)<=9007199254740991)return i=V(c,o,n,r),e.s<0?new c(1).div(i):D(i,r,a);if((s=o.s)<0){if(t<e.d.length-1)return new c(NaN);if(0==(1&e.d[t])&&(s=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=s,o}return(t=0!=(n=E(+o,l))&&isFinite(n)?new c(n+"").e:w(l*(Math.log("0."+k(o.d))/Math.LN10+o.e+1)))>c.maxE+1||t<c.minE-1?new c(t>0?s/0:0):(f=!1,c.rounding=o.s=1,n=Math.min(12,(t+"").length),(i=W(e.times(K(o,r+n)),r)).d&&O((i=D(i,r+5,1)).d,r,a)&&(t=r+10,+k((i=D(W(e.times(K(o,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(i=D(i,r+1,0))),i.s=s,f=!0,c.rounding=a,D(i,r,a))},x.toPrecision=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=B(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(I(e,1,l),void 0===t?t=i.rounding:I(t,0,8),n=B(r=D(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},x.toSignificantDigits=x.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(I(e,1,l),void 0===t?t=n.rounding:I(t,0,8)),D(new n(this),e,t)},x.toString=function(){var e=this,t=e.constructor,n=B(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},x.truncated=x.trunc=function(){return D(new this.constructor(this),this.e+1,1)},x.valueOf=x.toJSON=function(){var e=this,t=e.constructor,n=B(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var L=function(){function e(e,t,n){var r,i=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+i,e[a]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,a,o,c,l){var u,d,h,p,f,m,y,g,b,v,E,_,S,T,A,M,R,x,k,I,O=r.constructor,P=r.s==i.s?1:-1,L=r.d,B=i.d;if(!(L&&L[0]&&B&&B[0]))return new O(r.s&&i.s&&(L?!B||L[0]!=B[0]:B)?L&&0==L[0]||!B?0*P:P/0:NaN);for(l?(f=1,d=r.e-i.e):(l=N,f=C,d=w(r.e/f)-w(i.e/f)),k=B.length,R=L.length,v=(b=new O(P)).d=[],h=0;B[h]==(L[h]||0);h++);if(B[h]>(L[h]||0)&&d--,null==a?(T=a=O.precision,o=O.rounding):T=c?a+(r.e-i.e)+1:a,T<0)v.push(1),m=!0;else{if(T=T/f+2|0,h=0,1==k){for(p=0,B=B[0],T++;(h<R||p)&&T--;h++)A=p*l+(L[h]||0),v[h]=A/B|0,p=A%B|0;m=p||h<R}else{for((p=l/(B[0]+1)|0)>1&&(B=e(B,p,l),L=e(L,p,l),k=B.length,R=L.length),M=k,_=(E=L.slice(0,k)).length;_<k;)E[_++]=0;(I=B.slice()).unshift(0),x=B[0],B[1]>=l/2&&++x;do{p=0,(u=t(B,E,k,_))<0?(S=E[0],k!=_&&(S=S*l+(E[1]||0)),(p=S/x|0)>1?(p>=l&&(p=l-1),1==(u=t(y=e(B,p,l),E,g=y.length,_=E.length))&&(p--,n(y,k<g?I:B,g,l))):(0==p&&(u=p=1),y=B.slice()),(g=y.length)<_&&y.unshift(0),n(E,y,_,l),-1==u&&(u=t(B,E,k,_=E.length))<1&&(p++,n(E,k<_?I:B,_,l)),_=E.length):0===u&&(p++,E=[0]),v[h++]=p,u&&E[0]?E[_++]=L[M]||0:(E=[L[M]],_=1)}while((M++<R||void 0!==E[0])&&T--);m=void 0!==E[0]}v[0]||v.shift()}if(1==f)b.e=d,s=m;else{for(h=1,p=v[0];p>=10;p/=10)h++;b.e=h+d*f-1,D(b,c?a+b.e+1:a,o,m)}return b}}();function D(e,t,n,r){var i,a,s,o,c,l,u,d,h,p=e.constructor;e:if(null!=t){if(!(d=e.d))return e;for(i=1,o=d[0];o>=10;o/=10)i++;if((a=t-i)<0)a+=C,s=t,c=(u=d[h=0])/E(10,i-s-1)%10|0;else if((h=Math.ceil((a+1)/C))>=(o=d.length)){if(!r)break e;for(;o++<=h;)d.push(0);u=c=0,i=1,s=(a%=C)-C+1}else{for(u=o=d[h],i=1;o>=10;o/=10)i++;c=(s=(a%=C)-C+i)<0?0:u/E(10,i-s-1)%10|0}if(r=r||t<0||void 0!==d[h+1]||(s<0?u:u%E(10,i-s-1)),l=n<4?(c||r)&&(0==n||n==(e.s<0?3:2)):c>5||5==c&&(4==n||r||6==n&&(a>0?s>0?u/E(10,i-s):0:d[h-1])%10&1||n==(e.s<0?8:7)),t<1||!d[0])return d.length=0,l?(t-=e.e+1,d[0]=E(10,(C-t%C)%C),e.e=-t||0):d[0]=e.e=0,e;if(0==a?(d.length=h,o=1,h--):(d.length=h+1,o=E(10,C-a),d[h]=s>0?(u/E(10,i-s)%E(10,s)|0)*o:0),l)for(;;){if(0==h){for(a=1,s=d[0];s>=10;s/=10)a++;for(s=d[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(e.e++,d[0]==N&&(d[0]=1));break}if(d[h]+=o,d[h]!=N)break;d[h--]=0,o=1}for(a=d.length;0===d[--a];)d.pop()}return f&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function B(e,t,n){if(!e.isFinite())return G(e);var r,i=e.e,a=k(e.d),s=a.length;return t?(n&&(r=n-s)>0?a=a.charAt(0)+"."+a.slice(1)+F(r):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):i<0?(a="0."+F(-i-1)+a,n&&(r=n-s)>0&&(a+=F(r))):i>=s?(a+=F(i+1-s),n&&(r=n-i-1)>0&&(a=a+"."+F(r))):((r=i+1)<s&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-s)>0&&(i+1===s&&(a+="."),a+=F(r))),a}function j(e,t){var n=e[0];for(t*=C;n>=10;n/=10)t++;return t}function q(e,t,n){if(t>M)throw f=!0,n&&(e.precision=n),Error(g);return D(new e(d),t,1,!0)}function $(e,t,n){if(t>R)throw Error(g);return D(new e(h),t,n,!0)}function U(e){var t=e.length-1,n=t*C+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function F(e){for(var t="";e--;)t+="0";return t}function V(e,t,n,r){var i,a=new e(1),s=Math.ceil(r/C+4);for(f=!1;;){if(n%2&&te((a=a.times(t)).d,s)&&(i=!0),0===(n=w(n/2))){n=a.d.length-1,i&&0===a.d[n]&&++a.d[n];break}te((t=t.times(t)).d,s)}return f=!0,a}function H(e){return 1&e.d[e.d.length-1]}function z(e,t,n){for(var r,i=new e(t[0]),a=0;++a<t.length;){if(!(r=new e(t[a])).s){i=r;break}i[n](r)&&(i=r)}return i}function W(e,t){var n,r,i,a,s,o,c,l=0,u=0,d=0,h=e.constructor,p=h.rounding,m=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(f=!1,c=m):c=t,o=new h(.03125);e.e>-2;)e=e.times(o),d+=5;for(c+=r=Math.log(E(2,d))/Math.LN10*2+5|0,n=a=s=new h(1),h.precision=c;;){if(a=D(a.times(e),c,1),n=n.times(++u),k((o=s.plus(L(a,n,c,1))).d).slice(0,c)===k(s.d).slice(0,c)){for(i=d;i--;)s=D(s.times(s),c,1);if(null!=t)return h.precision=m,s;if(!(l<3&&O(s.d,c-r,p,l)))return D(s,h.precision=m,p,f=!0);h.precision=c+=10,n=a=o=new h(1),u=0,l++}s=o}}function K(e,t){var n,r,i,a,s,o,c,l,u,d,h,p=1,m=e,y=m.d,g=m.constructor,b=g.rounding,v=g.precision;if(m.s<0||!y||!y[0]||!m.e&&1==y[0]&&1==y.length)return new g(y&&!y[0]?-1/0:1!=m.s?NaN:y?0:m);if(null==t?(f=!1,u=v):u=t,g.precision=u+=10,r=(n=k(y)).charAt(0),!(Math.abs(a=m.e)<15e14))return l=q(g,u+2,v).times(a+""),m=K(new g(r+"."+n.slice(1)),u-10).plus(l),g.precision=v,null==t?D(m,v,b,f=!0):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=k((m=m.times(e)).d)).charAt(0),p++;for(a=m.e,r>1?(m=new g("0."+n),a++):m=new g(r+"."+n.slice(1)),d=m,c=s=m=L(m.minus(1),m.plus(1),u,1),h=D(m.times(m),u,1),i=3;;){if(s=D(s.times(h),u,1),k((l=c.plus(L(s,new g(i),u,1))).d).slice(0,u)===k(c.d).slice(0,u)){if(c=c.times(2),0!==a&&(c=c.plus(q(g,u+2,v).times(a+""))),c=L(c,new g(p),u,1),null!=t)return g.precision=v,c;if(!O(c.d,u-10,b,o))return D(c,g.precision=v,b,f=!0);g.precision=u+=10,l=s=m=L(d.minus(1),d.plus(1),u,1),h=D(m.times(m),u,1),i=o=1}c=l,i+=2}}function G(e){return String(e.s*e.s/0)}function Q(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%C,n<0&&(r+=C),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=C;r<i;)e.d.push(+t.slice(r,r+=C));t=t.slice(r),r=C-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),f&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function J(e,t){var n,r,i,s,o,c,l,u,d;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),A.test(t))return Q(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(S.test(t))n=16,t=t.toLowerCase();else if(_.test(t))n=2;else{if(!T.test(t))throw Error(y+t);n=8}for((s=t.search(/p/i))>0?(l=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),o=(s=t.indexOf("."))>=0,r=e.constructor,o&&(s=(c=(t=t.replace(".","")).length)-s,i=V(r,new r(n),s,2*s)),s=d=(u=P(t,n,N)).length-1;0===u[s];--s)u.pop();return s<0?new r(0*e.s):(e.e=j(u,d),e.d=u,f=!1,o&&(e=L(e,i,4*c)),l&&(e=e.times(Math.abs(l)<54?E(2,l):a.pow(2,l))),f=!0,e)}function Y(e,t,n,r,i){var a,s,o,c,l=e.precision,u=Math.ceil(l/C);for(f=!1,c=n.times(n),o=new e(r);;){if(s=L(o.times(c),new e(t++*t++),l,1),o=i?r.plus(s):r.minus(s),r=L(s.times(c),new e(t++*t++),l,1),void 0!==(s=o.plus(r)).d[u]){for(a=u;s.d[a]===o.d[a]&&a--;);if(-1==a)break}a=o,o=r,r=s,s=a}return f=!0,s.d.length=u+1,s}function X(e,t){for(var n=e;--t;)n*=e;return n}function Z(e,t){var n,r=t.s<0,i=$(e,e.precision,1),a=i.times(.5);if((t=t.abs()).lte(a))return o=r?4:1,t;if((n=t.divToInt(i)).isZero())o=r?3:2;else{if((t=t.minus(n.times(i))).lte(a))return o=H(n)?r?2:3:r?4:1,t;o=H(n)?r?1:4:r?3:2}return t.minus(i).abs()}function ee(e,t,n,r){var i,a,o,c,d,h,p,f,m,y=e.constructor,g=void 0!==n;if(g?(I(n,1,l),void 0===r?r=y.rounding:I(r,0,8)):(n=y.precision,r=y.rounding),e.isFinite()){for(g?(i=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):i=t,(o=(p=B(e)).indexOf("."))>=0&&(p=p.replace(".",""),(m=new y(1)).e=p.length-o,m.d=P(B(m),10,i),m.e=m.d.length),a=d=(f=P(p,10,i)).length;0==f[--d];)f.pop();if(f[0]){if(o<0?a--:((e=new y(e)).d=f,e.e=a,f=(e=L(e,m,n,r,0,i)).d,a=e.e,h=s),o=f[n],c=i/2,h=h||void 0!==f[n+1],h=r<4?(void 0!==o||h)&&(0===r||r===(e.s<0?3:2)):o>c||o===c&&(4===r||h||6===r&&1&f[n-1]||r===(e.s<0?8:7)),f.length=n,h)for(;++f[--n]>i-1;)f[n]=0,n||(++a,f.unshift(1));for(d=f.length;!f[d-1];--d);for(o=0,p="";o<d;o++)p+=u.charAt(f[o]);if(g){if(d>1)if(16==t||8==t){for(o=16==t?4:3,--d;d%o;d++)p+="0";for(d=(f=P(p,i,t)).length;!f[d-1];--d);for(o=1,p="1.";o<d;o++)p+=u.charAt(f[o])}else p=p.charAt(0)+"."+p.slice(1);p=p+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)p="0"+p;p="0."+p}else if(++a>d)for(a-=d;a--;)p+="0";else a<d&&(p=p.slice(0,a)+"."+p.slice(a))}else p=g?"0p+0":"0";p=(16==t?"0x":2==t?"0b":8==t?"0o":"")+p}else p=G(e);return e.s<0?"-"+p:p}function te(e,t){if(e.length>t)return e.length=t,!0}function ne(e){return new this(e).abs()}function re(e){return new this(e).acos()}function ie(e){return new this(e).acosh()}function ae(e,t){return new this(e).plus(t)}function se(e){return new this(e).asin()}function oe(e){return new this(e).asinh()}function ce(e){return new this(e).atan()}function le(e){return new this(e).atanh()}function ue(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,a=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?$(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=$(this,a,1).times(.5)).s=e.s:t.s<0?(this.precision=a,this.rounding=1,n=this.atan(L(e,t,a,1)),t=$(this,a,1),this.precision=r,this.rounding=i,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(L(e,t,a,1)):(n=$(this,a,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function de(e){return new this(e).cbrt()}function he(e){return D(e=new this(e),e.e+1,2)}function pe(e,t,n){return new this(e).clamp(t,n)}function fe(e){if(!e||"object"!=typeof e)throw Error(m+"Object expected");var t,n,r,i=!0===e.defaults,a=["precision",1,l,"rounding",0,8,"toExpNeg",-c,0,"toExpPos",0,c,"maxE",0,c,"minE",-c,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(n=a[t],i&&(this[n]=p[n]),void 0!==(r=e[n])){if(!(w(r)===r&&r>=a[t+1]&&r<=a[t+2]))throw Error(y+n+": "+r);this[n]=r}if(n="crypto",i&&(this[n]=p[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(y+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(b);this[n]=!0}else this[n]=!1}return this}function me(e){return new this(e).cos()}function ye(e){return new this(e).cosh()}function ge(e,t){return new this(e).div(t)}function be(e){return new this(e).exp()}function ve(e){return D(e=new this(e),e.e+1,3)}function we(){var e,t,n=new this(0);for(f=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return f=!0,new this(1/0);n=t}return f=!0,n.sqrt()}function Ee(e){return e instanceof a||e&&e.toStringTag===v||!1}function _e(e){return new this(e).ln()}function Se(e,t){return new this(e).log(t)}function Te(e){return new this(e).log(2)}function Ae(e){return new this(e).log(10)}function Ne(){return z(this,arguments,"lt")}function Ce(){return z(this,arguments,"gt")}function Me(e,t){return new this(e).mod(t)}function Re(e,t){return new this(e).mul(t)}function xe(e,t){return new this(e).pow(t)}function ke(e){var t,n,r,i,a=0,s=new this(1),o=[];if(void 0===e?e=this.precision:I(e,1,l),r=Math.ceil(e/C),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));a<r;)(i=t[a])>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=i%1e7;else{if(!crypto.randomBytes)throw Error(b);for(t=crypto.randomBytes(r*=4);a<r;)(i=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,a):(o.push(i%1e7),a+=4);a=r/4}else for(;a<r;)o[a++]=1e7*Math.random()|0;for(r=o[--a],e%=C,r&&e&&(i=E(10,C-e),o[a]=(r/i|0)*i);0===o[a];a--)o.pop();if(a<0)n=0,o=[0];else{for(n=-1;0===o[0];n-=C)o.shift();for(r=1,i=o[0];i>=10;i/=10)r++;r<C&&(n-=C-r)}return s.e=n,s.d=o,s}function Ie(e){return D(e=new this(e),e.e+1,this.rounding)}function Oe(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Pe(e){return new this(e).sin()}function Le(e){return new this(e).sinh()}function De(e){return new this(e).sqrt()}function Be(e,t){return new this(e).sub(t)}function je(){var e=0,t=arguments,n=new this(t[e]);for(f=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return f=!0,D(n,this.precision,this.rounding)}function qe(e){return new this(e).tan()}function $e(e){return new this(e).tanh()}function Ue(e){return D(e=new this(e),e.e+1,1)}a=function e(t){var n,r,i;function a(e){var t,n,r,i=this;if(!(i instanceof a))return new a(e);if(i.constructor=a,Ee(e))return i.s=e.s,void(f?!e.d||e.e>a.maxE?(i.e=NaN,i.d=null):e.e<a.minE?(i.e=0,i.d=[0]):(i.e=e.e,i.d=e.d.slice()):(i.e=e.e,i.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return i.s=1/e<0?-1:1,i.e=0,void(i.d=[0]);if(e<0?(e=-e,i.s=-1):i.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(f?t>a.maxE?(i.e=NaN,i.d=null):t<a.minE?(i.e=0,i.d=[0]):(i.e=t,i.d=[e]):(i.e=t,i.d=[e]))}return 0*e!=0?(e||(i.s=NaN),i.e=NaN,void(i.d=null)):Q(i,e.toString())}if("string"!==r)throw Error(y+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),i.s=-1):(43===n&&(e=e.slice(1)),i.s=1),A.test(e)?Q(i,e):J(i,e)}if(a.prototype=x,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=fe,a.clone=e,a.isDecimal=Ee,a.abs=ne,a.acos=re,a.acosh=ie,a.add=ae,a.asin=se,a.asinh=oe,a.atan=ce,a.atanh=le,a.atan2=ue,a.cbrt=de,a.ceil=he,a.clamp=pe,a.cos=me,a.cosh=ye,a.div=ge,a.exp=be,a.floor=ve,a.hypot=we,a.ln=_e,a.log=Se,a.log10=Ae,a.log2=Te,a.max=Ne,a.min=Ce,a.mod=Me,a.mul=Re,a.pow=xe,a.random=ke,a.round=Ie,a.sign=Oe,a.sin=Pe,a.sinh=Le,a.sqrt=De,a.sub=Be,a.sum=je,a.tan=qe,a.tanh=$e,a.trunc=Ue,void 0===t&&(t={}),t&&!0!==t.defaults)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return a.config(t),a}(p),a.prototype.constructor=a,a.default=a.Decimal=a,d=new a(d),h=new a(h),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},52431:(e,t,n)=>{"use strict";t.utils=n(46769),t.Cipher=n(9341),t.DES=n(73768),t.CBC=n(54914),t.EDE=n(33352)},54914:(e,t,n)=>{"use strict";var r=n(7784),i=n(35615),a={};function s(e){r.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}i(t,e);for(var n=Object.keys(a),r=0;r<n.length;r++){var s=n[r];t.prototype[s]=a[s]}return t.create=function(e){return new t(e)},t},a._cbcInit=function(){var e=new s(this.options.iv);this._cbcState=e},a._update=function(e,t,n,r){var i=this._cbcState,a=this.constructor.super_.prototype,s=i.iv;if("encrypt"===this.type){for(var o=0;o<this.blockSize;o++)s[o]^=e[t+o];a._update.call(this,s,0,n,r);for(o=0;o<this.blockSize;o++)s[o]=n[r+o]}else{a._update.call(this,e,t,n,r);for(o=0;o<this.blockSize;o++)n[r+o]^=s[o];for(o=0;o<this.blockSize;o++)s[o]=e[t+o]}}},9341:(e,t,n)=>{"use strict";var r=n(7784);function i(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=i,i.prototype._init=function(){},i.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},i.prototype._buffer=function(e,t){for(var n=Math.min(this.buffer.length-this.bufferOff,e.length-t),r=0;r<n;r++)this.buffer[this.bufferOff+r]=e[t+r];return this.bufferOff+=n,n},i.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(e){var t=0,n=0,r=(this.bufferOff+e.length)/this.blockSize|0,i=new Array(r*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(i,n)));for(var a=e.length-(e.length-t)%this.blockSize;t<a;t+=this.blockSize)this._update(e,t,i,n),n+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return i},i.prototype._updateDecrypt=function(e){for(var t=0,n=0,r=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,i=new Array(r*this.blockSize);r>0;r--)t+=this._buffer(e,t),n+=this._flushBuffer(i,n);return t+=this._buffer(e,t),i},i.prototype.final=function(e){var t,n;return e&&(t=this.update(e)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(n):n},i.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},i.prototype._unpad=function(e){return e},i.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},73768:(e,t,n)=>{"use strict";var r=n(7784),i=n(35615),a=n(46769),s=n(9341);function o(){this.tmp=new Array(2),this.keys=null}function c(e){s.call(this,e);var t=new o;this._desState=t,this.deriveKeys(t,e.key)}i(c,s),e.exports=c,c.create=function(e){return new c(e)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];c.prototype.deriveKeys=function(e,t){e.keys=new Array(32),r.equal(t.length,this.blockSize,"Invalid key length");var n=a.readUInt32BE(t,0),i=a.readUInt32BE(t,4);a.pc1(n,i,e.tmp,0),n=e.tmp[0],i=e.tmp[1];for(var s=0;s<e.keys.length;s+=2){var o=l[s>>>1];n=a.r28shl(n,o),i=a.r28shl(i,o),a.pc2(n,i,e.keys,s)}},c.prototype._update=function(e,t,n,r){var i=this._desState,s=a.readUInt32BE(e,t),o=a.readUInt32BE(e,t+4);a.ip(s,o,i.tmp,0),s=i.tmp[0],o=i.tmp[1],"encrypt"===this.type?this._encrypt(i,s,o,i.tmp,0):this._decrypt(i,s,o,i.tmp,0),s=i.tmp[0],o=i.tmp[1],a.writeUInt32BE(n,s,r),a.writeUInt32BE(n,o,r+4)},c.prototype._pad=function(e,t){for(var n=e.length-t,r=t;r<e.length;r++)e[r]=n;return!0},c.prototype._unpad=function(e){for(var t=e[e.length-1],n=e.length-t;n<e.length;n++)r.equal(e[n],t);return e.slice(0,e.length-t)},c.prototype._encrypt=function(e,t,n,r,i){for(var s=t,o=n,c=0;c<e.keys.length;c+=2){var l=e.keys[c],u=e.keys[c+1];a.expand(o,e.tmp,0),l^=e.tmp[0],u^=e.tmp[1];var d=a.substitute(l,u),h=o;o=(s^a.permute(d))>>>0,s=h}a.rip(o,s,r,i)},c.prototype._decrypt=function(e,t,n,r,i){for(var s=n,o=t,c=e.keys.length-2;c>=0;c-=2){var l=e.keys[c],u=e.keys[c+1];a.expand(s,e.tmp,0),l^=e.tmp[0],u^=e.tmp[1];var d=a.substitute(l,u),h=s;s=(o^a.permute(d))>>>0,o=h}a.rip(s,o,r,i)}},33352:(e,t,n)=>{"use strict";var r=n(7784),i=n(35615),a=n(9341),s=n(73768);function o(e,t){r.equal(t.length,24,"Invalid key length");var n=t.slice(0,8),i=t.slice(8,16),a=t.slice(16,24);this.ciphers="encrypt"===e?[s.create({type:"encrypt",key:n}),s.create({type:"decrypt",key:i}),s.create({type:"encrypt",key:a})]:[s.create({type:"decrypt",key:a}),s.create({type:"encrypt",key:i}),s.create({type:"decrypt",key:n})]}function c(e){a.call(this,e);var t=new o(this.type,this.options.key);this._edeState=t}i(c,a),e.exports=c,c.create=function(e){return new c(e)},c.prototype._update=function(e,t,n,r){var i=this._edeState;i.ciphers[0]._update(e,t,n,r),i.ciphers[1]._update(n,r,n,r),i.ciphers[2]._update(n,r,n,r)},c.prototype._pad=s.prototype._pad,c.prototype._unpad=s.prototype._unpad},46769:(e,t)=>{"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,n){e[0+n]=t>>>24,e[1+n]=t>>>16&255,e[2+n]=t>>>8&255,e[3+n]=255&t},t.ip=function(e,t,n,r){for(var i=0,a=0,s=6;s>=0;s-=2){for(var o=0;o<=24;o+=8)i<<=1,i|=t>>>o+s&1;for(o=0;o<=24;o+=8)i<<=1,i|=e>>>o+s&1}for(s=6;s>=0;s-=2){for(o=1;o<=25;o+=8)a<<=1,a|=t>>>o+s&1;for(o=1;o<=25;o+=8)a<<=1,a|=e>>>o+s&1}n[r+0]=i>>>0,n[r+1]=a>>>0},t.rip=function(e,t,n,r){for(var i=0,a=0,s=0;s<4;s++)for(var o=24;o>=0;o-=8)i<<=1,i|=t>>>o+s&1,i<<=1,i|=e>>>o+s&1;for(s=4;s<8;s++)for(o=24;o>=0;o-=8)a<<=1,a|=t>>>o+s&1,a<<=1,a|=e>>>o+s&1;n[r+0]=i>>>0,n[r+1]=a>>>0},t.pc1=function(e,t,n,r){for(var i=0,a=0,s=7;s>=5;s--){for(var o=0;o<=24;o+=8)i<<=1,i|=t>>o+s&1;for(o=0;o<=24;o+=8)i<<=1,i|=e>>o+s&1}for(o=0;o<=24;o+=8)i<<=1,i|=t>>o+s&1;for(s=1;s<=3;s++){for(o=0;o<=24;o+=8)a<<=1,a|=t>>o+s&1;for(o=0;o<=24;o+=8)a<<=1,a|=e>>o+s&1}for(o=0;o<=24;o+=8)a<<=1,a|=e>>o+s&1;n[r+0]=i>>>0,n[r+1]=a>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,r,i){for(var a=0,s=0,o=n.length>>>1,c=0;c<o;c++)a<<=1,a|=e>>>n[c]&1;for(c=o;c<n.length;c++)s<<=1,s|=t>>>n[c]&1;r[i+0]=a>>>0,r[i+1]=s>>>0},t.expand=function(e,t,n){var r=0,i=0;r=(1&e)<<5|e>>>27;for(var a=23;a>=15;a-=4)r<<=6,r|=e>>>a&63;for(a=11;a>=3;a-=4)i|=e>>>a&63,i<<=6;i|=(31&e)<<1|e>>>31,t[n+0]=r>>>0,t[n+1]=i>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var n=0,i=0;i<4;i++){n<<=4,n|=r[64*i+(e>>>18-6*i&63)]}for(i=0;i<4;i++){n<<=4,n|=r[256+64*i+(t>>>18-6*i&63)]}return n>>>0};var i=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,n=0;n<i.length;n++)t<<=1,t|=e>>>i[n]&1;return t>>>0},t.padSplit=function(e,t,n){for(var r=e.toString(2);r.length<t;)r="0"+r;for(var i=[],a=0;a<t;a+=n)i.push(r.slice(a,a+n));return i.join(" ")}},27019:(e,t,n)=>{var r=n(1048).Buffer,i=n(18521),a=n(96251),s=n(36551);var o={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(e){var t=new r(a[e].prime,"hex"),n=new r(a[e].gen,"hex");return new s(t,n)},t.createDiffieHellman=t.DiffieHellman=function e(t,n,a,c){return r.isBuffer(n)||void 0===o[n]?e(t,"binary",n,a):(n=n||"binary",c=c||"binary",a=a||new r([2]),r.isBuffer(a)||(a=new r(a,c)),"number"==typeof t?new s(i(t,a),a,!0):(r.isBuffer(t)||(t=new r(t,n)),new s(t,a,!0)))}},36551:(e,t,n)=>{var r=n(1048).Buffer,i=n(82823),a=new(n(21929)),s=new i(24),o=new i(11),c=new i(10),l=new i(3),u=new i(7),d=n(18521),h=n(22644);function p(e,t){return t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this._pub=new i(e),this}function f(e,t){return t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this._priv=new i(e),this}e.exports=y;var m={};function y(e,t,n){this.setGenerator(t),this.__prime=new i(e),this._prime=i.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=p,this.setPrivateKey=f):this._primeCode=8}function g(e,t){var n=new r(e.toArray());return t?n.toString(t):n}Object.defineProperty(y.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var n=t.toString("hex"),r=[n,e.toString(16)].join("_");if(r in m)return m[r];var i,h=0;if(e.isEven()||!d.simpleSieve||!d.fermatTest(e)||!a.test(e))return h+=1,h+="02"===n||"05"===n?8:4,m[r]=h,h;switch(a.test(e.shrn(1))||(h+=2),n){case"02":e.mod(s).cmp(o)&&(h+=8);break;case"05":(i=e.mod(c)).cmp(l)&&i.cmp(u)&&(h+=8);break;default:h+=4}return m[r]=h,h}(this.__prime,this.__gen)),this._primeCode}}),y.prototype.generateKeys=function(){return this._priv||(this._priv=new i(h(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},y.prototype.computeSecret=function(e){var t=(e=(e=new i(e)).toRed(this._prime)).redPow(this._priv).fromRed(),n=new r(t.toArray()),a=this.getPrime();if(n.length<a.length){var s=new r(a.length-n.length);s.fill(0),n=r.concat([s,n])}return n},y.prototype.getPublicKey=function(e){return g(this._pub,e)},y.prototype.getPrivateKey=function(e){return g(this._priv,e)},y.prototype.getPrime=function(e){return g(this.__prime,e)},y.prototype.getGenerator=function(e){return g(this._gen,e)},y.prototype.setGenerator=function(e,t){return t=t||"utf8",r.isBuffer(e)||(e=new r(e,t)),this.__gen=e,this._gen=new i(e),this}},18521:(e,t,n)=>{var r=n(22644);e.exports=b,b.simpleSieve=y,b.fermatTest=g;var i=n(82823),a=new i(24),s=new(n(21929)),o=new i(1),c=new i(2),l=new i(5),u=(new i(16),new i(8),new i(10)),d=new i(3),h=(new i(7),new i(11)),p=new i(4),f=(new i(12),null);function m(){if(null!==f)return f;var e=[];e[0]=2;for(var t=1,n=3;n<1048576;n+=2){for(var r=Math.ceil(Math.sqrt(n)),i=0;i<t&&e[i]<=r&&n%e[i]!=0;i++);t!==i&&e[i]<=r||(e[t++]=n)}return f=e,e}function y(e){for(var t=m(),n=0;n<t.length;n++)if(0===e.modn(t[n]))return 0===e.cmpn(t[n]);return!0}function g(e){var t=i.mont(e);return 0===c.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function b(e,t){if(e<16)return new i(2===t||5===t?[140,123]:[140,39]);var n,f;for(t=new i(t);;){for(n=new i(r(Math.ceil(e/8)));n.bitLength()>e;)n.ishrn(1);if(n.isEven()&&n.iadd(o),n.testn(1)||n.iadd(c),t.cmp(c)){if(!t.cmp(l))for(;n.mod(u).cmp(d);)n.iadd(p)}else for(;n.mod(a).cmp(h);)n.iadd(p);if(y(f=n.shrn(1))&&y(n)&&g(f)&&g(n)&&s.test(f)&&s.test(n))return n}}},13360:(e,t,n)=>{"use strict";var r=t;r.version=n(30183).rE,r.utils=n(41874),r.rand=n(47048),r.curve=n(7131),r.curves=n(86443),r.ec=n(15064),r.eddsa=n(84807)},85174:(e,t,n)=>{"use strict";var r=n(82823),i=n(41874),a=i.getNAF,s=i.getJSF,o=i.assert;function c(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){o(e.precomputed);var n=e._getDoubles(),r=a(t,1,this._bitLength),i=(1<<n.step+1)-(n.step%2==0?2:1);i/=3;var s,c,l=[];for(s=0;s<r.length;s+=n.step){c=0;for(var u=s+n.step-1;u>=s;u--)c=(c<<1)+r[u];l.push(c)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),p=i;p>0;p--){for(s=0;s<l.length;s++)(c=l[s])===p?h=h.mixedAdd(n.points[s]):c===-p&&(h=h.mixedAdd(n.points[s].neg()));d=d.add(h)}return d.toP()},c.prototype._wnafMul=function(e,t){var n=4,r=e._getNAFPoints(n);n=r.wnd;for(var i=r.points,s=a(t,n,this._bitLength),c=this.jpoint(null,null,null),l=s.length-1;l>=0;l--){for(var u=0;l>=0&&0===s[l];l--)u++;if(l>=0&&u++,c=c.dblp(u),l<0)break;var d=s[l];o(0!==d),c="affine"===e.type?d>0?c.mixedAdd(i[d-1>>1]):c.mixedAdd(i[-d-1>>1].neg()):d>0?c.add(i[d-1>>1]):c.add(i[-d-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,n,r,i){var o,c,l,u=this._wnafT1,d=this._wnafT2,h=this._wnafT3,p=0;for(o=0;o<r;o++){var f=(l=t[o])._getNAFPoints(e);u[o]=f.wnd,d[o]=f.points}for(o=r-1;o>=1;o-=2){var m=o-1,y=o;if(1===u[m]&&1===u[y]){var g=[t[m],null,null,t[y]];0===t[m].y.cmp(t[y].y)?(g[1]=t[m].add(t[y]),g[2]=t[m].toJ().mixedAdd(t[y].neg())):0===t[m].y.cmp(t[y].y.redNeg())?(g[1]=t[m].toJ().mixedAdd(t[y]),g[2]=t[m].add(t[y].neg())):(g[1]=t[m].toJ().mixedAdd(t[y]),g[2]=t[m].toJ().mixedAdd(t[y].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],v=s(n[m],n[y]);for(p=Math.max(v[0].length,p),h[m]=new Array(p),h[y]=new Array(p),c=0;c<p;c++){var w=0|v[0][c],E=0|v[1][c];h[m][c]=b[3*(w+1)+(E+1)],h[y][c]=0,d[m]=g}}else h[m]=a(n[m],u[m],this._bitLength),h[y]=a(n[y],u[y],this._bitLength),p=Math.max(h[m].length,p),p=Math.max(h[y].length,p)}var _=this.jpoint(null,null,null),S=this._wnafT4;for(o=p;o>=0;o--){for(var T=0;o>=0;){var A=!0;for(c=0;c<r;c++)S[c]=0|h[c][o],0!==S[c]&&(A=!1);if(!A)break;T++,o--}if(o>=0&&T++,_=_.dblp(T),o<0)break;for(c=0;c<r;c++){var N=S[c];0!==N&&(N>0?l=d[c][N-1>>1]:N<0&&(l=d[c][-N-1>>1].neg()),_="affine"===l.type?_.mixedAdd(l):_.add(l))}}for(o=0;o<r;o++)d[o]=null;return i?_:_.toP()},c.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=i.toArray(e,t);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?o(e[e.length-1]%2==0):7===e[0]&&o(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return i.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<t;i+=e){for(var a=0;a<e;a++)r=r.dbl();n.push(r)}return{step:e,points:n}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)t[i]=t[i-1].add(r);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}},21547:(e,t,n)=>{"use strict";var r=n(41874),i=n(82823),a=n(35615),s=n(85174),o=r.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,s.call(this,"edwards",e),this.a=new i(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new i(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new i(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function l(e,t,n,r,a){s.BasePoint.call(this,e,"projective"),null===t&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new i(t,16),this.y=new i(n,16),this.z=r?new i(r,16):this.curve.one,this.t=a&&new i(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}a(c,s),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,n,r){return this.point(e,t,n,r)},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=this.c2.redSub(this.a.redMul(n)),a=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=r.redMul(a.redInvm()),o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var c=o.fromRed().isOdd();return(t&&!c||!t&&c)&&(o=o.redNeg()),this.point(e,o)},c.prototype.pointFromY=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),r=n.redSub(this.c2),a=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=r.redMul(a.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),r=t.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return 0===r.cmp(i)},a(l,s.BasePoint),c.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},c.prototype.point=function(e,t,n,r){return new l(this,e,t,n,r)},l.fromJSON=function(e,t){return new l(e,t[0],t[1],t[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=r.redAdd(t),s=a.redSub(n),o=r.redSub(t),c=i.redMul(s),l=a.redMul(o),u=i.redMul(o),d=s.redMul(a);return this.curve.point(c,l,d,u)},l.prototype._projDbl=function(){var e,t,n,r,i,a,s=this.x.redAdd(this.y).redSqr(),o=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var l=(r=this.curve._mulA(o)).redAdd(c);this.zOne?(e=s.redSub(o).redSub(c).redMul(l.redSub(this.curve.two)),t=l.redMul(r.redSub(c)),n=l.redSqr().redSub(l).redSub(l)):(i=this.z.redSqr(),a=l.redSub(i).redISub(i),e=s.redSub(o).redISub(c).redMul(a),t=l.redMul(r.redSub(c)),n=l.redMul(a))}else r=o.redAdd(c),i=this.curve._mulC(this.z).redSqr(),a=r.redSub(i).redSub(i),e=this.curve._mulC(s.redISub(r)).redMul(a),t=this.curve._mulC(r).redMul(o.redISub(c)),n=r.redMul(a);return this.curve.point(e,t,n)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),a=n.redSub(t),s=i.redSub(r),o=i.redAdd(r),c=n.redAdd(t),l=a.redMul(s),u=o.redMul(c),d=a.redMul(c),h=s.redMul(o);return this.curve.point(l,u,h,d)},l.prototype._projAdd=function(e){var t,n,r=this.z.redMul(e.z),i=r.redSqr(),a=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(a).redMul(s),c=i.redSub(o),l=i.redAdd(o),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(s),d=r.redMul(c).redMul(u);return this.curve.twisted?(t=r.redMul(l).redMul(s.redSub(this.curve._mulA(a))),n=c.redMul(l)):(t=r.redMul(l).redMul(s.redSub(a)),n=this.curve._mulC(c).redMul(l)),this.curve.point(d,t,n)},l.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},l.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)},l.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},l.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var n=e.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},7131:(e,t,n)=>{"use strict";var r=t;r.base=n(85174),r.short=n(60277),r.mont=n(63245),r.edwards=n(21547)},63245:(e,t,n)=>{"use strict";var r=n(82823),i=n(35615),a=n(85174),s=n(41874);function o(e){a.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,n){a.BasePoint.call(this,e,"projective"),null===t&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}i(o,a),e.exports=o,o.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),r=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},i(c,a.BasePoint),o.prototype.decodePoint=function(e,t){return this.point(s.toArray(e,t),1)},o.prototype.point=function(e,t){return new c(this,e,t)},o.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),n=e.redSub(t),r=e.redMul(t),i=n.redMul(t.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,i)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),i=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(n),s=i.redMul(r),o=t.z.redMul(a.redAdd(s).redSqr()),c=t.x.redMul(a.redISub(s).redSqr());return this.curve.point(o,c)},c.prototype.mul=function(e){for(var t=e.clone(),n=this,r=this.curve.point(null,null),i=[];0!==t.cmpn(0);t.iushrn(1))i.push(t.andln(1));for(var a=i.length-1;a>=0;a--)0===i[a]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},60277:(e,t,n)=>{"use strict";var r=n(41874),i=n(82823),a=n(35615),s=n(85174),o=r.assert;function c(e){s.call(this,"short",e),this.a=new i(e.a,16).toRed(this.red),this.b=new i(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(e,t,n,r){s.BasePoint.call(this,e,"affine"),null===t&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new i(t,16),this.y=new i(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,n,r){s.BasePoint.call(this,e,"jacobian"),null===t&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i(0)):(this.x=new i(t,16),this.y=new i(n,16),this.z=new i(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}a(c,s),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,n;if(e.beta)t=new i(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)n=new i(e.lambda,16);else{var a=this._getEndoRoots(this.n);0===this.g.mul(a[0]).x.cmp(this.g.x.redMul(t))?n=a[0]:(n=a[1],o(0===this.g.mul(n).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:n,basis:e.basis?e.basis.map((function(e){return{a:new i(e.a,16),b:new i(e.b,16)}})):this._getEndoBasis(n)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:i.mont(e),n=new i(2).toRed(t).redInvm(),r=n.redNeg(),a=new i(3).toRed(t).redNeg().redSqrt().redMul(n);return[r.redAdd(a).fromRed(),r.redSub(a).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,n,r,a,s,o,c,l,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,p=this.n.clone(),f=new i(1),m=new i(0),y=new i(0),g=new i(1),b=0;0!==h.cmpn(0);){var v=p.div(h);l=p.sub(v.mul(h)),u=y.sub(v.mul(f));var w=g.sub(v.mul(m));if(!r&&l.cmp(d)<0)t=c.neg(),n=f,r=l.neg(),a=u;else if(r&&2==++b)break;c=l,p=h,h=l,y=f,f=u,g=m,m=w}s=l.neg(),o=u;var E=r.sqr().add(a.sqr());return s.sqr().add(o.sqr()).cmp(E)>=0&&(s=t,o=n),r.negative&&(r=r.neg(),a=a.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:r,b:a},{a:s,b:o}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],r=t[1],i=r.b.mul(e).divRound(this.n),a=n.b.neg().mul(e).divRound(this.n),s=i.mul(n.a),o=a.mul(r.a),c=i.mul(n.b),l=a.mul(r.b);return{k1:e.sub(s).sub(o),k2:c.add(l).neg()}},c.prototype.pointFromX=function(e,t){(e=new i(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var a=r.fromRed().isOdd();return(t&&!a||!t&&a)&&(r=r.redNeg()),this.point(e,r)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,r=this.a.redMul(t),i=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,a=0;a<e.length;a++){var s=this._endoSplit(t[a]),o=e[a],c=o._getBeta();s.k1.negative&&(s.k1.ineg(),o=o.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),r[2*a]=o,r[2*a+1]=c,i[2*a]=s.k1,i[2*a+1]=s.k2}for(var l=this._wnafMulAdd(1,r,i,2*a,n),u=0;u<2*a;u++)r[u]=null,i[u]=null;return l},a(l,s.BasePoint),c.prototype.point=function(e,t,n){return new l(this,e,t,n)},c.prototype.pointFromJSON=function(e,t){return l.fromJSON(this,e,t)},l.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,r=function(e){return n.point(e.x.redMul(n.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(e,t,n){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],n);if(!t[2])return r;function i(t){return e.point(t[0],t[1],n)}var a=t[2];return r.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[r].concat(a.doubles.points.map(i))},naf:a.naf&&{wnd:a.naf.wnd,points:[r].concat(a.naf.points.map(i))}},r},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},l.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),r=e.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(r),a=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,s)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(e){return e=new i(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},l.prototype.jmulAdd=function(e,t,n){var r=[this,t],i=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},l.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},l.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return t},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},a(u,s.BasePoint),c.prototype.jpoint=function(e,t,n){return new u(this,e,t,n)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(n,r)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(t),i=e.x.redMul(n),a=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(n.redMul(this.z)),o=r.redSub(i),c=a.redSub(s);if(0===o.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=o.redSqr(),u=l.redMul(o),d=r.redMul(l),h=c.redSqr().redIAdd(u).redISub(d).redISub(d),p=c.redMul(d.redISub(h)).redISub(a.redMul(u)),f=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(h,p,f)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,r=e.x.redMul(t),i=this.y,a=e.y.redMul(t).redMul(this.z),s=n.redSub(r),o=i.redSub(a);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),u=n.redMul(c),d=o.redSqr().redIAdd(l).redISub(u).redISub(u),h=o.redMul(u.redISub(d)).redISub(i.redMul(l)),p=this.z.redMul(s);return this.curve.jpoint(d,h,p)},u.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var r=this.curve.a,i=this.curve.tinv,a=this.x,s=this.y,o=this.z,c=o.redSqr().redSqr(),l=s.redAdd(s);for(t=0;t<e;t++){var u=a.redSqr(),d=l.redSqr(),h=d.redSqr(),p=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(c)),f=a.redMul(d),m=p.redSqr().redISub(f.redAdd(f)),y=f.redISub(m),g=p.redMul(y);g=g.redIAdd(g).redISub(h);var b=l.redMul(o);t+1<e&&(c=c.redMul(h)),a=m,o=b,l=g}return this.curve.jpoint(a,l.redMul(i),o)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(r).redISub(a);s=s.redIAdd(s);var o=r.redAdd(r).redIAdd(r),c=o.redSqr().redISub(s).redISub(s),l=a.redIAdd(a);l=(l=l.redIAdd(l)).redIAdd(l),e=c,t=o.redMul(s.redISub(c)).redISub(l),n=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),p=this.x.redAdd(d).redSqr().redISub(u).redISub(h);p=p.redIAdd(p);var f=u.redAdd(u).redIAdd(u),m=f.redSqr(),y=h.redIAdd(h);y=(y=y.redIAdd(y)).redIAdd(y),e=m.redISub(p).redISub(p),t=f.redMul(p.redISub(e)).redISub(y),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(e,t,n)},u.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(r).redISub(a);s=s.redIAdd(s);var o=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),c=o.redSqr().redISub(s).redISub(s);e=c;var l=a.redIAdd(a);l=(l=l.redIAdd(l)).redIAdd(l),t=o.redMul(s.redISub(c)).redISub(l),n=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),p=this.x.redSub(u).redMul(this.x.redAdd(u));p=p.redAdd(p).redIAdd(p);var f=h.redIAdd(h),m=(f=f.redIAdd(f)).redAdd(f);e=p.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var y=d.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),t=p.redMul(f.redISub(e)).redISub(y)}return this.curve.jpoint(e,t,n)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),a=t.redSqr(),s=n.redSqr(),o=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(i)),c=t.redAdd(t),l=(c=c.redIAdd(c)).redMul(s),u=o.redSqr().redISub(l.redAdd(l)),d=l.redISub(u),h=s.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=o.redMul(d).redISub(h),f=n.redAdd(n).redMul(r);return this.curve.jpoint(u,p,f)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),r=t.redSqr(),i=e.redAdd(e).redIAdd(e),a=i.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(r),o=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(a)).redSqr(),c=r.redIAdd(r);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var l=i.redIAdd(s).redSqr().redISub(a).redISub(o).redISub(c),u=t.redMul(l);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(o).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(l.redMul(c.redISub(l)).redISub(s.redMul(o)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=this.z.redAdd(s).redSqr().redISub(n).redISub(o);return this.curve.jpoint(d,h,p)},u.prototype.mul=function(e,t){return e=new i(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(0!==this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),i=n.redMul(e.z);return 0===this.y.redMul(i).redISub(e.y.redMul(r)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(n))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},86443:(e,t,n)=>{"use strict";var r,i=t,a=n(99499),s=n(7131),o=n(41874).assert;function c(e){"short"===e.type?this.curve=new s.short(e):"edwards"===e.type?this.curve=new s.edwards(e):this.curve=new s.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var n=new c(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=c,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=n(83986)}catch(e){r=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},15064:(e,t,n)=>{"use strict";var r=n(82823),i=n(84742),a=n(41874),s=n(86443),o=n(47048),c=a.assert,l=n(47531),u=n(57782);function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(c(Object.prototype.hasOwnProperty.call(s,e),"Unknown curve "+e),e=s[e]),e instanceof s.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new l(this,e)},d.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new i({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||o(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),a=this.n.sub(new r(2));;){var s=new r(t.generate(n));if(!(s.cmp(a)>0))return s.iaddn(1),this.keyFromPrivate(s)}},d.prototype._truncateToN=function(e,t,n){var i;if(r.isBN(e)||"number"==typeof e)i=(e=new r(e,16)).byteLength();else if("object"==typeof e)i=e.length,e=new r(e,16);else{var a=e.toString();i=a.length+1>>>1,e=new r(a,16)}"number"!=typeof n&&(n=8*i);var s=n-this.n.bitLength();return s>0&&(e=e.ushrn(s)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,n,a){if("object"==typeof n&&(a=n,n=null),a||(a={}),"string"!=typeof e&&"number"!=typeof e&&!r.isBN(e)){c("object"==typeof e&&e&&"number"==typeof e.length,"Expected message to be an array-like, a hex string, or a BN instance"),c(e.length>>>0===e.length);for(var s=0;s<e.length;s++)c((255&e[s])===e[s])}t=this.keyFromPrivate(t,n),e=this._truncateToN(e,!1,a.msgBitLength),c(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),l=t.getPrivate().toArray("be",o),d=e.toArray("be",o);c(new r(d).eq(e),"Can not sign message");for(var h=new i({hash:this.hash,entropy:l,nonce:d,pers:a.pers,persEnc:a.persEnc||"utf8"}),p=this.n.sub(new r(1)),f=0;;f++){var m=a.k?a.k(f):new r(h.generate(this.n.byteLength()));if(!((m=this._truncateToN(m,!0)).cmpn(1)<=0||m.cmp(p)>=0)){var y=this.g.mul(m);if(!y.isInfinity()){var g=y.getX(),b=g.umod(this.n);if(0!==b.cmpn(0)){var v=m.invm(this.n).mul(b.mul(t.getPrivate()).iadd(e));if(0!==(v=v.umod(this.n)).cmpn(0)){var w=(y.getY().isOdd()?1:0)|(0!==g.cmp(b)?2:0);return a.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),w^=1),new u({r:b,s:v,recoveryParam:w})}}}}}},d.prototype.verify=function(e,t,n,r,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),n=this.keyFromPublic(n,r);var a=(t=new u(t,"hex")).r,s=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,c=s.invm(this.n),l=c.mul(e).umod(this.n),d=c.mul(a).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(l,n.getPublic(),d)).isInfinity()&&o.eqXToP(a):!(o=this.g.mulAdd(l,n.getPublic(),d)).isInfinity()&&0===o.getX().umod(this.n).cmp(a)},d.prototype.recoverPubKey=function(e,t,n,i){c((3&n)===n,"The recovery param is more than two bits"),t=new u(t,i);var a=this.n,s=new r(e),o=t.r,l=t.s,d=1&n,h=n>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");o=h?this.curve.pointFromX(o.add(this.curve.n),d):this.curve.pointFromX(o,d);var p=t.r.invm(a),f=a.sub(s).mul(p).umod(a),m=l.mul(p).umod(a);return this.g.mulAdd(f,o,m)},d.prototype.getKeyRecoveryParam=function(e,t,n,r){if(null!==(t=new u(t,r)).recoveryParam)return t.recoveryParam;for(var i=0;i<4;i++){var a;try{a=this.recoverPubKey(e,t,i)}catch(e){continue}if(a.eq(n))return i}throw new Error("Unable to find valid recovery factor")}},47531:(e,t,n)=>{"use strict";var r=n(82823),i=n(41874).assert;function a(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=a,a.fromPublic=function(e,t,n){return t instanceof a?t:new a(e,{pub:t,pubEnc:n})},a.fromPrivate=function(e,t,n){return t instanceof a?t:new a(e,{priv:t,privEnc:n})},a.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},a.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?i(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},a.prototype.derive=function(e){return e.validate()||i(e.validate(),"public point not validated"),e.mul(this.priv).getX()},a.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)},a.prototype.verify=function(e,t,n){return this.ec.verify(e,t,this,void 0,n)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},57782:(e,t,n)=>{"use strict";var r=n(82823),i=n(41874),a=i.assert;function s(e,t){if(e instanceof s)return e;this._importDER(e,t)||(a(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function o(){this.place=0}function c(e,t){var n=e[t.place++];if(!(128&n))return n;var r=15&n;if(0===r||r>4)return!1;if(0===e[t.place])return!1;for(var i=0,a=0,s=t.place;a<r;a++,s++)i<<=8,i|=e[s],i>>>=0;return!(i<=127)&&(t.place=s,i)}function l(e){for(var t=0,n=e.length-1;!e[t]&&!(128&e[t+1])&&t<n;)t++;return 0===t?e:e.slice(t)}function u(e,t){if(t<128)e.push(t);else{var n=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|n);--n;)e.push(t>>>(n<<3)&255);e.push(t)}}e.exports=s,s.prototype._importDER=function(e,t){e=i.toArray(e,t);var n=new o;if(48!==e[n.place++])return!1;var a=c(e,n);if(!1===a)return!1;if(a+n.place!==e.length)return!1;if(2!==e[n.place++])return!1;var s=c(e,n);if(!1===s)return!1;if(0!=(128&e[n.place]))return!1;var l=e.slice(n.place,s+n.place);if(n.place+=s,2!==e[n.place++])return!1;var u=c(e,n);if(!1===u)return!1;if(e.length!==u+n.place)return!1;if(0!=(128&e[n.place]))return!1;var d=e.slice(n.place,u+n.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new r(l),this.s=new r(d),this.recoveryParam=null,!0},s.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n)),t=l(t),n=l(n);!(n[0]||128&n[1]);)n=n.slice(1);var r=[2];u(r,t.length),(r=r.concat(t)).push(2),u(r,n.length);var a=r.concat(n),s=[48];return u(s,a.length),s=s.concat(a),i.encode(s,e)}},84807:(e,t,n)=>{"use strict";var r=n(99499),i=n(86443),a=n(41874),s=a.assert,o=a.parseBytes,c=n(54672),l=n(18401);function u(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);e=i[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}e.exports=u,u.prototype.sign=function(e,t){e=o(e);var n=this.keyFromSecret(t),r=this.hashInt(n.messagePrefix(),e),i=this.g.mul(r),a=this.encodePoint(i),s=this.hashInt(a,n.pubBytes(),e).mul(n.priv()),c=r.add(s).umod(this.curve.n);return this.makeSignature({R:i,S:c,Rencoded:a})},u.prototype.verify=function(e,t,n){if(e=o(e),(t=this.makeSignature(t)).S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var r=this.keyFromPublic(n),i=this.hashInt(t.Rencoded(),r.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(r.pub().mul(i)).eq(a)},u.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return a.intFromLE(e.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=a.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),i=a.intFromLE(n);return this.curve.pointFromY(i,r)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return a.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},54672:(e,t,n)=>{"use strict";var r=n(41874),i=r.assert,a=r.parseBytes,s=r.cachedProperty;function o(e,t){this.eddsa=e,this._secret=a(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=a(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},s(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r})),s(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return i(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},o.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},e.exports=o},18401:(e,t,n)=>{"use strict";var r=n(82823),i=n(41874),a=i.assert,s=i.cachedProperty,o=i.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=o(t)),Array.isArray(t)&&(a(t.length===2*e.encodingLength,"Signature has invalid size"),t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},83986:e=>{e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},41874:(e,t,n)=>{"use strict";var r=t,i=n(82823),a=n(7784),s=n(89042);r.assert=a,r.toArray=s.toArray,r.zero2=s.zero2,r.toHex=s.toHex,r.encode=s.encode,r.getNAF=function(e,t,n){var r,i=new Array(Math.max(e.bitLength(),n)+1);for(r=0;r<i.length;r+=1)i[r]=0;var a=1<<t+1,s=e.clone();for(r=0;r<i.length;r++){var o,c=s.andln(a-1);s.isOdd()?(o=c>(a>>1)-1?(a>>1)-c:c,s.isubn(o)):o=0,i[r]=o,s.iushrn(1)}return i},r.getJSF=function(e,t){var n=[[],[]];e=e.clone(),t=t.clone();for(var r,i=0,a=0;e.cmpn(-i)>0||t.cmpn(-a)>0;){var s,o,c=e.andln(3)+i&3,l=t.andln(3)+a&3;3===c&&(c=-1),3===l&&(l=-1),s=0==(1&c)?0:3!==(r=e.andln(7)+i&7)&&5!==r||2!==l?c:-c,n[0].push(s),o=0==(1&l)?0:3!==(r=t.andln(7)+a&7)&&5!==r||2!==c?l:-l,n[1].push(o),2*i===s+1&&(i=1-i),2*a===o+1&&(a=1-a),e.iushrn(1),t.iushrn(1)}return n},r.cachedProperty=function(e,t,n){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new i(e,"hex","le")}},95859:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseBlockTracker=void 0;const i=r(n(39851)),a=(e,t)=>e+t,s=["sync","latest"];class o extends i.default{constructor(e){super(),this._blockResetDuration=e.blockResetDuration||2e4,this._usePastBlocks=e.usePastBlocks||!1,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}async destroy(){this._cancelBlockResetTimeout(),await this._maybeEnd(),super.removeAllListeners()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){if(this._currentBlock)return this._currentBlock;return await new Promise((e=>this.once("latest",e)))}removeAllListeners(e){return e?super.removeAllListeners(e):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener(),this}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(e){s.includes(e)&&this._maybeStart()}_onRemoveListener(){this._getBlockTrackerEventCount()>0||this._maybeEnd()}async _maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),await this._start(),this.emit("_started"))}async _maybeEnd(){this._isRunning&&(this._isRunning=!1,this._setupBlockResetTimeout(),await this._end(),this.emit("_ended"))}_getBlockTrackerEventCount(){return s.map((e=>this.listenerCount(e))).reduce(a)}_shouldUseNewBlock(e){const t=this._currentBlock;if(!t)return!0;const n=c(e),r=c(t);return this._usePastBlocks&&n<r||n>r}_newPotentialLatest(e){this._shouldUseNewBlock(e)&&this._setCurrentBlock(e)}_setCurrentBlock(e){const t=this._currentBlock;this._currentBlock=e,this.emit("latest",e),this.emit("sync",{oldBlock:t,newBlock:e})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){this._blockResetTimeout&&clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}function c(e){return Number.parseInt(e,16)}t.BaseBlockTracker=o},56877:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PollingBlockTracker=void 0;const i=r(n(56512)),a=r(n(90386)),s=n(95859),o=n(17492),c=(0,o.createModuleLogger)(o.projectLogger,"polling-block-tracker"),l=(0,i.default)();class u extends s.BaseBlockTracker{constructor(e={}){var t;if(!e.provider)throw new Error("PollingBlockTracker - no provider specified.");super(Object.assign(Object.assign({},e),{blockResetDuration:null!==(t=e.blockResetDuration)&&void 0!==t?t:e.pollingInterval})),this._provider=e.provider,this._pollingInterval=e.pollingInterval||2e4,this._retryTimeout=e.retryTimeout||this._pollingInterval/10,this._keepEventLoopActive=void 0===e.keepEventLoopActive||e.keepEventLoopActive,this._setSkipCacheFlag=e.setSkipCacheFlag||!1}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}async _start(){this._synchronize()}async _end(){}async _synchronize(){for(var e;this._isRunning;)try{await this._updateLatestBlock();const e=d(this._pollingInterval,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await e}catch(t){const n=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:\n${null!==(e=t.stack)&&void 0!==e?e:t}`);try{this.emit("error",n)}catch(e){console.error(n)}const r=d(this._retryTimeout,!this._keepEventLoopActive);this.emit("_waitingForNextIteration"),await r}}async _updateLatestBlock(){const e=await this._fetchLatestBlock();this._newPotentialLatest(e)}async _fetchLatestBlock(){const e={jsonrpc:"2.0",id:l(),method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(e.skipCache=!0),c("Making request",e);const t=await(0,a.default)((t=>this._provider.sendAsync(e,t)))();if(c("Got response",t),t.error)throw new Error(`PollingBlockTracker - encountered error fetching block:\n${t.error.message}`);return t.result}}function d(e,t){return new Promise((n=>{const r=setTimeout(n,e);r.unref&&t&&r.unref()}))}t.PollingBlockTracker=u},32062:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SubscribeBlockTracker=void 0;const i=r(n(56512)),a=n(95859),s=(0,i.default)();class o extends a.BaseBlockTracker{constructor(e={}){if(!e.provider)throw new Error("SubscribeBlockTracker - no provider specified.");super(e),this._provider=e.provider,this._subscriptionId=null}async checkForLatestBlock(){return await this.getLatestBlock()}async _start(){if(void 0===this._subscriptionId||null===this._subscriptionId)try{const e=await this._call("eth_blockNumber");this._subscriptionId=await this._call("eth_subscribe","newHeads"),this._provider.on("data",this._handleSubData.bind(this)),this._newPotentialLatest(e)}catch(e){this.emit("error",e)}}async _end(){if(null!==this._subscriptionId&&void 0!==this._subscriptionId)try{await this._call("eth_unsubscribe",this._subscriptionId),this._subscriptionId=null}catch(e){this.emit("error",e)}}_call(e,...t){return new Promise(((n,r)=>{this._provider.sendAsync({id:s(),method:e,params:t,jsonrpc:"2.0"},((e,t)=>{e?r(e):n(t.result)}))}))}_handleSubData(e,t){var n;"eth_subscription"===t.method&&(null===(n=t.params)||void 0===n?void 0:n.subscription)===this._subscriptionId&&this._newPotentialLatest(t.params.result.number)}}t.SubscribeBlockTracker=o},94745:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(56877),t),i(n(32062),t)},17492:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createModuleLogger=t.projectLogger=void 0;const r=n(74804);Object.defineProperty(t,"createModuleLogger",{enumerable:!0,get:function(){return r.createModuleLogger}}),t.projectLogger=(0,r.createProjectLogger)("eth-block-tracker")},39851:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(50046);function i(e,t,n){try{Reflect.apply(e,t,n)}catch(e){setTimeout((()=>{throw e}))}}class a extends r.EventEmitter{emit(e,...t){let n="error"===e;const r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const n=new Error("Unhandled error."+(e?` (${e.message})`:""));throw n.context=e,n}const a=r[e];if(void 0===a)return!1;if("function"==typeof a)i(a,this,t);else{const e=a.length,n=function(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}(a);for(let r=0;r<e;r+=1)i(n[r],this,t)}return!0}}t.default=a},39268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertExhaustive=t.assertStruct=t.assert=t.AssertionError=void 0;const r=n(83299);function i(e,t){return n=e,Boolean("string"==typeof(null===(i=null===(r=null==n?void 0:n.prototype)||void 0===r?void 0:r.constructor)||void 0===i?void 0:i.name))?new e({message:t}):e({message:t});var n,r,i}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}t.AssertionError=a,t.assert=function(e,t="Assertion failed.",n=a){if(!e){if(t instanceof Error)throw t;throw i(n,t)}},t.assertStruct=function(e,t,n="Assertion failed",s=a){try{(0,r.assert)(e,t)}catch(e){throw i(s,`${n}: ${function(e){const t=function(e){return"object"==typeof e&&null!==e&&"message"in e}(e)?e.message:String(e);return t.endsWith(".")?t.slice(0,-1):t}(e)}.`)}},t.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}},69105:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.base64=void 0;const r=n(83299),i=n(39268);t.base64=(e,t={})=>{var n,a;const s=null!==(n=t.paddingRequired)&&void 0!==n&&n,o=null!==(a=t.characterSet)&&void 0!==a?a:"base64";let c,l;return"base64"===o?c=String.raw`[A-Za-z0-9+\/]`:((0,i.assert)("base64url"===o),c=String.raw`[-_A-Za-z0-9]`),l=s?new RegExp(`^(?:${c}{4})*(?:${c}{3}=|${c}{2}==)?$`,"u"):new RegExp(`^(?:${c}{4})*(?:${c}{2,3}|${c}{3}=|${c}{2}==)?$`,"u"),(0,r.pattern)(e,l)}},19455:(e,t,n)=>{"use strict";var r=n(1048).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createDataView=t.concatBytes=t.valueToBytes=t.stringToBytes=t.numberToBytes=t.signedBigIntToBytes=t.bigIntToBytes=t.hexToBytes=t.bytesToString=t.bytesToNumber=t.bytesToSignedBigInt=t.bytesToBigInt=t.bytesToHex=t.assertIsBytes=t.isBytes=void 0;const i=n(39268),a=n(87185),s=48,o=58,c=87;const l=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function u(e){return e instanceof Uint8Array}function d(e){(0,i.assert)(u(e),"Value must be a Uint8Array.")}function h(e){if(d(e),0===e.length)return"0x";const t=l(),n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return(0,a.add0x)(n.join(""))}function p(e){d(e);const t=h(e);return BigInt(t)}function f(e){var t;if("0x"===(null===(t=null==e?void 0:e.toLowerCase)||void 0===t?void 0:t.call(e)))return new Uint8Array;(0,a.assertIsHexString)(e);const n=(0,a.remove0x)(e).toLowerCase(),r=n.length%2==0?n:`0${n}`,i=new Uint8Array(r.length/2);for(let e=0;e<i.length;e++){const t=r.charCodeAt(2*e),n=r.charCodeAt(2*e+1),a=t-(t<o?s:c),l=n-(n<o?s:c);i[e]=16*a+l}return i}function m(e){(0,i.assert)("bigint"==typeof e,"Value must be a bigint."),(0,i.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return f(e.toString(16))}function y(e){(0,i.assert)("number"==typeof e,"Value must be a number."),(0,i.assert)(e>=0,"Value must be a non-negative number."),(0,i.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return f(e.toString(16))}function g(e){return(0,i.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function b(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return y(e);if("string"==typeof e)return e.startsWith("0x")?f(e):g(e);if(u(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}t.isBytes=u,t.assertIsBytes=d,t.bytesToHex=h,t.bytesToBigInt=p,t.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const n of e)t=(t<<BigInt(8))+BigInt(n);return BigInt.asIntN(8*e.length,t)},t.bytesToNumber=function(e){d(e);const t=p(e);return(0,i.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},t.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},t.hexToBytes=f,t.bigIntToBytes=m,t.signedBigIntToBytes=function(e,t){(0,i.assert)("bigint"==typeof e,"Value must be a bigint."),(0,i.assert)("number"==typeof t,"Byte length must be a number."),(0,i.assert)(t>0,"Byte length must be greater than 0."),(0,i.assert)(function(e,t){(0,i.assert)(t>0);const n=e>>BigInt(31);return!((~e&n)+(e&~n)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let n=e;const r=new Uint8Array(t);for(let e=0;e<r.length;e++)r[e]=Number(BigInt.asUintN(8,n)),n>>=BigInt(8);return r.reverse()},t.numberToBytes=y,t.stringToBytes=g,t.valueToBytes=b,t.concatBytes=function(e){const t=new Array(e.length);let n=0;for(let r=0;r<e.length;r++){const i=b(e[r]);t[r]=i,n+=i.length}const r=new Uint8Array(n);for(let e=0,n=0;e<t.length;e++)r.set(t[e],n),n+=t[e].length;return r},t.createDataView=function(e){if(void 0!==r&&e instanceof r){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}},77721:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChecksumStruct=void 0;const r=n(83299),i=n(69105);t.ChecksumStruct=(0,r.size)((0,i.base64)((0,r.string)(),{paddingRequired:!0}),44,44)},72216:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createHex=t.createBytes=t.createBigInt=t.createNumber=void 0;const r=n(83299),i=n(39268),a=n(19455),s=n(87185),o=(0,r.union)([(0,r.number)(),(0,r.bigint)(),(0,r.string)(),s.StrictHexStruct]),c=(0,r.coerce)((0,r.number)(),o,Number),l=(0,r.coerce)((0,r.bigint)(),o,BigInt),u=((0,r.union)([s.StrictHexStruct,(0,r.instance)(Uint8Array)]),(0,r.coerce)((0,r.instance)(Uint8Array),(0,r.union)([s.StrictHexStruct]),a.hexToBytes)),d=(0,r.coerce)(s.StrictHexStruct,(0,r.instance)(Uint8Array),a.bytesToHex);t.createNumber=function(e){try{const t=(0,r.create)(e,c);return(0,i.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof r.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},t.createBigInt=function(e){try{return(0,r.create)(e,l)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},t.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,r.create)(e,u)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},t.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,r.create)(e,d)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}},50389:function(e,t){"use strict";var n,r,i=this&&this.__classPrivateFieldSet||function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},a=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.FrozenSet=t.FrozenMap=void 0;class s{constructor(e){n.set(this,void 0),i(this,n,new Map(e),"f"),Object.freeze(this)}get size(){return a(this,n,"f").size}[(n=new WeakMap,Symbol.iterator)](){return a(this,n,"f")[Symbol.iterator]()}entries(){return a(this,n,"f").entries()}forEach(e,t){return a(this,n,"f").forEach(((n,r,i)=>e.call(t,n,r,this)))}get(e){return a(this,n,"f").get(e)}has(e){return a(this,n,"f").has(e)}keys(){return a(this,n,"f").keys()}values(){return a(this,n,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}t.FrozenMap=s;class o{constructor(e){r.set(this,void 0),i(this,r,new Set(e),"f"),Object.freeze(this)}get size(){return a(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return a(this,r,"f")[Symbol.iterator]()}entries(){return a(this,r,"f").entries()}forEach(e,t){return a(this,r,"f").forEach(((n,r,i)=>e.call(t,n,r,this)))}has(e){return a(this,r,"f").has(e)}keys(){return a(this,r,"f").keys()}values(){return a(this,r,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}t.FrozenSet=o,Object.freeze(s),Object.freeze(s.prototype),Object.freeze(o),Object.freeze(o.prototype)},61483:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},87185:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remove0x=t.add0x=t.assertIsStrictHexString=t.assertIsHexString=t.isStrictHexString=t.isHexString=t.StrictHexStruct=t.HexStruct=void 0;const r=n(83299),i=n(39268);function a(e){return(0,r.is)(e,t.HexStruct)}function s(e){return(0,r.is)(e,t.StrictHexStruct)}t.HexStruct=(0,r.pattern)((0,r.string)(),/^(?:0x)?[0-9a-f]+$/iu),t.StrictHexStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-f]+$/iu),t.isHexString=a,t.isStrictHexString=s,t.assertIsHexString=function(e){(0,i.assert)(a(e),"Value must be a hexadecimal string.")},t.assertIsStrictHexString=function(e){(0,i.assert)(s(e),'Value must be a hexadecimal string, starting with "0x".')},t.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},t.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}},74804:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(39268),t),i(n(69105),t),i(n(19455),t),i(n(77721),t),i(n(72216),t),i(n(50389),t),i(n(61483),t),i(n(87185),t),i(n(15516),t),i(n(97653),t),i(n(33037),t),i(n(598),t),i(n(12387),t),i(n(18605),t),i(n(63263),t),i(n(17012),t),i(n(58999),t)},15516:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJsonRpcIdValidator=t.assertIsJsonRpcError=t.isJsonRpcError=t.assertIsJsonRpcFailure=t.isJsonRpcFailure=t.assertIsJsonRpcSuccess=t.isJsonRpcSuccess=t.assertIsJsonRpcResponse=t.isJsonRpcResponse=t.assertIsPendingJsonRpcResponse=t.isPendingJsonRpcResponse=t.JsonRpcResponseStruct=t.JsonRpcFailureStruct=t.JsonRpcSuccessStruct=t.PendingJsonRpcResponseStruct=t.assertIsJsonRpcRequest=t.isJsonRpcRequest=t.assertIsJsonRpcNotification=t.isJsonRpcNotification=t.JsonRpcNotificationStruct=t.JsonRpcRequestStruct=t.JsonRpcParamsStruct=t.JsonRpcErrorStruct=t.JsonRpcIdStruct=t.JsonRpcVersionStruct=t.jsonrpc2=t.getJsonSize=t.isValidJson=t.JsonStruct=t.UnsafeJsonStruct=void 0;const r=n(83299),i=n(39268);t.UnsafeJsonStruct=(0,r.union)([(0,r.literal)(null),(0,r.boolean)(),(0,r.define)("finite number",(e=>(0,r.is)(e,(0,r.number)())&&Number.isFinite(e))),(0,r.string)(),(0,r.array)((0,r.lazy)((()=>t.UnsafeJsonStruct))),(0,r.record)((0,r.string)(),(0,r.lazy)((()=>t.UnsafeJsonStruct)))]),t.JsonStruct=(0,r.define)("Json",((e,n)=>{function r(e,t){const r=[...t.validator(e,n)];return!(r.length>0)||r}try{const n=r(e,t.UnsafeJsonStruct);return!0!==n?n:r(JSON.parse(JSON.stringify(e)),t.UnsafeJsonStruct)}catch(e){return e instanceof RangeError&&"Circular reference detected"}})),t.isValidJson=function(e){return(0,r.is)(e,t.JsonStruct)},t.getJsonSize=function(e){(0,i.assertStruct)(e,t.JsonStruct,"Invalid JSON value");const n=JSON.stringify(e);return(new TextEncoder).encode(n).byteLength},t.jsonrpc2="2.0",t.JsonRpcVersionStruct=(0,r.literal)(t.jsonrpc2),t.JsonRpcIdStruct=(0,r.nullable)((0,r.union)([(0,r.number)(),(0,r.string)()])),t.JsonRpcErrorStruct=(0,r.object)({code:(0,r.integer)(),message:(0,r.string)(),data:(0,r.optional)(t.JsonStruct),stack:(0,r.optional)((0,r.string)())}),t.JsonRpcParamsStruct=(0,r.optional)((0,r.union)([(0,r.record)((0,r.string)(),t.JsonStruct),(0,r.array)(t.JsonStruct)])),t.JsonRpcRequestStruct=(0,r.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,method:(0,r.string)(),params:t.JsonRpcParamsStruct}),t.JsonRpcNotificationStruct=(0,r.omit)(t.JsonRpcRequestStruct,["id"]),t.isJsonRpcNotification=function(e){return(0,r.is)(e,t.JsonRpcNotificationStruct)},t.assertIsJsonRpcNotification=function(e,n){(0,i.assertStruct)(e,t.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",n)},t.isJsonRpcRequest=function(e){return(0,r.is)(e,t.JsonRpcRequestStruct)},t.assertIsJsonRpcRequest=function(e,n){(0,i.assertStruct)(e,t.JsonRpcRequestStruct,"Invalid JSON-RPC request",n)},t.PendingJsonRpcResponseStruct=(0,r.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:(0,r.optional)((0,r.unknown)()),error:(0,r.optional)(t.JsonRpcErrorStruct)}),t.JsonRpcSuccessStruct=(0,r.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,result:t.JsonStruct}),t.JsonRpcFailureStruct=(0,r.object)({id:t.JsonRpcIdStruct,jsonrpc:t.JsonRpcVersionStruct,error:t.JsonRpcErrorStruct}),t.JsonRpcResponseStruct=(0,r.union)([t.JsonRpcSuccessStruct,t.JsonRpcFailureStruct]),t.isPendingJsonRpcResponse=function(e){return(0,r.is)(e,t.PendingJsonRpcResponseStruct)},t.assertIsPendingJsonRpcResponse=function(e,n){(0,i.assertStruct)(e,t.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",n)},t.isJsonRpcResponse=function(e){return(0,r.is)(e,t.JsonRpcResponseStruct)},t.assertIsJsonRpcResponse=function(e,n){(0,i.assertStruct)(e,t.JsonRpcResponseStruct,"Invalid JSON-RPC response",n)},t.isJsonRpcSuccess=function(e){return(0,r.is)(e,t.JsonRpcSuccessStruct)},t.assertIsJsonRpcSuccess=function(e,n){(0,i.assertStruct)(e,t.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",n)},t.isJsonRpcFailure=function(e){return(0,r.is)(e,t.JsonRpcFailureStruct)},t.assertIsJsonRpcFailure=function(e,n){(0,i.assertStruct)(e,t.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",n)},t.isJsonRpcError=function(e){return(0,r.is)(e,t.JsonRpcErrorStruct)},t.assertIsJsonRpcError=function(e,n){(0,i.assertStruct)(e,t.JsonRpcErrorStruct,"Invalid JSON-RPC error",n)},t.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:n,permitNull:r}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},e);return e=>Boolean("number"==typeof e&&(n||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||r&&null===e)}},97653:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},33037:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createModuleLogger=t.createProjectLogger=void 0;const i=(0,r(n(20124)).default)("metamask");t.createProjectLogger=function(e){return i.extend(e)},t.createModuleLogger=function(e,t){return e.extend(t)}},598:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateNumberSize=t.calculateStringSize=t.isASCII=t.isPlainObject=t.ESCAPE_CHARACTERS_REGEXP=t.JsonSize=t.hasProperty=t.isObject=t.isNullOrUndefined=t.isNonEmptyArray=void 0,t.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},t.isNullOrUndefined=function(e){return null==e},t.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function n(e){return e.charCodeAt(0)<=127}t.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(t.JsonSize||(t.JsonSize={})),t.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,t.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},t.isASCII=n,t.calculateStringSize=function(e){var r;return e.split("").reduce(((e,t)=>n(t)?e+1:e+2),0)+(null!==(r=e.match(t.ESCAPE_CHARACTERS_REGEXP))&&void 0!==r?r:[]).length},t.calculateNumberSize=function(e){return e.toString().length}},12387:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hexToBigInt=t.hexToNumber=t.bigIntToHex=t.numberToHex=void 0;const r=n(39268),i=n(87185);t.numberToHex=e=>((0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,i.add0x)(e.toString(16)));t.bigIntToHex=e=>((0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=0,"Value must be a non-negative bigint."),(0,i.add0x)(e.toString(16)));t.hexToNumber=e=>{(0,i.assertIsHexString)(e);const t=parseInt(e,16);return(0,r.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};t.hexToBigInt=e=>((0,i.assertIsHexString)(e),BigInt((0,i.add0x)(e)))},18605:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},63263:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeSince=t.inMilliseconds=t.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(t.Duration||(t.Duration={}));const n=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};t.inMilliseconds=function(e,t){return n(e,"count"),e*t},t.timeSince=function(e){return n(e,"timestamp"),Date.now()-e}},17012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},58999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.satisfiesVersionRange=t.gtRange=t.gtVersion=t.assertIsSemVerRange=t.assertIsSemVerVersion=t.isValidSemVerRange=t.isValidSemVerVersion=t.VersionRangeStruct=t.VersionStruct=void 0;const r=n(2722),i=n(83299),a=n(39268);t.VersionStruct=(0,i.refine)((0,i.string)(),"Version",(e=>null!==(0,r.valid)(e)||`Expected SemVer version, got "${e}"`)),t.VersionRangeStruct=(0,i.refine)((0,i.string)(),"Version range",(e=>null!==(0,r.validRange)(e)||`Expected SemVer range, got "${e}"`)),t.isValidSemVerVersion=function(e){return(0,i.is)(e,t.VersionStruct)},t.isValidSemVerRange=function(e){return(0,i.is)(e,t.VersionRangeStruct)},t.assertIsSemVerVersion=function(e){(0,a.assertStruct)(e,t.VersionStruct)},t.assertIsSemVerRange=function(e){(0,a.assertStruct)(e,t.VersionRangeStruct)},t.gtVersion=function(e,t){return(0,r.gt)(e,t)},t.gtRange=function(e,t){return(0,r.gtr)(e,t)},t.satisfiesVersionRange=function(e,t){return(0,r.satisfies)(e,t,{includePrerelease:!0})}},90386:e=>{"use strict";const t=(e,t)=>function(){const n=t.promiseModule,r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];return new n(((n,i)=>{t.errorFirst?r.push((function(e,r){if(t.multiArgs){const t=new Array(arguments.length-1);for(let e=1;e<arguments.length;e++)t[e-1]=arguments[e];e?(t.unshift(e),i(t)):n(t)}else e?i(e):n(r)})):r.push((function(e){if(t.multiArgs){const e=new Array(arguments.length-1);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];n(e)}else n(e)})),e.apply(this,r)}))};e.exports=(e,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=e=>{const t=t=>"string"==typeof t?e===t:t.test(e);return n.include?n.include.some(t):!n.exclude.some(t)};let i;i="function"==typeof e?function(){return n.excludeMain?e.apply(this,arguments):t(e,n).apply(this,arguments)}:Object.create(Object.getPrototypeOf(e));for(const a in e){const s=e[a];i[a]="function"==typeof s&&r(a)?t(s,n):s}return i}},45233:(e,t,n)=>{const r=n(53116);e.exports=class extends r{constructor(){super(),this.allResults=[]}async update(){throw new Error("BaseFilterWithHistory - no update method specified")}addResults(e){this.allResults=this.allResults.concat(e),super.addResults(e)}addInitialResults(e){this.allResults=this.allResults.concat(e),super.addInitialResults(e)}getAllResults(){return this.allResults}}},53116:(e,t,n)=>{const r=n(9945).A;e.exports=class extends r{constructor(){super(),this.updates=[]}async initialize(){}async update(){throw new Error("BaseFilter - no update method specified")}addResults(e){this.updates=this.updates.concat(e),e.forEach((e=>this.emit("update",e)))}addInitialResults(e){}getChangesAndClear(){const e=this.updates;return this.updates=[],e}}},12522:(e,t,n)=>{const r=n(53116),i=n(1308),{incrementHexInt:a}=n(30446);e.exports=class extends r{constructor({provider:e,params:t}){super(),this.type="block",this.provider=e}async update({oldBlock:e,newBlock:t}){const n=t,r=a(e),s=(await i({provider:this.provider,fromBlock:r,toBlock:n})).map((e=>e.hash));this.addResults(s)}}},1308:e=>{function t(e){return null==e?e:Number.parseInt(e,16)}function n(e){if(null==e)return e;return"0x"+e.toString(16)}function r(e,t){return new Promise(((n,r)=>{e.sendAsync(t,((e,t)=>{e?r(e):t.error?r(t.error):t.result?n(t.result):r(new Error("Result was empty"))}))}))}e.exports=async function({provider:e,fromBlock:i,toBlock:a}){i||(i=a);const s=t(i),o=t(a),c=Array(o-s+1).fill().map(((e,t)=>s+t)).map(n);let l=await Promise.all(c.map((t=>async function(e,t,n){for(let i=0;i<3;i++)try{return await r(e,{id:1,jsonrpc:"2.0",method:t,params:n})}catch(e){console.error(`provider.sendAsync failed: ${e.stack||e.message||e}`)}return null}(e,"eth_getBlockByNumber",[t,!1]))));return l=l.filter((e=>null!==e)),l}},30446:e=>{function t(e){return e.sort(((e,t)=>"latest"===e||"earliest"===t?1:"latest"===t||"earliest"===e?-1:n(e)-n(t)))}function n(e){return null==e?e:Number.parseInt(e,16)}function r(e){if(null==e)return e;let t=e.toString(16);return t.length%2&&(t="0"+t),"0x"+t}function i(){return Math.floor(16*Math.random()).toString(16)}e.exports={minBlockRef:function(...e){return t(e)[0]},maxBlockRef:function(...e){const n=t(e);return n[n.length-1]},sortBlockRefs:t,bnToHex:function(e){return"0x"+e.toString(16)},blockRefIsNumber:function(e){return e&&!["earliest","latest","pending"].includes(e)},hexToInt:n,incrementHexInt:function(e){if(null==e)return e;return r(n(e)+1)},intToHex:r,unsafeRandomBytes:function(e){let t="0x";for(let n=0;n<e;n++)t+=i(),t+=i();return t}}},64750:(e,t,n)=>{const r=n(4540).eu,{createAsyncMiddleware:i,createScaffoldMiddleware:a}=n(89900),s=n(95751),o=n(12522),c=n(72147),{intToHex:l,hexToInt:u}=n(30446);function d(e){return h((async(...t)=>{const n=await e(...t);return l(n.id)}))}function h(e){return i((async(t,n)=>{const r=await e.apply(null,t.params);n.result=r}))}function p(e,t){const n=[];for(let t in e)n.push(e[t]);return n}e.exports=function({blockTracker:e,provider:t}){let n=0,i={};const f=new r,m=function({mutex:e}){return t=>async(n,r,i,a)=>{(await e.acquire())(),t(n,r,i,a)}}({mutex:f}),y=a({eth_newFilter:m(d(b)),eth_newBlockFilter:m(d(v)),eth_newPendingTransactionFilter:m(d(w)),eth_uninstallFilter:m(h(S)),eth_getFilterChanges:m(h(E)),eth_getFilterLogs:m(h(_))}),g=async({oldBlock:e,newBlock:t})=>{if(0===i.length)return;const n=await f.acquire();try{await Promise.all(p(i).map((async n=>{try{await n.update({oldBlock:e,newBlock:t})}catch(e){console.error(e)}})))}catch(e){console.error(e)}n()};return y.newLogFilter=b,y.newBlockFilter=v,y.newPendingTransactionFilter=w,y.uninstallFilter=S,y.getFilterChanges=E,y.getFilterLogs=_,y.destroy=()=>{!async function(){const e=p(i).length;i={},A({prevFilterCount:e,newFilterCount:0})}()},y;async function b(e){const n=new s({provider:t,params:e});await T(n);return n}async function v(){const e=new o({provider:t});await T(e);return e}async function w(){const e=new c({provider:t});await T(e);return e}async function E(e){const t=u(e),n=i[t];if(!n)throw new Error(`No filter for index "${t}"`);return n.getChangesAndClear()}async function _(e){const t=u(e),n=i[t];if(!n)throw new Error(`No filter for index "${t}"`);let r=[];return"log"===n.type&&(r=n.getAllResults()),r}async function S(e){const t=u(e),n=i[t],r=Boolean(n);return r&&await async function(e){const t=p(i).length;delete i[e];const n=p(i).length;A({prevFilterCount:t,newFilterCount:n})}(t),r}async function T(t){const r=p(i).length,a=await e.getLatestBlock();await t.initialize({currentBlock:a}),n++,i[n]=t,t.id=n,t.idHex=l(n);return A({prevFilterCount:r,newFilterCount:p(i).length}),n}function A({prevFilterCount:t,newFilterCount:n}){0===t&&n>0?e.on("sync",g):t>0&&0===n&&e.removeListener("sync",g)}}},95751:(e,t,n)=>{const r=n(12532),i=n(4864),a=n(45233),{bnToHex:s,hexToInt:o,incrementHexInt:c,minBlockRef:l,blockRefIsNumber:u}=n(30446);e.exports=class extends a{constructor({provider:e,params:t}){super(),this.type="log",this.ethQuery=new r(e),this.params=Object.assign({fromBlock:"latest",toBlock:"latest",address:void 0,topics:[]},t),this.params.address&&(Array.isArray(this.params.address)||(this.params.address=[this.params.address]),this.params.address=this.params.address.map((e=>e.toLowerCase())))}async initialize({currentBlock:e}){let t=this.params.fromBlock;["latest","pending"].includes(t)&&(t=e),"earliest"===t&&(t="0x0"),this.params.fromBlock=t;const n=l(this.params.toBlock,e),r=Object.assign({},this.params,{toBlock:n}),i=await this._fetchLogs(r);this.addInitialResults(i)}async update({oldBlock:e,newBlock:t}){const n=t;let r;r=e?c(e):t;const i=Object.assign({},this.params,{fromBlock:r,toBlock:n}),a=(await this._fetchLogs(i)).filter((e=>this.matchLog(e)));this.addResults(a)}async _fetchLogs(e){return await i((t=>this.ethQuery.getLogs(e,t)))()}matchLog(e){if(o(this.params.fromBlock)>=o(e.blockNumber))return!1;if(u(this.params.toBlock)&&o(this.params.toBlock)<=o(e.blockNumber))return!1;const t=e.address&&e.address.toLowerCase();if(this.params.address&&t&&!this.params.address.includes(t))return!1;return this.params.topics.every(((t,n)=>{let r=e.topics[n];if(!r)return!1;r=r.toLowerCase();let i=Array.isArray(t)?t:[t];if(i.includes(null))return!0;i=i.map((e=>e.toLowerCase()));return i.includes(r)}))}}},9945:(e,t,n)=>{"use strict";const r=n(50046);function i(e,t,n){try{Reflect.apply(e,t,n)}catch(e){setTimeout((()=>{throw e}))}}class a extends r.EventEmitter{emit(e,...t){let n="error"===e;const r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){let e;if(t.length>0&&([e]=t),e instanceof Error)throw e;const n=new Error("Unhandled error."+(e?` (${e.message})`:""));throw n.context=e,n}const a=r[e];if(void 0===a)return!1;if("function"==typeof a)i(a,this,t);else{const e=a.length,n=function(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r+=1)n[r]=e[r];return n}(a);for(let r=0;r<e;r+=1)i(n[r],this,t)}return!0}}t.A=a},78791:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85608),i=n(69082),a=function(){function e(){this._semaphore=new i.default(1)}return e.prototype.acquire=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this._semaphore.acquire()];case 1:return e=t.sent(),[2,e[1]]}}))}))},e.prototype.runExclusive=function(e){return this._semaphore.runExclusive((function(){return e()}))},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.release=function(){this._semaphore.release()},e}();t.default=a},69082:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(85608),i=function(){function e(e){if(this._maxConcurrency=e,this._queue=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}return e.prototype.acquire=function(){var e=this,t=this.isLocked(),n=new Promise((function(t){return e._queue.push(t)}));return t||this._dispatch(),n},e.prototype.runExclusive=function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.acquire()];case 1:t=r.sent(),n=t[0],i=t[1],r.label=2;case 2:return r.trys.push([2,,4,5]),[4,e(n)];case 3:return[2,r.sent()];case 4:return i(),[7];case 5:return[2]}}))}))},e.prototype.isLocked=function(){return this._value<=0},e.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var e=this._currentReleaser;this._currentReleaser=void 0,e()}},e.prototype._dispatch=function(){var e=this,t=this._queue.shift();if(t){var n=!1;this._currentReleaser=function(){n||(n=!0,e._value++,e._dispatch())},t([this._value--,this._currentReleaser])}},e}();t.default=i},4540:(e,t,n)=>{"use strict";t.eu=void 0;var r=n(78791);Object.defineProperty(t,"eu",{enumerable:!0,get:function(){return r.default}});var i=n(69082);var a=n(21351)},21351:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withTimeout=void 0;var r=n(85608);t.withTimeout=function(e,t,n){var i=this;return void 0===n&&(n=new Error("timeout")),{acquire:function(){return new Promise((function(a,s){return r.__awaiter(i,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return i=!1,setTimeout((function(){i=!0,s(n)}),t),[4,e.acquire()];case 1:return o=r.sent(),i?(Array.isArray(o)?o[1]:o)():a(o),[2]}}))}))}))},runExclusive:function(e){return r.__awaiter(this,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:t=function(){},r.label=1;case 1:return r.trys.push([1,,7,8]),[4,this.acquire()];case 2:return n=r.sent(),Array.isArray(n)?(t=n[1],[4,e(n[0])]):[3,4];case 3:return[2,r.sent()];case 4:return t=n,[4,e()];case 5:return[2,r.sent()];case 6:return[3,8];case 7:return t(),[7];case 8:return[2]}}))}))},release:function(){e.release()},isLocked:function(){return e.isLocked()}}}},4864:e=>{"use strict";const t=(e,t,n,r)=>function(...i){return new(0,t.promiseModule)(((a,s)=>{t.multiArgs?i.push(((...e)=>{t.errorFirst?e[0]?s(e):(e.shift(),a(e)):a(e)})):t.errorFirst?i.push(((e,t)=>{e?s(e):a(t)})):i.push(a);const o=this===n?r:this;Reflect.apply(e,o,i)}))},n=new WeakMap;e.exports=(e,r)=>{r={exclude:[/.+(?:Sync|Stream)$/],errorFirst:!0,promiseModule:Promise,...r};const i=typeof e;if(null===e||"object"!==i&&"function"!==i)throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${null===e?"null":i}\``);const a=new WeakMap,s=new Proxy(e,{apply(e,n,i){const o=a.get(e);if(o)return Reflect.apply(o,n,i);const c=r.excludeMain?e:t(e,r,s,e);return a.set(e,c),Reflect.apply(c,n,i)},get(e,i){const o=e[i];if(!((e,t)=>{let i=n.get(e);if(i||(i={},n.set(e,i)),t in i)return i[t];const a=e=>"string"==typeof e||"symbol"==typeof t?t===e:e.test(t),s=Reflect.getOwnPropertyDescriptor(e,t),o=void 0===s||s.writable||s.configurable,c=(r.include?r.include.some(a):!r.exclude.some(a))&&o;return i[t]=c,c})(e,i)||o===Function.prototype[i])return o;const c=a.get(o);if(c)return c;if("function"==typeof o){const n=t(o,r,s,e);return a.set(o,n),n}return o}});return s}},60834:(e,t,n)=>{const r=n(9945).A,{createAsyncMiddleware:i,createScaffoldMiddleware:a}=n(89900),s=n(64750),{unsafeRandomBytes:o,incrementHexInt:c}=n(30446),l=n(1308);function u(e){return null==e?null:{hash:e.hash,parentHash:e.parentHash,sha3Uncles:e.sha3Uncles,miner:e.miner,stateRoot:e.stateRoot,transactionsRoot:e.transactionsRoot,receiptsRoot:e.receiptsRoot,logsBloom:e.logsBloom,difficulty:e.difficulty,number:e.number,gasLimit:e.gasLimit,gasUsed:e.gasUsed,nonce:e.nonce,mixHash:e.mixHash,timestamp:e.timestamp,extraData:e.extraData}}e.exports=function({blockTracker:e,provider:t}){const n={},d=s({blockTracker:e,provider:t});let h=!1;const p=new r,f=a({eth_subscribe:i((async function(r,i){if(h)throw new Error("SubscriptionManager - attempting to use after destroying");const a=r.params[0],s=o(16);let p;switch(a){case"newHeads":p=f({subId:s});break;case"logs":const e=r.params[1];p=y({subId:s,filter:await d.newLogFilter(e)});break;default:throw new Error(`SubscriptionManager - unsupported subscription type "${a}"`)}return n[s]=p,void(i.result=s);function f({subId:n}){const r={type:a,destroy:async()=>{e.removeListener("sync",r.update)},update:async({oldBlock:e,newBlock:r})=>{const i=r,a=c(e);(await l({provider:t,fromBlock:a,toBlock:i})).map(u).filter((e=>null!==e)).forEach((e=>{m(n,e)}))}};return e.on("sync",r.update),r}function y({subId:e,filter:t}){t.on("update",(t=>m(e,t)));return{type:a,destroy:async()=>await d.uninstallFilter(t.idHex)}}})),eth_unsubscribe:i((async function(e,t){if(h)throw new Error("SubscriptionManager - attempting to use after destroying");const r=e.params[0],i=n[r];if(!i)return void(t.result=!1);delete n[r],await i.destroy(),t.result=!0}))});return f.destroy=function(){p.removeAllListeners();for(const e in n)n[e].destroy(),delete n[e];h=!0},{events:p,middleware:f};function m(e,t){p.emit("notification",{jsonrpc:"2.0",method:"eth_subscription",params:{subscription:e,result:t}})}}},72147:(e,t,n)=>{const r=n(53116),i=n(1308),{incrementHexInt:a}=n(30446);e.exports=class extends r{constructor({provider:e}){super(),this.type="tx",this.provider=e}async update({oldBlock:e}){const t=e,n=a(e),r=await i({provider:this.provider,fromBlock:n,toBlock:t}),s=[];for(const e of r)s.push(...e.transactions);this.addResults(s)}}},12532:(e,t,n)=>{const r=n(93227),i=n(56512)();function a(e){this.currentProvider=e}function s(e){return function(){var t=[].slice.call(arguments),n=t.pop();this.sendAsync({method:e,params:t},n)}}function o(e,t){return function(){var n=[].slice.call(arguments),r=n.pop();n.length<e&&n.push("latest"),this.sendAsync({method:t,params:n},r)}}e.exports=a,a.prototype.getBalance=o(2,"eth_getBalance"),a.prototype.getCode=o(2,"eth_getCode"),a.prototype.getTransactionCount=o(2,"eth_getTransactionCount"),a.prototype.getStorageAt=o(3,"eth_getStorageAt"),a.prototype.call=o(2,"eth_call"),a.prototype.protocolVersion=s("eth_protocolVersion"),a.prototype.syncing=s("eth_syncing"),a.prototype.coinbase=s("eth_coinbase"),a.prototype.mining=s("eth_mining"),a.prototype.hashrate=s("eth_hashrate"),a.prototype.gasPrice=s("eth_gasPrice"),a.prototype.accounts=s("eth_accounts"),a.prototype.blockNumber=s("eth_blockNumber"),a.prototype.getBlockTransactionCountByHash=s("eth_getBlockTransactionCountByHash"),a.prototype.getBlockTransactionCountByNumber=s("eth_getBlockTransactionCountByNumber"),a.prototype.getUncleCountByBlockHash=s("eth_getUncleCountByBlockHash"),a.prototype.getUncleCountByBlockNumber=s("eth_getUncleCountByBlockNumber"),a.prototype.sign=s("eth_sign"),a.prototype.sendTransaction=s("eth_sendTransaction"),a.prototype.sendRawTransaction=s("eth_sendRawTransaction"),a.prototype.estimateGas=s("eth_estimateGas"),a.prototype.getBlockByHash=s("eth_getBlockByHash"),a.prototype.getBlockByNumber=s("eth_getBlockByNumber"),a.prototype.getTransactionByHash=s("eth_getTransactionByHash"),a.prototype.getTransactionByBlockHashAndIndex=s("eth_getTransactionByBlockHashAndIndex"),a.prototype.getTransactionByBlockNumberAndIndex=s("eth_getTransactionByBlockNumberAndIndex"),a.prototype.getTransactionReceipt=s("eth_getTransactionReceipt"),a.prototype.getUncleByBlockHashAndIndex=s("eth_getUncleByBlockHashAndIndex"),a.prototype.getUncleByBlockNumberAndIndex=s("eth_getUncleByBlockNumberAndIndex"),a.prototype.getCompilers=s("eth_getCompilers"),a.prototype.compileLLL=s("eth_compileLLL"),a.prototype.compileSolidity=s("eth_compileSolidity"),a.prototype.compileSerpent=s("eth_compileSerpent"),a.prototype.newFilter=s("eth_newFilter"),a.prototype.newBlockFilter=s("eth_newBlockFilter"),a.prototype.newPendingTransactionFilter=s("eth_newPendingTransactionFilter"),a.prototype.uninstallFilter=s("eth_uninstallFilter"),a.prototype.getFilterChanges=s("eth_getFilterChanges"),a.prototype.getFilterLogs=s("eth_getFilterLogs"),a.prototype.getLogs=s("eth_getLogs"),a.prototype.getWork=s("eth_getWork"),a.prototype.submitWork=s("eth_submitWork"),a.prototype.submitHashrate=s("eth_submitHashrate"),a.prototype.sendAsync=function(e,t){var n;this.currentProvider.sendAsync((n=e,r({id:i(),jsonrpc:"2.0",params:[]},n)),(function(e,n){if(!e&&n.error&&(e=new Error("EthQuery - RPC Error - "+n.error.message)),e)return t(e);t(null,n.result)}))}},28985:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new i(r,a||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],o]:e._events[c].push(o):(e._events[c]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,s=new Array(a);i<a;i++)s[i]=r[i].fn;return s},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,a,s){var o=n?n+e:e;if(!this._events[o])return!1;var c,l,u=this._events[o],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,a),!0;case 6:return u.fn.call(u.context,t,r,i,a,s),!0}for(l=1,c=new Array(d-1);l<d;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var h,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,i);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];u[l].fn.apply(u[l].context,c)}}return!0},o.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||s(this,a);else{for(var c=0,l=[],u=o.length;c<u;c++)(o[c].fn!==t||i&&!o[c].once||r&&o[c].context!==r)&&l.push(o[c]);l.length?this._events[a]=1===l.length?l[0]:l:s(this,a)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},50046:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}m(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&m(e,"error",t,n)}(e,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var s=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,a,s,l;if(o(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),void 0===s)s=a[t]=n,++e._eventsCount;else if("function"==typeof s?s=a[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=c(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=u.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function m(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,a=this._events;if(void 0!==a)i=i&&void 0===a.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var c=a[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var l=c.length,u=f(c,l);for(n=0;n<l;++n)r(u[n],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return o(t),this.on(e,d(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,d(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,r,i,a,s;if(o(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},a.prototype.listeners=function(e){return h(this,e,!0)},a.prototype.rawListeners=function(e){return h(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},28981:(e,t,n)=>{var r=n(25636).Buffer,i=n(63275);e.exports=function(e,t,n,a){if(r.isBuffer(e)||(e=r.from(e,"binary")),t&&(r.isBuffer(t)||(t=r.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=n/8,o=r.alloc(s),c=r.alloc(a||0),l=r.alloc(0);s>0||a>0;){var u=new i;u.update(l),u.update(e),t&&u.update(t),l=u.digest();var d=0;if(s>0){var h=o.length-s;d=Math.min(s,l.length),l.copy(o,h,0,d),s-=d}if(d<l.length&&a>0){var p=c.length-a,f=Math.min(a,l.length-d);l.copy(c,p,d,d+f),a-=f}}return l.fill(0),{key:o,iv:c}}},30282:e=>{e.exports=s,s.default=s,s.stable=u,s.stableStringify=u;var t="[...]",n="[Circular]",r=[],i=[];function a(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function s(e,t,n,s){var o;void 0===s&&(s=a()),c(e,"",0,[],void 0,0,s);try{o=0===i.length?JSON.stringify(e,t,n):JSON.stringify(e,h(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var l=r.pop();4===l.length?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return o}function o(e,t,n,a){var s=Object.getOwnPropertyDescriptor(a,n);void 0!==s.get?s.configurable?(Object.defineProperty(a,n,{value:e}),r.push([a,n,t,s])):i.push([t,n,e]):(a[n]=e,r.push([a,n,t]))}function c(e,r,i,a,s,l,u){var d;if(l+=1,"object"==typeof e&&null!==e){for(d=0;d<a.length;d++)if(a[d]===e)return void o(n,e,r,s);if(void 0!==u.depthLimit&&l>u.depthLimit)return void o(t,e,r,s);if(void 0!==u.edgesLimit&&i+1>u.edgesLimit)return void o(t,e,r,s);if(a.push(e),Array.isArray(e))for(d=0;d<e.length;d++)c(e[d],d,d,a,e,l,u);else{var h=Object.keys(e);for(d=0;d<h.length;d++){var p=h[d];c(e[p],p,d,a,e,l,u)}}a.pop()}}function l(e,t){return e<t?-1:e>t?1:0}function u(e,t,n,s){void 0===s&&(s=a());var o,c=d(e,"",0,[],void 0,0,s)||e;try{o=0===i.length?JSON.stringify(c,t,n):JSON.stringify(c,h(t),n)}catch(e){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==r.length;){var l=r.pop();4===l.length?Object.defineProperty(l[0],l[1],l[3]):l[0][l[1]]=l[2]}}return o}function d(e,i,a,s,c,u,h){var p;if(u+=1,"object"==typeof e&&null!==e){for(p=0;p<s.length;p++)if(s[p]===e)return void o(n,e,i,c);try{if("function"==typeof e.toJSON)return}catch(e){return}if(void 0!==h.depthLimit&&u>h.depthLimit)return void o(t,e,i,c);if(void 0!==h.edgesLimit&&a+1>h.edgesLimit)return void o(t,e,i,c);if(s.push(e),Array.isArray(e))for(p=0;p<e.length;p++)d(e[p],p,p,s,e,u,h);else{var f={},m=Object.keys(e).sort(l);for(p=0;p<m.length;p++){var y=m[p];d(e[y],y,p,s,e,u,h),f[y]=e[y]}if(void 0===c)return f;r.push([c,i,e]),c[i]=f}s.pop()}}function h(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(i.length>0)for(var r=0;r<i.length;r++){var a=i[r];if(a[1]===t&&a[0]===n){n=a[2],i.splice(r,1);break}}return e.call(this,t,n)}}},21848:(e,t,n)=>{"use strict";var r=n(25636).Buffer,i=n(34156).Transform;function a(e){i.call(this),this._block=r.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(35615)(a,i),a.prototype._transform=function(e,t,n){var r=null;try{this.update(e,t)}catch(e){r=e}n(r)},a.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},a.prototype.update=function(e,t){if(function(e,t){if(!r.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(e)||(e=r.from(e,t));for(var n=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)n[a++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)n[this._blockOffset++]=e[i++];for(var s=0,o=8*e.length;o>0;++s)this._length[s]+=o,(o=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*o);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return t},a.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=a},99499:(e,t,n)=>{var r=t;r.utils=n(70461),r.common=n(32191),r.sha=n(75746),r.ripemd=n(74169),r.hmac=n(11825),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},32191:(e,t,n)=>{"use strict";var r=n(70461),i=n(7784);function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=a,a.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var n=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-n,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this},a.prototype.digest=function(e){return this.update(this._pad()),i(null===this.pending),this._digest(e)},a.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(e<<=3,"big"===this.endian){for(var a=8;a<this.padLength;a++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=e>>>24&255,r[i++]=e>>>16&255,r[i++]=e>>>8&255,r[i++]=255&e}else for(r[i++]=255&e,r[i++]=e>>>8&255,r[i++]=e>>>16&255,r[i++]=e>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,a=8;a<this.padLength;a++)r[i++]=0;return r}},11825:(e,t,n)=>{"use strict";var r=n(70461),i=n(7784);function a(e,t,n){if(!(this instanceof a))return new a(e,t,n);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,n))}e.exports=a,a.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),i(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},a.prototype.update=function(e,t){return this.inner.update(e,t),this},a.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},74169:(e,t,n)=>{"use strict";var r=n(70461),i=n(32191),a=r.rotl32,s=r.sum32,o=r.sum32_3,c=r.sum32_4,l=i.BlockHash;function u(){if(!(this instanceof u))return new u;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,n,r){return e<=15?t^n^r:e<=31?t&n|~t&r:e<=47?(t|~n)^r:e<=63?t&r|n&~r:t^(n|~r)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function p(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}r.inherits(u,l),t.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(e,t){for(var n=this.h[0],r=this.h[1],i=this.h[2],l=this.h[3],u=this.h[4],b=n,v=r,w=i,E=l,_=u,S=0;S<80;S++){var T=s(a(c(n,d(S,r,i,l),e[f[S]+t],h(S)),y[S]),u);n=u,u=l,l=a(i,10),i=r,r=T,T=s(a(c(b,d(79-S,v,w,E),e[m[S]+t],p(S)),g[S]),_),b=_,_=E,E=a(w,10),w=v,v=T}T=o(this.h[1],i,E),this.h[1]=o(this.h[2],l,_),this.h[2]=o(this.h[3],u,b),this.h[3]=o(this.h[4],n,v),this.h[4]=o(this.h[0],r,w),this.h[0]=T},u.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],y=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},75746:(e,t,n)=>{"use strict";t.sha1=n(12986),t.sha224=n(75393),t.sha256=n(50536),t.sha384=n(52348),t.sha512=n(92157)},12986:(e,t,n)=>{"use strict";var r=n(70461),i=n(32191),a=n(600),s=r.rotl32,o=r.sum32,c=r.sum32_5,l=a.ft_1,u=i.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(h,u),e.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=s(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],a=this.h[1],u=this.h[2],h=this.h[3],p=this.h[4];for(r=0;r<n.length;r++){var f=~~(r/20),m=c(s(i,5),l(f,a,u,h),p,n[r],d[f]);p=h,h=u,u=s(a,30),a=i,i=m}this.h[0]=o(this.h[0],i),this.h[1]=o(this.h[1],a),this.h[2]=o(this.h[2],u),this.h[3]=o(this.h[3],h),this.h[4]=o(this.h[4],p)},h.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},75393:(e,t,n)=>{"use strict";var r=n(70461),i=n(50536);function a(){if(!(this instanceof a))return new a;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(a,i),e.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},50536:(e,t,n)=>{"use strict";var r=n(70461),i=n(32191),a=n(600),s=n(7784),o=r.sum32,c=r.sum32_4,l=r.sum32_5,u=a.ch32,d=a.maj32,h=a.s0_256,p=a.s1_256,f=a.g0_256,m=a.g1_256,y=i.BlockHash,g=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function b(){if(!(this instanceof b))return new b;y.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=g,this.W=new Array(64)}r.inherits(b,y),e.exports=b,b.blockSize=512,b.outSize=256,b.hmacStrength=192,b.padLength=64,b.prototype._update=function(e,t){for(var n=this.W,r=0;r<16;r++)n[r]=e[t+r];for(;r<n.length;r++)n[r]=c(m(n[r-2]),n[r-7],f(n[r-15]),n[r-16]);var i=this.h[0],a=this.h[1],y=this.h[2],g=this.h[3],b=this.h[4],v=this.h[5],w=this.h[6],E=this.h[7];for(s(this.k.length===n.length),r=0;r<n.length;r++){var _=l(E,p(b),u(b,v,w),this.k[r],n[r]),S=o(h(i),d(i,a,y));E=w,w=v,v=b,b=o(g,_),g=y,y=a,a=i,i=o(_,S)}this.h[0]=o(this.h[0],i),this.h[1]=o(this.h[1],a),this.h[2]=o(this.h[2],y),this.h[3]=o(this.h[3],g),this.h[4]=o(this.h[4],b),this.h[5]=o(this.h[5],v),this.h[6]=o(this.h[6],w),this.h[7]=o(this.h[7],E)},b.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},52348:(e,t,n)=>{"use strict";var r=n(70461),i=n(92157);function a(){if(!(this instanceof a))return new a;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(a,i),e.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},92157:(e,t,n)=>{"use strict";var r=n(70461),i=n(32191),a=n(7784),s=r.rotr64_hi,o=r.rotr64_lo,c=r.shr64_hi,l=r.shr64_lo,u=r.sum64,d=r.sum64_hi,h=r.sum64_lo,p=r.sum64_4_hi,f=r.sum64_4_lo,m=r.sum64_5_hi,y=r.sum64_5_lo,g=i.BlockHash,b=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=b,this.W=new Array(160)}function w(e,t,n,r,i){var a=e&n^~e&i;return a<0&&(a+=4294967296),a}function E(e,t,n,r,i,a){var s=t&r^~t&a;return s<0&&(s+=4294967296),s}function _(e,t,n,r,i){var a=e&n^e&i^n&i;return a<0&&(a+=4294967296),a}function S(e,t,n,r,i,a){var s=t&r^t&a^r&a;return s<0&&(s+=4294967296),s}function T(e,t){var n=s(e,t,28)^s(t,e,2)^s(t,e,7);return n<0&&(n+=4294967296),n}function A(e,t){var n=o(e,t,28)^o(t,e,2)^o(t,e,7);return n<0&&(n+=4294967296),n}function N(e,t){var n=s(e,t,14)^s(e,t,18)^s(t,e,9);return n<0&&(n+=4294967296),n}function C(e,t){var n=o(e,t,14)^o(e,t,18)^o(t,e,9);return n<0&&(n+=4294967296),n}function M(e,t){var n=s(e,t,1)^s(e,t,8)^c(e,t,7);return n<0&&(n+=4294967296),n}function R(e,t){var n=o(e,t,1)^o(e,t,8)^l(e,t,7);return n<0&&(n+=4294967296),n}function x(e,t){var n=s(e,t,19)^s(t,e,29)^c(e,t,6);return n<0&&(n+=4294967296),n}function k(e,t){var n=o(e,t,19)^o(t,e,29)^l(e,t,6);return n<0&&(n+=4294967296),n}r.inherits(v,g),e.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var n=this.W,r=0;r<32;r++)n[r]=e[t+r];for(;r<n.length;r+=2){var i=x(n[r-4],n[r-3]),a=k(n[r-4],n[r-3]),s=n[r-14],o=n[r-13],c=M(n[r-30],n[r-29]),l=R(n[r-30],n[r-29]),u=n[r-32],d=n[r-31];n[r]=p(i,a,s,o,c,l,u,d),n[r+1]=f(i,a,s,o,c,l,u,d)}},v.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,r=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],c=this.h[4],l=this.h[5],p=this.h[6],f=this.h[7],g=this.h[8],b=this.h[9],v=this.h[10],M=this.h[11],R=this.h[12],x=this.h[13],k=this.h[14],I=this.h[15];a(this.k.length===n.length);for(var O=0;O<n.length;O+=2){var P=k,L=I,D=N(g,b),B=C(g,b),j=w(g,b,v,M,R),q=E(g,b,v,M,R,x),$=this.k[O],U=this.k[O+1],F=n[O],V=n[O+1],H=m(P,L,D,B,j,q,$,U,F,V),z=y(P,L,D,B,j,q,$,U,F,V);P=T(r,i),L=A(r,i),D=_(r,i,s,o,c),B=S(r,i,s,o,c,l);var W=d(P,L,D,B),K=h(P,L,D,B);k=R,I=x,R=v,x=M,v=g,M=b,g=d(p,f,H,z),b=h(f,f,H,z),p=c,f=l,c=s,l=o,s=r,o=i,r=d(H,z,W,K),i=h(H,z,W,K)}u(this.h,0,r,i),u(this.h,2,s,o),u(this.h,4,c,l),u(this.h,6,p,f),u(this.h,8,g,b),u(this.h,10,v,M),u(this.h,12,R,x),u(this.h,14,k,I)},v.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},600:(e,t,n)=>{"use strict";var r=n(70461).rotr32;function i(e,t,n){return e&t^~e&n}function a(e,t,n){return e&t^e&n^t&n}function s(e,t,n){return e^t^n}t.ft_1=function(e,t,n,r){return 0===e?i(t,n,r):1===e||3===e?s(t,n,r):2===e?a(t,n,r):void 0},t.ch32=i,t.maj32=a,t.p32=s,t.s0_256=function(e){return r(e,2)^r(e,13)^r(e,22)},t.s1_256=function(e){return r(e,6)^r(e,11)^r(e,25)},t.g0_256=function(e){return r(e,7)^r(e,18)^e>>>3},t.g1_256=function(e){return r(e,17)^r(e,19)^e>>>10}},70461:(e,t,n)=>{"use strict";var r=n(7784),i=n(35615);function a(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function s(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function o(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=i,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var r=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?n[r++]=s:s<2048?(n[r++]=s>>6|192,n[r++]=63&s|128):a(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),n[r++]=s>>18|240,n[r++]=s>>12&63|128,n[r++]=s>>6&63|128,n[r++]=63&s|128):(n[r++]=s>>12|224,n[r++]=s>>6&63|128,n[r++]=63&s|128)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},t.toHex=function(e){for(var t="",n=0;n<e.length;n++)t+=o(e[n].toString(16));return t},t.htonl=s,t.toHex32=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e[r];"little"===t&&(i=s(i)),n+=c(i.toString(16))}return n},t.zero2=o,t.zero8=c,t.join32=function(e,t,n,i){var a=n-t;r(a%4==0);for(var s=new Array(a/4),o=0,c=t;o<s.length;o++,c+=4){var l;l="big"===i?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],s[o]=l>>>0}return s},t.split32=function(e,t){for(var n=new Array(4*e.length),r=0,i=0;r<e.length;r++,i+=4){var a=e[r];"big"===t?(n[i]=a>>>24,n[i+1]=a>>>16&255,n[i+2]=a>>>8&255,n[i+3]=255&a):(n[i+3]=a>>>24,n[i+2]=a>>>16&255,n[i+1]=a>>>8&255,n[i]=255&a)}return n},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,n){return e+t+n>>>0},t.sum32_4=function(e,t,n,r){return e+t+n+r>>>0},t.sum32_5=function(e,t,n,r,i){return e+t+n+r+i>>>0},t.sum64=function(e,t,n,r){var i=e[t],a=r+e[t+1]>>>0,s=(a<r?1:0)+n+i;e[t]=s>>>0,e[t+1]=a},t.sum64_hi=function(e,t,n,r){return(t+r>>>0<t?1:0)+e+n>>>0},t.sum64_lo=function(e,t,n,r){return t+r>>>0},t.sum64_4_hi=function(e,t,n,r,i,a,s,o){var c=0,l=t;return c+=(l=l+r>>>0)<t?1:0,c+=(l=l+a>>>0)<a?1:0,e+n+i+s+(c+=(l=l+o>>>0)<o?1:0)>>>0},t.sum64_4_lo=function(e,t,n,r,i,a,s,o){return t+r+a+o>>>0},t.sum64_5_hi=function(e,t,n,r,i,a,s,o,c,l){var u=0,d=t;return u+=(d=d+r>>>0)<t?1:0,u+=(d=d+a>>>0)<a?1:0,u+=(d=d+o>>>0)<o?1:0,e+n+i+s+c+(u+=(d=d+l>>>0)<l?1:0)>>>0},t.sum64_5_lo=function(e,t,n,r,i,a,s,o,c,l){return t+r+a+o+l>>>0},t.rotr64_hi=function(e,t,n){return(t<<32-n|e>>>n)>>>0},t.rotr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0},t.shr64_hi=function(e,t,n){return e>>>n},t.shr64_lo=function(e,t,n){return(e<<32-n|t>>>n)>>>0}},84742:(e,t,n)=>{"use strict";var r=n(99499),i=n(89042),a=n(7784);function s(e){if(!(this instanceof s))return new s(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=i.toArray(e.entropy,e.entropyEnc||"hex"),n=i.toArray(e.nonce,e.nonceEnc||"hex"),r=i.toArray(e.pers,e.persEnc||"hex");a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,n,r)}e.exports=s,s.prototype._init=function(e,t,n){var r=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},s.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(e,t,n,r){"string"!=typeof t&&(r=n,n=t,t=null),e=i.toArray(e,t),n=i.toArray(n,r),a(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1},s.prototype.generate=function(e,t,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(r=n,n=t,t=null),n&&(n=i.toArray(n,r||"hex"),this._update(n));for(var a=[];a.length<e;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var s=a.slice(0,e);return this._update(n),this._reseed++,i.encode(s,t)}},39318:(e,t)=>{t.read=function(e,t,n,r,i){var a,s,o=8*i-r-1,c=(1<<o)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,p=e[t+d];for(d+=h,a=p&(1<<-u)-1,p>>=-u,u+=o;u>0;a=256*a+e[t+d],d+=h,u-=8);for(s=a&(1<<-u)-1,a>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=h,u-=8);if(0===a)a=1-l;else{if(a===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),a-=l}return(p?-1:1)*s*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var s,o,c,l=8*a-i-1,u=(1<<l)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(o=0,s=u):s+d>=1?(o=(t*c-1)*Math.pow(2,i),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&o,p+=f,o/=256,i-=8);for(s=s<<i|o,l+=i;l>0;e[n+p]=255&s,p+=f,s/=256,l-=8);e[n+p-f]|=128*m}},35615:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},85703:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},63343:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.JsonRpcEngine=void 0;const i=r(n(75135)),a=n(54265);class s extends i.default{constructor(){super(),this._middleware=[]}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,n,r)=>{try{const[i,a,o]=await s._runAllMiddleware(e,t,this._middleware);return a?(await s._runReturnHandlers(o),r(i)):n((async e=>{try{await s._runReturnHandlers(o)}catch(t){return e(t)}return e()}))}catch(e){return r(e)}}}async _handleBatch(e,t){try{const n=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,n):n}catch(e){if(t)return t(e);throw e}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,n)=>{t(n)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const n=new a.EthereumRpcError(a.errorCodes.rpc.invalidRequest,"Requests must be plain objects. Received: "+typeof e,{request:e});return t(n,{id:void 0,jsonrpc:"2.0",error:n})}if("string"!=typeof e.method){const n=new a.EthereumRpcError(a.errorCodes.rpc.invalidRequest,"Must specify a string method. Received: "+typeof e.method,{request:e});return t(n,{id:e.id,jsonrpc:"2.0",error:n})}const n=Object.assign({},e),r={id:n.id,jsonrpc:n.jsonrpc};let i=null;try{await this._processRequest(n,r)}catch(e){i=e}return i&&(delete r.result,r.error||(r.error=a.serializeError(i))),t(i,r)}async _processRequest(e,t){const[n,r,i]=await s._runAllMiddleware(e,t,this._middleware);if(s._checkForCompletion(e,t,r),await s._runReturnHandlers(i),n)throw n}static async _runAllMiddleware(e,t,n){const r=[];let i=null,a=!1;for(const o of n)if([i,a]=await s._runMiddleware(e,t,o,r),a)break;return[i,a,r.reverse()]}static _runMiddleware(e,t,n,r){return new Promise((i=>{const s=e=>{const n=e||t.error;n&&(t.error=a.serializeError(n)),i([n,!0])},c=n=>{t.error?s(t.error):(n&&("function"!=typeof n&&s(new a.EthereumRpcError(a.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof n}" for request:\n${o(e)}`,{request:e})),r.push(n)),i([null,!1]))};try{n(e,t,c,s)}catch(e){s(e)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,n)=>{t((t=>t?n(t):e()))}))}static _checkForCompletion(e,t,n){if(!("result"in t)&&!("error"in t))throw new a.EthereumRpcError(a.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:\n${o(e)}`,{request:e});if(!n)throw new a.EthereumRpcError(a.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:\n${o(e)}`,{request:e})}}function o(e){return JSON.stringify(e,null,2)}t.JsonRpcEngine=s},4920:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAsyncMiddleware=void 0,t.createAsyncMiddleware=function(e){return async(t,n,r,i)=>{let a;const s=new Promise((e=>{a=e}));let o=null,c=!1;const l=async()=>{c=!0,r((e=>{o=e,a()})),await s};try{await e(t,n,l),c?(await s,o(null)):i(null)}catch(e){o?o(e):i(e)}}}},31864:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createScaffoldMiddleware=void 0,t.createScaffoldMiddleware=function(e){return(t,n,r,i)=>{const a=e[t.method];return void 0===a?r():"function"==typeof a?a(t,n,r,i):(n.result=a,i())}}},64606:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueId=void 0;const n=4294967295;let r=Math.floor(Math.random()*n);t.getUniqueId=function(){return r=(r+1)%n,r}},39586:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createIdRemapMiddleware=void 0;const r=n(64606);t.createIdRemapMiddleware=function(){return(e,t,n,i)=>{const a=e.id,s=r.getUniqueId();e.id=s,t.id=s,n((n=>{e.id=a,t.id=a,n()}))}}},89900:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(39586),t),i(n(4920),t),i(n(31864),t),i(n(64606),t),i(n(63343),t),i(n(5435),t)},5435:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeMiddleware=void 0;const r=n(63343);t.mergeMiddleware=function(e){const t=new r.JsonRpcEngine;return e.forEach((e=>t.push(e))),t.asMiddleware()}},57781:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EthereumProviderError=t.EthereumRpcError=void 0;const r=n(30282);class i extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==n&&(this.data=n)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return r.default(this.serialize(),a,2)}}t.EthereumRpcError=i;function a(e,t){if("[Circular]"!==t)return t}t.EthereumProviderError=class extends i{constructor(e,t,n){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,n)}}},83179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorValues=t.errorCodes=void 0,t.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},t.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}}},64382:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ethErrors=void 0;const r=n(57781),i=n(11348),a=n(83179);function s(e,t){const[n,a]=c(t);return new r.EthereumRpcError(e,n||i.getMessageFromCode(e),a)}function o(e,t){const[n,a]=c(t);return new r.EthereumProviderError(e,n||i.getMessageFromCode(e),a)}function c(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}t.ethErrors={rpc:{parse:e=>s(a.errorCodes.rpc.parse,e),invalidRequest:e=>s(a.errorCodes.rpc.invalidRequest,e),invalidParams:e=>s(a.errorCodes.rpc.invalidParams,e),methodNotFound:e=>s(a.errorCodes.rpc.methodNotFound,e),internal:e=>s(a.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return s(t,e)},invalidInput:e=>s(a.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>s(a.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>s(a.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>s(a.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>s(a.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>s(a.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>o(a.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>o(a.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>o(a.errorCodes.provider.unsupportedMethod,e),disconnected:e=>o(a.errorCodes.provider.disconnected,e),chainDisconnected:e=>o(a.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:i}=e;if(!n||"string"!=typeof n)throw new Error('"message" must be a nonempty string');return new r.EthereumProviderError(t,n,i)}}}},54265:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const r=n(57781);Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return r.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return r.EthereumProviderError}});const i=n(11348);Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return i.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return i.getMessageFromCode}});const a=n(64382);Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return a.ethErrors}});const s=n(83179);Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return s.errorCodes}})},11348:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const r=n(83179),i=n(57781),a=r.errorCodes.rpc.internal,s="Unspecified error message. This is a bug, please report it.",o={code:a,message:c(a)};function c(e,n=s){if(Number.isInteger(e)){const n=e.toString();if(h(r.errorValues,n))return r.errorValues[n].message;if(u(e))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return n}function l(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!r.errorValues[t]||!!u(e)}function u(e){return e>=-32099&&e<=-32e3}function d(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=c,t.isValidCode=l,t.serializeError=function(e,{fallbackError:t=o,shouldIncludeStack:n=!1}={}){var r,a;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof i.EthereumRpcError)return e.serialize();const s={};if(e&&"object"==typeof e&&!Array.isArray(e)&&h(e,"code")&&l(e.code)){const t=e;s.code=t.code,t.message&&"string"==typeof t.message?(s.message=t.message,h(t,"data")&&(s.data=t.data)):(s.message=c(s.code),s.data={originalError:d(e)})}else{s.code=t.code;const n=null===(r=e)||void 0===r?void 0:r.message;s.message=n&&"string"==typeof n?n:t.message,s.data={originalError:d(e)}}const u=null===(a=e)||void 0===a?void 0:a.stack;return n&&e&&u&&"string"==typeof u&&(s.stack=u),s}},56512:e=>{e.exports=function(e){var t=(e=e||{}).max||Number.MAX_SAFE_INTEGER,n=void 0!==e.start?e.start:Math.floor(Math.random()*t);return function(){return n%=t,n++}}},63793:(e,t,n)=>{e.exports=n(39875)(n(26196))},39875:(e,t,n)=>{const r=n(83377),i=n(97953);e.exports=function(e){const t=r(e),n=i(e);return function(e,r){switch("string"==typeof e?e.toLowerCase():e){case"keccak224":return new t(1152,448,null,224,r);case"keccak256":return new t(1088,512,null,256,r);case"keccak384":return new t(832,768,null,384,r);case"keccak512":return new t(576,1024,null,512,r);case"sha3-224":return new t(1152,448,6,224,r);case"sha3-256":return new t(1088,512,6,256,r);case"sha3-384":return new t(832,768,6,384,r);case"sha3-512":return new t(576,1024,6,512,r);case"shake128":return new n(1344,256,31,r);case"shake256":return new n(1088,512,31,r);default:throw new Error("Invald algorithm: "+e)}}}},83377:(e,t,n)=>{var r=n(1048).Buffer;const{Transform:i}=n(31983);e.exports=e=>class t extends i{constructor(t,n,r,i,a){super(a),this._rate=t,this._capacity=n,this._delimitedSuffix=r,this._hashBitLength=i,this._options=a,this._state=new e,this._state.initialize(t,n),this._finalized=!1}_transform(e,t,n){let r=null;try{this.update(e,t)}catch(e){r=e}n(r)}_flush(e){let t=null;try{this.push(this.digest())}catch(e){t=e}e(t)}update(e,t){if(!r.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");return r.isBuffer(e)||(e=r.from(e,t)),this._state.absorb(e),this}digest(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0,this._delimitedSuffix&&this._state.absorbLastFewBits(this._delimitedSuffix);let t=this._state.squeeze(this._hashBitLength/8);return void 0!==e&&(t=t.toString(e)),this._resetState(),t}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._hashBitLength,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},97953:(e,t,n)=>{var r=n(1048).Buffer;const{Transform:i}=n(31983);e.exports=e=>class t extends i{constructor(t,n,r,i){super(i),this._rate=t,this._capacity=n,this._delimitedSuffix=r,this._options=i,this._state=new e,this._state.initialize(t,n),this._finalized=!1}_transform(e,t,n){let r=null;try{this.update(e,t)}catch(e){r=e}n(r)}_flush(){}_read(e){this.push(this.squeeze(e))}update(e,t){if(!r.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Squeeze already called");return r.isBuffer(e)||(e=r.from(e,t)),this._state.absorb(e),this}squeeze(e,t){this._finalized||(this._finalized=!0,this._state.absorbLastFewBits(this._delimitedSuffix));let n=this._state.squeeze(e);return void 0!==t&&(n=n.toString(t)),n}_resetState(){return this._state.initialize(this._rate,this._capacity),this}_clone(){const e=new t(this._rate,this._capacity,this._delimitedSuffix,this._options);return this._state.copy(e._state),e._finalized=this._finalized,e}}},94645:(e,t)=>{const n=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648];t.p1600=function(e){for(let t=0;t<24;++t){const r=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],a=e[2]^e[12]^e[22]^e[32]^e[42],s=e[3]^e[13]^e[23]^e[33]^e[43],o=e[4]^e[14]^e[24]^e[34]^e[44],c=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],u=e[7]^e[17]^e[27]^e[37]^e[47],d=e[8]^e[18]^e[28]^e[38]^e[48],h=e[9]^e[19]^e[29]^e[39]^e[49];let p=d^(a<<1|s>>>31),f=h^(s<<1|a>>>31);const m=e[0]^p,y=e[1]^f,g=e[10]^p,b=e[11]^f,v=e[20]^p,w=e[21]^f,E=e[30]^p,_=e[31]^f,S=e[40]^p,T=e[41]^f;p=r^(o<<1|c>>>31),f=i^(c<<1|o>>>31);const A=e[2]^p,N=e[3]^f,C=e[12]^p,M=e[13]^f,R=e[22]^p,x=e[23]^f,k=e[32]^p,I=e[33]^f,O=e[42]^p,P=e[43]^f;p=a^(l<<1|u>>>31),f=s^(u<<1|l>>>31);const L=e[4]^p,D=e[5]^f,B=e[14]^p,j=e[15]^f,q=e[24]^p,$=e[25]^f,U=e[34]^p,F=e[35]^f,V=e[44]^p,H=e[45]^f;p=o^(d<<1|h>>>31),f=c^(h<<1|d>>>31);const z=e[6]^p,W=e[7]^f,K=e[16]^p,G=e[17]^f,Q=e[26]^p,J=e[27]^f,Y=e[36]^p,X=e[37]^f,Z=e[46]^p,ee=e[47]^f;p=l^(r<<1|i>>>31),f=u^(i<<1|r>>>31);const te=e[8]^p,ne=e[9]^f,re=e[18]^p,ie=e[19]^f,ae=e[28]^p,se=e[29]^f,oe=e[38]^p,ce=e[39]^f,le=e[48]^p,ue=e[49]^f,de=m,he=y,pe=b<<4|g>>>28,fe=g<<4|b>>>28,me=v<<3|w>>>29,ye=w<<3|v>>>29,ge=_<<9|E>>>23,be=E<<9|_>>>23,ve=S<<18|T>>>14,we=T<<18|S>>>14,Ee=A<<1|N>>>31,_e=N<<1|A>>>31,Se=M<<12|C>>>20,Te=C<<12|M>>>20,Ae=R<<10|x>>>22,Ne=x<<10|R>>>22,Ce=I<<13|k>>>19,Me=k<<13|I>>>19,Re=O<<2|P>>>30,xe=P<<2|O>>>30,ke=D<<30|L>>>2,Ie=L<<30|D>>>2,Oe=B<<6|j>>>26,Pe=j<<6|B>>>26,Le=$<<11|q>>>21,De=q<<11|$>>>21,Be=U<<15|F>>>17,je=F<<15|U>>>17,qe=H<<29|V>>>3,$e=V<<29|H>>>3,Ue=z<<28|W>>>4,Fe=W<<28|z>>>4,Ve=G<<23|K>>>9,He=K<<23|G>>>9,ze=Q<<25|J>>>7,We=J<<25|Q>>>7,Ke=Y<<21|X>>>11,Ge=X<<21|Y>>>11,Qe=ee<<24|Z>>>8,Je=Z<<24|ee>>>8,Ye=te<<27|ne>>>5,Xe=ne<<27|te>>>5,Ze=re<<20|ie>>>12,et=ie<<20|re>>>12,tt=se<<7|ae>>>25,nt=ae<<7|se>>>25,rt=oe<<8|ce>>>24,it=ce<<8|oe>>>24,at=le<<14|ue>>>18,st=ue<<14|le>>>18;e[0]=de^~Se&Le,e[1]=he^~Te&De,e[10]=Ue^~Ze&me,e[11]=Fe^~et&ye,e[20]=Ee^~Oe&ze,e[21]=_e^~Pe&We,e[30]=Ye^~pe&Ae,e[31]=Xe^~fe&Ne,e[40]=ke^~Ve&tt,e[41]=Ie^~He&nt,e[2]=Se^~Le&Ke,e[3]=Te^~De&Ge,e[12]=Ze^~me&Ce,e[13]=et^~ye&Me,e[22]=Oe^~ze&rt,e[23]=Pe^~We&it,e[32]=pe^~Ae&Be,e[33]=fe^~Ne&je,e[42]=Ve^~tt&ge,e[43]=He^~nt&be,e[4]=Le^~Ke&at,e[5]=De^~Ge&st,e[14]=me^~Ce&qe,e[15]=ye^~Me&$e,e[24]=ze^~rt&ve,e[25]=We^~it&we,e[34]=Ae^~Be&Qe,e[35]=Ne^~je&Je,e[44]=tt^~ge&Re,e[45]=nt^~be&xe,e[6]=Ke^~at&de,e[7]=Ge^~st&he,e[16]=Ce^~qe&Ue,e[17]=Me^~$e&Fe,e[26]=rt^~ve&Ee,e[27]=it^~we&_e,e[36]=Be^~Qe&Ye,e[37]=je^~Je&Xe,e[46]=ge^~Re&ke,e[47]=be^~xe&Ie,e[8]=at^~de&Se,e[9]=st^~he&Te,e[18]=qe^~Ue&Ze,e[19]=$e^~Fe&et,e[28]=ve^~Ee&Oe,e[29]=we^~_e&Pe,e[38]=Qe^~Ye&pe,e[39]=Je^~Xe&fe,e[48]=Re^~ke&Ve,e[49]=xe^~Ie&He,e[0]^=n[2*t],e[1]^=n[2*t+1]}}},26196:(e,t,n)=>{var r=n(1048).Buffer;const i=n(94645);function a(){this.state=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.blockSize=null,this.count=0,this.squeezing=!1}a.prototype.initialize=function(e,t){for(let e=0;e<50;++e)this.state[e]=0;this.blockSize=e/8,this.count=0,this.squeezing=!1},a.prototype.absorb=function(e){for(let t=0;t<e.length;++t)this.state[~~(this.count/4)]^=e[t]<<this.count%4*8,this.count+=1,this.count===this.blockSize&&(i.p1600(this.state),this.count=0)},a.prototype.absorbLastFewBits=function(e){this.state[~~(this.count/4)]^=e<<this.count%4*8,0!=(128&e)&&this.count===this.blockSize-1&&i.p1600(this.state),this.state[~~((this.blockSize-1)/4)]^=128<<(this.blockSize-1)%4*8,i.p1600(this.state),this.count=0,this.squeezing=!0},a.prototype.squeeze=function(e){this.squeezing||this.absorbLastFewBits(1);const t=r.alloc(e);for(let n=0;n<e;++n)t[n]=this.state[~~(this.count/4)]>>>this.count%4*8&255,this.count+=1,this.count===this.blockSize&&(i.p1600(this.state),this.count=0);return t},a.prototype.copy=function(e){for(let t=0;t<50;++t)e.state[t]=this.state[t];e.blockSize=this.blockSize,e.count=this.count,e.squeezing=this.squeezing},e.exports=a},25098:(e,t,n)=>{var r=n(23305),i=n(39361),a=n(11112),s=n(25276),o=n(57452);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=o,e.exports=c},1386:(e,t,n)=>{var r=n(12393),i=n(62049),a=n(7144),s=n(7452),o=n(13964);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=o,e.exports=c},19770:(e,t,n)=>{var r=n(94715)(n(78942),"Map");e.exports=r},68250:(e,t,n)=>{var r=n(49753),i=n(5681),a=n(80088),s=n(54732),o=n(59068);function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=s,c.prototype.set=o,e.exports=c},65650:(e,t,n)=>{var r=n(78942).Symbol;e.exports=r},65111:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},11129:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},60906:(e,t,n)=>{var r=n(12762)("length");e.exports=r},52837:e=>{e.exports=function(e){return e.split("")}},97034:(e,t,n)=>{var r=n(46285);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},90313:(e,t,n)=>{var r=n(11129),i=n(20714);e.exports=function e(t,n,a,s,o){var c=-1,l=t.length;for(a||(a=i),o||(o=[]);++c<l;){var u=t[c];n>0&&a(u)?n>1?e(u,n-1,a,s,o):r(o,u):s||(o[o.length]=u)}return o}},87379:(e,t,n)=>{var r=n(65650),i=n(8870),a=n(29005),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):a(e)}},56027:(e,t,n)=>{var r=n(87379),i=n(80547);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},89624:(e,t,n)=>{var r=n(93655),i=n(64759),a=n(41580),s=n(64066),o=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,h=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?h:o).test(s(e))}},12762:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},26452:e=>{var t=Math.floor;e.exports=function(e,n){var r="";if(!e||n<1||n>9007199254740991)return r;do{n%2&&(r+=e),(n=t(n/2))&&(e+=e)}while(n);return r}},73501:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a}},52291:(e,t,n)=>{var r=n(65650),i=n(65111),a=n(53142),s=n(51187),o=r?r.prototype:void 0,c=o?o.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(s(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},86403:(e,t,n)=>{var r=n(62945),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},28931:(e,t,n)=>{var r=n(73501);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},41950:(e,t,n)=>{var r=n(78942)["__core-js_shared__"];e.exports=r},19929:(e,t,n)=>{var r=n(26452),i=n(52291),a=n(28931),s=n(83417),o=n(91090),c=n(82237),l=Math.ceil;e.exports=function(e,t){var n=(t=void 0===t?" ":i(t)).length;if(n<2)return n?r(t,e):t;var u=r(t,l(e/o(t)));return s(t)?a(c(u),0,e).join(""):u.slice(0,e)}},74967:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},44700:(e,t,n)=>{var r=n(79067);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},94715:(e,t,n)=>{var r=n(89624),i=n(20155);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},8870:(e,t,n)=>{var r=n(65650),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,o=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[o]=n:delete e[o]),i}},20155:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},83417:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},23305:(e,t,n)=>{var r=n(94497);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},39361:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},11112:(e,t,n)=>{var r=n(94497),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},25276:(e,t,n)=>{var r=n(94497),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},57452:(e,t,n)=>{var r=n(94497);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},20714:(e,t,n)=>{var r=n(65650),i=n(3283),a=n(53142),s=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||i(e)||!!(s&&e&&e[s])}},69632:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},74535:(e,t,n)=>{var r=n(46285),i=n(36529),a=n(69632),s=n(41580);e.exports=function(e,t,n){if(!s(n))return!1;var o=typeof t;return!!("number"==o?i(n)&&a(t,n.length):"string"==o&&t in n)&&r(n[t],e)}},79067:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},64759:(e,t,n)=>{var r,i=n(41950),a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!a&&a in e}},12393:e=>{e.exports=function(){this.__data__=[],this.size=0}},62049:(e,t,n)=>{var r=n(97034),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},7144:(e,t,n)=>{var r=n(97034);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7452:(e,t,n)=>{var r=n(97034);e.exports=function(e){return r(this.__data__,e)>-1}},13964:(e,t,n)=>{var r=n(97034);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},49753:(e,t,n)=>{var r=n(25098),i=n(1386),a=n(19770);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},5681:(e,t,n)=>{var r=n(44700);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},80088:(e,t,n)=>{var r=n(44700);e.exports=function(e){return r(this,e).get(e)}},54732:(e,t,n)=>{var r=n(44700);e.exports=function(e){return r(this,e).has(e)}},59068:(e,t,n)=>{var r=n(44700);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},94497:(e,t,n)=>{var r=n(94715)(Object,"create");e.exports=r},29005:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},78942:(e,t,n)=>{var r=n(74967),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},91090:(e,t,n)=>{var r=n(60906),i=n(83417),a=n(64962);e.exports=function(e){return i(e)?a(e):r(e)}},82237:(e,t,n)=>{var r=n(52837),i=n(83417),a=n(92013);e.exports=function(e){return i(e)?a(e):r(e)}},64066:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},62945:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},64962:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",a="[^"+t+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+r+"|"+i+")"+"?",l="[\\ufe0e\\ufe0f]?",u=l+c+("(?:\\u200d(?:"+[a,s,o].join("|")+")"+l+c+")*"),d="(?:"+[a+r+"?",r,s,o,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+d+u,"g");e.exports=function(e){for(var t=h.lastIndex=0;h.test(e);)++t;return t}},92013:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",a="[^"+t+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",o="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+r+"|"+i+")"+"?",l="[\\ufe0e\\ufe0f]?",u=l+c+("(?:\\u200d(?:"+[a,s,o].join("|")+")"+l+c+")*"),d="(?:"+[a+r+"?",r,s,o,n].join("|")+")",h=RegExp(i+"(?="+i+")|"+d+u,"g");e.exports=function(e){return e.match(h)||[]}},88126:(e,t,n)=>{var r=n(73501),i=n(74535),a=n(67642),s=Math.ceil,o=Math.max;e.exports=function(e,t,n){t=(n?i(e,t,n):void 0===t)?1:o(a(t),0);var c=null==e?0:e.length;if(!c||t<1)return[];for(var l=0,u=0,d=Array(s(c/t));l<c;)d[u++]=r(e,l,l+=t);return d}},46285:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},75857:(e,t,n)=>{var r=n(90313);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},3283:(e,t,n)=>{var r=n(56027),i=n(80547),a=Object.prototype,s=a.hasOwnProperty,o=a.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!o.call(e,"callee")};e.exports=c},53142:e=>{var t=Array.isArray;e.exports=t},36529:(e,t,n)=>{var r=n(93655),i=n(65387);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},22563:(e,t,n)=>{var r=n(87379),i=n(80547);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},93655:(e,t,n)=>{var r=n(87379),i=n(41580);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},65387:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},41580:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},80547:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},51187:(e,t,n)=>{var r=n(87379),i=n(80547);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},69011:(e,t,n)=>{var r=n(68250);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=e.apply(this,r);return n.cache=a.set(i,s)||a,s};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},70156:(e,t,n)=>{var r=n(19929),i=n(91090),a=n(67642),s=n(95243);e.exports=function(e,t,n){e=s(e);var o=(t=a(t))?i(e):0;return t&&o<t?r(t-o,n)+e:e}},43301:(e,t,n)=>{var r=n(6131),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},67642:(e,t,n)=>{var r=n(43301);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},6131:(e,t,n)=>{var r=n(86403),i=n(41580),a=n(51187),s=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=o.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):s.test(e)?NaN:+e}},95243:(e,t,n)=>{var r=n(52291);e.exports=function(e){return null==e?"":r(e)}},63275:(e,t,n)=>{"use strict";var r=n(35615),i=n(21848),a=n(25636).Buffer,s=new Array(16);function o(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function c(e,t){return e<<t|e>>>32-t}function l(e,t,n,r,i,a,s){return c(e+(t&n|~t&r)+i+a|0,s)+t|0}function u(e,t,n,r,i,a,s){return c(e+(t&r|n&~r)+i+a|0,s)+t|0}function d(e,t,n,r,i,a,s){return c(e+(t^n^r)+i+a|0,s)+t|0}function h(e,t,n,r,i,a,s){return c(e+(n^(t|~r))+i+a|0,s)+t|0}r(o,i),o.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var n=this._a,r=this._b,i=this._c,a=this._d;n=l(n,r,i,a,e[0],3614090360,7),a=l(a,n,r,i,e[1],3905402710,12),i=l(i,a,n,r,e[2],606105819,17),r=l(r,i,a,n,e[3],3250441966,22),n=l(n,r,i,a,e[4],4118548399,7),a=l(a,n,r,i,e[5],1200080426,12),i=l(i,a,n,r,e[6],2821735955,17),r=l(r,i,a,n,e[7],4249261313,22),n=l(n,r,i,a,e[8],1770035416,7),a=l(a,n,r,i,e[9],2336552879,12),i=l(i,a,n,r,e[10],4294925233,17),r=l(r,i,a,n,e[11],2304563134,22),n=l(n,r,i,a,e[12],1804603682,7),a=l(a,n,r,i,e[13],4254626195,12),i=l(i,a,n,r,e[14],2792965006,17),n=u(n,r=l(r,i,a,n,e[15],1236535329,22),i,a,e[1],4129170786,5),a=u(a,n,r,i,e[6],3225465664,9),i=u(i,a,n,r,e[11],643717713,14),r=u(r,i,a,n,e[0],3921069994,20),n=u(n,r,i,a,e[5],3593408605,5),a=u(a,n,r,i,e[10],38016083,9),i=u(i,a,n,r,e[15],3634488961,14),r=u(r,i,a,n,e[4],3889429448,20),n=u(n,r,i,a,e[9],568446438,5),a=u(a,n,r,i,e[14],3275163606,9),i=u(i,a,n,r,e[3],4107603335,14),r=u(r,i,a,n,e[8],1163531501,20),n=u(n,r,i,a,e[13],2850285829,5),a=u(a,n,r,i,e[2],4243563512,9),i=u(i,a,n,r,e[7],1735328473,14),n=d(n,r=u(r,i,a,n,e[12],2368359562,20),i,a,e[5],4294588738,4),a=d(a,n,r,i,e[8],2272392833,11),i=d(i,a,n,r,e[11],1839030562,16),r=d(r,i,a,n,e[14],4259657740,23),n=d(n,r,i,a,e[1],2763975236,4),a=d(a,n,r,i,e[4],1272893353,11),i=d(i,a,n,r,e[7],4139469664,16),r=d(r,i,a,n,e[10],3200236656,23),n=d(n,r,i,a,e[13],681279174,4),a=d(a,n,r,i,e[0],3936430074,11),i=d(i,a,n,r,e[3],3572445317,16),r=d(r,i,a,n,e[6],76029189,23),n=d(n,r,i,a,e[9],3654602809,4),a=d(a,n,r,i,e[12],3873151461,11),i=d(i,a,n,r,e[15],530742520,16),n=h(n,r=d(r,i,a,n,e[2],3299628645,23),i,a,e[0],4096336452,6),a=h(a,n,r,i,e[7],1126891415,10),i=h(i,a,n,r,e[14],2878612391,15),r=h(r,i,a,n,e[5],4237533241,21),n=h(n,r,i,a,e[12],1700485571,6),a=h(a,n,r,i,e[3],2399980690,10),i=h(i,a,n,r,e[10],4293915773,15),r=h(r,i,a,n,e[1],2240044497,21),n=h(n,r,i,a,e[8],1873313359,6),a=h(a,n,r,i,e[15],4264355552,10),i=h(i,a,n,r,e[6],2734768916,15),r=h(r,i,a,n,e[13],1309151649,21),n=h(n,r,i,a,e[4],4149444226,6),a=h(a,n,r,i,e[11],3174756917,10),i=h(i,a,n,r,e[2],718787259,15),r=h(r,i,a,n,e[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+i|0,this._d=this._d+a|0},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=a.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=o},89150:(e,t,n)=>{var r,i,a,s,o;r=n(30242),i=n(43934).utf8,a=n(85703),s=n(43934).bin,(o=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?s.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,l=1732584193,u=-271733879,d=-1732584194,h=271733878,p=0;p<n.length;p++)n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var f=o._ff,m=o._gg,y=o._hh,g=o._ii;for(p=0;p<n.length;p+=16){var b=l,v=u,w=d,E=h;l=f(l,u,d,h,n[p+0],7,-680876936),h=f(h,l,u,d,n[p+1],12,-389564586),d=f(d,h,l,u,n[p+2],17,606105819),u=f(u,d,h,l,n[p+3],22,-1044525330),l=f(l,u,d,h,n[p+4],7,-176418897),h=f(h,l,u,d,n[p+5],12,1200080426),d=f(d,h,l,u,n[p+6],17,-1473231341),u=f(u,d,h,l,n[p+7],22,-45705983),l=f(l,u,d,h,n[p+8],7,1770035416),h=f(h,l,u,d,n[p+9],12,-1958414417),d=f(d,h,l,u,n[p+10],17,-42063),u=f(u,d,h,l,n[p+11],22,-1990404162),l=f(l,u,d,h,n[p+12],7,1804603682),h=f(h,l,u,d,n[p+13],12,-40341101),d=f(d,h,l,u,n[p+14],17,-1502002290),l=m(l,u=f(u,d,h,l,n[p+15],22,1236535329),d,h,n[p+1],5,-165796510),h=m(h,l,u,d,n[p+6],9,-1069501632),d=m(d,h,l,u,n[p+11],14,643717713),u=m(u,d,h,l,n[p+0],20,-373897302),l=m(l,u,d,h,n[p+5],5,-701558691),h=m(h,l,u,d,n[p+10],9,38016083),d=m(d,h,l,u,n[p+15],14,-660478335),u=m(u,d,h,l,n[p+4],20,-405537848),l=m(l,u,d,h,n[p+9],5,568446438),h=m(h,l,u,d,n[p+14],9,-1019803690),d=m(d,h,l,u,n[p+3],14,-187363961),u=m(u,d,h,l,n[p+8],20,1163531501),l=m(l,u,d,h,n[p+13],5,-1444681467),h=m(h,l,u,d,n[p+2],9,-51403784),d=m(d,h,l,u,n[p+7],14,1735328473),l=y(l,u=m(u,d,h,l,n[p+12],20,-1926607734),d,h,n[p+5],4,-378558),h=y(h,l,u,d,n[p+8],11,-2022574463),d=y(d,h,l,u,n[p+11],16,1839030562),u=y(u,d,h,l,n[p+14],23,-35309556),l=y(l,u,d,h,n[p+1],4,-1530992060),h=y(h,l,u,d,n[p+4],11,1272893353),d=y(d,h,l,u,n[p+7],16,-155497632),u=y(u,d,h,l,n[p+10],23,-1094730640),l=y(l,u,d,h,n[p+13],4,681279174),h=y(h,l,u,d,n[p+0],11,-358537222),d=y(d,h,l,u,n[p+3],16,-722521979),u=y(u,d,h,l,n[p+6],23,76029189),l=y(l,u,d,h,n[p+9],4,-640364487),h=y(h,l,u,d,n[p+12],11,-421815835),d=y(d,h,l,u,n[p+15],16,530742520),l=g(l,u=y(u,d,h,l,n[p+2],23,-995338651),d,h,n[p+0],6,-198630844),h=g(h,l,u,d,n[p+7],10,1126891415),d=g(d,h,l,u,n[p+14],15,-1416354905),u=g(u,d,h,l,n[p+5],21,-57434055),l=g(l,u,d,h,n[p+12],6,1700485571),h=g(h,l,u,d,n[p+3],10,-1894986606),d=g(d,h,l,u,n[p+10],15,-1051523),u=g(u,d,h,l,n[p+1],21,-2054922799),l=g(l,u,d,h,n[p+8],6,1873313359),h=g(h,l,u,d,n[p+15],10,-30611744),d=g(d,h,l,u,n[p+6],15,-1560198380),u=g(u,d,h,l,n[p+13],21,1309151649),l=g(l,u,d,h,n[p+4],6,-145523070),h=g(h,l,u,d,n[p+11],10,-1120210379),d=g(d,h,l,u,n[p+2],15,718787259),u=g(u,d,h,l,n[p+9],21,-343485551),l=l+b>>>0,u=u+v>>>0,d=d+w>>>0,h=h+E>>>0}return r.endian([l,u,d,h])})._ff=function(e,t,n,r,i,a,s){var o=e+(t&n|~t&r)+(i>>>0)+s;return(o<<a|o>>>32-a)+t},o._gg=function(e,t,n,r,i,a,s){var o=e+(t&r|n&~r)+(i>>>0)+s;return(o<<a|o>>>32-a)+t},o._hh=function(e,t,n,r,i,a,s){var o=e+(t^n^r)+(i>>>0)+s;return(o<<a|o>>>32-a)+t},o._ii=function(e,t,n,r,i,a,s){var o=e+(n^(t|~r))+(i>>>0)+s;return(o<<a|o>>>32-a)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(o(e,t));return t&&t.asBytes?n:t&&t.asString?s.bytesToString(n):r.bytesToHex(n)}},21929:(e,t,n)=>{var r=n(82823),i=n(47048);function a(e){this.rand=e||new i.Rand}e.exports=a,a.create=function(e){return new a(e)},a.prototype._randbelow=function(e){var t=e.bitLength(),n=Math.ceil(t/8);do{var i=new r(this.rand.generate(n))}while(i.cmp(e)>=0);return i},a.prototype._randrange=function(e,t){var n=t.sub(e);return e.add(this._randbelow(n))},a.prototype.test=function(e,t,n){var i=e.bitLength(),a=r.mont(e),s=new r(1).toRed(a);t||(t=Math.max(1,i/48|0));for(var o=e.subn(1),c=0;!o.testn(c);c++);for(var l=e.shrn(c),u=o.toRed(a);t>0;t--){var d=this._randrange(new r(2),o);n&&n(d);var h=d.toRed(a).redPow(l);if(0!==h.cmp(s)&&0!==h.cmp(u)){for(var p=1;p<c;p++){if(0===(h=h.redSqr()).cmp(s))return!1;if(0===h.cmp(u))break}if(p===c)return!1}}return!0},a.prototype.getDivisor=function(e,t){var n=e.bitLength(),i=r.mont(e),a=new r(1).toRed(i);t||(t=Math.max(1,n/48|0));for(var s=e.subn(1),o=0;!s.testn(o);o++);for(var c=e.shrn(o),l=s.toRed(i);t>0;t--){var u=this._randrange(new r(2),s),d=e.gcd(u);if(0!==d.cmpn(1))return d;var h=u.toRed(i).redPow(c);if(0!==h.cmp(a)&&0!==h.cmp(l)){for(var p=1;p<o;p++){if(0===(h=h.redSqr()).cmp(a))return h.fromRed().subn(1).gcd(e);if(0===h.cmp(l))break}if(p===o)return(h=h.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},7784:e=>{function t(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}},89042:(e,t)=>{"use strict";var n=t;function r(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",n=0;n<e.length;n++)t+=r(e[n].toString(16));return t}n.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"!=typeof e){for(var r=0;r<e.length;r++)n[r]=0|e[r];return n}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(r=0;r<e.length;r+=2)n.push(parseInt(e[r]+e[r+1],16))}else for(r=0;r<e.length;r++){var i=e.charCodeAt(r),a=i>>8,s=255&i;a?n.push(a,s):n.push(s)}return n},n.zero2=r,n.toHex=i,n.encode=function(e,t){return"hex"===t?i(e):e}},89540:(e,t,n)=>{"use strict";var r=n(12267);t.certificate=n(77770);var i=r.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));t.RSAPrivateKey=i;var a=r.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.RSAPublicKey=a;var s=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}));t.PublicKey=s;var o=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),c=r.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(o),this.key("subjectPrivateKey").octstr())}));t.PrivateKey=c;var l=r.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));t.EncryptedPrivateKey=l;var u=r.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));t.DSAPrivateKey=u,t.DSAparam=r.define("DSAparam",(function(){this.int()}));var d=r.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(h),this.key("publicKey").optional().explicit(1).bitstr())}));t.ECPrivateKey=d;var h=r.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));t.signature=r.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},77770:(e,t,n)=>{"use strict";var r=n(12267),i=r.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),a=r.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),s=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),o=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())})),c=r.define("RelativeDistinguishedName",(function(){this.setof(a)})),l=r.define("RDNSequence",(function(){this.seqof(c)})),u=r.define("Name",(function(){this.choice({rdnSequence:this.use(l)})})),d=r.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))})),h=r.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),p=r.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(u),this.key("validity").use(d),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(h).optional())})),f=r.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(p),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())}));e.exports=f},72982:(e,t,n)=>{var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,s=n(28981),o=n(50178),c=n(25636).Buffer;e.exports=function(e,t){var n,l=e.toString(),u=l.match(r);if(u){var d="aes"+u[1],h=c.from(u[2],"hex"),p=c.from(u[3].replace(/[\r\n]/g,""),"base64"),f=s(t,h.slice(0,8),parseInt(u[1],10)).key,m=[],y=o.createDecipheriv(d,f,h);m.push(y.update(p)),m.push(y.final()),n=c.concat(m)}else{var g=l.match(a);n=c.from(g[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(i)[1],data:n}}},15069:(e,t,n)=>{var r=n(89540),i=n(81892),a=n(72982),s=n(50178),o=n(88619),c=n(25636).Buffer;function l(e){var t;"object"!=typeof e||c.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=c.from(e));var n,l,u=a(e,t),d=u.tag,h=u.data;switch(d){case"CERTIFICATE":l=r.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=r.PublicKey.decode(h,"der")),n=l.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=r.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+n)}case"ENCRYPTED PRIVATE KEY":h=function(e,t){var n=e.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),a=i[e.algorithm.decrypt.cipher.algo.join(".")],l=e.algorithm.decrypt.cipher.iv,u=e.subjectPrivateKey,d=parseInt(a.split("-")[1],10)/8,h=o.pbkdf2Sync(t,n,r,d,"sha1"),p=s.createDecipheriv(a,h,l),f=[];return f.push(p.update(u)),f.push(p.final()),c.concat(f)}(h=r.EncryptedPrivateKey.decode(h,"der"),t);case"PRIVATE KEY":switch(n=(l=r.PrivateKey.decode(h,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:r.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=r.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+n)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return{curve:(h=r.ECPrivateKey.decode(h,"der")).parameters.value,privateKey:h.privateKey};default:throw new Error("unknown key type "+d)}}e.exports=l,l.signature=r.signature},88619:(e,t,n)=>{t.pbkdf2=n(58399),t.pbkdf2Sync=n(84789)},58399:(e,t,n)=>{var r,i,a=n(25636).Buffer,s=n(9697),o=n(39858),c=n(84789),l=n(94021),u=n.g.crypto&&n.g.crypto.subtle,d={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},h=[];function p(){return i||(i=n.g.process&&n.g.process.nextTick?n.g.process.nextTick:n.g.queueMicrotask?n.g.queueMicrotask:n.g.setImmediate?n.g.setImmediate:n.g.setTimeout)}function f(e,t,n,r,i){return u.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return u.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:{name:i}},e,r<<3)})).then((function(e){return a.from(e)}))}e.exports=function(e,t,i,m,y,g){"function"==typeof y&&(g=y,y=void 0);var b=d[(y=y||"sha1").toLowerCase()];if(b&&"function"==typeof n.g.Promise){if(s(i,m),e=l(e,o,"Password"),t=l(t,o,"Salt"),"function"!=typeof g)throw new Error("No callback provided to pbkdf2");!function(e,t){e.then((function(e){p()((function(){t(null,e)}))}),(function(e){p()((function(){t(e)}))}))}(function(e){if(n.g.process&&!n.g.process.browser)return Promise.resolve(!1);if(!u||!u.importKey||!u.deriveBits)return Promise.resolve(!1);if(void 0!==h[e])return h[e];var t=f(r=r||a.alloc(8),r,10,128,e).then((function(){return!0})).catch((function(){return!1}));return h[e]=t,t}(b).then((function(n){return n?f(e,t,i,m,b):c(e,t,i,m,y)})),g)}else p()((function(){var n;try{n=c(e,t,i,m,y)}catch(e){return g(e)}g(null,n)}))}},39858:(e,t,n)=>{var r,i=n(39907);if(n.g.process&&n.g.process.browser)r="utf-8";else if(n.g.process&&n.g.process.version){r=parseInt(i.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else r="utf-8";e.exports=r},9697:e=>{var t=Math.pow(2,30)-1;e.exports=function(e,n){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof n)throw new TypeError("Key length not a number");if(n<0||n>t||n!=n)throw new TypeError("Bad key length")}},84789:(e,t,n)=>{var r=n(94277),i=n(25586),a=n(13229),s=n(25636).Buffer,o=n(9697),c=n(39858),l=n(94021),u=s.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function h(e,t,n){var o=function(e){function t(t){return a(e).update(t).digest()}function n(e){return(new i).update(e).digest()}return"rmd160"===e||"ripemd160"===e?n:"md5"===e?r:t}(e),c="sha512"===e||"sha384"===e?128:64;t.length>c?t=o(t):t.length<c&&(t=s.concat([t,u],c));for(var l=s.allocUnsafe(c+d[e]),h=s.allocUnsafe(c+d[e]),p=0;p<c;p++)l[p]=54^t[p],h[p]=92^t[p];var f=s.allocUnsafe(c+n+4);l.copy(f,0,0,c),this.ipad1=f,this.ipad2=l,this.opad=h,this.alg=e,this.blocksize=c,this.hash=o,this.size=d[e]}h.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,n,r,i){o(n,r);var a=new h(i=i||"sha1",e=l(e,c,"Password"),(t=l(t,c,"Salt")).length),u=s.allocUnsafe(r),p=s.allocUnsafe(t.length+4);t.copy(p,0,0,t.length);for(var f=0,m=d[i],y=Math.ceil(r/m),g=1;g<=y;g++){p.writeUInt32BE(g,t.length);for(var b=a.run(p,a.ipad1),v=b,w=1;w<n;w++){v=a.run(v,a.ipad2);for(var E=0;E<m;E++)b[E]^=v[E]}b.copy(u,f),f+=m}return u}},94021:(e,t,n)=>{var r=n(25636).Buffer;e.exports=function(e,t,n){if(r.isBuffer(e))return e;if("string"==typeof e)return r.from(e,t);if(ArrayBuffer.isView(e))return r.from(e.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")}},73623:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Perfume:()=>Ve,incrementUjNavigation:()=>je,markStep:()=>$e,markStepOnce:()=>Ue});var r,i,a={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{},enableNavigationTracking:!0},s=window,o=s.console,c=s.navigator,l=s.performance,u=function(){return c.deviceMemory},d=function(){return c.hardwareConcurrency},h="mark.",p=function(){return l&&!!l.getEntriesByType&&!!l.now&&!!l.mark},f="4g",m=!1,y={},g={value:0},b={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},v={value:0},w={value:0},E={},_={isHidden:!1,didChange:!1},S=function(){_.isHidden=!1,document.hidden&&(_.isHidden=document.hidden,_.didChange=!0)},T=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){o.warn("Perfume.js:",e)}return null},A=function(){return!!(d()&&d()<=4)||!!(u()&&u()<=4)},N=function(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return A()||t}},C=function(e){return parseFloat(e.toFixed(4))},M=function(e){return"number"!=typeof e?null:C(e/Math.pow(1024,2))},R=function(e,t,n,r,i){var o,l=function(){a.analyticsTracker&&(_.isHidden&&!["CLS","INP"].includes(e)||a.analyticsTracker({attribution:r,metricName:e,data:t,navigatorInformation:c?{deviceMemory:u()||0,hardwareConcurrency:d()||0,serviceWorkerStatus:"serviceWorker"in c?c.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:A(),isLowEndExperience:N(f,m)}:{},rating:n,navigationType:i}))};["CLS","INP"].includes(e)?l():(o=l,"requestIdleCallback"in s?s.requestIdleCallback(o,{timeout:3e3}):o())},x=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<g.value)){var t=e.duration-50;t>0&&(v.value+=t,w.value+=t)}}))};!function(e){e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable"}(r||(r={}));var k,I,O,P,L,D=((i={})[r.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},i[r.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},i[r.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},i[r.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},i[r.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4},i),B={RT:[100,200],TBT:[200,600],NTBT:[200,600]},j=function(e,t){return B[e]?t<=B[e][0]?"good":t<=B[e][1]?"needsImprovement":"poor":null},q=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=C(t[e]))})),R(e,t,null,n||{})},$=function(e){var t=e.attribution,n=e.name,r=e.rating,i=e.value,s=e.navigationType;"FCP"===n&&(g.value=i),["FCP","LCP"].includes(n)&&!E[0]&&(E[0]=T("longtask",x)),"FID"===n&&setTimeout((function(){_.didChange||($({attribution:t,name:"TBT",rating:j("TBT",v.value),value:v.value,navigationType:s}),q("dataConsumption",b.value))}),1e4);var o=C(i);o<=a.maxTime&&o>=0&&R(n,o,r,t,s)},U=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},F=function(e){if("loading"===document.readyState)return"loading";var t=U();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},V=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},H=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:V(r)+(r.className&&r.className.length?"."+r.className.replace(/\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},z=-1,W=function(){return z},K=function(e){addEventListener("pageshow",(function(t){t.persisted&&(z=t.timeStamp,e(t))}),!0)},G=function(){var e=U();return e&&e.activationStart||0},Q=function(e,t){var n=U(),r="navigate";return W()>=0?r="back-forward-cache":n&&(r=document.prerendering||G()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},J=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Y=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},X=function(e,t,n,r){var i,a;return function(s){t.value>=0&&(s||r)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Z=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ee=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},te=-1,ne=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},re=function(e){"hidden"===document.visibilityState&&te>-1&&(te="visibilitychange"===e.type?e.timeStamp:0,ae())},ie=function(){addEventListener("visibilitychange",re,!0),addEventListener("prerenderingchange",re,!0)},ae=function(){removeEventListener("visibilitychange",re,!0),removeEventListener("prerenderingchange",re,!0)},se=function(){return te<0&&(te=ne(),ie(),K((function(){setTimeout((function(){te=ne(),ie()}),0)}))),{get firstHiddenTime(){return te}}},oe=function(e,t){t=t||{},ee((function(){var n,r=[1800,3e3],i=se(),a=Q("FCP"),s=J("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(s.disconnect(),e.startTime<i.firstHiddenTime&&(a.value=Math.max(e.startTime-G(),0),a.entries.push(e),n(!0)))}))}));s&&(n=X(e,a,r,t.reportAllChanges),K((function(i){a=Q("FCP"),n=X(e,a,r,t.reportAllChanges),Z((function(){a.value=performance.now()-i.timeStamp,n(!0)}))})))}))},ce={passive:!0,capture:!0},le=new Date,ue=function(e,t){k||(k=t,I=e,O=new Date,pe(removeEventListener),de())},de=function(){if(I>=0&&I<O-le){var e={entryType:"first-input",name:k.type,target:k.target,cancelable:k.cancelable,startTime:k.timeStamp,processingStart:k.timeStamp+I};P.forEach((function(t){t(e)})),P=[]}},he=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){ue(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,ce),removeEventListener("pointercancel",r,ce)};addEventListener("pointerup",n,ce),addEventListener("pointercancel",r,ce)}(t,e):ue(t,e)}},pe=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,he,ce)}))},fe=0,me=1/0,ye=0,ge=function(e){e.forEach((function(e){e.interactionId&&(me=Math.min(me,e.interactionId),ye=Math.max(ye,e.interactionId),fe=ye?(ye-me)/7+1:0)}))},be=function(){return L?fe:performance.interactionCount||0},ve=0,we=function(){return be()-ve},Ee=[],_e={},Se=function(e){var t=Ee[Ee.length-1],n=_e[e.interactionId];if(n||Ee.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};_e[r.id]=r,Ee.push(r)}Ee.sort((function(e,t){return t.latency-e.latency})),Ee.splice(10).forEach((function(e){delete _e[e.id]}))}},Te=function(e,t){!function(e,t){t=t||{},ee((function(){var n=[200,500];"interactionCount"in performance||L||(L=J("event",ge,{type:"event",buffered:!0,durationThreshold:0}));var r,i=Q("INP"),a=function(e){e.forEach((function(e){e.interactionId&&Se(e),"first-input"===e.entryType&&!Ee.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&Se(e)}));var t,n=(t=Math.min(Ee.length-1,Math.floor(we()/50)),Ee[t]);n&&n.latency!==i.value&&(i.value=n.latency,i.entries=n.entries,r())},s=J("event",a,{durationThreshold:t.durationThreshold||40});r=X(e,i,n,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),Y((function(){a(s.takeRecords()),i.value<0&&we()>0&&(i.value=0,i.entries=[]),r(!0)})),K((function(){Ee=[],ve=be(),i=Q("INP"),r=X(e,i,n,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0];e.attribution={eventTarget:H(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:F(t.startTime)}}else e.attribution={}}(t),e(t)}),t)},Ae={},Ne=function e(t){document.prerendering?ee((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Ce=function(e,t){t=t||{};var n=[800,1800],r=Q("TTFB"),i=X(e,r,n,t.reportAllChanges);Ne((function(){var a=U();if(a){var s=a.responseStart;if(s<=0||s>performance.now())return;r.value=Math.max(s-G(),0),r.entries=[a],i(!0),K((function(){r=Q("TTFB",0),(i=X(e,r,n,t.reportAllChanges))(!0)}))}}))},Me=function(e){e.forEach((function(e){e.identifier&&$({attribution:{identifier:e.identifier},name:"ET",rating:null,value:e.startTime})}))},Re=function(e){e.forEach((function(e){if(a.isResourceTiming&&q("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;b.value[e.initiatorType]+=t,b.value.total+=t}}))},xe=function(){!function(e,t){Ce((function(e){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,r=Math.max(t.domainLookupStart-n,0),i=Math.max(t.connectStart-n,0),a=Math.max(t.requestStart-n,0);e.attribution={waitingTime:r,dnsTime:i-r,connectionTime:a-i,requestTime:e.value-a,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(e),function(e){e.value>0&&$(e)}(e)}),t)}(0,a.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[.1,.25],i=Q("CLS"),a=-1,s=0,o=[],c=function(t){a>-1&&e(t)},l=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=o[0],r=o[o.length-1];s&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(s+=e.value,o.push(e)):(s=e.value,o=[e]),s>i.value&&(i.value=s,i.entries=o,n())}}))},u=J("layout-shift",l);u&&(n=X(c,i,r,t.reportAllChanges),oe((function(e){a=e.value,i.value<0&&(i.value=0,n())})),Y((function(){l(u.takeRecords()),n(!0)})),K((function(){s=0,a=-1,i=Q("CLS",0),n=X(c,i,r,t.reportAllChanges),Z((function(){return n()}))})))}))}((function(e){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(r=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||r[0];if(n)return void(e.attribution={largestShiftTarget:H(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:F(t.startTime)})}}var r;e.attribution={}}(e),function(e){$(e)}(e)}),t)}(0,a.reportOptions.cls),function(e,t){oe((function(e){!function(e){if(e.entries.length){var t=U(),n=e.entries[e.entries.length-1];if(t){var r=t.activationStart||0,i=Math.max(0,t.responseStart-r);return void(e.attribution={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:F(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:F(W())}}(e),function(e){$(e)}(e)}),t)}(0,a.reportOptions.fcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[100,300],i=se(),a=Q("FID"),s=function(e){e.startTime<i.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),n(!0))},o=function(e){e.forEach(s)},c=J("first-input",o);n=X(e,a,r,t.reportAllChanges),c&&Y((function(){o(c.takeRecords()),c.disconnect()}),!0),c&&K((function(){var i;a=Q("FID"),n=X(e,a,r,t.reportAllChanges),P=[],I=-1,k=null,pe(addEventListener),i=s,P.push(i),de()}))}))}((function(e){!function(e){var t=e.entries[0];e.attribution={eventTarget:H(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:F(t.startTime)}}(e),function(e){$(e)}(e)}),t)}(0,a.reportOptions.fid),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[2500,4e3],i=se(),a=Q("LCP"),s=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-G(),0);r<i.firstHiddenTime&&(a.value=r,a.entries=[t],n())}},o=J("largest-contentful-paint",s);if(o){n=X(e,a,r,t.reportAllChanges);var c=function(){Ae[a.id]||(s(o.takeRecords()),o.disconnect(),Ae[a.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),Y(c,!0),K((function(i){a=Q("LCP"),n=X(e,a,r,t.reportAllChanges),Z((function(){a.value=performance.now()-i.timeStamp,Ae[a.id]=!0,n(!0)}))}))}}))}((function(e){!function(e){if(e.entries.length){var t=U();if(t){var n=t.activationStart||0,r=e.entries[e.entries.length-1],i=r.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===r.url}))[0],a=Math.max(0,t.responseStart-n),s=Math.max(a,i?(i.requestStart||i.startTime)-n:0),o=Math.max(s,i?i.responseEnd-n:0),c=Math.max(o,r?r.startTime-n:0),l={element:H(r.element),timeToFirstByte:a,resourceLoadDelay:s-a,resourceLoadTime:o-s,elementRenderDelay:c-o,navigationEntry:t,lcpEntry:r};return r.url&&(l.url=r.url),i&&(l.lcpResourceEntry=i),void(e.attribution=l)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(e),function(e){$(e)}(e)}),t)}(0,a.reportOptions.lcp),Te((function(e){return $(e)}),a.reportOptions.inp),a.isResourceTiming&&T("resource",Re),a.isElementTiming&&T("element",Me)},ke=function(e){var t="usageDetails"in e?e.usageDetails:{};q("storageEstimate",{quota:M(e.quota),usage:M(e.usage),caches:M(t.caches),indexedDB:M(t.indexedDB),serviceWorker:M(t.serviceWorkerRegistrations)})},Ie={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Oe=function(e){delete Ie.active[e]},Pe=function(){return Ie.navigationSteps},Le=function(e){var t;return null!==(t=Pe()[e])&&void 0!==t?t:{}},De=function(e,t,n){var r="step."+e,i=l.getEntriesByName(h+t).length>0;if(l.getEntriesByName(h+n).length>0&&a.steps){var s=D[a.steps[e].threshold],o=s.maxOutlierThreshold,c=s.vitalsThresholds;if(i){var u=l.measure(r,h+t,h+n),d=u.duration;if(d<=o){var p=function(e,t){return e<=t[0]?"good":e<=t[1]?"needsImprovement":"poor"}(d,c);d>=0&&(R("userJourneyStep",d,p,{stepName:e},void 0),l.measure("step.".concat(e,"_vitals_").concat(p),{start:u.startTime+u.duration,end:u.startTime+u.duration,detail:{type:"stepVital",duration:d}}))}}}},Be=function(){var e=Pe(),t=Ie.startMarkToStepsMap,n=Object.keys(e).length;if(0===n)return{};var r={},i=n-1,a=Le(i);if(Object.keys(a).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))})),n>1){var s=Le(i-1);Object.keys(s).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))}))}return r},je=function(){var e,t=Object.keys(Ie.navigationSteps).length;Ie.navigationSteps[t]={};var n=Be();null===(e=a.onMarkStep)||void 0===e||e.call(a,"",Object.keys(n))},qe=function(e){var t,n,r,i,s,o,c;if(Ie.finalMarkToStepsMap[e]){!function(e){var t=Ie.navigationSteps,n=Ie.finalMarkToStepsMap,r=Object.keys(t).length;if(0!==r){var i=r-1,a=Le(i);if(a&&n[e]){var s=n[e];s&&Object.keys(s).forEach((function(e){if(a[e]){var n=Le(i)||{};n[e]=!1,t[i]=n}if(r>1){var s=i-1,o=Le(s);o[e]&&(o[e]=!1,t[s]=o)}}))}}}(e);var l=Ie.finalMarkToStepsMap[e];Object.keys(l).forEach((function(t){var n=l[t];n.forEach(Oe),Promise.all(n.map((function(n){return function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function s(e){try{c(r.next(e))}catch(e){a(e)}}function o(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){return function(e,t){var n,r,i,a,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}(this,(function(r){switch(r.label){case 0:return[4,De(n,t,e)];case 1:return r.sent(),[2]}}))}))}))).catch((function(){}))}))}else r=e,i=Ie.navigationSteps,s=Object.keys(i).length,(c=Le(o=(s>0?s:1)-1)||[])[r]=!0,i[o]=c,function(e){var t,n=null!==(t=Ie.startMarkToStepsMap[e])&&void 0!==t?t:[];Object.keys(n).forEach((function(e){Ie.active[e]||(Ie.active[e]=!0)}))}(e);if(a.enableNavigationTracking){var u=Be();null===(t=a.onMarkStep)||void 0===t||t.call(a,e,Object.keys(u))}else null===(n=a.onMarkStep)||void 0===n||n.call(a,e,Object.keys(Ie.active))},$e=function(e){l.mark(h+e),qe(e)},Ue=function(e){0===l.getEntriesByName(h+e).length&&(l.mark(h+e),qe(e))},Fe=0,Ve=function(){function e(e){if(void 0===e&&(e={}),this.v="9.0.0-rc.3",a.analyticsTracker=e.analyticsTracker,a.isResourceTiming=!!e.resourceTiming,a.isElementTiming=!!e.elementTiming,a.maxTime=e.maxMeasureTime||a.maxTime,a.reportOptions=e.reportOptions||a.reportOptions,a.steps=e.steps,a.onMarkStep=e.onMarkStep,a.enableNavigationTracking=e.enableNavigationTracking,p()){"PerformanceObserver"in s&&xe(),void 0!==document.hidden&&document.addEventListener("visibilitychange",S);var t=function(){if(!p())return{};var e=l.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();q("navigationTiming",t),t.redirectTime&&$({attribution:{},name:"RT",rating:j("RT",t.redirectTime),value:t.redirectTime}),q("networkInformation",function(){if("connection"in c){var e=c.connection;return"object"!=typeof e?{}:(f=e.effectiveType,m=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),c&&c.storage&&"function"==typeof c.storage.estimate&&c.storage.estimate().then(ke),a.steps&&a.steps&&(Ie.startMarkToStepsMap={},Ie.finalMarkToStepsMap={},Ie.active={},Ie.navigationSteps={},Object.entries(a.steps).forEach((function(e){var t,n,r=e[0],i=e[1].marks,a=i[0],s=i[1],o=null!==(n=Ie.startMarkToStepsMap[a])&&void 0!==n?n:{};if(o[r]=!0,Ie.startMarkToStepsMap[a]=o,Ie.finalMarkToStepsMap[s]){var c=Ie.finalMarkToStepsMap[s][a]||[];c.push(r),Ie.finalMarkToStepsMap[s][a]=c}else Ie.finalMarkToStepsMap[s]=((t={})[a]=[r],t)})))}}return e.prototype.start=function(e){p()&&!y[e]&&(y[e]=!0,l.mark("mark_".concat(e,"_start")))},e.prototype.end=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),p()&&y[e]){l.mark("mark_".concat(e,"_end")),delete y[e];var r=function(e){l.measure(e,"mark_".concat(e,"_start"),"mark_".concat(e,"_end"));var t=l.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t.duration:-1}(e);n&&q(e,C(r),t)}},e.prototype.endPaint=function(e,t){var n=this;setTimeout((function(){n.end(e,t)}))},e.prototype.clear=function(e){delete y[e],l.clearMarks&&(l.clearMarks("mark_".concat(e,"_start")),l.clearMarks("mark_".concat(e,"_end")))},e.prototype.markNTBT=function(){var e=this;this.start("ntbt"),w.value=0,clearTimeout(Fe),Fe=setTimeout((function(){e.end("ntbt",{},!1),$({attribution:{},name:"NTBT",rating:j("NTBT",w.value),value:w.value}),w.value=0}),2e3)},e}()},5181:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Component:()=>N,Fragment:()=>A,cloneElement:()=>K,createContext:()=>G,createElement:()=>_,createRef:()=>T,h:()=>_,hydrate:()=>W,isValidElement:()=>s,options:()=>i,render:()=>z,toChildArray:()=>P});var r,i,a,s,o,c,l,u,d,h,p,f,m,y={},g=[],b=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,v=Array.isArray;function w(e,t){for(var n in t)e[n]=t[n];return e}function E(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function _(e,t,n){var i,a,s,o={};for(s in t)"key"==s?i=t[s]:"ref"==s?a=t[s]:o[s]=t[s];if(arguments.length>2&&(o.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===o[s]&&(o[s]=e.defaultProps[s]);return S(e,o,i,a,null)}function S(e,t,n,r,s){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==s?++a:s,__i:-1,__u:0};return null==s&&null!=i.vnode&&i.vnode(o),o}function T(){return{current:null}}function A(e){return e.children}function N(e,t){this.props=e,this.context=t}function C(e,t){if(null==t)return e.__?C(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?C(e):null}function M(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return M(e)}}function R(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!x.__r++||c!==i.debounceRendering)&&((c=i.debounceRendering)||l)(x)}function x(){var e,t,n,r,a,s,c,l;for(o.sort(u);e=o.shift();)e.__d&&(t=o.length,r=void 0,s=(a=(n=e).__v).__e,c=[],l=[],n.__P&&((r=w({},a)).__v=a.__v+1,i.vnode&&i.vnode(r),q(n.__P,r,a,n.__n,n.__P.namespaceURI,32&a.__u?[s]:null,c,null==s?C(a):s,!!(32&a.__u),l),r.__v=a.__v,r.__.__k[r.__i]=r,$(c,r,l),r.__e!=s&&M(r)),o.length>t&&o.sort(u));x.__r=0}function k(e,t,n,r,i,a,s,o,c,l,u){var d,h,p,f,m,b,v=r&&r.__k||g,w=t.length;for(c=I(n,t,v,c,w),d=0;d<w;d++)null!=(p=n.__k[d])&&(h=-1===p.__i?y:v[p.__i]||y,p.__i=d,b=q(e,p,h,i,a,s,o,c,l,u),f=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&F(h.ref,null,p),u.push(p.ref,p.__c||f,p)),null==m&&null!=f&&(m=f),4&p.__u||h.__k===p.__k?c=O(p,c,e):"function"==typeof p.type&&void 0!==b?c=b:f&&(c=f.nextSibling),p.__u&=-7);return n.__e=m,c}function I(e,t,n,r,i){var a,s,o,c,l,u=n.length,d=u,h=0;for(e.__k=new Array(i),a=0;a<i;a++)null!=(s=t[a])&&"boolean"!=typeof s&&"function"!=typeof s?(c=a+h,(s=e.__k[a]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?S(null,s,null,null,null):v(s)?S(A,{children:s},null,null,null):void 0===s.constructor&&s.__b>0?S(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,o=null,-1!==(l=s.__i=L(s,n,c,d))&&(d--,(o=n[l])&&(o.__u|=2)),null==o||null===o.__v?(-1==l&&h--,"function"!=typeof s.type&&(s.__u|=4)):l!=c&&(l==c-1?h--:l==c+1?h++:(l>c?h--:h++,s.__u|=4))):e.__k[a]=null;if(d)for(a=0;a<u;a++)null!=(o=n[a])&&0==(2&o.__u)&&(o.__e==r&&(r=C(o)),V(o,o));return r}function O(e,t,n){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=O(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=C(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function P(e,t){return t=t||[],null==e||"boolean"==typeof e||(v(e)?e.some((function(e){P(e,t)})):t.push(e)),t}function L(e,t,n,r){var i,a,s=e.key,o=e.type,c=t[n];if(null===c||c&&s==c.key&&o===c.type&&0==(2&c.__u))return n;if(r>(null!=c&&0==(2&c.__u)?1:0))for(i=n-1,a=n+1;i>=0||a<t.length;){if(i>=0){if((c=t[i])&&0==(2&c.__u)&&s==c.key&&o===c.type)return i;i--}if(a<t.length){if((c=t[a])&&0==(2&c.__u)&&s==c.key&&o===c.type)return a;a++}}return-1}function D(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||b.test(t)?n:n+"px"}function B(e,t,n,r,i){var a;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||D(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||D(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])a=t!=(t=t.replace(d,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=n,n?r?n.u=r.u:(n.u=h,e.addEventListener(t,a?f:p,a)):e.removeEventListener(t,a?f:p,a);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function j(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=h++;else if(t.t<n.u)return;return n(i.event?i.event(t):t)}}}function q(e,t,n,r,a,s,o,c,l,u){var d,h,p,f,m,y,g,b,_,S,T,C,M,R,x,I,O,P=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),s=[c=t.__e=n.__e]),(d=i.__b)&&d(t);e:if("function"==typeof P)try{if(b=t.props,_="prototype"in P&&P.prototype.render,S=(d=P.contextType)&&r[d.__c],T=d?S?S.props.value:d.__:r,n.__c?g=(h=t.__c=n.__c).__=h.__E:(_?t.__c=h=new P(b,T):(t.__c=h=new N(b,T),h.constructor=P,h.render=H),S&&S.sub(h),h.props=b,h.state||(h.state={}),h.context=T,h.__n=r,p=h.__d=!0,h.__h=[],h._sb=[]),_&&null==h.__s&&(h.__s=h.state),_&&null!=P.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=w({},h.__s)),w(h.__s,P.getDerivedStateFromProps(b,h.__s))),f=h.props,m=h.state,h.__v=t,p)_&&null==P.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),_&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(_&&null==P.getDerivedStateFromProps&&b!==f&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(b,T),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(b,h.__s,T)||t.__v==n.__v)){for(t.__v!=n.__v&&(h.props=b,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),C=0;C<h._sb.length;C++)h.__h.push(h._sb[C]);h._sb=[],h.__h.length&&o.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(b,h.__s,T),_&&null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(f,m,y)}))}if(h.context=T,h.props=b,h.__P=e,h.__e=!1,M=i.__r,R=0,_){for(h.state=h.__s,h.__d=!1,M&&M(t),d=h.render(h.props,h.state,h.context),x=0;x<h._sb.length;x++)h.__h.push(h._sb[x]);h._sb=[]}else do{h.__d=!1,M&&M(t),d=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++R<25);h.state=h.__s,null!=h.getChildContext&&(r=w(w({},r),h.getChildContext())),_&&!p&&null!=h.getSnapshotBeforeUpdate&&(y=h.getSnapshotBeforeUpdate(f,m)),c=k(e,v(I=null!=d&&d.type===A&&null==d.key?d.props.children:d)?I:[I],t,n,r,a,s,o,c,l,u),h.base=t.__e,t.__u&=-161,h.__h.length&&o.push(h),g&&(h.__E=h.__=null)}catch(e){if(t.__v=null,l||null!=s)if(e.then){for(t.__u|=l?160:128;c&&8==c.nodeType&&c.nextSibling;)c=c.nextSibling;s[s.indexOf(c)]=null,t.__e=c}else for(O=s.length;O--;)E(s[O]);else t.__e=n.__e,t.__k=n.__k;i.__e(e,t,n)}else null==s&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):c=t.__e=U(n.__e,t,n,r,a,s,o,l,u);return(d=i.diffed)&&d(t),128&t.__u?void 0:c}function $(e,t,n){for(var r=0;r<n.length;r++)F(n[r],n[++r],n[++r]);i.__c&&i.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){i.__e(e,t.__v)}}))}function U(e,t,n,a,s,o,c,l,u){var d,h,p,f,m,g,b,w=n.props,_=t.props,S=t.type;if("svg"==S?s="http://www.w3.org/2000/svg":"math"==S?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),null!=o)for(d=0;d<o.length;d++)if((m=o[d])&&"setAttribute"in m==!!S&&(S?m.localName==S:3==m.nodeType)){e=m,o[d]=null;break}if(null==e){if(null==S)return document.createTextNode(_);e=document.createElementNS(s,S,_.is&&_),l&&(i.__m&&i.__m(t,o),l=!1),o=null}if(null===S)w===_||l&&e.data===_||(e.data=_);else{if(o=o&&r.call(e.childNodes),w=n.props||y,!l&&null!=o)for(w={},d=0;d<e.attributes.length;d++)w[(m=e.attributes[d]).name]=m.value;for(d in w)if(m=w[d],"children"==d);else if("dangerouslySetInnerHTML"==d)p=m;else if(!(d in _)){if("value"==d&&"defaultValue"in _||"checked"==d&&"defaultChecked"in _)continue;B(e,d,null,m,s)}for(d in _)m=_[d],"children"==d?f=m:"dangerouslySetInnerHTML"==d?h=m:"value"==d?g=m:"checked"==d?b=m:l&&"function"!=typeof m||w[d]===m||B(e,d,m,w[d],s);if(h)l||p&&(h.__html===p.__html||h.__html===e.innerHTML)||(e.innerHTML=h.__html),t.__k=[];else if(p&&(e.innerHTML=""),k(e,v(f)?f:[f],t,n,a,"foreignObject"==S?"http://www.w3.org/1999/xhtml":s,o,c,o?o[0]:n.__k&&C(n,0),l,u),null!=o)for(d=o.length;d--;)E(o[d]);l||(d="value","progress"==S&&null==g?e.removeAttribute("value"):void 0!==g&&(g!==e[d]||"progress"==S&&!g||"option"==S&&g!==w[d])&&B(e,d,g,w[d],s),d="checked",void 0!==b&&b!==e[d]&&B(e,d,b,w[d],s))}return e}function F(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(e){i.__e(e,n)}}function V(e,t,n){var r,a;if(i.unmount&&i.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||F(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){i.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(a=0;a<r.length;a++)r[a]&&V(r[a],t,n||"function"!=typeof e.type);n||E(e.__e),e.__c=e.__=e.__e=void 0}function H(e,t,n){return this.constructor(e,n)}function z(e,t,n){var a,s,o,c;t==document&&(t=document.documentElement),i.__&&i.__(e,t),s=(a="function"==typeof n)?null:n&&n.__k||t.__k,o=[],c=[],q(t,e=(!a&&n||t).__k=_(A,null,[e]),s||y,y,t.namespaceURI,!a&&n?[n]:s?null:t.firstChild?r.call(t.childNodes):null,o,!a&&n?n:s?s.__e:t.firstChild,a,c),$(o,e,c)}function W(e,t){z(e,t,W)}function K(e,t,n){var i,a,s,o,c=w({},e.props);for(s in e.type&&e.type.defaultProps&&(o=e.type.defaultProps),t)"key"==s?i=t[s]:"ref"==s?a=t[s]:c[s]=void 0===t[s]&&void 0!==o?o[s]:t[s];return arguments.length>2&&(c.children=arguments.length>3?r.call(arguments,2):n),S(e.type,c,i||e.key,a||e.ref,null)}function G(e,t){var n={__c:t="__cC"+m++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=new Set,(r={})[t]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.forEach((function(e){e.__e=!0,R(e)}))},this.sub=function(e){n.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.delete(e),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}r=g.slice,i={__e:function(e,t,n,r){for(var i,a,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((a=i.constructor)&&null!=a.getDerivedStateFromError&&(i.setState(a.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(t){e=t}throw e}},a=0,s=function(e){return null!=e&&null==e.constructor},N.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=w({},this.state),"function"==typeof e&&(e=e(w({},n),this.props)),e&&w(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),R(this))},N.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),R(this))},N.prototype.render=A,o=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,u=function(e,t){return e.__v.__b-t.__v.__b},x.__r=0,d=/(PointerCapture)$|Capture$/i,h=0,p=j(!1),f=j(!0),m=0},83817:(e,t,n)=>{"use strict";n.r(t),n.d(t,{useCallback:()=>A,useContext:()=>N,useDebugValue:()=>C,useEffect:()=>w,useErrorBoundary:()=>M,useId:()=>R,useImperativeHandle:()=>S,useLayoutEffect:()=>E,useMemo:()=>T,useReducer:()=>v,useRef:()=>_,useState:()=>b});var r,i,a,s,o=n(5181),c=0,l=[],u=o.options,d=u.__b,h=u.__r,p=u.diffed,f=u.__c,m=u.unmount,y=u.__;function g(e,t){u.__h&&u.__h(i,e,c||t),c=0;var n=i.__H||(i.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function b(e){return c=1,v(D,e)}function v(e,t,n){var a=g(r++,2);if(a.t=e,!a.__c&&(a.__=[n?n(t):D(void 0,t),function(e){var t=a.__N?a.__N[0]:a.__[0],n=a.t(t,e);t!==n&&(a.__N=[n,a.__[1]],a.__c.setState({}))}],a.__c=i,!i.u)){var s=function(e,t,n){if(!a.__c.__H)return!0;var r=a.__c.__H.__.filter((function(e){return!!e.__c}));if(r.every((function(e){return!e.__N})))return!o||o.call(this,e,t,n);var i=a.__c.props!==e;return r.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(i=!0)}})),o&&o.call(this,e,t,n)||i};i.u=!0;var o=i.shouldComponentUpdate,c=i.componentWillUpdate;i.componentWillUpdate=function(e,t,n){if(this.__e){var r=o;o=void 0,s(e,t,n),o=r}c&&c.call(this,e,t,n)},i.shouldComponentUpdate=s}return a.__N||a.__}function w(e,t){var n=g(r++,3);!u.__s&&L(n.__H,t)&&(n.__=e,n.i=t,i.__H.__h.push(n))}function E(e,t){var n=g(r++,4);!u.__s&&L(n.__H,t)&&(n.__=e,n.i=t,i.__h.push(n))}function _(e){return c=5,T((function(){return{current:e}}),[])}function S(e,t,n){c=6,E((function(){return"function"==typeof e?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0}),null==n?n:n.concat(e))}function T(e,t){var n=g(r++,7);return L(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function A(e,t){return c=8,T((function(){return e}),t)}function N(e){var t=i.context[e.__c],n=g(r++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(i)),t.props.value):e.__}function C(e,t){u.useDebugValue&&u.useDebugValue(t?t(e):e)}function M(e){var t=g(r++,10),n=b();return t.__=e,i.componentDidCatch||(i.componentDidCatch=function(e,r){t.__&&t.__(e,r),n[1](e)}),[n[0],function(){n[1](void 0)}]}function R(){var e=g(r++,11);if(!e.__){for(var t=i.__v;null!==t&&!t.__m&&null!==t.__;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function x(){for(var e;e=l.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(O),e.__H.__h.forEach(P),e.__H.__h=[]}catch(t){e.__H.__h=[],u.__e(t,e.__v)}}u.__b=function(e){i=null,d&&d(e)},u.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),y&&y(e,t)},u.__r=function(e){h&&h(e),r=0;var t=(i=e.__c).__H;t&&(a===i?(t.__h=[],i.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0}))):(t.__h.forEach(O),t.__h.forEach(P),t.__h=[],r=0)),a=i},u.diffed=function(e){p&&p(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==l.push(t)&&s===u.requestAnimationFrame||((s=u.requestAnimationFrame)||I)(x)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.i=void 0}))),a=i=null},u.__c=function(e,t){t.some((function(e){try{e.__h.forEach(O),e.__h=e.__h.filter((function(e){return!e.__||P(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],u.__e(n,e.__v)}})),f&&f(e,t)},u.unmount=function(e){m&&m(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{O(e)}catch(e){t=e}})),n.__H=void 0,t&&u.__e(t,n.__v))};var k="function"==typeof requestAnimationFrame;function I(e){var t,n=function(){clearTimeout(r),k&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);k&&(t=requestAnimationFrame(n))}function O(e){var t=i,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),i=t}function P(e){var t=i;e.__c=e.__(),i=t}function L(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function D(e,t){return"function"==typeof t?t(e):t}},39907:e=>{var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var o,c=[],l=!1,u=-1;function d(){l&&o&&(l=!1,o.length?c=o.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(o=c,c=[];++u<t;)o&&o[u].run();u=-1,t=c.length}o=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},44055:(e,t,n)=>{t.publicEncrypt=n(43737),t.privateDecrypt=n(9107),t.privateEncrypt=function(e,n){return t.publicEncrypt(e,n,!0)},t.publicDecrypt=function(e,n){return t.privateDecrypt(e,n,!0)}},82965:(e,t,n)=>{var r=n(13257),i=n(25636).Buffer;function a(e){var t=i.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var n,s=i.alloc(0),o=0;s.length<t;)n=a(o++),s=i.concat([s,r("sha1").update(e).update(n).digest()]);return s.slice(0,t)}},9107:(e,t,n)=>{var r=n(15069),i=n(82965),a=n(46358),s=n(82823),o=n(84215),c=n(13257),l=n(55810),u=n(25636).Buffer;e.exports=function(e,t,n){var d;d=e.padding?e.padding:n?1:4;var h,p=r(e),f=p.modulus.byteLength();if(t.length>f||new s(t).cmp(p.modulus)>=0)throw new Error("decryption error");h=n?l(new s(t),p):o(t,p);var m=u.alloc(f-h.length);if(h=u.concat([m,h],f),4===d)return function(e,t){var n=e.modulus.byteLength(),r=c("sha1").update(u.alloc(0)).digest(),s=r.length;if(0!==t[0])throw new Error("decryption error");var o=t.slice(1,s+1),l=t.slice(s+1),d=a(o,i(l,s)),h=a(l,i(d,n-s-1));if(function(e,t){e=u.from(e),t=u.from(t);var n=0,r=e.length;e.length!==t.length&&(n++,r=Math.min(e.length,t.length));var i=-1;for(;++i<r;)n+=e[i]^t[i];return n}(r,h.slice(0,s)))throw new Error("decryption error");var p=s;for(;0===h[p];)p++;if(1!==h[p++])throw new Error("decryption error");return h.slice(p)}(p,h);if(1===d)return function(e,t,n){var r=t.slice(0,2),i=2,a=0;for(;0!==t[i++];)if(i>=t.length){a++;break}var s=t.slice(2,i-1);("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&a++;s.length<8&&a++;if(a)throw new Error("decryption error");return t.slice(i)}(0,h,n);if(3===d)return h;throw new Error("unknown padding")}},43737:(e,t,n)=>{var r=n(15069),i=n(22644),a=n(13257),s=n(82965),o=n(46358),c=n(82823),l=n(55810),u=n(84215),d=n(25636).Buffer;e.exports=function(e,t,n){var h;h=e.padding?e.padding:n?1:4;var p,f=r(e);if(4===h)p=function(e,t){var n=e.modulus.byteLength(),r=t.length,l=a("sha1").update(d.alloc(0)).digest(),u=l.length,h=2*u;if(r>n-h-2)throw new Error("message too long");var p=d.alloc(n-r-h-2),f=n-u-1,m=i(u),y=o(d.concat([l,p,d.alloc(1,1),t],f),s(m,f)),g=o(m,s(y,u));return new c(d.concat([d.alloc(1),g,y],n))}(f,t);else if(1===h)p=function(e,t,n){var r,a=t.length,s=e.modulus.byteLength();if(a>s-11)throw new Error("message too long");r=n?d.alloc(s-a-3,255):function(e){var t,n=d.allocUnsafe(e),r=0,a=i(2*e),s=0;for(;r<e;)s===a.length&&(a=i(2*e),s=0),(t=a[s++])&&(n[r++]=t);return n}(s-a-3);return new c(d.concat([d.from([0,n?1:2]),r,d.alloc(1),t],s))}(f,t,n);else{if(3!==h)throw new Error("unknown padding");if((p=new c(t)).cmp(f.modulus)>=0)throw new Error("data too long for modulus")}return n?u(p,f):l(p,f)}},55810:(e,t,n)=>{var r=n(82823),i=n(25636).Buffer;e.exports=function(e,t){return i.from(e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed().toArray())}},46358:e=>{e.exports=function(e,t){for(var n=e.length,r=-1;++r<n;)e[r]^=t[r];return e}},22644:(e,t,n)=>{"use strict";var r=n(39907),i=65536,a=4294967295;var s=n(25636).Buffer,o=n.g.crypto||n.g.msCrypto;o&&o.getRandomValues?e.exports=function(e,t){if(e>a)throw new RangeError("requested too many random bytes");var n=s.allocUnsafe(e);if(e>0)if(e>i)for(var c=0;c<e;c+=i)o.getRandomValues(n.slice(c,c+i));else o.getRandomValues(n);if("function"==typeof t)return r.nextTick((function(){t(null,n)}));return n}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},69904:(e,t,n)=>{"use strict";var r=n(39907);function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var a=n(25636),s=n(22644),o=a.Buffer,c=a.kMaxLength,l=n.g.crypto||n.g.msCrypto,u=Math.pow(2,32)-1;function d(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>u||e<0)throw new TypeError("offset must be a uint32");if(e>c||e>t)throw new RangeError("offset out of range")}function h(e,t,n){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>u||e<0)throw new TypeError("size must be a uint32");if(e+t>n||e>c)throw new RangeError("buffer too small")}function p(e,t,n,i){if(r.browser){var a=e.buffer,o=new Uint8Array(a,t,n);return l.getRandomValues(o),i?void r.nextTick((function(){i(null,e)})):e}if(!i)return s(n).copy(e,t),e;s(n,(function(n,r){if(n)return i(n);r.copy(e,t),i(null,e)}))}l&&l.getRandomValues||!r.browser?(t.randomFill=function(e,t,r,i){if(!(o.isBuffer(e)||e instanceof n.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)i=t,t=0,r=e.length;else if("function"==typeof r)i=r,r=e.length-t;else if("function"!=typeof i)throw new TypeError('"cb" argument must be a function');return d(t,e.length),h(r,t,e.length),p(e,t,r,i)},t.randomFillSync=function(e,t,r){void 0===t&&(t=0);if(!(o.isBuffer(e)||e instanceof n.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');d(t,e.length),void 0===r&&(r=e.length-t);return h(r,t,e.length),p(e,t,r)}):(t.randomFill=i,t.randomFillSync=i)},47400:(e,t,n)=>{"use strict";var r=n(14041),i=n(1993);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=P&&e[P]||e["@@iterator"])?e:null}var D,B=Object.assign;function j(e){if(void 0===D)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var q=!1;function $(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var i=t.stack.split("\n"),a=r.stack.split("\n"),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||i[s]!==a[o]){var c="\n"+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=s&&0<=o);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1);case 11:return e=$(e.type.render,!1);case 1:return e=$(e.type,!0);default:return""}}function F(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case S:return"Fragment";case _:return"Portal";case A:return"Profiler";case T:return"StrictMode";case R:return"Suspense";case x:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case N:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:F(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return F(e(t))}catch(e){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function z(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=z(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ae(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ge=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Se=null,Te=null;function Ae(e){if(e=vi(e)){if("function"!=typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=Ei(t),_e(e.stateNode,e.type,t))}}function Ne(e){Se?Te?Te.push(e):Te=[e]:Se=e}function Ce(){if(Se){var e=Se,t=Te;if(Te=Se=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Me(e,t){return e(t)}function Re(){}var xe=!1;function ke(e,t,n){if(xe)return e(t,n);xe=!0;try{return Me(e,t,n)}finally{xe=!1,(null!==Se||null!==Te)&&(Re(),Ce())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){Oe=!1}function Le(e,t,n,r,i,a,s,o,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}var De=!1,Be=null,je=!1,qe=null,$e={onError:function(e){De=!0,Be=e}};function Ue(e,t,n,r,i,a,s,o,c){De=!1,Be=null,Le.apply($e,arguments)}function Fe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Fe(e)!==e)throw Error(a(188))}function ze(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Fe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/ct|0)|0},ot=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~i;0!==o?r=dt(o):0!==(a&=s)&&(r=dt(a))}else 0!==(s=n&~i)?r=dt(s):0!==a&&(r=dt(a));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!=(4194240&a)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0==(4194240&(lt<<=1))&&(lt=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var vt=0;function wt(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var Et,_t,St,Tt,At,Nt=!1,Ct=[],Mt=null,Rt=null,xt=null,kt=new Map,It=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Dt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=vi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=bi(e.target);if(null!==t){var n=Fe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void At(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function jt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function qt(e,t,n){jt(e)&&n.delete(t)}function $t(){Nt=!1,null!==Mt&&jt(Mt)&&(Mt=null),null!==Rt&&jt(Rt)&&(Rt=null),null!==xt&&jt(xt)&&(xt=null),kt.forEach(qt),It.forEach(qt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Nt||(Nt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,$t)))}function Ft(e){function t(t){return Ut(t,e)}if(0<Ct.length){Ut(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&Ut(Mt,e),null!==Rt&&Ut(Rt,e),null!==xt&&Ut(xt,e),kt.forEach(t),It.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Bt(n),null===n.blockedOn&&Ot.shift()}var Vt=w.ReactCurrentBatchConfig,Ht=!0;function zt(e,t,n,r){var i=vt,a=Vt.transition;Vt.transition=null;try{vt=1,Kt(e,t,n,r)}finally{vt=i,Vt.transition=a}}function Wt(e,t,n,r){var i=vt,a=Vt.transition;Vt.transition=null;try{vt=4,Kt(e,t,n,r)}finally{vt=i,Vt.transition=a}}function Kt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Hr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Mt=Dt(Mt,e,t,n,r,i),!0;case"dragenter":return Rt=Dt(Rt,e,t,n,r,i),!0;case"mouseover":return xt=Dt(xt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return kt.set(a,Dt(kt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,It.set(a,Dt(It.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=vi(i);if(null!==a&&Et(a),null===(a=Qt(e,t,n,r))&&Hr(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=bi(e=Ee(r))))if(null===(t=Fe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=an(ln),dn=B({},ln,{view:0,detail:0}),hn=an(dn),pn=B({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(sn=e.screenX-cn.screenX,on=e.screenY-cn.screenY):on=sn=0,cn=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=an(pn),mn=an(B({},pn,{dataTransfer:0})),yn=an(B({},dn,{relatedTarget:0})),gn=an(B({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=B({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=an(bn),wn=an(B({},ln,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function An(){return Tn}var Nn=B({},dn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Nn),Mn=an(B({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=an(B({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),xn=an(B({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),kn=B({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=an(kn),On=[9,13,27,32],Pn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Dn=u&&"TextEvent"in window&&!Ln,Bn=u&&(!Pn||Ln&&8<Ln&&11>=Ln),jn=String.fromCharCode(32),qn=!1;function $n(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Fn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function zn(e,t,n,r){Ne(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){jr(e,0)}function Qn(e){if(K(wi(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"==typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];zn(t,Kn,e,Ee(e)),ke(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function ar(e,t){if("click"===e)return Qn(t)}function sr(e,t){if("input"===e||"change"===e)return Qn(t)}var or="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function cr(e,t){if(or(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=ur(n,a);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,yr=null,gr=null,br=null,vr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==yr||yr!==G(r)||("selectionStart"in(r=yr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&cr(br,r)||(br=r,0<(r=Wr(gr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},Sr={},Tr={};function Ar(e){if(Sr[e])return Sr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Sr[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Nr=Ar("animationend"),Cr=Ar("animationiteration"),Mr=Ar("animationstart"),Rr=Ar("transitionend"),xr=new Map,kr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){xr.set(e,t),c(t,[e])}for(var Or=0;Or<kr.length;Or++){var Pr=kr[Or];Ir(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Ir(Nr,"onAnimationEnd"),Ir(Cr,"onAnimationIteration"),Ir(Mr,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Rr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,o,c,l){if(Ue.apply(this,arguments),De){if(!De)throw Error(a(198));var u=Be;De=!1,Be=null,je||(je=!0,qe=u)}}(r,t,void 0,e),e.currentTarget=null}function jr(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],c=o.instance,l=o.currentTarget;if(o=o.listener,c!==a&&i.isPropagationStopped())break e;Br(i,o,l),a=c}else for(s=0;s<r.length;s++){if(c=(o=r[s]).instance,l=o.currentTarget,o=o.listener,c!==a&&i.isPropagationStopped())break e;Br(i,o,l),a=c}}}if(je)throw e=qe,je=!1,qe=null,e}function qr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function $r(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Fr(e){if(!e[Ur]){e[Ur]=!0,s.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||$r(t,!1,e),$r(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,$r("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Jt(t)){case 1:var i=zt;break;case 4:i=Wt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var a=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===i||8===c.nodeType&&c.parentNode===i))return;s=s.return}for(;null!==o;){if(null===(s=bi(o)))return;if(5===(c=s.tag)||6===c){r=a=s;continue e}o=o.parentNode}}r=r.return}ke((function(){var r=a,i=Ee(n),s=[];e:{var o=xr.get(e);if(void 0!==o){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=Cn;break;case"focusin":l="focus",c=yn;break;case"focusout":l="blur",c=yn;break;case"beforeblur":case"afterblur":c=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Rn;break;case Nr:case Cr:case Mr:c=gn;break;case Rr:c=xn;break;case"scroll":c=hn;break;case"wheel":c=In;break;case"copy":case"cut":case"paste":c=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Mn}var u=0!=(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Ie(f,h))&&u.push(zr(f,m,p)))),d)break;f=f.return}0<u.length&&(o=new c(o,l,null,n,i),s.push({event:o,listeners:u}))}}if(0==(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(l=n.relatedTarget||n.fromElement)||!bi(l)&&!l[fi])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?bi(l):null)&&(l!==(d=Fe(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Mn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==c?o:wi(c),p=null==l?o:wi(l),(o=new u(m,f+"leave",c,n,i)).target=d,o.relatedTarget=p,m=null,bi(i)===r&&((u=new u(h,f+"enter",l,n,i)).target=p,u.relatedTarget=d,m=u),d=m,c&&l)e:{for(h=l,f=0,p=u=c;p;p=Kr(p))f++;for(p=0,m=h;m;m=Kr(m))p++;for(;0<f-p;)u=Kr(u),f--;for(;0<p-f;)h=Kr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==c&&Gr(s,o,c,u,!1),null!==l&&null!==d&&Gr(s,d,l,u,!0)}if("select"===(c=(o=r?wi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Jn;else if(Hn(o))if(Yn)y=sr;else{y=ir;var g=rr}else(c=o.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(y=ar);switch(y&&(y=y(e,r))?zn(s,y,n,i):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=r?wi(r):window,e){case"focusin":(Hn(g)||"true"===g.contentEditable)&&(yr=g,gr=r,br=null);break;case"focusout":br=gr=yr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,wr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(s,n,i)}var b;if(Pn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Fn?$n(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Bn&&"ko"!==n.locale&&(Fn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Fn&&(b=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Fn=!0)),0<(g=Wr(r,v)).length&&(v=new wn(v,e,null,n,i),s.push({event:v,listeners:g}),b?v.data=b:null!==(b=Un(n))&&(v.data=b))),(b=Dn?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(qn=!0,jn);case"textInput":return(e=t.data)===jn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Fn)return"compositionend"===e||!Pn&&$n(e,t)?(e=en(),Zt=Xt=Yt=null,Fn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=b))}jr(s,t)}))}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ie(e,n))&&r.unshift(zr(e,a,i)),null!=(a=Ie(e,t))&&r.push(zr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,s=[];null!==n&&n!==r;){var o=n,c=o.alternate,l=o.stateNode;if(null!==c&&c===r)break;5===o.tag&&null!==l&&(o=l,i?null!=(c=Ie(n,a))&&s.unshift(zr(n,c,o)):i||null!=(c=Ie(n,a))&&s.push(zr(n,c,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"==typeof e?e:""+e).replace(Qr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"==typeof setTimeout?setTimeout:void 0,ii="function"==typeof clearTimeout?clearTimeout:void 0,ai="function"==typeof Promise?Promise:void 0,si="function"==typeof queueMicrotask?queueMicrotask:void 0!==ai?function(e){return ai.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function ci(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ft(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ft(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,yi="__reactListeners$"+di,gi="__reactHandles$"+di;function bi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function vi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Ei(e){return e[pi]||null}var _i=[],Si=-1;function Ti(e){return{current:e}}function Ai(e){0>Si||(e.current=_i[Si],_i[Si]=null,Si--)}function Ni(e,t){Si++,_i[Si]=e.current,e.current=t}var Ci={},Mi=Ti(Ci),Ri=Ti(!1),xi=Ci;function ki(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ii(e){return null!=(e=e.childContextTypes)}function Oi(){Ai(Ri),Ai(Mi)}function Pi(e,t,n){if(Mi.current!==Ci)throw Error(a(168));Ni(Mi,t),Ni(Ri,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return B({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,xi=Mi.current,Ni(Mi,e),Ni(Ri,Ri.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,xi),r.__reactInternalMemoizedMergedChildContext=e,Ai(Ri),Ai(Mi),Ni(Mi,e)):Ai(Ri),Ni(Ri,n)}var ji=null,qi=!1,$i=!1;function Ui(e){null===ji?ji=[e]:ji.push(e)}function Fi(){if(!$i&&null!==ji){$i=!0;var e=0,t=vt;try{var n=ji;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}ji=null,qi=!1}catch(t){throw null!==ji&&(ji=ji.slice(e+1)),Ke(Ze,Fi),t}finally{vt=t,$i=!1}}return null}var Vi=[],Hi=0,zi=null,Wi=0,Ki=[],Gi=0,Qi=null,Ji=1,Yi="";function Xi(e,t){Vi[Hi++]=Wi,Vi[Hi++]=zi,zi=e,Wi=t}function Zi(e,t,n){Ki[Gi++]=Ji,Ki[Gi++]=Yi,Ki[Gi++]=Qi,Qi=e;var r=Ji;e=Yi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var a=32-st(t)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ji=1<<32-st(t)+i|n<<i|r,Yi=a+e}else Ji=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===zi;)zi=Vi[--Hi],Vi[Hi]=null,Wi=Vi[--Hi],Vi[Hi]=null;for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,Yi=Ki[--Gi],Ki[Gi]=null,Ji=Ki[--Gi],Ki[Gi]=null}var na=null,ra=null,ia=!1,aa=null;function sa(e,t){var n=kl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Ji,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=kl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ca(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function la(e){if(ia){var t=ra;if(t){var n=t;if(!oa(e,t)){if(ca(e))throw Error(a(418));t=li(n.nextSibling);var r=na;t&&oa(e,t)?sa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ca(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function da(e){if(e!==na)return!1;if(!ia)return ua(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ca(e))throw ha(),Error(a(418));for(;t;)sa(e,t),t=li(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?li(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=li(e.nextSibling)}function pa(){ra=na=null,ia=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ma=w.ReactCurrentBatchConfig;function ya(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ba(e){return(0,e._init)(e._payload)}function va(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ol(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Bl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var a=n.type;return a===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"==typeof a&&null!==a&&a.$$typeof===I&&ba(a)===t.type)?((r=i(t,n.props)).ref=ya(e,t,n),r.return=e,r):((r=Pl(n.type,n.key,n.props,null,e.mode,r)).ref=ya(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jl(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Bl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Pl(t.type,t.key,t.props,null,e.mode,n)).ref=ya(e,null,t),n.return=e,n;case _:return(t=jl(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ll(t,e.mode,n,null)).return=e,t;ga(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:c(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?l(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case I:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);ga(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);ga(t,r)}return null}function m(i,a,o,c){for(var l=null,u=null,d=a,m=a=0,y=null;null!==d&&m<o.length;m++){d.index>m?(y=d,d=null):y=d.sibling;var g=p(i,d,o[m],c);if(null===g){null===d&&(d=y);break}e&&d&&null===g.alternate&&t(i,d),a=s(g,a,m),null===u?l=g:u.sibling=g,u=g,d=y}if(m===o.length)return n(i,d),ia&&Xi(i,m),l;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],c))&&(a=s(d,a,m),null===u?l=d:u.sibling=d,u=d);return ia&&Xi(i,m),l}for(d=r(i,d);m<o.length;m++)null!==(y=f(d,i,m,o[m],c))&&(e&&null!==y.alternate&&d.delete(null===y.key?m:y.key),a=s(y,a,m),null===u?l=y:u.sibling=y,u=y);return e&&d.forEach((function(e){return t(i,e)})),ia&&Xi(i,m),l}function y(i,o,c,l){var u=L(c);if("function"!=typeof u)throw Error(a(150));if(null==(c=u.call(c)))throw Error(a(151));for(var d=u=null,m=o,y=o=0,g=null,b=c.next();null!==m&&!b.done;y++,b=c.next()){m.index>y?(g=m,m=null):g=m.sibling;var v=p(i,m,b.value,l);if(null===v){null===m&&(m=g);break}e&&m&&null===v.alternate&&t(i,m),o=s(v,o,y),null===d?u=v:d.sibling=v,d=v,m=g}if(b.done)return n(i,m),ia&&Xi(i,y),u;if(null===m){for(;!b.done;y++,b=c.next())null!==(b=h(i,b.value,l))&&(o=s(b,o,y),null===d?u=b:d.sibling=b,d=b);return ia&&Xi(i,y),u}for(m=r(i,m);!b.done;y++,b=c.next())null!==(b=f(m,i,y,b.value,l))&&(e&&null!==b.alternate&&m.delete(null===b.key?y:b.key),o=s(b,o,y),null===d?u=b:d.sibling=b,d=b);return e&&m.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),u}return function e(r,a,s,c){if("object"==typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case E:e:{for(var l=s.key,u=a;null!==u;){if(u.key===l){if((l=s.type)===S){if(7===u.tag){n(r,u.sibling),(a=i(u,s.props.children)).return=r,r=a;break e}}else if(u.elementType===l||"object"==typeof l&&null!==l&&l.$$typeof===I&&ba(l)===u.type){n(r,u.sibling),(a=i(u,s.props)).ref=ya(r,u,s),a.return=r,r=a;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((a=Ll(s.props.children,r.mode,c,s.key)).return=r,r=a):((c=Pl(s.type,s.key,s.props,null,r.mode,c)).ref=ya(r,a,s),c.return=r,r=c)}return o(r);case _:e:{for(u=s.key;null!==a;){if(a.key===u){if(4===a.tag&&a.stateNode.containerInfo===s.containerInfo&&a.stateNode.implementation===s.implementation){n(r,a.sibling),(a=i(a,s.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=jl(s,r.mode,c)).return=r,r=a}return o(r);case I:return e(r,a,(u=s._init)(s._payload),c)}if(te(s))return m(r,a,s,c);if(L(s))return y(r,a,s,c);ga(r,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,s)).return=r,r=a):(n(r,a),(a=Bl(s,r.mode,c)).return=r,r=a),o(r)):n(r,a)}}var wa=va(!0),Ea=va(!1),_a=Ti(null),Sa=null,Ta=null,Aa=null;function Na(){Aa=Ta=Sa=null}function Ca(e){var t=_a.current;Ai(_a),e._currentValue=t}function Ma(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ra(e,t){Sa=e,Aa=Ta=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(vo=!0),e.firstContext=null)}function xa(e){var t=e._currentValue;if(Aa!==e)if(e={context:e,memoizedValue:t,next:null},null===Ta){if(null===Sa)throw Error(a(308));Ta=e,Sa.dependencies={lanes:0,firstContext:e}}else Ta=Ta.next=e;return t}var ka=null;function Ia(e){null===ka?ka=[e]:ka.push(e)}function Oa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Pa(e,r)}function Pa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var La=!1;function Da(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ba(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ja(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&Mc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Pa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Pa(e,n)}function $a(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=s:a=a.next=s,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;La=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var c=o,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=l:o.next=l,u.lastBaseUpdate=c))}if(null!==a){var d=i.baseState;for(s=0,u=l=c=null,o=a;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,m=o;switch(h=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(h="function"==typeof(f=m.payload)?f.call(p,d,h):f))break e;d=B({},d,h);break e;case 2:La=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(l=u=p,c=d):u=u.next=p,s|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Dc|=s,e.lanes=s,e.memoizedState=d}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(a(191,i));i.call(r)}}}var Ha={},za=Ti(Ha),Wa=Ti(Ha),Ka=Ti(Ha);function Ga(e){if(e===Ha)throw Error(a(174));return e}function Qa(e,t){switch(Ni(Ka,t),Ni(Wa,e),Ni(za,Ha),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(za),Ni(za,t)}function Ja(){Ai(za),Ai(Wa),Ai(Ka)}function Ya(e){Ga(Ka.current);var t=Ga(za.current),n=ce(t,e.type);t!==n&&(Ni(Wa,e),Ni(za,n))}function Xa(e){Wa.current===e&&(Ai(za),Ai(Wa))}var Za=Ti(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function ns(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var rs=w.ReactCurrentDispatcher,is=w.ReactCurrentBatchConfig,as=0,ss=null,os=null,cs=null,ls=!1,us=!1,ds=0,hs=0;function ps(){throw Error(a(321))}function fs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ms(e,t,n,r,i,s){if(as=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Xs:Zs,e=n(r,i),us){s=0;do{if(us=!1,ds=0,25<=s)throw Error(a(301));s+=1,cs=os=null,t.updateQueue=null,rs.current=eo,e=n(r,i)}while(us)}if(rs.current=Ys,t=null!==os&&null!==os.next,as=0,cs=os=ss=null,ls=!1,t)throw Error(a(300));return e}function ys(){var e=0!==ds;return ds=0,e}function gs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?ss.memoizedState=cs=e:cs=cs.next=e,cs}function bs(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===cs?ss.memoizedState:cs.next;if(null!==t)cs=t,os=e;else{if(null===e)throw Error(a(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===cs?ss.memoizedState=cs=e:cs=cs.next=e}return cs}function vs(e,t){return"function"==typeof t?t(e):t}function ws(e){var t=bs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=os,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var c=o=null,l=null,u=s;do{var d=u.lane;if((as&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=h,o=r):l=l.next=h,ss.lanes|=d,Dc|=d}u=u.next}while(null!==u&&u!==s);null===l?o=r:l.next=c,or(r,t.memoizedState)||(vo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ss.lanes|=s,Dc|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Es(e){var t=bs(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);or(s,t.memoizedState)||(vo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _s(){}function Ss(e,t){var n=ss,r=bs(),i=t(),s=!or(r.memoizedState,i);if(s&&(r.memoizedState=i,vo=!0),r=r.queue,Ls(Ns.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,xs(9,As.bind(null,n,r,i,t),void 0,null),null===Rc)throw Error(a(349));0!=(30&as)||Ts(n,t,i)}return i}function Ts(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function As(e,t,n,r){t.value=n,t.getSnapshot=r,Cs(t)&&Ms(e)}function Ns(e,t,n){return n((function(){Cs(t)&&Ms(e)}))}function Cs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(e){return!0}}function Ms(e){var t=Pa(e,1);null!==t&&nl(t,e,1,-1)}function Rs(e){var t=gs();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:e},t.queue=e,e=e.dispatch=Ks.bind(null,ss,e),[t.memoizedState,e]}function xs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ks(){return bs().memoizedState}function Is(e,t,n,r){var i=gs();ss.flags|=e,i.memoizedState=xs(1|t,n,void 0,void 0===r?null:r)}function Os(e,t,n,r){var i=bs();r=void 0===r?null:r;var a=void 0;if(null!==os){var s=os.memoizedState;if(a=s.destroy,null!==r&&fs(r,s.deps))return void(i.memoizedState=xs(t,n,a,r))}ss.flags|=e,i.memoizedState=xs(1|t,n,a,r)}function Ps(e,t){return Is(8390656,8,e,t)}function Ls(e,t){return Os(2048,8,e,t)}function Ds(e,t){return Os(4,2,e,t)}function Bs(e,t){return Os(4,4,e,t)}function js(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qs(e,t,n){return n=null!=n?n.concat([e]):null,Os(4,4,js.bind(null,t,e),n)}function $s(){}function Us(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Fs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vs(e,t,n){return 0==(21&as)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=n):(or(n,t)||(n=mt(),ss.lanes|=n,Dc|=n,e.baseState=!0),t)}function Hs(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=is.transition;is.transition={};try{e(!1),t()}finally{vt=n,is.transition=r}}function zs(){return bs().memoizedState}function Ws(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gs(e))Qs(t,n);else if(null!==(n=Oa(e,t,n,r))){nl(n,e,r,el()),Js(n,t,r)}}function Ks(e,t,n){var r=tl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gs(e))Qs(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,s)){var c=t.interleaved;return null===c?(i.next=i,Ia(t)):(i.next=c.next,c.next=i),void(t.interleaved=i)}}catch(e){}null!==(n=Oa(e,t,i,r))&&(nl(n,e,r,i=el()),Js(n,t,r))}}function Gs(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function Qs(e,t){us=ls=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Js(e,t,n){if(0!=(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Ys={readContext:xa,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Xs={readContext:xa,useCallback:function(e,t){return gs().memoizedState=[e,void 0===t?null:t],e},useContext:xa,useEffect:Ps,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Is(4194308,4,js.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Is(4194308,4,e,t)},useInsertionEffect:function(e,t){return Is(4,2,e,t)},useMemo:function(e,t){var n=gs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=gs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ws.bind(null,ss,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gs().memoizedState=e},useState:Rs,useDebugValue:$s,useDeferredValue:function(e){return gs().memoizedState=e},useTransition:function(){var e=Rs(!1),t=e[0];return e=Hs.bind(null,e[1]),gs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ss,i=gs();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Rc)throw Error(a(349));0!=(30&as)||Ts(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ps(Ns.bind(null,r,s,e),[e]),r.flags|=2048,xs(9,As.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=gs(),t=Rc.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=(Ji&~(1<<32-st(Ji)-1)).toString(32)+n),0<(n=ds++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zs={readContext:xa,useCallback:Us,useContext:xa,useEffect:Ls,useImperativeHandle:qs,useInsertionEffect:Ds,useLayoutEffect:Bs,useMemo:Fs,useReducer:ws,useRef:ks,useState:function(){return ws(vs)},useDebugValue:$s,useDeferredValue:function(e){return Vs(bs(),os.memoizedState,e)},useTransition:function(){return[ws(vs)[0],bs().memoizedState]},useMutableSource:_s,useSyncExternalStore:Ss,useId:zs,unstable_isNewReconciler:!1},eo={readContext:xa,useCallback:Us,useContext:xa,useEffect:Ls,useImperativeHandle:qs,useInsertionEffect:Ds,useLayoutEffect:Bs,useMemo:Fs,useReducer:Es,useRef:ks,useState:function(){return Es(vs)},useDebugValue:$s,useDeferredValue:function(e){var t=bs();return null===os?t.memoizedState=e:Vs(t,os.memoizedState,e)},useTransition:function(){return[Es(vs)[0],bs().memoizedState]},useMutableSource:_s,useSyncExternalStore:Ss,useId:zs,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Fe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=ja(r,i);a.payload=t,null!=n&&(a.callback=n),null!==(t=qa(e,a,i))&&(nl(t,e,i,r),$a(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),i=tl(e),a=ja(r,i);a.tag=1,a.payload=t,null!=n&&(a.callback=n),null!==(t=qa(e,a,i))&&(nl(t,e,i,r),$a(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),i=ja(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=qa(e,i,r))&&(nl(t,e,r,n),$a(t,e,r))}};function io(e,t,n,r,i,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(i,a))}function ao(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"==typeof a&&null!==a?a=xa(a):(i=Ii(t)?xi:Mi.current,a=(r=null!=(r=t.contextTypes))?ki(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function so(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Da(e);var a=t.contextType;"object"==typeof a&&null!==a?i.context=xa(a):(a=Ii(t)?xi:Mi.current,i.context=ki(e,a)),i.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function co(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i,digest:null}}function lo(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var ho="function"==typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=ja(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hc||(Hc=!0,zc=r),uo(0,t)},n}function fo(e,t,n){(n=ja(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!=typeof r&&(null===Wc?Wc=new Set([this]):Wc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Al.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,n,r,i){return 0==(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ja(-1,1)).tag=2,qa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bo=w.ReactCurrentOwner,vo=!1;function wo(e,t,n,r){t.child=null===e?Ea(t,null,n,r):wa(t,e.child,n,r)}function Eo(e,t,n,r,i){n=n.render;var a=t.ref;return Ra(t,i),r=ms(e,t,n,r,a,i),n=ys(),null===e||vo?(ia&&n&&ea(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function _o(e,t,n,r,i){if(null===e){var a=n.type;return"function"!=typeof a||Il(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pl(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,So(e,t,a,r,i))}if(a=e.child,0==(e.lanes&i)){var s=a.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(s,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Ol(a,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(cr(a,r)&&e.ref===t.ref){if(vo=!1,t.pendingProps=r=a,0==(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!=(131072&e.flags)&&(vo=!0)}}return No(e,t,n,r,i)}function To(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ni(Oc,Ic),Ic|=n;else{if(0==(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ni(Oc,Ic),Ic|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ni(Oc,Ic),Ic|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ni(Oc,Ic),Ic|=r;return wo(e,t,i,n),t.child}function Ao(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function No(e,t,n,r,i){var a=Ii(n)?xi:Mi.current;return a=ki(t,a),Ra(t,i),n=ms(e,t,n,r,a,i),r=ys(),null===e||vo?(ia&&r&&ea(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Co(e,t,n,r,i){if(Ii(n)){var a=!0;Di(t)}else a=!1;if(Ra(t,i),null===t.stateNode)Vo(e,t),ao(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var c=s.context,l=n.contextType;"object"==typeof l&&null!==l?l=xa(l):l=ki(t,l=Ii(n)?xi:Mi.current);var u=n.getDerivedStateFromProps,d="function"==typeof u||"function"==typeof s.getSnapshotBeforeUpdate;d||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==r||c!==l)&&so(t,s,r,l),La=!1;var h=t.memoizedState;s.state=h,Fa(t,r,s,i),c=t.memoizedState,o!==r||h!==c||Ri.current||La?("function"==typeof u&&(no(t,n,u,r),c=t.memoizedState),(o=La||io(t,n,o,r,h,c,l))?(d||"function"!=typeof s.UNSAFE_componentWillMount&&"function"!=typeof s.componentWillMount||("function"==typeof s.componentWillMount&&s.componentWillMount(),"function"==typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"==typeof s.componentDidMount&&(t.flags|=4194308)):("function"==typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=l,r=o):("function"==typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Ba(e,t),o=t.memoizedProps,l=t.type===t.elementType?o:to(t.type,o),s.props=l,d=t.pendingProps,h=s.context,"object"==typeof(c=n.contextType)&&null!==c?c=xa(c):c=ki(t,c=Ii(n)?xi:Mi.current);var p=n.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof s.getSnapshotBeforeUpdate)||"function"!=typeof s.UNSAFE_componentWillReceiveProps&&"function"!=typeof s.componentWillReceiveProps||(o!==d||h!==c)&&so(t,s,r,c),La=!1,h=t.memoizedState,s.state=h,Fa(t,r,s,i);var f=t.memoizedState;o!==d||h!==f||Ri.current||La?("function"==typeof p&&(no(t,n,p,r),f=t.memoizedState),(l=La||io(t,n,l,r,h,f,c)||!1)?(u||"function"!=typeof s.UNSAFE_componentWillUpdate&&"function"!=typeof s.componentWillUpdate||("function"==typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,c),"function"==typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,c)),"function"==typeof s.componentDidUpdate&&(t.flags|=4),"function"==typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=c,r=l):("function"!=typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Mo(e,t,n,r,a,i)}function Mo(e,t,n,r,i,a){Ao(e,t);var s=0!=(128&t.flags);if(!r&&!s)return i&&Bi(t,n,!1),Ho(e,t,a);r=t.stateNode,bo.current=t;var o=s&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=wa(t,e.child,null,a),t.child=wa(t,null,o,a)):wo(e,t,o,a),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function Ro(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),Qa(e,t.containerInfo)}function xo(e,t,n,r,i){return pa(),fa(i),t.flags|=256,wo(e,t,n,r),t.child}var ko,Io,Oo,Po,Lo={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bo(e,t,n){var r,i=t.pendingProps,s=Za.current,o=!1,c=0!=(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!=(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ni(Za,1&s),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=i.children,e=i.fallback,o?(i=t.mode,o=t.child,c={mode:"hidden",children:c},0==(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=c):o=Dl(c,i,0,null),e=Ll(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(n),t.memoizedState=Lo,e):jo(t,c));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,o){if(n)return 256&t.flags?(t.flags&=-257,qo(e,t,o,r=lo(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Dl({mode:"visible",children:r.children},i,0,null),(s=Ll(s,i,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!=(1&t.mode)&&wa(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Lo,s);if(0==(1&t.mode))return qo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var c=r.dgst;return r=c,qo(e,t,o,r=lo(s=Error(a(419)),r,void 0))}if(c=0!=(o&e.childLanes),vo||c){if(null!==(r=Rc)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!=(i&(r.suspendedLanes|o))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Pa(e,i),nl(r,e,i,-1))}return ml(),qo(e,t,o,r=lo(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cl.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ra=li(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Gi++]=Ji,Ki[Gi++]=Yi,Ki[Gi++]=Qi,Ji=e.id,Yi=e.overflow,Qi=t),t=jo(t,r.children),t.flags|=4096,t)}(e,t,c,i,r,s,n);if(o){o=i.fallback,c=t.mode,r=(s=e.child).sibling;var l={mode:"hidden",children:i.children};return 0==(1&c)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Ol(s,l)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Ol(r,o):(o=Ll(o,c,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,c=null===(c=e.child.memoizedState)?Do(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,i}return e=(o=e.child).sibling,i=Ol(o,{mode:"visible",children:i.children}),0==(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function jo(e,t){return(t=Dl({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qo(e,t,n,r){return null!==r&&fa(r),wa(t,e.child,null,n),(e=jo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $o(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ma(e.return,t,n)}function Uo(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Fo(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wo(e,t,r.children,n),0!=(2&(r=Za.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,n,t);else if(19===e.tag)$o(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ni(Za,r),0==(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===es(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Uo(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===es(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Uo(t,!0,n,null,a);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dc|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ol(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ol(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function zo(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return Ii(t.type)&&Oi(),Wo(t),null;case 3:return r=t.stateNode,Ja(),Ai(Ri),Ai(Mi),ns(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(da(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==aa&&(sl(aa),aa=null))),Io(e,t),Wo(t),null;case 5:Xa(t);var i=Ga(Ka.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wo(t),null}if(e=Ga(za.current),da(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[pi]=s,e=0!=(1&t.mode),n){case"dialog":qr("cancel",r),qr("close",r);break;case"iframe":case"object":case"embed":qr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)qr(Lr[i],r);break;case"source":qr("error",r);break;case"img":case"image":case"link":qr("error",r),qr("load",r);break;case"details":qr("toggle",r);break;case"input":J(r,s),qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qr("invalid",r);break;case"textarea":ie(r,s),qr("invalid",r)}for(var c in be(n,s),i=null,s)if(s.hasOwnProperty(c)){var l=s[c];"children"===c?"string"==typeof l?r.textContent!==l&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,l,e),i=["children",""+l]):o.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&qr("scroll",r)}switch(n){case"input":W(r),Z(r,s,!0);break;case"textarea":W(r),se(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[hi]=t,e[pi]=r,ko(e,t,!1,!1),t.stateNode=e;e:{switch(c=ve(n,r),n){case"dialog":qr("cancel",e),qr("close",e),i=r;break;case"iframe":case"object":case"embed":qr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)qr(Lr[i],e);i=r;break;case"source":qr("error",e),i=r;break;case"img":case"image":case"link":qr("error",e),qr("load",e),i=r;break;case"details":qr("toggle",e),i=r;break;case"input":J(e,r),i=Q(e,r),qr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),qr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),qr("invalid",e)}for(s in be(n,i),l=i)if(l.hasOwnProperty(s)){var u=l[s];"style"===s?ye(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"==typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"==typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=u&&"onScroll"===s&&qr("scroll",e):null!=u&&v(e,s,u,c))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Po(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ga(Ka.current),Ga(za.current),da(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!=(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wo(t),null;case 13:if(Ai(Za),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!=(1&t.mode)&&0==(128&t.flags))ha(),pa(),t.flags|=98560,s=!1;else if(s=da(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[hi]=t}else pa(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),s=!1}else null!==aa&&(sl(aa),aa=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!=(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&Za.current)?0===Pc&&(Pc=3):ml())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Ja(),Io(e,t),null===e&&Fr(t.stateNode.containerInfo),Wo(t),null;case 10:return Ca(t.type._context),Wo(t),null;case 19:if(Ai(Za),null===(s=t.memoizedState))return Wo(t),null;if(r=0!=(128&t.flags),null===(c=s.rendering))if(r)zo(s,!1);else{if(0!==Pc||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=es(e))){for(t.flags|=128,zo(s,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ni(Za,1&Za.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>Fc&&(t.flags|=128,r=!0,zo(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=es(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),zo(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!ia)return Wo(t),null}else 2*Ye()-s.renderingStartTime>Fc&&1073741824!==n&&(t.flags|=128,r=!0,zo(s,!1),t.lanes=4194304);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=s.last)?n.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,n=Za.current,Ni(Za,r?1&n|2:1&n),t):(Wo(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&Ic)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Go(e,t){switch(ta(t),t.tag){case 1:return Ii(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ja(),Ai(Ri),Ai(Mi),ns(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xa(t),null;case 13:if(Ai(Za),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(Za),null;case 4:return Ja(),null;case 10:return Ca(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}ko=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Io=function(){},Oo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ga(za.current);var a,s=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),s=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Zr)}for(u in be(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var c=i[u];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(s=s||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&qr("scroll",e),s||c===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Po=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qo=!1,Jo=!1,Yo="function"==typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch(n){Tl(e,t,n)}else n.current=null}function ec(e,t,n){try{n()}catch(n){Tl(e,t,n)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ec(t,n,a)}i=i.next}while(i!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ic(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function ac(e){var t=e.alternate;null!==t&&(e.alternate=null,ac(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[yi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function oc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var uc=null,dc=!1;function hc(e,t,n){for(n=n.child;null!==n;)pc(e,t,n),n=n.sibling}function pc(e,t,n){if(at&&"function"==typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(e){}switch(n.tag){case 5:Jo||Zo(n,t);case 6:var r=uc,i=dc;uc=null,hc(e,t,n),dc=i,null!==(uc=r)&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?ci(e.parentNode,n):1===e.nodeType&&ci(e,n),Ft(e)):ci(uc,n.stateNode));break;case 4:r=uc,i=dc,uc=n.stateNode.containerInfo,dc=!0,hc(e,t,n),uc=r,dc=i;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,void 0!==s&&(0!=(2&a)||0!=(4&a))&&ec(n,t,s),i=i.next}while(i!==r)}hc(e,t,n);break;case 1:if(!Jo&&(Zo(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){Tl(n,t,e)}hc(e,t,n);break;case 21:hc(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,hc(e,t,n),Jo=r):hc(e,t,n);break;default:hc(e,t,n)}}function fc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Yo),t.forEach((function(t){var r=Ml.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,c=o;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,dc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===uc)throw Error(a(160));pc(s,o,i),uc=null,dc=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(e){Tl(i,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yc(t,e),t=t.sibling}function yc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mc(t,e),gc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(t){Tl(e,e.return,t)}try{nc(5,e,e.return)}catch(t){Tl(e,e.return,t)}}break;case 1:mc(t,e),gc(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(mc(t,e),gc(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(t){Tl(e,e.return,t)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===s.type&&null!=s.name&&Y(i,s),ve(c,o);var u=ve(c,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];"style"===d?ye(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):v(i,d,h,u)}switch(c){case"input":X(i,s);break;case"textarea":ae(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(i,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(t){Tl(e,e.return,t)}}break;case 6:if(mc(t,e),gc(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(t){Tl(e,e.return,t)}}break;case 3:if(mc(t,e),gc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ft(t.containerInfo)}catch(t){Tl(e,e.return,t)}break;case 4:default:mc(t,e),gc(e);break;case 13:mc(t,e),gc(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Uc=Ye())),4&r&&fc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(u=Jo)||d,mc(t,e),Jo=u):mc(t,e),gc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!=(1&e.mode))for(Xo=e,d=e.child;null!==d;){for(h=Xo=d;null!==Xo;){switch(f=(p=Xo).child,p.tag){case 0:case 11:case 14:case 15:nc(4,p,p.return);break;case 1:Zo(p,p.return);var m=p.stateNode;if("function"==typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(e){Tl(r,n,e)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){Ec(h);continue}}null!==f?(f.return=p,Xo=f):Ec(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"==typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(c=h.stateNode,o=null!=(l=h.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,c.style.display=me("display",o))}catch(t){Tl(e,e.return,t)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(t){Tl(e,e.return,t)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mc(t,e),gc(e),4&r&&fc(e);case 21:}}function gc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sc(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lc(e,oc(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cc(e,oc(e),s);break;default:throw Error(a(161))}}catch(t){Tl(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bc(e,t,n){Xo=e,vc(e,t,n)}function vc(e,t,n){for(var r=0!=(1&e.mode);null!==Xo;){var i=Xo,a=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Qo;if(!s){var o=i.alternate,c=null!==o&&null!==o.memoizedState||Jo;o=Qo;var l=Jo;if(Qo=s,(Jo=c)&&!l)for(Xo=i;null!==Xo;)c=(s=Xo).child,22===s.tag&&null!==s.memoizedState?_c(i):null!==c?(c.return=s,Xo=c):_c(i);for(;null!==a;)Xo=a,vc(a,t,n),a=a.sibling;Xo=i,Qo=o,Jo=l}wc(e)}else 0!=(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xo=a):wc(e)}}function wc(e){for(;null!==Xo;){var t=Xo;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Va(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,o,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ft(h)}}}break;default:throw Error(a(163))}Jo||512&t.flags&&ic(t)}catch(e){Tl(t,t.return,e)}}if(t===e){Xo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xo=n;break}Xo=t.return}}function Ec(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xo=n;break}Xo=t.return}}function _c(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(e){Tl(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(e){Tl(t,i,e)}}var a=t.return;try{ic(t)}catch(e){Tl(t,a,e)}break;case 5:var s=t.return;try{ic(t)}catch(e){Tl(t,s,e)}}}catch(e){Tl(t,t.return,e)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var Sc,Tc=Math.ceil,Ac=w.ReactCurrentDispatcher,Nc=w.ReactCurrentOwner,Cc=w.ReactCurrentBatchConfig,Mc=0,Rc=null,xc=null,kc=0,Ic=0,Oc=Ti(0),Pc=0,Lc=null,Dc=0,Bc=0,jc=0,qc=null,$c=null,Uc=0,Fc=1/0,Vc=null,Hc=!1,zc=null,Wc=null,Kc=!1,Gc=null,Qc=0,Jc=0,Yc=null,Xc=-1,Zc=0;function el(){return 0!=(6&Mc)?Ye():-1!==Xc?Xc:Xc=Ye()}function tl(e){return 0==(1&e.mode)?1:0!=(2&Mc)&&0!==kc?kc&-kc:null!==ma.transition?(0===Zc&&(Zc=mt()),Zc):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nl(e,t,n,r){if(50<Jc)throw Jc=0,Yc=null,Error(a(185));gt(e,n,r),0!=(2&Mc)&&e===Rc||(e===Rc&&(0==(2&Mc)&&(Bc|=n),4===Pc&&ol(e,kc)),rl(e,r),1===n&&0===Mc&&0==(1&t.mode)&&(Fc=Ye()+500,qi&&Fi()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-st(a),o=1<<s,c=i[s];-1===c?0!=(o&n)&&0==(o&r)||(i[s]=pt(o,t)):c<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var r=ht(e,e===Rc?kc:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){qi=!0,Ui(e)}(cl.bind(null,e)):Ui(cl.bind(null,e)),si((function(){0==(6&Mc)&&Fi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rl(n,il.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function il(e,t){if(Xc=-1,Zc=0,0!=(6&Mc))throw Error(a(327));var n=e.callbackNode;if(_l()&&e.callbackNode!==n)return null;var r=ht(e,e===Rc?kc:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=yl(e,r);else{t=r;var i=Mc;Mc|=2;var s=fl();for(Rc===e&&kc===t||(Vc=null,Fc=Ye()+500,hl(e,t));;)try{bl();break}catch(t){pl(e,t)}Na(),Ac.current=s,Mc=i,null!==xc?t=0:(Rc=null,kc=0,t=Pc)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=al(e,i))),1===t)throw n=Lc,hl(e,0),ol(e,r),rl(e,Ye()),n;if(6===t)ol(e,r);else{if(i=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!or(a(),i))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yl(e,r))&&(0!==(s=ft(e))&&(r=s,t=al(e,s))),1===t))throw n=Lc,hl(e,0),ol(e,r),rl(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:El(e,$c,Vc);break;case 3:if(ol(e,r),(130023424&r)===r&&10<(t=Uc+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(El.bind(null,e,$c,Vc),t);break}El(e,$c,Vc);break;case 4:if(ol(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>i&&(i=o),r&=~s}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ri(El.bind(null,e,$c,Vc),r);break}El(e,$c,Vc);break;default:throw Error(a(329))}}}return rl(e,Ye()),e.callbackNode===n?il.bind(null,e):null}function al(e,t){var n=qc;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=yl(e,t))&&(t=$c,$c=n,null!==t&&sl(t)),e}function sl(e){null===$c?$c=e:$c.push.apply($c,e)}function ol(e,t){for(t&=~jc,t&=~Bc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!=(6&Mc))throw Error(a(327));_l();var t=ht(e,0);if(0==(1&t))return rl(e,Ye()),null;var n=yl(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=al(e,r))}if(1===n)throw n=Lc,hl(e,0),ol(e,t),rl(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,El(e,$c,Vc),rl(e,Ye()),null}function ll(e,t){var n=Mc;Mc|=1;try{return e(t)}finally{0===(Mc=n)&&(Fc=Ye()+500,qi&&Fi())}}function ul(e){null!==Gc&&0===Gc.tag&&0==(6&Mc)&&_l();var t=Mc;Mc|=1;var n=Cc.transition,r=vt;try{if(Cc.transition=null,vt=1,e)return e()}finally{vt=r,Cc.transition=n,0==(6&(Mc=t))&&Fi()}}function dl(){Ic=Oc.current,Ai(Oc)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==xc)for(n=xc.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Oi();break;case 3:Ja(),Ai(Ri),Ai(Mi),ns();break;case 5:Xa(r);break;case 4:Ja();break;case 13:case 19:Ai(Za);break;case 10:Ca(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Rc=e,xc=e=Ol(e.current,null),kc=Ic=t,Pc=0,Lc=null,jc=Bc=Dc=0,$c=qc=null,null!==ka){for(t=0;t<ka.length;t++)if(null!==(r=(n=ka[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var s=a.next;a.next=i,r.next=s}n.pending=r}ka=null}return e}function pl(e,t){for(;;){var n=xc;try{if(Na(),rs.current=Ys,ls){for(var r=ss.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ls=!1}if(as=0,cs=os=ss=null,us=!1,ds=0,Nc.current=null,null===n||null===n.return){Pc=1,Lc=t,xc=null;break}e:{var s=e,o=n.return,c=n,l=t;if(t=kc,c.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,d=c,h=d.tag;if(0==(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=yo(o);if(null!==f){f.flags&=-257,go(f,o,c,0,t),1&f.mode&&mo(s,u,t),l=u;var m=(t=f).updateQueue;if(null===m){var y=new Set;y.add(l),t.updateQueue=y}else m.add(l);break e}if(0==(1&t)){mo(s,u,t),ml();break e}l=Error(a(426))}else if(ia&&1&c.mode){var g=yo(o);if(null!==g){0==(65536&g.flags)&&(g.flags|=256),go(g,o,c,0,t),fa(co(l,c));break e}}s=l=co(l,c),4!==Pc&&(Pc=2),null===qc?qc=[s]:qc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,po(0,l,t));break e;case 1:c=l;var b=s.type,v=s.stateNode;if(0==(128&s.flags)&&("function"==typeof b.getDerivedStateFromError||null!==v&&"function"==typeof v.componentDidCatch&&(null===Wc||!Wc.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t,Ua(s,fo(s,c,t));break e}}s=s.return}while(null!==s)}wl(n)}catch(e){t=e,xc===n&&null!==n&&(xc=n=n.return);continue}break}}function fl(){var e=Ac.current;return Ac.current=Ys,null===e?Ys:e}function ml(){0!==Pc&&3!==Pc&&2!==Pc||(Pc=4),null===Rc||0==(268435455&Dc)&&0==(268435455&Bc)||ol(Rc,kc)}function yl(e,t){var n=Mc;Mc|=2;var r=fl();for(Rc===e&&kc===t||(Vc=null,hl(e,t));;)try{gl();break}catch(t){pl(e,t)}if(Na(),Mc=n,Ac.current=r,null!==xc)throw Error(a(261));return Rc=null,kc=0,Pc}function gl(){for(;null!==xc;)vl(xc)}function bl(){for(;null!==xc&&!Qe();)vl(xc)}function vl(e){var t=Sc(e.alternate,e,Ic);e.memoizedProps=e.pendingProps,null===t?wl(e):xc=t,Nc.current=null}function wl(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=Ko(n,t,Ic)))return void(xc=n)}else{if(null!==(n=Go(n,t)))return n.flags&=32767,void(xc=n);if(null===e)return Pc=6,void(xc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(xc=t);xc=t=e}while(null!==t);0===Pc&&(Pc=5)}function El(e,t,n){var r=vt,i=Cc.transition;try{Cc.transition=null,vt=1,function(e,t,n,r){do{_l()}while(null!==Gc);if(0!=(6&Mc))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,s),e===Rc&&(xc=Rc=null,kc=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||Kc||(Kc=!0,Rl(tt,(function(){return _l(),null}))),s=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||s){s=Cc.transition,Cc.transition=null;var o=vt;vt=1;var c=Mc;Mc|=4,Nc.current=null,function(e,t){if(ei=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(e){n=null;break e}var o=0,c=-1,l=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(c=o+i),h!==s||0!==r&&3!==h.nodeType||(l=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(c=o),p===s&&++d===r&&(l=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var m=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var y=m.memoizedProps,g=m.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?y:to(t.type,y),g);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(e){Tl(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}m=tc,tc=!1}(e,n),yc(n,e),fr(ti),Ht=!!ei,ti=ei=null,e.current=n,bc(n,e,i),Je(),Mc=c,vt=o,Cc.transition=s}else e.current=n;if(Kc&&(Kc=!1,Gc=e,Qc=i),s=e.pendingLanes,0===s&&(Wc=null),function(e){if(at&&"function"==typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode),rl(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hc)throw Hc=!1,e=zc,zc=null,e;0!=(1&Qc)&&0!==e.tag&&_l(),s=e.pendingLanes,0!=(1&s)?e===Yc?Jc++:(Jc=0,Yc=e):Jc=0,Fi()}(e,t,n,r)}finally{Cc.transition=i,vt=r}return null}function _l(){if(null!==Gc){var e=wt(Qc),t=Cc.transition,n=vt;try{if(Cc.transition=null,vt=16>e?16:e,null===Gc)var r=!1;else{if(e=Gc,Gc=null,Qc=0,0!=(6&Mc))throw Error(a(331));var i=Mc;for(Mc|=4,Xo=e.current;null!==Xo;){var s=Xo,o=s.child;if(0!=(16&Xo.flags)){var c=s.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Xo=u;null!==Xo;){var d=Xo;switch(d.tag){case 0:case 11:case 15:nc(8,d,s)}var h=d.child;if(null!==h)h.return=d,Xo=h;else for(;null!==Xo;){var p=(d=Xo).sibling,f=d.return;if(ac(d),d===u){Xo=null;break}if(null!==p){p.return=f,Xo=p;break}Xo=f}}}var m=s.alternate;if(null!==m){var y=m.child;if(null!==y){m.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(null!==y)}}Xo=s}}if(0!=(2064&s.subtreeFlags)&&null!==o)o.return=s,Xo=o;else e:for(;null!==Xo;){if(0!=(2048&(s=Xo).flags))switch(s.tag){case 0:case 11:case 15:nc(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,Xo=b;break e}Xo=s.return}}var v=e.current;for(Xo=v;null!==Xo;){var w=(o=Xo).child;if(0!=(2064&o.subtreeFlags)&&null!==w)w.return=o,Xo=w;else e:for(o=v;null!==Xo;){if(0!=(2048&(c=Xo).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(e){Tl(c,c.return,e)}if(c===o){Xo=null;break e}var E=c.sibling;if(null!==E){E.return=c.return,Xo=E;break e}Xo=c.return}}if(Mc=i,Fi(),at&&"function"==typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(e){}r=!0}return r}finally{vt=n,Cc.transition=t}}return!1}function Sl(e,t,n){e=qa(e,t=po(0,t=co(n,t),1),1),t=el(),null!==e&&(gt(e,1,t),rl(e,t))}function Tl(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wc||!Wc.has(r))){t=qa(t,e=fo(t,e=co(n,e),1),1),e=el(),null!==t&&(gt(t,1,e),rl(t,e));break}}t=t.return}}function Al(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Rc===e&&(kc&n)===n&&(4===Pc||3===Pc&&(130023424&kc)===kc&&500>Ye()-Uc?hl(e,0):jc|=n),rl(e,t)}function Nl(e,t){0===t&&(0==(1&e.mode)?t=1:(t=ut,0==(130023424&(ut<<=1))&&(ut=4194304)));var n=el();null!==(e=Pa(e,t))&&(gt(e,t,n),rl(e,n))}function Cl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Nl(e,n)}function Ml(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Nl(e,n)}function Rl(e,t){return Ke(e,t)}function xl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kl(e,t,n,r){return new xl(e,t,n,r)}function Il(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ol(e,t){var n=e.alternate;return null===n?((n=kl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pl(e,t,n,r,i,s){var o=2;if(r=e,"function"==typeof e)Il(e)&&(o=1);else if("string"==typeof e)o=5;else e:switch(e){case S:return Ll(n.children,i,s,t);case T:o=8,i|=8;break;case A:return(e=kl(12,n,t,2|i)).elementType=A,e.lanes=s,e;case R:return(e=kl(13,n,t,i)).elementType=R,e.lanes=s,e;case x:return(e=kl(19,n,t,i)).elementType=x,e.lanes=s,e;case O:return Dl(n,i,s,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case N:o=10;break e;case C:o=9;break e;case M:o=11;break e;case k:o=14;break e;case I:o=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=kl(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Ll(e,t,n,r){return(e=kl(7,e,r,t)).lanes=n,e}function Dl(e,t,n,r){return(e=kl(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Bl(e,t,n){return(e=kl(6,e,null,t)).lanes=n,e}function jl(e,t,n){return(t=kl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ql(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $l(e,t,n,r,i,a,s,o,c){return e=new ql(e,t,n,o,c),1===t?(t=1,!0===a&&(t|=8)):t=0,a=kl(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Da(a),e}function Ul(e){if(!e)return Ci;e:{if(Fe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ii(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ii(n))return Li(e,n,t)}return t}function Fl(e,t,n,r,i,a,s,o,c){return(e=$l(n,r,!0,e,0,a,0,o,c)).context=Ul(null),n=e.current,(a=ja(r=el(),i=tl(n))).callback=null!=t?t:null,qa(n,a,i),e.current.lanes=i,gt(e,i,r),rl(e,r),e}function Vl(e,t,n,r){var i=t.current,a=el(),s=tl(i);return n=Ul(n),null===t.context?t.context=n:t.pendingContext=n,(t=ja(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=qa(i,t,s))&&(nl(e,i,s,a),$a(e,i,s)),s}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function zl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wl(e,t){zl(e,t),(e=e.alternate)&&zl(e,t)}Sc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)vo=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return vo=!1,function(e,t,n){switch(t.tag){case 3:Ro(t),pa();break;case 5:Ya(t);break;case 1:Ii(t.type)&&Di(t);break;case 4:Qa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ni(_a,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ni(Za,1&Za.current),t.flags|=128,null):0!=(n&t.child.childLanes)?Bo(e,t,n):(Ni(Za,1&Za.current),null!==(e=Ho(e,t,n))?e.sibling:null);Ni(Za,1&Za.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return Fo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ni(Za,Za.current),r)break;return null;case 22:case 23:return t.lanes=0,To(e,t,n)}return Ho(e,t,n)}(e,t,n);vo=0!=(131072&e.flags)}else vo=!1,ia&&0!=(1048576&t.flags)&&Zi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vo(e,t),e=t.pendingProps;var i=ki(t,Mi.current);Ra(t,n),i=ms(null,t,r,e,i,n);var s=ys();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ii(r)?(s=!0,Di(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Da(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Mo(null,t,r,!0,s,n)):(t.tag=0,ia&&s&&ea(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Il(e)?1:0;if(null!=e){if((e=e.$$typeof)===M)return 11;if(e===k)return 14}return 2}(r),e=to(r,e),i){case 0:t=No(null,t,r,e,n);break e;case 1:t=Co(null,t,r,e,n);break e;case 11:t=Eo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,No(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Co(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Ro(t),null===e)throw Error(a(387));r=t.pendingProps,i=(s=t.memoizedState).element,Ba(e,t),Fa(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=xo(e,t,r,n,i=co(Error(a(423)),t));break e}if(r!==i){t=xo(e,t,r,n,i=co(Error(a(424)),t));break e}for(ra=li(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ea(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pa(),r===i){t=Ho(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return Ya(t),null===e&&la(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==s&&ni(r,s)&&(t.flags|=32),Ao(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&la(t),null;case 13:return Bo(e,t,n);case 4:return Qa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wa(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Eo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ni(_a,r._currentValue),r._currentValue=o,null!==s)if(or(s.value,o)){if(s.children===i.children&&!Ri.current){t=Ho(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){o=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===s.tag){(l=ja(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ma(s.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ma(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ra(t,n),r=r(i=xa(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),_o(e,t,r,i=to(r.type,i),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Vo(e,t),t.tag=1,Ii(r)?(e=!0,Di(t)):e=!1,Ra(t,n),ao(t,r,i),oo(t,r,i,n),Mo(null,t,r,!0,e,n);case 19:return Fo(e,t,n);case 22:return To(e,t,n)}throw Error(a(156,t.tag))};var Kl="function"==typeof reportError?reportError:function(e){console.error(e)};function Gl(e){this._internalRoot=e}function Ql(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xl(){}function Zl(e,t,n,r,i){var a=n._reactRootContainer;if(a){var s=a;if("function"==typeof i){var o=i;i=function(){var e=Hl(s);o.call(e)}}Vl(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"==typeof r){var a=r;r=function(){var e=Hl(s);a.call(e)}}var s=Fl(t,r,e,0,null,!1,0,"",Xl);return e._reactRootContainer=s,e[fi]=s.current,Fr(8===e.nodeType?e.parentNode:e),ul(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var o=r;r=function(){var e=Hl(c);o.call(e)}}var c=$l(e,0,!1,null,0,!1,0,"",Xl);return e._reactRootContainer=c,e[fi]=c.current,Fr(8===e.nodeType?e.parentNode:e),ul((function(){Vl(t,c,n,r)})),c}(n,t,e,i,r);return Hl(s)}Ql.prototype.render=Gl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vl(e,t,null,null)},Ql.prototype.unmount=Gl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){Vl(null,e,null,null)})),t[fi]=null}},Ql.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Bt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),rl(t,Ye()),0==(6&Mc)&&(Fc=Ye()+500,Fi()))}break;case 13:ul((function(){var t=Pa(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Wl(e,1)}},_t=function(e){if(13===e.tag){var t=Pa(e,134217728);if(null!==t)nl(t,e,134217728,el());Wl(e,134217728)}},St=function(e){if(13===e.tag){var t=tl(e),n=Pa(e,t);if(null!==n)nl(n,e,t,el());Wl(e,t)}},Tt=function(){return vt},At=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(a(90));K(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=ll,Re=ul;var eu={usingClientEntryPoint:!1,Events:[vi,wi,Ei,Ne,Ce,ll]},tu={findFiberByHostInstance:bi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ze(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),at=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(a(299));var n=!1,r="",i=Kl;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=$l(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Fr(8===e.nodeType?e.parentNode:e),new Gl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=ze(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!Yl(t))throw Error(a(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",o=Kl;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Fl(t,null,e,1,null!=n?n:null,i,0,s,o),e[fi]=t.current,Fr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ql(t)},t.render=function(e,t,n){if(!Yl(t))throw Error(a(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yl(e))throw Error(a(40));return!!e._reactRootContainer&&(ul((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yl(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zl(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},25873:(e,t,n)=>{"use strict";var r=n(43144);t.H=r.createRoot,r.hydrateRoot},43144:(e,t,n)=>{"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(47400)},55142:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var o=2*(r+1)-1,c=e[o],l=o+1,u=e[l];if(0>a(c,n))l<i&&0>a(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[o]=n,r=o);else{if(!(l<i&&0>a(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var l=[],u=[],d=1,h=null,p=3,f=!1,m=!1,y=!1,g="function"==typeof setTimeout?setTimeout:null,b="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function E(e){if(y=!1,w(e),!m)if(null!==r(l))m=!0,O(_);else{var t=r(u);null!==t&&P(E,t.startTime-e)}}function _(e,n){m=!1,y&&(y=!1,b(N),N=-1),f=!0;var a=p;try{for(w(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!R());){var s=h.callback;if("function"==typeof s){h.callback=null,p=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"==typeof o?h.callback=o:h===r(l)&&i(l),w(n)}else i(l);h=r(l)}if(null!==h)var c=!0;else{var d=r(u);null!==d&&P(E,d.startTime-n),c=!1}return c}finally{h=null,p=a,f=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,A=null,N=-1,C=5,M=-1;function R(){return!(t.unstable_now()-M<C)}function x(){if(null!==A){var e=t.unstable_now();M=e;var n=!0;try{n=A(!0,e)}finally{n?S():(T=!1,A=null)}}else T=!1}if("function"==typeof v)S=function(){v(x)};else if("undefined"!=typeof MessageChannel){var k=new MessageChannel,I=k.port2;k.port1.onmessage=x,S=function(){I.postMessage(null)}}else S=function(){g(x,0)};function O(e){A=e,T||(T=!0,S())}function P(e,n){N=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var s=t.unstable_now();switch("object"==typeof a&&null!==a?a="number"==typeof(a=a.delay)&&0<a?s+a:s:a=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>s?(e.sortIndex=a,n(u,e),null===r(l)&&e===r(u)&&(y?(b(N),N=-1):y=!0,P(E,a-s))):(e.sortIndex=o,n(l,e),m||f||(m=!0,O(_))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},1993:(e,t,n)=>{"use strict";e.exports=n(55142)},73335:(e,t,n)=>{"use strict";var r=n(14041),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,a={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!c.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:u,props:a,_owner:o.current}}t.jsx=l,t.jsxs=l},14304:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function g(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||f}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var w=v.prototype=new b;w.constructor=v,m(w,g.prototype),w.isPureReactComponent=!0;var E=Array.isArray,_=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)_.call(t,i)&&!T.hasOwnProperty(i)&&(a[i]=t[i]);var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===a[i]&&(a[i]=c[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:S.current}}function N(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,a,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var c=!1;if(null===e)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return s=s(c=e),e=""===a?"."+M(c,0):a,E(s)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),R(s,t,i,"",(function(e){return e}))):null!=s&&(N(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(C,"$&/")+"/")+e)),t.push(s)),1;if(c=0,a=""===a?".":a+":",E(e))for(var l=0;l<e.length;l++){var u=a+M(o=e[l],l);c+=R(o,t,i,u,s)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),l=0;!(o=e.next()).done;)c+=R(o=o.value,t,i,u=a+M(o,l++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function x(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function k(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},O={transition:null},P={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:x,forEach:function(e,t,n){x(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return x(e,(function(){t++})),t},toArray:function(e){return x(e,(function(e){return e}))||[]},only:function(e){if(!N(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=s,t.PureComponent=v,t.StrictMode=a,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=L,t.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)_.call(t,l)&&!T.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}return{$$typeof:n,type:e.type,key:a,ref:s,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=N,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},14041:(e,t,n)=>{"use strict";e.exports=n(14304)},31085:(e,t,n)=>{"use strict";e.exports=n(73335)},85699:e=>{"use strict";var t={};function n(e,n,r){r||(r=Error);var i=function(e){var t,r;function i(t,r,i){return e.call(this,function(e,t,r){return"string"==typeof n?n:n(e,t,r)}(t,r,i))||this}return r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,i}(r);i.prototype.name=r.name,i.prototype.code=e,t[e]=i}function r(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var i,a,s,o;if("string"==typeof t&&(a="not ",t.substr(!s||s<0?0:+s,a.length)===a)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))o="The ".concat(e," ").concat(i," ").concat(r(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(r(t,"type"))}return o+=". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.F=t},11265:(e,t,n)=>{"use strict";var r=n(39907),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var a=n(28199),s=n(5291);n(35615)(u,a);for(var o=i(s.prototype),c=0;c<o.length;c++){var l=o[c];u.prototype[l]||(u.prototype[l]=s.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);a.call(this,e),s.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},94421:(e,t,n)=>{"use strict";e.exports=i;var r=n(99415);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n(35615)(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},28199:(e,t,n)=>{"use strict";var r,i=n(39907);e.exports=A,A.ReadableState=T;n(50046).EventEmitter;var a=function(e,t){return e.listeners(t).length},s=n(64856),o=n(1048).Buffer,c=(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var l,u=n(43951);l=u&&u.debuglog?u.debuglog("stream"):function(){};var d,h,p,f=n(82),m=n(16527),y=n(89952).getHighWaterMark,g=n(85699).F,b=g.ERR_INVALID_ARG_TYPE,v=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,E=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(35615)(A,s);var _=m.errorOrDestroy,S=["error","close","destroy","pause","resume"];function T(e,t,i){r=r||n(11265),e=e||{},"boolean"!=typeof i&&(i=t instanceof r),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=y(this,e,"readableHighWaterMark",i),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=n(18888).I),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function A(e){if(r=r||n(11265),!(this instanceof A))return new A(e);var t=this instanceof r;this._readableState=new T(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function N(e,t,n,r,i){l("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?x(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,k(e)))}(e,s);else if(i||(a=function(e,t){var n;r=t,o.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new b("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(s,t)),a)_(e,a);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),r)s.endEmitted?_(e,new E):C(e,s,t,!0);else if(s.ended)_(e,new v);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?C(e,s,t,!1):I(e,s)):C(e,s,t,!1)}else r||(s.reading=!1,I(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),I(e,t)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),A.prototype.destroy=m.destroy,A.prototype._undestroy=m.undestroy,A.prototype._destroy=function(e,t){t(e)},A.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=o.from(e,t),t=""),n=!0),N(this,e,t,!1,n)},A.prototype.unshift=function(e){return N(this,e,null,!0,!1)},A.prototype.isPaused=function(){return!1===this._readableState.flowing},A.prototype.setEncoding=function(e){d||(d=n(18888).I);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var M=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=M?e=M:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(k,e))}function k(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,B(e)}function I(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(l("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function P(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function L(e){l("readable nexttick read 0"),e.read(0)}function D(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function j(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function q(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick($,t,e))}function $(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function U(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}A.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?q(this):x(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&q(this),null;var r,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),t.ended||t.reading?l("reading or ended",i=!1):i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(r=e>0?j(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&q(this)),null!==r&&this.emit("data",r),r},A.prototype._read=function(e){_(this,new w("_read()"))},A.prototype.pipe=function(e,t){var n=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e)}r.pipesCount+=1,l("pipe count=%d opts=%j",r.pipesCount,t);var s=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?c:y;function o(t,i){l("onunpipe"),t===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,l("cleanup"),e.removeListener("close",f),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",p),e.removeListener("unpipe",o),n.removeListener("end",c),n.removeListener("end",y),n.removeListener("data",h),d=!0,!r.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){l("onend"),e.end()}r.endEmitted?i.nextTick(s):n.once("end",s),e.on("unpipe",o);var u=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,B(e))}}(n);e.on("drain",u);var d=!1;function h(t){l("ondata");var i=e.write(t);l("dest.write",i),!1===i&&((1===r.pipesCount&&r.pipes===e||r.pipesCount>1&&-1!==U(r.pipes,e))&&!d&&(l("false write response, pause",r.awaitDrain),r.awaitDrain++),n.pause())}function p(t){l("onerror",t),y(),e.removeListener("error",p),0===a(e,"error")&&_(e,t)}function f(){e.removeListener("finish",m),y()}function m(){l("onfinish"),e.removeListener("close",f),y()}function y(){l("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",p),e.once("close",f),e.once("finish",m),e.emit("pipe",n),r.flowing||(l("pipe resume"),n.resume()),e},A.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var s=U(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},A.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),r=this._readableState;return"data"===e?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===e&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,l("on readable",r.length,r.reading),r.length?x(this):r.reading||i.nextTick(L,this))),n},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(P,this),n},A.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(P,this),t},A.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(D,e,t))}(this,e)),e.paused=!1,this},A.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},A.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(l("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(l("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<S.length;a++)e.on(S[a],this.emit.bind(this,S[a]));return this._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(A.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=n(60534)),h(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),A._fromList=j,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(A.from=function(e,t){return void 0===p&&(p=n(71260)),p(A,e,t)})},99415:(e,t,n)=>{"use strict";e.exports=u;var r=n(85699).F,i=r.ERR_METHOD_NOT_IMPLEMENTED,a=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=r.ERR_TRANSFORM_WITH_LENGTH_0,c=n(11265);function l(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new a);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new o;if(e._transformState.transforming)throw new s;return e.push(null)}n(35615)(u,c),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,n){n(new i("_transform()"))},u.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},5291:(e,t,n)=>{"use strict";var r,i=n(39907);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=A,A.WritableState=T;var s={deprecate:n(66732)},o=n(64856),c=n(1048).Buffer,l=(void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var u,d=n(16527),h=n(89952).getHighWaterMark,p=n(85699).F,f=p.ERR_INVALID_ARG_TYPE,m=p.ERR_METHOD_NOT_IMPLEMENTED,y=p.ERR_MULTIPLE_CALLBACK,g=p.ERR_STREAM_CANNOT_PIPE,b=p.ERR_STREAM_DESTROYED,v=p.ERR_STREAM_NULL_VALUES,w=p.ERR_STREAM_WRITE_AFTER_END,E=p.ERR_UNKNOWN_ENCODING,_=d.errorOrDestroy;function S(){}function T(e,t,s){r=r||n(11265),e=e||{},"boolean"!=typeof s&&(s=t instanceof r),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=h(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,a=n.writecb;if("function"!=typeof a)throw new y;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,a){--t.pendingcb,n?(i.nextTick(a,r),i.nextTick(k,e,t),e._writableState.errorEmitted=!0,_(e,r)):(a(r),e._writableState.errorEmitted=!0,_(e,r),k(e,t))}(e,n,r,t,a);else{var s=R(n)||e.destroyed;s||n.corked||n.bufferProcessing||!n.bufferedRequest||M(e,n),r?i.nextTick(C,e,n,s,a):C(e,n,s,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function A(e){var t=this instanceof(r=r||n(11265));if(!t&&!u.call(A,this))return new A(e);this._writableState=new T(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),o.call(this)}function N(e,t,n,r,i,a,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function C(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),k(e,t)}function M(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var o=0,c=!0;n;)i[o]=n,n.isBuf||(c=!1),n=n.next,o+=1;i.allBuffers=c,N(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,d=n.callback;if(N(e,t,!1,t.objectMode?1:l.length,l,u,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(n){t.pendingcb--,n&&_(e,n),t.prefinished=!0,e.emit("prefinish"),k(e,t)}))}function k(e,t){var n=R(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(x,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}n(35615)(A,o),T.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(T.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===A&&(e&&e._writableState instanceof T)}})):u=function(e){return e instanceof this},A.prototype.pipe=function(){_(this,new g)},A.prototype.write=function(e,t,n){var r,a=this._writableState,s=!1,o=!a.objectMode&&(r=e,c.isBuffer(r)||r instanceof l);return o&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=S),a.ending?function(e,t){var n=new w;_(e,n),i.nextTick(t,n)}(this,n):(o||function(e,t,n,r){var a;return null===n?a=new v:"string"==typeof n||t.objectMode||(a=new f("chunk",["string","Buffer"],n)),!a||(_(e,a),i.nextTick(r,a),!1)}(this,a,e,n))&&(a.pendingcb++,s=function(e,t,n,r,i,a){if(!n){var s=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,n));return t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var o=t.objectMode?1:r.length;t.length+=o;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else N(e,t,!1,o,r,i,a);return l}(this,a,o,e,t,n)),s},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},A.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new E(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function(e,t,n){n(new m("_write()"))},A.prototype._writev=null,A.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||function(e,t,n){t.ending=!0,k(e,t),n&&(t.finished?i.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n),this},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),A.prototype.destroy=d.destroy,A.prototype._undestroy=d.undestroy,A.prototype._destroy=function(e,t){t(e)}},60534:(e,t,n)=>{"use strict";var r,i=n(39907);function a(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=n(94869),o=Symbol("lastResolve"),c=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),d=Symbol("lastPromise"),h=Symbol("handlePromise"),p=Symbol("stream");function f(e,t){return{value:e,done:t}}function m(e){var t=e[o];if(null!==t){var n=e[p].read();null!==n&&(e[d]=null,e[o]=null,e[c]=null,t(f(n,!1)))}}function y(e){i.nextTick(m,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((a(r={get stream(){return this[p]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(f(void 0,!0));if(this[p].destroyed)return new Promise((function(t,n){i.nextTick((function(){e[l]?n(e[l]):t(f(void 0,!0))}))}));var n,r=this[d];if(r)n=new Promise(function(e,t){return function(n,r){e.then((function(){t[u]?n(f(void 0,!0)):t[h](n,r)}),r)}}(r,this));else{var a=this[p].read();if(null!==a)return Promise.resolve(f(a,!1));n=new Promise(this[h])}return this[d]=n,n}},Symbol.asyncIterator,(function(){return this})),a(r,"return",(function(){var e=this;return new Promise((function(t,n){e[p].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,n=Object.create(b,(a(t={},p,{value:e,writable:!0}),a(t,o,{value:null,writable:!0}),a(t,c,{value:null,writable:!0}),a(t,l,{value:null,writable:!0}),a(t,u,{value:e._readableState.endEmitted,writable:!0}),a(t,h,{value:function(e,t){var r=n[p].read();r?(n[d]=null,n[o]=null,n[c]=null,e(f(r,!1))):(n[o]=e,n[c]=t)},writable:!0}),t));return n[d]=null,s(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[c];return null!==t&&(n[d]=null,n[o]=null,n[c]=null,t(e)),void(n[l]=e)}var r=n[o];null!==r&&(n[d]=null,n[o]=null,n[c]=null,r(f(void 0,!0))),n[u]=!0})),e.on("readable",y.bind(null,n)),n}},82:(e,t,n)=>{"use strict";function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var c=n(1048).Buffer,l=n(63011).inspect,u=l&&l.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,r;return t=e,(n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return c.alloc(0);for(var t,n,r,i=c.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=i,r=s,c.prototype.copy.call(t,n,r),s+=a.data.length,a=a.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(a===i.length?r+=i:r+=i.slice(0,e),0==(e-=a)){a===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(a));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=c.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),0==(e-=a)){a===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(a));break}++r}return this.length-=r,t}},{key:u,value:function(e,t){return l(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},16527:(e,t,n)=>{"use strict";var r=n(39907);function i(e,t){s(e,t),a(e)}function a(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return o||c?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(s,this,e)):r.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?r.nextTick(a,n):(n._writableState.errorEmitted=!0,r.nextTick(i,n,e)):r.nextTick(i,n,e):t?(r.nextTick(a,n),t(e)):r.nextTick(a,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}},94869:(e,t,n)=>{"use strict";var r=n(85699).F.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,n,a){if("function"==typeof n)return e(t,null,n);n||(n={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r)}}}(a||i);var s=n.readable||!1!==n.readable&&t.readable,o=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){o=!1,l=!0,s||a.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){s=!1,d=!0,o||a.call(t)},p=function(e){a.call(t,e)},f=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new r),a.call(t,e)):o&&!l?(t._writableState&&t._writableState.ended||(e=new r),a.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?o&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",u),t.on("abort",f),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",u),!1!==n.error&&t.on("error",p),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",p),t.removeListener("close",f)}}},71260:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},16815:(e,t,n)=>{"use strict";var r;var i=n(85699).F,a=i.ERR_MISSING_ARGS,s=i.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function c(e){e()}function l(e,t){return e.pipe(t)}e.exports=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var u,d=function(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var h=t.map((function(e,i){var a=i<t.length-1;return function(e,t,i,a){a=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(a);var o=!1;e.on("close",(function(){o=!0})),void 0===r&&(r=n(94869)),r(e,{readable:t,writable:i},(function(e){if(e)return a(e);o=!0,a()}));var c=!1;return function(t){if(!o&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void a(t||new s("pipe"))}}(e,a,i>0,(function(e){u||(u=e),e&&h.forEach(c),a||(h.forEach(c),d(u))}))}));return t.reduce(l)}},89952:(e,t,n)=>{"use strict";var r=n(85699).F.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,i){var a=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,i,n);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new r(i?n:"highWaterMark",a);return Math.floor(a)}return e.objectMode?16:16384}}},64856:(e,t,n)=>{e.exports=n(50046).EventEmitter},34156:(e,t,n)=>{(t=e.exports=n(28199)).Stream=t,t.Readable=t,t.Writable=n(5291),t.Duplex=n(11265),t.Transform=n(99415),t.PassThrough=n(94421),t.finished=n(94869),t.pipeline=n(16815)},52326:(e,t,n)=>{var r,i=n(39907);!function(e){!function(t){var r="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),a=s(e);function s(e,t){return function(n,r){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:r}),t&&t(n,r)}}void 0===r.Reflect?r.Reflect=e:a=s(r.Reflect,a),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",s="function"==typeof Object.create,o={__proto__:[]}instanceof Array,c=!s&&!o,l={create:s?function(){return ie(Object.create(null))}:o?function(){return ie({__proto__:null})}:function(){return ie({})},has:c?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:c?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),d="object"==typeof i&&"true"==="MISSING_ENV_VAR".REFLECT_METADATA_USE_MAP_POLYFILL,h=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?te():Map,p=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?ne():Set,f=new(d||"function"!=typeof WeakMap?re():WeakMap);function m(e,t,n,r){if(D(n)){if(!z(e))throw new TypeError;if(!K(t))throw new TypeError;return A(e,t)}if(!z(e))throw new TypeError;if(!q(t))throw new TypeError;if(!q(r)&&!D(r)&&!B(r))throw new TypeError;return B(r)&&(r=void 0),N(e,t,n=H(n),r)}function y(e,t){function n(n,r){if(!q(n))throw new TypeError;if(!D(r)&&!G(r))throw new TypeError;I(e,t,n,r)}return n}function g(e,t,n,r){if(!q(n))throw new TypeError;return D(r)||(r=H(r)),I(e,t,n,r)}function b(e,t,n){if(!q(t))throw new TypeError;return D(n)||(n=H(n)),M(e,t,n)}function v(e,t,n){if(!q(t))throw new TypeError;return D(n)||(n=H(n)),R(e,t,n)}function w(e,t,n){if(!q(t))throw new TypeError;return D(n)||(n=H(n)),x(e,t,n)}function E(e,t,n){if(!q(t))throw new TypeError;return D(n)||(n=H(n)),k(e,t,n)}function _(e,t){if(!q(e))throw new TypeError;return D(t)||(t=H(t)),O(e,t)}function S(e,t){if(!q(e))throw new TypeError;return D(t)||(t=H(t)),P(e,t)}function T(e,t,n){if(!q(t))throw new TypeError;D(n)||(n=H(n));var r=C(t,n,!1);if(D(r))return!1;if(!r.delete(e))return!1;if(r.size>0)return!0;var i=f.get(t);return i.delete(n),i.size>0||f.delete(t),!0}function A(e,t){for(var n=e.length-1;n>=0;--n){var r=(0,e[n])(t);if(!D(r)&&!B(r)){if(!K(r))throw new TypeError;t=r}}return t}function N(e,t,n,r){for(var i=e.length-1;i>=0;--i){var a=(0,e[i])(t,n,r);if(!D(a)&&!B(a)){if(!q(a))throw new TypeError;r=a}}return r}function C(e,t,n){var r=f.get(e);if(D(r)){if(!n)return;r=new h,f.set(e,r)}var i=r.get(t);if(D(i)){if(!n)return;i=new h,r.set(t,i)}return i}function M(e,t,n){if(R(e,t,n))return!0;var r=ee(t);return!B(r)&&M(e,r,n)}function R(e,t,n){var r=C(t,n,!1);return!D(r)&&F(r.has(e))}function x(e,t,n){if(R(e,t,n))return k(e,t,n);var r=ee(t);return B(r)?void 0:x(e,r,n)}function k(e,t,n){var r=C(t,n,!1);if(!D(r))return r.get(e)}function I(e,t,n,r){C(n,r,!0).set(e,t)}function O(e,t){var n=P(e,t),r=ee(e);if(null===r)return n;var i=O(r,t);if(i.length<=0)return n;if(n.length<=0)return i;for(var a=new p,s=[],o=0,c=n;o<c.length;o++){var l=c[o];a.has(l)||(a.add(l),s.push(l))}for(var u=0,d=i;u<d.length;u++){l=d[u];a.has(l)||(a.add(l),s.push(l))}return s}function P(e,t){var n=[],r=C(e,t,!1);if(D(r))return n;for(var i=J(r.keys()),a=0;;){var s=X(i);if(!s)return n.length=a,n;var o=Y(s);try{n[a]=o}catch(e){try{Z(i)}finally{throw e}}a++}}function L(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function D(e){return void 0===e}function B(e){return null===e}function j(e){return"symbol"==typeof e}function q(e){return"object"==typeof e?null!==e:"function"==typeof e}function $(e,t){switch(L(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",i=Q(e,r);if(void 0!==i){var a=i.call(e,n);if(q(a))throw new TypeError;return a}return U(e,"default"===n?"number":n)}function U(e,t){if("string"===t){var n=e.toString;if(W(n))if(!q(i=n.call(e)))return i;if(W(r=e.valueOf))if(!q(i=r.call(e)))return i}else{var r;if(W(r=e.valueOf))if(!q(i=r.call(e)))return i;var i,a=e.toString;if(W(a))if(!q(i=a.call(e)))return i}throw new TypeError}function F(e){return!!e}function V(e){return""+e}function H(e){var t=$(e,3);return j(t)?t:V(t)}function z(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function W(e){return"function"==typeof e}function K(e){return"function"==typeof e}function G(e){switch(L(e)){case 3:case 4:return!0;default:return!1}}function Q(e,t){var n=e[t];if(null!=n){if(!W(n))throw new TypeError;return n}}function J(e){var t=Q(e,a);if(!W(t))throw new TypeError;var n=t.call(e);if(!q(n))throw new TypeError;return n}function Y(e){return e.value}function X(e){var t=e.next();return!t.done&&t}function Z(e){var t=e.return;t&&t.call(e)}function ee(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return t;var i=r.constructor;return"function"!=typeof i||i===e?t:i}function te(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[a]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,r)},t.prototype.values=function(){return new n(this._keys,this._values,i)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[a]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function r(e,t){return e}function i(e,t){return t}function s(e,t){return[e,t]}}function ne(){return function(){function e(){this._map=new h}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[a]=function(){return this.keys()},e}()}function re(){var e=16,n=l.create(),r=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=a(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=a(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return a(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=a(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+c()}while(l.has(n,e));return n[e]=!0,e}function a(e,n){if(!t.call(e,r)){if(!n)return;Object.defineProperty(e,r,{value:l.create()})}return e[r]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function o(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e):s(new Array(e),e)}function c(){var t=o(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",r=0;r<e;++r){var i=t[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}function ie(e){return e.__=void 0,delete e.__,e}e("decorate",m),e("metadata",y),e("defineMetadata",g),e("hasMetadata",b),e("hasOwnMetadata",v),e("getMetadata",w),e("getOwnMetadata",E),e("getMetadataKeys",_),e("getOwnMetadataKeys",S),e("deleteMetadata",T)}(a)}()}(r||(r={}))},25586:(e,t,n)=>{"use strict";var r=n(1048).Buffer,i=n(35615),a=n(21848),s=new Array(16),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],h=[1352829926,1548603684,1836072691,2053994217,0];function p(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function f(e,t){return e<<t|e>>>32-t}function m(e,t,n,r,i,a,s,o){return f(e+(t^n^r)+a+s|0,o)+i|0}function y(e,t,n,r,i,a,s,o){return f(e+(t&n|~t&r)+a+s|0,o)+i|0}function g(e,t,n,r,i,a,s,o){return f(e+((t|~n)^r)+a+s|0,o)+i|0}function b(e,t,n,r,i,a,s,o){return f(e+(t&r|n&~r)+a+s|0,o)+i|0}function v(e,t,n,r,i,a,s,o){return f(e+(t^(n|~r))+a+s|0,o)+i|0}i(p,a),p.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var n=0|this._a,r=0|this._b,i=0|this._c,a=0|this._d,p=0|this._e,w=0|this._a,E=0|this._b,_=0|this._c,S=0|this._d,T=0|this._e,A=0;A<80;A+=1){var N,C;A<16?(N=m(n,r,i,a,p,e[o[A]],d[0],l[A]),C=v(w,E,_,S,T,e[c[A]],h[0],u[A])):A<32?(N=y(n,r,i,a,p,e[o[A]],d[1],l[A]),C=b(w,E,_,S,T,e[c[A]],h[1],u[A])):A<48?(N=g(n,r,i,a,p,e[o[A]],d[2],l[A]),C=g(w,E,_,S,T,e[c[A]],h[2],u[A])):A<64?(N=b(n,r,i,a,p,e[o[A]],d[3],l[A]),C=y(w,E,_,S,T,e[c[A]],h[3],u[A])):(N=v(n,r,i,a,p,e[o[A]],d[4],l[A]),C=m(w,E,_,S,T,e[c[A]],h[4],u[A])),n=p,p=a,a=f(i,10),i=r,r=N,w=T,T=S,S=f(_,10),_=E,E=C}var M=this._b+i+S|0;this._b=this._c+a+T|0,this._c=this._d+p+w|0,this._d=this._e+n+E|0,this._e=this._a+r+_|0,this._a=M},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=r.alloc?r.alloc(20):new r(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=p},25636:(e,t,n)=>{var r=n(1048),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=s),s.prototype=Object.create(i.prototype),a(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},19845:(e,t,n)=>{"use strict";var r,i=n(39907),a=n(1048),s=a.Buffer,o={};for(r in a)a.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(o[r]=a[r]);var c=o.Buffer={};for(r in s)s.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(c[r]=s[r]);if(o.Buffer.prototype=s.prototype,c.from&&c.from!==Uint8Array.from||(c.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return s(e,t,n)}),c.alloc||(c.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=s(e);return t&&0!==t.length?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r}),!o.kStringMaxLength)try{o.kStringMaxLength=i.binding("buffer").kStringMaxLength}catch(e){}o.constants||(o.constants={MAX_LENGTH:o.kMaxLength},o.kStringMaxLength&&(o.constants.MAX_STRING_LENGTH=o.kStringMaxLength)),e.exports=o},51565:(e,t,n)=>{const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(e,t){if(t=a(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),l("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){const t=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new u(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=a(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(c(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(c(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=i;const a=n(13990),{safeRe:s,t:o}=n(72841),c=n(54004),l=n(41361),u=n(24517),d=n(37476)},37476:(e,t,n)=>{class r{constructor(e,t){if(t=a(t),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof s)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!y(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&g(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&f)|(this.options.loose&&m))+":"+e,n=i.get(t);if(n)return n;const r=this.options.loose,a=r?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];e=e.replace(a,R(this.options.includePrerelease)),o("hyphen replace",e),e=e.replace(l[u.COMPARATORTRIM],d),o("comparator trim",e),e=e.replace(l[u.TILDETRIM],h),o("tilde trim",e),e=e.replace(l[u.CARETTRIM],p),o("caret trim",e);let c=e.split(" ").map((e=>v(e,this.options))).join(" ").split(/\s+/).map((e=>M(e,this.options)));r&&(c=c.filter((e=>(o("loose invalid filter",e,this.options),!!e.match(l[u.COMPARATORLOOSE]))))),o("range list",c);const g=new Map,b=c.map((e=>new s(e,this.options)));for(const e of b){if(y(e))return[e];g.set(e.value,e)}g.size>1&&g.has("")&&g.delete("");const w=[...g.values()];return i.set(t,w),w}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some((n=>b(n,t)&&e.set.some((e=>b(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(x(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const i=new(n(19424))({max:1e3}),a=n(13990),s=n(51565),o=n(41361),c=n(24517),{safeRe:l,t:u,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:p}=n(72841),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:m}=n(79543),y=e=>"<0.0.0-0"===e.value,g=e=>""===e.value,b=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},v=(e,t)=>(o("comp",e,t),e=S(e,t),o("caret",e),e=E(e,t),o("tildes",e),e=A(e,t),o("xrange",e),e=C(e,t),o("stars",e),e),w=e=>!e||"x"===e.toLowerCase()||"*"===e,E=(e,t)=>e.trim().split(/\s+/).map((e=>_(e,t))).join(" "),_=(e,t)=>{const n=t.loose?l[u.TILDELOOSE]:l[u.TILDE];return e.replace(n,((t,n,r,i,a)=>{let s;return o("tilde",e,t,n,r,i,a),w(n)?s="":w(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:w(i)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:a?(o("replaceTilde pr",a),s=`>=${n}.${r}.${i}-${a} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,o("tilde return",s),s}))},S=(e,t)=>e.trim().split(/\s+/).map((e=>T(e,t))).join(" "),T=(e,t)=>{o("caret",e,t);const n=t.loose?l[u.CARETLOOSE]:l[u.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,a,s)=>{let c;return o("caret",e,t,n,i,a,s),w(n)?c="":w(i)?c=`>=${n}.0.0${r} <${+n+1}.0.0-0`:w(a)?c="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:s?(o("replaceCaret pr",s),c="0"===n?"0"===i?`>=${n}.${i}.${a}-${s} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}-${s} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a}-${s} <${+n+1}.0.0-0`):(o("no pr"),c="0"===n?"0"===i?`>=${n}.${i}.${a}${r} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a} <${+n+1}.0.0-0`),o("caret return",c),c}))},A=(e,t)=>(o("replaceXRanges",e,t),e.split(/\s+/).map((e=>N(e,t))).join(" ")),N=(e,t)=>{e=e.trim();const n=t.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return e.replace(n,((n,r,i,a,s,c)=>{o("xRange",e,n,r,i,a,s,c);const l=w(i),u=l||w(a),d=u||w(s),h=d;return"="===r&&h&&(r=""),c=t.includePrerelease?"-0":"",l?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(u&&(a=0),s=0,">"===r?(r=">=",u?(i=+i+1,a=0,s=0):(a=+a+1,s=0)):"<="===r&&(r="<",u?i=+i+1:a=+a+1),"<"===r&&(c="-0"),n=`${r+i}.${a}.${s}${c}`):u?n=`>=${i}.0.0${c} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${a}.0${c} <${i}.${+a+1}.0-0`),o("xRange return",n),n}))},C=(e,t)=>(o("replaceStars",e,t),e.trim().replace(l[u.STAR],"")),M=(e,t)=>(o("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=e=>(t,n,r,i,a,s,o,c,l,u,d,h,p)=>`${n=w(r)?"":w(i)?`>=${r}.0.0${e?"-0":""}`:w(a)?`>=${r}.${i}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${c=w(l)?"":w(u)?`<${+l+1}.0.0-0`:w(d)?`<${l}.${+u+1}.0-0`:h?`<=${l}.${u}.${d}-${h}`:e?`<${l}.${u}.${+d+1}-0`:`<=${c}`}`.trim(),x=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(o(e[n].semver),e[n].semver!==s.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},24517:(e,t,n)=>{const r=n(41361),{MAX_LENGTH:i,MAX_SAFE_INTEGER:a}=n(79543),{safeRe:s,t:o}=n(72841),c=n(13990),{compareIdentifiers:l}=n(93806);class u{constructor(e,t){if(t=c(t),e instanceof u){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[o.LOOSE]:s[o.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<a)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return l(n,i)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return l(n,i)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===l(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=u},92281:(e,t,n)=>{const r=n(93955);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},54004:(e,t,n)=>{const r=n(28848),i=n(83458),a=n(89761),s=n(72386),o=n(51262),c=n(89639);e.exports=(e,t,n,l)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,l);case"!=":return i(e,n,l);case">":return a(e,n,l);case">=":return s(e,n,l);case"<":return o(e,n,l);case"<=":return c(e,n,l);default:throw new TypeError(`Invalid operator: ${t}`)}}},56783:(e,t,n)=>{const r=n(24517),i=n(93955),{safeRe:a,t:s}=n(72841);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=a[s.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),a[s.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;a[s.COERCERTL].lastIndex=-1}else n=e.match(a[s.COERCE]);return null===n?null:i(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)}},6106:(e,t,n)=>{const r=n(24517);e.exports=(e,t,n)=>{const i=new r(e,n),a=new r(t,n);return i.compare(a)||i.compareBuild(a)}},52132:(e,t,n)=>{const r=n(87851);e.exports=(e,t)=>r(e,t,!0)},87851:(e,t,n)=>{const r=n(24517);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},73269:(e,t,n)=>{const r=n(93955);e.exports=(e,t)=>{const n=r(e,null,!0),i=r(t,null,!0),a=n.compare(i);if(0===a)return null;const s=a>0,o=s?n:i,c=s?i:n,l=!!o.prerelease.length;if(!!c.prerelease.length&&!l)return c.patch||c.minor?o.patch?"patch":o.minor?"minor":"major":"major";const u=l?"pre":"";return n.major!==i.major?u+"major":n.minor!==i.minor?u+"minor":n.patch!==i.patch?u+"patch":"prerelease"}},28848:(e,t,n)=>{const r=n(87851);e.exports=(e,t,n)=>0===r(e,t,n)},89761:(e,t,n)=>{const r=n(87851);e.exports=(e,t,n)=>r(e,t,n)>0},72386:(e,t,n)=>{const r=n(87851);e.exports=(e,t,n)=>r(e,t,n)>=0},38868:(e,t,n)=>{const r=n(24517);e.exports=(e,t,n,i,a)=>{"string"==typeof n&&(a=i,i=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,i,a).version}catch(e){return null}}},51262:(e,t,n)=>{const r=n(87851);e.exports=(e,t,n)=>r(e,t,n)<0},89639:(e,t,n)=>{const r=n(87851);e.exports=(e,t,n)=>r(e,t,n)<=0},48762:(e,t,n)=>{const r=n(24517);e.exports=(e,t)=>new r(e,t).major},31353:(e,t,n)=>{const r=n(24517);e.exports=(e,t)=>new r(e,t).minor},83458:(e,t,n)=>{const r=n(87851);e.exports=(e,t,n)=>0!==r(e,t,n)},93955:(e,t,n)=>{const r=n(24517);e.exports=(e,t,n=!1)=>{if(e instanceof r)return e;try{return new r(e,t)}catch(e){if(!n)return null;throw e}}},96082:(e,t,n)=>{const r=n(24517);e.exports=(e,t)=>new r(e,t).patch},69428:(e,t,n)=>{const r=n(93955);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},87555:(e,t,n)=>{const r=n(87851);e.exports=(e,t,n)=>r(t,e,n)},93810:(e,t,n)=>{const r=n(6106);e.exports=(e,t)=>e.sort(((e,n)=>r(n,e,t)))},27229:(e,t,n)=>{const r=n(37476);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},34042:(e,t,n)=>{const r=n(6106);e.exports=(e,t)=>e.sort(((e,n)=>r(e,n,t)))},28474:(e,t,n)=>{const r=n(93955);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},2722:(e,t,n)=>{const r=n(72841),i=n(79543),a=n(24517),s=n(93806),o=n(93955),c=n(28474),l=n(92281),u=n(38868),d=n(73269),h=n(48762),p=n(31353),f=n(96082),m=n(69428),y=n(87851),g=n(87555),b=n(52132),v=n(6106),w=n(34042),E=n(93810),_=n(89761),S=n(51262),T=n(28848),A=n(83458),N=n(72386),C=n(89639),M=n(54004),R=n(56783),x=n(51565),k=n(37476),I=n(27229),O=n(26364),P=n(55039),L=n(55357),D=n(71280),B=n(37403),j=n(58854),q=n(27226),$=n(37183),U=n(18623),F=n(76486),V=n(40583);e.exports={parse:o,valid:c,clean:l,inc:u,diff:d,major:h,minor:p,patch:f,prerelease:m,compare:y,rcompare:g,compareLoose:b,compareBuild:v,sort:w,rsort:E,gt:_,lt:S,eq:T,neq:A,gte:N,lte:C,cmp:M,coerce:R,Comparator:x,Range:k,satisfies:I,toComparators:O,maxSatisfying:P,minSatisfying:L,minVersion:D,validRange:B,outside:j,gtr:q,ltr:$,intersects:U,simplifyRange:F,subset:V,SemVer:a,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},79543:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},41361:(e,t,n)=>{const r="object"==typeof n(39907)&&"MISSING_ENV_VAR".NODE_DEBUG&&/\bsemver\b/i.test("MISSING_ENV_VAR".NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=r},93806:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),i=t.test(n);return r&&i&&(e=+e,n=+n),e===n?0:r&&!i?-1:i&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},13990:e=>{const t=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!=typeof e?t:e:n},72841:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:a}=n(79543),s=n(41361),o=(t=e.exports={}).re=[],c=t.safeRe=[],l=t.src=[],u=t.t={};let d=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",a],[h,i]],f=(e,t,n)=>{const r=(e=>{for(const[t,n]of p)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),i=d++;s(e,i,t),u[e]=i,l[i]=t,o[i]=new RegExp(t,n?"g":void 0),c[i]=new RegExp(r,n?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),f("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${h}+`),f("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),f("FULL",`^${l[u.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),f("LOOSE",`^${l[u.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),f("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),f("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),f("COERCERTL",l[u.COERCE],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},19424:(e,t,n)=>{"use strict";const r=n(10222),i=Symbol("max"),a=Symbol("length"),s=Symbol("lengthCalculator"),o=Symbol("allowStale"),c=Symbol("maxAge"),l=Symbol("dispose"),u=Symbol("noDisposeOnSet"),d=Symbol("lruList"),h=Symbol("cache"),p=Symbol("updateAgeOnGet"),f=()=>1;const m=(e,t,n)=>{const r=e[h].get(t);if(r){const t=r.value;if(y(e,t)){if(b(e,r),!e[o])return}else n&&(e[p]&&(r.value.now=Date.now()),e[d].unshiftNode(r));return t.value}},y=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[c]&&n>e[c]},g=e=>{if(e[a]>e[i])for(let t=e[d].tail;e[a]>e[i]&&null!==t;){const n=t.prev;b(e,t),t=n}},b=(e,t)=>{if(t){const n=t.value;e[l]&&e[l](n.key,n.value),e[a]-=n.length,e[h].delete(n.key),e[d].removeNode(t)}};class v{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const w=(e,t,n,r)=>{let i=n.value;y(e,i)&&(b(e,n),e[o]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||f;if(this[s]="function"!=typeof t?f:t,this[o]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[l]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[p]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,g(this)}get max(){return this[i]}set allowStale(e){this[o]=!!e}get allowStale(){return this[o]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,g(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[s]&&(this[s]=e,this[a]=0,this[d].forEach((e=>{e.length=this[s](e.value,e.key),this[a]+=e.length}))),g(this)}get lengthCalculator(){return this[s]}get length(){return this[a]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let n=this[d].tail;null!==n;){const r=n.prev;w(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[d].head;null!==n;){const r=n.next;w(this,e,n,t),n=r}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){this[l]&&this[d]&&this[d].length&&this[d].forEach((e=>this[l](e.key,e.value))),this[h]=new Map,this[d]=new r,this[a]=0}dump(){return this[d].map((e=>!y(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,n){if((n=n||this[c])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,o=this[s](t,e);if(this[h].has(e)){if(o>this[i])return b(this,this[h].get(e)),!1;const s=this[h].get(e).value;return this[l]&&(this[u]||this[l](e,s.value)),s.now=r,s.maxAge=n,s.value=t,this[a]+=o-s.length,s.length=o,this.get(e),g(this),!0}const p=new v(e,t,o,r,n);return p.length>this[i]?(this[l]&&this[l](e,t),!1):(this[a]+=p.length,this[d].unshift(p),this[h].set(e,this[d].head),g(this),!0)}has(e){if(!this[h].has(e))return!1;const t=this[h].get(e).value;return!y(this,t)}get(e){return m(this,e,!0)}peek(e){return m(this,e,!1)}pop(){const e=this[d].tail;return e?(b(this,e),e.value):null}del(e){b(this,this[h].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[h].forEach(((e,t)=>m(this,t,!1)))}}},27226:(e,t,n)=>{const r=n(58854);e.exports=(e,t,n)=>r(e,t,">",n)},18623:(e,t,n)=>{const r=n(37476);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t,n))},37183:(e,t,n)=>{const r=n(58854);e.exports=(e,t,n)=>r(e,t,"<",n)},55039:(e,t,n)=>{const r=n(24517),i=n(37476);e.exports=(e,t,n)=>{let a=null,s=null,o=null;try{o=new i(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(a&&-1!==s.compare(e)||(a=e,s=new r(a,n)))})),a}},55357:(e,t,n)=>{const r=n(24517),i=n(37476);e.exports=(e,t,n)=>{let a=null,s=null,o=null;try{o=new i(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(a&&1!==s.compare(e)||(a=e,s=new r(a,n)))})),a}},71280:(e,t,n)=>{const r=n(24517),i=n(37476),a=n(89761);e.exports=(e,t)=>{e=new i(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let s=null;i.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!a(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||n&&!a(n,s)||(n=s)}return n&&e.test(n)?n:null}},58854:(e,t,n)=>{const r=n(24517),i=n(51565),{ANY:a}=i,s=n(37476),o=n(27229),c=n(89761),l=n(51262),u=n(89639),d=n(72386);e.exports=(e,t,n,h)=>{let p,f,m,y,g;switch(e=new r(e,h),t=new s(t,h),n){case">":p=c,f=u,m=l,y=">",g=">=";break;case"<":p=l,f=d,m=c,y="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(o(e,t,h))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let s=null,o=null;if(r.forEach((e=>{e.semver===a&&(e=new i(">=0.0.0")),s=s||e,o=o||e,p(e.semver,s.semver,h)?s=e:m(e.semver,o.semver,h)&&(o=e)})),s.operator===y||s.operator===g)return!1;if((!o.operator||o.operator===y)&&f(e,o.semver))return!1;if(o.operator===g&&m(e,o.semver))return!1}return!0}},76486:(e,t,n)=>{const r=n(27229),i=n(87851);e.exports=(e,t,n)=>{const a=[];let s=null,o=null;const c=e.sort(((e,t)=>i(e,t,n)));for(const e of c){r(e,t,n)?(o=e,s||(s=e)):(o&&a.push([s,o]),o=null,s=null)}s&&a.push([s,null]);const l=[];for(const[e,t]of a)e===t?l.push(e):t||e!==c[0]?t?e===c[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");const u=l.join(" || "),d="string"==typeof t.raw?t.raw:String(t);return u.length<d.length?u:t}},40583:(e,t,n)=>{const r=n(37476),i=n(51565),{ANY:a}=i,s=n(27229),o=n(87851),c=[new i(">=0.0.0-0")],l=[new i(">=0.0.0")],u=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===a){if(1===t.length&&t[0].semver===a)return!0;e=n.includePrerelease?c:l}if(1===t.length&&t[0].semver===a){if(n.includePrerelease)return!0;t=l}const r=new Set;let i,u,p,f,m,y,g;for(const t of e)">"===t.operator||">="===t.operator?i=d(i,t,n):"<"===t.operator||"<="===t.operator?u=h(u,t,n):r.add(t.semver);if(r.size>1)return null;if(i&&u){if(p=o(i.semver,u.semver,n),p>0)return null;if(0===p&&(">="!==i.operator||"<="!==u.operator))return null}for(const e of r){if(i&&!s(e,String(i),n))return null;if(u&&!s(e,String(u),n))return null;for(const r of t)if(!s(e,String(r),n))return!1;return!0}let b=!(!u||n.includePrerelease||!u.semver.prerelease.length)&&u.semver,v=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;b&&1===b.prerelease.length&&"<"===u.operator&&0===b.prerelease[0]&&(b=!1);for(const e of t){if(g=g||">"===e.operator||">="===e.operator,y=y||"<"===e.operator||"<="===e.operator,i)if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),">"===e.operator||">="===e.operator){if(f=d(i,e,n),f===e&&f!==i)return!1}else if(">="===i.operator&&!s(i.semver,String(e),n))return!1;if(u)if(b&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===b.major&&e.semver.minor===b.minor&&e.semver.patch===b.patch&&(b=!1),"<"===e.operator||"<="===e.operator){if(m=h(u,e,n),m===e&&m!==u)return!1}else if("<="===u.operator&&!s(u.semver,String(e),n))return!1;if(!e.operator&&(u||i)&&0!==p)return!1}return!(i&&y&&!u&&0!==p)&&(!(u&&g&&!i&&0!==p)&&(!v&&!b))},d=(e,t,n)=>{if(!e)return t;const r=o(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,n)=>{if(!e)return t;const r=o(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,n={})=>{if(e===t)return!0;e=new r(e,n),t=new r(t,n);let i=!1;e:for(const r of e.set){for(const e of t.set){const t=u(r,e,n);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},26364:(e,t,n)=>{const r=n(37476);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},37403:(e,t,n)=>{const r=n(37476);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},1229:(e,t,n)=>{var r=n(25636).Buffer;function i(e,t){this._block=r.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}i.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=r.from(e,t));for(var n=this._block,i=this._blockSize,a=e.length,s=this._len,o=0;o<a;){for(var c=s%i,l=Math.min(a-o,i-c),u=0;u<l;u++)n[c+u]=e[o+u];o+=l,(s+=l)%i==0&&this._update(n)}return this._len+=a,this},i.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var a=this._hash();return e?a.toString(e):a},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=i},13229:(e,t,n)=>{var r=e.exports=function(e){e=e.toLowerCase();var t=r[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};r.sha=n(93675),r.sha1=n(28980),r.sha224=n(20947),r.sha256=n(52826),r.sha384=n(19922),r.sha512=n(13699)},93675:(e,t,n)=>{var r=n(35615),i=n(1229),a=n(25636).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function c(){this.init(),this._w=o,i.call(this,64,56)}function l(e){return e<<30|e>>>2}function u(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(c,i),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,o=0|this._d,c=0|this._e,d=0;d<16;++d)n[d]=e.readInt32BE(4*d);for(;d<80;++d)n[d]=n[d-3]^n[d-8]^n[d-14]^n[d-16];for(var h=0;h<80;++h){var p=~~(h/20),f=0|((t=r)<<5|t>>>27)+u(p,i,a,o)+c+n[h]+s[p];c=o,o=a,a=l(i),i=r,r=f}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},28980:(e,t,n)=>{var r=n(35615),i=n(1229),a=n(25636).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function c(){this.init(),this._w=o,i.call(this,64,56)}function l(e){return e<<5|e>>>27}function u(e){return e<<30|e>>>2}function d(e,t,n,r){return 0===e?t&n|~t&r:2===e?t&n|t&r|n&r:t^n^r}r(c,i),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,o=0|this._d,c=0|this._e,h=0;h<16;++h)n[h]=e.readInt32BE(4*h);for(;h<80;++h)n[h]=(t=n[h-3]^n[h-8]^n[h-14]^n[h-16])<<1|t>>>31;for(var p=0;p<80;++p){var f=~~(p/20),m=l(r)+d(f,i,a,o)+c+n[p]+s[f]|0;c=o,o=a,a=u(i),i=r,r=m}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=a.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},20947:(e,t,n)=>{var r=n(35615),i=n(52826),a=n(1229),s=n(25636).Buffer,o=new Array(64);function c(){this.init(),this._w=o,a.call(this,64,56)}r(c,i),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=c},52826:(e,t,n)=>{var r=n(35615),i=n(1229),a=n(25636).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function c(){this.init(),this._w=o,i.call(this,64,56)}function l(e,t,n){return n^e&(t^n)}function u(e,t,n){return e&t|n&(e|t)}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function h(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function p(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}r(c,i),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(e){for(var t,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,o=0|this._d,c=0|this._e,f=0|this._f,m=0|this._g,y=0|this._h,g=0;g<16;++g)n[g]=e.readInt32BE(4*g);for(;g<64;++g)n[g]=0|(((t=n[g-2])>>>17|t<<15)^(t>>>19|t<<13)^t>>>10)+n[g-7]+p(n[g-15])+n[g-16];for(var b=0;b<64;++b){var v=y+h(c)+l(c,f,m)+s[b]+n[b]|0,w=d(r)+u(r,i,a)|0;y=m,m=f,f=c,c=o+v|0,o=a,a=i,i=r,r=v+w|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=o+this._d|0,this._e=c+this._e|0,this._f=f+this._f|0,this._g=m+this._g|0,this._h=y+this._h|0},c.prototype._hash=function(){var e=a.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=c},19922:(e,t,n)=>{var r=n(35615),i=n(13699),a=n(1229),s=n(25636).Buffer,o=new Array(160);function c(){this.init(),this._w=o,a.call(this,128,112)}r(c,i),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var e=s.allocUnsafe(48);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=c},13699:(e,t,n)=>{var r=n(35615),i=n(1229),a=n(25636).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function c(){this.init(),this._w=o,i.call(this,128,112)}function l(e,t,n){return n^e&(t^n)}function u(e,t,n){return e&t|n&(e|t)}function d(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function h(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function p(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function y(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function g(e,t){return e>>>0<t>>>0?1:0}r(c,i),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(e){for(var t=this._w,n=0|this._ah,r=0|this._bh,i=0|this._ch,a=0|this._dh,o=0|this._eh,c=0|this._fh,b=0|this._gh,v=0|this._hh,w=0|this._al,E=0|this._bl,_=0|this._cl,S=0|this._dl,T=0|this._el,A=0|this._fl,N=0|this._gl,C=0|this._hl,M=0;M<32;M+=2)t[M]=e.readInt32BE(4*M),t[M+1]=e.readInt32BE(4*M+4);for(;M<160;M+=2){var R=t[M-30],x=t[M-30+1],k=p(R,x),I=f(x,R),O=m(R=t[M-4],x=t[M-4+1]),P=y(x,R),L=t[M-14],D=t[M-14+1],B=t[M-32],j=t[M-32+1],q=I+D|0,$=k+L+g(q,I)|0;$=($=$+O+g(q=q+P|0,P)|0)+B+g(q=q+j|0,j)|0,t[M]=$,t[M+1]=q}for(var U=0;U<160;U+=2){$=t[U],q=t[U+1];var F=u(n,r,i),V=u(w,E,_),H=d(n,w),z=d(w,n),W=h(o,T),K=h(T,o),G=s[U],Q=s[U+1],J=l(o,c,b),Y=l(T,A,N),X=C+K|0,Z=v+W+g(X,C)|0;Z=(Z=(Z=Z+J+g(X=X+Y|0,Y)|0)+G+g(X=X+Q|0,Q)|0)+$+g(X=X+q|0,q)|0;var ee=z+V|0,te=H+F+g(ee,z)|0;v=b,C=N,b=c,N=A,c=o,A=T,o=a+Z+g(T=S+X|0,S)|0,a=i,S=_,i=r,_=E,r=n,E=w,n=Z+te+g(w=X+ee|0,X)|0}this._al=this._al+w|0,this._bl=this._bl+E|0,this._cl=this._cl+_|0,this._dl=this._dl+S|0,this._el=this._el+T|0,this._fl=this._fl+A|0,this._gl=this._gl+N|0,this._hl=this._hl+C|0,this._ah=this._ah+n+g(this._al,w)|0,this._bh=this._bh+r+g(this._bl,E)|0,this._ch=this._ch+i+g(this._cl,_)|0,this._dh=this._dh+a+g(this._dl,S)|0,this._eh=this._eh+o+g(this._el,T)|0,this._fh=this._fh+c+g(this._fl,A)|0,this._gh=this._gh+b+g(this._gl,N)|0,this._hh=this._hh+v+g(this._hl,C)|0},c.prototype._hash=function(){var e=a.allocUnsafe(64);function t(t,n,r){e.writeInt32BE(t,r),e.writeInt32BE(n,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=c},31983:(e,t,n)=>{e.exports=i;var r=n(50046).EventEmitter;function i(){r.call(this)}n(35615)(i,r),i.Readable=n(28199),i.Writable=n(5291),i.Duplex=n(11265),i.Transform=n(99415),i.PassThrough=n(94421),i.finished=n(94869),i.pipeline=n(16815),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",o),n.on("close",c));var s=!1;function o(){s||(s=!0,e.end())}function c(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",o),n.removeListener("close",c),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",l),e.on("error",l),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},18888:(e,t,n)=>{"use strict";var r=n(25636).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function p(e){return e&&e.length?this.write(e):""}t.I=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(i=s(t[r]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(i=s(t[r]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},47380:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r="\n@namespace svg 'http://www.w3.org/2000/svg';\n.snackbar-container,\n.snackbar-container * {\n  animation: none;\n  animation-delay: 0;\n  animation-direction: normal;\n  animation-duration: 0;\n  animation-fill-mode: none;\n  animation-iteration-count: 1;\n  animation-name: none;\n  animation-play-state: running;\n  animation-timing-function: ease;\n  backface-visibility: visible;\n  background: 0;\n  background-attachment: scroll;\n  background-clip: border-box;\n  background-color: rgba(0, 0, 0, 0);\n  background-image: none;\n  background-origin: padding-box;\n  background-position: 0 0;\n  background-position-x: 0;\n  background-position-y: 0;\n  background-repeat: repeat;\n  background-size: auto auto;\n  border: 0;\n  border-style: none;\n  border-width: medium;\n  border-color: inherit;\n  border-bottom: 0;\n  border-bottom-color: inherit;\n  border-bottom-left-radius: 0;\n  border-bottom-right-radius: 0;\n  border-bottom-style: none;\n  border-bottom-width: medium;\n  border-collapse: separate;\n  border-image: none;\n  border-left: 0;\n  border-left-color: inherit;\n  border-left-style: none;\n  border-left-width: medium;\n  border-radius: 0;\n  border-right: 0;\n  border-right-color: inherit;\n  border-right-style: none;\n  border-right-width: medium;\n  border-spacing: 0;\n  border-top: 0;\n  border-top-color: inherit;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border-top-style: none;\n  border-top-width: medium;\n  box-shadow: none;\n  box-sizing: border-box;\n  caption-side: top;\n  clear: none;\n  clip: auto;\n  color: inherit;\n  columns: auto;\n  column-count: auto;\n  column-fill: balance;\n  column-gap: normal;\n  column-rule: medium none currentColor;\n  column-rule-color: currentColor;\n  column-rule-style: none;\n  column-rule-width: none;\n  column-span: 1;\n  column-width: auto;\n  counter-increment: none;\n  counter-reset: none;\n  direction: ltr;\n  empty-cells: show;\n  float: none;\n  font: normal;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;\n  font-size: medium;\n  font-style: normal;\n  font-variant: normal;\n  font-weight: normal;\n  height: auto;\n  hyphens: none;\n  letter-spacing: normal;\n  line-height: normal;\n  list-style: none;\n  list-style-image: none;\n  list-style-position: outside;\n  list-style-type: disc;\n  margin: 0;\n  margin-bottom: 0;\n  margin-left: 0;\n  margin-right: 0;\n  margin-top: 0;\n  opacity: 1;\n  orphans: 0;\n  outline: 0;\n  outline-color: invert;\n  outline-style: none;\n  outline-width: medium;\n  overflow: visible;\n  overflow-x: visible;\n  overflow-y: visible;\n  padding: 0;\n  padding-bottom: 0;\n  padding-left: 0;\n  padding-right: 0;\n  padding-top: 0;\n  page-break-after: auto;\n  page-break-before: auto;\n  page-break-inside: auto;\n  perspective: none;\n  perspective-origin: 50% 50%;\n  pointer-events: auto;\n  position: static;\n  quotes: '\\201C''\\201D''\\2018''\\2019';\n  tab-size: 8;\n  table-layout: auto;\n  text-align: inherit;\n  text-align-last: auto;\n  text-decoration: none;\n  text-decoration-color: inherit;\n  text-decoration-line: none;\n  text-decoration-style: solid;\n  text-indent: 0;\n  text-shadow: none;\n  text-transform: none;\n  transform: none;\n  transform-style: flat;\n  transition: none;\n  transition-delay: 0s;\n  transition-duration: 0s;\n  transition-property: none;\n  transition-timing-function: ease;\n  unicode-bidi: normal;\n  vertical-align: baseline;\n  visibility: visible;\n  white-space: normal;\n  widows: 0;\n  word-spacing: normal;\n  z-index: auto;\n}\n.snackbar-container strong {\n  font-weight: bold;\n}\n.snackbar-container * {\n  box-sizing: border-box;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;\n  line-height: 1;\n}\n.snackbar-container [class*='container'] {\n  margin: 0;\n  padding: 0;\n}\n.snackbar-container style {\n  display: none;\n}\n.snackbar-container .-gear-container {\n  margin-left: 16px !important;\n  margin-right: 9px !important;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  transition: opacity 0.25s;\n}\n.snackbar-container .-gear-container * {\n  user-select: none;\n}\n.snackbar-container .-gear-container svg {\n  opacity: 0;\n  position: absolute;\n}\n.snackbar-container .-gear-icon {\n  height: 12px;\n  width: 12px;\n  z-index: 10000;\n}\n.snackbar-container .snackbar {\n  align-items: flex-end;\n  display: flex;\n  flex-direction: column;\n  position: fixed;\n  right: 0;\n  top: 0;\n  z-index: 2147483647;\n}\n.snackbar-container .snackbar * {\n  user-select: none;\n}\n.snackbar-container .snackbar-instance {\n  display: flex;\n  flex-direction: column;\n  margin: 8px 16px 0 16px;\n  overflow: visible;\n  text-align: left;\n  transform: translateX(0);\n  transition: opacity 0.25s, transform 0.25s;\n}\n.snackbar-container .snackbar-instance-header:hover .-gear-container svg {\n  opacity: 1;\n}\n.snackbar-container .snackbar-instance-header {\n  display: flex;\n  align-items: center;\n  background: #fff;\n  overflow: hidden;\n  border: 1px solid #e7ebee;\n  box-sizing: border-box;\n  border-radius: 8px;\n  cursor: pointer;\n}\n.snackbar-container .snackbar-instance-header-cblogo {\n  margin: 8px 8px 8px 8px;\n}\n.snackbar-container .snackbar-instance-header * {\n  cursor: pointer;\n}\n.snackbar-container .snackbar-instance-header-message {\n  color: #000;\n  font-size: 13px;\n  line-height: 1.5;\n  user-select: none;\n}\n.snackbar-container .snackbar-instance-menu {\n  background: #fff;\n  transition: opacity 0.25s ease-in-out, transform 0.25s linear, visibility 0s;\n  visibility: hidden;\n  border: 1px solid #e7ebee;\n  box-sizing: border-box;\n  border-radius: 8px;\n  opacity: 0;\n  flex-direction: column;\n  padding-left: 8px;\n  padding-right: 8px;\n}\n.snackbar-container .snackbar-instance-menu-item:last-child {\n  margin-bottom: 8px !important;\n}\n.snackbar-container .snackbar-instance-menu-item:hover {\n  background: #f5f7f8;\n  border-radius: 6px;\n  transition: background 0.25s;\n}\n.snackbar-container .snackbar-instance-menu-item:hover span {\n  color: #050f19;\n  transition: color 0.25s;\n}\n.snackbar-container .snackbar-instance-menu-item:hover svg path {\n  fill: #000;\n  transition: fill 0.25s;\n}\n.snackbar-container .snackbar-instance-menu-item {\n  visibility: inherit;\n  height: 35px;\n  margin-top: 8px;\n  margin-bottom: 0;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 8px;\n  cursor: pointer;\n}\n.snackbar-container .snackbar-instance-menu-item * {\n  visibility: inherit;\n  cursor: pointer;\n}\n.snackbar-container .snackbar-instance-menu-item-is-red:hover {\n  background: rgba(223, 95, 103, 0.2);\n  transition: background 0.25s;\n}\n.snackbar-container .snackbar-instance-menu-item-is-red:hover * {\n  cursor: pointer;\n}\n.snackbar-container .snackbar-instance-menu-item-is-red:hover svg path {\n  fill: #df5f67;\n  transition: fill 0.25s;\n}\n.snackbar-container .snackbar-instance-menu-item-is-red:hover span {\n  color: #df5f67;\n  transition: color 0.25s;\n}\n.snackbar-container .snackbar-instance-menu-item-info {\n  color: #aaa;\n  font-size: 13px;\n  margin: 0 8px 0 32px;\n  position: absolute;\n}\n.snackbar-container .snackbar-instance-hidden {\n  opacity: 0;\n  text-align: left;\n  transform: translateX(25%);\n  transition: opacity 0.5s linear;\n}\n.snackbar-container .snackbar-instance-expanded .snackbar-instance-menu {\n  opacity: 1;\n  display: flex;\n  transform: translateY(8px);\n  visibility: visible;\n}\n"},55452:(e,t,n)=>{"use strict";n.d(t,{N8:()=>m,Np:()=>p});n(14041);var r=n(34767);let i=()=>{},a=()=>{},s={},o="superapp",c={},l={};const u={},d={};function h(e){return{...e,...s,...c,...l,...d,...u,currentAppMode:o}}function p(e,t,n,i=!1){const{action:a,componentType:s}=t,o=h(t),c={isDiagnostic:!0,action:a??r.X2.measurement,componentType:s??r.I5.unknown};return y(e,c,i),(0,r.$s)(e,{...o,...c},n)}const f={};function m(e){const t={...e,tags:{...e.tags,...f}};return a(t),(0,r.N8)(t)}function y(e,t,n=!1){const{loggingId:r,...a}=t;i(e,{isNoisy:n,properties:a,globalProperties:h({})})}},67620:(e,t,n)=>{"use strict";n.d(t,{Address:()=>c});var r=n(63793),i=n.n(r),a=n(9642),s=n(77673),o=n(1048).Buffer;class c{constructor(e){this._compressedPublicKey=e}static from(e){return new c(e)}static checksumAddress(e){if(!l(e))throw new Error("invalid address");const t=(0,s.LL)(e).toLowerCase(),n=i()("keccak256").update(t,"ascii").digest("hex");let r="0x";for(let e=0;e<t.length;e++)parseInt(n[e],16)>=8?r+=t[e].toUpperCase():r+=t[e];return r}static getAddressValidationError(e,t){if(!l(e))return Error("Invalid ethereum address");if(t)return;const n=(0,s.LL)(e);if(n.match(/[0-9a-f]{40}/)||n.match(/[0-9A-F]{40}/))return;let r;try{r=c.checksumAddress(n)}catch(e){return new u("Valid ethereum address failed checksum validation")}return n!==r.slice(2)?new u("Valid ethereum address failed checksum validation"):void 0}static isValid(e){if(!l(e))return!1;const t=(0,s.LL)(e);if(t.match(/[0-9a-f]{40}/)||t.match(/[0-9A-F]{40}/))return!0;let n;try{n=c.checksumAddress(t)}catch(e){return!1}return t===n.slice(2)}async getPublicKey(){if(!this._publicKey){const e=await async function(e){const t=await(0,a.r)(),{length:n}=e,r=e[0];if(33!==n&&65!==n||r<2||r>4)throw new Error("invalid public key");let i;try{i=t.keyFromPublic(e)}catch(e){throw new Error("invalid public key")}return o.from(i.getPublic().encode("array",!1))}(this._compressedPublicKey);this._publicKey=e}return this._publicKey}async getRawAddress(){if(!this._rawAddress){const e=await this.getPublicKey();this._rawAddress=i()("keccak256").update(e.slice(1)).digest().slice(-20)}return this._rawAddress}async getAddress(){if(!this._address){const e=await this.getRawAddress();this._address=c.checksumAddress(e.toString("hex"))}return this._address}}function l(e){return!!(0,s.LL)(e).match(/^[0-9a-fA-F]{40}$/)}class u extends Error{constructor(e){super(e),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}},9642:(e,t,n)=>{"use strict";let r;async function i(){const{ec:e}=await Promise.resolve().then(n.t.bind(n,13360,23));return r||(r=new e("secp256k1")),r}n.d(t,{r:()=>i})},77673:(e,t,n)=>{"use strict";n.d(t,{Ex:()=>d,LL:()=>h,So:()=>c,TI:()=>u,p4:()=>l});var r=n(82823),i=n.n(r),a=n(63793),s=n.n(a),o=(n(70156),n(20953),n(1048).Buffer);new(i())(2).pow(new(i())(256)).sub(new(i())(1));function c(e){const t=e instanceof o?e:o.from(e,"utf8");return s()("keccak256").update(t).digest()}function l(e){return`0x${e.toString("hex")}`}function u(e,t=!0){return e.isZero()&&t?o.alloc(0):e.toArrayLike(o)}function d(e,t=!0){const n=e.toString("hex");return t?`0x${n}`:n}function h(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2):e}},20953:(e,t,n)=>{"use strict";var r=n(89029),i=n.n(r);class a extends(i()){constructor(e){super(e)}static create(e,t="en"){let n;if("string"==typeof e){const r=Intl.NumberFormat(t).format(11111).replace(/\p{Number}/gu,""),i=Intl.NumberFormat(t).format(1.1).replace(/\p{Number}/gu,"");n=e.replace(new RegExp(`\\${r}`,"g"),"").replace(new RegExp(`\\${i}`),".")}else n=e;return new s(n)}toString(){return super.toFixed(78).replace(/0+$/,"").replace(/\.{1}$/,"")}}const s=a.clone({precision:78,toExpPos:78})},18047:function(e,t,n){var r;!function(i,a){"use strict";var s="function",o="undefined",c="object",l="string",u="major",d="model",h="name",p="type",f="vendor",m="version",y="architecture",g="console",b="mobile",v="tablet",w="smarttv",E="wearable",_="embedded",S="Amazon",T="Apple",A="ASUS",N="BlackBerry",C="Browser",M="Chrome",R="Firefox",x="Google",k="Huawei",I="LG",O="Microsoft",P="Motorola",L="Opera",D="Samsung",B="Sharp",j="Sony",q="Xiaomi",$="Zebra",U="Facebook",F="Chromium OS",V="Mac OS",H=" Browser",z=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},W=function(e,t){return typeof e===l&&-1!==K(t).indexOf(K(e))},K=function(e){return e.toLowerCase()},G=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,500)},Q=function(e,t){for(var n,r,i,o,l,u,d=0;d<t.length&&!l;){var h=t[d],p=t[d+1];for(n=r=0;n<h.length&&!l&&h[n];)if(l=h[n++].exec(e))for(i=0;i<p.length;i++)u=l[++r],typeof(o=p[i])===c&&o.length>0?2===o.length?typeof o[1]==s?this[o[0]]=o[1].call(this,u):this[o[0]]=o[1]:3===o.length?typeof o[1]!==s||o[1].exec&&o[1].test?this[o[0]]=u?u.replace(o[1],o[2]):a:this[o[0]]=u?o[1].call(this,u,o[2]):a:4===o.length&&(this[o[0]]=u?o[3].call(this,u.replace(o[1],o[2])):a):this[o]=u||a;d+=2}},J=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(W(t[n][r],e))return"?"===n?a:n}else if(W(t[n],e))return"?"===n?a:n;return t.hasOwnProperty("*")?t["*"]:e},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},X={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,m],[/opios[\/ ]+([\w\.]+)/i],[m,[h,L+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[m,[h,L+" GX"]],[/\bopr\/([\w\.]+)/i],[m,[h,L]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,m],[/quark(?:pc)?\/([-\w\.]+)/i],[m,[h,"Quark"]],[/\bddg\/([\w\.]+)/i],[m,[h,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[h,"UC"+C]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[h,"Smart Lenovo "+C]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+C],m],[/\bfocus\/([\w\.]+)/i],[m,[h,R+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[h,L+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[h,L+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[h,"MIUI "+C]],[/fxios\/([-\w\.]+)/i],[m,[h,R]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360"+H]],[/\b(qq)\/([\w\.]+)/i],[[h,/(.+)/,"$1Browser"],m],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1"+H],m],[/samsungbrowser\/([\w\.]+)/i],[m,[h,D+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],m],[/metasr[\/ ]?([\d\.]+)/i],[m,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,m],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,U],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[h,M+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,M+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[h,"Android "+C]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[m,J,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],m],[/(wolvic)\/([\w\.]+)/i],[h,m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[h,R+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,[m,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[h,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[y,"amd64"]],[/(ia32(?=;))/i],[[y,K]],[/((?:i[346]|x)86)[;\)]/i],[[y,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[y,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[y,"armhf"]],[/windows (ce|mobile); ppc;/i],[[y,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[y,/ower/,"",K]],[/(sun4\w)[;\)]/i],[[y,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[y,K]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,D],[p,v]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[d,[f,D],[p,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[f,T],[p,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[f,T],[p,v]],[/(macintosh);/i],[d,[f,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[f,B],[p,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[f,k],[p,v]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[f,k],[p,b]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[d,/_/g," "],[f,q],[p,b]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[f,q],[p,v]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[f,"OPPO"],[p,b]],[/\b(opd2\d{3}a?) bui/i],[d,[f,"OPPO"],[p,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[p,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[d,[f,"Realme"],[p,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[f,P],[p,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[f,P],[p,v]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,I],[p,v]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[f,I],[p,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[f,"Lenovo"],[p,v]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[p,b]],[/(pixel c)\b/i],[d,[f,x],[p,v]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[f,x],[p,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[f,j],[p,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[f,j],[p,v]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[f,"OnePlus"],[p,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[f,S],[p,v]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,S],[p,b]],[/(playbook);[-\w\),; ]+(rim)/i],[d,f,[p,v]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[f,N],[p,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[f,A],[p,v]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[f,A],[p,b]],[/(nexus 9)/i],[d,[f,"HTC"],[p,v]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[d,/_/g," "],[p,b]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[d,[f,"TCL"],[p,v]],[/(itel) ((\w+))/i],[[f,K],d,[p,J,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[f,"Acer"],[p,v]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[f,"Meizu"],[p,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[d,[f,"Ulefone"],[p,b]],[/droid.+; (a(?:015|06[35]|142p?))/i],[d,[f,"Nothing"],[p,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,d,[p,b]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,d,[p,v]],[/(surface duo)/i],[d,[f,O],[p,v]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[f,"Fairphone"],[p,b]],[/(u304aa)/i],[d,[f,"AT&T"],[p,b]],[/\bsie-(\w*)/i],[d,[f,"Siemens"],[p,b]],[/\b(rct\w+) b/i],[d,[f,"RCA"],[p,v]],[/\b(venue[\d ]{2,7}) b/i],[d,[f,"Dell"],[p,v]],[/\b(q(?:mv|ta)\w+) b/i],[d,[f,"Verizon"],[p,v]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[f,"Barnes & Noble"],[p,v]],[/\b(tm\d{3}\w+) b/i],[d,[f,"NuVision"],[p,v]],[/\b(k88) b/i],[d,[f,"ZTE"],[p,v]],[/\b(nx\d{3}j) b/i],[d,[f,"ZTE"],[p,b]],[/\b(gen\d{3}) b.+49h/i],[d,[f,"Swiss"],[p,b]],[/\b(zur\d{3}) b/i],[d,[f,"Swiss"],[p,v]],[/\b((zeki)?tb.*\b) b/i],[d,[f,"Zeki"],[p,v]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],d,[p,v]],[/\b(ns-?\w{0,9}) b/i],[d,[f,"Insignia"],[p,v]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[f,"NextBook"],[p,v]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[p,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],d,[p,b]],[/\b(ph-1) /i],[d,[f,"Essential"],[p,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[f,"Envizen"],[p,v]],[/\b(trio[-\w\. ]+) b/i],[d,[f,"MachSpeed"],[p,v]],[/\btu_(1491) b/i],[d,[f,"Rotor"],[p,v]],[/(shield[\w ]+) b/i],[d,[f,"Nvidia"],[p,v]],[/(sprint) (\w+)/i],[f,d,[p,b]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[f,O],[p,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[f,$],[p,v]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[f,$],[p,b]],[/smart-tv.+(samsung)/i],[f,[p,w]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[f,D],[p,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,I],[p,w]],[/(apple) ?tv/i],[f,[d,T+" TV"],[p,w]],[/crkey/i],[[d,M+"cast"],[f,x],[p,w]],[/droid.+aft(\w+)( bui|\))/i],[d,[f,S],[p,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[f,B],[p,w]],[/(bravia[\w ]+)( bui|\))/i],[d,[f,j],[p,w]],[/(mitv-\w{5}) bui/i],[d,[f,q],[p,w]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[p,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,G],[d,G],[p,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[p,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[p,g]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[p,g]],[/(playstation [345portablevi]+)/i],[d,[f,j],[p,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[f,O],[p,g]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[d,[f,D],[p,E]],[/((pebble))app/i],[f,d,[p,E]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[f,T],[p,E]],[/droid.+; (glass) \d/i],[d,[f,x],[p,E]],[/droid.+; (wt63?0{2,3})\)/i],[d,[f,$],[p,E]],[/(quest( \d| pro)?)/i],[d,[f,U],[p,E]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[p,_]],[/(aeobc)\b/i],[d,[f,S],[p,_]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[d,[p,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[p,v]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[p,v]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[p,b]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[m,J,Y]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,J,Y],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,V],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,m],[/\(bb(10);/i],[m,[h,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[h,R+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[h,M+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,F],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,m],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,m]]},Z=function(e,t){if(typeof e===c&&(t=e,e=a),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof i!==o&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:""),g=n&&n.userAgentData?n.userAgentData:a,w=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(X,t):X,E=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[h]=a,t[m]=a,Q.call(t,r,w.browser),t[u]=typeof(e=t[m])===l?e.replace(/[^\d\.]/g,"").split(".")[0]:a,E&&n&&n.brave&&typeof n.brave.isBrave==s&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[y]=a,Q.call(e,r,w.cpu),e},this.getDevice=function(){var e={};return e[f]=a,e[d]=a,e[p]=a,Q.call(e,r,w.device),E&&!e[p]&&g&&g.mobile&&(e[p]=b),E&&"Macintosh"==e[d]&&n&&typeof n.standalone!==o&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]="iPad",e[p]=v),e},this.getEngine=function(){var e={};return e[h]=a,e[m]=a,Q.call(e,r,w.engine),e},this.getOS=function(){var e={};return e[h]=a,e[m]=a,Q.call(e,r,w.os),E&&!e[h]&&g&&g.platform&&"Unknown"!=g.platform&&(e[h]=g.platform.replace(/chrome os/i,F).replace(/macos/i,V)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===l&&e.length>500?G(e,500):e,this},this.setUA(r),this};Z.VERSION="1.0.39",Z.BROWSER=z([h,m,u]),Z.CPU=z([y]),Z.DEVICE=z([d,f,p,g,b,w,v,E,_]),Z.ENGINE=Z.OS=z([h,m]),typeof t!==o?(e.exports&&(t=e.exports=Z),t.UAParser=Z):n.amdO?(r=function(){return Z}.call(t,n,t,e))===a||(e.exports=r):typeof i!==o&&(i.UAParser=Z);var ee=typeof i!==o&&(i.jQuery||i.Zepto);if(ee&&!ee.ua){var te=new Z;ee.ua=te.getResult(),ee.ua.get=function(){return te.getUA()},ee.ua.set=function(e){te.setUA(e);var t=te.getResult();for(var n in t)ee.ua[n]=t[n]}}}("object"==typeof window?window:this)},66732:(e,t,n)=>{function r(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},60788:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});const r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},48062:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>a});var i=new Uint8Array(16);function a(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}},99834:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});for(var r=n(94321),i=[],a=0;a<256;++a)i.push((a+256).toString(16).substr(1));const s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!(0,r.A)(n))throw TypeError("Stringified UUID is invalid");return n}},77981:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(48062),i=n(99834);const a=function(e,t,n){var a=(e=e||{}).random||(e.rng||r.A)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var s=0;s<16;++s)t[n+s]=a[s];return t}return(0,i.A)(a)}},94321:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(60788);const i=function(e){return"string"==typeof e&&r.A.test(e)}},93227:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var r=arguments[n];for(var i in r)t.call(r,i)&&(e[i]=r[i])}return e};var t=Object.prototype.hasOwnProperty},47047:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},10222:(e,t,n)=>{"use strict";function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}function i(e,t,n){var r=t===e.head?new o(n,null,t,e):new o(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function a(e,t){e.tail=new o(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function s(e,t){e.head=new o(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function o(e,t,n,r){if(!(this instanceof o))return new o(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=r,r.Node=o,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)s(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,i=this.head;null!==i;)n.push(e.call(t,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,i=this.tail;null!==i;)n.push(e.call(t,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,a=this.head;null!==a&&i<e;i++)a=a.next;for(;null!==a&&i<t;i++,a=a.next)n.push(a.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,a=this.tail;null!==a&&i>t;i--)a=a.prev;for(;null!==a&&i>e;i--,a=a.prev)n.push(a.value);return n},r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,a=this.head;null!==a&&r<e;r++)a=a.next;var s=[];for(r=0;a&&r<t;r++)s.push(a.value),a=this.removeNode(a);null===a&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(r=0;r<n.length;r++)a=i(this,a,n[r]);return s},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{n(47047)(r)}catch(e){}},19219:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAgMSAwLTUgMi41IDIuNSAwIDAgMSAwIDV6IiBmaWxsPSIjMDUwRjE5Ii8+PC9zdmc+"},20125:e=>{"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzQiIGhlaWdodD0iMzQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNTgxIDExLjA3QTkuNDg4IDkuNDg4IDAgMCAxIDExLjA3IDEuNThoMTEuODZhOS40ODggOS40ODggMCAwIDEgOS40ODkgOS40ODl2MTEuODZhOS40ODggOS40ODggMCAwIDEtOS40ODkgOS40ODlIMTEuMDdBOS40ODggOS40ODggMCAwIDEgMS41OCAyMi45M1YxMS4wN1oiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjA3IDBoMTEuODZDMjkuMDQ0IDAgMzQgNC45NTYgMzQgMTEuMDd2MTEuODZDMzQgMjkuMDQ0IDI5LjA0NCAzNCAyMi45MyAzNEgxMS4wN0M0Ljk1NiAzNCAwIDI5LjA0NCAwIDIyLjkzVjExLjA3QzAgNC45NTYgNC45NTYgMCAxMS4wNyAwWm0wIDEuNTgxQTkuNDg4IDkuNDg4IDAgMCAwIDEuNTggMTEuMDd2MTEuODZhOS40ODggOS40ODggMCAwIDAgOS40ODkgOS40ODloMTEuODZhOS40ODggOS40ODggMCAwIDAgOS40ODktOS40ODlWMTEuMDdBOS40ODggOS40ODggMCAwIDAgMjIuOTMgMS41OEgxMS4wN1oiIGZpbGw9IiNmZmYiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE3IDI3LjY3N2MtNS44OTUgMC0xMC42NzQtNC43NzktMTAuNjc0LTEwLjY3NFMxMS4xMDUgNi4zMjkgMTcgNi4zMjlzMTAuNjc0IDQuNzc5IDEwLjY3NCAxMC42NzRTMjIuODk1IDI3LjY3NyAxNyAyNy42NzdaIiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTEzLjU2IDE1LjE0NGMwLS44NzMuNzA5LTEuNTgxIDEuNTgyLTEuNTgxaDMuNzE2Yy44NzQgMCAxLjU4Mi43MDggMS41ODIgMS41ODF2My43MTdjMCAuODczLS43MDggMS41ODEtMS41ODIgMS41ODFoLTMuNzE2YTEuNTgxIDEuNTgxIDAgMCAxLTEuNTgxLTEuNTgxdi0zLjcxN1oiIGZpbGw9IiMxNjUyRjAiLz48L3N2Zz4="},8379:()=>{},63011:()=>{},43951:()=>{},81465:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Dexie:()=>Vn,RangeSet:()=>Ln,default:()=>Vn,liveQuery:()=>Kn,mergeRanges:()=>Bn,rangesOverlap:()=>jn});const r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,i=Object.keys,a=Array.isArray;function s(e,t){return"object"!=typeof t||i(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||r.Promise||(r.Promise=Promise);const o=Object.getPrototypeOf,c={}.hasOwnProperty;function l(e,t){return c.call(e,t)}function u(e,t){"function"==typeof t&&(t=t(o(e))),("undefined"==typeof Reflect?i:Reflect.ownKeys)(t).forEach((n=>{h(e,n,t[n])}))}const d=Object.defineProperty;function h(e,t,n,r){d(e,t,s(n&&l(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:u.bind(null,e.prototype)}}}}const f=Object.getOwnPropertyDescriptor;function m(e,t){let n;return f(e,t)||(n=o(e))&&m(n,t)}const y=[].slice;function g(e,t,n){return y.call(e,t,n)}function b(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function w(e){r.setImmediate?setImmediate(e):setTimeout(e,0)}function E(e,t){return e.reduce(((e,n,r)=>{var i=t(n,r);return i&&(e[i[0]]=i[1]),e}),{})}function _(e,t){if(l(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var a=_(e,t[r]);n.push(a)}return n}var s=t.indexOf(".");if(-1!==s){var o=e[t.substr(0,s)];return void 0===o?void 0:_(o,t.substr(s+1))}}function S(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){v("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)S(e,t[r],n[r])}else{var s=t.indexOf(".");if(-1!==s){var o=t.substr(0,s),c=t.substr(s+1);if(""===c)void 0===n?a(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var u=e[o];u&&l(e,o)||(u=e[o]={}),S(u,c,n)}}else void 0===n?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function T(e){var t={};for(var n in e)l(e,n)&&(t[n]=e[n]);return t}const A=[].concat;function N(e){return A.apply([],e)}const C="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(N([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>r[e])),M=C.map((e=>r[e]));E(C,(e=>[e,!0]));let R=null;function x(e){R="undefined"!=typeof WeakMap&&new WeakMap;const t=k(e);return R=null,t}function k(e){if(!e||"object"!=typeof e)return e;let t=R&&R.get(e);if(t)return t;if(a(e)){t=[],R&&R.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(k(e[n]))}else if(M.indexOf(e.constructor)>=0)t=e;else{const n=o(e);for(var i in t=n===Object.prototype?{}:Object.create(n),R&&R.set(e,t),e)l(e,i)&&(t[i]=k(e[i]))}return t}const{toString:I}={};function O(e){return I.call(e).slice(8,-1)}const P="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",L="symbol"==typeof P?function(e){var t;return null!=e&&(t=e[P])&&t.apply(e)}:function(){return null},D={};function B(e){var t,n,r,i;if(1===arguments.length){if(a(e))return e.slice();if(this===D&&"string"==typeof e)return[e];if(i=L(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const j="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var q="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function $(e,t){q=e,U=t}var U=()=>!0;const F=!new Error("").stack;function V(){if(F)try{throw V.arguments,new Error}catch(e){return e}return new Error}function H(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(U).map((e=>"\n"+e)).join("")):""}var z=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],W=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(z),K={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function G(e,t){this._e=V(),this.name=e,this.message=t}function Q(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join("\n")}function J(e,t,n,r){this._e=V(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Q(e,t)}function Y(e,t){this._e=V(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=Q(e,t)}p(G).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+H(this._e,2))}},toString:function(){return this.name+": "+this.message}}),p(J).from(G),p(Y).from(G);var X=W.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const Z=G;var ee=W.reduce(((e,t)=>{var n=t+"Error";function r(e,r){this._e=V(),this.name=n,e?"string"==typeof e?(this.message=`${e}${r?"\n "+r:""}`,this.inner=r||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=K[t]||n,this.inner=null)}return p(r).from(Z),e[t]=r,e}),{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var te=z.reduce(((e,t)=>(e[t+"Error"]=ee[t],e)),{}),ne=W.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ee[t]),e)),{});function re(){}function ie(e){return e}function ae(e,t){return null==e||e===ie?t:function(n){return t(e(n))}}function se(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function oe(e,t){return e===re?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?se(r,this.onsuccess):r),i&&(this.onerror=this.onerror?se(i,this.onerror):i),void 0!==a?a:n}}function ce(e,t){return e===re?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?se(n,this.onsuccess):n),r&&(this.onerror=this.onerror?se(r,this.onerror):r)}}function le(e,t){return e===re?t:function(n){var r=e.apply(this,arguments);s(n,r);var i=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?se(i,this.onsuccess):i),a&&(this.onerror=this.onerror?se(a,this.onerror):a),void 0===r?void 0===o?void 0:o:s(r,o)}}function ue(e,t){return e===re?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function de(e,t){return e===re?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then((function(){return t.apply(r,a)}))}return t.apply(this,arguments)}}ne.ModifyError=J,ne.DexieError=G,ne.BulkError=Y;var he={};const[pe,fe,me]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,o(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,o(t),e]})(),ye=fe&&fe.then,ge=pe&&pe.constructor,be=!!me;var ve=!1,we=me?()=>{me.then(Ve)}:r.setImmediate?setImmediate.bind(null,Ve):r.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{Ve(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Ve,0)},Ee=function(e,t){xe.push([e,t]),Se&&(we(),Se=!1)},_e=!0,Se=!0,Te=[],Ae=[],Ne=null,Ce=ie,Me={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:pt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{pt(e[0],e[1])}catch(e){}}))}},Re=Me,xe=[],ke=0,Ie=[];function Oe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=re,this._lib=!1;var t=this._PSD=Re;if(q&&(this._stackHolder=V(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==he)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Be(this,this._value))}this._state=null,this._value=null,++t.ref,De(this,e)}const Pe={get:function(){var e=Re,t=Ze;function n(n,r){var i=!e.global&&(e!==Re||t!==Ze);const a=i&&!rt();var s=new Oe(((t,s)=>{qe(this,new Le(dt(n,e,i,a),dt(r,e,i,a),t,s,e))}));return q&&Fe(s,this),s}return n.prototype=he,n},set:function(e){h(this,"then",e&&e.prototype===he?Pe:{get:function(){return e},set:Pe.set})}};function Le(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function De(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&He();t&&"function"==typeof t.then?De(e,((e,n)=>{t instanceof Oe?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,je(e)),n&&ze()}}),Be.bind(null,e))}catch(t){Be(e,t)}}function Be(e,t){if(Ae.push(t),null===e._state){var n=e._lib&&He();t=Ce(t),e._state=!1,e._value=t,q&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,void 0)}catch(e){}}((()=>{var n=m(t,"stack");t._promise=e,h(t,"stack",{get:()=>ve?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){Te.some((t=>t._value===e._value))||Te.push(e)}(e),je(e),n&&ze()}}function je(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)qe(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===ke&&(++ke,Ee((()=>{0==--ke&&We()}),[]))}function qe(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ke,Ee($e,[n,e,t])}else e._listeners.push(t)}function $e(e,t,n){try{Ne=t;var r,i=t._value;t._state?r=e(i):(Ae.length&&(Ae=[]),r=e(i),-1===Ae.indexOf(i)&&function(e){for(var t=Te.length;t;)if(Te[--t]._value===e._value)return void Te.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Ne=null,0==--ke&&We(),--n.psd.ref||n.psd.finalize()}}function Ue(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var i,a,s=e._value;null!=s?(i=s.name||"Error",a=s.message||s,r=H(s,0)):(i=s,a=""),t.push(i+(a?": "+a:"")+r)}return q&&((r=H(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&Ue(e._prev,t,n)),t}function Fe(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Ve(){He()&&ze()}function He(){var e=_e;return _e=!1,Se=!1,e}function ze(){var e,t,n;do{for(;xe.length>0;)for(e=xe,xe=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(xe.length>0);_e=!0,Se=!0}function We(){var e=Te;Te=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Ie.slice(0),n=t.length;n;)t[--n]()}function Ke(e){return new Oe(he,!1,e)}function Ge(e,t){var n=Re;return function(){var r=He(),i=Re;try{return ot(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{ot(i,!1),r&&ze()}}}u(Oe.prototype,{then:Pe,_then:function(e,t){qe(this,new Le(null,null,e,t,Re))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?n(e):Ke(e))):this.then(null,(e=>e&&e.name===t?n(e):Ke(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),Ke(t))))},stack:{get:function(){if(this._stack)return this._stack;try{ve=!0;var e=Ue(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{ve=!1}}},timeout:function(e,t){return e<1/0?new Oe(((n,r)=>{var i=setTimeout((()=>r(new ee.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,i))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(Oe.prototype,Symbol.toStringTag,"Dexie.Promise"),Me.env=ct(),u(Oe,{all:function(){var e=B.apply(null,arguments).map(it);return new Oe((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((i,a)=>Oe.resolve(i).then((n=>{e[a]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof Oe)return e;if(e&&"function"==typeof e.then)return new Oe(((t,n)=>{e.then(t,n)}));var t=new Oe(he,!0,e);return Fe(t,Ne),t},reject:Ke,race:function(){var e=B.apply(null,arguments).map(it);return new Oe(((t,n)=>{e.map((e=>Oe.resolve(e).then(t,n)))}))},PSD:{get:()=>Re,set:e=>Re=e},totalEchoes:{get:()=>Ze},newPSD:tt,usePSD:lt,scheduler:{get:()=>Ee,set:e=>{Ee=e}},rejectionMapper:{get:()=>Ce,set:e=>{Ce=e}},follow:(e,t)=>new Oe(((n,r)=>tt(((t,n)=>{var r=Re;r.unhandleds=[],r.onunhandled=n,r.finalize=se((function(){!function(e){Ie.push((function t(){e(),Ie.splice(Ie.indexOf(t),1)})),++ke,Ee((()=>{0==--ke&&We()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),ge&&(ge.allSettled&&h(Oe,"allSettled",(function(){const e=B.apply(null,arguments).map(it);return new Oe((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,i)=>Oe.resolve(e).then((e=>r[i]={status:"fulfilled",value:e}),(e=>r[i]={status:"rejected",reason:e})).then((()=>--n||t(r)))))}))})),ge.any&&"undefined"!=typeof AggregateError&&h(Oe,"any",(function(){const e=B.apply(null,arguments).map(it);return new Oe(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const i=new Array(r);e.forEach(((e,a)=>Oe.resolve(e).then((e=>t(e)),(e=>{i[a]=e,--r||n(new AggregateError(i))}))))}))})));const Qe={awaits:0,echoes:0,id:0};var Je=0,Ye=[],Xe=0,Ze=0,et=0;function tt(e,t,n,r){var i=Re,a=Object.create(i);a.parent=i,a.ref=0,a.global=!1,a.id=++et;var o=Me.env;a.env=be?{Promise:Oe,PromiseProp:{value:Oe,configurable:!0,writable:!0},all:Oe.all,race:Oe.race,allSettled:Oe.allSettled,any:Oe.any,resolve:Oe.resolve,reject:Oe.reject,nthen:ht(o.nthen,a),gthen:ht(o.gthen,a)}:{},t&&s(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var c=lt(a,e,n,r);return 0===a.ref&&a.finalize(),c}function nt(){return Qe.id||(Qe.id=++Je),++Qe.awaits,Qe.echoes+=100,Qe.id}function rt(){return!!Qe.awaits&&(0==--Qe.awaits&&(Qe.id=0),Qe.echoes=100*Qe.awaits,!0)}function it(e){return Qe.echoes&&e&&e.constructor===ge?(nt(),e.then((e=>(rt(),e)),(e=>(rt(),ft(e))))):e}function at(e){++Ze,Qe.echoes&&0!=--Qe.echoes||(Qe.echoes=Qe.id=0),Ye.push(Re),ot(e,!0)}function st(){var e=Ye[Ye.length-1];Ye.pop(),ot(e,!1)}function ot(e,t){var n=Re;if((t?!Qe.echoes||Xe++&&e===Re:!Xe||--Xe&&e===Re)||ut(t?at.bind(null,e):st),e!==Re&&(Re=e,n===Me&&(Me.env=ct()),be)){var i=Me.env.Promise,a=e.env;fe.then=a.nthen,i.prototype.then=a.gthen,(n.global||e.global)&&(Object.defineProperty(r,"Promise",a.PromiseProp),i.all=a.all,i.race=a.race,i.resolve=a.resolve,i.reject=a.reject,a.allSettled&&(i.allSettled=a.allSettled),a.any&&(i.any=a.any))}}function ct(){var e=r.Promise;return be?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:fe.then,gthen:e.prototype.then}:{}}function lt(e,t,n,r,i){var a=Re;try{return ot(e,!0),t(n,r,i)}finally{ot(a,!1)}}function ut(e){ye.call(pe,e)}function dt(e,t,n,r){return"function"!=typeof e?e:function(){var i=Re;n&&nt(),ot(t,!0);try{return e.apply(this,arguments)}finally{ot(i,!1),r&&ut(rt)}}}function ht(e,t){return function(n,r){return e.call(this,dt(n,t),dt(r,t))}}function pt(e,t){var n;try{n=t.onuncatched(e)}catch(e){}if(!1!==n)try{var i,a={promise:t,reason:e};if(r.document&&document.createEvent?((i=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),s(i,a)):r.CustomEvent&&s(i=new CustomEvent("unhandledrejection",{detail:a}),a),i&&r.dispatchEvent&&(dispatchEvent(i),!r.PromiseRejectionEvent&&r.onunhandledrejection))try{r.onunhandledrejection(i)}catch(e){}q&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch(e){}}-1===(""+ye).indexOf("[native code]")&&(nt=rt=re);var ft=Oe.reject;function mt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Re.letThrough||e._vip)){var i=e._createTransaction(t,n,e._dbSchema);try{i.create(),e._state.PR1398_maxLoop=3}catch(i){return i.name===X.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>mt(e,t,n,r)))):ft(i)}return i._promise(t,((e,t)=>tt((()=>(Re.trans=i,r(e,t,i)))))).then((e=>i._completion.then((()=>e))))}if(e._state.openComplete)return ft(new ee.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ft(new ee.DatabaseClosed);e.open().catch(re)}return e._state.dbReadyPromise.then((()=>mt(e,t,n,r)))}const yt=String.fromCharCode(65535),gt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bt=[],vt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),wt=vt,Et=vt,_t=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function St(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const Tt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function At(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=x(t))[e],t)}class Nt{_trans(e,t,n){const r=this._tx||Re.trans,i=this.name;function a(e,n,r){if(!r.schema[i])throw new ee.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}const s=He();try{return r&&r.db===this.db?r===Re.trans?r._promise(e,a,n):tt((()=>r._promise(e,a,n)),{trans:r,transless:Re.transless||Re}):mt(this.db,e,[this.name],a)}finally{s&&ze()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=i(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>t.indexOf(e)>=0))))[0];if(n&&this.db._maxKey!==yt)return this.where(n.name).equals(n.keyPath.map((t=>e[t])));!n&&q&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:r}=this.schema,s=this.db._deps.indexedDB;function o(e,t){try{return 0===s.cmp(e,t)}catch(e){return!1}}const[c,l]=t.reduce((([t,n],i)=>{const s=r[i],c=e[i];return[t||s,t||!s?St(n,s&&s.multi?e=>{const t=_(e,i);return a(t)&&t.some((e=>o(c,e)))}:e=>o(c,_(e,i))):n]}),[null,null]);return c?this.where(c.name).equals(e[c.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(l(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){s(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=At(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[i]}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{S(e,r,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||a(e))return this.where(":id").equals(e).modify(t);{const n=_(e,this.schema.primKey.keyPath);if(void 0===n)return ft(new ee.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?i(t).forEach((n=>{S(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let i=e;return r&&n&&(i=At(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[i],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{S(e,r,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:Tt}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:a}=this.schema.primKey;if(a&&r)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const s=e.length;let o=a&&n?e.map(At(a)):e;return this.core.mutate({trans:t,type:"add",keys:r,values:o,wantResults:i}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return i?t:n;throw new Y(`${this.name}.bulkAdd(): ${e} of ${s} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,i=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:a}=this.schema.primKey;if(a&&r)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const s=e.length;let o=a&&n?e.map(At(a)):e;return this.core.mutate({trans:t,type:"put",keys:r,values:o,wantResults:i}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return i?t:n;throw new Y(`${this.name}.bulkPut(): ${e} of ${s} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new Y(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function Ct(e){var t={},n=function(n,r){if(r){for(var i=arguments.length,a=new Array(i-1);--i;)a[i-1]=arguments[i];return t[n].subscribe.apply(null,a),e}if("string"==typeof n)return t[n]};n.addEventType=o;for(var r=1,s=arguments.length;r<s;++r)o(arguments[r]);return n;function o(e,r,i){if("object"==typeof e)return c(e);r||(r=ue),i||(i=re);var a={subscribers:[],fire:i,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=r(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e})),a.fire=a.subscribers.reduce(r,i)}};return t[e]=n[e]=a,a}function c(e){i(e).forEach((function(t){var n=e[t];if(a(n))o(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new ee.InvalidArgument("Invalid event config");var r=o(t,ie,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){w((function(){e.apply(null,t)}))}))}))}}))}}function Mt(e,t){return p(t).from({prototype:e}),t}function Rt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function xt(e,t){e.filter=St(e.filter,t)}function kt(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>St(r(),t()):t,e.justLimit=n&&!r}function It(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new ee.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Ot(e,t,n){const r=It(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Pt(e,t,n,r){const i=e.replayFilter?St(e.filter,e.replayFilter()):e.filter;if(e.or){const a={},s=(e,n,r)=>{if(!i||i(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var s=n.primaryKey,o=""+s;"[object ArrayBuffer]"===o&&(o=""+new Uint8Array(s)),l(a,o)||(a[o]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(s,n),Lt(Ot(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return Lt(Ot(e,r,n),St(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Lt(e,t,n,r){var i=Ge(r?(e,t,i)=>n(r(e),t,i):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=re}),(t=>{e.fail(t),n=re}))||i(e.value,e,(e=>n=e)),n()}))}))}function Dt(e,t){try{const n=Bt(e),r=Bt(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let n=0;n<i;++n)if(e[n]!==t[n])return e[n]<t[n]?-1:1;return n===r?0:n<r?-1:1}(jt(e),jt(t));case"Array":return function(e,t){const n=e.length,r=t.length,i=n<r?n:r;for(let n=0;n<i;++n){const r=Dt(e[n],t[n]);if(0!==r)return r}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Bt(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=O(e);return"ArrayBuffer"===n?"binary":n}function jt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class qt{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,ft.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,ft.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=St(t.algorithm,e)}_iterate(e,t){return Pt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>Pt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Rt(t,!0))return n.count({trans:e,query:{index:It(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return Pt(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(".").reverse(),r=n[0],i=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function o(e,t){var n=a(e,i),r=a(t,i);return n<r?-s:n>r?s:0}return this.toArray((function(e){return e.sort(o)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&Rt(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=It(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return Pt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Rt(t)?kt(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):kt(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),kt(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return xt(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return xt(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=St(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Rt(t,!0)&&t.limit>0)return this._read((e=>{var n=It(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return xt(this._ctx,(function(e){var t=e.primaryKey.toString(),r=l(n,t);return n[t]=!0,!r})),this}modify(e){var t=this._ctx;return this._write((n=>{var r;if("function"==typeof e)r=e;else{var a=i(e),s=a.length;r=function(t){for(var n=!1,r=0;r<s;++r){var i=a[r],o=e[i];_(t,i)!==o&&(S(t,i,o),n=!0)}return n}}const o=t.table.core,{outbound:c,extractKey:l}=o.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let h=0;const p=[],f=(e,t)=>{const{failures:n,numFailures:r}=t;h+=e-r;for(let e of i(n))d.push(n[e])};return this.clone().primaryKeys().then((i=>{const a=s=>{const d=Math.min(u,i.length-s);return o.getMany({trans:n,keys:i.slice(s,s+d),cache:"immutable"}).then((h=>{const p=[],m=[],y=c?[]:null,g=[];for(let e=0;e<d;++e){const t=h[e],n={value:x(t),primKey:i[s+e]};!1!==r.call(n,n.value,n)&&(null==n.value?g.push(i[s+e]):c||0===Dt(l(t),l(n.value))?(m.push(n.value),c&&y.push(i[s+e])):(g.push(i[s+e]),p.push(n.value)))}const b=Rt(t)&&t.limit===1/0&&("function"!=typeof e||e===$t)&&{index:t.index,range:t.range};return Promise.resolve(p.length>0&&o.mutate({trans:n,type:"add",values:p}).then((e=>{for(let t in e.failures)g.splice(parseInt(t),1);f(p.length,e)}))).then((()=>(m.length>0||b&&"object"==typeof e)&&o.mutate({trans:n,type:"put",keys:y,values:m,criteria:b,changeSpec:"function"!=typeof e&&e}).then((e=>f(m.length,e))))).then((()=>(g.length>0||b&&e===$t)&&o.mutate({trans:n,type:"delete",keys:g,criteria:b}).then((e=>f(g.length,e))))).then((()=>i.length>s+d&&a(s+u)))}))};return a(0).then((()=>{if(d.length>0)throw new J("Error modifying one or more objects",d,h,p);return i.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Rt(e)&&(e.isPrimKey&&!Et||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((t=>e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((({failures:e,lastResult:n,results:r,numFailures:i})=>{if(i)throw new J("Could not delete some values",Object.keys(e).map((t=>e[t])),t-i);return t-i}))))})):this.modify($t)}}const $t=(e,t)=>t.value=null;function Ut(e,t){return e<t?-1:e===t?0:1}function Ft(e,t){return e>t?-1:e===t?0:1}function Vt(e,t,n){var r=e instanceof Qt?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Ht(e){return new e.Collection(e,(()=>Gt(""))).limit(0)}function zt(e,t,n,r,i,a){for(var s=Math.min(e.length,r.length),o=-1,c=0;c<s;++c){var l=t[c];if(l!==r[c])return i(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):i(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):o>=0?e.substr(0,o)+t[o]+n.substr(o+1):null;i(e[c],l)<0&&(o=c)}return s<r.length&&"next"===a?e+n.substr(e.length):s<e.length&&"prev"===a?e.substr(0,n.length):o<0?null:e.substr(0,o)+r[o]+n.substr(o+1)}function Wt(e,t,n,r){var i,a,s,o,c,l,u,d=n.length;if(!n.every((e=>"string"==typeof e)))return Vt(e,"String expected.");function h(e){i=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),a=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),s="next"===e?Ut:Ft;var t=n.map((function(e){return{lower:a(e),upper:i(e)}})).sort((function(e,t){return s(e.lower,t.lower)}));o=t.map((function(e){return e.upper})),c=t.map((function(e){return e.lower})),l=e,u="next"===e?"":r}h("next");var p=new e.Collection(e,(()=>Kt(o[0],c[d-1]+r)));p._ondirectionchange=function(e){h(e)};var f=0;return p._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var h=a(i);if(t(h,c,f))return!0;for(var p=null,m=f;m<d;++m){var y=zt(i,h,o[m],c[m],s,l);null===y&&null===p?f=m+1:(null===p||s(p,y)>0)&&(p=y)}return n(null!==p?function(){e.continue(p+u)}:r),!1})),p}function Kt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Gt(e){return{type:1,lower:e,upper:e}}class Qt{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Ht(this):new this.Collection(this,(()=>Kt(e,t,!n,!r)))}catch(e){return Vt(this,gt)}}equals(e){return null==e?Vt(this,gt):new this.Collection(this,(()=>Gt(e)))}above(e){return null==e?Vt(this,gt):new this.Collection(this,(()=>Kt(e,void 0,!0)))}aboveOrEqual(e){return null==e?Vt(this,gt):new this.Collection(this,(()=>Kt(e,void 0,!1)))}below(e){return null==e?Vt(this,gt):new this.Collection(this,(()=>Kt(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?Vt(this,gt):new this.Collection(this,(()=>Kt(void 0,e)))}startsWith(e){return"string"!=typeof e?Vt(this,"String expected."):this.between(e,e+yt,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):Wt(this,((e,t)=>0===e.indexOf(t[0])),[e],yt)}equalsIgnoreCase(e){return Wt(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=B.apply(D,arguments);return 0===e.length?Ht(this):Wt(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=B.apply(D,arguments);return 0===e.length?Ht(this):Wt(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,yt)}anyOf(){const e=B.apply(D,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return Vt(this,gt)}if(0===e.length)return Ht(this);const n=new this.Collection(this,(()=>Kt(e[0],e[e.length-1])));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,i,a)=>{const s=n.key;for(;t(s,e[r])>0;)if(++r,r===e.length)return i(a),!1;return 0===t(s,e[r])||(i((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=B.apply(D,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Vt(this,gt)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,i=this._descending,a=this._min,s=this._max;if(0===e.length)return Ht(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return Vt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);const o=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers;let l,u=r;function d(e,t){return u(e[0],t[0])}try{l=e.reduce((function(e,t){let r=0,i=e.length;for(;r<i;++r){const i=e[r];if(n(t[0],i[1])<0&&n(t[1],i[0])>0){i[0]=a(i[0],t[0]),i[1]=s(i[1],t[1]);break}}return r===i&&e.push(t),e}),[]),l.sort(d)}catch(e){return Vt(this,gt)}let h=0;const p=c?e=>r(e,l[h][1])>0:e=>r(e,l[h][1])>=0,f=o?e=>i(e,l[h][0])>0:e=>i(e,l[h][0])>=0;let m=p;const y=new this.Collection(this,(()=>Kt(l[0][0],l[l.length-1][1],!o,!c)));return y._ondirectionchange=e=>{"next"===e?(m=p,u=r):(m=f,u=i),l.sort(d)},y._addAlgorithm(((e,t,n)=>{for(var i=e.key;m(i);)if(++h,h===l.length)return t(n),!1;return!!function(e){return!p(e)&&!f(e)}(i)||(0===this._cmp(i,l[h][1])||0===this._cmp(i,l[h][0])||t((()=>{u===r?e.continue(l[h][0]):e.continue(l[h][1])})),!1)})),y}startsWithAnyOf(){const e=B.apply(D,arguments);return e.every((e=>"string"==typeof e))?0===e.length?Ht(this):this.inAnyRange(e.map((e=>[e,e+yt]))):Vt(this,"startsWithAnyOf() only works with strings")}}function Jt(e){return Ge((function(t){return Yt(t),e(t.target.error),!1}))}function Yt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Xt=Ct(null,"storagemutated");class Zt{_lock(){return v(!Re.global),++this._reculock,1!==this._reculock||Re.global||(Re.lockOwnerFor=this),this}_unlock(){if(v(!Re.global),0==--this._reculock)for(Re.global||(Re.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{lt(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Re.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(n);case"MissingAPIError":throw new ee.MissingAPI(n.message,n);default:throw new ee.OpenFailed(n)}if(!this.active)throw new ee.TransactionInactive;return v(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ge((t=>{Yt(t),this._reject(e.error)})),e.onabort=Ge((t=>{Yt(t),this.active&&this._reject(new ee.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=Ge((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Xt.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return ft(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return ft(new ee.TransactionInactive);if(this._locked())return new Oe(((r,i)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,i)},Re])}));if(n)return tt((()=>{var e=new Oe(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new Oe(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=Oe.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var i=t._waitingFor;return new Oe(((e,r)=>{n.then((n=>t._waitingQueue.push(Ge(e.bind(null,n)))),(e=>t._waitingQueue.push(Ge(r.bind(null,e))))).finally((()=>{t._waitingFor===i&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(l(t,e))return t[e];const n=this.schema[e];if(!n)throw new ee.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function en(e,t,n,r,i,a,s){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!s?"&":"")+(r?"*":"")+(i?"++":"")+tn(t)}}function tn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function nn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:E(n,(e=>[e.name,e]))}}let rn=e=>{try{return e.only([[]]),rn=()=>[[]],[[]]}catch(e){return rn=()=>yt,yt}};function an(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>_(t,e)}(e):t=>_(t,e)}function sn(e){return[].slice.call(e)}let on=0;function cn(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function ln(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:r,lowerOpen:i,upperOpen:a}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!a):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!a)}const{schema:i,hasGetAll:s}=function(e,t){const n=sn(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:n}=e,r=a(t),i=null==t,s={},o={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:i,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:an(t)},indexes:sn(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:n,multiEntry:r,keyPath:i}=e,o={name:t,compound:a(i),keyPath:i,unique:n,multiEntry:r,extractKey:an(i)};return s[cn(i)]=o,o})),getIndexByKeyPath:e=>s[cn(e)]};return s[":id"]=o.primaryKey,null!=t&&(s[cn(t)]=o.primaryKey),o}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),o=i.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:i,values:a,range:s}){return new Promise(((o,c)=>{o=Ge(o);const l=e.objectStore(t),u=null==l.keyPath,d="put"===n||"add"===n;if(!d&&"delete"!==n&&"deleteRange"!==n)throw new Error("Invalid operation type: "+n);const{length:h}=i||a||{length:1};if(i&&a&&i.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return o({numFailures:0,failures:{},results:[],lastResult:void 0});let p;const f=[],m=[];let y=0;const g=e=>{++y,Yt(e)};if("deleteRange"===n){if(4===s.type)return o({numFailures:y,failures:m,results:[],lastResult:void 0});3===s.type?f.push(p=l.clear()):f.push(p=l.delete(r(s)))}else{const[e,t]=d?u?[a,i]:[a,null]:[i,null];if(d)for(let r=0;r<h;++r)f.push(p=t&&void 0!==t[r]?l[n](e[r],t[r]):l[n](e[r])),p.onerror=g;else for(let t=0;t<h;++t)f.push(p=l[n](e[t])),p.onerror=g}const b=e=>{const t=e.target.result;f.forEach(((e,t)=>null!=e.error&&(m[t]=e.error))),o({numFailures:y,failures:m,results:"delete"===n?i:f.map((e=>e.result)),lastResult:t})};p.onerror=e=>{g(e),b(e)},p.onsuccess=b}))},getMany:({trans:e,keys:n})=>new Promise(((r,i)=>{r=Ge(r);const a=e.objectStore(t),s=n.length,o=new Array(s);let c,l=0,u=0;const d=e=>{const t=e.target;o[t._pos]=t.result,++u===l&&r(o)},h=Jt(i);for(let e=0;e<s;++e)null!=n[e]&&(c=a.get(n[e]),c._pos=e,c.onsuccess=d,c.onerror=h,++l);0===l&&r(o)})),get:({trans:e,key:n})=>new Promise(((r,i)=>{r=Ge(r);const a=e.objectStore(t).get(n);a.onsuccess=e=>r(e.target.result),a.onerror=Jt(i)})),query:function(e){return n=>new Promise(((i,a)=>{i=Ge(i);const{trans:s,values:o,limit:c,query:l}=n,u=c===1/0?void 0:c,{index:d,range:h}=l,p=s.objectStore(t),f=d.isPrimaryKey?p:p.index(d.name),m=r(h);if(0===c)return i({result:[]});if(e){const e=o?f.getAll(m,u):f.getAllKeys(m,u);e.onsuccess=e=>i({result:e.target.result}),e.onerror=Jt(a)}else{let e=0;const t=o||!("openKeyCursor"in f)?f.openCursor(m):f.openKeyCursor(m),n=[];t.onsuccess=r=>{const a=t.result;return a?(n.push(o?a.value:a.primaryKey),++e===c?i({result:n}):void a.continue()):i({result:n})},t.onerror=Jt(a)}}))}(s),openCursor:function({trans:e,values:n,query:i,reverse:a,unique:s}){return new Promise(((o,c)=>{o=Ge(o);const{index:l,range:u}=i,d=e.objectStore(t),h=l.isPrimaryKey?d:d.index(l.name),p=a?s?"prevunique":"prev":s?"nextunique":"next",f=n||!("openKeyCursor"in h)?h.openCursor(r(u),p):h.openKeyCursor(r(u),p);f.onerror=Jt(c),f.onsuccess=Ge((t=>{const n=f.result;if(!n)return void o(null);n.___id=++on,n.done=!1;const r=n.continue.bind(n);let i=n.continuePrimaryKey;i&&(i=i.bind(n));const a=n.advance.bind(n),s=()=>{throw new Error("Cursor not stopped")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error("Cursor not started")},n.fail=Ge(c),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=Ge(e),f.onerror=Jt(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=s,e(t)}})),o=()=>{if(f.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error("Cursor behind last entry")},n.stop()};return f.onsuccess=Ge((e=>{f.onsuccess=o,o()})),n.continue=r,n.continuePrimaryKey=i,n.advance=a,o(),t},o(n)}),c)}))},count({query:e,trans:n}){const{index:i,range:a}=e;return new Promise(((e,s)=>{const o=n.objectStore(t),c=i.isPrimaryKey?o:o.index(i.name),l=r(a),u=l?c.count(l):c.count();u.onsuccess=Ge((t=>e(t.target.result))),u.onerror=Jt(s)}))}}}(e))),c={};return o.forEach((e=>c[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!c[e])throw new Error(`Table '${e}' not found`);return c[e]},MIN_KEY:-1/0,MAX_KEY:rn(t),schema:i}}function un({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},i){const a=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(ln(t,n,i),e.dbcore);return{dbcore:a}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function dn({_novip:e},t,n,r){n.forEach((n=>{const i=r[n];t.forEach((t=>{const r=m(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?h(t,n,{get(){return this.table(n)},set(e){d(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function hn({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function pn(e,t){return e._cfg.version-t._cfg.version}function fn(e,t,n,r){const a=e._dbSchema,s=e._createTransaction("readwrite",e._storeNames,a);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),c=Re.transless||Re;tt((()=>{Re.trans=s,Re.transless=c,0===t?(i(a).forEach((e=>{yn(n,e,a[e].primKey,a[e].indexes)})),un(e,n),Oe.follow((()=>e.on.populate.fire(s))).catch(o)):function({_novip:e},t,n,r){const a=[],s=e._versions;let o=e._dbSchema=bn(e,e.idbdb,r),c=!1;return s.filter((e=>e._cfg.version>=t)).forEach((s=>{a.push((()=>{const a=o,l=s._cfg.dbschema;vn(e,a,r),vn(e,l,r),o=e._dbSchema=l;const u=mn(a,l);u.add.forEach((e=>{yn(r,e[0],e[1].primKey,e[1].indexes)})),u.change.forEach((e=>{if(e.recreate)throw new ee.Upgrade("Not yet support for changing primary key");{const t=r.objectStore(e.name);e.add.forEach((e=>gn(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),gn(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const d=s._cfg.contentUpgrade;if(d&&s._cfg.version>t){un(e,r),n._memoizedTables={},c=!0;let t=T(l);u.del.forEach((e=>{t[e]=a[e]})),hn(e,[e.Transaction.prototype]),dn(e,[e.Transaction.prototype],i(t),t),n.schema=t;const s=j(d);let o;s&&nt();const h=Oe.follow((()=>{if(o=d(n),o&&s){var e=rt.bind(null,null);o.then(e,e)}}));return o&&"function"==typeof o.then?Oe.resolve(o):h.then((()=>o))}})),a.push((t=>{c&&wt||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(s._cfg.dbschema,t),hn(e,[e.Transaction.prototype]),dn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),function e(){return a.length?Oe.resolve(a.shift()(n.idbtrans)).then(e):Oe.resolve()}().then((()=>{var e,t;t=r,i(e=o).forEach((n=>{t.db.objectStoreNames.contains(n)||yn(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,s,n).catch(o)}))}function mn(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const i=e[r],a=t[r];if(i){const e={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto&&!vt)e.recreate=!0,n.change.push(e);else{const t=i.idxByName,r=a.idxByName;let s;for(s in t)r[s]||e.del.push(s);for(s in r){const n=t[s],i=r[s];n?n.src!==i.src&&e.change.push(i):e.add.push(i)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,a])}return n}function yn(e,t,n,r){const i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>gn(i,e))),i}function gn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function bn(e,t,n){const r={};return g(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let i=t.keyPath;const a=en(tn(i),i||"",!1,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),s=[];for(let e=0;e<t.indexNames.length;++e){const n=t.index(t.indexNames[e]);i=n.keyPath;var o=en(n.name,i,!!n.unique,!!n.multiEntry,!1,i&&"string"!=typeof i,!1);s.push(o)}r[e]=nn(e,a,s)})),r}function vn({_novip:e},t,n){const i=n.db.objectStoreNames;for(let r=0;r<i.length;++r){const a=i[r],s=n.objectStore(a);e._hasGetAll="getAll"in s;for(let e=0;e<s.indexNames.length;++e){const n=s.indexNames[e],r=s.index(n).keyPath,i="string"==typeof r?r:"["+g(r).join("+")+"]";if(t[a]){const e=t[a].idxByName[i];e&&(e.name=n,delete t[a].idxByName[i],t[a].idxByName[n]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class wn{_parseStoresSpec(e,t){i(e).forEach((n=>{if(null!==e[n]){var r=e[n].split(",").map(((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return en(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(r),0===t)})),i=r.shift();if(i.multi)throw new ee.Schema("Primary key cannot be multi-valued");r.forEach((e=>{if(e.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")})),t[n]=nn(n,i,r)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e;const n=t._versions,r={};let a={};return n.forEach((e=>{s(r,e._cfg.storesSource),a=e._cfg.dbschema={},e._parseStoresSpec(r,a)})),t._dbSchema=a,hn(t,[t._allTables,t,t.Transaction.prototype]),dn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(a),a),t._storeNames=i(a),this}upgrade(e){return this._cfg.contentUpgrade=de(this._cfg.contentUpgrade||re,e),this}}function En(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Vn("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function _n(e){return e&&"function"==typeof e.databases}function Sn(e){return tt((function(){return Re.letThrough=!0,e()}))}function Tn(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function An(e){var t=t=>e.next(t),n=i(t),r=i((t=>e.throw(t)));function i(e){return t=>{var i=e(t),s=i.value;return i.done?s:s&&"function"==typeof s.then?s.then(n,r):a(s)?Promise.all(s).then(n,r):n(s)}}return i(t)()}function Nn(e,t,n){var r=arguments.length;if(r<2)throw new ee.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,N(i),n]}function Cn(e,t,n,r,i){return Oe.resolve().then((()=>{const a=Re.transless||Re,s=e._createTransaction(t,n,e._dbSchema,r),o={trans:s,transless:a};if(r)s.idbtrans=r.idbtrans;else try{s.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===X.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>Cn(e,t,n,null,i)))):ft(r)}const c=j(i);let l;c&&nt();const u=Oe.follow((()=>{if(l=i.call(s,s),l)if(c){var e=rt.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=An(l))}),o);return(l&&"function"==typeof l.then?Oe.resolve(l).then((e=>s.active?e:ft(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):u.then((()=>l))).then((e=>(r&&s._resolve(),s._completion.then((()=>e))))).catch((e=>(s._reject(e),ft(e))))}))}function Mn(e,t,n){const r=a(e)?e.slice():[e];for(let e=0;e<n;++e)r.push(t);return r}const Rn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,i={},a=[];function s(e,t,n){const r=cn(e),o=i[r]=i[r]||[],c=null==e?0:"string"==typeof e?1:e.length,l=t>0,u={...n,isVirtual:l,keyTail:t,keyLength:c,extractKey:an(e),unique:!l&&n.unique};return o.push(u),u.isPrimaryKey||a.push(u),c>1&&s(2===c?e[0]:e.slice(0,c-1),t+1,n),o.sort(((e,t)=>e.keyTail-t.keyTail)),u}const o=s(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[o];for(const e of r.indexes)s(e.keyPath,0,e);function c(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,i=n.keyTail,{type:1===r.type?2:r.type,lower:Mn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Mn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}:t;var r,i}const l={...n,schema:{...r,primaryKey:o,indexes:a,getIndexByKeyPath:function(e){const t=i[cn(e)];return t&&t[0]}},count:e=>n.count(c(e)),query:e=>n.query(c(e)),openCursor(t){const{keyTail:r,isVirtual:i,keyLength:a}=t.query.index;return i?n.openCursor(c(t)).then((n=>n&&function(n){const i=Object.create(n,{continue:{value:function(i){null!=i?n.continue(Mn(i,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,i){n.continuePrimaryKey(Mn(t,e.MAX_KEY,r),i)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:()=>n.value}});return i}(n))):n.openCursor(t)}};return l}}}};function xn(e,t,n,r){return n=n||{},r=r||"",i(e).forEach((i=>{if(l(t,i)){var a=e[i],s=t[i];if("object"==typeof a&&"object"==typeof s&&a&&s){const e=O(a);e!==O(s)?n[r+i]=t[i]:"Object"===e?xn(a,s,n,r+i+"."):a!==s&&(n[r+i]=t[i])}else a!==s&&(n[r+i]=t[i])}else n[r+i]=void 0})),i(t).forEach((i=>{l(e,i)||(n[r+i]=t[i])})),n}const kn={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,i={...n,mutate(e){const i=Re.trans,{deleting:a,creating:s,updating:o}=i.table(t).hook;switch(e.type){case"add":if(s.fire===re)break;return i._promise("readwrite",(()=>c(e)),!0);case"put":if(s.fire===re&&o.fire===re)break;return i._promise("readwrite",(()=>c(e)),!0);case"delete":if(a.fire===re)break;return i._promise("readwrite",(()=>c(e)),!0);case"deleteRange":if(a.fire===re)break;return i._promise("readwrite",(()=>function(e){return u(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function c(e){const t=Re.trans,i=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!i)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:i}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,i).then((c=>{const u=i.map(((n,i)=>{const u=c[i],d={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(d,n,u,t);else if("add"===e.type||void 0===u){const a=s.fire.call(d,n,e.values[i],t);null==n&&null!=a&&(n=a,e.keys[i]=n,r.outbound||S(e.values[i],r.keyPath,n))}else{const r=xn(u,e.values[i]),a=o.fire.call(d,r,n,u,t);if(a){const t=e.values[i];Object.keys(a).forEach((e=>{l(t,e)?t[e]=a[e]:S(t,e,a[e])}))}}return d}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:a})=>{for(let r=0;r<i.length;++r){const a=n?n[r]:i[r],s=u[r];null==a?s.onerror&&s.onerror(t[r]):s.onsuccess&&s.onsuccess("put"===e.type&&c[r]?e.values[r]:a)}return{failures:t,results:n,numFailures:r,lastResult:a}})).catch((e=>(u.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function u(e,t,i){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:i}).then((({result:n})=>c({type:"delete",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<i?{failures:[],numFailures:0,lastResult:void 0}:u(e,{...t,lower:n[n.length-1],lowerOpen:!0},i)))))}}};return i}})};function In(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let i=0,a=0;i<t.keys.length&&a<e.length;++i)0===Dt(t.keys[i],e[a])&&(r.push(n?x(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch(e){return null}}const On={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=In(e.keys,e.trans._cache,"clone"===e.cache);return t?Oe.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?x(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function Pn(e){return!("from"in e)}const Ln=function(e,t){if(!this){const t=new Ln;return e&&"d"in e&&s(t,e),t}s(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Dn(e,t,n){const r=Dt(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Pn(e))return s(e,{from:t,to:n,d:1});const i=e.l,a=e.r;if(Dt(n,e.from)<0)return i?Dn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},$n(e);if(Dt(t,e.to)>0)return a?Dn(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},$n(e);Dt(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),Dt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;i&&!e.l&&Bn(e,i),a&&o&&Bn(e,a)}function Bn(e,t){Pn(t)||function e(t,{from:n,to:r,l:i,r:a}){Dn(t,n,r),i&&e(t,i),a&&e(t,a)}(e,t)}function jn(e,t){const n=qn(t);let r=n.next();if(r.done)return!1;let i=r.value;const a=qn(e);let s=a.next(i.from),o=s.value;for(;!r.done&&!s.done;){if(Dt(o.from,i.to)<=0&&Dt(o.to,i.from)>=0)return!0;Dt(i.from,o.from)<0?i=(r=n.next(o.from)).value:o=(s=a.next(i.from)).value}return!1}function qn(e){let t=Pn(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Dt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Dt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function $n(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const t="r"===i?"l":"r",n={...e},r=e[i];e.from=r.from,e.to=r.to,e[i]=r[i],n[i]=r[t],e[t]=n,n.d=Un(n)}e.d=Un(e)}function Un({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}u(Ln.prototype,{add(e){return Bn(this,e),this},addKey(e){return Dn(this,e,e),this},addKeys(e){return e.forEach((e=>Dn(this,e,e))),this},[P](){return qn(this)}});const Fn={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Ln(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const s=e.table(r),{schema:o}=s,{primaryKey:c}=o,{extractKey:l,outbound:u}=c,d={...s,mutate:e=>{const i=e.trans,c=i.mutatedParts||(i.mutatedParts={}),l=e=>{const n=`idb://${t}/${r}/${e}`;return c[n]||(c[n]=new Ln)},u=l(""),d=l(":dels"),{type:h}=e;let[p,f]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const m=e.trans._cache;return s.mutate(e).then((e=>{if(a(p)){"delete"!==h&&(p=e.results),u.addKeys(p);const t=In(p,m);t||"add"===h||d.addKeys(p),(t||f)&&function(e,t,n,r){t.indexes.forEach((function(t){const i=e(t.name||"");function s(e){return null!=e?t.extractKey(e):null}const o=e=>t.multiEntry&&a(e)?e.forEach((e=>i.addKey(e))):i.addKey(e);(n||r).forEach(((e,t)=>{const i=n&&s(n[t]),a=r&&s(r[t]);0!==Dt(i,a)&&(null!=i&&o(i),null!=a&&o(a))}))}))}(l,o,t,f)}else if(p){const e={from:p.lower,to:p.upper};d.add(e),u.add(e)}else u.add(n),d.add(n),o.indexes.forEach((e=>l(e.name).add(n)));return e}))}},h=({query:{index:t,range:n}})=>{var r,i;return[t,new Ln(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(i=n.upper)&&void 0!==i?i:e.MAX_KEY)]},p={get:e=>[c,new Ln(e.key)],getMany:e=>[c,(new Ln).addKeys(e.keys)],count:h,query:h,openCursor:h};return i(p).forEach((e=>{d[e]=function(i){const{subscr:a}=Re;if(a){const o=e=>{const n=`idb://${t}/${r}/${e}`;return a[n]||(a[n]=new Ln)},c=o(""),d=o(":dels"),[h,f]=p[e](i);if(o(h.name||"").add(f),!h.isPrimaryKey){if("count"!==e){const t="query"===e&&u&&i.values&&s.query({...i,values:!1});return s[e].apply(this,arguments).then((n=>{if("query"===e){if(u&&i.values)return t.then((({result:e})=>(c.addKeys(e),n)));const e=i.values?n.result.map(l):n.result;i.values?c.addKeys(e):d.addKeys(e)}else if("openCursor"===e){const e=n,t=i.values;return e&&Object.create(e,{key:{get:()=>(d.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return d.addKey(t),t}},value:{get:()=>(t&&c.addKey(e.primaryKey),e.value)}})}return n}))}d.add(n)}}return s[e].apply(this,arguments)}})),d}}}};class Vn{constructor(e,t){this._middlewares={},this.verno=0;const n=Vn.dependencies;this._options=t={addons:Vn.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const i={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:re,dbReadyPromise:null,cancelOpen:re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;i.dbReadyPromise=new Oe((e=>{i.dbReadyResolve=e})),i.openCanceller=new Oe(((e,t)=>{i.cancelOpen=t})),this._state=i,this.name=e,this.on=Ct(this,"populate","blocked","versionchange","close",{ready:[de,re]}),this.on.ready.subscribe=b(this.on.ready.subscribe,(e=>(t,n)=>{Vn.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||Oe.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(a=this,Mt(qt.prototype,(function(e,t){this.db=a;let n=Tt,r=null;if(t)try{n=t()}catch(e){r=e}const i=e._ctx,s=i.table,o=s.hook.reading.fire;this._ctx={table:s,index:i.index,isPrimKey:!i.index||s.schema.primKey.keyPath&&i.index===s.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o!==ie?o:null}}))),this.Table=function(e){return Mt(Nt.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:Ct(null,{creating:[oe,re],reading:[ae,ie],updating:[le,re],deleting:[ce,re]})}))}(this),this.Transaction=function(e){return Mt(Zt.prototype,(function(t,n,r,i,a){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Ct(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Oe(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),ft(e)}))}))}(this),this.Version=function(e){return Mt(wn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return Mt(Qt.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};const i=e._deps.indexedDB;if(!i)throw new ee.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=(e,t)=>i.cmp(t,e),this._max=(e,t)=>i.cmp(e,t)>0?e:t,this._min=(e,t)=>i.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=rn(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on("blocked").fire(e),bt.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(Rn),this.use(kn),this.use(Fn),this.use(On),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(pn),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Re.letThrough||this._vip)?e():new Oe(((e,t)=>{if(this._state.openComplete)return t(new ee.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new ee.DatabaseClosed);this.open().catch(re)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const i=this._middlewares[e]||(this._middlewares[e]=[]);return i.push({stack:e,create:t,level:null==n?10:n,name:r}),i.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return function(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?ft(t.dbOpenError):e));q&&(t.openCanceller._stackHolder=V()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function a(){if(t.openCanceller!==r)throw new ee.DatabaseClosed("db.open() was cancelled")}let s=t.dbReadyResolve,o=null,c=!1;return Oe.race([r,("undefined"==typeof navigator?Oe.resolve():Tn()).then((()=>new Oe(((r,s)=>{if(a(),!n)throw new ee.MissingAPI;const l=e.name,u=t.autoSchema?n.open(l):n.open(l,Math.round(10*e.verno));if(!u)throw new ee.MissingAPI;u.onerror=Jt(s),u.onblocked=Ge(e._fireOnBlocked),u.onupgradeneeded=Ge((r=>{if(o=u.transaction,t.autoSchema&&!e._options.allowEmptyDB){u.onerror=Yt,o.abort(),u.result.close();const e=n.deleteDatabase(l);e.onsuccess=e.onerror=Ge((()=>{s(new ee.NoSuchDatabase(`Database ${l} doesnt exist`))}))}else{o.onerror=Jt(s);var i=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;c=i<1,e._novip.idbdb=u.result,fn(e,i/10,o,s)}}),s),u.onsuccess=Ge((()=>{o=null;const n=e._novip.idbdb=u.result,a=g(n.objectStoreNames);if(a.length>0)try{const r=n.transaction(1===(s=a).length?s[0]:s,"readonly");t.autoSchema?function({_novip:e},t,n){e.verno=t.version/10;const r=e._dbSchema=bn(0,t,n);e._storeNames=g(t.objectStoreNames,0),dn(e,[e._allTables],i(r),r)}(e,n,r):(vn(e,e._dbSchema,r),function(e,t){const n=mn(bn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,r)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),un(e,r)}catch(e){}var s;bt.push(e),n.onversionchange=Ge((n=>{t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=Ge((t=>{e.on("close").fire(t)})),c&&function({indexedDB:e,IDBKeyRange:t},n){!_n(e)&&"__dbnames"!==n&&En(e,t).put({name:n}).catch(re)}(e._deps,l),r()}),s)}))))]).then((()=>(a(),t.onReadyBeingFired=[],Oe.resolve(Sn((()=>e.on.ready.fire(e.vip)))).then((function n(){if(t.onReadyBeingFired.length>0){let r=t.onReadyBeingFired.reduce(de,re);return t.onReadyBeingFired=[],Oe.resolve(Sn((()=>r(e.vip)))).then(n)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((n=>{t.dbOpenError=n;try{o&&o.abort()}catch(e){}return r===t.openCanceller&&e._close(),ft(n)})).finally((()=>{t.openComplete=!0,s()}))}(this)}_close(){const e=this._state,t=bt.indexOf(this);if(t>=0&&bt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Oe((t=>{e.dbReadyResolve=t})),e.openCanceller=new Oe(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ee.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Oe(((n,r)=>{const i=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=Ge((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!_n(e)&&"__dbnames"!==n&&En(e,t).delete(n).catch(re)}(this._deps,this.name),n()})),e.onerror=Jt(r),e.onblocked=this._fireOnBlocked};if(e)throw new ee.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(i):i()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return i(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=Nn.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Re.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const i=-1!==e.indexOf("?");let a,s;e=e.replace("!","").replace("?","");try{if(s=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)a="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new ee.InvalidArgument("Invalid transaction mode: "+e);a="readwrite"}if(r){if("readonly"===r.mode&&"readwrite"===a){if(!i)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&s.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!i)throw new ee.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):ft(e)}const o=Cn.bind(null,this,a,s,r,n);return r?r._promise(a,o,"lock"):Re.trans?lt(Re.transless,(()=>this._whenReady(o))):this._whenReady(o)}table(e){if(!l(this._allTables,e))throw new ee.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const Hn="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class zn{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}[Hn](){return this}}function Wn(e,t){return i(t).forEach((n=>{Bn(e[n]||(e[n]=new Ln),t[n])})),e}function Kn(e){return new zn((t=>{const n=j(e);let r=!1,a={},s={};const o={get closed(){return r},unsubscribe:()=>{r=!0,Xt.storagemutated.unsubscribe(d)}};t.start&&t.start(o);let c=!1,l=!1;function u(){return i(s).some((e=>a[e]&&jn(a[e],s[e])))}const d=e=>{Wn(a,e),u()&&h()},h=()=>{if(c||r)return;a={};const i={},p=function(t){n&&nt();const r=()=>tt(e,{subscr:t,trans:null}),i=Re.trans?lt(Re.transless,r):r();return n&&i.then(rt,rt),i}(i);l||(Xt("storagemutated",d),l=!0),c=!0,Promise.resolve(p).then((e=>{c=!1,r||(u()?h():(a={},s=i,t.next&&t.next(e)))}),(e=>{c=!1,t.error&&t.error(e),o.unsubscribe()}))};return h(),o}))}let Gn;try{Gn={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(r){Gn={indexedDB:null,IDBKeyRange:null}}const Qn=Vn;function Jn(e){let t=Yn;try{Yn=!0,Xt.storagemutated.fire(e)}finally{Yn=t}}u(Qn,{...ne,delete:e=>new Qn(e,{addons:[]}).delete(),exists:e=>new Qn(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return _n(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>"__dbnames"!==e)))):En(e,t).toCollection().primaryKeys()}(Qn.dependencies).then(e)}catch(e){return ft(new ee.MissingAPI)}},defineClass:()=>function(e){s(this,e)},ignoreTransaction:e=>Re.trans?lt(Re.transless,e):e(),vip:Sn,async:function(e){return function(){try{var t=An(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Oe.resolve(t)}catch(e){return ft(e)}}},spawn:function(e,t,n){try{var r=An(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Oe.resolve(r)}catch(e){return ft(e)}},currentTransaction:{get:()=>Re.trans||null},waitFor:function(e,t){const n=Oe.resolve("function"==typeof e?Qn.ignoreTransaction(e):e).timeout(t||6e4);return Re.trans?Re.trans.waitFor(n):n},Promise:Oe,debug:{get:()=>q,set:e=>{$(e,"dexie"===e?()=>!0:_t)}},derive:p,extend:s,props:u,override:b,Events:Ct,on:Xt,liveQuery:Kn,extendObservabilitySet:Wn,getByKeyPath:_,setByKeyPath:S,delByKeyPath:function(e,t){"string"==typeof t?S(e,t,void 0):"length"in t&&[].map.call(t,(function(t){S(e,t,void 0)}))},shallowClone:T,deepClone:x,getObjectDiff:xn,cmp:Dt,asap:w,minKey:-1/0,addons:[],connections:bt,errnames:X,dependencies:Gn,semVer:"3.2.2",version:"3.2.2".split(".").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),Qn.maxKey=rn(Qn.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Xt("storagemutated",(e=>{if(!Yn){let t;vt?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,e)):t=new CustomEvent("x-storagemutated-1",{detail:e}),Yn=!0,dispatchEvent(t),Yn=!1}})),addEventListener("x-storagemutated-1",(({detail:e})=>{Yn||Jn(e)})));let Yn=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel("x-storagemutated-1");Xt("storagemutated",(t=>{Yn||e.postMessage(t)})),e.onmessage=e=>{e.data&&Jn(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){Xt("storagemutated",(e=>{try{Yn||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:"x-storagemutated-1",changedParts:e}))))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(e=>{if("x-storagemutated-1"===e.key){const t=JSON.parse(e.newValue);t&&Jn(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function({data:e}){e&&"x-storagemutated-1"===e.type&&Jn(e.changedParts)}))}Oe.rejectionMapper=function(e,t){if(!e||e instanceof G||e instanceof TypeError||e instanceof SyntaxError||!e.name||!te[e.name])return e;var n=new te[e.name](t||e.message,e);return"stack"in e&&h(n,"stack",{get:function(){return this.inner.stack}}),n},$(q,_t)},83299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Struct:()=>u,StructError:()=>r,any:()=>A,array:()=>N,assert:()=>d,assign:()=>y,bigint:()=>C,boolean:()=>M,coerce:()=>J,create:()=>h,date:()=>R,defaulted:()=>Y,define:()=>g,deprecated:()=>b,dynamic:()=>v,empty:()=>Z,enums:()=>x,func:()=>k,instance:()=>I,integer:()=>O,intersection:()=>P,is:()=>f,lazy:()=>w,literal:()=>L,map:()=>D,mask:()=>p,max:()=>te,min:()=>ne,never:()=>B,nonempty:()=>re,nullable:()=>j,number:()=>q,object:()=>$,omit:()=>E,optional:()=>U,partial:()=>_,pattern:()=>ie,pick:()=>S,record:()=>F,refine:()=>se,regexp:()=>V,set:()=>H,size:()=>ae,string:()=>z,struct:()=>T,trimmed:()=>X,tuple:()=>W,type:()=>K,union:()=>G,unknown:()=>Q,validate:()=>m});class r extends TypeError{constructor(e,t){let n;const{message:r,explanation:i,...a}=e,{path:s}=e,o=0===s.length?r:`At path: ${s.join(".")} -- ${r}`;super(i??o),null!=i&&(this.cause=o),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}function i(e){return"object"==typeof e&&null!=e}function a(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function s(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function o(e,t,n,r){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:a}=t,{type:o}=n,{refinement:c,message:l=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${s(r)}\``}=e;return{value:r,type:o,refinement:c,key:i[i.length-1],path:i,branch:a,...e,message:l}}function*c(e,t,n,r){var a;i(a=e)&&"function"==typeof a[Symbol.iterator]||(e=[e]);for(const i of e){const e=o(i,t,n,r);e&&(yield e)}}function*l(e,t,n={}){const{path:r=[],branch:a=[e],coerce:s=!1,mask:o=!1}=n,c={path:r,branch:a};if(s&&(e=t.coercer(e,c),o&&"type"!==t.type&&i(t.schema)&&i(e)&&!Array.isArray(e)))for(const n in e)void 0===t.schema[n]&&delete e[n];let u="valid";for(const r of t.validator(e,c))r.explanation=n.message,u="not_valid",yield[r,void 0];for(let[d,h,p]of t.entries(e,c)){const t=l(h,p,{path:void 0===d?r:[...r,d],branch:void 0===d?a:[...a,h],coerce:s,mask:o,message:n.message});for(const n of t)n[0]?(u=null!=n[0].refinement?"not_refined":"not_valid",yield[n[0],void 0]):s&&(h=n[1],void 0===d?e=h:e instanceof Map?e.set(d,h):e instanceof Set?e.add(h):i(e)&&(void 0!==h||d in e)&&(e[d]=h))}if("not_valid"!==u)for(const r of t.refiner(e,c))r.explanation=n.message,u="not_refined",yield[r,void 0];"valid"===u&&(yield[void 0,e])}class u{constructor(e){const{type:t,schema:n,validator:r,refiner:i,coercer:a=(e=>e),entries:s=function*(){}}=e;this.type=t,this.schema=n,this.entries=s,this.coercer=a,this.validator=r?(e,t)=>c(r(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>c(i(e,t),t,this,e):()=>[]}assert(e,t){return d(e,this,t)}create(e,t){return h(e,this,t)}is(e){return f(e,this)}mask(e,t){return p(e,this,t)}validate(e,t={}){return m(e,this,t)}}function d(e,t,n){const r=m(e,t,{message:n});if(r[0])throw r[0]}function h(e,t,n){const r=m(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function p(e,t,n){const r=m(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function f(e,t){return!m(e,t)[0]}function m(e,t,n={}){const i=l(e,t,n),a=function(e){const{done:t,value:n}=e.next();return t?void 0:n}(i);if(a[0]){return[new r(a[0],(function*(){for(const e of i)e[0]&&(yield e[0])})),void 0]}return[void 0,a[1]]}function y(...e){const t="type"===e[0].type,n=e.map((e=>e.schema)),r=Object.assign({},...n);return t?K(r):$(r)}function g(e,t){return new u({type:e,schema:null,validator:t})}function b(e,t){return new u({...e,refiner:(t,n)=>void 0===t||e.refiner(t,n),validator:(n,r)=>void 0===n||(t(n,r),e.validator(n,r))})}function v(e){return new u({type:"dynamic",schema:null,*entries(t,n){const r=e(t,n);yield*r.entries(t,n)},validator:(t,n)=>e(t,n).validator(t,n),coercer:(t,n)=>e(t,n).coercer(t,n),refiner:(t,n)=>e(t,n).refiner(t,n)})}function w(e){let t;return new u({type:"lazy",schema:null,*entries(n,r){t??(t=e()),yield*t.entries(n,r)},validator:(n,r)=>(t??(t=e()),t.validator(n,r)),coercer:(n,r)=>(t??(t=e()),t.coercer(n,r)),refiner:(n,r)=>(t??(t=e()),t.refiner(n,r))})}function E(e,t){const{schema:n}=e,r={...n};for(const e of t)delete r[e];return"type"===e.type?K(r):$(r)}function _(e){const t=e instanceof u?{...e.schema}:{...e};for(const e in t)t[e]=U(t[e]);return $(t)}function S(e,t){const{schema:n}=e,r={};for(const e of t)r[e]=n[e];return $(r)}function T(e,t){return console.warn("superstruct@0.11 - The `struct` helper has been renamed to `define`."),g(e,t)}function A(){return g("any",(()=>!0))}function N(e){return new u({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${s(e)}`})}function C(){return g("bigint",(e=>"bigint"==typeof e))}function M(){return g("boolean",(e=>"boolean"==typeof e))}function R(){return g("date",(e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${s(e)}`))}function x(e){const t={},n=e.map((e=>s(e))).join();for(const n of e)t[n]=n;return new u({type:"enums",schema:t,validator:t=>e.includes(t)||`Expected one of \`${n}\`, but received: ${s(t)}`})}function k(){return g("func",(e=>"function"==typeof e||`Expected a function, but received: ${s(e)}`))}function I(e){return g("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${s(t)}`))}function O(){return g("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${s(e)}`))}function P(e){return new u({type:"intersection",schema:null,*entries(t,n){for(const r of e)yield*r.entries(t,n)},*validator(t,n){for(const r of e)yield*r.validator(t,n)},*refiner(t,n){for(const r of e)yield*r.refiner(t,n)}})}function L(e){const t=s(e),n=typeof e;return new u({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \`${t}\`, but received: ${s(n)}`})}function D(e,t){return new u({type:"map",schema:null,*entries(n){if(e&&t&&n instanceof Map)for(const[r,i]of n.entries())yield[r,r,e],yield[r,i,t]},coercer:e=>e instanceof Map?new Map(e):e,validator:e=>e instanceof Map||`Expected a \`Map\` object, but received: ${s(e)}`})}function B(){return g("never",(()=>!1))}function j(e){return new u({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})}function q(){return g("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${s(e)}`))}function $(e){const t=e?Object.keys(e):[],n=B();return new u({type:"object",schema:e||null,*entries(r){if(e&&i(r)){const i=new Set(Object.keys(r));for(const n of t)i.delete(n),yield[n,r[n],e[n]];for(const e of i)yield[e,r[e],n]}},validator:e=>i(e)||`Expected an object, but received: ${s(e)}`,coercer:e=>i(e)?{...e}:e})}function U(e){return new u({...e,validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)})}function F(e,t){return new u({type:"record",schema:null,*entries(n){if(i(n))for(const r in n){const i=n[r];yield[r,r,e],yield[r,i,t]}},validator:e=>i(e)||`Expected an object, but received: ${s(e)}`})}function V(){return g("regexp",(e=>e instanceof RegExp))}function H(e){return new u({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(const n of t)yield[n,n,e]},coercer:e=>e instanceof Set?new Set(e):e,validator:e=>e instanceof Set||`Expected a \`Set\` object, but received: ${s(e)}`})}function z(){return g("string",(e=>"string"==typeof e||`Expected a string, but received: ${s(e)}`))}function W(e){const t=B();return new u({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(e.length,n.length);for(let i=0;i<r;i++)yield[i,n[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${s(e)}`})}function K(e){const t=Object.keys(e);return new u({type:"type",schema:e,*entries(n){if(i(n))for(const r of t)yield[r,n[r],e[r]]},validator:e=>i(e)||`Expected an object, but received: ${s(e)}`,coercer:e=>i(e)?{...e}:e})}function G(e){const t=e.map((e=>e.type)).join(" | ");return new u({type:"union",schema:null,coercer(t){for(const n of e){const[e,r]=n.validate(t,{coerce:!0});if(!e)return r}return t},validator(n,r){const i=[];for(const t of e){const[...e]=l(n,t,r),[a]=e;if(!a[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${s(n)}`,...i]}})}function Q(){return g("unknown",(()=>!0))}function J(e,t,n){return new u({...e,coercer:(r,i)=>f(r,t)?e.coercer(n(r,i),i):e.coercer(r,i)})}function Y(e,t,n={}){return J(e,Q(),(e=>{const r="function"==typeof t?t():t;if(void 0===e)return r;if(!n.strict&&a(e)&&a(r)){const t={...e};let n=!1;for(const e in r)void 0===t[e]&&(t[e]=r[e],n=!0);if(n)return t}return e}))}function X(e){return J(e,z(),(e=>e.trim()))}function Z(e){return se(e,"empty",(t=>{const n=ee(t);return 0===n||`Expected an empty ${e.type} but received one with a size of \`${n}\``}))}function ee(e){return e instanceof Map||e instanceof Set?e.size:e.length}function te(e,t,n={}){const{exclusive:r}=n;return se(e,"max",(n=>r?n<t:n<=t||`Expected a ${e.type} less than ${r?"":"or equal to "}${t} but received \`${n}\``))}function ne(e,t,n={}){const{exclusive:r}=n;return se(e,"min",(n=>r?n>t:n>=t||`Expected a ${e.type} greater than ${r?"":"or equal to "}${t} but received \`${n}\``))}function re(e){return se(e,"nonempty",(t=>ee(t)>0||`Expected a nonempty ${e.type} but received an empty one`))}function ie(e,t){return se(e,"pattern",(n=>t.test(n)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${n}"`))}function ae(e,t,n=t){const r=`Expected a ${e.type}`,i=t===n?`of \`${t}\``:`between \`${t}\` and \`${n}\``;return se(e,"size",(e=>{if("number"==typeof e||e instanceof Date)return t<=e&&e<=n||`${r} ${i} but received \`${e}\``;if(e instanceof Map||e instanceof Set){const{size:a}=e;return t<=a&&a<=n||`${r} with a size ${i} but received one with a size of \`${a}\``}{const{length:a}=e;return t<=a&&a<=n||`${r} with a length ${i} but received one with a length of \`${a}\``}}))}function se(e,t,n){return new u({...e,*refiner(r,i){yield*e.refiner(r,i);const a=c(n(r,i),i,e,r);for(const e of a)yield{...e,refinement:t}}})}},68839:(e,t,n)=>{"use strict";var r=n(61075);const i=["get","getKey","getAll","getAllKeys","count"],a=["put","add","delete","clear"],s=new Map;function o(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(s.get(t))return s.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=a.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!i.includes(n))return;const c=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),o&&i.done]))[0]};return s.set(t,c),c}(0,r.r)((e=>({...e,get:(t,n,r)=>o(t,n)||e.get(t,n,r),has:(t,n)=>!!o(t,n)||e.has(t,n)})))},61075:(e,t,n)=>{"use strict";n.d(t,{r:()=>h});const r=(e,t)=>t.some((t=>e instanceof t));let i,a;const s=new WeakMap,o=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function h(e){d=e(d)}function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(y(this),t),m(s.get(this))}:function(...t){return m(e.apply(y(this),t))}:function(t,...n){const r=e.call(y(this),t,...n);return c.set(r,t.sort?t.sort():[t]),m(r)}}function f(e){return"function"==typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));o.set(e,t)}(e),r(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(m(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),u.set(t,e),t}(e);if(l.has(e))return l.get(e);const t=f(e);return t!==e&&(l.set(e,t),u.set(t,e)),t}const y=e=>u.get(e)},85608:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>L,__assign:()=>a,__asyncDelegator:()=>A,__asyncGenerator:()=>T,__asyncValues:()=>N,__await:()=>S,__awaiter:()=>f,__classPrivateFieldGet:()=>I,__classPrivateFieldIn:()=>P,__classPrivateFieldSet:()=>O,__createBinding:()=>y,__decorate:()=>o,__disposeResources:()=>B,__esDecorate:()=>l,__exportStar:()=>g,__extends:()=>i,__generator:()=>m,__importDefault:()=>k,__importStar:()=>x,__makeTemplateObject:()=>C,__metadata:()=>p,__param:()=>c,__propKey:()=>d,__read:()=>v,__rest:()=>s,__rewriteRelativeImportExtension:()=>j,__runInitializers:()=>u,__setFunctionName:()=>h,__spread:()=>w,__spreadArray:()=>_,__spreadArrays:()=>E,__values:()=>b,default:()=>q});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s}function c(e,t){return function(n,r){t(n,r,e)}}function l(e,t,n,r,i,a){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,c=r.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h=!1,p=n.length-1;p>=0;p--){var f={};for(var m in r)f[m]="access"===m?{}:r[m];for(var m in r.access)f.access[m]=r.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(e||null))};var y=(0,n[p])("accessor"===c?{get:d.get,set:d.set}:d[l],f);if("accessor"===c){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw new TypeError("Object expected");(o=s(y.get))&&(d.get=o),(o=s(y.set))&&(d.set=o),(o=s(y.init))&&i.unshift(o)}else(o=s(y))&&("field"===c?i.unshift(o):d[l]=o)}u&&Object.defineProperty(u,r.name,d),h=!0}function u(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function d(e){return"symbol"==typeof e?e:"".concat(e)}function h(e,t,n){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function p(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,n,r){return new(n||(n=Promise))((function(i,a){function s(e){try{c(r.next(e))}catch(e){a(e)}}function o(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}c((r=r.apply(e,t||[])).next())}))}function m(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}var y=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function g(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||y(t,e,n)}function b(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return s}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e}function E(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var a=arguments[t],s=0,o=a.length;s<o;s++,i++)r[i]=a[s];return r}function _(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function T(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,l)}})),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise((function(n,r){a.push([e,t,n,r])>1||o(e,t)}))},t&&(r[e]=t(r[e])))}function o(e,t){try{(n=i[e](t)).value instanceof S?Promise.resolve(n.value.v).then(c,l):u(a[0][2],n)}catch(e){u(a[0][3],e)}var n}function c(e){o("next",e)}function l(e){o("throw",e)}function u(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}}function A(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:S(e[r](t)),done:!1}:i?i(t):t}:i}}function N(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=b(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var M=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},R=function(e){return R=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},R(e)};function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=R(e),r=0;r<n.length;r++)"default"!==n[r]&&y(t,e,n[r]);return M(t,e),t}function k(e){return e&&e.__esModule?e:{default:e}}function I(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function O(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function P(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function L(e,t,n){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if("function"!=typeof r)throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var D="function"==typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function B(e){function t(t){e.error=e.hasError?new D(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var n,r=0;return function i(){for(;n=e.stack.pop();)try{if(!n.async&&1===r)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(i,(function(e){return t(e),i()}))}else r|=1}catch(e){t(e)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function j(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,n,r,i,a){return n?t?".jsx":".js":!r||i&&a?r+i+"."+a.toLowerCase()+"js":e})):e}const q={__extends:i,__assign:a,__rest:s,__decorate:o,__param:c,__esDecorate:l,__runInitializers:u,__propKey:d,__setFunctionName:h,__metadata:p,__awaiter:f,__generator:m,__createBinding:y,__exportStar:g,__values:b,__read:v,__spread:w,__spreadArrays:E,__spreadArray:_,__await:S,__asyncGenerator:T,__asyncDelegator:A,__asyncValues:N,__makeTemplateObject:C,__importStar:x,__importDefault:k,__classPrivateFieldGet:I,__classPrivateFieldSet:O,__classPrivateFieldIn:P,__addDisposableResource:L,__disposeResources:B,__rewriteRelativeImportExtension:j}},50006:e=>{"use strict";e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},4716:e=>{"use strict";e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},36646:e=>{"use strict";e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},96251:e=>{"use strict";e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},30183:e=>{"use strict";e.exports={rE:"6.6.1"}},81892:e=>{"use strict";e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')}},__webpack_module_cache__={},leafPrototypes,getProto,inProgress,dataWebpackPrefix;function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);__webpack_require__.r(n);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var i=2&t&&e;"object"==typeof i&&!~leafPrototypes.indexOf(i);i=getProto(i))Object.getOwnPropertyNames(i).forEach((t=>r[t]=()=>e[t]));return r.default=()=>e,__webpack_require__.d(n,r),n},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((t,n)=>(__webpack_require__.f[n](e,t),t)),[])),__webpack_require__.u=e=>e+".js",__webpack_require__.miniCssF=e=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),inProgress={},dataWebpackPrefix="cb-wallet-extension:",__webpack_require__.l=(e,t,n,r)=>{if(inProgress[e])inProgress[e].push(t);else{var i,a;if(void 0!==n)for(var s=document.getElementsByTagName("script"),o=0;o<s.length;o++){var c=s[o];if(c.getAttribute("src")==e||c.getAttribute("data-webpack")==dataWebpackPrefix+n){i=c;break}}i||(a=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.setAttribute("data-webpack",dataWebpackPrefix+n),i.src=e),inProgress[e]=[t];var l=(t,n)=>{i.onerror=i.onload=null,clearTimeout(u);var r=inProgress[e];if(delete inProgress[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach((e=>e(n))),t)return t(n)},u=setTimeout(l.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=l.bind(null,i.onerror),i.onload=l.bind(null,i.onload),a&&document.head.appendChild(i)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var t=__webpack_require__.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e={3353:0};__webpack_require__.f.j=(t,n)=>{var r=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise(((n,i)=>r=e[t]=[n,i]));n.push(r[2]=i);var a=__webpack_require__.p+__webpack_require__.u(t),s=new Error;__webpack_require__.l(a,(n=>{if(__webpack_require__.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,r[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,i,[a,s,o]=n,c=0;if(a.some((t=>0!==e[t]))){for(r in s)__webpack_require__.o(s,r)&&(__webpack_require__.m[r]=s[r]);if(o)o(__webpack_require__)}for(t&&t(n);c<a.length;c++)i=a[c],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0},n=self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var __webpack_exports__={};(()=>{"use strict";var e=__webpack_require__(14144),t=__webpack_require__(29740),n=__webpack_require__(80104);function r(e){if(null==e)return!1;const t=String(e).trim();return!!/^(?:y|yes|true|1|on)$/i.test(t)}r("false"),r("false");const i="production";r("false");function a(...e){"production"===i||console.log(...e)}class s{log(e,t){window.postMessage({type:"walletLinkAnalytics",data:{eventType:e,eventProperties:{walletLinkInstance:"extension",...t}}})}}var o=__webpack_require__(2719),c=__webpack_require__(89474);class l{constructor(e,t){this.whitelisted=e,this.internal=t||{},this.whitelistedChainIdSet=new Set(Object.values(this.whitelisted).map((e=>e.chainId.toString()))),this.internalChainIdSet=new Set(Object.values(this.internal).map((e=>e.chainId.toString()))),this.networkMap=new Map(Object.values(e).map((e=>[e.chainId.toString(),e])))}get allNetworks(){return this.networkMap}addNetwork(e,t){this.networkMap.set(e,t)}removeNetwork(e){if(this.isWhitelisted(e))throw Error("Cannot delete a whitelisted network");this.networkMap.delete(e)}removeCustomizationForWhitelisted(e){const t=Object.values(this.whitelisted).find((t=>t.chainId.toString()===e));t&&this.addNetwork(e,t)}isWhitelisted(e){return this.whitelistedChainIdSet.has(e)}isInternal(e){return this.internalChainIdSet.has(e)}isWhiteListedAndCustomized(e){if(!this.isWhitelisted(e))return!1;const t=this.fromChainId(BigInt(e)),n=Object.values(this.whitelisted).find((t=>t.chainId.toString()===e));return!t||!n||t.displayName!==n.displayName||t.rpcUrl!==n.rpcUrl||t.baseAssetCurrencyCode!==n.baseAssetCurrencyCode||t.blockExplorerUrl!==n.blockExplorerUrl}resetNetworks(){this.networkMap=new Map(Object.values(this.whitelisted).map((e=>[e.chainId.toString(),e])))}fromChainId(e){const t=e.toString();if(this.networkMap.has(t))return this.networkMap.get(t)}}const u="true"==="MISSING_ENV_VAR".IS_PRIME;if("MISSING_ENV_VAR".IS_PRIME&&!"MISSING_ENV_VAR".PRIME_BASE_URL)throw new Error("Missing ENV var: PRIME_BASE_URL");const d="https://api.wallet.coinbase.com",h="https://wallet-api-dev.cbhq.net",p="MISSING_ENV_VAR".CB_WALLET_CHAIN_PROXY_URL??"https://chain-proxy.wallet.coinbase.com",f="MISSING_ENV_VAR".ONRAMP_API_URL??"https://onramp.wallet.coinbase.com",m="MISSING_ENV_VAR".ONRAMP_API_URL??"https://onramp-api-dev.cbhq.net",y="MISSING_ENV_VAR".ONRAMP_API_LOCAL_URL,g="MISSING_ENV_VAR".OFFRAMP_API_URL??"https://offramp.wallet.coinbase.com",b="MISSING_ENV_VAR".OFFRAMP_API_URL??"https://offramp-wallet-dev.cbhq.net",v="MISSING_ENV_VAR".OFFRAMP_LOCAL_API,w="MISSING_ENV_VAR".TARGET_ENV?.includes("e2e")??!1,E=w&&!"MISSING_ENV_VAR".TARGET_ENV?.includes("extension");const _={...{ETHEREUM_MAINNET:{chainId:1,blockExplorerUrl:"https://etherscan.io",rpcUrl:`${p}?targetName=ethereum-mainnet`,etherscanCompatibleTxHistoryApi:p},OPTIMISM_MAINNET:{chainId:10,blockExplorerUrl:"https://optimistic.etherscan.io",rpcUrl:`${p}?targetName=optimism-mainnet`,etherscanCompatibleTxHistoryApi:p},BASE_MAINNET:{chainId:8453,blockExplorerUrl:"https://explorer.base.org",rpcUrl:`${p}?targetName=base`,etherscanCompatibleTxHistoryApi:p},POLYGON_MAINNET:{chainId:137,blockExplorerUrl:"https://polygonscan.com",rpcUrl:`${p}?targetName=polygon-mainnet`,etherscanCompatibleTxHistoryApi:p},BNB_MAINNET:{chainId:56,blockExplorerUrl:"https://bscscan.com",rpcUrl:`${p}?targetName=bsc`,etherscanCompatibleTxHistoryApi:p},FANTOM_MAINNET:{chainId:250,blockExplorerUrl:"https://ftmscan.com",rpcUrl:`${p}?targetName=fantom`,etherscanCompatibleTxHistoryApi:p},ARBITRUM_MAINNET:{chainId:42161,blockExplorerUrl:"https://arbiscan.io",rpcUrl:`${p}?targetName=arbitrum`,etherscanCompatibleTxHistoryApi:p},GNOSIS_MAINNET:{chainId:100,blockExplorerUrl:"https://blockscout.com/poa/xdai",rpcUrl:`${p}?targetName=xdai`,etherscanCompatibleTxHistoryApi:p},LORDCHAIN_MAINNET:{chainId:84530008,blockExplorerUrl:"https://lordchain-explorer.appchain.base.org",rpcUrl:`${p}?targetName=lordchain`,etherscanCompatibleTxHistoryApi:"https://lordchain-explorer.appchain.base.org"},AVALANCHE_MAINNET:{chainId:43114,blockExplorerUrl:"https://snowtrace.io",rpcUrl:`${p}?targetName=avalanche`,etherscanCompatibleTxHistoryApi:p},ZETACHAIN_MAINNET:{chainId:7e3,blockExplorerUrl:"https://zetachain.blockscout.com",rpcUrl:`${p}?targetName=zetachain-mainnet`,etherscanCompatibleTxHistoryApi:p},ZORA_MAINNET:{chainId:7777777,blockExplorerUrl:"https://explorer.zora.energy",rpcUrl:`${p}?targetName=zora-mainnet`,etherscanCompatibleTxHistoryApi:p},SEPOLIA:{chainId:11155111,blockExplorerUrl:"https://sepolia.etherscan.io",rpcUrl:`${p}?targetName=ethereum-sepolia`,etherscanCompatibleTxHistoryApi:p},HOLESKY:{chainId:17e3,blockExplorerUrl:"https://holesky.etherscan.io",rpcUrl:`${p}?targetName=ethereum-holesky`,etherscanCompatibleTxHistoryApi:p},OP_SEPOLIA:{chainId:11155420,blockExplorerUrl:"https://optimism-sepolia.blockscout.com",rpcUrl:`${p}?targetName=optimism-sepolia`,etherscanCompatibleTxHistoryApi:p},BASE_SEPOLIA:{chainId:84532,blockExplorerUrl:"https://sepolia.basescan.org",rpcUrl:`${p}?targetName=base-sepolia`,etherscanCompatibleTxHistoryApi:p},BNB_TESTNET:{chainId:97,blockExplorerUrl:"https://testnet.bscscan.com",rpcUrl:`${p}?targetName=bsc-testnet`,etherscanCompatibleTxHistoryApi:p},FANTOM_TESTNET:{chainId:4002,blockExplorerUrl:"https://testnet.ftmscan.com",rpcUrl:"https://rpc.ankr.com/fantom_testnet",etherscanCompatibleTxHistoryApi:p},ARBITRUM_SEPOLIA:{chainId:421614,blockExplorerUrl:"https://sepolia.arbiscan.io",rpcUrl:`${p}?targetName=arbitrum-sepolia`,etherscanCompatibleTxHistoryApi:p},AVALANCHE_FUJI:{chainId:43113,blockExplorerUrl:"https://testnet.snowtrace.io",rpcUrl:`${p}?targetName=avalanche-fuji`,etherscanCompatibleTxHistoryApi:p},LORDCHAIN_TESTNET:{chainId:845320008,blockExplorerUrl:"https://lordchain-explorer-testnet.appchain.base.org",rpcUrl:`${p}?targetName=lordchain-testnet`,etherscanCompatibleTxHistoryApi:"https://lordchain-explorer-testnet.appchain.base.org"},LOCALHOST_8545:{chainId:31337,blockExplorerUrl:"",rpcUrl:"http://127.0.0.1:8545",etherscanCompatibleTxHistoryApi:""}}},S=Object.keys(_).reduce(((e,t)=>(e[t]={blockExplorerUrl:`${d}/mock-block-explorer`,rpcUrl:`${d}/mock-chain-rpc`,etherscanCompatibleTxHistoryApi:`${d}/mock-etherscan-${t}`},e)),{}),T=E?S:_,A={blockchainSymbol:"ETH",isNonEthChain:!1},N={baseAssetCurrencyCode:"ZETA",baseAssetImageUrl:"https://asset-metadata-service-production.s3.amazonaws.com/asset_icons/ef9e387c9bf4354c6163feeb01183f15f362d500e6cb7b0d9a2ed3346e0256a8.png",baseAssetDisplayName:"ZETA",baseAssetDecimal:18,chainImageUrl:"https://asset-metadata-service-production.s3.amazonaws.com/asset_icons/ef9e387c9bf4354c6163feeb01183f15f362d500e6cb7b0d9a2ed3346e0256a8.png",displayName:"ZetaChain",isTestnet:!1,isLayer2:!1,is1559Enabled:!1,isCustomNetwork:!1,etherscanLikeApiKey:"GAH6BHW1WXF3TNQ4AH3G44B7BWVVKPKSV5",wacNetworkId:"networks/zetachain-mainnet",chainProxyTarget:"zetachain-mainnet-etherscan",...A,...T.ZETACHAIN_MAINNET},C={baseAssetCurrencyCode:"ETH",baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",baseAssetDisplayName:"Ethereum",baseAssetDecimal:18,chainImageUrl:"https://go.wallet.coinbase.com/static/chains/zora-logo.png",displayName:"Zora",isTestnet:!1,isLayer2:!0,is1559Enabled:!0,isOvmNetwork:!0,isCustomNetwork:!1,etherscanLikeApiKey:"GAH6BHW1WXF3TNQ4AH3G44B7BWVVKPKSV5",isNudgeSupported:!0,wacNetworkId:"networks/zora-mainnet",chainProxyTarget:"zora-mainnet-etherscan",...A,...T.ZORA_MAINNET},M={baseAssetCurrencyCode:"LRDS",baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/76/5e/765efd83724794e0fe44caee4cf493e2838a632124833382409a5a7e55625f8e-MDAyMWQ3MTctOWZkMC00MWE5LTgxYTMtNmU1YzE4YTA3N2Mx",baseAssetDisplayName:"LORDCHAIN",baseAssetDecimal:18,chainImageUrl:"https://go.wallet.coinbase.com/static/chains/lordchain-logo.png",displayName:"LORDCHAIN TESTNET",isTestnet:!0,isLayer2:!0,is1559Enabled:!0,isCustomNetwork:!1,isNudgeSupported:!0,wacNetworkId:"networks/lordchain-testnet",...A,...T.LORDCHAIN_TESTNET},R={baseAssetCurrencyCode:"LRDS",baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/76/5e/765efd83724794e0fe44caee4cf493e2838a632124833382409a5a7e55625f8e-MDAyMWQ3MTctOWZkMC00MWE5LTgxYTMtNmU1YzE4YTA3N2Mx",baseAssetDisplayName:"LORDCHAIN",baseAssetDecimal:18,chainImageUrl:"https://go.wallet.coinbase.com/static/chains/lordchain-logo.png",displayName:"LORDCHAIN",isTestnet:!1,isLayer2:!0,is1559Enabled:!0,isCustomNetwork:!1,isNudgeSupported:!0,wacNetworkId:"networks/lordchain-mainnet",...A,...T.LORDCHAIN_MAINNET},x=new l({...{ETHEREUM_MAINNET:{baseAssetCurrencyCode:"ETH",baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",baseAssetDisplayName:"Ethereum",baseAssetDecimal:18,displayName:"Ethereum",isTestnet:!1,isLayer2:!1,is1559Enabled:!0,isCustomNetwork:!1,etherscanLikeApiKey:"GAH6BHW1WXF3TNQ4AH3G44B7BWVVKPKSV5",isNudgeSupported:!0,wacNetworkId:"networks/ethereum-mainnet",chainImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",chainProxyTarget:"ethereum-etherscan",...A,...T.ETHEREUM_MAINNET},OPTIMISM_MAINNET:{baseAssetCurrencyCode:"ETH",baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",baseAssetDisplayName:"Ethereum",baseAssetDecimal:18,displayName:"OP Mainnet",isTestnet:!1,isLayer2:!0,is1559Enabled:!0,isCustomNetwork:!1,isOvmNetwork:!0,etherscanLikeApiKey:"3AC76IGUZCFP2ABUNPGAY8PJSPRAFJYHEF",chainImageUrl:"https://go.wallet.coinbase.com/static/assets/optimism.png",isNudgeSupported:!0,wacNetworkId:"networks/optimism-mainnet",chainProxyTarget:"optimism-etherscan",...A,...T.OPTIMISM_MAINNET},BASE_MAINNET:{baseAssetCurrencyCode:"ETH",baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",baseAssetDisplayName:"Ethereum",baseAssetDecimal:18,displayName:"Base",isTestnet:!1,isLayer2:!0,is1559Enabled:!0,isCustomNetwork:!1,isOvmNetwork:!0,chainImageUrl:"https://go.wallet.coinbase.com/static/base-logo.png",isNudgeSupported:!0,chainProxyTarget:"basescan",wacNetworkId:"networks/base-mainnet",...A,...T.BASE_MAINNET},POLYGON_MAINNET:{baseAssetCurrencyCode:"POL",baseAssetImageUrl:"https://wallet-api-production.s3.amazonaws.com/uploads/b474d4bf3af389e5f26ed66956f1da8a/maticLogo.png",baseAssetDisplayName:"Polygon Ecosystem Token",baseAssetDecimal:18,displayName:"Polygon",isTestnet:!1,isLayer2:!0,is1559Enabled:!0,isCustomNetwork:!1,etherscanLikeApiKey:"N1QTECUKT25H7R5H1EGHAXUIG7SRT8BUYY",chainImageUrl:"https://wallet-api-production.s3.amazonaws.com/uploads/tokens/0x7d1afa7b718fb893db30a3abc0cfc608aacfebb0_64.png",isNudgeSupported:!0,wacNetworkId:"networks/polygon-mainnet",chainProxyTarget:"polygonscan",...A,...T.POLYGON_MAINNET},BNB_MAINNET:{baseAssetCurrencyCode:"BNB",baseAssetImageUrl:"https://djly28hup5duz.cloudfront.net/wallet/wais/ea/1d/ea1dd1e2173d23bf2fdd95f78c145d064700aaccc24380403e73bbda74183742-MjQwOWEyYzYtMjUyMy00OGY4LTkxYzAtY2FlMzQyMmU1YTMw",baseAssetDisplayName:"BNB",baseAssetDecimal:18,displayName:"BNB (Binance Smart) Chain",isTestnet:!1,isLayer2:!0,is1559Enabled:!1,isCustomNetwork:!1,etherscanLikeApiKey:"T8BK2SDU3I3JXKWCFAPVRFQDHKV5MACHWC",chainImageUrl:"https://wallet-api-production.s3.amazonaws.com/uploads/tokens/bnb_288.png",isNudgeSupported:!0,wacNetworkId:"networks/bnb-mainnet",chainProxyTarget:"bsc-bscscan",...A,...T.BNB_MAINNET},FANTOM_MAINNET:{baseAssetCurrencyCode:"FTM",baseAssetImageUrl:"https://wallet-api-production.s3.amazonaws.com/uploads/ddbcf362d2717855adb007691745b83f/ftm_logo.png",baseAssetDisplayName:"FTM",baseAssetDecimal:18,chainImageUrl:"https://wallet-api-production.s3.amazonaws.com/uploads/ddbcf362d2717855adb007691745b83f/ftm_logo.png",displayName:"Fantom Opera",isTestnet:!1,isLayer2:!0,is1559Enabled:!1,isCustomNetwork:!1,etherscanLikeApiKey:"33A9K22PIJJEQT28HYD7JIWQHQ7AHC1TFF",isNudgeSupported:!0,wacNetworkId:"networks/fantom-mainnet",chainProxyTarget:"fantom-ftmscan",...A,...T.FANTOM_MAINNET},ARBITRUM_MAINNET:{baseAssetCurrencyCode:"ETH",baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",baseAssetDisplayName:"Ethereum",baseAssetDecimal:18,displayName:"Arbitrum",isTestnet:!1,isLayer2:!0,is1559Enabled:!1,isCustomNetwork:!1,etherscanLikeApiKey:"8EIAPIHN5S47JM7AD65UCVPGQWGZ38G7AJ",chainImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/5f/45/5f45a2999ef5c8ba72fa5bc5275b38a44f196cb64fd12cd8996ae70f13a8910c-OGRkMmQyZTYtMzA1OS00OGMxLThjNWMtYjExODY5YmM2Mzhi",isNudgeSupported:!0,wacNetworkId:"networks/arbitrum-mainnet",chainProxyTarget:"arbitrum-arbiscan",...A,...T.ARBITRUM_MAINNET},GNOSIS_MAINNET:{baseAssetCurrencyCode:"XDAI",baseAssetImageUrl:"https://static-assets.coinbase.com/wallet/assets/xdai.png",baseAssetDisplayName:"xDai",baseAssetDecimal:18,chainImageUrl:"https://dynamic-assets.coinbase.com/d1afa9a4f7ce51fa1af1ab94a15ea875a4df2b9a0b6ca619ea3de482d688198d67112c70516b703405b01d9abd5856493c238fe58004b63f4c5b5986a7624da2/asset_icons/b2e81465e2ac5d20898c4793c1c672073895ba71688ad1044a01011fe555ca88.png",displayName:"Gnosis",isTestnet:!1,isLayer2:!0,is1559Enabled:!1,isCustomNetwork:!1,etherscanLikeApiKey:"1b25e3c1-9951-4366-afc6-a6d414ecdb5e",isNudgeSupported:!0,wacNetworkId:"networks/xdai-mainnet",chainProxyTarget:"gnosis-gnosisscan",...A,...T.GNOSIS_MAINNET},...u?{}:{LORDCHAIN_MAINNET:R},AVALANCHE_MAINNET:{baseAssetCurrencyCode:"AVAX",baseAssetImageUrl:"https://wallet-api-production.s3.amazonaws.com/uploads/889d119cede59f72d7dae9132b2d35fc/avax_logo.png",baseAssetDisplayName:"AVAX",baseAssetDecimal:18,chainImageUrl:"https://wallet-api-production.s3.amazonaws.com/uploads/889d119cede59f72d7dae9132b2d35fc/avax_logo.png",displayName:"Avalanche C-Chain",isTestnet:!1,isLayer2:!0,is1559Enabled:!0,isCustomNetwork:!1,etherscanLikeApiKey:"S1UPXSUGI2Z7TBZN2MZCMZBW2HP3DZ1B4G",isNudgeSupported:!0,wacNetworkId:"networks/avacchain-mainnet",chainProxyTarget:"avalanche-snowtrace",...A,...T.AVALANCHE_MAINNET},...u?{}:{ZETACHAIN_MAINNET:N},...u?{}:{ZORA_MAINNET:C},HOLESKY:{baseAssetCurrencyCode:void 0,baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",baseAssetDisplayName:"Holesky Ethereum",baseAssetDecimal:18,chainImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",displayName:"Holesky",isTestnet:!0,isLayer2:!1,is1559Enabled:!0,isCustomNetwork:!1,etherscanLikeApiKey:"GAH6BHW1WXF3TNQ4AH3G44B7BWVVKPKSV5",isNudgeSupported:!0,wacNetworkId:"networks/ethereum-holesky-testnet",chainProxyTarget:"ethereum-holesky-etherscan",...A,...T.HOLESKY},SEPOLIA:{baseAssetCurrencyCode:void 0,baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",baseAssetDisplayName:"Sepolia Ethereum",baseAssetDecimal:18,chainImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",displayName:"Sepolia",isTestnet:!0,isLayer2:!1,is1559Enabled:!0,isCustomNetwork:!1,etherscanLikeApiKey:"GAH6BHW1WXF3TNQ4AH3G44B7BWVVKPKSV5",isNudgeSupported:!0,wacNetworkId:"networks/ethereum-sepolia-testnet",chainProxyTarget:"ethereum-sepolia-etherscan",...A,...T.SEPOLIA},OP_SEPOLIA:{baseAssetCurrencyCode:void 0,baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",baseAssetDisplayName:"Sepolia Ethereum",baseAssetDecimal:18,displayName:"OP Sepolia",isTestnet:!0,isLayer2:!0,is1559Enabled:!0,isCustomNetwork:!1,isOvmNetwork:!0,etherscanLikeApiKey:"GAH6BHW1WXF3TNQ4AH3G44B7BWVVKPKSV5",chainImageUrl:"https://go.wallet.coinbase.com/static/assets/optimism.png",isNudgeSupported:!0,wacNetworkId:"networks/optimism-sepolia-testnet",chainProxyTarget:"optimism-sepolia-etherscan",...A,...T.OP_SEPOLIA},BASE_SEPOLIA:{baseAssetCurrencyCode:void 0,baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",baseAssetDisplayName:"Sepolia Ethereum",baseAssetDecimal:18,displayName:"Base Sepolia",isTestnet:!0,isLayer2:!0,is1559Enabled:!0,isCustomNetwork:!1,isOvmNetwork:!0,chainImageUrl:"https://go.wallet.coinbase.com/static/base-logo.png",isNudgeSupported:!0,chainProxyTarget:"base-sepolia-etherscan",wacNetworkId:"networks/base-sepolia-testnet",...A,...T.BASE_SEPOLIA},BNB_TESTNET:{baseAssetCurrencyCode:"BNB",baseAssetImageUrl:"https://djly28hup5duz.cloudfront.net/wallet/wais/ea/1d/ea1dd1e2173d23bf2fdd95f78c145d064700aaccc24380403e73bbda74183742-MjQwOWEyYzYtMjUyMy00OGY4LTkxYzAtY2FlMzQyMmU1YTMw",baseAssetDisplayName:"BNB",baseAssetDecimal:18,chainImageUrl:"https://djly28hup5duz.cloudfront.net/wallet/wais/ea/1d/ea1dd1e2173d23bf2fdd95f78c145d064700aaccc24380403e73bbda74183742-MjQwOWEyYzYtMjUyMy00OGY4LTkxYzAtY2FlMzQyMmU1YTMw",displayName:"BNB (Binance Smart) Chain Testnet",isTestnet:!0,isLayer2:!0,is1559Enabled:!1,isCustomNetwork:!1,etherscanLikeApiKey:"T8BK2SDU3I3JXKWCFAPVRFQDHKV5MACHWC",isNudgeSupported:!0,wacNetworkId:"networks/bnb-testnet",chainProxyTarget:"bsc-testnet-bscscan",...A,...T.BNB_TESTNET},FANTOM_TESTNET:{baseAssetCurrencyCode:"FTM",baseAssetImageUrl:"https://wallet-api-production.s3.amazonaws.com/uploads/ddbcf362d2717855adb007691745b83f/ftm_logo.png",baseAssetDisplayName:"FTM",baseAssetDecimal:18,chainImageUrl:"https://wallet-api-production.s3.amazonaws.com/uploads/ddbcf362d2717855adb007691745b83f/ftm_logo.png",displayName:"Fantom Testnet",isTestnet:!0,isLayer2:!0,is1559Enabled:!1,isCustomNetwork:!1,etherscanLikeApiKey:"33A9K22PIJJEQT28HYD7JIWQHQ7AHC1TFF",isNudgeSupported:!0,wacNetworkId:"networks/fantom-testnet",chainProxyTarget:"fantom-testnet-ftmscan",...A,...T.FANTOM_TESTNET},ARBITRUM_SEPOLIA:{baseAssetCurrencyCode:void 0,baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",baseAssetDisplayName:"Sepolia Ethereum",baseAssetDecimal:18,chainImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/5f/45/5f45a2999ef5c8ba72fa5bc5275b38a44f196cb64fd12cd8996ae70f13a8910c-OGRkMmQyZTYtMzA1OS00OGMxLThjNWMtYjExODY5YmM2Mzhi",displayName:"Arbitrum Sepolia",isTestnet:!0,isLayer2:!0,is1559Enabled:!1,isCustomNetwork:!1,etherscanLikeApiKey:"8EIAPIHN5S47JM7AD65UCVPGQWGZ38G7AJ",isNudgeSupported:!0,wacNetworkId:"networks/arbitrum-sepolia-testnet",chainProxyTarget:"arbitrum-sepolia-etherscan",...A,...T.ARBITRUM_SEPOLIA},AVALANCHE_FUJI:{baseAssetCurrencyCode:"AVAX",baseAssetImageUrl:"https://wallet-api-production.s3.amazonaws.com/uploads/889d119cede59f72d7dae9132b2d35fc/avax_logo.png",baseAssetDisplayName:"Testnet AVAX",baseAssetDecimal:18,chainImageUrl:"https://wallet-api-production.s3.amazonaws.com/uploads/889d119cede59f72d7dae9132b2d35fc/avax_logo.png",displayName:"Avalanche Fuji",isTestnet:!0,isLayer2:!0,is1559Enabled:!0,isCustomNetwork:!1,etherscanLikeApiKey:"S1UPXSUGI2Z7TBZN2MZCMZBW2HP3DZ1B4G",isNudgeSupported:!0,wacNetworkId:"networks/avacchain-fuji-testnet",chainProxyTarget:"avalanche-fuji-snowtrace",...A,...T.AVALANCHE_FUJI},...u?{}:{LORDCHAIN_TESTNET:M},LOCALHOST_8545:{baseAssetCurrencyCode:"ETH",baseAssetImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",baseAssetDisplayName:"Localhost ETH",baseAssetDecimal:18,chainImageUrl:"https://d3r81g40ycuhqg.cloudfront.net/wallet/wais/07/23/0723c996feb7dc2d87bec4191b6af4721acfd4898759a1fa85686ae2d67f8982-ZTZjN2NhNjAtODI2Ni00YmU4LWI4NTgtOWNiZTUyYzQ3MDc4",displayName:"Localhost 8545",isTestnet:!0,isLayer2:!1,is1559Enabled:!1,isCustomNetwork:!1,etherscanLikeApiKey:"",...A,...T.LOCALHOST_8545}}});class k{constructor(e){this.code=e.toUpperCase(),this.rawValue=this.code}static isEqual(e,t){return e.rawValue===t.rawValue}get value(){return this.rawValue}}k.USD=new k("USD"),k.EUR=new k("EUR"),k.CNY=new k("CNY"),k.GBP=new k("GBP"),k.CAD=new k("CAD"),k.USDC=new k("USDC"),k.EURC=new k("EURC"),k.USDT=new k("USDT"),k.RUB=new k("RUB"),k.BTC=new k("BTC"),k.ETH=new k("ETH"),k.WETH=new k("WETH"),k.CETH=new k("CETH"),k.WBTC=new k("WBTC"),k.CWBTC=new k("CWBTC"),k.MATIC=new k("MATIC"),k.POL=new k("POL"),k.SOL=new k("SOL"),k.XDAI=new k("XDAI"),k.AVAX=new k("AVAX"),k.RETH=new k("RETH");class I{constructor(e){Object.assign(this,e)}imageURLForNetwork(e){return this.imageURL}currencyCodeForNetwork(e){return this.currencyCode}get minimumBalance(){}}class O{constructor(e){this.rawValue=e.toUpperCase()}toString(){return this.rawValue}static isEqual(e,t){return e.rawValue===t.rawValue}get addressCharLength(){switch(this.rawValue){case"SOL":return 44;case"ETH":case"BTC":return 42;case"LTC":return 43;case"DOGE":return 34;default:throw new Error("Blockchain not supported")}}blockExplorerUrl(e,t){switch(this.rawValue){case"ETH":{const n=t.asChain();return n?.blockExplorerUrl?`${n.blockExplorerUrl}/tx/${e}`:void 0}case"SOL":{const n=t.asChain();return n?`${n.blockExplorerUrl}/tx/${e}`:void 0}case"BTC":return`https://live.blockcypher.com/btc/tx/${e}`;case"DOGE":return`https://dogechain.info/tx/${e}`;case"LTC":return`https://live.blockcypher.com/ltc/tx/${e}`;default:return}}fullName(){switch(this.rawValue){case"ETH":return"Ethereum";case"SOL":return"Solana";case"BTC":return"Bitcoin";case"DOGE":return"Dogecoin";case"LTC":return"Litecoin";default:return}}avgConfirmationTime(){switch(this.rawValue){case"ETH":return{confirmationTime:"30",timeUnit:"seconds"};case"SOL":return{confirmationTime:"10",timeUnit:"seconds"};case"BTC":return{confirmationTime:"30",timeUnit:"minutes"};case"DOGE":return{confirmationTime:"3",timeUnit:"minutes"};case"LTC":return{confirmationTime:"8",timeUnit:"minutes"};default:return}}}class P{constructor(e){this.rawValue=e}}const L="ETHEREUM_CHAIN",D="ETH",B="Solana",j="SOL",q="https://asset-metadata-service-production.s3.amazonaws.com/asset_icons/b658adaf7913c1513c8d120bcb41934a5a4bf09b6adbcb436085e2fbf6eb128c.png",$={SOLANA_MAINNET:{blockExplorerUrl:"https://solana.fm",rpcUrl:"https://sol-mainnet.wallet.coinbase.com"}},U=Object.keys($).reduce((function(e,t){return e[t]={blockExplorerUrl:`${d}/mock-block-explorer`,rpcUrl:`${d}/mock-chain-rpc`},e}),{}),F=new l({SOLANA_MAINNET:{blockchainSymbol:"SOL",chainId:101,baseAssetCurrencyCode:"SOL",baseAssetImageUrl:q,baseAssetDisplayName:"Solana",baseAssetDecimal:9,displayName:"Solana",isLayer2:!1,isTestnet:!1,chainImageUrl:q,isCustomNetwork:!1,isNonEthChain:!0,isNudgeSupported:!1,wacNetworkId:"networks/solana-mainnet",...(E?U:$).SOLANA_MAINNET}}),V="SOLANA_CHAIN";function H(e){return new ae(`${V}:${e.chainId}`,e.isTestnet)}F.whitelisted.SOLANA_MAINNET;var z=__webpack_require__(69011),W=__webpack_require__.n(z),K=__webpack_require__(89150),G=__webpack_require__.n(K);const Q=W()((function(e){return G()(e.message+e.stack).substring(0,8)}),(e=>e.message+e.stack));const J="%c Error Reporting:",Y="color:red;";let X=(Z=function(e){const{severity:t}=e,n=function(e){switch(e){case"debug":return console.debug;case"warning":return console.warn;default:return console.error}}(t),r="MISSING_ENV_VAR".TARGET_ENV;r&&"local"!==r?(e.stack=e.error.stack,n(JSON.stringify(e))):n(J,Y,e)},e=>{let t;e instanceof Error?(t={error:e,context:"unknown",severity:"error",isHandled:!1},console.warn(J,Y,"reportError called incorrectly (reportError(error) rather than reportError({error}))")):"object"==typeof e?(t=e,t.error instanceof Error||(console.warn(J,Y,"reportError called incorrectly with something other than an error object",e),t.metadata={...t.metadata,originalErrorData:JSON.stringify(t.error)},t.error=new Error("Unspecified error."))):(t={error:new Error("Unspecified error."),context:"unknown",severity:"error",metadata:{originalErrorData:JSON.stringify(e)},isHandled:!1},console.warn(J,Y,"reportError called incorrectly"));const{error:n}=t,r=Q(n);return function(e){return!("reportError"in e)||e.reportError}(n)&&Z(t,r),{errorHash:r}});var Z;const ee=["MISSING_INSTANCEID_SERVICE","SERVICE_NOT_AVAILABLE","TOO_MANY_REGISTRATIONS","AUTHENTICATION_FAILED","PHONE_REGISTRATION_ERROR"],te=["address/network pair not in address book"];function ne(e){try{return ee.some((t=>e.error?.message?.includes(t)))||te.some((t=>e.error?.message?.includes(t)))?X({...e,severity:"warning"}):X(e)}catch(e){return console.error(J,Y,"Error reporting error",e),{}}}const re=ne,ie=W()((function(e){const t=e.split("/");if(2!==t.length)return;const n=t[0];let r="";try{r=JSON.parse(t[1])}catch(t){re({error:t,context:"networks",metadata:{networkRawValue:e},isHandled:!0,severity:"error"})}return"boolean"==typeof r?new ae(n,r):void 0}));class ae{constructor(e,t=!1){this.isTestnet=t,this.rawValue=[e,String(t)].join("/")}static createTestnetNetwork(e){return new ae("TESTNET",e)}static create(e){return ie(e)}static isEqual(e,t){return e.rawValue===t.rawValue}static fromChainId({chainPrefix:e=L,chainId:t}){let n=e,r=x.fromChainId(t);return t!==BigInt(101)||r||(n=V),n===V&&(r=F.fromChainId(t)),new ae(`${n}:${t}`,r?.isTestnet??!1)}static fromSupportedChain(e){return new ae(`${e.prefix}:${e.chainId}`,!1)}asChain(){const{chainPrefix:e,chainId:t}=oe(this.rawValue);if(e&&t)switch(e){case L:return x.fromChainId(t);case V:return F.fromChainId(t);default:return}}}const se={chainId:void 0,chainPrefix:void 0},oe=W()((function(e){if(!e)return se;const t=e.split("/");if(2!==t.length)return se;const n=t[0],r=n?.split(":")??[];if(2!==r.length)return se;const i=r[0],a=r[1];let s;try{s="undefined"===a?void 0:BigInt(a)}catch(t){throw re({error:t,context:"networks",metadata:{networkRawValue:e},isHandled:!0,severity:"error"}),t}return{chainPrefix:i,chainId:s}}));class ce{constructor(e,t){this.name=e,this.network=t}}class le{constructor(e,t,n,r,i=[]){this.blockchain=e,this.defaultMainnet=t,this.mainnets=n,this.testnets=r,this.customNetworks=i}get defaultNetworks(){return[...this.mainnets,...this.testnets]}get allNetworks(){return[...this.mainnets,...this.testnets,...this.customNetworks]}get mainnetsAndCustomNetworks(){return[...this.mainnets,...this.customNetworks]}get testnetNetworks(){return[...this.testnets]}static forMainnetOnlyBlockchain(e){const t=new ce("Mainnet",ae.createTestnetNetwork(!1));return new le(e,t,[t],[])}}var ue;!function(e){e.string="string",e.bigint="bigint",e.boolean="boolean",e.number="number"}(ue||(ue={}));class de{constructor(e,t){this.keyName=e,this.kind=t}get rawValue(){return[this.keyName,this.kind].join("/")}static create(e){const t=e.split("/",2);if(2!==t.length||!(t[1]in ue))throw new Error(`Invalid TxOrUserOpMetadataKey: ${e}`);return new de(t[0],ue[t[1]])}}const he=new de("consumerTxID",ue.string),pe=new de("inputCount",ue.bigint),fe=(new de("outputCount",ue.bigint),new de("sponsoredUuid",ue.string)),me=new de("hasRecordedConfirmEvent",ue.boolean),ye=new de("gaslessSwapHash",ue.string),ge=new de("isGasless",ue.boolean),be=new de("isSponsored",ue.boolean),ve=(new de("isRealTimeSwap",ue.boolean),new de("isCBStake",ue.boolean)),we=new de("cashoutIdem",ue.string),Ee=new de("sponsoredCashoutUuid",ue.string),_e=new de("cashoutWithdrawalType",ue.string),Se=new de("assetType",ue.string),Te=new de("toTokenImage",ue.string),Ae=new de("toTokenName",ue.string),Ne=new de("toTokenDecimal",ue.string),Ce=new de("toTokenCurrencyCode",ue.string),Me=new de("toTokenAmount",ue.string),Re=new de("isReceiveTronTx",ue.boolean),xe=new de("tronTxStatus",ue.string),ke=new de("tronFromAddress",ue.string),Ie=new de("tronReceiptLink",ue.string),Oe=new de("tronTransactionHash",ue.string),Pe=new de("tronDestinationTransactionHash",ue.string),Le=new de("tronTxProviderKycLink",ue.string),De=new de("isVANReceiveTx",ue.boolean),Be=new de("vanTxStatus",ue.string),je=new de("vanReceiptLink",ue.string),qe=new de("vanOriginAmount",ue.string),$e=new de("vanOriginCurrency",ue.string),Ue=new de("vanSenderName",ue.string),Fe=new de("vanProviderName",ue.string),Ve=new de("usdcRewardTxProgramName",ue.string);new de("primeActivityId",ue.string),new de("primeSignedTxnHash",ue.string),new de("primeConsensusMet",ue.boolean),new de("primeApprovalDeadline",ue.string),new de("isFromPrimeActivity",ue.boolean),new de("originalIdemKey",ue.string);class He{constructor(e,t,n){this.id=e,this.uuid=t,this.kind=n,this.name=[this.id,t,n].filter((e=>e)).join("_")}}var ze;!function(e){e[e.LocalStorage=0]="LocalStorage",e[e.Memory=1]="Memory"}(ze||(ze={}));class We extends He{constructor(e,t){super(e,t,ze.LocalStorage)}}const Ke=new O(D),Ge=new P("Ethereum"),Qe=function(){const e=new ce("Ethereum",Je(x.whitelisted.ETHEREUM_MAINNET)),t=[];for(const e of Object.values(x.whitelisted))isNaN(e?.chainId)||t.push(x.fromChainId(BigInt(e.chainId)));const n=[e],r=[];return t.filter((e=>e.chainId!==x.whitelisted.ETHEREUM_MAINNET.chainId)).map((e=>function(e){return new ce(e.displayName,Je(e))}(e))).sort((function(e,t){const n=e.name.toLowerCase(),r=t.name.toLowerCase();return n<r?-1:n>r?1:0})).forEach((function(e){const t=new ce(e.name,e.network);e.network.isTestnet?r.push(t):n.push(t)})),new le(Ke,e,n,r)}();new class extends I{constructor({blockchain:e,networkSetting:t,refreshInterval:n,currencyCode:r,decimals:i,imageURL:a,defaultReceiveType:s,supportsMultiWallet:o,isSyncingRequired:c,isERC20Supported:l}){super({blockchain:e,networkSetting:t,refreshInterval:n,currencyCode:r,decimals:i,imageURL:a,defaultReceiveType:s,supportsMultiWallet:o,isSyncingRequired:c}),Object.assign(this,{isERC20Supported:l})}displayName(e){const t=e.asChain();return t?t.baseAssetDisplayName:"Unknown"}imageURLForNetwork(e){const t=e.asChain();return t?.baseAssetImageUrl}currencyCodeForNetwork(e){const t=e.asChain();return t?new k(t.baseAssetCurrencyCode??this.currencyCode.code):this.currencyCode}feeDecimalForNetwork(e){const t=e.asChain();return t?BigInt(t.baseAssetDecimal):this.decimals}}({blockchain:Ke,networkSetting:Qe,refreshInterval:30n,currencyCode:k.ETH,decimals:18n,imageURL:"https://wallet-api-production.s3.amazonaws.com/uploads/tokens/eth_288.png",defaultReceiveType:Ge,supportsMultiWallet:!0,isSyncingRequired:!1,isERC20Supported:!0});function Je(e){return new ae(`${L}:${e.chainId}`,e.isTestnet)}x.whitelisted.ETHEREUM_MAINNET;new We("hardhatNetwork");const Ye=new de("txSource",ue.string);new de("approvalKey",ue.string),new de("sendNFTId",ue.string),new de("analyticsId",ue.string),new de("contactRecordID",ue.string);const Xe=new Map(Qe.allNetworks.map((e=>{const t=e.network.asChain(),n=t.chainId.toString();let r=`${d}/rpc/v2/getMainnetGasPrices`;parseInt(n,10)!==x.whitelisted.ETHEREUM_MAINNET.chainId&&(r="");return[n,{name:t.displayName,rpcUrl:t.rpcUrl,gasStationUrl:r}]})));__webpack_require__(1048).Buffer;function Ze(e,t,n){const r=e.trim();if(r.length<=t+n+1)return e;const i=r.length-n;return r.substring(0,t)+"\u2026"+r.substring(i)}__webpack_require__(52326);class et{static getInheritanceTree(e){const t=[e],n=e=>{const r=Object.getPrototypeOf(e);r&&r.name&&(t.push(r),n(r))};return n(e),t}static isInherited(e,t){return e.prototype instanceof t}static filterByTarget(e,t){return t?e.filter((e=>e.target&&-1!==t.indexOf(e.target))):e}}class tt{constructor(){this.tables=[],this.trees=[],this.entityRepositories=[],this.transactionEntityManagers=[],this.transactionRepositories=[],this.namingStrategies=[],this.entitySubscribers=[],this.indices=[],this.uniques=[],this.checks=[],this.exclusions=[],this.columns=[],this.generations=[],this.relations=[],this.joinColumns=[],this.joinTables=[],this.entityListeners=[],this.relationCounts=[],this.relationIds=[],this.embeddeds=[],this.inheritances=[],this.discriminatorValues=[]}filterTables(e){return this.filterByTarget(this.tables,e)}filterColumns(e){return this.filterByTargetAndWithoutDuplicateProperties(this.columns,e)}findGenerated(e,t){return this.generations.find((n=>(Array.isArray(e)?-1!==e.indexOf(n.target):n.target===e)&&n.propertyName===t))}findTree(e){return this.trees.find((t=>Array.isArray(e)?-1!==e.indexOf(t.target):t.target===e))}filterRelations(e){return this.filterByTargetAndWithoutDuplicateRelationProperties(this.relations,e)}filterRelationIds(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationIds,e)}filterRelationCounts(e){return this.filterByTargetAndWithoutDuplicateProperties(this.relationCounts,e)}filterIndices(e){return this.indices.filter((t=>Array.isArray(e)?-1!==e.indexOf(t.target):t.target===e))}filterUniques(e){return this.uniques.filter((t=>Array.isArray(e)?-1!==e.indexOf(t.target):t.target===e))}filterChecks(e){return this.checks.filter((t=>Array.isArray(e)?-1!==e.indexOf(t.target):t.target===e))}filterExclusions(e){return this.exclusions.filter((t=>Array.isArray(e)?-1!==e.indexOf(t.target):t.target===e))}filterListeners(e){return this.filterByTarget(this.entityListeners,e)}filterEmbeddeds(e){return this.filterByTargetAndWithoutDuplicateEmbeddedProperties(this.embeddeds,e)}findJoinTable(e,t){return this.joinTables.find((n=>n.target===e&&n.propertyName===t))}filterJoinColumns(e,t){return this.joinColumns.filter((n=>n.target===e&&n.propertyName===t))}filterSubscribers(e){return this.filterByTarget(this.entitySubscribers,e)}filterNamingStrategies(e){return this.filterByTarget(this.namingStrategies,e)}filterTransactionEntityManagers(e,t){return this.transactionEntityManagers.filter((n=>(Array.isArray(e)?-1!==e.indexOf(n.target):n.target===e)&&n.methodName===t))}filterTransactionRepository(e,t){return this.transactionRepositories.filter((n=>(Array.isArray(e)?-1!==e.indexOf(n.target):n.target===e)&&n.methodName===t))}filterSingleTableChildren(e){return this.tables.filter((t=>"function"==typeof t.target&&"function"==typeof e&&et.isInherited(t.target,e)&&"entity-child"===t.type))}findInheritanceType(e){return this.inheritances.find((t=>t.target===e))}findDiscriminatorValue(e){return this.discriminatorValues.find((t=>t.target===e))}filterByTarget(e,t){return e.filter((e=>Array.isArray(t)?-1!==t.indexOf(e.target):e.target===t))}filterByTargetAndWithoutDuplicateProperties(e,t){const n=[];return e.forEach((e=>{(Array.isArray(t)?-1!==t.indexOf(e.target):e.target===t)&&(n.find((t=>t.propertyName===e.propertyName))||n.push(e))})),n}filterByTargetAndWithoutDuplicateRelationProperties(e,t){const n=[];return e.forEach((e=>{if(Array.isArray(t)?-1!==t.indexOf(e.target):e.target===t){const r=n.findIndex((t=>t.propertyName===e.propertyName));if(Array.isArray(t)&&-1!==r&&t.indexOf(e.target)<t.indexOf(n[r].target)){const t=Object.create(n[r]);t.type=e.type,n[r]=t}else-1===r&&n.push(e)}})),n}filterByTargetAndWithoutDuplicateEmbeddedProperties(e,t){const n=[];return e.forEach((e=>{if(Array.isArray(t)?-1!==t.indexOf(e.target):e.target===t){n.find((t=>t.prefix===e.prefix&&t.propertyName===e.propertyName))||n.push(e)}})),n}}class nt{static getGlobalVariable(){return"undefined"!=typeof window?window:__webpack_require__.g}static load(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: require("${e}").`);return""}static pathNormalize(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.normalize("${e}").`);return""}static pathExtname(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.extname("${e}").`);return""}static pathResolve(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: path.resolve("${e}").`);return""}static fileExist(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.existsSync("${e}").`);return!1}static dotenv(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: dotenv.config({ path: "${e}" }).`)}static getEnvVariable(e){}static readFileSync(e){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.readFileSync("${e}").`);return null}static appendFileSync(e,t){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.appendFileSync("${e}").`)}static writeFile(e,t){if("browser"===this.type)throw new Error(`This option/function is not supported in the browser environment. Failed operation: fs.writeFile("${e}").`);return Promise.reject(null)}static highlightSql(e){return e}static highlightJson(e){return e}static logInfo(e,t){console.info(e+" ",t)}static logError(e,t){console.error(e+" ",t)}static logWarn(e,t){console.warn(e+" ",t)}static log(e){console.log(e)}static warn(e){return e}}nt.type="browser";"undefined"!=typeof window&&(window.Buffer=__webpack_require__(1048).Buffer),void 0!==__webpack_require__.g&&(__webpack_require__.g.Buffer=__webpack_require__(1048).Buffer);class rt{static sha1(e){let t,n,r,i,a,s,o,c,l,u=function(e,t){return e<<t|e>>>32-t},d=function(e){let t,n,r="";for(t=7;t>=0;t--)n=e>>>4*t&15,r+=n.toString(16);return r},h=new Array(80),p=1732584193,f=4023233417,m=2562383102,y=271733878,g=3285377520,b=(e=encodeURIComponent(e)).length,v=[];for(n=0;n<b-3;n+=4)r=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),v.push(r);switch(b%4){case 0:n=2147483648;break;case 1:n=e.charCodeAt(b-1)<<24|8388608;break;case 2:n=e.charCodeAt(b-2)<<24|e.charCodeAt(b-1)<<16|32768;break;case 3:n=e.charCodeAt(b-3)<<24|e.charCodeAt(b-2)<<16|e.charCodeAt(b-1)<<8|128}for(v.push(n);v.length%16!=14;)v.push(0);for(v.push(b>>>29),v.push(b<<3&4294967295),t=0;t<v.length;t+=16){for(n=0;n<16;n++)h[n]=v[t+n];for(n=16;n<=79;n++)h[n]=u(h[n-3]^h[n-8]^h[n-14]^h[n-16],1);for(i=p,a=f,s=m,o=y,c=g,n=0;n<=19;n++)l=u(i,5)+(a&s|~a&o)+c+h[n]+1518500249&4294967295,c=o,o=s,s=u(a,30),a=i,i=l;for(n=20;n<=39;n++)l=u(i,5)+(a^s^o)+c+h[n]+1859775393&4294967295,c=o,o=s,s=u(a,30),a=i,i=l;for(n=40;n<=59;n++)l=u(i,5)+(a&s|a&o|s&o)+c+h[n]+2400959708&4294967295,c=o,o=s,s=u(a,30),a=i,i=l;for(n=60;n<=79;n++)l=u(i,5)+(a^s^o)+c+h[n]+3395469782&4294967295,c=o,o=s,s=u(a,30),a=i,i=l;p=p+i&4294967295,f=f+a&4294967295,m=m+s&4294967295,y=y+o&4294967295,g=g+c&4294967295}return l=d(p)+d(f)+d(m)+d(y)+d(g),l.toLowerCase()}}var it=__webpack_require__(24783);class at{constructor(){this.nestedSetColumnNames={left:"nsleft",right:"nsright"},this.materializedPathColumnName="mpath"}getTableName(e){return"string"!=typeof e&&(e=e.name),e.split(".").pop()}tableName(e,t){return t||(0,it.LW)(e)}closureJunctionTableName(e){return e+"_closure"}columnName(e,t,n){const r=t||e;return n.length?(0,it.xQ)(n.join("_"))+(0,it.nx)(r):r}relationName(e){return e}primaryKeyName(e,t){const n=[...t];n.sort();const r=`${this.getTableName(e).replace(".","_")}_${n.join("_")}`;return"PK_"+rt.sha1(r).substr(0,27)}uniqueConstraintName(e,t){const n=[...t];n.sort();const r=`${this.getTableName(e).replace(".","_")}_${n.join("_")}`;return"UQ_"+rt.sha1(r).substr(0,27)}relationConstraintName(e,t,n){const r=[...t];r.sort();let i=`${this.getTableName(e).replace(".","_")}_${r.join("_")}`;return n&&(i+=`_${n}`),"REL_"+rt.sha1(i).substr(0,26)}defaultConstraintName(e,t){const n=`${this.getTableName(e).replace(".","_")}_${t}`;return"DF_"+rt.sha1(n).substr(0,27)}foreignKeyName(e,t,n,r){const i=[...t];i.sort();const a=`${this.getTableName(e).replace(".","_")}_${i.join("_")}`;return"FK_"+rt.sha1(a).substr(0,27)}indexName(e,t,n){const r=[...t];r.sort();let i=`${this.getTableName(e).replace(".","_")}_${r.join("_")}`;return n&&(i+=`_${n}`),"IDX_"+rt.sha1(i).substr(0,26)}checkConstraintName(e,t,n){const r=`${this.getTableName(e).replace(".","_")}_${t}`,i="CHK_"+rt.sha1(r).substr(0,26);return n?`${i}_ENUM`:i}exclusionConstraintName(e,t){const n=`${this.getTableName(e).replace(".","_")}_${t}`;return"XCL_"+rt.sha1(n).substr(0,26)}joinColumnName(e,t){return(0,it.xQ)(e+"_"+t)}joinTableName(e,t,n,r){return(0,it.LW)(e+"_"+n.replace(/\./gi,"_")+"_"+t)}joinTableColumnDuplicationPrefix(e,t){return e+"_"+t}joinTableColumnName(e,t,n){return(0,it.xQ)(e+"_"+(n||t))}joinTableInverseColumnName(e,t,n){return this.joinTableColumnName(e,t,n)}prefixTableName(e,t){return e+t}eagerJoinRelationAlias(e,t){return e+"_"+t.replace(".","_")}}var st=__webpack_require__(26883);class ot{constructor(e){this["@instanceof"]=Symbol.for("TableColumn"),this.isNullable=!1,this.isGenerated=!1,this.isPrimary=!1,this.isUnique=!1,this.isArray=!1,this.length="",this.zerofill=!1,this.unsigned=!1,e&&(this.name=e.name,this.type=e.type||"",this.length=e.length||"",this.width=e.width,this.charset=e.charset,this.collation=e.collation,this.precision=e.precision,this.scale=e.scale,this.zerofill=e.zerofill||!1,this.unsigned=!!this.zerofill||(e.unsigned||!1),this.default=e.default,this.onUpdate=e.onUpdate,this.isNullable=e.isNullable||!1,this.isGenerated=e.isGenerated||!1,this.generationStrategy=e.generationStrategy,this.generatedIdentity=e.generatedIdentity,this.isPrimary=e.isPrimary||!1,this.isUnique=e.isUnique||!1,this.isArray=e.isArray||!1,this.comment=e.comment,this.enum=e.enum,this.enumName=e.enumName,this.primaryKeyConstraintName=e.primaryKeyConstraintName,this.asExpression=e.asExpression,this.generatedType=e.generatedType,this.spatialFeatureType=e.spatialFeatureType,this.srid=e.srid)}clone(){return new ot({name:this.name,type:this.type,length:this.length,width:this.width,charset:this.charset,collation:this.collation,precision:this.precision,scale:this.scale,zerofill:this.zerofill,unsigned:this.unsigned,enum:this.enum,enumName:this.enumName,primaryKeyConstraintName:this.primaryKeyConstraintName,asExpression:this.asExpression,generatedType:this.generatedType,default:this.default,onUpdate:this.onUpdate,isNullable:this.isNullable,isGenerated:this.isGenerated,generationStrategy:this.generationStrategy,generatedIdentity:this.generatedIdentity,isPrimary:this.isPrimary,isUnique:this.isUnique,isArray:this.isArray,comment:this.comment,spatialFeatureType:this.spatialFeatureType,srid:this.srid})}}class ct{constructor(e){this["@instanceof"]=Symbol.for("TableIndex"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.isUnique=!!e.isUnique,this.isSpatial=!!e.isSpatial,this.isFulltext=!!e.isFulltext,this.isNullFiltered=!!e.isNullFiltered,this.parser=e.parser,this.where=e.where?e.where:""}clone(){return new ct({name:this.name,columnNames:[...this.columnNames],isUnique:this.isUnique,isSpatial:this.isSpatial,isFulltext:this.isFulltext,isNullFiltered:this.isNullFiltered,parser:this.parser,where:this.where})}static create(e){return new ct({name:e.name,columnNames:e.columns.map((e=>e.databaseName)),isUnique:e.isUnique,isSpatial:e.isSpatial,isFulltext:e.isFulltext,isNullFiltered:e.isNullFiltered,parser:e.parser,where:e.where})}}class lt{constructor(e){this["@instanceof"]=Symbol.for("TableForeignKey"),this.columnNames=[],this.referencedColumnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.referencedColumnNames=e.referencedColumnNames,this.referencedDatabase=e.referencedDatabase,this.referencedSchema=e.referencedSchema,this.referencedTableName=e.referencedTableName,this.onDelete=e.onDelete,this.onUpdate=e.onUpdate,this.deferrable=e.deferrable}clone(){return new lt({name:this.name,columnNames:[...this.columnNames],referencedColumnNames:[...this.referencedColumnNames],referencedDatabase:this.referencedDatabase,referencedSchema:this.referencedSchema,referencedTableName:this.referencedTableName,onDelete:this.onDelete,onUpdate:this.onUpdate,deferrable:this.deferrable})}static create(e,t){return new lt({name:e.name,columnNames:e.columnNames,referencedColumnNames:e.referencedColumnNames,referencedDatabase:e.referencedEntityMetadata.database,referencedSchema:e.referencedEntityMetadata.schema,referencedTableName:e.referencedTablePath,onDelete:e.onDelete,onUpdate:e.onUpdate,deferrable:e.deferrable})}}class ut{static createTableColumnOptions(e,t){return{name:e.databaseName,length:t.getColumnLength(e),width:e.width,charset:e.charset,collation:e.collation,precision:e.precision,scale:e.scale,zerofill:e.zerofill,unsigned:e.unsigned,asExpression:e.asExpression,generatedType:e.generatedType,default:t.normalizeDefault(e),onUpdate:e.onUpdate,comment:e.comment,isGenerated:e.isGenerated,generationStrategy:e.generationStrategy,generatedIdentity:e.generatedIdentity,isNullable:e.isNullable,type:t.normalizeType(e),isPrimary:e.isPrimary,isUnique:t.normalizeIsUnique(e),isArray:e.isArray||!1,enum:e.enum?e.enum.map((e=>e+"")):e.enum,enumName:e.enumName,primaryKeyConstraintName:e.primaryKeyConstraintName,spatialFeatureType:e.spatialFeatureType,srid:e.srid}}}class dt{constructor(e){this["@instanceof"]=Symbol.for("TableUnique"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.deferrable=e.deferrable}clone(){return new dt({name:this.name,columnNames:[...this.columnNames],deferrable:this.deferrable})}static create(e){return new dt({name:e.name,columnNames:e.columns.map((e=>e.databaseName)),deferrable:e.deferrable})}}class ht{constructor(e){this["@instanceof"]=Symbol.for("TableCheck"),this.columnNames=[],this.name=e.name,this.columnNames=e.columnNames,this.expression=e.expression}clone(){return new ht({name:this.name,columnNames:this.columnNames?[...this.columnNames]:[],expression:this.expression})}static create(e){return new ht({name:e.name,expression:e.expression})}}class pt{constructor(e){this["@instanceof"]=Symbol.for("TableExclusion"),this.name=e.name,this.expression=e.expression}clone(){return new pt({name:this.name,expression:this.expression})}static create(e){return new pt({name:e.name,expression:e.expression})}}class ft{constructor(e){this["@instanceof"]=Symbol.for("Table"),this.columns=[],this.indices=[],this.foreignKeys=[],this.uniques=[],this.checks=[],this.exclusions=[],this.justCreated=!1,this.withoutRowid=!1,e&&(this.database=e.database,this.schema=e.schema,this.name=e.name,e.columns&&(this.columns=e.columns.map((e=>new ot(e)))),e.indices&&(this.indices=e.indices.map((e=>new ct(e)))),e.foreignKeys&&(this.foreignKeys=e.foreignKeys.map((t=>new lt({...t,referencedDatabase:(null==t?void 0:t.referencedDatabase)||e.database,referencedSchema:(null==t?void 0:t.referencedSchema)||e.schema})))),e.uniques&&(this.uniques=e.uniques.map((e=>new dt(e)))),e.checks&&(this.checks=e.checks.map((e=>new ht(e)))),e.exclusions&&(this.exclusions=e.exclusions.map((e=>new pt(e)))),void 0!==e.justCreated&&(this.justCreated=e.justCreated),e.withoutRowid&&(this.withoutRowid=e.withoutRowid),this.engine=e.engine)}get primaryColumns(){return this.columns.filter((e=>e.isPrimary))}clone(){return new ft({schema:this.schema,database:this.database,name:this.name,columns:this.columns.map((e=>e.clone())),indices:this.indices.map((e=>e.clone())),foreignKeys:this.foreignKeys.map((e=>e.clone())),uniques:this.uniques.map((e=>e.clone())),checks:this.checks.map((e=>e.clone())),exclusions:this.exclusions.map((e=>e.clone())),justCreated:this.justCreated,withoutRowid:this.withoutRowid,engine:this.engine})}addColumn(e){this.columns.push(e)}removeColumn(e){const t=this.columns.find((t=>t.name===e.name));t&&this.columns.splice(this.columns.indexOf(t),1)}addUniqueConstraint(e){if(this.uniques.push(e),1===e.columnNames.length){const t=this.columns.find((t=>t.name===e.columnNames[0]));t&&(t.isUnique=!0)}}removeUniqueConstraint(e){const t=this.uniques.find((t=>t.name===e.name));if(t&&(this.uniques.splice(this.uniques.indexOf(t),1),1===t.columnNames.length)){const e=this.columns.find((e=>e.name===t.columnNames[0]));e&&(e.isUnique=!1)}}addCheckConstraint(e){this.checks.push(e)}removeCheckConstraint(e){const t=this.checks.find((t=>t.name===e.name));t&&this.checks.splice(this.checks.indexOf(t),1)}addExclusionConstraint(e){this.exclusions.push(e)}removeExclusionConstraint(e){const t=this.exclusions.find((t=>t.name===e.name));t&&this.exclusions.splice(this.exclusions.indexOf(t),1)}addForeignKey(e){this.foreignKeys.push(e)}removeForeignKey(e){const t=this.foreignKeys.find((t=>t.name===e.name));t&&this.foreignKeys.splice(this.foreignKeys.indexOf(t),1)}addIndex(e,t=!1){if(this.indices.push(e),1===e.columnNames.length&&e.isUnique&&t){const t=this.columns.find((t=>t.name===e.columnNames[0]));t&&(t.isUnique=!0)}}removeIndex(e,t=!1){const n=this.indices.find((t=>t.name===e.name));if(n&&(this.indices.splice(this.indices.indexOf(n),1),1===n.columnNames.length&&n.isUnique&&t)){const e=this.columns.find((e=>e.name===n.columnNames[0]));e&&(e.isUnique=this.indices.some((t=>1===t.columnNames.length&&t.columnNames[0]===e.name&&!!n.isUnique)))}}findColumnByName(e){return this.columns.find((t=>t.name===e))}findColumnIndices(e){return this.indices.filter((t=>!!t.columnNames.find((t=>t===e.name))))}findColumnForeignKeys(e){return this.foreignKeys.filter((t=>!!t.columnNames.find((t=>t===e.name))))}findColumnUniques(e){return this.uniques.filter((t=>!!t.columnNames.find((t=>t===e.name))))}findColumnChecks(e){return this.checks.filter((t=>!!t.columnNames.find((t=>t===e.name))))}static create(e,t){const n=e.database===t.database?void 0:e.database,r=e.schema===t.options.schema?void 0:e.schema,i={database:e.database,schema:e.schema,name:t.buildTableName(e.tableName,r,n),withoutRowid:e.withoutRowid,engine:e.engine,columns:e.columns.filter((e=>e)).map((e=>ut.createTableColumnOptions(e,t))),indices:e.indices.filter((e=>!0===e.synchronize)).map((e=>ct.create(e))),uniques:e.uniques.map((e=>dt.create(e))),checks:e.checks.map((e=>ht.create(e))),exclusions:e.exclusions.map((e=>pt.create(e)))};return new ft(i)}}class mt{constructor(e,t,n,r){this.id=e,this.timestamp=t,this.name=n,this.instance=r}}class yt{constructor(e,t,...n){this.value=e,this.type=t,this["@instanceof"]=Symbol.for("MssqlParameter"),this.params=[],this.params=n||[]}}var gt=__webpack_require__(5471);class bt{constructor(e,t){this.connection=e,this.queryRunner=t,this.transaction="all";const{schema:n}=this.connection.driver.options,r=this.connection.driver.database;this.migrationsDatabase=r,this.migrationsSchema=n,this.migrationsTableName=e.options.migrationsTableName||"migrations",this.migrationsTable=this.connection.driver.buildTableName(this.migrationsTableName,n,r)}async executeMigration(e){return this.withQueryRunner((async t=>(await this.createMigrationsTableIfNotExist(t),await t.beforeMigration(),await e.instance.up(t),await t.afterMigration(),await this.insertExecutedMigration(t,e),e)))}async getAllMigrations(){return Promise.resolve(this.getMigrations())}async getExecutedMigrations(){return this.withQueryRunner((async e=>(await this.createMigrationsTableIfNotExist(e),await this.loadExecutedMigrations(e))))}async getPendingMigrations(){const e=await this.getAllMigrations(),t=await this.getExecutedMigrations();return e.filter((e=>!t.find((t=>t.name===e.name))))}insertMigration(e){return this.withQueryRunner((t=>this.insertExecutedMigration(t,e)))}deleteMigration(e){return this.withQueryRunner((t=>this.deleteExecutedMigration(t,e)))}async showMigrations(){let e=!1;const t=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(t);const n=await this.loadExecutedMigrations(t),r=this.getMigrations();for(const t of r){n.find((e=>e.name===t.name))?this.connection.logger.logSchemaBuild(`[X] ${t.name}`):(e=!0,this.connection.logger.logSchemaBuild(`[ ] ${t.name}`))}return this.queryRunner||await t.release(),e}async executePendingMigrations(){const e=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(e);const t=this.connection.driver.createSchemaBuilder();gt.t.isRdbmsSchemaBuilder(t)&&await t.createMetadataTableIfNecessary(e);const n=await this.loadExecutedMigrations(e);let r=this.getLatestTimestampMigration(n);const i=this.getMigrations(),a=[],s=i.filter((e=>!n.find((t=>t.name===e.name))));if(!s.length)return this.connection.logger.logSchemaBuild("No migrations are pending"),this.queryRunner||await e.release(),[];this.connection.logger.logSchemaBuild(`${n.length} migrations are already loaded in the database.`),this.connection.logger.logSchemaBuild(`${i.length} migrations were found in the source code.`),r&&this.connection.logger.logSchemaBuild(`${r.name} is the last executed migration. It was executed on ${new Date(r.timestamp).toString()}.`),this.connection.logger.logSchemaBuild(`${s.length} migrations are new migrations must be executed.`);let o=!1;"all"!==this.transaction||e.isTransactionActive||(await e.startTransaction(),o=!0);try{for(const t of s)this.fake?await this.insertExecutedMigration(e,t):("each"!==this.transaction||e.isTransactionActive||(await e.startTransaction(),o=!0),await t.instance.up(e).catch((e=>{throw this.connection.logger.logMigration(`Migration "${t.name}" failed, error: ${null==e?void 0:e.message}`),e})).then((async()=>{await this.insertExecutedMigration(e,t),"each"===this.transaction&&o&&await e.commitTransaction()})).then((()=>{a.push(t),this.connection.logger.logSchemaBuild(`Migration ${t.name} has been ${this.fake?"(fake)":""} executed successfully.`)})));"all"===this.transaction&&o&&await e.commitTransaction()}catch(t){if(o)try{await e.rollbackTransaction()}catch(e){}throw t}finally{this.queryRunner||await e.release()}return a}async undoLastMigration(){const e=this.queryRunner||this.connection.createQueryRunner();await this.createMigrationsTableIfNotExist(e);const t=await this.loadExecutedMigrations(e);let n=this.getLatestExecutedMigration(t);if(!n)return void this.connection.logger.logSchemaBuild("No migrations was found in the database. Nothing to revert!");const r=this.getMigrations().find((e=>e.name===n.name));if(!r)throw new st.VR(`No migration ${n.name} was found in the source code. Make sure you have this migration in your codebase and its included in the connection options.`);this.connection.logger.logSchemaBuild(`${t.length} migrations are already loaded in the database.`),this.connection.logger.logSchemaBuild(`${n.name} is the last executed migration. It was executed on ${new Date(n.timestamp).toString()}.`),this.connection.logger.logSchemaBuild("Now reverting it...");let i=!1;"none"===this.transaction||e.isTransactionActive||(await e.startTransaction(),i=!0);try{this.fake||(await e.beforeMigration(),await r.instance.down(e),await e.afterMigration()),await this.deleteExecutedMigration(e,r),this.connection.logger.logSchemaBuild(`Migration ${r.name} has been ${this.fake?"(fake)":""} reverted successfully.`),i&&await e.commitTransaction()}catch(t){if(i)try{await e.rollbackTransaction()}catch(e){}throw t}finally{this.queryRunner||await e.release()}}async createMigrationsTableIfNotExist(e){if("mongodb"===this.connection.driver.options.type)return;await e.hasTable(this.migrationsTable)||await e.createTable(new ft({database:this.migrationsDatabase,schema:this.migrationsSchema,name:this.migrationsTable,columns:[{name:"id",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationId}),isGenerated:!0,generationStrategy:"increment",isPrimary:!0,isNullable:!1},{name:"timestamp",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp}),isPrimary:!1,isNullable:!1},{name:"name",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}),isNullable:!1}]}))}async loadExecutedMigrations(e){if("mongodb"===this.connection.driver.options.type){const t=e;return await t.databaseConnection.db(this.connection.driver.database).collection(this.migrationsTableName).find().sort({_id:-1}).toArray()}return(await this.connection.manager.createQueryBuilder(e).select().orderBy(this.connection.driver.escape("id"),"DESC").from(this.migrationsTable,this.migrationsTableName).getRawMany()).map((e=>new mt(parseInt(e.id),parseInt(e.timestamp),e.name)))}getMigrations(){const e=this.connection.migrations.map((e=>{const t=e.name||e.constructor.name,n=parseInt(t.substr(-13),10);if(!n||isNaN(n))throw new st.VR(`${t} migration name is wrong. Migration class name should have a JavaScript timestamp appended.`);return new mt(void 0,n,t,e)}));return this.checkForDuplicateMigrations(e),e.sort(((e,t)=>e.timestamp-t.timestamp))}checkForDuplicateMigrations(e){const t=e.map((e=>e.name)),n=Array.from(new Set(t.filter(((e,n)=>t.indexOf(e)<n))));if(n.length>0)throw Error(`Duplicate migrations: ${n.join(", ")}`)}getLatestTimestampMigration(e){const t=e.map((e=>e)).sort(((e,t)=>-1*(e.timestamp-t.timestamp)));return t.length>0?t[0]:void 0}getLatestExecutedMigration(e){return e.length>0?e[0]:void 0}async insertExecutedMigration(e,t){const n={};if("mssql"===this.connection.driver.options.type?(n.timestamp=new yt(t.timestamp,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp})),n.name=new yt(t.name,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}))):(n.timestamp=t.timestamp,n.name=t.name),"mongodb"===this.connection.driver.options.type){const t=e;await t.databaseConnection.db(this.connection.driver.database).collection(this.migrationsTableName).insertOne(n)}else{const t=e.manager.createQueryBuilder();await t.insert().into(this.migrationsTable).values(n).execute()}}async deleteExecutedMigration(e,t){const n={};if("mssql"===this.connection.driver.options.type?(n.timestamp=new yt(t.timestamp,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationTimestamp})),n.name=new yt(t.name,this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.migrationName}))):(n.timestamp=t.timestamp,n.name=t.name),"mongodb"===this.connection.driver.options.type){const t=e;await t.databaseConnection.db(this.connection.driver.database).collection(this.migrationsTableName).deleteOne(n)}else{const t=e.manager.createQueryBuilder();await t.delete().from(this.migrationsTable).where(`${t.escape("timestamp")} = :timestamp`).andWhere(`${t.escape("name")} = :name`).setParameters(n).execute()}}async withQueryRunner(e){const t=this.queryRunner||this.connection.createQueryRunner();try{return e(t)}finally{this.queryRunner||await t.release()}}}var vt=__webpack_require__(57719),wt=__webpack_require__(80601);function Et(e,t,n){let r=[],i={};return function a(s){i[s]=!0,r.push(s),e[s].forEach((function(e){if(i[e]){if(r.indexOf(e)>=0)throw r.push(e),new st.VR(`Dependency Cycle Found: ${r.join(" -> ")}`)}else a(e)})),r.pop(),t&&0!==e[s].length||-1!==n.indexOf(s)||n.push(s)}}class _t{constructor(){this.nodes={},this.outgoingEdges={},this.incomingEdges={}}addNode(e,t){this.hasNode(e)||(this.nodes[e]=2===arguments.length?t:e,this.outgoingEdges[e]=[],this.incomingEdges[e]=[])}removeNode(e){this.hasNode(e)&&(delete this.nodes[e],delete this.outgoingEdges[e],delete this.incomingEdges[e],[this.incomingEdges,this.outgoingEdges].forEach((function(t){Object.keys(t).forEach((function(n){let r=t[n].indexOf(e);r>=0&&t[n].splice(r,1)}),this)})))}hasNode(e){return this.nodes.hasOwnProperty(e)}getNodeData(e){if(this.hasNode(e))return this.nodes[e];throw new st.VR(`Node does not exist: ${e}`)}setNodeData(e,t){if(!this.hasNode(e))throw new st.VR(`Node does not exist: ${e}`);this.nodes[e]=t}addDependency(e,t){if(!this.hasNode(e))throw new st.VR(`Node does not exist: ${e}`);if(!this.hasNode(t))throw new st.VR(`Node does not exist: ${t}`);return-1===this.outgoingEdges[e].indexOf(t)&&this.outgoingEdges[e].push(t),-1===this.incomingEdges[t].indexOf(e)&&this.incomingEdges[t].push(e),!0}removeDependency(e,t){let n;this.hasNode(e)&&(n=this.outgoingEdges[e].indexOf(t),n>=0&&this.outgoingEdges[e].splice(n,1)),this.hasNode(t)&&(n=this.incomingEdges[t].indexOf(e),n>=0&&this.incomingEdges[t].splice(n,1))}dependenciesOf(e,t){if(this.hasNode(e)){let n=[];Et(this.outgoingEdges,t,n)(e);let r=n.indexOf(e);return r>=0&&n.splice(r,1),n}throw new st.VR(`Node does not exist: ${e}`)}dependantsOf(e,t){if(this.hasNode(e)){let n=[];Et(this.incomingEdges,t,n)(e);let r=n.indexOf(e);return r>=0&&n.splice(r,1),n}throw new st.VR(`Node does not exist: ${e}`)}overallOrder(e){let t=this,n=[],r=Object.keys(this.nodes);if(0===r.length)return n;{let i=Et(this.outgoingEdges,!1,[]);r.forEach((function(e){i(e)}));let a=Et(this.outgoingEdges,e,n);return r.filter((function(e){return 0===t.incomingEdges[e].length})).forEach((function(e){a(e)})),n}}}var St=__webpack_require__(19108),Tt=__webpack_require__(63849),At=__webpack_require__(13149),Nt=__webpack_require__(86740);class Ct{validateMany(e,t){e.forEach((n=>this.validate(n,e,t))),this.validateDependencies(e),this.validateEagerRelations(e)}validate(e,t,n){if(!e.primaryColumns.length&&!e.isJunction)throw new vt.$(e);if(e.primaryColumns.length>1){if(!e.primaryColumns.every(((e,t,n)=>e.primaryKeyConstraintName===n[0].primaryKeyConstraintName)))throw new st.VR(`Entity ${e.name} has multiple primary columns with different constraint names. Constraint names should be the equal.`)}if("STI"===e.inheritancePattern||"entity-child"===e.tableType){if(!e.discriminatorColumn)throw new st.VR(`Entity ${e.name} using single-table inheritance, it should also have a discriminator column. Did you forget to put discriminator column options?`);if(void 0===e.discriminatorValue)throw new st.VR(`Entity ${e.name} has an undefined discriminator value. Discriminator value should be defined.`);const n=t.find((t=>t!==e&&("STI"===t.inheritancePattern||"entity-child"===t.tableType)&&t.tableName===e.tableName&&t.discriminatorValue===e.discriminatorValue&&t.inheritanceTree.some((t=>-1!==e.inheritanceTree.indexOf(t)))));if(n)throw new st.VR(`Entities ${e.name} and ${n.name} have the same discriminator values. Make sure they are different while using the @ChildEntity decorator.`)}if(e.relationCounts.forEach((e=>{if(e.relation.isManyToOne||e.relation.isOneToOne)throw new st.VR("Relation count can not be implemented on ManyToOne or OneToOne relations.")})),"mongodb"!==n.options.type&&e.columns.forEach((t=>{const r=n.normalizeType(t);if(-1===n.supportedDataTypes.indexOf(r))throw new St.E(t,r,n.options.type);if(t.length&&-1===n.withLengthColumnTypes.indexOf(r))throw new st.VR(`Column ${t.propertyName} of Entity ${e.name} does not support length property.`);if("enum"===t.type&&!t.enum&&!t.enumName)throw new st.VR(`Column "${t.propertyName}" of Entity "${e.name}" is defined as enum, but missing "enum" or "enumName" properties.`)})),Nt.I.isMySQLFamily(n)||"aurora-mysql"===n.options.type){if(e.columns.filter((e=>e.isGenerated&&"uuid"!==e.generationStrategy)).length>1)throw new st.VR(`Error in ${e.name} entity. There can be only one auto-increment column in MySql table.`)}if(Nt.I.isMySQLFamily(n)){const e=t.filter((e=>e.database));if(0===e.length&&!n.database)throw new Tt.n("database")}if("mssql"===n.options.type){if(e.columns.filter((e=>e.charset)).length>1)throw new st.VR("Character set specifying is not supported in Sql Server")}if("postgres"===n.options.type){const t=e.columns.find((e=>e.asExpression&&(!e.generatedType||"VIRTUAL"===e.generatedType)));if(t)throw new st.VR(`Column "${t.propertyName}" of Entity "${e.name}" is defined as VIRTUAL, but Postgres supports only STORED generated columns.`)}const r=e.create(void 0,{fromDeserializer:!0});e.relations.forEach((e=>{if(e.isManyToMany||e.isOneToMany){if(!1===e.persistenceEnabled)return;const t=e.getEntityValue(r);if(Array.isArray(t))throw new At.Z(e)}})),e.relations.forEach((e=>{})),e.relations.forEach((t=>{if(t.isCascadeRemove&&t.inverseRelation&&t.inverseRelation.isCascadeRemove)throw new st.VR(`Relation ${e.name}#${t.propertyName} and ${t.inverseRelation.entityMetadata.name}#${t.inverseRelation.propertyName} both has cascade remove set. This may lead to unexpected circular removals. Please set cascade remove only from one side of relationship.`)})),e.eagerRelations.forEach((e=>{}))}validateDependencies(e){const t=new _t;e.forEach((e=>{t.addNode(e.name)})),e.forEach((e=>{e.relationsWithJoinColumns.filter((e=>!e.isNullable)).forEach((n=>{t.addDependency(e.name,n.inverseEntityMetadata.name)}))}));try{t.overallOrder()}catch(e){throw new wt.j(e.toString().replace("Error: Dependency Cycle Found: ",""))}}validateEagerRelations(e){e.forEach((e=>{e.eagerRelations.forEach((t=>{if(t.inverseRelation&&t.inverseRelation.isEager)throw new st.VR(`Circular eager relations are disallowed. ${e.targetName}#${t.propertyPath} contains "eager: true", and its inverse side ${t.inverseEntityMetadata.targetName}#${t.inverseRelation.propertyPath} contains "eager: true" as well. Remove "eager: true" from one side of the relation.`)}))}))}}var Mt=__webpack_require__(81719),Rt=__webpack_require__(76965),xt=__webpack_require__(52738),kt=__webpack_require__(24611),It=__webpack_require__(93499),Ot=__webpack_require__(68625);class Pt{static createRelationMaps(e,t,n,r){return r.map((r=>{const i=t.treeParentRelation.joinColumns[0],a=i.givenDatabaseName||i.databaseName,s=r[n+"_"+t.primaryColumns[0].databaseName],o=r[n+"_"+a];return{id:e.connection.driver.prepareHydratedValue(s,t.primaryColumns[0]),parentId:e.connection.driver.prepareHydratedValue(o,i)}}))}static buildChildrenEntityTree(e,t,n,r,i){const a=e.treeChildrenRelation.propertyName;if(0===i.depth)return void(t[a]=[]);const s=e.primaryColumns[0].getEntityValue(t),o=r.filter((e=>e.parentId===s)),c=new Set(o.map((e=>e.id)));t[a]=n.filter((t=>c.has(e.primaryColumns[0].getEntityValue(t)))),t[a].forEach((t=>{Pt.buildChildrenEntityTree(e,t,n,r,{...i,depth:i.depth-1})}))}static buildParentEntityTree(e,t,n,r){const i=e.treeParentRelation.propertyName,a=e.primaryColumns[0].getEntityValue(t),s=r.find((e=>e.id===a)),o=n.find((t=>!!s&&e.primaryColumns[0].getEntityValue(t)===s.parentId));o&&(t[i]=o,Pt.buildParentEntityTree(e,t[i],n,r))}}var Lt=__webpack_require__(88126),Dt=__webpack_require__.n(Lt);class Bt{constructor(e,t,n){this.target=e,this.manager=t,this.queryRunner=n}get metadata(){return this.manager.connection.getMetadata(this.target)}createQueryBuilder(e,t){return this.manager.createQueryBuilder(this.metadata.target,e||this.metadata.targetName,t||this.queryRunner)}hasId(e){return this.manager.hasId(this.metadata.target,e)}getId(e){return this.manager.getId(this.metadata.target,e)}create(e){return this.manager.create(this.metadata.target,e)}merge(e,...t){return this.manager.merge(this.metadata.target,e,...t)}preload(e){return this.manager.preload(this.metadata.target,e)}save(e,t){return this.manager.save(this.metadata.target,e,t)}remove(e,t){return this.manager.remove(this.metadata.target,e,t)}softRemove(e,t){return this.manager.softRemove(this.metadata.target,e,t)}recover(e,t){return this.manager.recover(this.metadata.target,e,t)}insert(e){return this.manager.insert(this.metadata.target,e)}update(e,t){return this.manager.update(this.metadata.target,e,t)}upsert(e,t){return this.manager.upsert(this.metadata.target,e,t)}batchUpsert(e,t,n=50){return 0===e.length?[]:Dt()(e,n).map((e=>this.upsert(e,t)))}delete(e){return this.manager.delete(this.metadata.target,e)}deleteEntities(e,t=50){const n=e.map((e=>e.id));return Dt()(n,t).map((e=>this.delete(e)))}softDelete(e){return this.manager.softDelete(this.metadata.target,e)}isNull(){return!1}restore(e){return this.manager.restore(this.metadata.target,e)}count(e){return this.manager.count(this.metadata.target,e)}countBy(e){return this.manager.countBy(this.metadata.target,e)}async find(e){return this.manager.find(this.metadata.target,e)}async findBy(e){return this.manager.findBy(this.metadata.target,e)}findAndCount(e){return this.manager.findAndCount(this.metadata.target,e)}findAndCountBy(e){return this.manager.findAndCountBy(this.metadata.target,e)}async findByIds(e){return this.manager.findByIds(this.metadata.target,e)}async findOne(e){return this.manager.findOne(this.metadata.target,e)}async findOneBy(e){return this.manager.findOneBy(this.metadata.target,e)}async findOneById(e){return this.manager.findOneById(this.metadata.target,e)}async findOneOrFail(e){return this.manager.findOneOrFail(this.metadata.target,e)}async findOneByOrFail(e){return this.manager.findOneByOrFail(this.metadata.target,e)}query(e,t){return this.manager.query(e,t)}clear(){return this.manager.clear(this.metadata.target)}increment(e,t,n){return this.manager.increment(this.metadata.target,e,t,n)}decrement(e,t,n){return this.manager.decrement(this.metadata.target,e,t,n)}extend(e){const t=this.constructor,{target:n,manager:r,queryRunner:i}=this,a=new class extends t{}(n,r,i);return Object.assign(a,e),a}}class jt extends Bt{async findTrees(e){const t=await this.findRoots(e);return await Promise.all(t.map((t=>this.findDescendantsTree(t,e)))),t}findRoots(e){const t=this.metadata.treeParentRelation.joinColumns[0],n=t.givenDatabaseName||t.databaseName,r=this.createQueryBuilder("treeEntity");return Ot.H.applyOptionsToTreeQueryBuilder(r,e),r.where(`${(e=>this.manager.connection.driver.escape(e))("treeEntity")}.${(e=>this.manager.connection.driver.escape(e))(n)} IS NULL`).getMany()}findDescendants(e,t){const n=this.createDescendantsQueryBuilder("treeEntity","treeClosure",e);return Ot.H.applyOptionsToTreeQueryBuilder(n,t),n.getMany()}async findDescendantsTree(e,t){const n=this.createDescendantsQueryBuilder("treeEntity","treeClosure",e);Ot.H.applyOptionsToTreeQueryBuilder(n,t);const r=await n.getRawAndEntities(),i=Pt.createRelationMaps(this.manager,this.metadata,"treeEntity",r.raw);return Pt.buildChildrenEntityTree(this.metadata,e,r.entities,i,{depth:-1,...t}),e}countDescendants(e){return this.createDescendantsQueryBuilder("treeEntity","treeClosure",e).getCount()}createDescendantsQueryBuilder(e,t,n){const r=e=>this.manager.connection.driver.escape(e);if("closure-table"===this.metadata.treeType){const i=this.metadata.closureJunctionTable.descendantColumns.map((n=>r(t)+"."+r(n.propertyPath)+" = "+r(e)+"."+r(n.referencedColumn.propertyPath))).join(" AND "),a={},s=this.metadata.closureJunctionTable.ancestorColumns.map((e=>(a[e.referencedColumn.propertyName]=e.referencedColumn.getEntityValue(n),r(t)+"."+r(e.propertyPath)+" = :"+e.referencedColumn.propertyName))).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.closureJunctionTable.tableName,t,i).where(s).setParameters(a)}if("nested-set"===this.metadata.treeType){const t=e+"."+this.metadata.nestedSetLeftColumn.propertyPath+" BETWEEN joined."+this.metadata.nestedSetLeftColumn.propertyPath+" AND joined."+this.metadata.nestedSetRightColumn.propertyPath,r={},i=this.metadata.treeParentRelation.joinColumns.map((e=>{const t=e.referencedColumn.propertyPath.replace(".","_");return r[t]=e.referencedColumn.getEntityValue(n),"joined."+e.referencedColumn.propertyPath+" = :"+t})).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.targetName,"joined",t).where(i,r)}if("materialized-path"===this.metadata.treeType)return this.createQueryBuilder(e).where((t=>{const r=t.subQuery().select(`${this.metadata.targetName}.${this.metadata.materializedPathColumn.propertyPath}`,"path").from(this.metadata.target,this.metadata.targetName).whereInIds(this.metadata.getEntityIdMap(n));return Nt.I.isSQLiteFamily(this.manager.connection.driver)?`${e}.${this.metadata.materializedPathColumn.propertyPath} LIKE ${r.getQuery()} || '%'`:`${e}.${this.metadata.materializedPathColumn.propertyPath} LIKE NULLIF(CONCAT(${r.getQuery()}, '%'), '%')`}));throw new It.V("Supported only in tree entities")}findAncestors(e,t){const n=this.createAncestorsQueryBuilder("treeEntity","treeClosure",e);return Ot.H.applyOptionsToTreeQueryBuilder(n,t),n.getMany()}async findAncestorsTree(e,t){const n=this.createAncestorsQueryBuilder("treeEntity","treeClosure",e);Ot.H.applyOptionsToTreeQueryBuilder(n,t);const r=await n.getRawAndEntities(),i=Pt.createRelationMaps(this.manager,this.metadata,"treeEntity",r.raw);return Pt.buildParentEntityTree(this.metadata,e,r.entities,i),e}countAncestors(e){return this.createAncestorsQueryBuilder("treeEntity","treeClosure",e).getCount()}createAncestorsQueryBuilder(e,t,n){if("closure-table"===this.metadata.treeType){const r=this.metadata.closureJunctionTable.ancestorColumns.map((n=>t+"."+n.propertyPath+" = "+e+"."+n.referencedColumn.propertyPath)).join(" AND "),i={},a=this.metadata.closureJunctionTable.descendantColumns.map((e=>(i[e.referencedColumn.propertyName]=e.referencedColumn.getEntityValue(n),t+"."+e.propertyPath+" = :"+e.referencedColumn.propertyName))).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.closureJunctionTable.tableName,t,r).where(a).setParameters(i)}if("nested-set"===this.metadata.treeType){const t="joined."+this.metadata.nestedSetLeftColumn.propertyPath+" BETWEEN "+e+"."+this.metadata.nestedSetLeftColumn.propertyPath+" AND "+e+"."+this.metadata.nestedSetRightColumn.propertyPath,r={},i=this.metadata.treeParentRelation.joinColumns.map((e=>{const t=e.referencedColumn.propertyPath.replace(".","_");return r[t]=e.referencedColumn.getEntityValue(n),"joined."+e.referencedColumn.propertyPath+" = :"+t})).join(" AND ");return this.createQueryBuilder(e).innerJoin(this.metadata.targetName,"joined",t).where(i,r)}if("materialized-path"===this.metadata.treeType)return this.createQueryBuilder(e).where((t=>{const r=t.subQuery().select(`${this.metadata.targetName}.${this.metadata.materializedPathColumn.propertyPath}`,"path").from(this.metadata.target,this.metadata.targetName).whereInIds(this.metadata.getEntityIdMap(n));return Nt.I.isSQLiteFamily(this.manager.connection.driver)?`${r.getQuery()} LIKE ${e}.${this.metadata.materializedPathColumn.propertyPath} || '%'`:`${r.getQuery()} LIKE CONCAT(${e}.${this.metadata.materializedPathColumn.propertyPath}, '%')`}));throw new It.V("Supported only in tree entities")}extend(e){const t=this.constructor,{target:n,manager:r,queryRunner:i}=this,a=new class extends t{}(n,r,i);return Object.assign(a,e),a}}var qt=__webpack_require__(91481);class $t{transform(e,t,n,r=!1){return this.groupAndTransform(e,t,n,r),e}groupAndTransform(e,t,n,r=!1){n.nonVirtualColumns.forEach((n=>{const r=n.getEntityValue(t);void 0!==r&&n.setEntityValue(e,r)})),n.relations.length&&n.relations.forEach((n=>{let i=n.getEntityValue(e);const a=n.getEntityValue(t,r);if(void 0!==a)if(n.isOneToMany||n.isManyToMany){if(!Array.isArray(a))return;i||(i=[],n.setEntityValue(e,i)),a.forEach((e=>{let t=i.find((t=>n.inverseEntityMetadata.compareEntities(e,t)));t||(t=n.inverseEntityMetadata.create(void 0,{fromDeserializer:!0}),i.push(t)),this.groupAndTransform(t,e,n.inverseEntityMetadata,r)}))}else{if(!qt.B.isObject(a))return void(qt.B.isObject(i)||n.setEntityValue(e,a));i||(i=n.inverseEntityMetadata.create(void 0,{fromDeserializer:!0}),n.setEntityValue(e,i)),this.groupAndTransform(i,a,n.inverseEntityMetadata,r)}}))}}class Ut{constructor(e,t,n,r){this.plainEntity=e,this.metadata=t,this.parentLoadMapItem=n,this.relation=r}get target(){return this.metadata.target}get id(){return this.metadata.getEntityIdMixedMap(this.plainEntity)}}class Ft{constructor(){this.loadMapItems=[]}get mainLoadMapItem(){return this.loadMapItems.find((e=>!e.relation&&!e.parentLoadMapItem))}addLoadMap(e){this.loadMapItems.find((t=>t.target===e.target&&t.id===e.id))||this.loadMapItems.push(e)}fillEntities(e,t){t.forEach((t=>{const n=this.loadMapItems.find((n=>n.target===e&&n.metadata.compareEntities(t,n.plainEntity)));n&&(n.entity=t)}))}groupByTargetIds(){const e=[];return this.loadMapItems.forEach((t=>{let n=e.find((e=>e.target===t.target));n||(n={target:t.target,ids:[]},e.push(n)),n.ids.push(t.id)})),e}}class Vt{constructor(e){this.manager=e}async transform(e,t){if(!t.hasAllPrimaryKeys(e))return Promise.reject("Given object does not have a primary column, cannot transform it to database entity.");const n=new Ft,r=(e,i,a,s)=>{const o=new Ut(e,i,a,s);n.addLoadMap(o),i.extractRelationValuesFromEntity(e,t.relations).filter((e=>null!=e)).forEach((([e,t,n])=>r(t,n,o,e)))};return r(e,t),await Promise.all(n.groupByTargetIds().map((e=>this.manager.findByIds(e.target,e.ids).then((t=>n.fillEntities(e.target,t)))))),n.loadMapItems.forEach((e=>{e.relation&&e.entity&&e.parentLoadMapItem&&e.parentLoadMapItem.entity&&(e.relation.isManyToMany||e.relation.isOneToMany?(e.parentLoadMapItem.entity[e.relation.propertyName]||(e.parentLoadMapItem.entity[e.relation.propertyName]=[]),e.parentLoadMapItem.entity[e.relation.propertyName].push(e.entity)):e.parentLoadMapItem.entity[e.relation.propertyName]=e.entity)})),n.mainLoadMapItem?n.mainLoadMapItem.entity:void 0}}var Ht=__webpack_require__(4857),zt=__webpack_require__(72287);class Wt{get repository(){const e=this.getCustomRepositoryTarget(this);if(!e)throw new Ht.N(this.constructor);return this.manager.getRepository(e)}get treeRepository(){const e=this.getCustomRepositoryTarget(this);if(!e)throw new Ht.N(this.constructor);return this.manager.getTreeRepository(e)}createQueryBuilder(e){const t=this.getCustomRepositoryTarget(this.constructor);if(!t)throw new Ht.N(this.constructor);return this.manager.getRepository(t).createQueryBuilder(e)}createQueryBuilderFor(e,t){return this.getRepositoryFor(e).createQueryBuilder(t)}getRepositoryFor(e){return this.manager.getRepository(e)}getTreeRepositoryFor(e){return this.manager.getTreeRepository(e)}getCustomRepositoryTarget(e){const t=_i().entityRepositories.find((t=>t.target===("function"==typeof e?e:e.constructor)));if(!t)throw new zt.z(e);return t.entity}}var Kt=__webpack_require__(854);class Gt{constructor(e){this.subjects=[...e],this.metadatas=this.getUniqueMetadatas(this.subjects)}sort(e){if(!this.metadatas.length)return this.subjects;const t=[];if("delete"===e){const e=this.subjects.filter((e=>!e.entity&&!e.databaseEntity));t.push(...e),this.removeAlreadySorted(e)}const n=this.getNonNullableDependencies();let r=this.toposort(n);"insert"===e&&(r=r.reverse()),r.forEach((e=>{const n=this.subjects.filter((t=>{var n;return t.metadata.targetName===e||(null===(n=t.metadata.parentEntityMetadata)||void 0===n?void 0:n.targetName)===e}));t.push(...n),this.removeAlreadySorted(n)}));const i=this.getDependencies();let a=this.toposort(i);return"insert"===e&&(a=a.reverse()),a.forEach((e=>{const n=this.subjects.filter((t=>t.metadata.targetName===e));t.push(...n),this.removeAlreadySorted(n)})),t.push(...this.subjects),t}removeAlreadySorted(e){e.forEach((e=>{this.subjects.splice(this.subjects.indexOf(e),1)}))}getUniqueMetadatas(e){const t=[];return e.forEach((e=>{-1===t.indexOf(e.metadata)&&t.push(e.metadata)})),t}getNonNullableDependencies(){return this.metadatas.reduce(((e,t)=>(t.relationsWithJoinColumns.forEach((n=>{n.isNullable||e.push([t.targetName,n.inverseEntityMetadata.targetName])})),e)),[])}getDependencies(){return this.metadatas.reduce(((e,t)=>(t.relationsWithJoinColumns.forEach((n=>{n.inverseEntityMetadata!==t&&e.push([t.targetName,n.inverseEntityMetadata.targetName])})),e)),[])}toposort(e){const t=function(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];t.indexOf(r[0])<0&&t.push(r[0]),t.indexOf(r[1])<0&&t.push(r[1])}return t}(e);let n=t.length,r=new Array(n),i={},a=n;for(;a--;)i[a]||s(t[a],a,[]);function s(a,o,c){if(c.indexOf(a)>=0)throw new st.VR("Cyclic dependency: "+JSON.stringify(a));if(!~t.indexOf(a))throw new st.VR("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(a));if(i[o])return;i[o]=!0;let l=e.filter((function(e){return e[0]===a}));if(o=l.length){let e=c.concat(a);do{let n=l[--o][1];s(n,t.indexOf(n),e)}while(o)}r[--n]=a}return r}}Math.pow(10,8);var Qt=6e4,Jt=36e5;function Yt(e,t){var n;!function(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}(1,arguments);var r=function(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}(null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==r&&1!==r&&0!==r)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var i,a=function(e){var t,n={},r=e.split(Xt.dateTimeDelimiter);if(r.length>2)return n;/:/.test(r[0])?t=r[0]:(n.date=r[0],t=r[1],Xt.timeZoneDelimiter.test(n.date)&&(n.date=e.split(Xt.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length)));if(t){var i=Xt.timezone.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}(e);if(a.date){var s=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var i=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:null===a?i:100*a,restDateString:e.slice((r[1]||r[2]).length)}}(a.date,r);i=function(e,t){if(null===t)return new Date(NaN);var n=e.match(Zt);if(!n)return new Date(NaN);var r=!!n[4],i=nn(n[1]),a=nn(n[2])-1,s=nn(n[3]),o=nn(n[4]),c=nn(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,o,c)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var i=r.getUTCDay()||7,a=7*(t-1)+n+1-i;return r.setUTCDate(r.getUTCDate()+a),r}(t,o,c):new Date(NaN);var l=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(an[t]||(sn(e)?29:28))}(t,a,s)&&function(e,t){return t>=1&&t<=(sn(e)?366:365)}(t,i)?(l.setUTCFullYear(t,a,Math.max(i,s)),l):new Date(NaN)}(s.restDateString,s.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var o,c=i.getTime(),l=0;if(a.time&&(l=function(e){var t=e.match(en);if(!t)return NaN;var n=rn(t[1]),r=rn(t[2]),i=rn(t[3]);if(!function(e,t,n){if(24===e)return 0===t&&0===n;return n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,i))return NaN;return n*Jt+r*Qt+1e3*i}(a.time),isNaN(l)))return new Date(NaN);if(!a.timezone){var u=new Date(c+l),d=new Date(0);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return o=function(e){if("Z"===e)return 0;var t=e.match(tn);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,i))return NaN;return n*(r*Jt+i*Qt)}(a.timezone),isNaN(o)?new Date(NaN):new Date(c+l+o)}var Xt={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Zt=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,en=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,tn=/^([+-])(\d{2})(?::?(\d{2}))?$/;function nn(e){return e?parseInt(e):1}function rn(e){return e&&parseFloat(e.replace(",","."))||0}var an=[31,null,31,30,31,30,31,31,30,31,30,31];function sn(e){return e%400==0||e%4==0&&e%100!=0}class on{static normalizeHydratedDate(e){return e&&"string"==typeof e?new Date(e):e}static mixedDateToDateString(e){return e instanceof Date?this.formatZerolessValue(e.getFullYear(),4)+"-"+this.formatZerolessValue(e.getMonth()+1)+"-"+this.formatZerolessValue(e.getDate()):e}static mixedDateToDate(e,t=!1,n=!0){let r="string"==typeof e?Yt(e):e;return t&&(r=new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())),n||r.setUTCMilliseconds(0),r}static mixedDateToTimeString(e,t=!1){return e instanceof Date?this.formatZerolessValue(e.getHours())+":"+this.formatZerolessValue(e.getMinutes())+(t?"":":"+this.formatZerolessValue(e.getSeconds())):e}static mixedTimeToDate(e){if("string"==typeof e){const[t,n,r]=e.split(":"),i=new Date;return t&&i.setHours(parseInt(t)),n&&i.setMinutes(parseInt(n)),r&&i.setSeconds(parseInt(r)),i}return e}static mixedTimeToString(e,t=!1){return"string"==typeof(e=e instanceof Date?e.getHours()+":"+e.getMinutes()+(t?"":":"+e.getSeconds()):e)?e.split(":").map((e=>1===e.length?"0"+e:e)).join(":"):e}static mixedDateToDatetimeString(e,t){if("string"==typeof e&&(e=new Date(e)),e instanceof Date){let n=this.formatZerolessValue(e.getFullYear(),4)+"-"+this.formatZerolessValue(e.getMonth()+1)+"-"+this.formatZerolessValue(e.getDate())+" "+this.formatZerolessValue(e.getHours())+":"+this.formatZerolessValue(e.getMinutes())+":"+this.formatZerolessValue(e.getSeconds());t&&(n+=`.${this.formatMilliseconds(e.getMilliseconds())}`),e=n}return e}static mixedDateToUtcDatetimeString(e){return"string"==typeof e&&(e=new Date(e)),e instanceof Date?this.formatZerolessValue(e.getUTCFullYear(),4)+"-"+this.formatZerolessValue(e.getUTCMonth()+1)+"-"+this.formatZerolessValue(e.getUTCDate())+" "+this.formatZerolessValue(e.getUTCHours())+":"+this.formatZerolessValue(e.getUTCMinutes())+":"+this.formatZerolessValue(e.getUTCSeconds())+"."+this.formatMilliseconds(e.getUTCMilliseconds()):e}static simpleArrayToString(e){return Array.isArray(e)?e.map((e=>String(e))).join(","):e}static stringToSimpleArray(e){return"string"==typeof e?e.length>0?e.split(","):[]:e}static simpleJsonToString(e){return JSON.stringify(e)}static stringToSimpleJson(e){return"string"==typeof e?JSON.parse(e):e}static simpleEnumToString(e){return""+e}static stringToSimpleEnum(e,t){return t.enum&&!isNaN(e)&&t.enum.indexOf(parseInt(e))>=0&&(e=parseInt(e)),e}static formatZerolessValue(e,t=2){const n="0".repeat(t);return String(`${n}${e}`).slice(-t)}static formatMilliseconds(e){return e<10?"00"+e:e<100?"0"+e:String(e)}}var cn=__webpack_require__(33324),ln=__webpack_require__(88272),un=__webpack_require__(1048).Buffer;class dn{compute(e){e.forEach((t=>{this.computeDiffColumns(t),this.computeDiffRelationalColumns(e,t)}))}computeDiffColumns(e){e.entity&&e.metadata.columns.forEach((t=>{if(t.isVirtual||t.isDiscriminator)return;const n=e.changeMaps.find((e=>e.column===t));n&&e.changeMaps.splice(e.changeMaps.indexOf(n),1);const r=t.getEntityValue(e.entity);if(void 0!==r){if(e.databaseEntity){const n="json"!==t.type&&"jsonb"!==t.type;let i=t.getEntityValue(e.databaseEntity,n);if(t.relationMetadata){const n=t.relationMetadata.getEntityValue(e.entity);if(null!=n)return}let a=r;if(null!==r){switch(t.type){case"date":a=on.mixedDateToDateString(r);break;case"time":case"time with time zone":case"time without time zone":case"timetz":a=on.mixedDateToTimeString(r);break;case"datetime":case"datetime2":case Date:case"timestamp":case"timestamp without time zone":case"timestamp with time zone":case"timestamp with local time zone":case"timestamptz":a=on.mixedDateToUtcDatetimeString(r),i=on.mixedDateToUtcDatetimeString(i);break;case"json":case"jsonb":if(cn.m.deepCompare(r,i))return;break;case"simple-array":a=on.simpleArrayToString(r),i=on.simpleArrayToString(i);break;case"simple-enum":a=on.simpleEnumToString(r),i=on.simpleEnumToString(i);break;case"simple-json":a=on.simpleJsonToString(r),i=on.simpleJsonToString(i)}t.transformer&&(a=ln.W.transformTo(t.transformer,r))}if(un.isBuffer(a)&&un.isBuffer(i)){if(a.equals(i))return}else if(a===i)return}e.diffColumns.push(t),e.changeMaps.push({column:t,value:r})}}))}computeDiffRelationalColumns(e,t){t.entity&&t.metadata.relationsWithJoinColumns.forEach((n=>{let r=n.getEntityValue(t.entity);if(void 0===r)return;if(t.databaseEntity){let e=r;null!==e&&qt.B.isObject(e)&&(e=n.getRelationIdMap(e));const i=n.getEntityValue(t.databaseEntity);if(cn.m.compareIds(e,i))return;t.diffRelations.push(n)}const i=e.find((e=>e.mustBeInserted&&e.entity===r));i&&(r=i);const a=t.changeMaps.find((e=>e.relation===n));a?a.value=r:t.changeMaps.push({relation:n,value:r})}))}}var hn=__webpack_require__(45046),pn=__webpack_require__(83159),fn=__webpack_require__(1746);class mn extends It.V{constructor(){super("Nested sets do not support multiple root entities.")}}class yn{constructor(e){this.queryRunner=e}async insert(e){const t=e=>this.queryRunner.connection.driver.escape(e),n=this.getTableName(e.metadata.tablePath),r=t(e.metadata.nestedSetLeftColumn.databaseName),i=t(e.metadata.nestedSetRightColumn.databaseName);let a=e.metadata.treeParentRelation.getEntityValue(e.entity);!a&&e.parentSubject&&e.parentSubject.entity&&(a=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity);const s=e.metadata.getEntityIdMap(a);let o;if(s&&(o=await this.queryRunner.manager.createQueryBuilder().select(e.metadata.targetName+"."+e.metadata.nestedSetRightColumn.propertyPath,"right").from(e.metadata.target,e.metadata.targetName).whereInIds(s).getRawOne().then((e=>{const t=e?e.right:void 0;return"string"==typeof t?parseInt(t):t}))),void 0!==o)await this.queryRunner.query(`UPDATE ${n} SET ${r} = CASE WHEN ${r} > ${o} THEN ${r} + 2 ELSE ${r} END,${i} = ${i} + 2 WHERE ${i} >= ${o}`),cn.m.mergeDeep(e.insertedValueSet,e.metadata.nestedSetLeftColumn.createValueMap(o),e.metadata.nestedSetRightColumn.createValueMap(o+1));else{if(!await this.isUniqueRootEntity(e,a))throw new mn;cn.m.mergeDeep(e.insertedValueSet,e.metadata.nestedSetLeftColumn.createValueMap(1),e.metadata.nestedSetRightColumn.createValueMap(2))}}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let n=e.databaseEntity;if(!n&&t&&(n=e.metadata.treeChildrenRelation.getEntityValue(t).find((t=>Object.entries(e.identifier).every((([e,n])=>t[e]===n))))),void 0===n||void 0===t)return;const r=e.metadata.treeParentRelation.getEntityValue(n),i=e.metadata.getEntityIdMap(r),a=e.metadata.getEntityIdMap(t);if(!cn.m.compareIds(i,a))if(t){const t=e=>this.queryRunner.connection.driver.escape(e),r=this.getTableName(e.metadata.tablePath),i=t(e.metadata.nestedSetLeftColumn.databaseName),s=t(e.metadata.nestedSetRightColumn.databaseName),o=e.metadata.getEntityIdMap(n);let c,l;if(o&&(c=(await this.getNestedSetIds(e.metadata,o))[0]),a&&(l=(await this.getNestedSetIds(e.metadata,a))[0]),void 0!==c&&void 0!==l){const e=l.left>c.left,t=c.right-c.left+1;let n;n=e?l.left-c.right:l.right-c.left;const a=`WHEN ${i} >= ${c.left} AND ${i} < ${c.right} THEN ${i} + ${n} `,o=`WHEN ${s} > ${c.left} AND ${s} <= ${c.right} THEN ${s} + ${n} `;e?await this.queryRunner.query(`UPDATE ${r} SET ${i} = CASE WHEN ${i} > ${c.right} AND ${i} <= ${l.left} THEN ${i} - ${t} `+a+`ELSE ${i} END, `+`${s} = CASE `+`WHEN ${s} > ${c.right} AND `+`${s} < ${l.left} `+`THEN ${s} - ${t} `+o+`ELSE ${s} END`):await this.queryRunner.query(`UPDATE ${r} SET ${i} = CASE WHEN ${i} < ${c.left} AND ${i} > ${l.right} THEN ${i} + ${t} `+a+`ELSE ${i} END, `+`${s} = CASE `+`WHEN ${s} < ${c.left} AND `+`${s} >= ${l.right} `+`THEN ${s} + ${t} `+o+`ELSE ${s} END`)}}else{if(!await this.isUniqueRootEntity(e,t))throw new mn}}async remove(e){Array.isArray(e)||(e=[e]);const t=e[0].metadata,n=e=>this.queryRunner.connection.driver.escape(e),r=this.getTableName(t.tablePath),i=n(t.nestedSetLeftColumn.databaseName),a=n(t.nestedSetRightColumn.databaseName);let s=[];for(const n of e){const e=t.getEntityIdMap(n.entity);e&&s.push(e)}let o=await this.getNestedSetIds(t,s);for(const e of o){const t=e.right-e.left+1;await this.queryRunner.query(`UPDATE ${r} SET ${i} = CASE WHEN ${i} > ${e.left} THEN ${i} - ${t} ELSE ${i} END, ${a} = CASE WHEN ${a} > ${e.right} THEN ${a} - ${t} ELSE ${a} END`)}}getNestedSetIds(e,t){const n={left:`${e.targetName}.${e.nestedSetLeftColumn.propertyPath}`,right:`${e.targetName}.${e.nestedSetRightColumn.propertyPath}`},r=this.queryRunner.manager.createQueryBuilder();return Object.entries(n).forEach((([e,t])=>{r.addSelect(t,e)})),r.from(e.target,e.targetName).whereInIds(t).orderBy(n.right,"DESC").getRawMany().then((e=>{const t=[];for(const r of e){const e={};for(const t of Object.keys(n)){const n=r?r[t]:void 0;e[t]="string"==typeof n?parseInt(n):n}t.push(e)}return t}))}async isUniqueRootEntity(e,t){const n=e=>this.queryRunner.connection.driver.escape(e),r=this.getTableName(e.metadata.tablePath),i=[],a=e.metadata.treeParentRelation.joinColumns.map((e=>{const r=n(e.databaseName),a=e.getEntityValue(t);if(null==a)return`${r} IS NULL`;i.push(a);return`${r} = ${this.queryRunner.connection.driver.createParameter("entity_"+e.databaseName,i.length-1)}`})).join(" AND "),s="count",o=await this.queryRunner.query(`SELECT COUNT(1) AS ${n(s)} FROM ${r} WHERE ${a}`,i,!0);return 0===parseInt(o.records[0][s])}getTableName(e){return e.split(".").map((e=>""===e?e:this.queryRunner.connection.driver.escape(e))).join(".")}}var gn=__webpack_require__(34165);class bn{constructor(e){this.queryRunner=e}async insert(e){const t={};e.metadata.closureJunctionTable.ancestorColumns.forEach((n=>{t[n.databaseName]=e.identifier})),e.metadata.closureJunctionTable.descendantColumns.forEach((n=>{t[n.databaseName]=e.identifier})),await this.queryRunner.manager.createQueryBuilder().insert().into(e.metadata.closureJunctionTable.tablePath).values(t).updateEntity(!1).callListeners(!1).execute();let n=e.metadata.treeParentRelation.getEntityValue(e.entity);if(!n&&e.parentSubject&&e.parentSubject.entity&&(n=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity),n){const t=e=>this.queryRunner.connection.driver.escape(e),r=this.getTableName(e.metadata.closureJunctionTable.tablePath),i=[],a=e.metadata.closureJunctionTable.ancestorColumns.map((e=>t(e.databaseName))),s=e.metadata.closureJunctionTable.descendantColumns.map((e=>t(e.databaseName))),o=e.metadata.primaryColumns.map((t=>(i.push(t.getEntityValue(e.insertedValueSet?e.insertedValueSet:e.entity)),this.queryRunner.connection.driver.createParameter("child_entity_"+t.databaseName,i.length-1)))),c=e.metadata.closureJunctionTable.descendantColumns.map((r=>{const a=t(r.databaseName),s=r.referencedColumn.getEntityValue(n);if(!s)throw new gn.T(e.metadata.name);i.push(s);return`${a} = ${this.queryRunner.connection.driver.createParameter("parent_entity_"+r.referencedColumn.databaseName,i.length-1)}`}));await this.queryRunner.query(`INSERT INTO ${r} (${[...a,...s].join(", ")}) SELECT ${a.join(", ")}, ${o.join(", ")} FROM ${r} WHERE ${c.join(" AND ")}`,i)}}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let n=e.databaseEntity;if(!n&&t&&(n=e.metadata.treeChildrenRelation.getEntityValue(t).find((t=>Object.entries(e.identifier).every((([e,n])=>t[e]===n))))),void 0===n||void 0===t)return;const r=e.metadata.treeParentRelation.getEntityValue(n),i=e.metadata.getEntityIdMap(r),a=e.metadata.getEntityIdMap(t);if(cn.m.compareIds(i,a))return;const s=e=>this.queryRunner.connection.driver.escape(e),o=e.metadata.closureJunctionTable,c=o.ancestorColumns.map((e=>s(e.databaseName))),l=o.descendantColumns.map((e=>s(e.databaseName))),u=(e,t)=>{const n=`sub${t}`,r=e.createQueryBuilder().select(l.join(", ")).from(o.tablePath,n);for(const e of o.ancestorColumns)r.andWhere(`${s(n)}.${s(e.databaseName)} = :value_${e.referencedColumn.databaseName}`);return e.createQueryBuilder().select(l.join(", ")).from(`(${r.getQuery()})`,t).setParameters(r.getParameters()).getQuery()},d={};for(const t of e.metadata.primaryColumns)d[`value_${t.databaseName}`]=n[t.databaseName];if(await this.queryRunner.manager.createQueryBuilder().delete().from(o.tablePath).where((e=>`(${l.join(", ")}) IN (${u(e,"descendant")})`)).andWhere((e=>`(${c.join(", ")}) NOT IN (${u(e,"ancestor")})`)).setParameters(d).execute(),t){const r=[],i=this.getTableName(o.tablePath),a=s("supertree"),u=s("subtree"),d=[...c.map((e=>`${a}.${e}`)),...l.map((e=>`${u}.${e}`))],h=e.metadata.closureJunctionTable.ancestorColumns.map((e=>{const t=s(e.databaseName),i=e.referencedColumn.getEntityValue(n);r.push(i);const a=this.queryRunner.connection.driver.createParameter("entity_"+e.referencedColumn.databaseName,r.length-1);return`${u}.${t} = ${a}`})),p=e.metadata.closureJunctionTable.descendantColumns.map((n=>{const i=s(n.databaseName),o=n.referencedColumn.getEntityValue(t);if(!o)throw new gn.T(e.metadata.name);r.push(o);const c=this.queryRunner.connection.driver.createParameter("parent_entity_"+n.referencedColumn.databaseName,r.length-1);return`${a}.${i} = ${c}`}));await this.queryRunner.query(`INSERT INTO ${i} (${[...c,...l].join(", ")}) SELECT ${d.join(", ")} FROM ${i} AS ${a}, ${i} AS ${u} WHERE ${[...h,...p].join(" AND ")}`,r)}}async remove(e){if("mssql"!==this.queryRunner.connection.driver.options.type)return;Array.isArray(e)||(e=[e]);const t=e=>this.queryRunner.connection.driver.escape(e),n=e.map((e=>e.identifier)),r=e[0].metadata.closureJunctionTable,i=e=>e.map((e=>{const r=n.map((t=>t[e.referencedColumn.databaseName]));return`${t(e.databaseName)} IN (${r.join(", ")})`})).join(" AND "),a=i(r.ancestorColumns),s=i(r.descendantColumns);await this.queryRunner.manager.createQueryBuilder().delete().from(r.tablePath).where(a).orWhere(s).execute()}getTableName(e){return e.split(".").map((e=>""===e?e:this.queryRunner.connection.driver.escape(e))).join(".")}}class vn{constructor(e){this.queryRunner=e}async insert(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.insertedValueSet?e.parentSubject.insertedValueSet:e.parentSubject.entity);const n=e.metadata.getEntityIdMap(t);let r="";n&&(r=await this.getEntityPath(e,n));const i=e.metadata.treeParentRelation.joinColumns.map((t=>t.referencedColumn.getEntityValue(e.insertedValueSet))).join("_");await this.queryRunner.manager.createQueryBuilder().update(e.metadata.target).set({[e.metadata.materializedPathColumn.propertyPath]:r+i+"."}).where(e.identifier).execute()}async update(e){let t=e.metadata.treeParentRelation.getEntityValue(e.entity);!t&&e.parentSubject&&e.parentSubject.entity&&(t=e.parentSubject.entity);let n=e.databaseEntity;!n&&t&&(n=e.metadata.treeChildrenRelation.getEntityValue(t).find((t=>Object.entries(e.identifier).every((([e,n])=>t[e]===n)))));const r=e.metadata.treeParentRelation.getEntityValue(n),i=e.metadata.getEntityIdMap(r),a=e.metadata.getEntityIdMap(t);if(cn.m.compareIds(i,a))return;let s="";a&&(s=await this.getEntityPath(e,a));let o="";i&&(o=await this.getEntityPath(e,i)||"");const c=e.metadata.treeParentRelation.joinColumns.map((e=>e.referencedColumn.getEntityValue(n))).join("_"),l=e.metadata.materializedPathColumn.propertyPath;await this.queryRunner.manager.createQueryBuilder().update(e.metadata.target).set({[l]:()=>`REPLACE(${l}, '${o}${c}.', '${s}${c}.')`}).where(`${l} LIKE :path`,{path:`${o}${c}.%`}).execute()}getEntityPath(e,t){return this.queryRunner.manager.createQueryBuilder().select(e.metadata.targetName+"."+e.metadata.materializedPathColumn.propertyPath,"path").from(e.metadata.target,e.metadata.targetName).whereInIds(t).getRawOne().then((e=>e?e.path:""))}}class wn{constructor(e,t,n){this.hasExecutableOperations=!1,this.insertSubjects=[],this.updateSubjects=[],this.removeSubjects=[],this.softRemoveSubjects=[],this.recoverSubjects=[],this.queryRunner=e,this.allSubjects=t,this.options=n,this.validate(),this.recompute()}async execute(){let e;this.options&&!1===this.options.listeners||(e=this.broadcastBeforeEventsForAll(),e.promises.length>0&&await Promise.all(e.promises)),e&&e.count>0&&(this.insertSubjects.forEach((e=>e.recompute())),this.updateSubjects.forEach((e=>e.recompute())),this.removeSubjects.forEach((e=>e.recompute())),this.softRemoveSubjects.forEach((e=>e.recompute())),this.recoverSubjects.forEach((e=>e.recompute())),this.recompute()),this.insertSubjects=new Gt(this.insertSubjects).sort("insert"),await this.executeInsertOperations(),this.updateSubjects=this.allSubjects.filter((e=>e.mustBeUpdated)),await this.executeUpdateOperations(),this.removeSubjects=new Gt(this.removeSubjects).sort("delete"),await this.executeRemoveOperations(),this.softRemoveSubjects=this.allSubjects.filter((e=>e.mustBeSoftRemoved)),await this.executeSoftRemoveOperations(),this.recoverSubjects=this.allSubjects.filter((e=>e.mustBeRecovered)),await this.executeRecoverOperations(),await this.updateSpecialColumnsInPersistedEntities(),this.options&&!1===this.options.listeners||(e=this.broadcastAfterEventsForAll(),e.promises.length>0&&await Promise.all(e.promises))}validate(){this.allSubjects.forEach((e=>{if(e.mustBeUpdated&&e.mustBeRemoved)throw new pn.j(e)}))}recompute(){(new dn).compute(this.allSubjects),this.insertSubjects=this.allSubjects.filter((e=>e.mustBeInserted)),this.updateSubjects=this.allSubjects.filter((e=>e.mustBeUpdated)),this.removeSubjects=this.allSubjects.filter((e=>e.mustBeRemoved)),this.softRemoveSubjects=this.allSubjects.filter((e=>e.mustBeSoftRemoved)),this.recoverSubjects=this.allSubjects.filter((e=>e.mustBeRecovered)),this.hasExecutableOperations=this.insertSubjects.length>0||this.updateSubjects.length>0||this.removeSubjects.length>0||this.softRemoveSubjects.length>0||this.recoverSubjects.length>0}broadcastBeforeEventsForAll(){const e=new fn.M;return this.insertSubjects.length&&this.insertSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastBeforeInsertEvent(e,t.metadata,t.entity))),this.updateSubjects.length&&this.updateSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastBeforeUpdateEvent(e,t.metadata,t.entity,t.databaseEntity,t.diffColumns,t.diffRelations))),this.removeSubjects.length&&this.removeSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastBeforeRemoveEvent(e,t.metadata,t.entity,t.databaseEntity))),this.softRemoveSubjects.length&&this.softRemoveSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastBeforeSoftRemoveEvent(e,t.metadata,t.entity,t.databaseEntity))),this.recoverSubjects.length&&this.recoverSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastBeforeRecoverEvent(e,t.metadata,t.entity,t.databaseEntity))),e}broadcastAfterEventsForAll(){const e=new fn.M;return this.insertSubjects.length&&this.insertSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastAfterInsertEvent(e,t.metadata,t.entity))),this.updateSubjects.length&&this.updateSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastAfterUpdateEvent(e,t.metadata,t.entity,t.databaseEntity,t.diffColumns,t.diffRelations))),this.removeSubjects.length&&this.removeSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastAfterRemoveEvent(e,t.metadata,t.entity,t.databaseEntity))),this.softRemoveSubjects.length&&this.softRemoveSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastAfterSoftRemoveEvent(e,t.metadata,t.entity,t.databaseEntity))),this.recoverSubjects.length&&this.recoverSubjects.forEach((t=>this.queryRunner.broadcaster.broadcastAfterRecoverEvent(e,t.metadata,t.entity,t.databaseEntity))),e}async executeInsertOperations(){const[e,t]=this.groupBulkSubjects(this.insertSubjects,"insert");for(const n of t){const t=e[n],r=[],i=[],a=[];if("mongodb"===this.queryRunner.connection.driver.options.type?t.forEach((e=>{e.metadata.createDateColumn&&e.entity&&(e.entity[e.metadata.createDateColumn.databaseName]=new Date),e.metadata.updateDateColumn&&e.entity&&(e.entity[e.metadata.updateDateColumn.databaseName]=new Date),e.createValueSetAndPopChangeMap(),i.push(e),r.push(e.entity)})):"oracle"===this.queryRunner.connection.driver.options.type?t.forEach((e=>{a.push(e)})):t.forEach((e=>{0===e.changeMaps.length||e.metadata.treeType||"oracle"===this.queryRunner.connection.driver.options.type||"sap"===this.queryRunner.connection.driver.options.type?a.push(e):(i.push(e),r.push(e.createValueSetAndPopChangeMap()))})),gt.t.isMongoEntityManager(this.queryRunner.manager)){const e=await this.queryRunner.manager.insert(t[0].metadata.target,r);t.forEach(((t,n)=>{t.identifier=e.identifiers[n],t.generatedMap=e.generatedMaps[n],t.insertedValueSet=r[n]}))}else{if(r.length>0){const e=await this.queryRunner.manager.createQueryBuilder().insert().into(t[0].metadata.target).values(r).updateEntity(!this.options||!1!==this.options.reload).callListeners(!1).execute();i.forEach(((t,n)=>{t.identifier=e.identifiers[n],t.generatedMap=e.generatedMaps[n],t.insertedValueSet=r[n]}))}if(a.length>0)for(const e of a)e.insertedValueSet=e.createValueSetAndPopChangeMap(),"nested-set"===e.metadata.treeType&&await new yn(this.queryRunner).insert(e),await this.queryRunner.manager.createQueryBuilder().insert().into(e.metadata.target).values(e.insertedValueSet).updateEntity(!this.options||!1!==this.options.reload).callListeners(!1).execute().then((t=>{e.identifier=t.identifiers[0],e.generatedMap=t.generatedMaps[0]})),"closure-table"===e.metadata.treeType?await new bn(this.queryRunner).insert(e):"materialized-path"===e.metadata.treeType&&await new vn(this.queryRunner).insert(e)}t.forEach((e=>{e.generatedMap&&e.metadata.columns.forEach((t=>{const n=t.getEntityValue(e.generatedMap);if(null!=n){const r=this.queryRunner.connection.driver.prepareHydratedValue(n,t);t.setEntityValue(e.generatedMap,r)}}))}))}}async executeUpdateOperations(){const e=async e=>{if(!e.identifier)throw new hn.S(e);if(gt.t.isMongoEntityManager(this.queryRunner.manager)){const t=this.cloneMongoSubjectEntity(e);e.metadata.objectIdColumn&&e.metadata.objectIdColumn.propertyName&&delete t[e.metadata.objectIdColumn.propertyName],e.metadata.createDateColumn&&e.metadata.createDateColumn.propertyName&&delete t[e.metadata.createDateColumn.propertyName],e.metadata.updateDateColumn&&e.metadata.updateDateColumn.propertyName&&(t[e.metadata.updateDateColumn.propertyName]=new Date);const n=this.queryRunner.manager;await n.update(e.metadata.target,e.identifier,t)}else{const t=e.createValueSetAndPopChangeMap();switch(e.metadata.treeType){case"nested-set":await new yn(this.queryRunner).update(e);break;case"closure-table":await new bn(this.queryRunner).update(e);break;case"materialized-path":await new vn(this.queryRunner).update(e)}const n=this.queryRunner.manager.createQueryBuilder().update(e.metadata.target).set(t).updateEntity(!this.options||!1!==this.options.reload).callListeners(!1);e.entity?n.whereEntity(e.identifier):n.where(e.identifier);let r=(await n.execute()).generatedMaps[0];r&&(e.metadata.columns.forEach((e=>{const t=e.getEntityValue(r);if(null!=t){const n=this.queryRunner.connection.driver.prepareHydratedValue(t,e);e.setEntityValue(r,n)}})),e.generatedMap||(e.generatedMap={}),Object.assign(e.generatedMap,r))}},t=[],n=[];for(const e of this.updateSubjects)"nested-set"===e.metadata.treeType?t.push(e):n.push(e);const r=new Promise((async(n,r)=>{for(const n of t)try{await e(n)}catch(e){r(e)}n()}));await Promise.all([...n.map(e),r])}async executeRemoveOperations(){const[e,t]=this.groupBulkSubjects(this.removeSubjects,"delete");for(const n of t){const t=e[n],r=t.map((e=>{if(!e.identifier)throw new hn.S(e);return e.identifier}));if(gt.t.isMongoEntityManager(this.queryRunner.manager)){const e=this.queryRunner.manager;await e.delete(t[0].metadata.target,r)}else{switch(t[0].metadata.treeType){case"nested-set":await new yn(this.queryRunner).remove(t);break;case"closure-table":await new bn(this.queryRunner).remove(t)}await this.queryRunner.manager.createQueryBuilder().delete().from(t[0].metadata.target).where(r).callListeners(!1).execute()}}}cloneMongoSubjectEntity(e){const t={};if(e.entity)for(const n of e.metadata.columns)cn.m.mergeDeep(t,n.getEntityValueMap(e.entity));return t}async executeSoftRemoveOperations(){await Promise.all(this.softRemoveSubjects.map((async e=>{if(!e.identifier)throw new hn.S(e);let t;if(gt.t.isMongoEntityManager(this.queryRunner.manager)){const n=this.cloneMongoSubjectEntity(e);e.metadata.objectIdColumn&&e.metadata.objectIdColumn.propertyName&&delete n[e.metadata.objectIdColumn.propertyName],e.metadata.createDateColumn&&e.metadata.createDateColumn.propertyName&&delete n[e.metadata.createDateColumn.propertyName],e.metadata.updateDateColumn&&e.metadata.updateDateColumn.propertyName&&(n[e.metadata.updateDateColumn.propertyName]=new Date),e.metadata.deleteDateColumn&&e.metadata.deleteDateColumn.propertyName&&(n[e.metadata.deleteDateColumn.propertyName]=new Date);const r=this.queryRunner.manager;t=await r.update(e.metadata.target,e.identifier,n)}else{const n=this.queryRunner.manager.createQueryBuilder().softDelete().from(e.metadata.target).updateEntity(!this.options||!1!==this.options.reload).callListeners(!1);e.entity?n.whereEntity(e.identifier):n.where(e.identifier),t=await n.execute()}e.generatedMap=t.generatedMaps[0],e.generatedMap&&e.metadata.columns.forEach((t=>{const n=t.getEntityValue(e.generatedMap);if(null!=n){const r=this.queryRunner.connection.driver.prepareHydratedValue(n,t);t.setEntityValue(e.generatedMap,r)}}))})))}async executeRecoverOperations(){await Promise.all(this.recoverSubjects.map((async e=>{if(!e.identifier)throw new hn.S(e);let t;if(gt.t.isMongoEntityManager(this.queryRunner.manager)){const n=this.cloneMongoSubjectEntity(e);e.metadata.objectIdColumn&&e.metadata.objectIdColumn.propertyName&&delete n[e.metadata.objectIdColumn.propertyName],e.metadata.createDateColumn&&e.metadata.createDateColumn.propertyName&&delete n[e.metadata.createDateColumn.propertyName],e.metadata.updateDateColumn&&e.metadata.updateDateColumn.propertyName&&(n[e.metadata.updateDateColumn.propertyName]=new Date),e.metadata.deleteDateColumn&&e.metadata.deleteDateColumn.propertyName&&(n[e.metadata.deleteDateColumn.propertyName]=null);const r=this.queryRunner.manager;t=await r.update(e.metadata.target,e.identifier,n)}else{const n=this.queryRunner.manager.createQueryBuilder().restore().from(e.metadata.target).updateEntity(!this.options||!1!==this.options.reload).callListeners(!1);e.entity?n.whereEntity(e.identifier):n.where(e.identifier),t=await n.execute()}e.generatedMap=t.generatedMaps[0],e.generatedMap&&e.metadata.columns.forEach((t=>{const n=t.getEntityValue(e.generatedMap);if(null!=n){const r=this.queryRunner.connection.driver.prepareHydratedValue(n,t);t.setEntityValue(e.generatedMap,r)}}))})))}updateSpecialColumnsInPersistedEntities(){this.insertSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.insertSubjects),this.updateSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.updateSubjects),this.softRemoveSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.softRemoveSubjects),this.recoverSubjects.length&&this.updateSpecialColumnsInInsertedAndUpdatedEntities(this.recoverSubjects),this.removeSubjects.length&&this.removeSubjects.forEach((e=>{e.entity&&e.metadata.primaryColumns.forEach((t=>{t.setEntityValue(e.entity,void 0)}))})),this.allSubjects.forEach((e=>{e.entity&&(e.metadata.relationIds.forEach((t=>{t.setValue(e.entity)})),gt.t.isMongoEntityManager(this.queryRunner.manager)&&e.metadata.objectIdColumn&&e.metadata.objectIdColumn.databaseName&&e.metadata.objectIdColumn.databaseName!==e.metadata.objectIdColumn.propertyName&&delete e.entity[e.metadata.objectIdColumn.databaseName])}))}updateSpecialColumnsInInsertedAndUpdatedEntities(e){e.forEach((e=>{e.entity&&(e.metadata.columns.forEach((t=>{if(!(e.metadata.childEntityMetadatas.length>0&&-1!==e.metadata.childEntityMetadatas.map((e=>e.target)).indexOf(t.target)||t.isVirtual)){if(t.isNullable){void 0===t.getEntityValue(e.entity)&&t.setEntityValue(e.entity,null)}e.updatedRelationMaps.length>0&&e.updatedRelationMaps.forEach((t=>{t.relation.joinColumns.forEach((n=>{!0!==n.isVirtual&&n.setEntityValue(e.entity,qt.B.isObject(t.value)?n.referencedColumn.getEntityValue(t.value):t.value)}))}))}})),e.generatedMap&&this.queryRunner.manager.merge(e.metadata.target,e.entity,e.generatedMap))}))}groupBulkSubjects(e,t){const n={},r=[],i=e.some((e=>e.metadata.getInsertionReturningColumns().length>0)),a="delete"===t||this.queryRunner.connection.driver.isReturningSqlSupported("insert")||!1===i;return e.forEach(((e,t)=>{const i=a||e.metadata.isJunction?e.metadata.name:e.metadata.name+"_"+t;n[i]?n[i].push(e):(n[i]=[e],r.push(i))})),[n,r]}}var En=__webpack_require__(11866),_n=__webpack_require__(1048).Buffer;class Sn{constructor(e){this["@instanceof"]=Symbol.for("Subject"),this.identifier=void 0,this.entityWithFulfilledIds=void 0,this.databaseEntityLoaded=!1,this.changeMaps=[],this.canBeInserted=!1,this.canBeUpdated=!1,this.mustBeRemoved=!1,this.canBeSoftRemoved=!1,this.canBeRecovered=!1,this.updatedRelationMaps=[],this.diffColumns=[],this.diffRelations=[],this.metadata=e.metadata,this.entity=e.entity,this.parentSubject=e.parentSubject,void 0!==e.canBeInserted&&(this.canBeInserted=e.canBeInserted),void 0!==e.canBeUpdated&&(this.canBeUpdated=e.canBeUpdated),void 0!==e.mustBeRemoved&&(this.mustBeRemoved=e.mustBeRemoved),void 0!==e.canBeSoftRemoved&&(this.canBeSoftRemoved=e.canBeSoftRemoved),void 0!==e.canBeRecovered&&(this.canBeRecovered=e.canBeRecovered),void 0!==e.identifier&&(this.identifier=e.identifier),void 0!==e.changeMaps&&this.changeMaps.push(...e.changeMaps),this.recompute()}get mustBeInserted(){return this.canBeInserted&&!this.databaseEntity}get mustBeUpdated(){return this.canBeUpdated&&this.identifier&&(!1===this.databaseEntityLoaded||this.databaseEntityLoaded&&this.databaseEntity)&&this.changeMaps.length>0}get mustBeSoftRemoved(){return this.canBeSoftRemoved&&this.identifier&&(!1===this.databaseEntityLoaded||this.databaseEntityLoaded&&this.databaseEntity)}get mustBeRecovered(){return this.canBeRecovered&&this.identifier&&(!1===this.databaseEntityLoaded||this.databaseEntityLoaded&&this.databaseEntity)}createValueSetAndPopChangeMap(){const e=[],t=this.changeMaps.reduce(((t,n)=>{let r,i=n.value;if(gt.t.isSubject(i)&&(i=i.insertedValueSet?i.insertedValueSet:i.entity),this.metadata.isJunction&&n.column)r=n.column.createValueMap(n.column.referencedColumn.getEntityValue(i));else if(n.column)r=n.column.createValueMap(i);else if(n.relation)if(qt.B.isObject(i)&&!_n.isBuffer(i)){const a=n.relation.getRelationIdMap(i);if(void 0===a)return e.push(n),this.canBeUpdated=!0,t;r=n.relation.createValueMap(a),this.updatedRelationMaps.push({relation:n.relation,value:a})}else r=n.relation.createValueMap(i),this.updatedRelationMaps.push({relation:n.relation,value:i});return cn.m.mergeDeep(t,r),t}),{});return this.changeMaps=e,t}recompute(){this.entity?(this.entityWithFulfilledIds=Object.assign({},this.entity),this.parentSubject&&this.metadata.primaryColumns.forEach((e=>{if(e.relationMetadata&&e.relationMetadata.inverseEntityMetadata===this.parentSubject.metadata){const t=e.referencedColumn.getEntityValue(this.parentSubject.entity);e.setEntityValue(this.entityWithFulfilledIds,t)}})),this.identifier=this.metadata.getEntityIdMap(this.entityWithFulfilledIds)):this.databaseEntity&&(this.identifier=this.metadata.getEntityIdMap(this.databaseEntity))}}var Tn=__webpack_require__(28028),An=__webpack_require__(45200);class Nn{constructor(e){this["@instanceof"]=Symbol.for("EntityMetadata"),this.childEntityMetadatas=[],this.inheritanceTree=[],this.tableType="regular",this.withoutRowid=!1,this.synchronize=!0,this.hasNonNullableRelations=!1,this.isJunction=!1,this.isAlwaysUsingConstructor=!0,this.isClosureJunction=!1,this.hasMultiplePrimaryKeys=!1,this.hasUUIDGeneratedColumns=!1,this.ownColumns=[],this.columns=[],this.ancestorColumns=[],this.descendantColumns=[],this.nonVirtualColumns=[],this.ownerColumns=[],this.inverseColumns=[],this.generatedColumns=[],this.primaryColumns=[],this.ownRelations=[],this.relations=[],this.eagerRelations=[],this.lazyRelations=[],this.oneToOneRelations=[],this.ownerOneToOneRelations=[],this.oneToManyRelations=[],this.manyToOneRelations=[],this.manyToManyRelations=[],this.ownerManyToManyRelations=[],this.relationsWithJoinColumns=[],this.relationIds=[],this.relationCounts=[],this.foreignKeys=[],this.embeddeds=[],this.allEmbeddeds=[],this.ownIndices=[],this.indices=[],this.uniques=[],this.ownUniques=[],this.checks=[],this.exclusions=[],this.ownListeners=[],this.listeners=[],this.afterLoadListeners=[],this.beforeInsertListeners=[],this.afterInsertListeners=[],this.beforeUpdateListeners=[],this.afterUpdateListeners=[],this.beforeRemoveListeners=[],this.beforeSoftRemoveListeners=[],this.beforeRecoverListeners=[],this.afterRemoveListeners=[],this.afterSoftRemoveListeners=[],this.afterRecoverListeners=[],this.connection=e.connection,this.inheritanceTree=e.inheritanceTree||[],this.inheritancePattern=e.inheritancePattern,this.treeType=e.tableTree?e.tableTree.type:void 0,this.treeOptions=e.tableTree?e.tableTree.options:void 0,this.parentClosureEntityMetadata=e.parentClosureEntityMetadata,this.tableMetadataArgs=e.args,this.target=this.tableMetadataArgs.target,this.tableType=this.tableMetadataArgs.type,this.expression=this.tableMetadataArgs.expression,this.withoutRowid=this.tableMetadataArgs.withoutRowid,this.dependsOn=this.tableMetadataArgs.dependsOn}create(e,t){const n=!(!t||!0!==t.pojo);let r;return r="function"!=typeof this.target||n?{}:!(null==t?void 0:t.fromDeserializer)||this.isAlwaysUsingConstructor?new this.target:Object.create(this.target.prototype),this.connection.options.typename&&(r[this.connection.options.typename]=this.targetName),this.lazyRelations.forEach((t=>this.connection.relationLoader.enableLazyLoad(t,r,e))),r}hasId(e){return!!e&&this.primaryColumns.every((t=>{const n=t.getEntityValue(e);return null!=n&&""!==n}))}hasAllPrimaryKeys(e){return this.primaryColumns.every((t=>{const n=t.getEntityValue(e);return null!=n}))}ensureEntityIdMap(e){if(qt.B.isObject(e))return e;if(this.hasMultiplePrimaryKeys)throw new Tn.m(this,e);return this.primaryColumns[0].createValueMap(e)}getEntityIdMap(e){if(e)return Nn.getValueMap(e,this.primaryColumns,{skipNulls:!0})}getEntityIdMixedMap(e){if(!e)return e;const t=this.getEntityIdMap(e);return this.hasMultiplePrimaryKeys?t:t?this.primaryColumns[0].getEntityValue(t):t}compareEntities(e,t){const n=this.getEntityIdMap(e);if(!n)return!1;const r=this.getEntityIdMap(t);return!!r&&cn.m.compareIds(n,r)}findColumnWithPropertyName(e){return this.columns.find((t=>t.propertyName===e))}findColumnWithDatabaseName(e){return this.columns.find((t=>t.databaseName===e))}hasColumnWithPropertyPath(e){return this.columns.some((t=>t.propertyPath===e))||this.hasRelationWithPropertyPath(e)}findColumnWithPropertyPath(e){const t=this.columns.find((t=>t.propertyPath===e));if(t)return t;const n=this.relations.find((t=>t.propertyPath===e));return n&&1===n.joinColumns.length?n.joinColumns[0]:void 0}findColumnWithPropertyPathStrict(e){return this.columns.find((t=>t.propertyPath===e))}findColumnsWithPropertyPath(e){const t=this.columns.find((t=>t.propertyPath===e));if(t)return[t];const n=this.findRelationWithPropertyPath(e);return n&&n.joinColumns?n.joinColumns:[]}hasRelationWithPropertyPath(e){return this.relations.some((t=>t.propertyPath===e))}findRelationWithPropertyPath(e){return this.relations.find((t=>t.propertyPath===e))}hasEmbeddedWithPropertyPath(e){return this.allEmbeddeds.some((t=>t.propertyPath===e))}findEmbeddedWithPropertyPath(e){return this.allEmbeddeds.find((t=>t.propertyPath===e))}mapPropertyPathsToColumns(e){return e.map((e=>{const t=this.findColumnWithPropertyPath(e);if(null==t)throw new An.K(e,this);return t}))}extractRelationValuesFromEntity(e,t){const n=[];return t.forEach((t=>{const r=t.getEntityValue(e);Array.isArray(r)?r.forEach((e=>n.push([t,e,this.getInverseEntityMetadata(e,t)]))):r&&n.push([t,r,this.getInverseEntityMetadata(r,t)])})),n}getInverseEntityMetadata(e,t){const n=t.inverseEntityMetadata.childEntityMetadatas.find((t=>t.target===e.constructor));return n||t.inverseEntityMetadata}static createPropertyPath(e,t,n=""){const r=[];return Object.keys(t).forEach((i=>{const a=n?n+"."+i:i;if(e.hasEmbeddedWithPropertyPath(a)){const n=this.createPropertyPath(e,t[i],a);r.push(...n)}else{const e=n?n+"."+i:i;r.push(e)}})),r}static difference(e,t){return e.filter((e=>!t.find((t=>cn.m.compareIds(e,t)))))}static getValueMap(e,t,n){return t.reduce(((t,r)=>{const i=r.getEntityValueMap(e,n);if(void 0!==t&&null!=i)return cn.m.mergeDeep(t,i)}),{})}build(){var e;const t=this.connection.namingStrategy,n=this.connection.options.entityPrefix,r=this.connection.options.entitySkipConstructor;this.engine=this.tableMetadataArgs.engine,this.database="entity-child"===this.tableMetadataArgs.type&&this.parentEntityMetadata?this.parentEntityMetadata.database:this.tableMetadataArgs.database,this.tableMetadataArgs.schema?this.schema=this.tableMetadataArgs.schema:"entity-child"===this.tableMetadataArgs.type&&this.parentEntityMetadata?this.schema=this.parentEntityMetadata.schema:(null===(e=this.connection.options)||void 0===e?void 0:e.hasOwnProperty("schema"))&&(this.schema=this.connection.options.schema),this.givenTableName="entity-child"===this.tableMetadataArgs.type&&this.parentEntityMetadata?this.parentEntityMetadata.givenTableName:this.tableMetadataArgs.name,this.synchronize=!1!==this.tableMetadataArgs.synchronize,this.targetName="function"==typeof this.tableMetadataArgs.target?this.tableMetadataArgs.target.name:this.tableMetadataArgs.target,"closure-junction"===this.tableMetadataArgs.type?this.tableNameWithoutPrefix=t.closureJunctionTableName(this.givenTableName):"entity-child"===this.tableMetadataArgs.type&&this.parentEntityMetadata?this.tableNameWithoutPrefix=t.tableName(this.parentEntityMetadata.targetName,this.parentEntityMetadata.givenTableName):(this.tableNameWithoutPrefix=t.tableName(this.targetName,this.givenTableName),"junction"===this.tableMetadataArgs.type&&this.connection.driver.maxAliasLength&&this.connection.driver.maxAliasLength>0&&this.tableNameWithoutPrefix.length>this.connection.driver.maxAliasLength&&(this.tableNameWithoutPrefix=(0,it.ml)(this.tableNameWithoutPrefix,{separator:"_",segmentLength:3}))),this.tableName=n?t.prefixTableName(n,this.tableNameWithoutPrefix):this.tableNameWithoutPrefix,this.target=this.target?this.target:this.tableName,this.name=this.targetName?this.targetName:this.tableName,this.expression=this.tableMetadataArgs.expression,this.withoutRowid=!0===this.tableMetadataArgs.withoutRowid,this.tablePath=this.connection.driver.buildTableName(this.tableName,this.schema,this.database),this.orderBy="function"==typeof this.tableMetadataArgs.orderBy?this.tableMetadataArgs.orderBy(this.propertiesMap):this.tableMetadataArgs.orderBy,void 0!==r&&(this.isAlwaysUsingConstructor=!r),this.isJunction="closure-junction"===this.tableMetadataArgs.type||"junction"===this.tableMetadataArgs.type,this.isClosureJunction="closure-junction"===this.tableMetadataArgs.type}registerColumn(e){-1===this.ownColumns.indexOf(e)&&(this.ownColumns.push(e),this.columns=this.embeddeds.reduce(((e,t)=>e.concat(t.columnsFromTree)),this.ownColumns),this.primaryColumns=this.columns.filter((e=>e.isPrimary)),this.hasMultiplePrimaryKeys=this.primaryColumns.length>1,this.hasUUIDGeneratedColumns=this.columns.filter((e=>e.isGenerated||"uuid"===e.generationStrategy)).length>0,this.propertiesMap=this.createPropertiesMap(),this.childEntityMetadatas&&this.childEntityMetadatas.forEach((t=>t.registerColumn(e))))}createPropertiesMap(){const e={};return this.columns.forEach((t=>cn.m.mergeDeep(e,t.createValueMap(t.propertyPath)))),this.relations.forEach((t=>cn.m.mergeDeep(e,t.createValueMap(t.propertyPath)))),e}getInsertionReturningColumns(){return this.columns.filter((e=>void 0!==e.default||e.isGenerated||e.isCreateDate||e.isUpdateDate||e.isDeleteDate||e.isVersion))}}class Cn{constructor(e){this.subjects=e}build(){this.subjects.forEach((e=>{e.metadata.oneToManyRelations.forEach((t=>{!1!==t.persistenceEnabled&&this.buildForSubjectRelation(e,t)}))}))}buildForSubjectRelation(e,t){let n=[];if(e.databaseEntity){const r=t.getEntityValue(e.databaseEntity);r&&(n=r.map((e=>t.inverseEntityMetadata.getEntityIdMap(e))))}let r=t.getEntityValue(e.entity);if(null===r&&(r=[]),void 0===r)return;const i=[];r.forEach((r=>{let a=t.inverseEntityMetadata.getEntityIdMap(r),s=this.subjects.find((e=>e.entity===r));if(s&&(a=s.identifier),!a){if(!s)return;return void s.changeMaps.push({relation:t.inverseRelation,value:e})}n.find((e=>cn.m.compareIds(a,e)))||(s||(s=new Sn({metadata:t.inverseEntityMetadata,parentSubject:e,canBeUpdated:!0,identifier:a}),this.subjects.push(s)),s.changeMaps.push({relation:t.inverseRelation,value:e})),i.push(a)})),Nn.difference(n,i).forEach((n=>{const r=new Sn({metadata:t.inverseEntityMetadata,parentSubject:e,identifier:n});t.inverseRelation&&"nullify"!==t.inverseRelation.orphanedRowAction?"delete"===t.inverseRelation.orphanedRowAction?r.mustBeRemoved=!0:"soft-delete"===t.inverseRelation.orphanedRowAction&&(r.canBeSoftRemoved=!0):(r.canBeUpdated=!0,r.changeMaps=[{relation:t.inverseRelation,value:null}]),this.subjects.push(r)}))}}class Mn{constructor(e){this.subjects=e}build(){this.subjects.forEach((e=>{e.metadata.oneToOneRelations.forEach((t=>{t.isOwning||!1===t.persistenceEnabled||this.buildForSubjectRelation(e,t)}))}))}buildForSubjectRelation(e,t){let n;e.databaseEntity&&(n=t.getEntityValue(e.databaseEntity));let r=t.getEntityValue(e.entity);if(void 0===r)return;if(null===r){if(n){const r=new Sn({metadata:t.inverseEntityMetadata,parentSubject:e,canBeUpdated:!0,identifier:n,changeMaps:[{relation:t.inverseRelation,value:null}]});this.subjects.push(r)}return}let i=t.inverseEntityMetadata.getEntityIdMap(r),a=this.subjects.find((e=>!!e.entity&&e.entity===r));if(a&&(i=a.identifier),!i){if(!a)return;a.changeMaps.push({relation:t.inverseRelation,value:e})}n&&cn.m.compareIds(i,n)||(a||(a=new Sn({metadata:t.inverseEntityMetadata,canBeUpdated:!0,identifier:i}),this.subjects.push(a)),a.changeMaps.push({relation:t.inverseRelation,value:e}))}}class Rn{constructor(e){this.subjects=e}build(){this.subjects.forEach((e=>{e.entity&&e.metadata.manyToManyRelations.forEach((t=>{!1!==t.persistenceEnabled&&this.buildForSubjectRelation(e,t)}))}))}buildForAllRemoval(e){e.databaseEntity&&e.metadata.manyToManyRelations.forEach((t=>{if(!1===t.persistenceEnabled)return;t.getEntityValue(e.databaseEntity).forEach((n=>{const r=new Sn({metadata:t.junctionEntityMetadata,parentSubject:e,mustBeRemoved:!0,identifier:this.buildJunctionIdentifier(e,t,n)});this.subjects.push(r)}))}))}buildForSubjectRelation(e,t){let n=[];e.databaseEntity&&(n=t.getEntityValue(e.databaseEntity));let r=t.getEntityValue(e.entity);if(null===r&&(r=[]),!Array.isArray(r))return;r.forEach((r=>{let i=t.inverseEntityMetadata.getEntityIdMap(r);const a=this.subjects.find((e=>e.entity===r));if(a&&(i=a.identifier),!i&&!a)return;if(n.find((e=>cn.m.compareIds(e,i))))return;const s=t.isOwning?e:a||r,o=t.isOwning?a||r:e,c=new Sn({metadata:t.junctionEntityMetadata,parentSubject:e,canBeInserted:!0});this.subjects.push(c),t.junctionEntityMetadata.ownerColumns.forEach((e=>{c.changeMaps.push({column:e,value:s})})),t.junctionEntityMetadata.inverseColumns.forEach((e=>{c.changeMaps.push({column:e,value:o})}))}));const i=[];r.forEach((e=>{let n=t.inverseEntityMetadata.getEntityIdMap(e);const r=this.subjects.find((t=>t.entity===e));r&&(n=r.identifier),null!=n&&i.push(n)}));n.filter((e=>!i.find((t=>cn.m.compareIds(t,e))))).forEach((n=>{const r=new Sn({metadata:t.junctionEntityMetadata,parentSubject:e,mustBeRemoved:!0,identifier:this.buildJunctionIdentifier(e,t,n)});this.subjects.push(r)}))}buildJunctionIdentifier(e,t,n){const r=t.isOwning?e.entity:n,i=t.isOwning?n:e.entity,a={};return t.junctionEntityMetadata.ownerColumns.forEach((e=>{cn.m.mergeDeep(a,e.createValueMap(e.referencedColumn.getEntityValue(r)))})),t.junctionEntityMetadata.inverseColumns.forEach((e=>{cn.m.mergeDeep(a,e.createValueMap(e.referencedColumn.getEntityValue(i)))})),a}}class xn{constructor(e,t){this.queryRunner=e,this.subjects=t}async load(e){const t=this.groupByEntityTargets().map((async t=>{const n=[],r=[];if(t.subjects.forEach((e=>{!e.databaseEntity&&e.identifier&&(n.push(e.identifier),r.push(e))})),!n.length)return;const i=[];"save"===e||"soft-remove"===e||"recover"===e?t.subjects.forEach((e=>{e.metadata.relations.forEach((t=>{void 0!==t.getEntityValue(e.entityWithFulfilledIds)&&-1===i.indexOf(t.propertyPath)&&i.push(t.propertyPath)}))})):i.push(...t.subjects[0].metadata.manyToManyRelations.map((e=>e.propertyPath)));const a={loadEagerRelations:!1,loadRelationIds:{relations:i,disableMixedMap:!0},withDeleted:!0};let s=[];if("mongodb"===this.queryRunner.connection.driver.options.type){const e=this.queryRunner.manager.getRepository(t.target);s=await e.findByIds(n,a)}else s=await this.queryRunner.manager.getRepository(t.target).createQueryBuilder().setFindOptions(a).whereInIds(n).getMany();s.forEach((e=>{this.findByPersistEntityLike(t.target,e).forEach((t=>{t.databaseEntity=e,t.identifier||(t.identifier=t.metadata.hasAllPrimaryKeys(e)?t.metadata.getEntityIdMap(e):void 0)}))}));for(let e of r)e.databaseEntityLoaded=!0}));await Promise.all(t)}findByPersistEntityLike(e,t){return this.subjects.filter((n=>!!n.entity&&(n.entity===t||n.metadata.target===e&&n.metadata.compareEntities(n.entityWithFulfilledIds,t))))}groupByEntityTargets(){return this.subjects.reduce(((e,t)=>{let n=e.find((e=>e.target===t.metadata.target));return n||(n={target:t.metadata.target,subjects:[]},e.push(n)),n.subjects.push(t),e}),[])}}class kn{constructor(e){this.allSubjects=e}build(e,t){e.metadata.extractRelationValuesFromEntity(e.entity,e.metadata.relations).forEach((([n,r,i])=>{if(null==r||!n.isCascadeInsert&&!n.isCascadeUpdate&&!n.isCascadeSoftRemove&&!n.isCascadeRecover)return;if(!qt.B.isObject(r))return;const a=this.findByPersistEntityLike(i.target,r);if(a)return!1===a.canBeInserted&&(a.canBeInserted=!0===n.isCascadeInsert&&"save"===t),!1===a.canBeUpdated&&(a.canBeUpdated=!0===n.isCascadeUpdate&&"save"===t),!1===a.canBeSoftRemoved&&(a.canBeSoftRemoved=!0===n.isCascadeSoftRemove&&"soft-remove"===t),void(!1===a.canBeRecovered&&(a.canBeRecovered=!0===n.isCascadeRecover&&"recover"===t));const s=new Sn({metadata:i,parentSubject:e,entity:r,canBeInserted:!0===n.isCascadeInsert&&"save"===t,canBeUpdated:!0===n.isCascadeUpdate&&"save"===t,canBeSoftRemoved:!0===n.isCascadeSoftRemove&&"soft-remove"===t,canBeRecovered:!0===n.isCascadeRecover&&"recover"===t});this.allSubjects.push(s),this.build(s,t)}))}findByPersistEntityLike(e,t){return this.allSubjects.find((n=>!!n.entity&&(n.entity===t||n.metadata.target===e&&n.metadata.compareEntities(n.entityWithFulfilledIds,t))))}}class In{constructor(e,t,n,r,i,a){this.connection=e,this.queryRunner=t,this.mode=n,this.target=r,this.entity=i,this.options=a}async execute(){if(!this.entity||"object"!=typeof this.entity)return Promise.reject(new Kt.k(this.mode,this.entity));await Promise.resolve();const e=this.queryRunner||this.connection.createQueryRunner();let t=e.data;this.options&&this.options.data&&(e.data=this.options.data);try{const t=Array.isArray(this.entity)?this.entity:[this.entity],n=this.options&&this.options.chunk&&this.options.chunk>0?cn.m.chunk(t,this.options.chunk):[t],r=await Promise.all(n.map((async t=>{const n=[];t.forEach((e=>{const t=this.target?this.target:e.constructor;if(t===Object)throw new En.u(this.mode);let r=this.connection.getMetadata(t);if("STI"===r.inheritancePattern&&r.childEntityMetadatas.length>0){const t=r.childEntityMetadatas.find((t=>e.constructor===t.target));t&&(r=t)}n.push(new Sn({metadata:r,entity:e,canBeInserted:"save"===this.mode,canBeUpdated:"save"===this.mode,mustBeRemoved:"remove"===this.mode,canBeSoftRemoved:"soft-remove"===this.mode,canBeRecovered:"recover"===this.mode}))}));const r=new kn(n);return n.forEach((e=>{r.build(e,this.mode)})),await new xn(e,n).load(this.mode),"save"===this.mode||"soft-remove"===this.mode||"recover"===this.mode?(new Cn(n).build(),new Mn(n).build(),new Rn(n).build()):n.forEach((e=>{e.mustBeRemoved&&new Rn(n).buildForAllRemoval(e)})),new wn(e,n,this.options)}))),i=r.filter((e=>e.hasExecutableOperations));if(0===i.length)return;let a=!1;try{e.isTransactionActive||this.options&&!1===this.options.transaction||(a=!0,await e.startTransaction());for(const e of i)await e.execute();!0===a&&await e.commitTransaction()}catch(t){if(a)try{await e.rollbackTransaction()}catch(e){}throw t}}finally{e.data=t,this.queryRunner||await e.release()}}}class On{constructor(e,t){this["@instanceof"]=Symbol.for("EntityManager"),this.repositories=[],this.treeRepositories=[],this.plainObjectToEntityTransformer=new $t,this.connection=e,t&&(this.queryRunner=t,qt.B.assign(this.queryRunner,{manager:this}))}async transaction(e,t){const n="string"==typeof e?e:void 0,r="function"==typeof e?e:t;if(!r)throw new st.VR("Transaction method requires callback in second parameter if isolation level is supplied.");if(this.queryRunner&&this.queryRunner.isReleased)throw new Rt.h;const i=this.queryRunner||this.connection.createQueryRunner();try{await i.startTransaction(n);const e=await r(i.manager);return await i.commitTransaction(),e}catch(e){try{await i.rollbackTransaction()}catch(e){}throw e}finally{this.queryRunner||await i.release()}}async query(e,t){return this.connection.query(e,t,this.queryRunner)}createQueryBuilder(e,t,n){return t?this.connection.createQueryBuilder(e,t,n||this.queryRunner):this.connection.createQueryBuilder(e||n||this.queryRunner)}hasId(e,t){const n=2===arguments.length?e:e.constructor,r=2===arguments.length?t:e;return this.connection.getMetadata(n).hasId(r)}getId(e,t){const n=2===arguments.length?e:e.constructor,r=2===arguments.length?t:e;return this.connection.getMetadata(n).getEntityIdMixedMap(r)}create(e,t){const n=this.connection.getMetadata(e);if(!t)return n.create(this.queryRunner);if(Array.isArray(t))return t.map((t=>this.create(e,t)));const r=n.create(this.queryRunner);return this.plainObjectToEntityTransformer.transform(r,t,n,!0),r}merge(e,t,...n){const r=this.connection.getMetadata(e);return n.forEach((e=>this.plainObjectToEntityTransformer.transform(t,e,r))),t}async preload(e,t){const n=this.connection.getMetadata(e),r=new Vt(this.connection.manager),i=await r.transform(t,n);if(i)return this.merge(e,i,t)}save(e,t,n){let r=arguments.length>1&&("function"==typeof e||gt.t.isEntitySchema(e)||"string"==typeof e)?e:void 0;const i=r?t:e,a=r?n:t;return gt.t.isEntitySchema(r)&&(r=r.options.name),Array.isArray(i)&&0===i.length?Promise.resolve(i):new In(this.connection,this.queryRunner,"save",r,i,a).execute().then((()=>i))}remove(e,t,n){const r=arguments.length>1&&("function"==typeof e||gt.t.isEntitySchema(e)||"string"==typeof e)?e:void 0,i=r?t:e,a=r?n:t;return Array.isArray(i)&&0===i.length?Promise.resolve(i):new In(this.connection,this.queryRunner,"remove",r,i,a).execute().then((()=>i))}softRemove(e,t,n){let r=arguments.length>1&&("function"==typeof e||gt.t.isEntitySchema(e)||"string"==typeof e)?e:void 0;const i=r?t:e,a=r?n:t;return gt.t.isEntitySchema(r)&&(r=r.options.name),Array.isArray(i)&&0===i.length?Promise.resolve(i):new In(this.connection,this.queryRunner,"soft-remove",r,i,a).execute().then((()=>i))}recover(e,t,n){let r=arguments.length>1&&("function"==typeof e||gt.t.isEntitySchema(e)||"string"==typeof e)?e:void 0;const i=r?t:e,a=r?n:t;return gt.t.isEntitySchema(r)&&(r=r.options.name),Array.isArray(i)&&0===i.length?Promise.resolve(i):new In(this.connection,this.queryRunner,"recover",r,i,a).execute().then((()=>i))}async insert(e,t){return this.createQueryBuilder().insert().into(e).values(t).execute()}async upsert(e,t,n){const r=this.connection.getMetadata(e);let i,a;i=Array.isArray(n)?{conflictPaths:n}:n,a=Array.isArray(t)?t:[t];const s=r.mapPropertyPathsToColumns(i.conflictPaths),o=r.columns.filter((e=>!s.includes(e)&&a.some((t=>void 0!==e.getEntityValue(t)))));return this.createQueryBuilder().insert().into(e).values(a).orUpdate([...s,...o].map((e=>e.databaseName)),s.map((e=>e.databaseName)),{skipUpdateIfNoValuesChanged:i.skipUpdateIfNoValuesChanged}).execute()}update(e,t,n){return null==t||""===t||Array.isArray(t)&&0===t.length?Promise.reject(new st.VR("Empty criteria(s) are not allowed for the update method.")):"string"==typeof t||"number"==typeof t||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().update(e).set(n).whereInIds(t).execute():this.createQueryBuilder().update(e).set(n).where(t).execute()}delete(e,t){return null==t||""===t||Array.isArray(t)&&0===t.length?Promise.reject(new st.VR("Empty criteria(s) are not allowed for the delete method.")):"string"==typeof t||"number"==typeof t||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().delete().from(e).whereInIds(t).execute():this.createQueryBuilder().delete().from(e).where(t).execute()}softDelete(e,t){return null==t||""===t||Array.isArray(t)&&0===t.length?Promise.reject(new st.VR("Empty criteria(s) are not allowed for the delete method.")):"string"==typeof t||"number"==typeof t||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().softDelete().from(e).whereInIds(t).execute():this.createQueryBuilder().softDelete().from(e).where(t).execute()}restore(e,t){return null==t||""===t||Array.isArray(t)&&0===t.length?Promise.reject(new st.VR("Empty criteria(s) are not allowed for the delete method.")):"string"==typeof t||"number"==typeof t||t instanceof Date||Array.isArray(t)?this.createQueryBuilder().restore().from(e).whereInIds(t).execute():this.createQueryBuilder().restore().from(e).where(t).execute()}count(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,Ot.H.extractFindManyOptionsAlias(t)||n.name).setFindOptions(t||{}).getCount()}countBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t}).getCount()}async find(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,Ot.H.extractFindManyOptionsAlias(t)||n.name).setFindOptions(t||{}).getMany()}async findBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t}).getMany()}findAndCount(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,Ot.H.extractFindManyOptionsAlias(t)||n.name).setFindOptions(t||{}).getManyAndCount()}findAndCountBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t}).getManyAndCount()}async findByIds(e,t){if(!t.length)return Promise.resolve([]);const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).andWhereInIds(t).getMany()}async findOne(e,t){let n=this.connection.getMetadata(e).name;if(t&&t.join&&(n=t.join.alias),!t.where)throw new Error("You must provide selection conditions in order to find a single row.");return this.createQueryBuilder(e,n).setFindOptions({...t,take:1}).getOne()}async findOneBy(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({where:t,take:1}).getOne()}async findOneById(e,t){const n=this.connection.getMetadata(e);return this.createQueryBuilder(e,n.name).setFindOptions({take:1}).whereInIds(n.ensureEntityIdMap(t)).getOne()}async findOneOrFail(e,t){return this.findOne(e,t).then((n=>null===n?Promise.reject(new Mt.p(e,t)):Promise.resolve(n)))}async findOneByOrFail(e,t){return this.findOneBy(e,t).then((n=>null===n?Promise.reject(new Mt.p(e,t)):Promise.resolve(n)))}async clear(e){const t=this.connection.getMetadata(e),n=this.queryRunner||this.connection.createQueryRunner();try{return await n.clearTable(t.tablePath)}finally{this.queryRunner||await n.release()}}async increment(e,t,n,r){const i=this.connection.getMetadata(e),a=i.findColumnWithPropertyPath(n);if(!a)throw new st.VR(`Column ${n} was not found in ${i.targetName} entity.`);if(isNaN(Number(r)))throw new st.VR(`Value "${r}" is not a number.`);const s=n.split(".").reduceRight(((e,t)=>({[t]:e})),(()=>this.connection.driver.escape(a.databaseName)+" + "+r));return this.createQueryBuilder(e,"entity").update(e).set(s).where(t).execute()}async decrement(e,t,n,r){const i=this.connection.getMetadata(e),a=i.findColumnWithPropertyPath(n);if(!a)throw new st.VR(`Column ${n} was not found in ${i.targetName} entity.`);if(isNaN(Number(r)))throw new st.VR(`Value "${r}" is not a number.`);const s=n.split(".").reduceRight(((e,t)=>({[t]:e})),(()=>this.connection.driver.escape(a.databaseName)+" - "+r));return this.createQueryBuilder(e,"entity").update(e).set(s).where(t).execute()}getRepository(e){const t=this.repositories.find((t=>t.target===e));if(t)return t;if("mongodb"===this.connection.driver.options.type){const t=new kt.MongoRepository(e,this,this.queryRunner);return this.repositories.push(t),t}{const t=new Bt(e,this,this.queryRunner);return this.repositories.push(t),t}}getTreeRepository(e){if(!1===this.connection.driver.treeSupport)throw new st.ku(this.connection.driver);const t=this.treeRepositories.find((t=>t.target===e));if(t)return t;const n=new jt(e,this,this.queryRunner);return this.treeRepositories.push(n),n}getMongoRepository(e){return this.connection.getMongoRepository(e)}withRepository(e){const t=e.constructor,{target:n,manager:r,queryRunner:i,...a}=e;return Object.assign(new t(e.target,this),{...a})}getCustomRepository(e){const t=_i().entityRepositories.find((t=>t.target===("function"==typeof e?e:e.constructor)));if(!t)throw new st.zB(e);const n=t.entity?this.connection.getMetadata(t.entity):void 0,r=new t.target(this,n);if(r instanceof Wt)r.manager||(r.manager=this);else{if(!n)throw new st.IU(e);r.manager=this,r.metadata=n}return r}async release(){if(!this.queryRunner)throw new xt.e;return this.queryRunner.release()}}class Pn extends On{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("SqljsEntityManager"),this.driver=e.driver}async loadDatabase(e){await this.driver.load(e)}async saveDatabase(e){await this.driver.save(e)}exportDatabase(){return this.driver.export()}}var Ln=__webpack_require__(49015),Dn=__webpack_require__(41598);const Bn=(e,t)=>n=>{if(gt.t.isFindOperator(t))switch(t.type){case"not":if(gt.t.isFindOperator(t._value)){const r=jn(t._value,t.value);return Bn(e,r)(n)}return n[e]!==t.value;case"equal":return n[e]===t.value;case"lessThan":return n[e]<t.value;case"lessThanOrEqual":return n[e]<=t.value;case"moreThan":return n[e]>t.value;case"moreThanOrEqual":return n[e]>=t.value;case"between":return n[e]>=t.value[0]&&n[e]<=t.value[1];case"notBetween":return n[e]<t.value[0]||n[e]>t.value[1];case"in":case"any":return"string"==typeof n[e]?t.value.map((e=>e.toString().toLowerCase())).includes(n[e].toLowerCase()):t.value.includes(n[e]);case"exclude":return"string"==typeof n[e]?!t.value.map((e=>e.toString().toLowerCase())).includes(n[e].toLowerCase()):!t.value.includes(n[e]);case"isNull":return null===n[e]||void 0===n[e];case"notNull":return null!==n[e]&&void 0!==n[e];case"arrayContains":case"arrayContainedBy":case"arrayOverlap":case"raw":case"ilike":case"like":throw new Error("Not supported for IndexedDB");default:return!1}return n[e]===t},jn=(e,t)=>{return"lessThan"===e.type?(n=t,new Dn.q("moreThanOrEqual",n)):"lessThanOrEqual"===e.type?function(e){return new Dn.q("moreThan",e)}(t):"moreThan"===e.type?function(e){return new Dn.q("lessThanOrEqual",e)}(t):"moreThanOrEqual"===e.type?function(e){return new Dn.q("lessThan",e)}(t):"between"===e.type?new Dn.q("notBetween",t):"any"===e.type||"in"===e.type?new Dn.q("exclude",t):"isNull"===e.type&&new Dn.q("notNull",t);var n};var qn=__webpack_require__(46763),$n=__webpack_require__(38689);class Un extends On{constructor(e,t){super(e,t),this["@instanceof"]=Symbol.for("IndexedDbEntityManager")}count(e,t){return this.getDexieTableForTarget(e).count()}async insert(e,t){const n=this.getDexieTableForTarget(e);return Array.isArray(t)?await n.bulkAdd(t):await n.add(t),new Ln.T}async find(e,t){return this.executeFind(e,t)}async findByIds(e,t,n){throw new Error("findByIds is deprecated. use findBy method instead in conjunction with In operator")}async findBy(e,t){return this.executeFind(e,t)}async findOne(e,t){return this.executeFindOne(e,t)}async findOneBy(e,t){return this.executeFindOne(e,t)}async findOneById(e,t){return this.executeFindOne(e,{where:{id:t}})}async update(e,t,n){const r=new qn.L,i=this.getDexieTableForTarget(e),a=Object.keys(t),s=Object.values(t);try{const e=await i.where(a).equals(s).modify(n);r.affected=e}catch(e){r.affected=0}return r}async upsert(e,t,n){const r=new Ln.T,i=this.getDexieTableForTarget(e),a=Array.isArray(n)?n:n.conflictPaths;try{if(Array.isArray(t)){const e=await i.bulkPut(t,{allKeys:!0});for(const t of e)r.identifiers.push({id:(t||[]).join(",")})}else{const e=await i.put(t,a);r.identifiers.push({id:(e||[]).join(",")})}}catch(e){r.identifiers=[]}return r}async delete(e,t){const n=new $n.P,r=this.getDexieTableForTarget(e);return"string"==typeof t||"number"==typeof t||t instanceof Date?n.affected=await r.where(["id"]).equals([t.toString()]).delete():Array.isArray(t)?await Promise.all(t.map((e=>r.where(["id"]).equals([e.toString()]).delete()))):n.affected=await r.where(Object.keys(t)).equals(Object.values(t)).delete(),n}async transaction(e,t){if("string"==typeof e)throw new st.VR("Cannot specify Isolation level for IndexedDB");const n="function"==typeof e?e:t,r="object"==typeof t?t:void 0;if(!n)throw new st.VR("Transaction method requires callback in second parameter if isolation level is supplied.");if(this.queryRunner&&this.queryRunner.isReleased)throw new st.hz;const i=this.queryRunner||this.connection.createQueryRunner(),a=this.connection.driver.dexie;let s;const o=r?r.entitiesToLock:Object.keys(a._allTables);return await a.transaction("rw",o,(async()=>{s=await n(i.manager)})),s}getDexieTableForTarget(e){const t=this.connection.driver,n=this.connection.getMetadata(e);return t.dexie._allTables[n.tableName]}async executeFind(e,t){const n=this.getDexieTableForTarget(e),r=this.convertPredicateToIndexedDbQuery(t),i=this.convertPredicateToIndexedDbSortingOptions(t);if(!r){let e=await this.applyTableSorting(n,i);return e=this.applyPagination(e,t),e.toArray()}if(this.requiresOptimizingForInOperator(r))return this.optimizeAnyOfIntoParallelQueries(n,r);let a=this.applyQueryFilter(n,r);return a=this.applyPagination(a,t),this.applyCollectionSorting(a,i)}async executeFindOne(e,t){const n=this.getDexieTableForTarget(e),r=this.convertPredicateToIndexedDbQuery(t);if(!r||0===Object.keys(r).length){const e=await n.limit(1).toArray();return e.length>0?e[0]:null}let i=await this.applyQueryFilter(n,r).limit(1).toArray();return i.length>0?i[0]:null}convertPredicateToIndexedDbQuery(e){if(e)return Ot.H.isFindManyOptions(e)?"string"==typeof e.where?{}:e.where:e}convertPredicateToIndexedDbSortingOptions(e){var t;let n={enabled:!1,columns:[],direction:"ASC"};if((Ot.H.isFindManyOptions(e)||Ot.H.isFindOneOptions(e))&&e.order){const r=Object.keys(e.order),i=Object.values(e.order);n.enabled=r.length>0,n.columns=r,n.direction=null!==(t=i[0])&&void 0!==t?t:"ASC"}return n}applyQueryFilter(e,t){let n=null;for(const[r,i]of Object.entries(t)){const t=Bn(r,i);n=n?n.and(t):e.filter(t)}return null==n?e.toCollection():n}applyPagination(e,t){return Ot.H.isFindManyOptions(t)&&(t.skip&&(e=e.offset(t.skip)),t.take&&(e=e.limit(t.take))),e}async applyTableSorting(e,t){if(!t.enabled)return e.toCollection();let n=e.orderBy(t.columns);return"DESC"===t.direction&&(n=n.reverse()),n}async applyCollectionSorting(e,t){if(!t.enabled||0===t.columns.length)return e.toArray();return("DESC"===t.direction?e.reverse():e).sortBy(t.columns[0])}requiresOptimizingForInOperator(e){const t=Object.values(e).filter((e=>gt.t.isFindOperator(e)));return 1===t.length&&null!=t.find((e=>"in"===e.type))}async optimizeAnyOfIntoParallelQueries(e,t){const n=Object.keys(t)[0],r=t[n].value,i=await Promise.allSettled(r.map((async t=>e.where({[n]:t}).toArray()))),a=i.reduce(((e,t)=>("rejected"===t.status&&e.push(t),e)),[]);if(a.length>0&&/KeyPath (\w*) on object store (\w*) is not indexed/gi.test(a[0].reason))throw Error(a[0].reason);return(e=>e.reduce(((e,t)=>("fulfilled"===t.status&&e.push(...t.value),e)),[]))(i)}}class Fn{create(e,t){return"mongodb"===e.driver.options.type?new kt.MongoEntityManager(e):"sqljs"===e.driver.options.type?new Pn(e,t):"indexeddb"===e.driver.options.type?new Un(e,t):new On(e,t)}}var Vn=__webpack_require__(86741);class Hn{constructor(e){this["@instanceof"]=Symbol.for("View"),e&&(this.database=e.database,this.schema=e.schema,this.name=e.name,this.expression=e.expression,this.materialized=!!e.materialized)}clone(){return new Hn({database:this.database,schema:this.schema,name:this.name,expression:this.expression,materialized:this.materialized})}static create(e,t){const n={database:e.database,schema:e.schema,name:t.buildTableName(e.tableName,e.schema,e.database),expression:e.expression,materialized:e.tableMetadataArgs.materialized};return new Hn(n)}}class zn{static viewMetadataCmp(e,t){return e&&t?e.dependsOn&&(e.dependsOn.has(t.target)||e.dependsOn.has(t.name))?1:t.dependsOn&&(t.dependsOn.has(e.target)||t.dependsOn.has(e.name))?-1:0:0}}class Wn{constructor(e){this.connection=e,this["@instanceof"]=Symbol.for("RdbmsSchemaBuilder")}async build(){this.queryRunner=this.connection.createQueryRunner(),this.currentDatabase=this.connection.driver.database,this.currentSchema=this.connection.driver.schema;const e=!("cockroachdb"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type||"none"===this.connection.options.migrationsTransactionMode);await this.queryRunner.beforeMigration(),e&&await this.queryRunner.startTransaction();try{await this.createMetadataTableIfNecessary(this.queryRunner);const t=this.entityToSyncMetadatas.map((e=>this.getTablePath(e)));await this.queryRunner.getTables(t),await this.queryRunner.getViews([]),await this.executeSchemaSyncOperationsInProperOrder(),this.connection.queryResultCache&&await this.connection.queryResultCache.synchronize(this.queryRunner),e&&await this.queryRunner.commitTransaction()}catch(t){try{e&&await this.queryRunner.rollbackTransaction()}catch(e){}throw t}finally{await this.queryRunner.afterMigration(),await this.queryRunner.release()}}async createMetadataTableIfNecessary(e){(this.viewEntityToSyncMetadatas.length>0||this.hasGeneratedColumns())&&await this.createTypeormMetadataTable(e)}async log(){this.queryRunner=this.connection.createQueryRunner();try{const e=this.entityToSyncMetadatas.map((e=>this.getTablePath(e)));return await this.queryRunner.getTables(e),await this.queryRunner.getViews([]),this.queryRunner.enableSqlMemory(),await this.executeSchemaSyncOperationsInProperOrder(),this.connection.queryResultCache&&await this.connection.queryResultCache.synchronize(this.queryRunner),this.queryRunner.getMemorySql()}finally{this.queryRunner.disableSqlMemory(),await this.queryRunner.release()}}get entityToSyncMetadatas(){return this.connection.entityMetadatas.filter((e=>e.synchronize&&"entity-child"!==e.tableType&&"view"!==e.tableType))}get viewEntityToSyncMetadatas(){return this.connection.entityMetadatas.filter((e=>"view"===e.tableType&&e.synchronize)).sort(zn.viewMetadataCmp)}hasGeneratedColumns(){return this.connection.entityMetadatas.some((e=>e.columns.some((e=>e.generatedType))))}async executeSchemaSyncOperationsInProperOrder(){await this.dropOldViews(),await this.dropOldForeignKeys(),await this.dropOldIndices(),await this.dropOldChecks(),await this.dropOldExclusions(),await this.dropCompositeUniqueConstraints(),await this.renameColumns(),await this.createNewTables(),await this.dropRemovedColumns(),await this.addNewColumns(),await this.updatePrimaryKeys(),await this.updateExistColumns(),await this.createNewIndices(),await this.createNewChecks(),await this.createNewExclusions(),await this.createCompositeUniqueConstraints(),await this.createForeignKeys(),await this.createViews()}getTablePath(e){const t=this.connection.driver.parseTableName(e);return this.connection.driver.buildTableName(t.tableName,t.schema||this.currentSchema,t.database||this.currentDatabase)}async dropOldForeignKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.foreignKeys.filter((t=>{const n=e.foreignKeys.find((e=>t.name===e.name&&this.getTablePath(t)===this.getTablePath(e.referencedEntityMetadata)));return!n||n.onDelete&&n.onDelete!==t.onDelete||n.onUpdate&&n.onUpdate!==t.onUpdate}));0!==n.length&&(this.connection.logger.logSchemaBuild(`dropping old foreign keys of ${t.name}: ${n.map((e=>e.name)).join(", ")}`),await this.queryRunner.dropForeignKeys(t,n))}}async renameTables(){}async renameColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;if(e.columns.length!==t.columns.length)continue;const n=e.columns.filter((e=>!t.columns.find((t=>t.name===e.databaseName&&t.type===this.connection.driver.normalizeType(e)&&t.isNullable===e.isNullable&&t.isUnique===this.connection.driver.normalizeIsUnique(e)))));if(0===n.length||n.length>1)continue;const r=t.columns.filter((t=>!e.columns.find((e=>e.databaseName===t.name&&this.connection.driver.normalizeType(e)===t.type&&e.isNullable===t.isNullable&&this.connection.driver.normalizeIsUnique(e)===t.isUnique))));if(0===r.length||r.length>1)continue;const i=r[0].clone();i.name=n[0].databaseName,this.connection.logger.logSchemaBuild(`renaming column "${r[0].name}" in to "${i.name}"`),await this.queryRunner.renameColumn(t,r[0],i)}}async dropOldIndices(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.indices.filter((t=>{const n=e.indices.find((e=>e.name===t.name));return!n||!1!==n.synchronize&&(n.isUnique!==t.isUnique||(n.isSpatial!==t.isSpatial||(!(!this.connection.driver.isFullTextColumnTypeSupported()||n.isFulltext===t.isFulltext)||(n.columns.length!==t.columnNames.length||!n.columns.every((e=>-1!==t.columnNames.indexOf(e.databaseName)))))))})).map((async e=>{this.connection.logger.logSchemaBuild(`dropping an index: "${e.name}" from table ${t.name}`),await this.queryRunner.dropIndex(t,e)}));await Promise.all(n)}}async dropOldChecks(){if(!Nt.I.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type)for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.checks.filter((t=>!e.checks.find((e=>e.name===t.name))));0!==n.length&&(this.connection.logger.logSchemaBuild(`dropping old check constraint: ${n.map((e=>`"${e.name}"`)).join(", ")} from table "${t.name}"`),await this.queryRunner.dropCheckConstraints(t,n))}}async dropCompositeUniqueConstraints(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.uniques.filter((t=>t.columnNames.length>1&&!e.uniques.find((e=>e.name===t.name))));0!==n.length&&(this.connection.logger.logSchemaBuild(`dropping old unique constraint: ${n.map((e=>`"${e.name}"`)).join(", ")} from table "${t.name}"`),await this.queryRunner.dropUniqueConstraints(t,n))}}async dropOldExclusions(){if("postgres"===this.connection.driver.options.type)for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.exclusions.filter((t=>!e.exclusions.find((e=>e.name===t.name))));0!==n.length&&(this.connection.logger.logSchemaBuild(`dropping old exclusion constraint: ${n.map((e=>`"${e.name}"`)).join(", ")} from table "${t.name}"`),await this.queryRunner.dropExclusionConstraints(t,n))}}async createNewTables(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(t)continue;this.connection.logger.logSchemaBuild(`creating a new table: ${this.getTablePath(e)}`);const n=ft.create(e,this.connection.driver);await this.queryRunner.createTable(n,!1,!1),this.queryRunner.loadedTables.push(n)}}async createViews(){for(const e of this.viewEntityToSyncMetadatas){const t=this.queryRunner.loadedViews.find((t=>{const n="string"==typeof t.expression?t.expression.trim():t.expression(this.connection).getQuery(),r="string"==typeof e.expression?e.expression.trim():e.expression(this.connection).getQuery();return this.getTablePath(t)===this.getTablePath(e)&&n===r}));if(t)continue;this.connection.logger.logSchemaBuild(`creating a new view: ${this.getTablePath(e)}`);const n=Hn.create(e,this.connection.driver);await this.queryRunner.createView(n),this.queryRunner.loadedViews.push(n)}}async dropOldViews(){const e=[],t=this.viewEntityToSyncMetadatas,n=new Map;for(const e of this.queryRunner.loadedViews){const r=t.find((t=>this.getTablePath(e)===this.getTablePath(t)));r&&n.set(e,r)}for(const t of this.queryRunner.loadedViews){const r=n.get(t);if(!r)continue;("string"==typeof t.expression?t.expression.trim():t.expression(this.connection).getQuery())!==("string"==typeof r.expression?r.expression.trim():r.expression(this.connection).getQuery())&&(this.connection.logger.logSchemaBuild(`dropping an old view: ${t.name}`),e.push(t))}const r=e=>{const t=n.get(e);let i=[e];if(!t)return i;for(const[a,s]of n.entries())a!==e&&s.dependsOn&&(s.dependsOn.has(t.target)||s.dependsOn.has(t.name))&&(i=i.concat(r(a)));return i},i=new Set(e.map((e=>r(e))).reduce(((e,t)=>e.concat(t)),[]).sort(((e,t)=>zn.viewMetadataCmp(n.get(e),n.get(t)))).reverse());for(const e of i)await this.queryRunner.dropView(e);this.queryRunner.loadedViews=this.queryRunner.loadedViews.filter((e=>!i.has(e)))}async dropRemovedColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=t.columns.filter((t=>!e.columns.find((e=>e.databaseName===t.name))));0!==n.length&&(this.connection.logger.logSchemaBuild(`columns dropped in ${t.name}: `+n.map((e=>e.name)).join(", ")),await this.queryRunner.dropColumns(t,n))}}async addNewColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.columns.filter((e=>!t.columns.find((t=>t.name===e.databaseName))));if(0===n.length)continue;const r=this.metadataColumnsToTableColumnOptions(n).map((e=>new ot(e)));0!==r.length&&(this.connection.logger.logSchemaBuild("new columns added: "+n.map((e=>e.databaseName)).join(", ")),await this.queryRunner.addColumns(t,r))}}async updatePrimaryKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.columns.filter((e=>e.isPrimary));if(t.columns.filter((e=>e.isPrimary)).length!==n.length&&n.length>1){const e=n.map((e=>new ot(ut.createTableColumnOptions(e,this.connection.driver))));await this.queryRunner.updatePrimaryKeys(t,e)}}}async updateExistColumns(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=this.connection.driver.findChangedColumns(t.columns,e.columns);if(0===n.length)continue;for(const t of n)await this.dropColumnReferencedForeignKeys(this.getTablePath(e),t.databaseName);for(const t of n)await this.dropColumnCompositeIndices(this.getTablePath(e),t.databaseName);if(!Nt.I.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type&&"spanner"!==this.connection.driver.options.type)for(const t of n)await this.dropColumnCompositeUniques(this.getTablePath(e),t.databaseName);const r=n.map((e=>{const n=t.columns.find((t=>t.name===e.databaseName)),r=ut.createTableColumnOptions(e,this.connection.driver);return{oldColumn:n,newColumn:new ot(r)}}));0!==r.length&&(this.connection.logger.logSchemaBuild(`columns changed in "${t.name}". updating: `+n.map((e=>e.databaseName)).join(", ")),await this.queryRunner.changeColumns(t,r))}}async createNewIndices(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.indices.filter((e=>!t.indices.find((t=>t.name===e.name))&&!0===e.synchronize)).map((e=>ct.create(e)));0!==n.length&&(this.connection.logger.logSchemaBuild(`adding new indices ${n.map((e=>`"${e.name}"`)).join(", ")} in table "${t.name}"`),await this.queryRunner.createIndices(t,n))}}async createNewChecks(){if(!Nt.I.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type)for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.checks.filter((e=>!t.checks.find((t=>t.name===e.name)))).map((e=>ht.create(e)));0!==n.length&&(this.connection.logger.logSchemaBuild(`adding new check constraints: ${n.map((e=>`"${e.name}"`)).join(", ")} in table "${t.name}"`),await this.queryRunner.createCheckConstraints(t,n))}}async createCompositeUniqueConstraints(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.uniques.filter((e=>e.columns.length>1&&!t.uniques.find((t=>t.name===e.name)))).map((e=>dt.create(e)));0!==n.length&&(this.connection.logger.logSchemaBuild(`adding new unique constraints: ${n.map((e=>`"${e.name}"`)).join(", ")} in table "${t.name}"`),await this.queryRunner.createUniqueConstraints(t,n))}}async createNewExclusions(){if("postgres"===this.connection.driver.options.type)for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.exclusions.filter((e=>!t.exclusions.find((t=>t.name===e.name)))).map((e=>pt.create(e)));0!==n.length&&(this.connection.logger.logSchemaBuild(`adding new exclusion constraints: ${n.map((e=>`"${e.name}"`)).join(", ")} in table "${t.name}"`),await this.queryRunner.createExclusionConstraints(t,n))}}async createForeignKeys(){for(const e of this.entityToSyncMetadatas){const t=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===this.getTablePath(e)));if(!t)continue;const n=e.foreignKeys.filter((e=>!t.foreignKeys.find((t=>t.name===e.name&&this.getTablePath(t)===this.getTablePath(e.referencedEntityMetadata)))));if(0===n.length)continue;const r=n.map((e=>lt.create(e,this.connection.driver)));this.connection.logger.logSchemaBuild(`creating a foreign keys: ${n.map((e=>e.name)).join(", ")} on table "${t.name}"`),await this.queryRunner.createForeignKeys(t,r)}}async dropColumnReferencedForeignKeys(e,t){const n=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===e));if(!n)return;const r=[],i=n.foreignKeys.find((e=>-1!==e.columnNames.indexOf(t)));if(i){const e=n.clone();e.foreignKeys=[i],r.push(e),n.removeForeignKey(i)}for(const n of this.queryRunner.loadedTables){const i=n.foreignKeys.filter((n=>this.getTablePath(n)===e&&-1!==n.referencedColumnNames.indexOf(t)));if(i.length>0){const e=n.clone();e.foreignKeys=i,r.push(e),i.forEach((e=>n.removeForeignKey(e)))}}if(r.length>0)for(const e of r)this.connection.logger.logSchemaBuild(`dropping related foreign keys of ${e.name}: ${e.foreignKeys.map((e=>e.name)).join(", ")}`),await this.queryRunner.dropForeignKeys(e,e.foreignKeys)}async dropColumnCompositeIndices(e,t){const n=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===e));if(!n)return;const r=n.indices.filter((e=>e.columnNames.length>1&&-1!==e.columnNames.indexOf(t)));0!==r.length&&(this.connection.logger.logSchemaBuild(`dropping related indices of "${e}"."${t}": ${r.map((e=>e.name)).join(", ")}`),await this.queryRunner.dropIndices(n,r))}async dropColumnCompositeUniques(e,t){const n=this.queryRunner.loadedTables.find((t=>this.getTablePath(t)===e));if(!n)return;const r=n.uniques.filter((e=>e.columnNames.length>1&&-1!==e.columnNames.indexOf(t)));0!==r.length&&(this.connection.logger.logSchemaBuild(`dropping related unique constraints of "${e}"."${t}": ${r.map((e=>e.name)).join(", ")}`),await this.queryRunner.dropUniqueConstraints(n,r))}metadataColumnsToTableColumnOptions(e){return e.map((e=>ut.createTableColumnOptions(e,this.connection.driver)))}async createTypeormMetadataTable(e){const t=this.currentSchema,n=this.currentDatabase,r=this.connection.driver.buildTableName(this.connection.metadataTableName,t,n),i="spanner"===this.connection.driver.options.type;await e.createTable(new ft({database:n,schema:t,name:r,columns:[{name:"type",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataType}),isNullable:!1,isPrimary:i},{name:"database",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataDatabase}),isNullable:!0,isPrimary:i},{name:"schema",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataSchema}),isNullable:!0,isPrimary:i},{name:"table",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataTable}),isNullable:!0,isPrimary:i},{name:"name",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataName}),isNullable:!0,isPrimary:i},{name:"value",type:this.connection.driver.normalizeType({type:this.connection.driver.mappedDataTypes.metadataValue}),isNullable:!0,isPrimary:i}]}),!0)}}class Kn{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="nested",this.supportedDataTypes=["int","integer","tinyint","smallint","mediumint","bigint","unsigned big int","int2","int8","integer","character","varchar","varying character","nchar","native character","nvarchar","text","clob","text","blob","real","double","double precision","float","real","numeric","decimal","boolean","date","time","datetime"],this.supportedUpsertType="on-conflict-do-update",this.withLengthColumnTypes=["character","varchar","varying character","nchar","native character","nvarchar","text","blob","clob"],this.spatialTypes=[],this.withPrecisionColumnTypes=["real","double","double precision","float","real","numeric","decimal","date","time","datetime"],this.withScaleColumnTypes=["real","double","double precision","float","real","numeric","decimal"],this.mappedDataTypes={createDate:"datetime",createDateDefault:"datetime('now')",updateDate:"datetime",updateDateDefault:"datetime('now')",deleteDate:"datetime",deleteDateNullable:!0,version:"integer",treeLevel:"integer",migrationId:"integer",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text",metadataType:"varchar",metadataDatabase:"varchar",metadataSchema:"varchar",metadataTable:"varchar",metadataName:"varchar",metadataValue:"text"},this.cteCapabilities={enabled:!0,requiresRecursiveHint:!0},this.attachedDatabases={},this.connection=e,this.options=e.options,this.database=Nt.I.buildDriverOptions(this.options).database}async connect(){this.databaseConnection=await this.createDatabaseConnection()}afterConnect(){return Promise.resolve()}async disconnect(){return new Promise(((e,t)=>{this.queryRunner=void 0,this.databaseConnection.close((n=>n?t(n):e()))}))}hasAttachedDatabases(){return!!Object.keys(this.attachedDatabases).length}getAttachedDatabaseHandleByRelativePath(e){var t,n;return null===(n=null===(t=this.attachedDatabases)||void 0===t?void 0:t[e])||void 0===n?void 0:n.attachHandle}getAttachedDatabasePathRelativeByHandle(e){var t;return null===(t=Object.values(this.attachedDatabases).find((({attachHandle:t})=>e===t)))||void 0===t?void 0:t.attachFilepathRelative}createSchemaBuilder(){return new Wn(this.connection)}preparePersistentValue(e,t){return t.transformer&&(e=ln.W.transformTo(t.transformer,e)),null==e?e:t.type===Boolean||"boolean"===t.type?!0===e?1:0:"date"===t.type?on.mixedDateToDateString(e):"time"===t.type?on.mixedDateToTimeString(e):"datetime"===t.type||t.type===Date?on.mixedDateToUtcDatetimeString(e):"simple-array"===t.type?on.simpleArrayToString(e):"simple-json"===t.type?on.simpleJsonToString(e):"simple-enum"===t.type?on.simpleEnumToString(e):e}prepareHydratedValue(e,t){return null==e?t.transformer?ln.W.transformFrom(t.transformer,e):e:(t.type===Boolean||"boolean"===t.type?e=!!e:"datetime"===t.type||t.type===Date?(e&&"string"==typeof e&&(/^\d\d\d\d-\d\d-\d\d \d\d:\d\d/.test(e)&&(e=e.replace(" ","T")),/^\d\d\d\d-\d\d-\d\dT\d\d:\d\d(:\d\d(\.\d\d\d)?)?$/.test(e)&&(e+="Z")),e=on.normalizeHydratedDate(e)):"date"===t.type?e=on.mixedDateToDateString(e):"time"===t.type?e=on.mixedTimeToString(e):"simple-array"===t.type?e=on.stringToSimpleArray(e):"simple-json"===t.type?e=on.stringToSimpleJson(e):"simple-enum"===t.type&&(e=on.stringToSimpleEnum(e,t)),t.transformer&&(e=ln.W.transformFrom(t.transformer,e)),e)}escapeQueryWithParameters(e,t,n){const r=Object.keys(n).map((e=>"boolean"==typeof n[e]?!0===n[e]?1:0:n[e]instanceof Date?on.mixedDateToUtcDatetimeString(n[e]):n[e]));return t&&Object.keys(t).length?[e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,((e,n,i)=>{if(!t.hasOwnProperty(i))return e;let a=t[i];return n?a.map((e=>(r.push(e),this.createParameter(i,r.length-1)))).join(", "):"function"==typeof a?a():"number"==typeof a?String(a):a instanceof Date?(r.push(on.mixedDateToUtcDatetimeString(a)),this.createParameter(i,r.length-1)):(r.push(a),this.createParameter(i,r.length-1))})),r]:[e,r]}escape(e){return'"'+e+'"'}buildTableName(e,t,n){return e}parseTableName(e){var t;const n=this.database,r=void 0;if(gt.t.isTable(e)||gt.t.isView(e)){const t=this.parseTableName(e.schema?`"${e.schema}"."${e.name}"`:e.name);return{database:e.database||t.database||n,schema:e.schema||t.schema||r,tableName:t.tableName}}if(gt.t.isTableForeignKey(e)){const t=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||t.database||n,schema:e.referencedSchema||t.schema||r,tableName:t.tableName}}if(gt.t.isEntityMetadata(e))return{database:e.database||n,schema:e.schema||r,tableName:e.tableName};const i=e.split(".");if(3===i.length)return{database:i[0]||n,schema:i[1]||r,tableName:i[2]};if(2===i.length){return{database:null!==(t=this.getAttachedDatabasePathRelativeByHandle(i[0]))&&void 0!==t?t:n,schema:i[0],tableName:i[1]}}return{database:n,schema:r,tableName:e}}normalizeType(e){return e.type===Number||"int"===e.type?"integer":e.type===String?"varchar":e.type===Date?"datetime":e.type===Boolean?"boolean":"uuid"===e.type?"varchar":"simple-array"===e.type||"simple-json"===e.type?"text":"simple-enum"===e.type?"varchar":e.type||""}normalizeDefault(e){const t=e.default;return"number"==typeof t?""+t:"boolean"==typeof t?t?"1":"0":"function"==typeof t?t():"string"==typeof t?`'${t}'`:null!=t?`${t}`:void 0}normalizeIsUnique(e){return e.entityMetadata.uniques.some((t=>1===t.columns.length&&t.columns[0]===e))}getColumnLength(e){return e.length?e.length.toString():""}createFullType(e){let t=e.type;return e.enum?"varchar":(e.length?t+="("+e.length+")":null!==e.precision&&void 0!==e.precision&&null!==e.scale&&void 0!==e.scale?t+="("+e.precision+","+e.scale+")":null!==e.precision&&void 0!==e.precision&&(t+="("+e.precision+")"),e.isArray&&(t+=" array"),t)}obtainMasterConnection(){return Promise.resolve()}obtainSlaveConnection(){return Promise.resolve()}createGeneratedMap(e,t,n,r){const i=e.generatedColumns.reduce(((e,i)=>{let a;return"increment"===i.generationStrategy&&t&&(a=t-r+n+1),a?cn.m.mergeDeep(e,i.createValueMap(a)):e}),{});return Object.keys(i).length>0?i:void 0}findChangedColumns(e,t){return t.filter((t=>{const n=e.find((e=>e.name===t.databaseName));if(!n)return!1;return n.name!==t.databaseName||n.type!==this.normalizeType(t)||n.length!==t.length||n.precision!==t.precision||n.scale!==t.scale||this.normalizeDefault(t)!==n.default||n.isPrimary!==t.isPrimary||n.isNullable!==t.isNullable||n.generatedType!==t.generatedType||n.asExpression!==t.asExpression||n.isUnique!==this.normalizeIsUnique(t)||"uuid"!==t.generationStrategy&&n.isGenerated!==t.isGenerated}))}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return"?"}createDatabaseConnection(){throw new st.VR("Do not use AbstractSqlite directly, it has to be used with one of the sqlite drivers")}loadDependencies(){}}var Gn,Qn=__webpack_require__(76320),Jn=__webpack_require__(75672),Yn=__webpack_require__(60765);class Xn{constructor(e,t){this.query=e,this.parameters=t,this["@instanceof"]=Symbol.for("Query")}}class Zn{constructor(){this.upQueries=[],this.downQueries=[]}}class er{constructor(){this.isReleased=!1,this.isTransactionActive=!1,this.data={},this.loadedTables=[],this.loadedViews=[],this.sqlMemoryMode=!1,this.sqlInMemory=new Zn,this.transactionDepth=0,this.cachedTablePaths={}}async beforeMigration(){}async afterMigration(){}async getTable(e){return this.loadedTables=await this.loadTables([e]),this.loadedTables.length>0?this.loadedTables[0]:void 0}async getTables(e){return e?(this.loadedTables=await this.loadTables(e),this.loadedTables):await this.loadTables(e)}async getView(e){return this.loadedViews=await this.loadViews([e]),this.loadedViews.length>0?this.loadedViews[0]:void 0}async getViews(e){return this.loadedViews=await this.loadViews(e),this.loadedViews}enableSqlMemory(){this.sqlInMemory=new Zn,this.sqlMemoryMode=!0}disableSqlMemory(){this.sqlInMemory=new Zn,this.sqlMemoryMode=!1}clearSqlMemory(){this.sqlInMemory=new Zn}getMemorySql(){return this.sqlInMemory}async executeMemoryUpSql(){for(const{query:e,parameters:t}of this.sqlInMemory.upQueries)await this.query(e,t)}async executeMemoryDownSql(){for(const{query:e,parameters:t}of this.sqlInMemory.downQueries.reverse())await this.query(e,t)}getReplicationMode(){return this.mode}async getCachedView(e){const t=this.loadedViews.find((t=>t.name===e));if(t)return t;const n=await this.loadViews([e]);if(n.length>0)return this.loadedViews.push(n[0]),n[0];throw new It.V(`View "${e}" does not exist.`)}async getCachedTable(e){if(e in this.cachedTablePaths){const t=this.cachedTablePaths[e],n=this.loadedTables.find((e=>this.getTablePath(e)===t));if(n)return n}const t=await this.loadTables([e]);if(t.length>0){const n=this.getTablePath(t[0]),r=this.loadedTables.find((e=>this.getTablePath(e)===n));return r||(this.cachedTablePaths[e]=this.getTablePath(t[0]),this.loadedTables.push(t[0]),t[0])}throw new It.V(`Table "${e}" does not exist.`)}replaceCachedTable(e,t){const n=this.getTablePath(e),r=this.loadedTables.find((e=>this.getTablePath(e)===n));for(const[e,r]of Object.entries(this.cachedTablePaths))r===n&&(this.cachedTablePaths[e]=this.getTablePath(t));r&&(r.database=t.database,r.schema=t.schema,r.name=t.name,r.columns=t.columns,r.indices=t.indices,r.foreignKeys=t.foreignKeys,r.uniques=t.uniques,r.checks=t.checks,r.justCreated=t.justCreated,r.engine=t.engine)}getTablePath(e){const t=this.connection.driver.parseTableName(e);return this.connection.driver.buildTableName(t.tableName,t.schema,t.database)}getTypeormMetadataTableName(){const e=this.connection.driver.options;return this.connection.driver.buildTableName(this.connection.metadataTableName,e.schema,e.database)}selectTypeormMetadataSql({database:e,schema:t,table:n,type:r,name:i}){const a=this.connection.createQueryBuilder(),s=a.select().from(this.getTypeormMetadataTableName(),"t").where(`${a.escape("type")} = :type`,{type:r}).andWhere(`${a.escape("name")} = :name`,{name:i});e&&s.andWhere(`${a.escape("database")} = :database`,{database:e}),t&&s.andWhere(`${a.escape("schema")} = :schema`,{schema:t}),n&&s.andWhere(`${a.escape("table")} = :table`,{table:n});const[o,c]=s.getQueryAndParameters();return new Xn(o,c)}insertTypeormMetadataSql({database:e,schema:t,table:n,type:r,name:i,value:a}){const[s,o]=this.connection.createQueryBuilder().insert().into(this.getTypeormMetadataTableName()).values({database:e,schema:t,table:n,type:r,name:i,value:a}).getQueryAndParameters();return new Xn(s,o)}deleteTypeormMetadataSql({database:e,schema:t,table:n,type:r,name:i}){const a=this.connection.createQueryBuilder(),s=a.delete().from(this.getTypeormMetadataTableName()).where(`${a.escape("type")} = :type`,{type:r}).andWhere(`${a.escape("name")} = :name`,{name:i});e&&s.andWhere(`${a.escape("database")} = :database`,{database:e}),t&&s.andWhere(`${a.escape("schema")} = :schema`,{schema:t}),n&&s.andWhere(`${a.escape("table")} = :table`,{table:n});const[o,c]=s.getQueryAndParameters();return new Xn(o,c)}isColumnChanged(e,t,n,r){return e.charset!==t.charset||e.collation!==t.collation||e.precision!==t.precision||e.scale!==t.scale||e.width!==t.width||e.zerofill!==t.zerofill||e.unsigned!==t.unsigned||e.asExpression!==t.asExpression||n&&e.default!==t.default||e.onUpdate!==t.onUpdate||e.isNullable!==t.isNullable||r&&e.comment!==t.comment||!cn.m.isArraysEqual(e.enum||[],t.enum||[])}isDefaultColumnLength(e,t,n){if(this.connection.hasMetadata(e.name)){const n=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(n){if(this.connection.driver.getColumnLength(n))return!1}}return!!(this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].length)&&this.connection.driver.dataTypeDefaults[t.type].length.toString()===n.toString()}isDefaultColumnPrecision(e,t,n){if(this.connection.hasMetadata(e.name)){const n=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(n&&null!==n.precision&&void 0!==n.precision)return!1}return!(!this.connection.driver.dataTypeDefaults||!this.connection.driver.dataTypeDefaults[t.type]||null===this.connection.driver.dataTypeDefaults[t.type].precision||void 0===this.connection.driver.dataTypeDefaults[t.type].precision)&&this.connection.driver.dataTypeDefaults[t.type].precision===n}isDefaultColumnScale(e,t,n){if(this.connection.hasMetadata(e.name)){const n=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(n&&null!==n.scale&&void 0!==n.scale)return!1}return!(!this.connection.driver.dataTypeDefaults||!this.connection.driver.dataTypeDefaults[t.type]||null===this.connection.driver.dataTypeDefaults[t.type].scale||void 0===this.connection.driver.dataTypeDefaults[t.type].scale)&&this.connection.driver.dataTypeDefaults[t.type].scale===n}async executeQueries(e,t){if(gt.t.isQuery(e)&&(e=[e]),gt.t.isQuery(t)&&(t=[t]),this.sqlInMemory.upQueries.push(...e),this.sqlInMemory.downQueries.push(...t),!0===this.sqlMemoryMode)return Promise.resolve();for(const{query:t,parameters:n}of e)await this.query(t,n)}generateIndexName(e,t){return this.connection.namingStrategy.indexName(e,t.columnNames,t.where)}}!function(e){e.VIEW="VIEW",e.MATERIALIZED_VIEW="MATERIALIZED_VIEW",e.GENERATED_COLUMN="GENERATED_COLUMN"}(Gn||(Gn={}));class tr extends er{constructor(){super(),this.transactionPromise=null}connect(){return Promise.resolve(this.driver.databaseConnection)}release(){return this.loadedTables=[],this.clearSqlMemory(),Promise.resolve()}async startTransaction(e){if("none"===this.driver.transactionSupport)throw new st.VR(`Transactions aren't supported by ${this.connection.driver.options.type}.`);if(this.isTransactionActive&&"simple"===this.driver.transactionSupport)throw new st.ol;if(e&&"READ UNCOMMITTED"!==e&&"SERIALIZABLE"!==e)throw new st.VR("SQLite only supports SERIALIZABLE and READ UNCOMMITTED isolation");this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(e){throw this.isTransactionActive=!1,e}0===this.transactionDepth?(e&&("READ UNCOMMITTED"===e?await this.query("PRAGMA read_uncommitted = true"):await this.query("PRAGMA read_uncommitted = false")),await this.query("BEGIN TRANSACTION")):await this.query(`SAVEPOINT typeorm_${this.transactionDepth}`),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.query("COMMIT"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.query("ROLLBACK"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}stream(e,t,n,r){throw new st.VR("Stream is not supported by sqlite driver.")}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){return Promise.resolve(!1)}async getCurrentDatabase(){return Promise.resolve(void 0)}async hasSchema(e){throw new st.VR("This driver does not support table schemas")}async getCurrentSchema(){return Promise.resolve(void 0)}async hasTable(e){const t=`SELECT * FROM "sqlite_master" WHERE "type" = 'table' AND "name" = '${gt.t.isTable(e)?e.name:e}'`;return!!(await this.query(t)).length}async hasColumn(e,t){const n=gt.t.isTable(e)?e.name:e,r=`PRAGMA table_xinfo(${this.escapePath(n)})`;return!!(await this.query(r)).find((e=>e.name===t))}async createDatabase(e,t){return Promise.resolve()}async dropDatabase(e,t){return Promise.resolve()}async createSchema(e,t){return Promise.resolve()}async dropSchema(e,t){return Promise.resolve()}async createTable(e,t=!1,n=!0,r=!0){const i=[],a=[];if(t){if(await this.hasTable(e))return Promise.resolve()}i.push(this.createTableSql(e,n)),a.push(this.dropTableSql(e)),r&&e.indices.forEach((t=>{t.name||(t.name=this.connection.namingStrategy.indexName(e,t.columnNames,t.where)),i.push(this.createIndexSql(e,t)),a.push(this.dropIndexSql(t))}));const s=e.columns.filter((e=>e.generatedType&&e.asExpression));for(const t of s){const n=this.insertTypeormMetadataSql({table:e.name,type:Gn.GENERATED_COLUMN,name:t.name,value:t.asExpression}),r=this.deleteTypeormMetadataSql({table:e.name,type:Gn.GENERATED_COLUMN,name:t.name});i.push(n),a.push(r)}await this.executeQueries(i,a)}async dropTable(e,t,n=!0,r=!0){if(t){if(!await this.hasTable(e))return Promise.resolve()}const i=n,a=gt.t.isTable(e)?e:await this.getCachedTable(e),s=[],o=[];r&&a.indices.forEach((e=>{s.push(this.dropIndexSql(e)),o.push(this.createIndexSql(a,e))})),s.push(this.dropTableSql(a,t)),o.push(this.createTableSql(a,i));const c=a.columns.filter((e=>e.generatedType&&e.asExpression));for(const e of c){const t=this.deleteTypeormMetadataSql({table:a.name,type:Gn.GENERATED_COLUMN,name:e.name}),n=this.insertTypeormMetadataSql({table:a.name,type:Gn.GENERATED_COLUMN,name:e.name,value:e.asExpression});s.push(t),o.push(n)}await this.executeQueries(s,o)}async createView(e){const t=[],n=[];t.push(this.createViewSql(e)),t.push(this.insertViewDefinitionSql(e)),n.push(this.dropViewSql(e)),n.push(this.deleteViewDefinitionSql(e)),await this.executeQueries(t,n)}async dropView(e){const t=gt.t.isView(e)?e.name:e,n=await this.getCachedView(t),r=[],i=[];r.push(this.deleteViewDefinitionSql(n)),r.push(this.dropViewSql(n)),i.push(this.insertViewDefinitionSql(n)),i.push(this.createViewSql(n)),await this.executeQueries(r,i)}async renameTable(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone();r.name=t;const i=new Xn(`ALTER TABLE ${this.escapePath(n.name)} RENAME TO ${this.escapePath(t)}`),a=new Xn(`ALTER TABLE ${this.escapePath(t)} RENAME TO ${this.escapePath(n.name)}`);await this.executeQueries(i,a),r.uniques.forEach((e=>{const t=this.connection.namingStrategy.uniqueConstraintName(n,e.columnNames);e.name===t&&(e.name=this.connection.namingStrategy.uniqueConstraintName(r,e.columnNames))})),r.foreignKeys.forEach((e=>{const t=this.connection.namingStrategy.foreignKeyName(n,e.columnNames,this.getTablePath(e),e.referencedColumnNames);e.name===t&&(e.name=this.connection.namingStrategy.foreignKeyName(r,e.columnNames,this.getTablePath(e),e.referencedColumnNames))})),r.indices.forEach((e=>{const t=this.connection.namingStrategy.indexName(n,e.columnNames,e.where);e.name===t&&(e.name=this.connection.namingStrategy.indexName(r,e.columnNames,e.where))})),n.name=r.name,await this.recreateTable(r,n)}async addColumn(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e);return this.addColumns(n,[t])}async addColumns(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach((e=>r.addColumn(e))),await this.recreateTable(r,n)}async renameColumn(e,t,n){const r=gt.t.isTable(e)?e:await this.getCachedTable(e),i=gt.t.isTableColumn(t)?t:r.columns.find((e=>e.name===t));if(!i)throw new st.VR(`Column "${t}" was not found in the "${r.name}" table.`);let a;return gt.t.isTableColumn(n)?a=n:(a=i.clone(),a.name=n),this.changeColumn(r,i,a)}async changeColumn(e,t,n){const r=gt.t.isTable(e)?e:await this.getCachedTable(e),i=gt.t.isTableColumn(t)?t:r.columns.find((e=>e.name===t));if(!i)throw new st.VR(`Column "${t}" was not found in the "${r.name}" table.`);await this.changeColumns(r,[{oldColumn:i,newColumn:n}])}async changeColumns(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach((e=>{e.newColumn.name!==e.oldColumn.name&&(r.findColumnUniques(e.oldColumn).forEach((t=>{const i=this.connection.namingStrategy.uniqueConstraintName(n,t.columnNames);t.columnNames.splice(t.columnNames.indexOf(e.oldColumn.name),1),t.columnNames.push(e.newColumn.name),t.name===i&&(t.name=this.connection.namingStrategy.uniqueConstraintName(r,t.columnNames))})),r.findColumnForeignKeys(e.oldColumn).forEach((t=>{const i=this.connection.namingStrategy.foreignKeyName(n,t.columnNames,this.getTablePath(t),t.referencedColumnNames);t.columnNames.splice(t.columnNames.indexOf(e.oldColumn.name),1),t.columnNames.push(e.newColumn.name),t.name===i&&(t.name=this.connection.namingStrategy.foreignKeyName(r,t.columnNames,this.getTablePath(t),t.referencedColumnNames))})),r.findColumnIndices(e.oldColumn).forEach((t=>{const i=this.connection.namingStrategy.indexName(n,t.columnNames,t.where);t.columnNames.splice(t.columnNames.indexOf(e.oldColumn.name),1),t.columnNames.push(e.newColumn.name),t.name===i&&(t.name=this.connection.namingStrategy.indexName(r,t.columnNames,t.where))})));const t=r.columns.find((t=>t.name===e.oldColumn.name));t&&(r.columns[r.columns.indexOf(t)]=e.newColumn)})),await this.recreateTable(r,n)}async dropColumn(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableColumn(t)?t:n.findColumnByName(t);if(!r)throw new st.VR(`Column "${t}" was not found in table "${n.name}"`);await this.dropColumns(n,[r])}async dropColumns(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach((e=>{const t=gt.t.isTableColumn(e)?e:n.findColumnByName(e);if(!t)throw new Error(`Column "${e}" was not found in table "${n.name}"`);r.removeColumn(t),r.findColumnUniques(t).forEach((e=>r.removeUniqueConstraint(e))),r.findColumnIndices(t).forEach((e=>r.removeIndex(e))),r.findColumnForeignKeys(t).forEach((e=>r.removeForeignKey(e)))})),await this.recreateTable(r,n)}async createPrimaryKey(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone();r.columns.forEach((e=>{t.find((t=>t===e.name))&&(e.isPrimary=!0)})),await this.recreateTable(r,n),n.columns.forEach((e=>{t.find((t=>t===e.name))&&(e.isPrimary=!0)}))}async updatePrimaryKeys(e,t){await Promise.resolve()}async dropPrimaryKey(e){const t=gt.t.isTable(e)?e:await this.getCachedTable(e),n=t.clone();n.primaryColumns.forEach((e=>{e.isPrimary=!1})),await this.recreateTable(n,t),t.primaryColumns.forEach((e=>{e.isPrimary=!1}))}async createUniqueConstraint(e,t){await this.createUniqueConstraints(e,[t])}async createUniqueConstraints(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach((e=>r.addUniqueConstraint(e))),await this.recreateTable(r,n)}async dropUniqueConstraint(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableUnique(t)?t:n.uniques.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied unique constraint was not found in table ${n.name}`);await this.dropUniqueConstraints(n,[r])}async dropUniqueConstraints(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach((e=>r.removeUniqueConstraint(e))),await this.recreateTable(r,n)}async createCheckConstraint(e,t){await this.createCheckConstraints(e,[t])}async createCheckConstraints(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach((e=>r.addCheckConstraint(e))),await this.recreateTable(r,n)}async dropCheckConstraint(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableCheck(t)?t:n.checks.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied check constraint was not found in table ${n.name}`);await this.dropCheckConstraints(n,[r])}async dropCheckConstraints(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach((e=>r.removeCheckConstraint(e))),await this.recreateTable(r,n)}async createExclusionConstraint(e,t){throw new st.VR("Sqlite does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new st.VR("Sqlite does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new st.VR("Sqlite does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new st.VR("Sqlite does not support exclusion constraints.")}async createForeignKey(e,t){await this.createForeignKeys(e,[t])}async createForeignKeys(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach((e=>r.addForeignKey(e))),await this.recreateTable(r,n)}async dropForeignKey(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableForeignKey(t)?t:n.foreignKeys.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied foreign key was not found in table ${n.name}`);await this.dropForeignKeys(e,[r])}async dropForeignKeys(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone();t.forEach((e=>r.removeForeignKey(e))),await this.recreateTable(r,n)}async createIndex(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const r=this.createIndexSql(n,t),i=this.dropIndexSql(t);await this.executeQueries(r,i),n.addIndex(t)}async createIndices(e,t){const n=t.map((t=>this.createIndex(e,t)));await Promise.all(n)}async dropIndex(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableIndex(t)?t:n.indices.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied index ${t} was not found in table ${n.name}`);r.name||(r.name=this.generateIndexName(n,r));const i=this.dropIndexSql(r),a=this.createIndexSql(n,r);await this.executeQueries(i,a),n.removeIndex(r)}async dropIndices(e,t){const n=t.map((t=>this.dropIndex(e,t)));await Promise.all(n)}async clearTable(e){await this.query(`DELETE FROM ${this.escapePath(e)}`)}async clearDatabase(e){let t;e&&this.driver.getAttachedDatabaseHandleByRelativePath(e)&&(t=this.driver.getAttachedDatabaseHandleByRelativePath(e)),await this.query("PRAGMA foreign_keys = OFF");const n=this.isTransactionActive;n||await this.startTransaction();try{const e=t?`SELECT 'DROP VIEW "${t}"."' || name || '";' as query FROM "${t}"."sqlite_master" WHERE "type" = 'view'`:"SELECT 'DROP VIEW \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'view'",r=await this.query(e);await Promise.all(r.map((e=>this.query(e.query))));const i=t?`SELECT 'DROP TABLE "${t}"."' || name || '";' as query FROM "${t}"."sqlite_master" WHERE "type" = 'table' AND "name" != 'sqlite_sequence'`:"SELECT 'DROP TABLE \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"name\" != 'sqlite_sequence'",a=await this.query(i);await Promise.all(a.map((e=>this.query(e.query)))),n||await this.commitTransaction()}catch(e){try{n||await this.rollbackTransaction()}catch(e){}throw e}finally{await this.query("PRAGMA foreign_keys = ON")}}async loadViews(e){if(!await this.hasTable(this.getTypeormMetadataTableName()))return[];e||(e=[]);const t=e.map((e=>"'"+e+"'")).join(", ");let n=`SELECT "t".* FROM "${this.getTypeormMetadataTableName()}" "t" INNER JOIN "sqlite_master" s ON "s"."name" = "t"."name" AND "s"."type" = 'view' WHERE "t"."type" = '${Gn.VIEW}'`;t.length>0&&(n+=` AND "t"."name" IN (${t})`);return(await this.query(n)).map((e=>{const t=new Hn;return t.name=e.name,t.expression=e.value,t}))}async loadTableRecords(e,t){let n;const[r,i]=this.splitTablePath(e);r&&this.driver.getAttachedDatabasePathRelativeByHandle(r)&&(n=this.driver.getAttachedDatabasePathRelativeByHandle(r));return await this.query(`SELECT ${n?`'${n}'`:null} as database, ${r?`'${r}'`:null} as schema, * FROM ${r?`"${r}".`:""}${this.escapePath("sqlite_master")} WHERE "type" = '${t}' AND "${"table"===t?"name":"tbl_name"}" IN ('${i}')`)}async loadPragmaRecords(e,t){const[,n]=this.splitTablePath(e);return await this.query(`PRAGMA ${t}("${n}")`)}async loadTables(e){if(e&&0===e.length)return[];let t,n=[];if(e)n=(await Promise.all(e.map((e=>this.loadTableRecords(e,"table"))))).reduce(((e,t)=>[...e,...t]),[]).filter(Boolean),t=(await Promise.all((null!=e?e:[]).map((e=>this.loadTableRecords(e,"index"))))).reduce(((e,t)=>[...e,...t]),[]).filter(Boolean);else{const e='SELECT * FROM "sqlite_master" WHERE "type" = \'table\'';n.push(...await this.query(e));const r=n.map((({name:e})=>`'${e}'`)).join(", ");t=await this.query(`SELECT * FROM "sqlite_master" WHERE "type" = 'index' AND "tbl_name" IN (${r})`)}return 0===n.length?[]:Promise.all(n.map((async e=>{const n=e.database&&this.driver.getAttachedDatabaseHandleByRelativePath(e.database)?`${this.driver.getAttachedDatabaseHandleByRelativePath(e.database)}.${e.name}`:e.name,r=e.sql,i=r.includes("WITHOUT ROWID"),a=new ft({name:n,withoutRowid:i}),[s,o,c]=await Promise.all([this.loadPragmaRecords(n,"table_xinfo"),this.loadPragmaRecords(n,"index_list"),this.loadPragmaRecords(n,"foreign_key_list")]);let l;const u=e.sql;let d,h=u.toUpperCase().indexOf("AUTOINCREMENT");if(-1!==h){l=u.substr(0,h);const e=l.lastIndexOf(","),t=l.lastIndexOf("(");-1!==e?(l=l.substr(e),l=l.substr(0,l.lastIndexOf('"')),l=l.substr(l.indexOf('"')+1)):-1!==t&&(l=l.substr(t),l=l.substr(0,l.lastIndexOf('"')),l=l.substr(l.indexOf('"')+1))}a.columns=await Promise.all(s.map((async e=>{const t=new ot;if(t.name=e.name,t.type=e.type.toLowerCase(),t.default=null!==e.dflt_value&&void 0!==e.dflt_value?e.dflt_value:void 0,t.isNullable=0===e.notnull,t.isPrimary=e.pk>0,t.comment="",t.isGenerated=l===e.name,t.isGenerated&&(t.generationStrategy="increment"),2===e.hidden||3===e.hidden){t.generatedType=2===e.hidden?"VIRTUAL":"STORED";const n=await this.selectTypeormMetadataSql({table:a.name,type:Gn.GENERATED_COLUMN,name:t.name}),r=await this.query(n.query,n.parameters);r[0]&&r[0].value?t.asExpression=r[0].value:t.asExpression=""}if("varchar"===t.type){const e=r.match(new RegExp('"('+t.name+")\" varchar CHECK\\s*\\(\\s*\"\\1\"\\s+IN\\s*\\(('[^']+'(?:\\s*,\\s*'[^']+')+)\\s*\\)\\s*\\)"));e&&(t.enum=e[2].substr(1,e[2].length-2).split("','"))}let n=t.type.indexOf("(");if(-1!==n){const e=t.type;let r=e.substr(0,n);if(this.driver.withLengthColumnTypes.find((e=>e===r))){let i=parseInt(e.substring(n+1,e.length-1));i&&(t.length=i.toString(),t.type=r)}if(this.driver.withPrecisionColumnTypes.find((e=>e===r))){const n=new RegExp(`^${r}\\((\\d+),?\\s?(\\d+)?\\)`),i=e.match(n);i&&i[1]&&(t.precision=+i[1]),this.driver.withScaleColumnTypes.find((e=>e===r))&&i&&i[2]&&(t.scale=+i[2]),t.type=r}}return t})));const p=[],f=/CONSTRAINT "([^"]*)" FOREIGN KEY ?\((.*?)\) REFERENCES "([^"]*)"/g;for(;null!==(d=f.exec(r));)p.push({name:d[1],columns:d[2].substr(1,d[2].length-2).split('", "'),referencedTableName:d[3]});const m=cn.m.uniq(c,(e=>e.id));let y;a.foreignKeys=m.map((e=>{const t=c.filter((t=>t.id===e.id&&t.table===e.table)),n=t.map((e=>e.from)),r=t.map((e=>e.to)),i=p.find((t=>t.referencedTableName===e.table&&t.columns.every((e=>-1!==n.indexOf(e)))));return new lt({name:i.name,columnNames:n,referencedTableName:e.table,referencedColumnNames:r,onDelete:e.on_delete,onUpdate:e.on_update})}));const g=[],b=/CONSTRAINT "([^"]*)" UNIQUE ?\((.*?)\)/g;for(;null!==(y=b.exec(r));)g.push({name:y[1],columns:y[2].substr(1,y[2].length-2).split('", "')});const v=o.filter((e=>"u"===e.origin)).map((e=>e.name)).filter(((e,t,n)=>n.indexOf(e)===t)).map((async e=>{const t=o.find((t=>t.name===e)),n=(await this.query(`PRAGMA index_info("${t.name}")`)).sort(((e,t)=>parseInt(e.seqno)-parseInt(t.seqno))).map((e=>e.name));if(1===n.length){const e=a.columns.find((e=>!!n.find((t=>t===e.name))));e&&(e.isUnique=!0)}const r=g.find((e=>e.columns.every((e=>-1!==n.indexOf(e)))));return new dt({name:r?r.name:this.connection.namingStrategy.uniqueConstraintName(a,n),columnNames:n})}));let w;a.uniques=await Promise.all(v);const E=/CONSTRAINT "([^"]*)" CHECK ?(\(.*?\))([,]|[)]$)/g;for(;null!==(w=E.exec(r));)a.checks.push(new ht({name:w[1],expression:w[2]}));const _=o.filter((e=>"c"===e.origin)).map((e=>e.name)).filter(((e,t,n)=>n.indexOf(e)===t)).map((async n=>{const r=t.find((e=>e.name===n)),i=/WHERE (.*)/.exec(r.sql),s=o.find((e=>e.name===n)),c=(await this.query(`PRAGMA index_info("${s.name}")`)).sort(((e,t)=>parseInt(e.seqno)-parseInt(t.seqno))).map((e=>e.name)),l=`${e.database?`${e.database}.`:""}${s.name}`,u="1"===s.unique||1===s.unique;return new ct({table:a,name:l,columnNames:c,isUnique:u,where:i?i[1]:void 0})})),S=await Promise.all(_);return a.indices=S.filter((e=>!!e)),a})))}createTableSql(e,t,n){const r=e.columns.filter((e=>e.isPrimary)),i=r.find((e=>e.isGenerated&&"increment"===e.generationStrategy)),a=r.length>1;if(a&&i)throw new st.VR("Sqlite does not support AUTOINCREMENT on composite primary key");const s=e.columns.map((e=>this.buildCreateColumnSql(e,a))).join(", "),[o]=this.splitTablePath(e.name);let c=`CREATE TABLE ${this.escapePath(e.name)} (${s}`,[l,u]=this.splitTablePath(e.name);const d=n?`${l?`${l}.`:""}${u.replace(/^temporary_/,"")}`:e.name;if(e.columns.filter((e=>e.isUnique)).forEach((t=>{e.uniques.some((e=>1===e.columnNames.length&&e.columnNames[0]===t.name))||e.uniques.push(new dt({name:this.connection.namingStrategy.uniqueConstraintName(e,[t.name]),columnNames:[t.name]}))})),e.uniques.length>0){c+=`, ${e.uniques.map((e=>`CONSTRAINT "${e.name?e.name:this.connection.namingStrategy.uniqueConstraintName(d,e.columnNames)}" UNIQUE (${e.columnNames.map((e=>`"${e}"`)).join(", ")})`)).join(", ")}`}if(e.checks.length>0){c+=`, ${e.checks.map((e=>`CONSTRAINT "${e.name?e.name:this.connection.namingStrategy.checkConstraintName(d,e.expression)}" CHECK (${e.expression})`)).join(", ")}`}if(e.foreignKeys.length>0&&t){c+=`, ${e.foreignKeys.filter((e=>{const[t]=this.splitTablePath(e.referencedTableName);return t===o})).map((e=>{const[,t]=this.splitTablePath(e.referencedTableName),n=e.columnNames.map((e=>`"${e}"`)).join(", ");e.name||(e.name=this.connection.namingStrategy.foreignKeyName(d,e.columnNames,this.getTablePath(e),e.referencedColumnNames));const r=e.referencedColumnNames.map((e=>`"${e}"`)).join(", ");let i=`CONSTRAINT "${e.name}" FOREIGN KEY (${n}) REFERENCES "${t}" (${r})`;return e.onDelete&&(i+=` ON DELETE ${e.onDelete}`),e.onUpdate&&(i+=` ON UPDATE ${e.onUpdate}`),i})).join(", ")}`}if(r.length>1){c+=`, PRIMARY KEY (${r.map((e=>`"${e.name}"`)).join(", ")})`}return c+=")",e.withoutRowid&&(c+=" WITHOUT ROWID"),new Xn(c)}dropTableSql(e,t){const n=gt.t.isTable(e)?e.name:e,r=t?`DROP TABLE IF EXISTS ${this.escapePath(n)}`:`DROP TABLE ${this.escapePath(n)}`;return new Xn(r)}createViewSql(e){return"string"==typeof e.expression?new Xn(`CREATE VIEW "${e.name}" AS ${e.expression}`):new Xn(`CREATE VIEW "${e.name}" AS ${e.expression(this.connection).getQuery()}`)}insertViewDefinitionSql(e){const t="string"==typeof e.expression?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:Gn.VIEW,name:e.name,value:t})}dropViewSql(e){const t=gt.t.isView(e)?e.name:e;return new Xn(`DROP VIEW "${t}"`)}deleteViewDefinitionSql(e){const t=gt.t.isView(e)?e.name:e;return this.deleteTypeormMetadataSql({type:Gn.VIEW,name:t})}createIndexSql(e,t){const n=t.columnNames.map((e=>`"${e}"`)).join(", "),[r,i]=this.splitTablePath(e.name);return new Xn(`CREATE ${t.isUnique?"UNIQUE ":""}INDEX ${r?`"${r}".`:""}${this.escapePath(t.name)} ON "${i}" (${n}) ${t.where?"WHERE "+t.where:""}`)}dropIndexSql(e){let t=gt.t.isTableIndex(e)?e.name:e;return new Xn(`DROP INDEX ${this.escapePath(t)}`)}buildCreateColumnSql(e,t){let n='"'+e.name+'"';return gt.t.isColumnMetadata(e)?n+=" "+this.driver.normalizeType(e):n+=" "+this.connection.driver.createFullType(e),e.enum&&(n+=' CHECK( "'+e.name+'" IN ('+e.enum.map((e=>"'"+e+"'")).join(",")+") )"),e.isPrimary&&!t&&(n+=" PRIMARY KEY"),!0===e.isGenerated&&"increment"===e.generationStrategy&&(n+=" AUTOINCREMENT"),e.collation&&(n+=" COLLATE "+e.collation),!0!==e.isNullable&&(n+=" NOT NULL"),e.asExpression?n+=` AS (${e.asExpression}) ${e.generatedType?e.generatedType:"VIRTUAL"}`:void 0!==e.default&&null!==e.default&&(n+=" DEFAULT ("+e.default+")"),n}async recreateTable(e,t,n=!0){const r=[],i=[];t.indices.forEach((e=>{r.push(this.dropIndexSql(e)),i.push(this.createIndexSql(t,e))}));let[a,s]=this.splitTablePath(e.name),[,o]=this.splitTablePath(t.name);if(e.name=s=`${a?`${a}.`:""}temporary_${s}`,r.push(this.createTableSql(e,!0,!0)),i.push(this.dropTableSql(e)),n){let n=e.columns.filter((e=>!e.generatedType)).map((e=>`"${e.name}"`)),a=t.columns.filter((e=>!e.generatedType)).map((e=>`"${e.name}"`));a.length<n.length?n=e.columns.filter((e=>{const n=t.columns.find((t=>t.name===e.name));return(!n||!n.generatedType)&&(!e.generatedType&&n)})).map((e=>`"${e.name}"`)):a.length>n.length&&(a=t.columns.filter((t=>!t.generatedType&&e.columns.find((e=>e.name===t.name)))).map((e=>`"${e.name}"`))),r.push(new Xn(`INSERT INTO ${this.escapePath(e.name)}(${n.join(", ")}) SELECT ${a.join(", ")} FROM ${this.escapePath(t.name)}`)),i.push(new Xn(`INSERT INTO ${this.escapePath(t.name)}(${a.join(", ")}) SELECT ${n.join(", ")} FROM ${this.escapePath(e.name)}`))}r.push(this.dropTableSql(t)),i.push(this.createTableSql(t,!0)),r.push(new Xn(`ALTER TABLE ${this.escapePath(e.name)} RENAME TO ${this.escapePath(o)}`)),i.push(new Xn(`ALTER TABLE ${this.escapePath(t.name)} RENAME TO ${this.escapePath(s)}`)),e.name=t.name,e.indices.forEach((t=>{t.name||(t.name=this.connection.namingStrategy.indexName(e,t.columnNames,t.where)),r.push(this.createIndexSql(e,t)),i.push(this.dropIndexSql(t))})),t.columns.filter((t=>{const n=e.columns.find((e=>e.name===t.name));return t.generatedType&&t.asExpression&&(!n||!n.generatedType&&!n.asExpression)})).forEach((e=>{const n=this.deleteTypeormMetadataSql({table:t.name,type:Gn.GENERATED_COLUMN,name:e.name}),a=this.insertTypeormMetadataSql({table:t.name,type:Gn.GENERATED_COLUMN,name:e.name,value:e.asExpression});r.push(n),i.push(a)})),e.columns.filter((e=>e.generatedType&&e.asExpression&&!t.columns.some((t=>t.name===e.name)))).forEach((t=>{const n=this.insertTypeormMetadataSql({table:e.name,type:Gn.GENERATED_COLUMN,name:t.name,value:t.asExpression}),a=this.deleteTypeormMetadataSql({table:e.name,type:Gn.GENERATED_COLUMN,name:t.name});r.push(n),i.push(a)})),e.columns.filter((e=>e.generatedType&&e.asExpression)).forEach((n=>{const a=t.columns.find((e=>e.name===n.name&&e.generatedType&&n.generatedType&&e.asExpression!==n.asExpression));if(!a)return;const s=this.deleteTypeormMetadataSql({table:t.name,type:Gn.GENERATED_COLUMN,name:a.name}),o=this.insertTypeormMetadataSql({table:e.name,type:Gn.GENERATED_COLUMN,name:n.name,value:n.asExpression});r.push(s),r.push(o);const c=this.insertTypeormMetadataSql({table:e.name,type:Gn.GENERATED_COLUMN,name:a.name,value:a.asExpression}),l=this.deleteTypeormMetadataSql({table:t.name,type:Gn.GENERATED_COLUMN,name:n.name});i.push(c),i.push(l)})),await this.executeQueries(r,i),this.replaceCachedTable(t,e)}splitTablePath(e){return-1!==e.indexOf(".")?e.split("."):[void 0,e]}escapePath(e,t){return(gt.t.isTable(e)||gt.t.isView(e)?e.name:e).replace(/^\.+|\.+$/g,"").split(".").map((e=>t?e:`"${e}"`)).join(".")}}class nr{constructor(e){this.queryRunner=e}async broadcast(e,...t){const n=new fn.M,r=this[`broadcast${e}Event`];"function"==typeof r&&r.call(this,n,...t),await n.wait()}broadcastBeforeInsertEvent(e,t,n){n&&t.beforeInsertListeners.length&&t.beforeInsertListeners.forEach((t=>{if(t.isAllowed(n)){const r=t.execute(n);r instanceof Promise&&e.promises.push(r),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((r=>{if(this.isAllowedSubscriber(r,t.target)&&r.beforeInsert){const i=r.beforeInsert({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t});i instanceof Promise&&e.promises.push(i),e.count++}}))}broadcastBeforeUpdateEvent(e,t,n,r,i,a){n&&t.beforeUpdateListeners.length&&t.beforeUpdateListeners.forEach((t=>{if(t.isAllowed(n)){const r=t.execute(n);r instanceof Promise&&e.promises.push(r),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((s=>{if(this.isAllowedSubscriber(s,t.target)&&s.beforeUpdate){const o=s.beforeUpdate({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,updatedColumns:i||[],updatedRelations:a||[]});o instanceof Promise&&e.promises.push(o),e.count++}}))}broadcastBeforeRemoveEvent(e,t,n,r){n&&t.beforeRemoveListeners.length&&t.beforeRemoveListeners.forEach((t=>{if(t.isAllowed(n)){const r=t.execute(n);r instanceof Promise&&e.promises.push(r),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((i=>{if(this.isAllowedSubscriber(i,t.target)&&i.beforeRemove){const a=i.beforeRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r)});a instanceof Promise&&e.promises.push(a),e.count++}}))}broadcastBeforeSoftRemoveEvent(e,t,n,r){n&&t.beforeSoftRemoveListeners.length&&t.beforeSoftRemoveListeners.forEach((t=>{if(t.isAllowed(n)){const r=t.execute(n);r instanceof Promise&&e.promises.push(r),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((i=>{if(this.isAllowedSubscriber(i,t.target)&&i.beforeSoftRemove){const a=i.beforeSoftRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r)});a instanceof Promise&&e.promises.push(a),e.count++}}))}broadcastBeforeRecoverEvent(e,t,n,r){n&&t.beforeRecoverListeners.length&&t.beforeRecoverListeners.forEach((t=>{if(t.isAllowed(n)){const r=t.execute(n);r instanceof Promise&&e.promises.push(r),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((i=>{if(this.isAllowedSubscriber(i,t.target)&&i.beforeRecover){const a=i.beforeRecover({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r)});a instanceof Promise&&e.promises.push(a),e.count++}}))}broadcastAfterInsertEvent(e,t,n){n&&t.afterInsertListeners.length&&t.afterInsertListeners.forEach((t=>{if(t.isAllowed(n)){const r=t.execute(n);r instanceof Promise&&e.promises.push(r),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((r=>{if(this.isAllowedSubscriber(r,t.target)&&r.afterInsert){const i=r.afterInsert({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t});i instanceof Promise&&e.promises.push(i),e.count++}}))}broadcastBeforeTransactionStartEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.beforeTransactionStart){const n=t.beforeTransactionStart({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastAfterTransactionStartEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.afterTransactionStart){const n=t.afterTransactionStart({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastBeforeTransactionCommitEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.beforeTransactionCommit){const n=t.beforeTransactionCommit({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastAfterTransactionCommitEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.afterTransactionCommit){const n=t.afterTransactionCommit({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastBeforeTransactionRollbackEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.beforeTransactionRollback){const n=t.beforeTransactionRollback({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastAfterTransactionRollbackEvent(e){this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((t=>{if(t.afterTransactionRollback){const n=t.afterTransactionRollback({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});n instanceof Promise&&e.promises.push(n),e.count++}}))}broadcastAfterUpdateEvent(e,t,n,r,i,a){n&&t.afterUpdateListeners.length&&t.afterUpdateListeners.forEach((t=>{if(t.isAllowed(n)){const r=t.execute(n);r instanceof Promise&&e.promises.push(r),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((s=>{if(this.isAllowedSubscriber(s,t.target)&&s.afterUpdate){const o=s.afterUpdate({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,updatedColumns:i||[],updatedRelations:a||[]});o instanceof Promise&&e.promises.push(o),e.count++}}))}broadcastAfterRemoveEvent(e,t,n,r){n&&t.afterRemoveListeners.length&&t.afterRemoveListeners.forEach((t=>{if(t.isAllowed(n)){const r=t.execute(n);r instanceof Promise&&e.promises.push(r),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((i=>{if(this.isAllowedSubscriber(i,t.target)&&i.afterRemove){const a=i.afterRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r)});a instanceof Promise&&e.promises.push(a),e.count++}}))}broadcastAfterSoftRemoveEvent(e,t,n,r){n&&t.afterSoftRemoveListeners.length&&t.afterSoftRemoveListeners.forEach((t=>{if(t.isAllowed(n)){const r=t.execute(n);r instanceof Promise&&e.promises.push(r),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((i=>{if(this.isAllowedSubscriber(i,t.target)&&i.afterSoftRemove){const a=i.afterSoftRemove({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r)});a instanceof Promise&&e.promises.push(a),e.count++}}))}broadcastAfterRecoverEvent(e,t,n,r){n&&t.afterRecoverListeners.length&&t.afterRecoverListeners.forEach((t=>{if(t.isAllowed(n)){const r=t.execute(n);r instanceof Promise&&e.promises.push(r),e.count++}})),this.queryRunner.connection.subscribers.length&&this.queryRunner.connection.subscribers.forEach((i=>{if(this.isAllowedSubscriber(i,t.target)&&i.afterRecover){const a=i.afterRecover({connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager,entity:n,metadata:t,databaseEntity:r,entityId:t.getEntityIdMixedMap(r)});a instanceof Promise&&e.promises.push(a),e.count++}}))}broadcastLoadEventsForAll(e,t,n){return this.broadcastLoadEvent(e,t,n)}broadcastLoadEvent(e,t,n){const r=this.queryRunner.connection.subscribers.filter((e=>this.isAllowedSubscriber(e,t.target)&&e.afterLoad));if(t.relations.length||t.afterLoadListeners.length||r.length){const i=n.filter((e=>!(e instanceof Promise)));t.relations.length&&t.relations.forEach((t=>{i.forEach((n=>{if(t.isLazy&&!n.hasOwnProperty(t.propertyName))return;const r=t.getEntityValue(n);qt.B.isObject(r)&&this.broadcastLoadEvent(e,t.inverseEntityMetadata,Array.isArray(r)?r:[r])}))})),t.afterLoadListeners.length&&t.afterLoadListeners.forEach((t=>{i.forEach((n=>{if(t.isAllowed(n)){const r=t.execute(n);r instanceof Promise&&e.promises.push(r),e.count++}}))})),r.forEach((n=>{i.forEach((r=>{const i=n.afterLoad(r,{entity:r,metadata:t,connection:this.queryRunner.connection,queryRunner:this.queryRunner,manager:this.queryRunner.manager});i instanceof Promise&&e.promises.push(i),e.count++}))}))}}isAllowedSubscriber(e,t){return!e.listenTo||!e.listenTo()||e.listenTo()===Object||e.listenTo()===t||e.listenTo().isPrototypeOf(t)}}class rr{constructor(){this.records=[]}}class ir extends tr{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new nr(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async query(e,t,n=!1){if(this.isReleased)throw new Qn.E;const r=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const i=+new Date;try{const a=await new Promise((async(n,i)=>{r.executeSql(e,t,(e=>n(e)),(e=>i(e)))})),s=this.driver.options.maxQueryExecutionTime,o=+new Date-i;s&&o>s&&this.driver.connection.logger.logQuerySlow(o,e,t,this);const c=new rr;if("INSERT INTO"===e.substr(0,11))c.raw=a.insertId;else{let e=[];for(let t=0;t<a.rows.length;t++)e.push(a.rows.item(t));c.records=e,c.raw=e}return n?c:c.raw}catch(n){throw this.driver.connection.logger.logQueryError(n,e,t,this),new Jn.C(e,t,n)}}async startTransaction(){throw new st.VR("Transactions are not supported by the Cordova driver")}async commitTransaction(){throw new st.VR("Transactions are not supported by the Cordova driver")}async rollbackTransaction(){throw new st.VR("Transactions are not supported by the Cordova driver")}async clearDatabase(){await this.query("PRAGMA foreign_keys = OFF");try{const e="SELECT 'DROP VIEW \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'view'",t=await this.query(e),n="SELECT 'DROP TABLE \"' || name || '\";' as query FROM \"sqlite_master\" WHERE \"type\" = 'table' AND \"name\" != 'sqlite_sequence'",r=await this.query(n);await Promise.all(t.map((e=>this.query(e.query)))),await Promise.all(r.map((e=>this.query(e.query))))}finally{await this.query("PRAGMA foreign_keys = ON")}}parametrize(e,t=0){return Object.keys(e).map(((e,t)=>`"${e}"=?`))}}var ar=__webpack_require__(59855),sr=__webpack_require__(50722);class or extends Kn{constructor(e){if(super(e),this.database=this.options.database,!this.options.database)throw new ar.l("database");if(!this.options.location)throw new ar.l("location");this.loadDependencies()}async disconnect(){return this.queryRunner=void 0,new Promise(((e,t)=>{this.databaseConnection.close(e,t)}))}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new ir(this)),this.queryRunner}async createDatabaseConnection(){const e=Object.assign({},{name:this.options.database,location:this.options.location},this.options.extra||{}),t=await new Promise((t=>{this.sqlite.openDatabase(e,(e=>t(e)))}));return await new Promise(((e,n)=>{t.executeSql("PRAGMA foreign_keys = ON",[],(()=>e()),(e=>n(e)))})),t}loadDependencies(){try{const e=this.options.driver||window.sqlitePlugin;this.sqlite=e}catch(e){throw new sr.W("Cordova-SQLite","cordova-sqlite-storage")}}}class cr extends tr{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new nr(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async query(e,t,n=!1){if(this.isReleased)throw new Qn.E;const r=this.driver.connection;return new Promise((async(i,a)=>{const s=await this.connect(),o="INSERT INTO"===e.substr(0,11);r.logger.logQuery(e,t,this);const c=(s,c)=>{const u=this.driver.options.maxQueryExecutionTime,d=+new Date-l;u&&d>u&&r.logger.logQuerySlow(d,e,t,this),s&&(r.logger.logQueryError(s,e,t,this),a(new Jn.C(e,t,s)));const h=new rr;h.raw=c,!o&&Array.isArray(c)&&(h.records=c),i(n?h:h.raw)},l=+new Date;o?s.execSQL(e,t,c):s.all(e,t,c)}))}parametrize(e,t=0){return Object.keys(e).map(((e,t)=>`"${e}"=?`))}}var lr=__webpack_require__(1048).Buffer;class ur extends Kn{constructor(e){if(super(e),this.connection=e,this.options=e.options,this.database=this.options.database,this.driver=this.options.driver,!this.options.database)throw new ar.l("database");this.loadDependencies()}async disconnect(){return new Promise(((e,t)=>{this.queryRunner=void 0,this.databaseConnection.close().then(e).catch(t)}))}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new cr(this)),this.queryRunner}normalizeType(e){return e.type===lr?"blob":super.normalizeType(e)}createDatabaseConnection(){return new Promise(((e,t)=>{const n=Object.assign({},{readOnly:this.options.readOnly,key:this.options.key,multithreading:this.options.multithreading,migrate:this.options.migrate,iosFlags:this.options.iosFlags,androidFlags:this.options.androidFlags},this.options.extra||{});new this.sqlite(this.options.database,n,((n,r)=>{if(n)return t(n);r.resultType(this.sqlite.RESULTSASOBJECT),r.execSQL("PRAGMA foreign_keys = ON",[],((n,i)=>{if(n)return t(n);e(r)}))}))}))}loadDependencies(){if(this.sqlite=this.driver,!this.driver)throw new sr.W("Nativescript","nativescript-sqlite")}}class dr extends tr{constructor(e){super(),this.isDirty=!1,this.driver=e,this.connection=e.connection,this.broadcaster=new nr(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async flush(){this.isDirty&&(await this.driver.autoSave(),this.isDirty=!1)}async release(){return await this.flush(),super.release()}async commitTransaction(){await super.commitTransaction(),await this.flush()}async query(e,t=[],n=!1){if(this.isReleased)throw new Qn.E;const r=e.trim().split(" ",1)[0],i=this.driver.databaseConnection;this.driver.connection.logger.logQuery(e,t,this);const a=+new Date;let s;try{s=i.prepare(e),t&&(t=t.map((e=>void 0!==e?e:null)),s.bind(t));const o=this.driver.options.maxQueryExecutionTime,c=+new Date-a;o&&c>o&&this.driver.connection.logger.logQuerySlow(c,e,t,this);const l=[];for(;s.step();)l.push(s.getAsObject());const u=new rr;return u.affected=i.getRowsModified(),u.records=l,u.raw=l,s.free(),"SELECT"!==r&&(this.isDirty=!0),n?u:u.raw}catch(n){throw s&&s.free(),this.driver.connection.logger.logQueryError(n,e,t,this),new Jn.C(e,t,n)}}}var hr=__webpack_require__(1048).Buffer;class pr extends Kn{constructor(e){if(super(e),this.options.autoSave&&!this.options.location&&!this.options.autoSaveCallback)throw new ar.l("location or autoSaveCallback");this.loadDependencies()}async connect(){this.databaseConnection=await this.createDatabaseConnection()}async disconnect(){this.queryRunner=void 0,this.databaseConnection.close()}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new dr(this)),this.queryRunner}async load(e,t=!0){if("string"==typeof e){if("node"===nt.type){if(nt.fileExist(e)){const t=nt.readFileSync(e);return this.createDatabaseConnectionWithImport(t)}if(t)throw new st.VR(`File ${e} does not exist`);return this.createDatabaseConnectionWithImport()}{let n=null;if(this.options.useLocalForage){if(!window.localforage)throw new st.VR("localforage is not defined - please import localforage.js into your site");n=await window.localforage.getItem(e)}else n=nt.getGlobalVariable().localStorage.getItem(e);if(null!=n)return this.createDatabaseConnectionWithImport(JSON.parse(n));if(t)throw new st.VR(`File ${e} does not exist`);return this.createDatabaseConnectionWithImport()}}return this.createDatabaseConnectionWithImport(e)}async save(e){if(!e&&!this.options.location)throw new st.VR("No location is set, specify a location parameter or add the location option to your configuration");let t="";if(e?t=e:this.options.location&&(t=this.options.location),"node"===nt.type)try{const e=hr.from(this.databaseConnection.export());await nt.writeFile(t,e)}catch(e){throw new st.VR(`Could not save database, error: ${e}`)}else{const e=this.databaseConnection.export(),n=[].slice.call(e);if(this.options.useLocalForage){if(!window.localforage)throw new st.VR("localforage is not defined - please import localforage.js into your site");await window.localforage.setItem(t,JSON.stringify(n))}else nt.getGlobalVariable().localStorage.setItem(t,JSON.stringify(n))}}async autoSave(){this.options.autoSave&&(this.options.autoSaveCallback?await this.options.autoSaveCallback(this.export()):await this.save())}export(){return this.databaseConnection.export()}createGeneratedMap(e,t){const n=e.generatedColumns.reduce(((e,t)=>{if(t.isPrimary&&"increment"===t.generationStrategy){const n="SELECT last_insert_rowid()";try{let r=this.databaseConnection.exec(n);return this.connection.logger.logQuery(n),cn.m.mergeDeep(e,t.createValueMap(r[0].values[0][0]))}catch(e){this.connection.logger.logQueryError(e,n,[])}}return e}),{});return Object.keys(n).length>0?n:void 0}createDatabaseConnection(){return this.options.location?this.load(this.options.location,!1):this.createDatabaseConnectionWithImport(this.options.database)}async createDatabaseConnectionWithImport(e){const t="function"==typeof this.sqlite.Database?this.sqlite:await this.sqlite(this.options.sqlJsConfig);return e&&e.length>0?this.databaseConnection=new t.Database(e):this.databaseConnection=new t.Database,this.databaseConnection.exec("PRAGMA foreign_keys = ON"),this.databaseConnection}loadDependencies(){if("browser"===nt.type){const e=this.options.driver||window.SQL;this.sqlite=e}else try{const e=this.options.driver||nt.load("sql.js");this.sqlite=e}catch(e){throw new sr.W("sql.js","sql.js")}}}class fr extends tr{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new nr(this)}async startTransaction(){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(e){throw this.isTransactionActive=!1,e}this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive&&void 0===this.transaction)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transaction=void 0,this.isTransactionActive=!1,this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive&&void 0===this.transaction)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transaction=void 0,this.isTransactionActive=!1,this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async beforeMigration(){const e=await this.connect();return new Promise(((t,n)=>{e.exec([{sql:"PRAGMA foreign_keys = OFF",args:[]}],!1,(e=>e?n(e):t()))}))}async afterMigration(){const e=await this.connect();return new Promise(((t,n)=>{e.exec([{sql:"PRAGMA foreign_keys = ON",args:[]}],!1,(e=>e?n(e):t()))}))}async query(e,t,n=!1){if(this.isReleased)throw new Qn.E;return new Promise((async(r,i)=>{const a=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const s=+new Date;a.transaction((async a=>{void 0===this.transaction&&(await this.startTransaction(),this.transaction=a),this.transaction.executeSql(e,t,((i,a)=>{const o=this.driver.options.maxQueryExecutionTime,c=+new Date-s;o&&c>o&&this.driver.connection.logger.logQuerySlow(c,e,t,this);const l=new rr;if((null==a?void 0:a.hasOwnProperty("rowsAffected"))&&(l.affected=a.rowsAffected),null==a?void 0:a.hasOwnProperty("rows")){let e=[];for(let t=0;t<a.rows.length;t++)e.push(a.rows.item(t));l.raw=e,l.records=e}e.startsWith("INSERT INTO")&&(l.raw=a.insertId),r(n?l:l.raw)}),((n,r)=>{this.driver.connection.logger.logQueryError(r,e,t,this),i(new Jn.C(e,t,r))}))}),(async e=>{await this.rollbackTransaction(),i(e)}),(()=>{this.isTransactionActive=!1,this.transaction=void 0}))}))}}class mr extends Kn{constructor(e){if(super(e),this.database=this.options.database,!this.options.database)throw new ar.l("database");if(!this.options.driver)throw new ar.l("driver");this.sqlite=this.options.driver}async disconnect(){return new Promise(((e,t)=>{try{this.queryRunner=void 0,this.databaseConnection._db.close(),this.databaseConnection=void 0,e()}catch(e){t(e)}}))}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new fr(this)),this.queryRunner}createDatabaseConnection(){return new Promise(((e,t)=>{try{const n=this.sqlite.openDatabase(this.options.database);n.transaction((r=>{r.executeSql("PRAGMA foreign_keys = ON",[],((t,r)=>{e(n)}),((e,n)=>{t({transaction:e,error:n})}))}),(e=>{t(e)}))}catch(e){t(e)}}))}}class yr extends er{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.client=t,this.broadcaster=new nr(this)}async connect(){return{}}release(){return this.isReleased=!0,this.databaseConnection&&this.databaseConnection.release(),Promise.resolve()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(e){throw this.isTransactionActive=!1,e}0===this.transactionDepth?await this.client.startTransaction():await this.query(`SAVEPOINT typeorm_${this.transactionDepth}`),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.client.commitTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.client.rollbackTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new Qn.E;const r=await this.client.query(e,t),i=new rr;return i.raw=r,(null==r?void 0:r.hasOwnProperty("records"))&&Array.isArray(r.records)&&(i.records=r.records),(null==r?void 0:r.hasOwnProperty("numberOfRecordsUpdated"))&&(i.affected=r.numberOfRecordsUpdated),n?i:i.raw}stream(e,t,n,r){if(this.isReleased)throw new Qn.E;return new Promise((async(i,a)=>{try{const a=(await this.connect()).query(e,t);n&&a.on("end",n),r&&a.on("error",r),i(a)}catch(e){a(e)}}))}async getDatabases(){return Promise.resolve([])}async getSchemas(e){throw new st.VR("MySql driver does not support table schemas")}async hasDatabase(e){return!!(await this.query(`SELECT * FROM \`INFORMATION_SCHEMA\`.\`SCHEMATA\` WHERE \`SCHEMA_NAME\` = '${e}'`)).length}async getCurrentDatabase(){return(await this.query("SELECT DATABASE() AS `db_name`"))[0].db_name}async hasSchema(e){throw new st.VR("MySql driver does not support table schemas")}async getCurrentSchema(){return(await this.query("SELECT SCHEMA() AS `schema_name`"))[0].schema_name}async hasTable(e){const t=this.driver.parseTableName(e),n=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`COLUMNS\` WHERE \`TABLE_SCHEMA\` = '${t.database}' AND \`TABLE_NAME\` = '${t.tableName}'`;return!!(await this.query(n)).length}async hasColumn(e,t){const n=this.driver.parseTableName(e),r=gt.t.isTableColumn(t)?t.name:t,i=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`COLUMNS\` WHERE \`TABLE_SCHEMA\` = '${n.database}' AND \`TABLE_NAME\` = '${n.tableName}' AND \`COLUMN_NAME\` = '${r}'`;return!!(await this.query(i)).length}async createDatabase(e,t){const n=t?`CREATE DATABASE IF NOT EXISTS \`${e}\``:`CREATE DATABASE \`${e}\``,r=`DROP DATABASE \`${e}\``;await this.executeQueries(new Xn(n),new Xn(r))}async dropDatabase(e,t){const n=t?`DROP DATABASE IF EXISTS \`${e}\``:`DROP DATABASE \`${e}\``,r=`CREATE DATABASE \`${e}\``;await this.executeQueries(new Xn(n),new Xn(r))}async createSchema(e,t){throw new st.VR("Schema create queries are not supported by MySql driver.")}async dropSchema(e,t){throw new st.VR("Schema drop queries are not supported by MySql driver.")}async createTable(e,t=!1,n=!0){if(t){if(await this.hasTable(e))return Promise.resolve()}const r=[],i=[];return r.push(this.createTableSql(e,n)),i.push(this.dropTableSql(e)),e.indices.forEach((t=>i.push(this.dropIndexSql(e,t)))),n&&e.foreignKeys.forEach((t=>i.push(this.dropForeignKeySql(e,t)))),this.executeQueries(r,i)}async dropTable(e,t,n=!0){if(t){if(!await this.hasTable(e))return Promise.resolve()}const r=n,i=this.getTablePath(e),a=await this.getCachedTable(i),s=[],o=[];n&&a.foreignKeys.forEach((e=>s.push(this.dropForeignKeySql(a,e)))),a.indices.forEach((e=>s.push(this.dropIndexSql(a,e)))),s.push(this.dropTableSql(a)),o.push(this.createTableSql(a,r)),await this.executeQueries(s,o)}async createView(e){const t=[],n=[];t.push(this.createViewSql(e)),t.push(await this.insertViewDefinitionSql(e)),n.push(this.dropViewSql(e)),n.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(t,n)}async dropView(e){const t=gt.t.isView(e)?e.name:e,n=await this.getCachedView(t),r=[],i=[];r.push(await this.deleteViewDefinitionSql(n)),r.push(this.dropViewSql(n)),i.push(await this.insertViewDefinitionSql(n)),i.push(this.createViewSql(n)),await this.executeQueries(r,i)}async renameTable(e,t){const n=[],r=[],i=gt.t.isTable(e)?e:await this.getCachedTable(e),a=i.clone(),{database:s}=this.driver.parseTableName(i);a.name=s?`${s}.${t}`:t,n.push(new Xn(`RENAME TABLE ${this.escapePath(i)} TO ${this.escapePath(a)}`)),r.push(new Xn(`RENAME TABLE ${this.escapePath(a)} TO ${this.escapePath(i)}`)),a.indices.forEach((e=>{const t=e.columnNames.map((e=>`\`${e}\``)).join(", "),i=this.connection.namingStrategy.indexName(a,e.columnNames,e.where);let s="";e.isUnique&&(s+="UNIQUE "),e.isSpatial&&(s+="SPATIAL "),e.isFulltext&&(s+="FULLTEXT "),n.push(new Xn(`ALTER TABLE ${this.escapePath(a)} DROP INDEX \`${e.name}\`, ADD ${s}INDEX \`${i}\` (${t})`)),r.push(new Xn(`ALTER TABLE ${this.escapePath(a)} DROP INDEX \`${i}\`, ADD ${s}INDEX \`${e.name}\` (${t})`)),e.name=i})),a.foreignKeys.forEach((e=>{const t=e.columnNames.map((e=>`\`${e}\``)).join(", "),i=e.referencedColumnNames.map((e=>`\`${e}\``)).join(","),s=this.connection.namingStrategy.foreignKeyName(a,e.columnNames);let o=`ALTER TABLE ${this.escapePath(a)} DROP FOREIGN KEY \`${e.name}\`, ADD CONSTRAINT \`${s}\` FOREIGN KEY (${t}) REFERENCES ${this.escapePath(this.getTablePath(e))}(${i})`;e.onDelete&&(o+=` ON DELETE ${e.onDelete}`),e.onUpdate&&(o+=` ON UPDATE ${e.onUpdate}`);let c=`ALTER TABLE ${this.escapePath(a)} DROP FOREIGN KEY \`${s}\`, ADD CONSTRAINT \`${e.name}\` FOREIGN KEY (${t}) REFERENCES ${this.escapePath(this.getTablePath(e))}(${i})`;e.onDelete&&(c+=` ON DELETE ${e.onDelete}`),e.onUpdate&&(c+=` ON UPDATE ${e.onUpdate}`),n.push(new Xn(o)),r.push(new Xn(c)),e.name=s})),await this.executeQueries(n,r),i.name=a.name,this.replaceCachedTable(i,a)}async addColumn(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone(),i=[],a=[],s=r.primaryColumns.length>0;if(i.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(t,s,!1)}`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN \`${t.name}\``)),t.isPrimary&&s){const e=r.columns.find((e=>e.isGenerated&&"increment"===e.generationStrategy));if(e){const r=e.clone();r.isGenerated=!1,r.generationStrategy=void 0,i.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(r,!0)}`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${r.name}\` ${this.buildCreateColumnSql(t,!0)}`))}const s=r.primaryColumns;let o=s.map((e=>`\`${e.name}\``)).join(", ");if(i.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP PRIMARY KEY`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD PRIMARY KEY (${o})`)),s.push(t),o=s.map((e=>`\`${e.name}\``)).join(", "),i.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD PRIMARY KEY (${o})`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP PRIMARY KEY`)),e){const r=e.clone();r.isGenerated=!1,r.generationStrategy=void 0,i.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${r.name}\` ${this.buildCreateColumnSql(t,!0)}`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(r,!0)}`))}}const o=r.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===t.name));if(o)i.push(this.createIndexSql(n,o)),a.push(this.dropIndexSql(n,o));else if(t.isUnique){const e=new ct({name:this.connection.namingStrategy.indexName(n,[t.name]),columnNames:[t.name],isUnique:!0});r.indices.push(e),r.uniques.push(new dt({name:e.name,columnNames:e.columnNames})),i.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD UNIQUE INDEX \`${e.name}\` (\`${t.name}\`)`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP INDEX \`${e.name}\``))}await this.executeQueries(i,a),r.addColumn(t),this.replaceCachedTable(n,r)}async addColumns(e,t){for(const n of t)await this.addColumn(e,n)}async renameColumn(e,t,n){const r=gt.t.isTable(e)?e:await this.getCachedTable(e),i=gt.t.isTableColumn(t)?t:r.columns.find((e=>e.name===t));if(!i)throw new st.VR(`Column "${t}" was not found in the "${r.name}" table.`);let a;gt.t.isTableColumn(n)?a=n:(a=i.clone(),a.name=n),await this.changeColumn(r,i,a)}async changeColumn(e,t,n){const r=gt.t.isTable(e)?e:await this.getCachedTable(e);let i=r.clone();const a=[],s=[],o=gt.t.isTableColumn(t)?t:r.columns.find((e=>e.name===t));if(!o)throw new st.VR(`Column "${t}" was not found in the "${r.name}" table.`);if(n.isGenerated!==o.isGenerated&&"uuid"!==n.generationStrategy||o.type!==n.type||o.length!==n.length||o.generatedType!==n.generatedType)await this.dropColumn(r,o),await this.addColumn(r,n),i=r.clone();else{if(n.name!==o.name){a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} CHANGE \`${o.name}\` \`${n.name}\` ${this.buildCreateColumnSql(o,!0,!0)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} CHANGE \`${n.name}\` \`${o.name}\` ${this.buildCreateColumnSql(o,!0,!0)}`)),i.findColumnIndices(o).forEach((e=>{e.columnNames.splice(e.columnNames.indexOf(o.name),1),e.columnNames.push(n.name);const t=e.columnNames.map((e=>`\`${e}\``)).join(", "),c=this.connection.namingStrategy.indexName(i,e.columnNames,e.where);let l="";e.isUnique&&(l+="UNIQUE "),e.isSpatial&&(l+="SPATIAL "),e.isFulltext&&(l+="FULLTEXT "),a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP INDEX \`${e.name}\`, ADD ${l}INDEX \`${c}\` (${t})`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP INDEX \`${c}\`, ADD ${l}INDEX \`${e.name}\` (${t})`)),e.name=c})),i.findColumnForeignKeys(o).forEach((e=>{e.columnNames.splice(e.columnNames.indexOf(o.name),1),e.columnNames.push(n.name);const t=e.columnNames.map((e=>`\`${e}\``)).join(", "),c=e.referencedColumnNames.map((e=>`\`${e}\``)).join(","),l=this.connection.namingStrategy.foreignKeyName(i,e.columnNames);let u=`ALTER TABLE ${this.escapePath(r)} DROP FOREIGN KEY \`${e.name}\`, ADD CONSTRAINT \`${l}\` FOREIGN KEY (${t}) REFERENCES ${this.escapePath(this.getTablePath(e))}(${c})`;e.onDelete&&(u+=` ON DELETE ${e.onDelete}`),e.onUpdate&&(u+=` ON UPDATE ${e.onUpdate}`);let d=`ALTER TABLE ${this.escapePath(r)} DROP FOREIGN KEY \`${l}\`, ADD CONSTRAINT \`${e.name}\` FOREIGN KEY (${t}) REFERENCES ${this.escapePath(this.getTablePath(e))}(${c})`;e.onDelete&&(d+=` ON DELETE ${e.onDelete}`),e.onUpdate&&(d+=` ON UPDATE ${e.onUpdate}`),a.push(new Xn(u)),s.push(new Xn(d)),e.name=l}));const e=i.columns.find((e=>e.name===o.name));i.columns[i.columns.indexOf(e)].name=n.name,o.name=n.name}if(this.isColumnChanged(o,n,!0)&&(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} CHANGE \`${o.name}\` ${this.buildCreateColumnSql(n,!0)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} CHANGE \`${n.name}\` ${this.buildCreateColumnSql(o,!0)}`))),n.isPrimary!==o.isPrimary){const e=i.columns.find((e=>e.isGenerated&&"increment"===e.generationStrategy));if(e){const t=e.clone();t.isGenerated=!1,t.generationStrategy=void 0,a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(t,!0)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(e,!0)}`))}const t=i.primaryColumns;if(t.length>0){const e=t.map((e=>`\`${e.name}\``)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP PRIMARY KEY`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD PRIMARY KEY (${e})`))}if(!0===n.isPrimary){t.push(n);i.columns.find((e=>e.name===n.name)).isPrimary=!0;const e=t.map((e=>`\`${e.name}\``)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD PRIMARY KEY (${e})`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP PRIMARY KEY`))}else{const e=t.find((e=>e.name===n.name));t.splice(t.indexOf(e),1);if(i.columns.find((e=>e.name===n.name)).isPrimary=!1,t.length>0){const e=t.map((e=>`\`${e.name}\``)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD PRIMARY KEY (${e})`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP PRIMARY KEY`))}}if(e){const t=e.clone();t.isGenerated=!1,t.generationStrategy=void 0,a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(e,!0)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(t,!0)}`))}}if(n.isUnique!==o.isUnique)if(!0===n.isUnique){const e=new ct({name:this.connection.namingStrategy.indexName(r,[n.name]),columnNames:[n.name],isUnique:!0});i.indices.push(e),i.uniques.push(new dt({name:e.name,columnNames:e.columnNames})),a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD UNIQUE INDEX \`${e.name}\` (\`${n.name}\`)`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP INDEX \`${e.name}\``))}else{const e=i.indices.find((e=>1===e.columnNames.length&&!0===e.isUnique&&!!e.columnNames.find((e=>e===n.name))));i.indices.splice(i.indices.indexOf(e),1);const t=i.uniques.find((t=>t.name===e.name));i.uniques.splice(i.uniques.indexOf(t),1),a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP INDEX \`${e.name}\``)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD UNIQUE INDEX \`${e.name}\` (\`${n.name}\`)`))}}await this.executeQueries(a,s),this.replaceCachedTable(r,i)}async changeColumns(e,t){for(const{oldColumn:n,newColumn:r}of t)await this.changeColumn(e,n,r)}async dropColumn(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableColumn(t)?t:n.findColumnByName(t);if(!r)throw new st.VR(`Column "${t}" was not found in table "${n.name}"`);const i=n.clone(),a=[],s=[];if(r.isPrimary){const e=i.columns.find((e=>e.isGenerated&&"increment"===e.generationStrategy));if(e){const t=e.clone();t.isGenerated=!1,t.generationStrategy=void 0,a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(t,!0)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(e,!0)}`))}const t=i.primaryColumns.map((e=>`\`${e.name}\``)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(i)} DROP PRIMARY KEY`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(i)} ADD PRIMARY KEY (${t})`));if(i.findColumnByName(r.name).isPrimary=!1,i.primaryColumns.length>0){const e=i.primaryColumns.map((e=>`\`${e.name}\``)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(i)} ADD PRIMARY KEY (${e})`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(i)} DROP PRIMARY KEY`))}if(e&&e.name!==r.name){const t=e.clone();t.isGenerated=!1,t.generationStrategy=void 0,a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${t.name}\` ${this.buildCreateColumnSql(e,!0)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(t,!0)}`))}}const o=i.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===r.name));if(o)i.indices.splice(i.indices.indexOf(o),1),a.push(this.dropIndexSql(n,o)),s.push(this.createIndexSql(n,o));else if(r.isUnique){const e=this.connection.namingStrategy.uniqueConstraintName(n,[r.name]),t=i.uniques.find((t=>t.name===e));t&&i.uniques.splice(i.uniques.indexOf(t),1);const o=this.connection.namingStrategy.indexName(n,[r.name]),c=i.indices.find((e=>e.name===o));c&&i.indices.splice(i.indices.indexOf(c),1),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP INDEX \`${o}\``)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD UNIQUE INDEX \`${o}\` (\`${r.name}\`)`))}a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN \`${r.name}\``)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(r,!0)}`)),await this.executeQueries(a,s),i.removeColumn(r),this.replaceCachedTable(n,i)}async dropColumns(e,t){for(const n of t)await this.dropColumn(e,n)}async createPrimaryKey(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone(),i=this.createPrimaryKeySql(n,t),a=this.dropPrimaryKeySql(n);await this.executeQueries(i,a),r.columns.forEach((e=>{t.find((t=>t===e.name))&&(e.isPrimary=!0)})),this.replaceCachedTable(n,r)}async updatePrimaryKeys(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone(),i=t.map((e=>e.name)),a=[],s=[],o=r.columns.find((e=>e.isGenerated&&"increment"===e.generationStrategy));if(o){const e=o.clone();e.isGenerated=!1,e.generationStrategy=void 0,a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${o.name}\` ${this.buildCreateColumnSql(e,!0)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(o,!0)}`))}const c=r.primaryColumns;if(c.length>0){const e=c.map((e=>`\`${e.name}\``)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP PRIMARY KEY`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD PRIMARY KEY (${e})`))}r.columns.filter((e=>-1!==i.indexOf(e.name))).forEach((e=>e.isPrimary=!0));const l=i.map((e=>`\`${e}\``)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD PRIMARY KEY (${l})`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP PRIMARY KEY`));const u=o||t.find((e=>e.isGenerated&&"increment"===e.generationStrategy));if(u){const e=u.clone();e.isGenerated=!1,e.generationStrategy=void 0,a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${e.name}\` ${this.buildCreateColumnSql(u,!0)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} CHANGE \`${u.name}\` ${this.buildCreateColumnSql(e,!0)}`));const t=r.columns.find((e=>e.name===u.name));t.isGenerated=!0,t.generationStrategy="increment"}await this.executeQueries(a,s),this.replaceCachedTable(n,r)}async dropPrimaryKey(e){const t=gt.t.isTable(e)?e:await this.getCachedTable(e),n=this.dropPrimaryKeySql(t),r=this.createPrimaryKeySql(t,t.primaryColumns.map((e=>e.name)));await this.executeQueries(n,r),t.primaryColumns.forEach((e=>{e.isPrimary=!1}))}async createUniqueConstraint(e,t){throw new st.VR("MySql does not support unique constraints. Use unique index instead.")}async createUniqueConstraints(e,t){throw new st.VR("MySql does not support unique constraints. Use unique index instead.")}async dropUniqueConstraint(e,t){throw new st.VR("MySql does not support unique constraints. Use unique index instead.")}async dropUniqueConstraints(e,t){throw new st.VR("MySql does not support unique constraints. Use unique index instead.")}async createCheckConstraint(e,t){throw new st.VR("MySql does not support check constraints.")}async createCheckConstraints(e,t){throw new st.VR("MySql does not support check constraints.")}async dropCheckConstraint(e,t){throw new st.VR("MySql does not support check constraints.")}async dropCheckConstraints(e,t){throw new st.VR("MySql does not support check constraints.")}async createExclusionConstraint(e,t){throw new st.VR("MySql does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new st.VR("MySql does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new st.VR("MySql does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new st.VR("MySql does not support exclusion constraints.")}async createForeignKey(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(n,t.columnNames));const r=this.createForeignKeySql(n,t),i=this.dropForeignKeySql(n,t);await this.executeQueries(r,i),n.addForeignKey(t)}async createForeignKeys(e,t){const n=t.map((t=>this.createForeignKey(e,t)));await Promise.all(n)}async dropForeignKey(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableForeignKey(t)?t:n.foreignKeys.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied foreign key was not found in table ${n.name}`);const i=this.dropForeignKeySql(n,r),a=this.createForeignKeySql(n,r);await this.executeQueries(i,a),n.removeForeignKey(r)}async dropForeignKeys(e,t){const n=t.map((t=>this.dropForeignKey(e,t)));await Promise.all(n)}async createIndex(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const r=this.createIndexSql(n,t),i=this.dropIndexSql(n,t);await this.executeQueries(r,i),n.addIndex(t,!0)}async createIndices(e,t){const n=t.map((t=>this.createIndex(e,t)));await Promise.all(n)}async dropIndex(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableIndex(t)?t:n.indices.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied index ${t} was not found in table ${n.name}`);r.name||(r.name=this.generateIndexName(n,r));const i=this.dropIndexSql(n,r),a=this.createIndexSql(n,r);await this.executeQueries(i,a),n.removeIndex(r,!0)}async dropIndices(e,t){const n=t.map((t=>this.dropIndex(e,t)));await Promise.all(n)}async clearTable(e){await this.query(`TRUNCATE TABLE ${this.escapePath(e)}`)}async clearDatabase(e){const t=e||this.driver.database;if(!t)throw new st.VR("Can not clear database. No database is specified");if(!await this.hasDatabase(t))return Promise.resolve();const n=this.isTransactionActive;n||await this.startTransaction();try{const e=`SELECT concat('DROP VIEW IF EXISTS \`', table_schema, '\`.\`', table_name, '\`') AS \`query\` FROM \`INFORMATION_SCHEMA\`.\`VIEWS\` WHERE \`TABLE_SCHEMA\` = '${t}'`,r=await this.query(e);await Promise.all(r.map((e=>this.query(e.query))));const i="SET FOREIGN_KEY_CHECKS = 0;",a=`SELECT concat('DROP TABLE IF EXISTS \`', table_schema, '\`.\`', table_name, '\`') AS \`query\` FROM \`INFORMATION_SCHEMA\`.\`TABLES\` WHERE \`TABLE_SCHEMA\` = '${t}'`,s="SET FOREIGN_KEY_CHECKS = 1;";await this.query(i);const o=await this.query(a);await Promise.all(o.map((e=>this.query(e.query)))),await this.query(s),n||await this.commitTransaction()}catch(e){try{n||await this.rollbackTransaction()}catch(e){}throw e}}async loadViews(e){if(!await this.hasTable(this.getTypeormMetadataTableName()))return[];e||(e=[]);const t=await this.getCurrentDatabase(),n=e.map((e=>{let{database:n,tableName:r}=this.driver.parseTableName(e);return n||(n=t),`(\`t\`.\`schema\` = '${n}' AND \`t\`.\`name\` = '${r}')`})).join(" OR "),r=`SELECT \`t\`.*, \`v\`.\`check_option\` FROM ${this.escapePath(this.getTypeormMetadataTableName())} \`t\` INNER JOIN \`information_schema\`.\`views\` \`v\` ON \`v\`.\`table_schema\` = \`t\`.\`schema\` AND \`v\`.\`table_name\` = \`t\`.\`name\` WHERE \`t\`.\`type\` = '${Gn.VIEW}' ${n?`AND (${n})`:""}`;return(await this.query(r)).map((e=>{const n=new Hn,r=e.schema===t?void 0:e.schema;return n.database=e.schema,n.name=this.driver.buildTableName(e.name,void 0,r),n.expression=e.value,n}))}async loadTables(e){if(e&&0===e.length)return[];const t=[],n=await this.getCurrentDatabase();if(e){const r="SELECT TABLE_NAME, TABLE_SCHEMA FROM `INFORMATION_SCHEMA`.`TABLES` WHERE "+e.map((e=>{let[t,r]=e.split(".");return r||(r=t,t=this.driver.database||n),`(\`TABLE_SCHEMA\` = '${t}' AND \`TABLE_NAME\` = '${r}')`})).join(" OR ");t.push(...await this.query(r))}else{const e="SELECT TABLE_NAME, TABLE_SCHEMA FROM `INFORMATION_SCHEMA`.`TABLES`";t.push(...await this.query(e))}if(0===t.length)return[];const r=t.map((({TABLE_NAME:e,TABLE_SCHEMA:t})=>`(\`TABLE_SCHEMA\` = '${t}' AND \`TABLE_NAME\` = '${e}')`)).join(" OR "),i="SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE "+r,a=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`KEY_COLUMN_USAGE\` WHERE \`CONSTRAINT_NAME\` = 'PRIMARY' AND (${r})`,s=`SELECT \`s\`.* FROM \`INFORMATION_SCHEMA\`.\`STATISTICS\` \`s\` LEFT JOIN \`INFORMATION_SCHEMA\`.\`REFERENTIAL_CONSTRAINTS\` \`rc\` ON \`s\`.\`INDEX_NAME\` = \`rc\`.\`CONSTRAINT_NAME\` WHERE (${t.map((({TABLE_NAME:e,TABLE_SCHEMA:t})=>`(\`s\`.\`TABLE_SCHEMA\` = '${t}' AND \`s\`.\`TABLE_NAME\` = '${e}')`)).join(" OR ")}) AND \`s\`.\`INDEX_NAME\` != 'PRIMARY' AND \`rc\`.\`CONSTRAINT_NAME\` IS NULL`,o="SELECT `kcu`.`TABLE_SCHEMA`, `kcu`.`TABLE_NAME`, `kcu`.`CONSTRAINT_NAME`, `kcu`.`COLUMN_NAME`, `kcu`.`REFERENCED_TABLE_SCHEMA`, `kcu`.`REFERENCED_TABLE_NAME`, `kcu`.`REFERENCED_COLUMN_NAME`, `rc`.`DELETE_RULE` `ON_DELETE`, `rc`.`UPDATE_RULE` `ON_UPDATE` FROM `INFORMATION_SCHEMA`.`KEY_COLUMN_USAGE` `kcu` INNER JOIN `INFORMATION_SCHEMA`.`REFERENTIAL_CONSTRAINTS` `rc` ON `rc`.`constraint_name` = `kcu`.`constraint_name` WHERE "+t.map((({TABLE_NAME:e,TABLE_SCHEMA:t})=>`(\`kcu\`.\`TABLE_SCHEMA\` = '${t}' AND \`kcu\`.\`TABLE_NAME\` = '${e}')`)).join(" OR "),[c,l,u,d,h]=await Promise.all([this.query(i),this.query(a),this.query("SELECT `SCHEMA_NAME`, `DEFAULT_CHARACTER_SET_NAME` as `CHARSET`, `DEFAULT_COLLATION_NAME` AS `COLLATION` FROM `INFORMATION_SCHEMA`.`SCHEMATA`"),this.query(s),this.query(o)]);return Promise.all(t.map((async e=>{const t=new ft,r=u.find((t=>t.SCHEMA_NAME===e.TABLE_SCHEMA)),i=r.COLLATION,a=r.CHARSET,s=e.TABLE_SCHEMA===n?void 0:e.TABLE_SCHEMA;t.database=e.TABLE_SCHEMA,t.name=this.driver.buildTableName(e.TABLE_NAME,void 0,s),t.columns=c.filter((t=>t.TABLE_NAME===e.TABLE_NAME&&t.TABLE_SCHEMA===e.TABLE_SCHEMA)).map((n=>{const r=d.filter((t=>t.TABLE_NAME===e.TABLE_NAME&&t.TABLE_SCHEMA===e.TABLE_SCHEMA&&t.COLUMN_NAME===n.COLUMN_NAME&&0===parseInt(t.NON_UNIQUE,10))),s=this.connection.entityMetadatas.find((e=>this.getTablePath(t)===this.getTablePath(e))),o=r.length>0&&s&&s.indices.some((e=>r.some((t=>e.name===t.INDEX_NAME&&!1===e.synchronize)))),c=r.every((e=>d.some((t=>t.INDEX_NAME===e.INDEX_NAME&&t.COLUMN_NAME!==n.COLUMN_NAME)))),u=new ot;if(u.name=n.COLUMN_NAME,u.type=n.DATA_TYPE.toLowerCase(),-1!==this.driver.withWidthColumnTypes.indexOf(u.type)){const e=n.COLUMN_TYPE.substring(n.COLUMN_TYPE.indexOf("(")+1,n.COLUMN_TYPE.indexOf(")"));u.width=e&&!this.isDefaultColumnWidth(t,u,parseInt(e))?parseInt(e):void 0}if(null===n.COLUMN_DEFAULT||void 0===n.COLUMN_DEFAULT?u.default=void 0:u.default="CURRENT_TIMESTAMP"===n.COLUMN_DEFAULT?n.COLUMN_DEFAULT:`'${n.COLUMN_DEFAULT}'`,-1!==n.EXTRA.indexOf("on update")&&(u.onUpdate=n.EXTRA.substring(n.EXTRA.indexOf("on update")+10)),n.GENERATION_EXPRESSION&&(u.asExpression=n.GENERATION_EXPRESSION,u.generatedType=-1!==n.EXTRA.indexOf("VIRTUAL")?"VIRTUAL":"STORED"),u.isUnique=r.length>0&&!o&&!c,u.isNullable="YES"===n.IS_NULLABLE,u.isPrimary=l.some((e=>e.TABLE_NAME===n.TABLE_NAME&&e.TABLE_SCHEMA===n.TABLE_SCHEMA&&e.COLUMN_NAME===n.COLUMN_NAME)),u.zerofill=-1!==n.COLUMN_TYPE.indexOf("zerofill"),u.unsigned=!!u.zerofill||-1!==n.COLUMN_TYPE.indexOf("unsigned"),u.isGenerated=-1!==n.EXTRA.indexOf("auto_increment"),u.isGenerated&&(u.generationStrategy="increment"),u.comment="string"==typeof n.COLUMN_COMMENT&&0===n.COLUMN_COMMENT.length?void 0:n.COLUMN_COMMENT,n.CHARACTER_SET_NAME&&(u.charset=n.CHARACTER_SET_NAME===a?void 0:n.CHARACTER_SET_NAME),n.COLLATION_NAME&&(u.collation=n.COLLATION_NAME===i?void 0:n.COLLATION_NAME),-1!==this.driver.withLengthColumnTypes.indexOf(u.type)&&n.CHARACTER_MAXIMUM_LENGTH){const e=n.CHARACTER_MAXIMUM_LENGTH.toString();u.length=this.isDefaultColumnLength(t,u,e)?"":e}if("decimal"!==u.type&&"double"!==u.type&&"float"!==u.type||(null===n.NUMERIC_PRECISION||this.isDefaultColumnPrecision(t,u,n.NUMERIC_PRECISION)||(u.precision=parseInt(n.NUMERIC_PRECISION)),null===n.NUMERIC_SCALE||this.isDefaultColumnScale(t,u,n.NUMERIC_SCALE)||(u.scale=parseInt(n.NUMERIC_SCALE))),"enum"===u.type||"simple-enum"===u.type||"set"===u.type){const e=n.COLUMN_TYPE,t=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(",");u.enum=t.map((e=>e.substring(1,e.length-1))),u.length=""}return"datetime"!==u.type&&"time"!==u.type&&"timestamp"!==u.type||null===n.DATETIME_PRECISION||void 0===n.DATETIME_PRECISION||this.isDefaultColumnPrecision(t,u,parseInt(n.DATETIME_PRECISION))||(u.precision=parseInt(n.DATETIME_PRECISION)),u}));const o=cn.m.uniq(h.filter((t=>t.TABLE_NAME===e.TABLE_NAME&&t.TABLE_SCHEMA===e.TABLE_SCHEMA)),(e=>e.CONSTRAINT_NAME));t.foreignKeys=o.map((e=>{const t=h.filter((t=>t.CONSTRAINT_NAME===e.CONSTRAINT_NAME)),r=e.REFERENCED_TABLE_SCHEMA===n?void 0:e.REFERENCED_TABLE_SCHEMA,i=this.driver.buildTableName(e.REFERENCED_TABLE_NAME,void 0,r);return new lt({name:e.CONSTRAINT_NAME,columnNames:t.map((e=>e.COLUMN_NAME)),referencedDatabase:e.REFERENCED_TABLE_SCHEMA,referencedTableName:i,referencedColumnNames:t.map((e=>e.REFERENCED_COLUMN_NAME)),onDelete:e.ON_DELETE,onUpdate:e.ON_UPDATE})}));const p=cn.m.uniq(d.filter((t=>t.TABLE_NAME===e.TABLE_NAME&&t.TABLE_SCHEMA===e.TABLE_SCHEMA)),(e=>e.INDEX_NAME));return t.indices=p.map((e=>{const n=d.filter((t=>t.TABLE_SCHEMA===e.TABLE_SCHEMA&&t.TABLE_NAME===e.TABLE_NAME&&t.INDEX_NAME===e.INDEX_NAME)),r=parseInt(e.NON_UNIQUE,10);return new ct({table:t,name:e.INDEX_NAME,columnNames:n.map((e=>e.COLUMN_NAME)),isUnique:0===r,isSpatial:"SPATIAL"===e.INDEX_TYPE,isFulltext:"FULLTEXT"===e.INDEX_TYPE})})),t})))}createTableSql(e,t){const n=e.columns.map((e=>this.buildCreateColumnSql(e,!0))).join(", ");let r=`CREATE TABLE ${this.escapePath(e)} (${n}`;if(e.columns.filter((e=>e.isUnique)).forEach((t=>{const n=e.indices.some((e=>1===e.columnNames.length&&!!e.isUnique&&-1!==e.columnNames.indexOf(t.name))),r=e.uniques.some((e=>1===e.columnNames.length&&-1!==e.columnNames.indexOf(t.name)));n||r||e.indices.push(new ct({name:this.connection.namingStrategy.uniqueConstraintName(e,[t.name]),columnNames:[t.name],isUnique:!0}))})),e.uniques.length>0&&e.uniques.forEach((t=>{e.indices.some((e=>e.name===t.name))||e.indices.push(new ct({name:t.name,columnNames:t.columnNames,isUnique:!0}))})),e.indices.length>0){r+=`, ${e.indices.map((t=>{const n=t.columnNames.map((e=>`\`${e}\``)).join(", ");t.name||(t.name=this.connection.namingStrategy.indexName(e,t.columnNames,t.where));let r="";return t.isUnique&&(r+="UNIQUE "),t.isSpatial&&(r+="SPATIAL "),t.isFulltext&&(r+="FULLTEXT "),`${r}INDEX \`${t.name}\` (${n})`})).join(", ")}`}if(e.foreignKeys.length>0&&t){r+=`, ${e.foreignKeys.map((t=>{const n=t.columnNames.map((e=>`\`${e}\``)).join(", ");t.name||(t.name=this.connection.namingStrategy.foreignKeyName(e,t.columnNames));const r=t.referencedColumnNames.map((e=>`\`${e}\``)).join(", ");let i=`CONSTRAINT \`${t.name}\` FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))} (${r})`;return t.onDelete&&(i+=` ON DELETE ${t.onDelete}`),t.onUpdate&&(i+=` ON UPDATE ${t.onUpdate}`),i})).join(", ")}`}if(e.primaryColumns.length>0){r+=`, PRIMARY KEY (${e.primaryColumns.map((e=>`\`${e.name}\``)).join(", ")})`}return r+=`) ENGINE=${e.engine||"InnoDB"}`,new Xn(r)}dropTableSql(e){return new Xn(`DROP TABLE ${this.escapePath(e)}`)}createViewSql(e){return"string"==typeof e.expression?new Xn(`CREATE VIEW ${this.escapePath(e)} AS ${e.expression}`):new Xn(`CREATE VIEW ${this.escapePath(e)} AS ${e.expression(this.connection).getQuery()}`)}async insertViewDefinitionSql(e){const t=await this.getCurrentDatabase(),n="string"==typeof e.expression?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:Gn.VIEW,schema:t,name:e.name,value:n})}dropViewSql(e){return new Xn(`DROP VIEW ${this.escapePath(e)}`)}async deleteViewDefinitionSql(e){const t=await this.getCurrentDatabase(),n=gt.t.isView(e)?e.name:e;return this.deleteTypeormMetadataSql({type:Gn.VIEW,schema:t,name:n})}createIndexSql(e,t){const n=t.columnNames.map((e=>`\`${e}\``)).join(", ");let r="";return t.isUnique&&(r+="UNIQUE "),t.isSpatial&&(r+="SPATIAL "),t.isFulltext&&(r+="FULLTEXT "),new Xn(`CREATE ${r}INDEX \`${t.name}\` ON ${this.escapePath(e)} (${n})`)}dropIndexSql(e,t){let n=gt.t.isTableIndex(t)?t.name:t;return new Xn(`DROP INDEX \`${n}\` ON ${this.escapePath(e)}`)}createPrimaryKeySql(e,t){const n=t.map((e=>`\`${e}\``)).join(", ");return new Xn(`ALTER TABLE ${this.escapePath(e)} ADD PRIMARY KEY (${n})`)}dropPrimaryKeySql(e){return new Xn(`ALTER TABLE ${this.escapePath(e)} DROP PRIMARY KEY`)}createForeignKeySql(e,t){const n=t.columnNames.map((e=>`\`${e}\``)).join(", "),r=t.referencedColumnNames.map((e=>`\`${e}\``)).join(",");let i=`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT \`${t.name}\` FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))}(${r})`;return t.onDelete&&(i+=` ON DELETE ${t.onDelete}`),t.onUpdate&&(i+=` ON UPDATE ${t.onUpdate}`),new Xn(i)}dropForeignKeySql(e,t){const n=gt.t.isTableForeignKey(t)?t.name:t;return new Xn(`ALTER TABLE ${this.escapePath(e)} DROP FOREIGN KEY \`${n}\``)}escapeComment(e){return e&&0!==e.length?`'${e=e.replace(/\\/g,"\\\\").replace(/'/g,"''").replace(/\u0000/g,"")}'`:"''"}escapePath(e){const{database:t,tableName:n}=this.driver.parseTableName(e);return t&&t!==this.driver.database?`\`${t}\`.\`${n}\``:`\`${n}\``}buildCreateColumnSql(e,t,n=!1){let r="";return r=n?this.connection.driver.createFullType(e):`\`${e.name}\` ${this.connection.driver.createFullType(e)}`,e.asExpression&&(r+=` AS (${e.asExpression}) ${e.generatedType?e.generatedType:"VIRTUAL"}`),e.zerofill?r+=" ZEROFILL":e.unsigned&&(r+=" UNSIGNED"),e.enum&&(r+=` (${e.enum.map((e=>"'"+e+"'")).join(", ")})`),e.charset&&(r+=` CHARACTER SET "${e.charset}"`),e.collation&&(r+=` COLLATE "${e.collation}"`),e.isNullable||(r+=" NOT NULL"),e.isNullable&&(r+=" NULL"),e.isPrimary&&!t&&(r+=" PRIMARY KEY"),e.isGenerated&&"increment"===e.generationStrategy&&(r+=" AUTO_INCREMENT"),e.comment&&(r+=` COMMENT ${this.escapeComment(e.comment)}`),void 0!==e.default&&null!==e.default&&(r+=` DEFAULT ${e.default}`),e.onUpdate&&(r+=` ON UPDATE ${e.onUpdate}`),r}isDefaultColumnWidth(e,t,n){if(this.connection.hasMetadata(e.name)){const n=this.connection.getMetadata(e.name).findColumnWithDatabaseName(t.name);if(n&&n.width)return!1}const r=this.connection.driver.dataTypeDefaults&&this.connection.driver.dataTypeDefaults[t.type]&&this.connection.driver.dataTypeDefaults[t.type].width;return!!r&&r===n}}var gr=__webpack_require__(1048).Buffer;class br{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="nested",this.supportedDataTypes=["bit","int","integer","tinyint","smallint","mediumint","bigint","float","double","double precision","real","decimal","dec","numeric","fixed","bool","boolean","date","datetime","timestamp","time","year","char","nchar","national char","varchar","nvarchar","national varchar","blob","text","tinyblob","tinytext","mediumblob","mediumtext","longblob","longtext","enum","set","binary","varbinary","json","geometry","point","linestring","polygon","multipoint","multilinestring","multipolygon","geometrycollection"],this.supportedUpsertType="on-duplicate-key-update",this.spatialTypes=["geometry","point","linestring","polygon","multipoint","multilinestring","multipolygon","geometrycollection"],this.withLengthColumnTypes=["char","varchar","nvarchar","binary","varbinary"],this.withWidthColumnTypes=["bit","tinyint","smallint","mediumint","int","integer","bigint"],this.withPrecisionColumnTypes=["decimal","dec","numeric","fixed","float","double","double precision","real","time","datetime","timestamp"],this.withScaleColumnTypes=["decimal","dec","numeric","fixed","float","double","double precision","real"],this.unsignedAndZerofillTypes=["int","integer","smallint","tinyint","mediumint","bigint","decimal","dec","numeric","fixed","float","double","double precision","real"],this.mappedDataTypes={createDate:"datetime",createDatePrecision:6,createDateDefault:"CURRENT_TIMESTAMP(6)",updateDate:"datetime",updateDatePrecision:6,updateDateDefault:"CURRENT_TIMESTAMP(6)",deleteDate:"datetime",deleteDatePrecision:6,deleteDateNullable:!0,version:"int",treeLevel:"int",migrationId:"int",migrationName:"varchar",migrationTimestamp:"bigint",cacheId:"int",cacheIdentifier:"varchar",cacheTime:"bigint",cacheDuration:"int",cacheQuery:"text",cacheResult:"text",metadataType:"varchar",metadataDatabase:"varchar",metadataSchema:"varchar",metadataTable:"varchar",metadataName:"varchar",metadataValue:"text"},this.dataTypeDefaults={varchar:{length:255},nvarchar:{length:255},"national varchar":{length:255},char:{length:1},binary:{length:1},varbinary:{length:255},decimal:{precision:10,scale:0},dec:{precision:10,scale:0},numeric:{precision:10,scale:0},fixed:{precision:10,scale:0},float:{precision:12},double:{precision:22},time:{precision:0},datetime:{precision:0},timestamp:{precision:0},bit:{width:1},int:{width:11},integer:{width:11},tinyint:{width:4},smallint:{width:6},mediumint:{width:9},bigint:{width:20}},this.maxAliasLength=63,this.cteCapabilities={enabled:!1},this.connection=e,this.options=e.options,this.loadDependencies(),this.client=new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,((e,t)=>this.connection.logger.logQuery(e,t)),this.options.serviceConfigOptions,this.options.formatOptions),this.database=Nt.I.buildDriverOptions(this.options).database}async connect(){if(!this.database){const e=await this.createQueryRunner("master");this.database=await e.getCurrentDatabase(),await e.release()}}afterConnect(){return Promise.resolve()}async disconnect(){}createSchemaBuilder(){return new Wn(this.connection)}createQueryRunner(e){return new yr(this,new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,((e,t)=>this.connection.logger.logQuery(e,t)),this.options.serviceConfigOptions,this.options.formatOptions))}escapeQueryWithParameters(e,t,n){const r=Object.keys(n).map((e=>n[e]));return t&&Object.keys(t).length?[e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,((e,n,i)=>{if(!t.hasOwnProperty(i))return e;let a=t[i];return n?a.map((e=>(r.push(e),this.createParameter(i,r.length-1)))).join(", "):"function"==typeof a?a():(r.push(a),this.createParameter(i,r.length-1))})),r]:[e,r]}escape(e){return"`"+e+"`"}buildTableName(e,t,n){let r=[e];return n&&r.unshift(n),r.join(".")}parseTableName(e){const t=this.database,n=void 0;if(gt.t.isTable(e)||gt.t.isView(e)){const r=this.parseTableName(e.name);return{database:e.database||r.database||t,schema:e.schema||r.schema||n,tableName:r.tableName}}if(gt.t.isTableForeignKey(e)){const r=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||r.database||t,schema:e.referencedSchema||r.schema||n,tableName:r.tableName}}if(gt.t.isEntityMetadata(e))return{database:e.database||t,schema:e.schema||n,tableName:e.tableName};const r=e.split(".");return{database:(r.length>1?r[0]:void 0)||t,schema:n,tableName:r.length>1?r[1]:r[0]}}preparePersistentValue(e,t){return t.transformer&&(e=ln.W.transformTo(t.transformer,e)),this.options.formatOptions&&!1===this.options.formatOptions.castParameters?null==e?e:t.type===Boolean?!0===e?1:0:"date"===t.type?on.mixedDateToDateString(e):"time"===t.type?on.mixedDateToTimeString(e):"json"===t.type?JSON.stringify(e):"timestamp"===t.type||"datetime"===t.type||t.type===Date?on.mixedDateToDate(e):"simple-array"===t.type||"set"===t.type?on.simpleArrayToString(e):"simple-json"===t.type?on.simpleJsonToString(e):"enum"===t.type||"simple-enum"===t.type?""+e:e:this.client.preparePersistentValue(e,t)}prepareHydratedValue(e,t){return null==e?t.transformer?ln.W.transformFrom(t.transformer,e):e:this.options.formatOptions&&!1===this.options.formatOptions.castParameters?(t.type===Boolean||"bool"===t.type||"boolean"===t.type?e=!!e:"datetime"===t.type||t.type===Date?e=on.normalizeHydratedDate(e):"date"===t.type?e=on.mixedDateToDateString(e):"json"===t.type?e="string"==typeof e?JSON.parse(e):e:"time"===t.type?e=on.mixedTimeToString(e):"simple-array"===t.type||"set"===t.type?e=on.stringToSimpleArray(e):"simple-json"===t.type?e=on.stringToSimpleJson(e):("enum"===t.type||"simple-enum"===t.type)&&t.enum&&!isNaN(e)&&t.enum.indexOf(parseInt(e))>=0&&(e=parseInt(e)),t.transformer&&(e=ln.W.transformFrom(t.transformer,e)),e):this.client.prepareHydratedValue(e,t)}normalizeType(e){return e.type===Number||"integer"===e.type?"int":e.type===String?"varchar":e.type===Date?"datetime":e.type===gr?"blob":e.type===Boolean?"tinyint":"uuid"===e.type?"varchar":"simple-array"===e.type||"simple-json"===e.type?"text":"simple-enum"===e.type?"enum":"double precision"===e.type||"real"===e.type?"double":"dec"===e.type||"numeric"===e.type||"fixed"===e.type?"decimal":"bool"===e.type||"boolean"===e.type?"tinyint":"nvarchar"===e.type||"national varchar"===e.type?"varchar":"nchar"===e.type||"national char"===e.type?"char":e.type||""}normalizeDefault(e){const t=e.default;if(null!==t){if(("enum"===e.type||"simple-enum"===e.type)&&void 0!==t)return`'${t}'`;if("set"===e.type&&void 0!==t)return`'${on.simpleArrayToString(t)}'`;if("number"==typeof t)return`${t}`;if("boolean"==typeof t)return t?"1":"0";if("function"==typeof t)return t();if("string"==typeof t)return`'${t}'`;if(void 0!==t)return`${t}`}}normalizeIsUnique(e){return e.entityMetadata.indices.some((t=>t.isUnique&&1===t.columns.length&&t.columns[0]===e))}getColumnLength(e){if(e.length)return e.length.toString();if("uuid"===e.generationStrategy)return"36";switch(e.type){case String:case"varchar":case"nvarchar":case"national varchar":case"varbinary":return"255";default:return""}}createFullType(e){let t=e.type;return this.getColumnLength(e)?t+=`(${this.getColumnLength(e)})`:e.width?t+=`(${e.width})`:null!==e.precision&&void 0!==e.precision&&null!==e.scale&&void 0!==e.scale?t+=`(${e.precision},${e.scale})`:null!==e.precision&&void 0!==e.precision&&(t+=`(${e.precision})`),e.isArray&&(t+=" array"),t}obtainMasterConnection(){return new Promise(((e,t)=>{this.poolCluster?this.poolCluster.getConnection("MASTER",((n,r)=>{n?t(n):e(this.prepareDbConnection(r))})):this.pool?this.pool.getConnection(((n,r)=>{n?t(n):e(this.prepareDbConnection(r))})):t(new st.VR("Connection is not established with mysql database"))}))}obtainSlaveConnection(){return this.poolCluster?new Promise(((e,t)=>{this.poolCluster.getConnection("SLAVE*",((n,r)=>{n?t(n):e(this.prepareDbConnection(r))}))})):this.obtainMasterConnection()}createGeneratedMap(e,t,n){const r=e.generatedColumns.reduce(((e,r)=>{let i;return"increment"===r.generationStrategy&&t.insertId&&(i=t.insertId+n),cn.m.mergeDeep(e,r.createValueMap(i))}),{});return Object.keys(r).length>0?r:void 0}findChangedColumns(e,t){return t.filter((t=>{const n=e.find((e=>e.name===t.databaseName));if(!n)return!1;let r=t.length;return r||"uuid"!==t.generationStrategy||(r=this.getColumnLength(t)),n.name!==t.databaseName||n.type!==this.normalizeType(t)||n.length!==r||n.width!==t.width||n.precision!==t.precision||n.scale!==t.scale||n.zerofill!==t.zerofill||n.unsigned!==t.unsigned||n.asExpression!==t.asExpression||n.generatedType!==t.generatedType||n.comment!==this.escapeComment(t.comment)||!this.compareDefaultValues(this.normalizeDefault(t),n.default)||n.enum&&t.enum&&!cn.m.isArraysEqual(n.enum,t.enum.map((e=>e+"")))||n.onUpdate!==t.onUpdate||n.isPrimary!==t.isPrimary||n.isNullable!==t.isNullable||n.isUnique!==this.normalizeIsUnique(t)||"uuid"!==t.generationStrategy&&n.isGenerated!==t.isGenerated}))}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!0}createParameter(e,t){return"?"}loadDependencies(){const e=this.options.driver||nt.load("typeorm-aurora-data-api-driver");this.DataApiDriver=e,this.DataApiDriver=this.DataApiDriver.default||this.DataApiDriver}createConnectionOptions(e,t){return t=Object.assign({},t,Nt.I.buildDriverOptions(t)),Object.assign({},{resourceArn:e.resourceArn,secretArn:e.secretArn,database:e.database,region:e.region,type:e.type},{host:t.host,user:t.username,password:t.password,database:t.database,port:t.port,ssl:e.ssl},e.extra||{})}async createPool(e){return{}}prepareDbConnection(e){const{logger:t}=this.connection;return 0===e.listeners("error").length&&e.on("error",(e=>t.log("warn",`MySQL connection raised an error. ${e}`))),e}compareDefaultValues(e,t){return"string"==typeof e&&"string"==typeof t&&(e=e.replace(/^'+|'+$/g,""),t=t.replace(/^'+|'+$/g,"")),e===t}escapeComment(e){return e?e=e.replace(/\u0000/g,""):e}}var vr=__webpack_require__(1572);class wr extends er{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.mode=t,this.broadcaster=new nr(this)}connect(){return this.databaseConnection?Promise.resolve(this.databaseConnection):(this.databaseConnectionPromise||("slave"===this.mode&&this.driver.isReplicated?this.databaseConnectionPromise=this.driver.obtainSlaveConnection().then((([e,t])=>{this.driver.connectedQueryRunners.push(this),this.databaseConnection=e;const n=e=>this.releasePostgresConnection(e);return this.releaseCallback=e=>{this.databaseConnection.removeListener("error",n),t(e)},this.databaseConnection.on("error",n),this.databaseConnection})):this.databaseConnectionPromise=this.driver.obtainMasterConnection().then((([e,t])=>{this.driver.connectedQueryRunners.push(this),this.databaseConnection=e;const n=e=>this.releasePostgresConnection(e);return this.releaseCallback=e=>{this.databaseConnection.removeListener("error",n),t(e)},this.databaseConnection.on("error",n),this.databaseConnection}))),this.databaseConnectionPromise)}async releasePostgresConnection(e){if(this.isReleased)return;this.isReleased=!0,this.releaseCallback&&(this.releaseCallback(e),this.releaseCallback=void 0);const t=this.driver.connectedQueryRunners.indexOf(this);-1!==t&&this.driver.connectedQueryRunners.splice(t,1)}release(){return this.releasePostgresConnection()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(e){throw this.isTransactionActive=!1,e}0===this.transactionDepth?(await this.query("START TRANSACTION"),e&&await this.query("SET TRANSACTION ISOLATION LEVEL "+e)):await this.query(`SAVEPOINT typeorm_${this.transactionDepth}`),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.query("COMMIT"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.query("ROLLBACK"),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new Qn.E;const r=await this.connect();this.driver.connection.logger.logQuery(e,t,this);try{const i=+new Date,a=await r.query(e,t),s=this.driver.options.maxQueryExecutionTime,o=+new Date-i;s&&o>s&&this.driver.connection.logger.logQuerySlow(o,e,t,this);const c=new rr;if(a){switch(a.hasOwnProperty("rows")&&(c.records=a.rows),a.hasOwnProperty("rowCount")&&(c.affected=a.rowCount),a.command){case"DELETE":case"UPDATE":c.raw=[a.rows,a.rowCount];break;default:c.raw=a.rows}if(!n)return c.raw}return c}catch(n){throw this.driver.connection.logger.logQueryError(n,e,t,this),new Jn.C(e,t,n)}}async stream(e,t,n,r){const i=this.driver.loadStreamDependency();if(this.isReleased)throw new Qn.E;const a=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const s=a.query(new i(e,t));return n&&s.on("end",n),r&&s.on("error",r),s}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){return!!(await this.query(`SELECT * FROM pg_database WHERE datname='${e}';`)).length}async getCurrentDatabase(){return(await this.query("SELECT * FROM current_database()"))[0].current_database}async hasSchema(e){return!!(await this.query(`SELECT * FROM "information_schema"."schemata" WHERE "schema_name" = '${e}'`)).length}async getCurrentSchema(){return(await this.query("SELECT * FROM current_schema()"))[0].current_schema}async hasTable(e){const t=this.driver.parseTableName(e);t.schema||(t.schema=await this.getCurrentSchema());const n=`SELECT * FROM "information_schema"."tables" WHERE "table_schema" = '${t.schema}' AND "table_name" = '${t.tableName}'`;return!!(await this.query(n)).length}async hasColumn(e,t){const n=this.driver.parseTableName(e);n.schema||(n.schema=await this.getCurrentSchema());const r=`SELECT * FROM "information_schema"."columns" WHERE "table_schema" = '${n.schema}' AND "table_name" = '${n.tableName}' AND "column_name" = '${t}'`;return!!(await this.query(r)).length}async createDatabase(e,t){if(t){if(await this.hasDatabase(e))return Promise.resolve()}const n=`CREATE DATABASE "${e}"`,r=`DROP DATABASE "${e}"`;await this.executeQueries(new Xn(n),new Xn(r))}async dropDatabase(e,t){const n=t?`DROP DATABASE IF EXISTS "${e}"`:`DROP DATABASE "${e}"`,r=`CREATE DATABASE "${e}"`;await this.executeQueries(new Xn(n),new Xn(r))}async createSchema(e,t){const n=-1===e.indexOf(".")?e:e.split(".")[1],r=t?`CREATE SCHEMA IF NOT EXISTS "${n}"`:`CREATE SCHEMA "${n}"`,i=`DROP SCHEMA "${n}" CASCADE`;await this.executeQueries(new Xn(r),new Xn(i))}async dropSchema(e,t,n){const r=-1===e.indexOf(".")?e:e.split(".")[1],i=t?`DROP SCHEMA IF EXISTS "${r}" ${n?"CASCADE":""}`:`DROP SCHEMA "${r}" ${n?"CASCADE":""}`,a=`CREATE SCHEMA "${r}"`;await this.executeQueries(new Xn(i),new Xn(a))}async createTable(e,t=!1,n=!0,r=!0){if(t){if(await this.hasTable(e))return Promise.resolve()}const i=[],a=[],s=e.columns.filter((e=>"enum"===e.type||"simple-enum"===e.type)),o=[];for(const t of s){const n=await this.hasEnumType(e,t),r=this.buildEnumName(e,t);n||-1!==o.indexOf(r)||(o.push(r),i.push(this.createEnumTypeSql(e,t,r)),a.push(this.dropEnumTypeSql(e,t,r)))}const c=e.columns.filter((e=>"STORED"===e.generatedType&&e.asExpression));for(const t of c){const n=(await this.getTableNameWithSchema(e.name)).split("."),r=n[1],s=n[0],o=this.insertTypeormMetadataSql({database:this.driver.database,schema:s,table:r,type:Gn.GENERATED_COLUMN,name:t.name,value:t.asExpression}),c=this.deleteTypeormMetadataSql({database:this.driver.database,schema:s,table:r,type:Gn.GENERATED_COLUMN,name:t.name});i.push(o),a.push(c)}i.push(this.createTableSql(e,n)),a.push(this.dropTableSql(e)),n&&e.foreignKeys.forEach((t=>a.push(this.dropForeignKeySql(e,t)))),r&&e.indices.forEach((t=>{t.name||(t.name=this.connection.namingStrategy.indexName(e,t.columnNames,t.where)),i.push(this.createIndexSql(e,t)),a.push(this.dropIndexSql(e,t))})),await this.executeQueries(i,a)}async dropTable(e,t,n=!0,r=!0){if(t){if(!await this.hasTable(e))return Promise.resolve()}const i=n,a=this.getTablePath(e),s=await this.getCachedTable(a),o=[],c=[];r&&s.indices.forEach((e=>{o.push(this.dropIndexSql(s,e)),c.push(this.createIndexSql(s,e))})),n&&s.foreignKeys.forEach((e=>o.push(this.dropForeignKeySql(s,e)))),o.push(this.dropTableSql(s)),c.push(this.createTableSql(s,i));const l=s.columns.filter((e=>e.generatedType&&e.asExpression));for(const e of l){const t=(await this.getTableNameWithSchema(s.name)).split("."),n=t[1],r=t[0],i=this.deleteTypeormMetadataSql({database:this.driver.database,schema:r,table:n,type:Gn.GENERATED_COLUMN,name:e.name}),a=this.insertTypeormMetadataSql({database:this.driver.database,schema:r,table:n,type:Gn.GENERATED_COLUMN,name:e.name,value:e.asExpression});o.push(i),c.push(a)}await this.executeQueries(o,c)}async createView(e){const t=[],n=[];t.push(this.createViewSql(e)),t.push(await this.insertViewDefinitionSql(e)),n.push(this.dropViewSql(e)),n.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(t,n)}async dropView(e){const t=gt.t.isView(e)?e.name:e,n=await this.getCachedView(t),r=[],i=[];r.push(await this.deleteViewDefinitionSql(n)),r.push(this.dropViewSql(n)),i.push(await this.insertViewDefinitionSql(n)),i.push(this.createViewSql(n)),await this.executeQueries(r,i)}async renameTable(e,t){const n=[],r=[],i=gt.t.isTable(e)?e:await this.getCachedTable(e),a=i.clone(),{schema:s,tableName:o}=this.driver.parseTableName(i);if(a.name=s?`${s}.${t}`:t,n.push(new Xn(`ALTER TABLE ${this.escapePath(i)} RENAME TO "${t}"`)),r.push(new Xn(`ALTER TABLE ${this.escapePath(a)} RENAME TO "${o}"`)),a.primaryColumns.length>0&&!a.primaryColumns[0].primaryKeyConstraintName){const e=a.primaryColumns.map((e=>e.name)),t=this.connection.namingStrategy.primaryKeyName(i,e),s=this.connection.namingStrategy.primaryKeyName(a,e);n.push(new Xn(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${t}" TO "${s}"`)),r.push(new Xn(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${s}" TO "${t}"`))}a.columns.map((e=>{if(e.isGenerated&&"increment"===e.generationStrategy){const t=this.buildSequencePath(i,e.name),s=this.buildSequenceName(i,e.name),o=this.buildSequencePath(a,e.name),c=this.buildSequenceName(a,e.name),l=`ALTER SEQUENCE ${this.escapePath(t)} RENAME TO "${c}"`,u=`ALTER SEQUENCE ${this.escapePath(o)} RENAME TO "${s}"`;n.push(new Xn(l)),r.push(new Xn(u))}})),a.uniques.forEach((e=>{const t=this.connection.namingStrategy.uniqueConstraintName(i,e.columnNames);if(e.name!==t)return;const s=this.connection.namingStrategy.uniqueConstraintName(a,e.columnNames);n.push(new Xn(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${e.name}" TO "${s}"`)),r.push(new Xn(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${s}" TO "${e.name}"`)),e.name=s})),a.indices.forEach((e=>{const t=this.connection.namingStrategy.indexName(i,e.columnNames,e.where);if(e.name!==t)return;const{schema:s}=this.driver.parseTableName(a),o=this.connection.namingStrategy.indexName(a,e.columnNames,e.where),c=s?`ALTER INDEX "${s}"."${e.name}" RENAME TO "${o}"`:`ALTER INDEX "${e.name}" RENAME TO "${o}"`,l=s?`ALTER INDEX "${s}"."${o}" RENAME TO "${e.name}"`:`ALTER INDEX "${o}" RENAME TO "${e.name}"`;n.push(new Xn(c)),r.push(new Xn(l)),e.name=o})),a.foreignKeys.forEach((e=>{const t=this.connection.namingStrategy.foreignKeyName(i,e.columnNames,this.getTablePath(e),e.referencedColumnNames);if(e.name!==t)return;const s=this.connection.namingStrategy.foreignKeyName(a,e.columnNames,this.getTablePath(e),e.referencedColumnNames);n.push(new Xn(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${e.name}" TO "${s}"`)),r.push(new Xn(`ALTER TABLE ${this.escapePath(a)} RENAME CONSTRAINT "${s}" TO "${e.name}"`)),e.name=s}));const c=a.columns.filter((e=>"enum"===e.type||"simple-enum"===e.type));for(let e of c){if(e.enumName)continue;const t=await this.getUserDefinedTypeName(i,e);n.push(new Xn(`ALTER TYPE "${t.schema}"."${t.name}" RENAME TO ${this.buildEnumName(a,e,!1)}`)),r.push(new Xn(`ALTER TYPE ${this.buildEnumName(a,e)} RENAME TO "${t.name}"`))}await this.executeQueries(n,r)}async addColumn(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone(),i=[],a=[];if("enum"===t.type||"simple-enum"===t.type){await this.hasEnumType(n,t)||(i.push(this.createEnumTypeSql(n,t)),a.push(this.dropEnumTypeSql(n,t)))}if(i.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(n,t)}`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN "${t.name}"`)),t.isPrimary){const e=r.primaryColumns;if(e.length>0){const t=e[0].primaryKeyConstraintName?e[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,e.map((e=>e.name))),s=e.map((e=>`"${e.name}"`)).join(", ");i.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP CONSTRAINT "${t}"`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD CONSTRAINT "${t}" PRIMARY KEY (${s})`))}e.push(t);const s=e[0].primaryKeyConstraintName?e[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,e.map((e=>e.name))),o=e.map((e=>`"${e.name}"`)).join(", ");i.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD CONSTRAINT "${s}" PRIMARY KEY (${o})`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP CONSTRAINT "${s}"`))}const s=r.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===t.name));if(s&&(i.push(this.createIndexSql(n,s)),a.push(this.dropIndexSql(n,s))),t.isUnique){const e=new dt({name:this.connection.namingStrategy.uniqueConstraintName(n,[t.name]),columnNames:[t.name]});r.uniques.push(e),i.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD CONSTRAINT "${e.name}" UNIQUE ("${t.name}")`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP CONSTRAINT "${e.name}"`))}if("STORED"===t.generatedType&&t.asExpression){const e=(await this.getTableNameWithSchema(n.name)).split("."),r=e[1],s=e[0],o=this.insertTypeormMetadataSql({database:this.driver.database,schema:s,table:r,type:Gn.GENERATED_COLUMN,name:t.name,value:t.asExpression}),c=this.deleteTypeormMetadataSql({database:this.driver.database,schema:s,table:r,type:Gn.GENERATED_COLUMN,name:t.name});i.push(o),a.push(c)}t.comment&&(i.push(new Xn(`COMMENT ON COLUMN ${this.escapePath(n)}."${t.name}" IS ${this.escapeComment(t.comment)}`)),a.push(new Xn(`COMMENT ON COLUMN ${this.escapePath(n)}."${t.name}" IS ${this.escapeComment(t.comment)}`))),await this.executeQueries(i,a),r.addColumn(t),this.replaceCachedTable(n,r)}async addColumns(e,t){for(const n of t)await this.addColumn(e,n)}async renameColumn(e,t,n){const r=gt.t.isTable(e)?e:await this.getCachedTable(e),i=gt.t.isTableColumn(t)?t:r.columns.find((e=>e.name===t));if(!i)throw new st.VR(`Column "${t}" was not found in the "${r.name}" table.`);let a;return gt.t.isTableColumn(n)?a=n:(a=i.clone(),a.name=n),this.changeColumn(r,i,a)}async changeColumn(e,t,n){const r=gt.t.isTable(e)?e:await this.getCachedTable(e);let i=r.clone();const a=[],s=[];let o=!1;const c=gt.t.isTableColumn(t)?t:r.columns.find((e=>e.name===t));if(!c)throw new st.VR(`Column "${t}" was not found in the "${r.name}" table.`);if(c.type!==n.type||c.length!==n.length||n.isArray!==c.isArray||!c.generatedType&&"STORED"===n.generatedType||c.asExpression!==n.asExpression&&"STORED"===n.generatedType)await this.dropColumn(r,c),await this.addColumn(r,n),i=r.clone();else{if(c.name!==n.name){if(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} RENAME COLUMN "${c.name}" TO "${n.name}"`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} RENAME COLUMN "${n.name}" TO "${c.name}"`)),"enum"===c.type||"simple-enum"===c.type){const e=await this.getUserDefinedTypeName(r,c);a.push(new Xn(`ALTER TYPE "${e.schema}"."${e.name}" RENAME TO ${this.buildEnumName(r,n,!1)}`)),s.push(new Xn(`ALTER TYPE ${this.buildEnumName(r,n)} RENAME TO "${e.name}"`))}if(!0===c.isPrimary&&!c.primaryKeyConstraintName){const e=i.primaryColumns.map((e=>e.name)),t=this.connection.namingStrategy.primaryKeyName(i,e);e.splice(e.indexOf(c.name),1),e.push(n.name);const o=this.connection.namingStrategy.primaryKeyName(i,e);a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} RENAME CONSTRAINT "${t}" TO "${o}"`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} RENAME CONSTRAINT "${o}" TO "${t}"`))}if(!0===c.isGenerated&&"increment"===n.generationStrategy){const e=this.buildSequencePath(r,c.name),t=this.buildSequenceName(r,c.name),i=this.buildSequencePath(r,n.name),o=this.buildSequenceName(r,n.name),l=`ALTER SEQUENCE ${this.escapePath(e)} RENAME TO "${o}"`,u=`ALTER SEQUENCE ${this.escapePath(i)} RENAME TO "${t}"`;a.push(new Xn(l)),s.push(new Xn(u))}i.findColumnUniques(c).forEach((e=>{const t=this.connection.namingStrategy.uniqueConstraintName(i,e.columnNames);if(e.name!==t)return;e.columnNames.splice(e.columnNames.indexOf(c.name),1),e.columnNames.push(n.name);const o=this.connection.namingStrategy.uniqueConstraintName(i,e.columnNames);a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} RENAME CONSTRAINT "${e.name}" TO "${o}"`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} RENAME CONSTRAINT "${o}" TO "${e.name}"`)),e.name=o})),i.findColumnIndices(c).forEach((e=>{const t=this.connection.namingStrategy.indexName(i,e.columnNames,e.where);if(e.name!==t)return;e.columnNames.splice(e.columnNames.indexOf(c.name),1),e.columnNames.push(n.name);const{schema:o}=this.driver.parseTableName(r),l=this.connection.namingStrategy.indexName(i,e.columnNames,e.where),u=o?`ALTER INDEX "${o}"."${e.name}" RENAME TO "${l}"`:`ALTER INDEX "${e.name}" RENAME TO "${l}"`,d=o?`ALTER INDEX "${o}"."${l}" RENAME TO "${e.name}"`:`ALTER INDEX "${l}" RENAME TO "${e.name}"`;a.push(new Xn(u)),s.push(new Xn(d)),e.name=l})),i.findColumnForeignKeys(c).forEach((e=>{const t=this.connection.namingStrategy.foreignKeyName(i,e.columnNames,this.getTablePath(e),e.referencedColumnNames);if(e.name!==t)return;e.columnNames.splice(e.columnNames.indexOf(c.name),1),e.columnNames.push(n.name);const o=this.connection.namingStrategy.foreignKeyName(i,e.columnNames,this.getTablePath(e),e.referencedColumnNames);a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} RENAME CONSTRAINT "${e.name}" TO "${o}"`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} RENAME CONSTRAINT "${o}" TO "${e.name}"`)),e.name=o}));const e=i.columns.find((e=>e.name===c.name));i.columns[i.columns.indexOf(e)].name=n.name,c.name=n.name}if(n.precision===c.precision&&n.scale===c.scale||(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(n)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(c)}`))),!("enum"!==n.type&&"simple-enum"!==n.type||"enum"!==c.type&&"simple-enum"!==c.type||cn.m.isArraysEqual(n.enum,c.enum)&&n.enumName===c.enumName)){const e=n.isArray?"[]":"",t=this.buildEnumName(r,n),i=this.buildEnumName(r,c),l=this.buildEnumName(r,c,!1),u=this.buildEnumName(r,c,!0,!1,!0),d=this.buildEnumName(r,c,!1,!1,!0);a.push(new Xn(`ALTER TYPE ${i} RENAME TO ${d}`)),s.push(new Xn(`ALTER TYPE ${u} RENAME TO ${l}`)),a.push(this.createEnumTypeSql(r,n,t)),s.push(this.dropEnumTypeSql(r,n,t)),null!==c.default&&void 0!==c.default&&(o=!0,a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${c.name}" DROP DEFAULT`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${c.name}" SET DEFAULT ${c.default}`)));const h=`${t}${e} USING "${n.name}"::"text"::${t}${e}`,p=`${u}${e} USING "${n.name}"::"text"::${u}${e}`;a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" TYPE ${h}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" TYPE ${p}`)),null!==n.default&&void 0!==n.default&&(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" SET DEFAULT ${n.default}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" DROP DEFAULT`))),a.push(this.dropEnumTypeSql(r,c,u)),s.push(this.createEnumTypeSql(r,c,u))}if(c.isNullable!==n.isNullable&&(n.isNullable?(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${c.name}" DROP NOT NULL`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${c.name}" SET NOT NULL`))):(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${c.name}" SET NOT NULL`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${c.name}" DROP NOT NULL`)))),c.comment!==n.comment&&(a.push(new Xn(`COMMENT ON COLUMN ${this.escapePath(r)}."${c.name}" IS ${this.escapeComment(n.comment)}`)),s.push(new Xn(`COMMENT ON COLUMN ${this.escapePath(r)}."${n.name}" IS ${this.escapeComment(c.comment)}`))),n.isPrimary!==c.isPrimary){const e=i.primaryColumns;if(e.length>0){const t=e[0].primaryKeyConstraintName?e[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(i,e.map((e=>e.name))),n=e.map((e=>`"${e.name}"`)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP CONSTRAINT "${t}"`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD CONSTRAINT "${t}" PRIMARY KEY (${n})`))}if(!0===n.isPrimary){e.push(n);i.columns.find((e=>e.name===n.name)).isPrimary=!0;const t=e[0].primaryKeyConstraintName?e[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(i,e.map((e=>e.name))),o=e.map((e=>`"${e.name}"`)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD CONSTRAINT "${t}" PRIMARY KEY (${o})`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP CONSTRAINT "${t}"`))}else{const t=e.find((e=>e.name===n.name));e.splice(e.indexOf(t),1);if(i.columns.find((e=>e.name===n.name)).isPrimary=!1,e.length>0){const t=e[0].primaryKeyConstraintName?e[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(i,e.map((e=>e.name))),n=e.map((e=>`"${e.name}"`)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD CONSTRAINT "${t}" PRIMARY KEY (${n})`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP CONSTRAINT "${t}"`))}}}if(n.isUnique!==c.isUnique)if(!0===n.isUnique){const e=new dt({name:this.connection.namingStrategy.uniqueConstraintName(r,[n.name]),columnNames:[n.name]});i.uniques.push(e),a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD CONSTRAINT "${e.name}" UNIQUE ("${n.name}")`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP CONSTRAINT "${e.name}"`))}else{const e=i.uniques.find((e=>1===e.columnNames.length&&!!e.columnNames.find((e=>e===n.name))));i.uniques.splice(i.uniques.indexOf(e),1),a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP CONSTRAINT "${e.name}"`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD CONSTRAINT "${e.name}" UNIQUE ("${n.name}")`))}if(c.isGenerated!==n.isGenerated&&(c.isGenerated&&("uuid"===c.generationStrategy?(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${c.name}" DROP DEFAULT`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${c.name}" SET DEFAULT ${this.driver.uuidGenerator}`))):"increment"===c.generationStrategy&&(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" DROP DEFAULT`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" SET DEFAULT nextval('${this.escapePath(this.buildSequencePath(r,n))}')`)),a.push(new Xn(`DROP SEQUENCE ${this.escapePath(this.buildSequencePath(r,n))}`)),s.push(new Xn(`CREATE SEQUENCE IF NOT EXISTS ${this.escapePath(this.buildSequencePath(r,n))} OWNED BY ${this.escapePath(r)}."${n.name}"`)))),"uuid"===n.generationStrategy?!0===n.isGenerated?(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" SET DEFAULT ${this.driver.uuidGenerator}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" DROP DEFAULT`))):(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" DROP DEFAULT`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" SET DEFAULT ${this.driver.uuidGenerator}`))):"increment"===n.generationStrategy&&(!0===n.isGenerated?(a.push(new Xn(`CREATE SEQUENCE IF NOT EXISTS ${this.escapePath(this.buildSequencePath(r,n))} OWNED BY ${this.escapePath(r)}."${n.name}"`)),s.push(new Xn(`DROP SEQUENCE ${this.escapePath(this.buildSequencePath(r,n))}`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" SET DEFAULT nextval('${this.escapePath(this.buildSequencePath(r,n))}')`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" DROP DEFAULT`))):(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" DROP DEFAULT`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" SET DEFAULT nextval('${this.escapePath(this.buildSequencePath(r,n))}')`)),a.push(new Xn(`DROP SEQUENCE ${this.escapePath(this.buildSequencePath(r,n))}`)),s.push(new Xn(`CREATE SEQUENCE IF NOT EXISTS ${this.escapePath(this.buildSequencePath(r,n))} OWNED BY ${this.escapePath(r)}."${n.name}"`))))),n.default===c.default||o||(null!==n.default&&void 0!==n.default?(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" SET DEFAULT ${n.default}`)),null!==c.default&&void 0!==c.default?s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" SET DEFAULT ${c.default}`)):s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" DROP DEFAULT`))):null!==c.default&&void 0!==c.default&&(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" DROP DEFAULT`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" SET DEFAULT ${c.default}`)))),(n.spatialFeatureType||"").toLowerCase()===(c.spatialFeatureType||"").toLowerCase()&&n.srid===c.srid||(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(n)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(c)}`))),n.generatedType!==c.generatedType&&(!n.generatedType||"VIRTUAL"===n.generatedType)){const e=(await this.getTableNameWithSchema(r.name)).split("."),t=e[1],i=e[0];a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} RENAME COLUMN "${c.name}" TO "TEMP_OLD_${c.name}"`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD ${this.buildCreateColumnSql(r,n)}`)),a.push(new Xn(`UPDATE ${this.escapePath(r)} SET "${n.name}" = "TEMP_OLD_${c.name}"`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP COLUMN "TEMP_OLD_${c.name}"`)),a.push(this.deleteTypeormMetadataSql({database:this.driver.database,schema:i,table:t,type:Gn.GENERATED_COLUMN,name:c.name})),s.push(this.insertTypeormMetadataSql({database:this.driver.database,schema:i,table:t,type:Gn.GENERATED_COLUMN,name:c.name,value:c.asExpression})),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ADD ${this.buildCreateColumnSql(r,c)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} DROP COLUMN "${n.name}"`))}}await this.executeQueries(a,s),this.replaceCachedTable(r,i)}async changeColumns(e,t){for(const{oldColumn:n,newColumn:r}of t)await this.changeColumn(e,n,r)}async dropColumn(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableColumn(t)?t:n.findColumnByName(t);if(!r)throw new st.VR(`Column "${t}" was not found in table "${n.name}"`);const i=n.clone(),a=[],s=[];if(r.isPrimary){const e=r.primaryKeyConstraintName?r.primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(i,i.primaryColumns.map((e=>e.name))),t=i.primaryColumns.map((e=>`"${e.name}"`)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(i)} DROP CONSTRAINT "${e}"`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(i)} ADD CONSTRAINT "${e}" PRIMARY KEY (${t})`));if(i.findColumnByName(r.name).isPrimary=!1,i.primaryColumns.length>0){const e=i.primaryColumns[0].primaryKeyConstraintName?i.primaryColumns[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(i,i.primaryColumns.map((e=>e.name))),t=i.primaryColumns.map((e=>`"${e.name}"`)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(i)} ADD CONSTRAINT "${e}" PRIMARY KEY (${t})`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(i)} DROP CONSTRAINT "${e}"`))}}const o=i.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===r.name));o&&(i.indices.splice(i.indices.indexOf(o),1),a.push(this.dropIndexSql(n,o)),s.push(this.createIndexSql(n,o)));const c=i.checks.find((e=>!!e.columnNames&&1===e.columnNames.length&&e.columnNames[0]===r.name));c&&(i.checks.splice(i.checks.indexOf(c),1),a.push(this.dropCheckConstraintSql(n,c)),s.push(this.createCheckConstraintSql(n,c)));const l=i.uniques.find((e=>1===e.columnNames.length&&e.columnNames[0]===r.name));if(l&&(i.uniques.splice(i.uniques.indexOf(l),1),a.push(this.dropUniqueConstraintSql(n,l)),s.push(this.createUniqueConstraintSql(n,l))),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN "${r.name}"`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(n,r)}`)),"enum"===r.type||"simple-enum"===r.type){if(await this.hasEnumType(n,r)){const e=await this.getUserDefinedTypeName(n,r),t=`"${e.schema}"."${e.name}"`;a.push(this.dropEnumTypeSql(n,r,t)),s.push(this.createEnumTypeSql(n,r,t))}}if("STORED"===r.generatedType){const e=(await this.getTableNameWithSchema(n.name)).split("."),t=e[1],i=e[0],o=this.deleteTypeormMetadataSql({database:this.driver.database,schema:i,table:t,type:Gn.GENERATED_COLUMN,name:r.name}),c=this.insertTypeormMetadataSql({database:this.driver.database,schema:i,table:t,type:Gn.GENERATED_COLUMN,name:r.name,value:r.asExpression});a.push(o),s.push(c)}await this.executeQueries(a,s),i.removeColumn(r),this.replaceCachedTable(n,i)}async dropColumns(e,t){for(const n of t)await this.dropColumn(e,n)}async createPrimaryKey(e,t,n){const r=gt.t.isTable(e)?e:await this.getCachedTable(e),i=r.clone(),a=this.createPrimaryKeySql(r,t,n);i.columns.forEach((e=>{t.find((t=>t===e.name))&&(e.isPrimary=!0)}));const s=this.dropPrimaryKeySql(i);await this.executeQueries(a,s),this.replaceCachedTable(r,i)}async updatePrimaryKeys(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=n.clone(),i=t.map((e=>e.name)),a=[],s=[],o=r.primaryColumns;if(o.length>0){const e=o[0].primaryKeyConstraintName?o[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,o.map((e=>e.name))),t=o.map((e=>`"${e.name}"`)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP CONSTRAINT "${e}"`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD CONSTRAINT "${e}" PRIMARY KEY (${t})`))}r.columns.filter((e=>-1!==i.indexOf(e.name))).forEach((e=>e.isPrimary=!0));const c=o[0].primaryKeyConstraintName?o[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(r,i),l=i.map((e=>`"${e}"`)).join(", ");a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD CONSTRAINT "${c}" PRIMARY KEY (${l})`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP CONSTRAINT "${c}"`)),await this.executeQueries(a,s),this.replaceCachedTable(n,r)}async dropPrimaryKey(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=this.dropPrimaryKeySql(n),i=this.createPrimaryKeySql(n,n.primaryColumns.map((e=>e.name)),t);await this.executeQueries(r,i),n.primaryColumns.forEach((e=>{e.isPrimary=!1}))}async createUniqueConstraint(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.uniqueConstraintName(n,t.columnNames));const r=this.createUniqueConstraintSql(n,t),i=this.dropUniqueConstraintSql(n,t);await this.executeQueries(r,i),n.addUniqueConstraint(t)}async createUniqueConstraints(e,t){for(const n of t)await this.createUniqueConstraint(e,n)}async dropUniqueConstraint(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableUnique(t)?t:n.uniques.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied unique constraint was not found in table ${n.name}`);const i=this.dropUniqueConstraintSql(n,r),a=this.createUniqueConstraintSql(n,r);await this.executeQueries(i,a),n.removeUniqueConstraint(r)}async dropUniqueConstraints(e,t){for(const n of t)await this.dropUniqueConstraint(e,n)}async createCheckConstraint(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.checkConstraintName(n,t.expression));const r=this.createCheckConstraintSql(n,t),i=this.dropCheckConstraintSql(n,t);await this.executeQueries(r,i),n.addCheckConstraint(t)}async createCheckConstraints(e,t){const n=t.map((t=>this.createCheckConstraint(e,t)));await Promise.all(n)}async dropCheckConstraint(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableCheck(t)?t:n.checks.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied check constraint was not found in table ${n.name}`);const i=this.dropCheckConstraintSql(n,r),a=this.createCheckConstraintSql(n,r);await this.executeQueries(i,a),n.removeCheckConstraint(r)}async dropCheckConstraints(e,t){const n=t.map((t=>this.dropCheckConstraint(e,t)));await Promise.all(n)}async createExclusionConstraint(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.exclusionConstraintName(n,t.expression));const r=this.createExclusionConstraintSql(n,t),i=this.dropExclusionConstraintSql(n,t);await this.executeQueries(r,i),n.addExclusionConstraint(t)}async createExclusionConstraints(e,t){const n=t.map((t=>this.createExclusionConstraint(e,t)));await Promise.all(n)}async dropExclusionConstraint(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableExclusion(t)?t:n.exclusions.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied exclusion constraint was not found in table ${n.name}`);const i=this.dropExclusionConstraintSql(n,r),a=this.createExclusionConstraintSql(n,r);await this.executeQueries(i,a),n.removeExclusionConstraint(r)}async dropExclusionConstraints(e,t){const n=t.map((t=>this.dropExclusionConstraint(e,t)));await Promise.all(n)}async createForeignKey(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(n,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const r=this.createForeignKeySql(n,t),i=this.dropForeignKeySql(n,t);await this.executeQueries(r,i),n.addForeignKey(t)}async createForeignKeys(e,t){for(const n of t)await this.createForeignKey(e,n)}async dropForeignKey(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableForeignKey(t)?t:n.foreignKeys.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied foreign key was not found in table ${n.name}`);const i=this.dropForeignKeySql(n,r),a=this.createForeignKeySql(n,r);await this.executeQueries(i,a),n.removeForeignKey(r)}async dropForeignKeys(e,t){for(const n of t)await this.dropForeignKey(e,n)}async createIndex(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const r=this.createIndexSql(n,t),i=this.dropIndexSql(n,t);await this.executeQueries(r,i),n.addIndex(t)}async createIndices(e,t){for(const n of t)await this.createIndex(e,n)}async dropIndex(e,t){const n=gt.t.isTable(e)?e:await this.getCachedTable(e),r=gt.t.isTableIndex(t)?t:n.indices.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied index ${t} was not found in table ${n.name}`);r.name||(r.name=this.generateIndexName(n,r));const i=this.dropIndexSql(n,r),a=this.createIndexSql(n,r);await this.executeQueries(i,a),n.removeIndex(r)}async dropIndices(e,t){for(const n of t)await this.dropIndex(e,n)}async clearTable(e){await this.query(`TRUNCATE TABLE ${this.escapePath(e)}`)}async clearDatabase(){const e=[];this.connection.entityMetadatas.filter((e=>e.schema)).forEach((t=>{!!e.find((e=>e===t.schema))||e.push(t.schema)})),e.push(this.driver.options.schema||"current_schema()");const t=e.map((e=>"current_schema()"===e?e:"'"+e+"'")).join(", "),n=this.isTransactionActive;n||await this.startTransaction();try{const e=await this.getVersion(),r=`SELECT 'DROP VIEW IF EXISTS "' || schemaname || '"."' || viewname || '" CASCADE;' as "query" FROM "pg_views" WHERE "schemaname" IN (${t}) AND "viewname" NOT IN ('geography_columns', 'geometry_columns', 'raster_columns', 'raster_overviews')`,i=await this.query(r);if(await Promise.all(i.map((e=>this.query(e.query)))),vr.g.isGreaterOrEqual(e,"9.3")){const e=`SELECT 'DROP MATERIALIZED VIEW IF EXISTS "' || schemaname || '"."' || matviewname || '" CASCADE;' as "query" FROM "pg_matviews" WHERE "schemaname" IN (${t})`,n=await this.query(e);await Promise.all(n.map((e=>this.query(e.query))))}const a=`SELECT 'DROP TABLE IF EXISTS "' || schemaname || '"."' || tablename || '" CASCADE;' as "query" FROM "pg_tables" WHERE "schemaname" IN (${t}) AND "tablename" NOT IN ('spatial_ref_sys')`,s=await this.query(a);await Promise.all(s.map((e=>this.query(e.query)))),await this.dropEnumTypes(t),n||await this.commitTransaction()}catch(e){try{n||await this.rollbackTransaction()}catch(e){}throw e}}async loadViews(e){if(!await this.hasTable(this.getTypeormMetadataTableName()))return[];e||(e=[]);const t=await this.getCurrentDatabase(),n=await this.getCurrentSchema(),r=0===e.length?"1=1":e.map((e=>this.driver.parseTableName(e))).map((({schema:e,tableName:t})=>(e||(e=this.driver.options.schema||n),`("t"."schema" = '${e}' AND "t"."name" = '${t}')`))).join(" OR "),i=`SELECT "t".* FROM ${this.escapePath(this.getTypeormMetadataTableName())} "t" INNER JOIN "pg_catalog"."pg_class" "c" ON "c"."relname" = "t"."name" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "c"."relnamespace" AND "n"."nspname" = "t"."schema" WHERE "t"."type" IN ('${Gn.VIEW}', '${Gn.MATERIALIZED_VIEW}') ${r?`AND (${r})`:""}`;return(await this.query(i)).map((e=>{const r=new Hn,i=e.schema!==n||this.driver.options.schema?e.schema:void 0;return r.database=t,r.schema=e.schema,r.name=this.driver.buildTableName(e.name,i),r.expression=e.value,r.materialized=e.type===Gn.MATERIALIZED_VIEW,r}))}async loadTables(e){if(e&&0===e.length)return[];const t=await this.getCurrentSchema(),n=await this.getCurrentDatabase(),r=[];if(e){const n='SELECT "table_schema", "table_name" FROM "information_schema"."tables" WHERE '+e.map((e=>this.driver.parseTableName(e))).map((({schema:e,tableName:n})=>`("table_schema" = '${e||t}' AND "table_name" = '${n}')`)).join(" OR ");r.push(...await this.query(n))}else{const e='SELECT "table_schema", "table_name" FROM "information_schema"."tables"';r.push(...await this.query(e))}if(0===r.length)return[];const i='SELECT columns.*, pg_catalog.col_description((\'"\' || table_catalog || \'"."\' || table_schema || \'"."\' || table_name || \'"\')::regclass::oid, ordinal_position) AS description, (\'"\' || "udt_schema" || \'"."\' || "udt_name" || \'"\')::"regtype" AS "regtype", pg_catalog.format_type("col_attr"."atttypid", "col_attr"."atttypmod") AS "format_type" FROM "information_schema"."columns" LEFT JOIN "pg_catalog"."pg_attribute" AS "col_attr" ON "col_attr"."attname" = "columns"."column_name" AND "col_attr"."attrelid" = ( SELECT "cls"."oid" FROM "pg_catalog"."pg_class" AS "cls" LEFT JOIN "pg_catalog"."pg_namespace" AS "ns" ON "ns"."oid" = "cls"."relnamespace" WHERE "cls"."relname" = "columns"."table_name" AND "ns"."nspname" = "columns"."table_schema" ) WHERE '+r.map((({table_schema:e,table_name:t})=>`("table_schema" = '${e}' AND "table_name" = '${t}')`)).join(" OR "),a=r.map((({table_schema:e,table_name:t})=>`("ns"."nspname" = '${e}' AND "t"."relname" = '${t}')`)).join(" OR "),s=`SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "cnst"."conname" AS "constraint_name", pg_get_constraintdef("cnst"."oid") AS "expression", CASE "cnst"."contype" WHEN 'p' THEN 'PRIMARY' WHEN 'u' THEN 'UNIQUE' WHEN 'c' THEN 'CHECK' WHEN 'x' THEN 'EXCLUDE' END AS "constraint_type", "a"."attname" AS "column_name" FROM "pg_constraint" "cnst" INNER JOIN "pg_class" "t" ON "t"."oid" = "cnst"."conrelid" INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "cnst"."connamespace" LEFT JOIN "pg_attribute" "a" ON "a"."attrelid" = "cnst"."conrelid" AND "a"."attnum" = ANY ("cnst"."conkey") WHERE "t"."relkind" IN ('r', 'p') AND (${a})`,o=`SELECT "ns"."nspname" AS "table_schema", "t"."relname" AS "table_name", "i"."relname" AS "constraint_name", "a"."attname" AS "column_name", CASE "ix"."indisunique" WHEN 't' THEN 'TRUE' ELSE'FALSE' END AS "is_unique", pg_get_expr("ix"."indpred", "ix"."indrelid") AS "condition", "types"."typname" AS "type_name" FROM "pg_class" "t" INNER JOIN "pg_index" "ix" ON "ix"."indrelid" = "t"."oid" INNER JOIN "pg_attribute" "a" ON "a"."attrelid" = "t"."oid"  AND "a"."attnum" = ANY ("ix"."indkey") INNER JOIN "pg_namespace" "ns" ON "ns"."oid" = "t"."relnamespace" INNER JOIN "pg_class" "i" ON "i"."oid" = "ix"."indexrelid" INNER JOIN "pg_type" "types" ON "types"."oid" = "a"."atttypid" LEFT JOIN "pg_constraint" "cnst" ON "cnst"."conname" = "i"."relname" WHERE "t"."relkind" IN ('r', 'p') AND "cnst"."contype" IS NULL AND (${a})`,c=`SELECT "con"."conname" AS "constraint_name", "con"."nspname" AS "table_schema", "con"."relname" AS "table_name", "att2"."attname" AS "column_name", "ns"."nspname" AS "referenced_table_schema", "cl"."relname" AS "referenced_table_name", "att"."attname" AS "referenced_column_name", "con"."confdeltype" AS "on_delete", "con"."confupdtype" AS "on_update", "con"."condeferrable" AS "deferrable", "con"."condeferred" AS "deferred" FROM ( SELECT UNNEST ("con1"."conkey") AS "parent", UNNEST ("con1"."confkey") AS "child", "con1"."confrelid", "con1"."conrelid", "con1"."conname", "con1"."contype", "ns"."nspname", "cl"."relname", "con1"."condeferrable", CASE WHEN "con1"."condeferred" THEN 'INITIALLY DEFERRED' ELSE 'INITIALLY IMMEDIATE' END as condeferred, CASE "con1"."confdeltype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confdeltype", CASE "con1"."confupdtype" WHEN 'a' THEN 'NO ACTION' WHEN 'r' THEN 'RESTRICT' WHEN 'c' THEN 'CASCADE' WHEN 'n' THEN 'SET NULL' WHEN 'd' THEN 'SET DEFAULT' END as "confupdtype" FROM "pg_class" "cl" INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_constraint" "con1" ON "con1"."conrelid" = "cl"."oid" WHERE "con1"."contype" = 'f' AND (${r.map((({table_schema:e,table_name:t})=>`("ns"."nspname" = '${e}' AND "cl"."relname" = '${t}')`)).join(" OR ")}) ) "con" INNER JOIN "pg_attribute" "att" ON "att"."attrelid" = "con"."confrelid" AND "att"."attnum" = "con"."child" INNER JOIN "pg_class" "cl" ON "cl"."oid" = "con"."confrelid" ${await this.hasSupportForPartitionedTables()?' AND "cl"."relispartition" = \'f\'':""}INNER JOIN "pg_namespace" "ns" ON "cl"."relnamespace" = "ns"."oid" INNER JOIN "pg_attribute" "att2" ON "att2"."attrelid" = "con"."conrelid" AND "att2"."attnum" = "con"."parent"`,[l,u,d,h]=await Promise.all([this.query(i),this.query(s),this.query(o),this.query(c)]);return Promise.all(r.map((async e=>{const r=new ft,i=(e,n)=>e[n]!==t||this.driver.options.schema&&this.driver.options.schema!==t?e[n]:void 0,a=i(e,"table_schema");r.database=n,r.schema=e.table_schema,r.name=this.driver.buildTableName(e.table_name,a),r.columns=await Promise.all(l.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema)).map((async t=>{const i=u.filter((e=>e.table_name===t.table_name&&e.table_schema===t.table_schema&&e.column_name===t.column_name)),a=new ot;if(a.name=t.column_name,a.type=t.regtype.toLowerCase(),"numeric"!==a.type&&"decimal"!==a.type&&"float"!==a.type||(null===t.numeric_precision||this.isDefaultColumnPrecision(r,a,t.numeric_precision)?null===t.numeric_scale||this.isDefaultColumnScale(r,a,t.numeric_scale)||(a.precision=void 0):a.precision=t.numeric_precision,null===t.numeric_scale||this.isDefaultColumnScale(r,a,t.numeric_scale)?null===t.numeric_precision||this.isDefaultColumnPrecision(r,a,t.numeric_precision)||(a.scale=void 0):a.scale=t.numeric_scale),"interval"!==a.type&&"time without time zone"!==a.type&&"time with time zone"!==a.type&&"timestamp without time zone"!==a.type&&"timestamp with time zone"!==a.type||(a.precision=this.isDefaultColumnPrecision(r,a,t.datetime_precision)?void 0:t.datetime_precision),"USER-DEFINED"===t.data_type||"ARRAY"===t.data_type){const{name:n}=await this.getUserDefinedTypeName(r,a),i=this.buildEnumName(r,a,!1,!0)!==n?n:void 0,s=`SELECT "e"."enumlabel" AS "value" FROM "pg_enum" "e" INNER JOIN "pg_type" "t" ON "t"."oid" = "e"."enumtypid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = '${e.table_schema}' AND "t"."typname" = '${i||n}'`,o=await this.query(s);if(o.length&&(a.type="enum",a.enum=o.map((e=>e.value)),a.enumName=i),"ARRAY"===t.data_type){a.isArray=!0;const e=a.type.replace("[]","");a.type=this.connection.driver.normalizeType({type:e})}}if("geometry"===a.type){const e=`SELECT * FROM (\n                        SELECT\n                          "f_table_schema" "table_schema",\n                          "f_table_name" "table_name",\n                          "f_geometry_column" "column_name",\n                          "srid",\n                          "type"\n                        FROM "geometry_columns"\n                      ) AS _\n                      WHERE\n                          "column_name" = '${t.column_name}' AND\n                          "table_schema" = '${t.table_schema}' AND\n                          "table_name" = '${t.table_name}'`,n=await this.query(e);n.length>0&&(a.spatialFeatureType=n[0].type,a.srid=n[0].srid)}if("geography"===a.type){const e=`SELECT * FROM (\n                        SELECT\n                          "f_table_schema" "table_schema",\n                          "f_table_name" "table_name",\n                          "f_geography_column" "column_name",\n                          "srid",\n                          "type"\n                        FROM "geography_columns"\n                      ) AS _\n                      WHERE\n                          "column_name" = '${t.column_name}' AND\n                          "table_schema" = '${t.table_schema}' AND\n                          "table_name" = '${t.table_name}'`,n=await this.query(e);n.length>0&&(a.spatialFeatureType=n[0].type,a.srid=n[0].srid)}if(-1!==this.driver.withLengthColumnTypes.indexOf(a.type)){let e;if(a.isArray){const n=/\((\d+)\)/.exec(t.format_type);e=n?n[1]:void 0}else t.character_maximum_length&&(e=t.character_maximum_length.toString());e&&(a.length=this.isDefaultColumnLength(r,a,e)?"":e)}a.isNullable="YES"===t.is_nullable;const s=i.find((e=>"PRIMARY"===e.constraint_type));if(s){a.isPrimary=!0;const e=u.filter((e=>e.table_name===t.table_name&&e.table_schema===t.table_schema&&e.column_name!==t.column_name&&"PRIMARY"===e.constraint_type)).map((e=>e.column_name));e.push(t.column_name);const n=this.connection.namingStrategy.primaryKeyName(r,e);s.constraint_name!==n&&(a.primaryKeyConstraintName=s.constraint_name)}const o=i.filter((e=>"UNIQUE"===e.constraint_type)),c=o.every((e=>u.some((n=>"UNIQUE"===n.constraint_type&&n.constraint_name===e.constraint_name&&n.column_name!==t.column_name))));if(a.isUnique=o.length>0&&!c,"YES"===t.is_identity)a.isGenerated=!0,a.generationStrategy="identity",a.generatedIdentity=t.identity_generation;else if(null!==t.column_default&&void 0!==t.column_default){const e=`nextval('${this.buildSequenceName(r,t.column_name)}'::regclass)`,n=`nextval('${this.buildSequencePath(r,t.column_name)}'::regclass)`,i=t.column_default.replace(/"/g,"");i===e||i===n?(a.isGenerated=!0,a.generationStrategy="increment"):"gen_random_uuid()"===t.column_default||/^uuid_generate_v\d\(\)/.test(t.column_default)?"uuid"===a.type?(a.isGenerated=!0,a.generationStrategy="uuid"):a.default=t.column_default:"now()"===t.column_default||-1!==t.column_default.indexOf("'now'::text")?a.default=t.column_default:(a.default=t.column_default.replace(/::[\w\s\.\[\]\"]+/g,""),a.default=a.default.replace(/^(-?\d+)$/,"'$1'"))}if("ALWAYS"===t.is_generated&&t.generation_expression){a.generatedType="STORED";const t=await this.selectTypeormMetadataSql({database:n,schema:e.table_schema,table:e.table_name,type:Gn.GENERATED_COLUMN,name:a.name}),r=await this.query(t.query,t.parameters);r[0]&&r[0].value?a.asExpression=r[0].value:a.asExpression=""}return a.comment=t.description?t.description:void 0,t.character_set_name&&(a.charset=t.character_set_name),t.collation_name&&(a.collation=t.collation_name),a})));const s=cn.m.uniq(u.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema&&"UNIQUE"===t.constraint_type)),(e=>e.constraint_name));r.uniques=s.map((e=>{const t=u.filter((t=>t.constraint_name===e.constraint_name));return new dt({name:e.constraint_name,columnNames:t.map((e=>e.column_name)),deferrable:e.deferrable?e.deferred:void 0})}));const o=cn.m.uniq(u.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema&&"CHECK"===t.constraint_type)),(e=>e.constraint_name));r.checks=o.map((e=>{const t=u.filter((t=>t.constraint_name===e.constraint_name));return new ht({name:e.constraint_name,columnNames:t.map((e=>e.column_name)),expression:e.expression.replace(/^\s*CHECK\s*\((.*)\)\s*$/i,"$1")})}));const c=cn.m.uniq(u.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema&&"EXCLUDE"===t.constraint_type)),(e=>e.constraint_name));r.exclusions=c.map((e=>new pt({name:e.constraint_name,expression:e.expression.substring(8)})));const p=cn.m.uniq(h.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema)),(e=>e.constraint_name));r.foreignKeys=p.map((e=>{const t=h.filter((t=>t.constraint_name===e.constraint_name)),n=i(e,"referenced_table_schema"),r=this.driver.buildTableName(e.referenced_table_name,n);return new lt({name:e.constraint_name,columnNames:t.map((e=>e.column_name)),referencedSchema:e.referenced_table_schema,referencedTableName:r,referencedColumnNames:t.map((e=>e.referenced_column_name)),onDelete:e.on_delete,onUpdate:e.on_update,deferrable:e.deferrable?e.deferred:void 0})}));const f=cn.m.uniq(d.filter((t=>t.table_name===e.table_name&&t.table_schema===e.table_schema)),(e=>e.constraint_name));return r.indices=f.map((e=>{const t=d.filter((t=>t.table_schema===e.table_schema&&t.table_name===e.table_name&&t.constraint_name===e.constraint_name));return new ct({table:r,name:e.constraint_name,columnNames:t.map((e=>e.column_name)),isUnique:"TRUE"===e.is_unique,where:e.condition,isSpatial:t.every((e=>this.driver.spatialTypes.indexOf(e.type_name)>=0)),isFulltext:!1})})),r})))}createTableSql(e,t){const n=e.columns.map((t=>this.buildCreateColumnSql(e,t))).join(", ");let r=`CREATE TABLE ${this.escapePath(e)} (${n}`;if(e.columns.filter((e=>e.isUnique)).forEach((t=>{e.uniques.some((e=>1===e.columnNames.length&&e.columnNames[0]===t.name))||e.uniques.push(new dt({name:this.connection.namingStrategy.uniqueConstraintName(e,[t.name]),columnNames:[t.name]}))})),e.uniques.length>0){const t=e.uniques.map((t=>{let n=`CONSTRAINT "${t.name?t.name:this.connection.namingStrategy.uniqueConstraintName(e,t.columnNames)}" UNIQUE (${t.columnNames.map((e=>`"${e}"`)).join(", ")})`;return t.deferrable&&(n+=` DEFERRABLE ${t.deferrable}`),n})).join(", ");r+=`, ${t}`}if(e.checks.length>0){const t=e.checks.map((t=>`CONSTRAINT "${t.name?t.name:this.connection.namingStrategy.checkConstraintName(e,t.expression)}" CHECK (${t.expression})`)).join(", ");r+=`, ${t}`}if(e.exclusions.length>0){const t=e.exclusions.map((t=>`CONSTRAINT "${t.name?t.name:this.connection.namingStrategy.exclusionConstraintName(e,t.expression)}" EXCLUDE ${t.expression}`)).join(", ");r+=`, ${t}`}if(e.foreignKeys.length>0&&t){const t=e.foreignKeys.map((t=>{const n=t.columnNames.map((e=>`"${e}"`)).join(", ");t.name||(t.name=this.connection.namingStrategy.foreignKeyName(e,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const r=t.referencedColumnNames.map((e=>`"${e}"`)).join(", ");let i=`CONSTRAINT "${t.name}" FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))} (${r})`;return t.onDelete&&(i+=` ON DELETE ${t.onDelete}`),t.onUpdate&&(i+=` ON UPDATE ${t.onUpdate}`),t.deferrable&&(i+=` DEFERRABLE ${t.deferrable}`),i})).join(", ");r+=`, ${t}`}const i=e.columns.filter((e=>e.isPrimary));if(i.length>0){const t=i[0].primaryKeyConstraintName?i[0].primaryKeyConstraintName:this.connection.namingStrategy.primaryKeyName(e,i.map((e=>e.name))),n=i.map((e=>`"${e.name}"`)).join(", ");r+=`, CONSTRAINT "${t}" PRIMARY KEY (${n})`}return r+=")",e.columns.filter((e=>e.comment)).forEach((t=>r+=`; COMMENT ON COLUMN ${this.escapePath(e)}."${t.name}" IS ${this.escapeComment(t.comment)}`)),new Xn(r)}async getVersion(){return(await this.query("SELECT version()"))[0].version.replace(/^PostgreSQL ([\d\.]+) .*$/,"$1")}dropTableSql(e){return new Xn(`DROP TABLE ${this.escapePath(e)}`)}createViewSql(e){const t=e.materialized?"MATERIALIZED ":"",n=this.escapePath(e);return"string"==typeof e.expression?new Xn(`CREATE ${t}VIEW ${n} AS ${e.expression}`):new Xn(`CREATE ${t}VIEW ${n} AS ${e.expression(this.connection).getQuery()}`)}async insertViewDefinitionSql(e){const t=await this.getCurrentSchema();let{schema:n,tableName:r}=this.driver.parseTableName(e);n||(n=t);const i=e.materialized?Gn.MATERIALIZED_VIEW:Gn.VIEW,a="string"==typeof e.expression?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:i,schema:n,name:r,value:a})}dropViewSql(e){const t=e.materialized?"MATERIALIZED ":"";return new Xn(`DROP ${t}VIEW ${this.escapePath(e)}`)}async deleteViewDefinitionSql(e){const t=await this.getCurrentSchema();let{schema:n,tableName:r}=this.driver.parseTableName(e);n||(n=t);const i=e.materialized?Gn.MATERIALIZED_VIEW:Gn.VIEW;return this.deleteTypeormMetadataSql({type:i,schema:n,name:r})}async dropEnumTypes(e){const t=`SELECT 'DROP TYPE IF EXISTS "' || n.nspname || '"."' || t.typname || '" CASCADE;' as "query" FROM "pg_type" "t" INNER JOIN "pg_enum" "e" ON "e"."enumtypid" = "t"."oid" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" IN (${e}) GROUP BY "n"."nspname", "t"."typname"`,n=await this.query(t);await Promise.all(n.map((e=>this.query(e.query))))}async hasEnumType(e,t){let{schema:n}=this.driver.parseTableName(e);n||(n=await this.getCurrentSchema());const r=`SELECT "n"."nspname", "t"."typname" FROM "pg_type" "t" INNER JOIN "pg_namespace" "n" ON "n"."oid" = "t"."typnamespace" WHERE "n"."nspname" = '${n}' AND "t"."typname" = '${this.buildEnumName(e,t,!1,!0)}'`;return!!(await this.query(r)).length}createEnumTypeSql(e,t,n){n||(n=this.buildEnumName(e,t));const r=t.enum.map((e=>`'${e.replace("'","''")}'`)).join(", ");return new Xn(`CREATE TYPE ${n} AS ENUM(${r})`)}dropEnumTypeSql(e,t,n){return n||(n=this.buildEnumName(e,t)),new Xn(`DROP TYPE ${n}`)}createIndexSql(e,t){const n=t.columnNames.map((e=>`"${e}"`)).join(", ");return new Xn(`CREATE ${t.isUnique?"UNIQUE ":""}INDEX "${t.name}" ON ${this.escapePath(e)} ${t.isSpatial?"USING GiST ":""}(${n}) ${t.where?"WHERE "+t.where:""}`)}dropIndexSql(e,t){let n=gt.t.isTableIndex(t)?t.name:t;const{schema:r}=this.driver.parseTableName(e);return new Xn(r?`DROP INDEX "${r}"."${n}"`:`DROP INDEX "${n}"`)}createPrimaryKeySql(e,t,n){const r=n||this.connection.namingStrategy.primaryKeyName(e,t),i=t.map((e=>`"${e}"`)).join(", ");return new Xn(`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT "${r}" PRIMARY KEY (${i})`)}dropPrimaryKeySql(e){if(!e.primaryColumns.length)throw new st.VR(`Table ${e} has no primary keys.`);const t=e.primaryColumns.map((e=>e.name)),n=e.primaryColumns[0].primaryKeyConstraintName,r=n||this.connection.namingStrategy.primaryKeyName(e,t);return new Xn(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT "${r}"`)}createUniqueConstraintSql(e,t){const n=t.columnNames.map((e=>'"'+e+'"')).join(", ");let r=`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT "${t.name}" UNIQUE (${n})`;return t.deferrable&&(r+=` DEFERRABLE ${t.deferrable}`),new Xn(r)}dropUniqueConstraintSql(e,t){const n=gt.t.isTableUnique(t)?t.name:t;return new Xn(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT "${n}"`)}createCheckConstraintSql(e,t){return new Xn(`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT "${t.name}" CHECK (${t.expression})`)}dropCheckConstraintSql(e,t){const n=gt.t.isTableCheck(t)?t.name:t;return new Xn(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT "${n}"`)}createExclusionConstraintSql(e,t){return new Xn(`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT "${t.name}" EXCLUDE ${t.expression}`)}dropExclusionConstraintSql(e,t){const n=gt.t.isTableExclusion(t)?t.name:t;return new Xn(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT "${n}"`)}createForeignKeySql(e,t){const n=t.columnNames.map((e=>'"'+e+'"')).join(", "),r=t.referencedColumnNames.map((e=>'"'+e+'"')).join(",");let i=`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT "${t.name}" FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))}(${r})`;return t.onDelete&&(i+=` ON DELETE ${t.onDelete}`),t.onUpdate&&(i+=` ON UPDATE ${t.onUpdate}`),t.deferrable&&(i+=` DEFERRABLE ${t.deferrable}`),new Xn(i)}dropForeignKeySql(e,t){const n=gt.t.isTableForeignKey(t)?t.name:t;return new Xn(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT "${n}"`)}buildSequenceName(e,t){const{tableName:n}=this.driver.parseTableName(e),r=gt.t.isTableColumn(t)?t.name:t;let i=`${n}_${r}_seq`;return i.length>this.connection.driver.maxAliasLength&&(i=`${n.substring(0,29)}_${r.substring(0,Math.max(29,63-e.name.length-5))}_seq`),i}buildSequencePath(e,t){const{schema:n}=this.driver.parseTableName(e);return n?`${n}.${this.buildSequenceName(e,t)}`:this.buildSequenceName(e,t)}buildEnumName(e,t,n=!0,r,i){const{schema:a,tableName:s}=this.driver.parseTableName(e);let o=t.enumName?t.enumName:`${s}_${t.name.toLowerCase()}_enum`;return a&&n&&(o=`${a}.${o}`),i&&(o+="_old"),o.split(".").map((e=>r?e:`"${e}"`)).join(".")}async getUserDefinedTypeName(e,t){let{schema:n,tableName:r}=this.driver.parseTableName(e);n||(n=await this.getCurrentSchema());const i=await this.query(`SELECT "udt_schema", "udt_name" FROM "information_schema"."columns" WHERE "table_schema" = '${n}' AND "table_name" = '${r}' AND "column_name"='${t.name}'`);let a=i[0].udt_name;return 0===a.indexOf("_")&&(a=a.substr(1,a.length)),{schema:i[0].udt_schema,name:a}}escapeComment(e){return e&&0!==e.length?`'${e=e.replace(/'/g,"''").replace(/\u0000/g,"")}'`:"NULL"}escapePath(e){const{schema:t,tableName:n}=this.driver.parseTableName(e);return t&&t!==this.driver.searchSchema?`"${t}"."${n}"`:`"${n}"`}async getTableNameWithSchema(e){const t=gt.t.isTable(e)?e.name:e;if(-1===t.indexOf(".")){return`${(await this.query("SELECT current_schema()"))[0].current_schema}.${t}`}return`${t.split(".")[0]}.${t.split(".")[1]}`}buildCreateColumnSql(e,t){let n='"'+t.name+'"';if(!0===t.isGenerated&&"uuid"!==t.generationStrategy)if("identity"===t.generationStrategy){const e=t.generatedIdentity||"BY DEFAULT";n+=` ${t.type} GENERATED ${e} AS IDENTITY`}else"integer"!==t.type&&"int"!==t.type&&"int4"!==t.type||(n+=" SERIAL"),"smallint"!==t.type&&"int2"!==t.type||(n+=" SMALLSERIAL"),"bigint"!==t.type&&"int8"!==t.type||(n+=" BIGSERIAL");return"enum"===t.type||"simple-enum"===t.type?(n+=" "+this.buildEnumName(e,t),t.isArray&&(n+=" array")):t.isGenerated&&"uuid"!==t.type||(n+=" "+this.connection.driver.createFullType(t)),"STORED"===t.generatedType&&t.asExpression&&(n+=` GENERATED ALWAYS AS (${t.asExpression}) STORED`),t.charset&&(n+=' CHARACTER SET "'+t.charset+'"'),t.collation&&(n+=' COLLATE "'+t.collation+'"'),!0!==t.isNullable&&(n+=" NOT NULL"),void 0!==t.default&&null!==t.default&&(n+=" DEFAULT "+t.default),t.isGenerated&&"uuid"===t.generationStrategy&&!t.default&&(n+=` DEFAULT ${this.driver.uuidGenerator}`),n}async hasSupportForPartitionedTables(){return!!(await this.query("SELECT TRUE FROM information_schema.columns WHERE table_name = 'pg_class' and column_name = 'relispartition'")).length}}class Er extends wr{constructor(e,t){super(e,t)}}class _r extends Er{constructor(e,t,n){super(e,n),this.client=t}connect(){return this.databaseConnection?Promise.resolve(this.databaseConnection):(this.databaseConnectionPromise||("slave"===this.mode&&this.driver.isReplicated?this.databaseConnectionPromise=this.driver.obtainSlaveConnection().then((([e,t])=>(this.driver.connectedQueryRunners.push(this),this.databaseConnection=e,this.releaseCallback=t,this.databaseConnection))):this.databaseConnectionPromise=this.driver.obtainMasterConnection().then((([e,t])=>(this.driver.connectedQueryRunners.push(this),this.databaseConnection=e,this.releaseCallback=t,this.databaseConnection)))),this.databaseConnectionPromise)}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(e){throw this.isTransactionActive=!1,e}0===this.transactionDepth?await this.client.startTransaction():await this.query(`SAVEPOINT typeorm_${this.transactionDepth}`),this.transactionDepth+=1,await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionCommit"),this.transactionDepth>1?await this.query("RELEASE SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.client.commitTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionRollback"),this.transactionDepth>1?await this.query("ROLLBACK TO SAVEPOINT typeorm_"+(this.transactionDepth-1)):(await this.client.rollbackTransaction(),this.isTransactionActive=!1),this.transactionDepth-=1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new Qn.E;const r=await this.client.query(e,t),i=new rr;return i.raw=r,(null==r?void 0:r.hasOwnProperty("records"))&&Array.isArray(r.records)&&(i.records=r.records),(null==r?void 0:r.hasOwnProperty("numberOfRecordsUpdated"))&&(i.affected=r.numberOfRecordsUpdated),n?i:i.raw}}class Sr extends kt.PostgresDriver{}class Tr extends Sr{constructor(e){super(),this.transactionSupport="nested",this.connection=e,this.options=e.options,this.isReplicated=!1,this.loadDependencies(),this.client=new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,((e,t)=>this.connection.logger.logQuery(e,t)),this.options.serviceConfigOptions,this.options.formatOptions),this.database=Nt.I.buildDriverOptions(this.options).database}async connect(){}async disconnect(){}createQueryRunner(e){return new _r(this,new this.DataApiDriver(this.options.region,this.options.secretArn,this.options.resourceArn,this.options.database,((e,t)=>this.connection.logger.logQuery(e,t)),this.options.serviceConfigOptions,this.options.formatOptions),e)}preparePersistentValue(e,t){return this.options.formatOptions&&!1===this.options.formatOptions.castParameters?super.preparePersistentValue(e,t):(t.transformer&&(e=ln.W.transformTo(t.transformer,e)),this.client.preparePersistentValue(e,t))}prepareHydratedValue(e,t){return this.options.formatOptions&&!1===this.options.formatOptions.castParameters?super.prepareHydratedValue(e,t):(t.transformer&&(e=ln.W.transformFrom(t.transformer,e)),this.client.prepareHydratedValue(e,t))}loadDependencies(){const e=this.options.driver||nt.load("typeorm-aurora-data-api-driver"),{pg:t}=e;this.DataApiDriver=t}executeQuery(e,t){return this.connection.query(t)}async afterConnect(){const e=await this.checkMetadataForExtensions();return e.hasExtensions&&await this.enableExtensions(e,this.connection),Promise.resolve()}}class Ar extends tr{constructor(e){super(),this.driver=e,this.connection=e.connection,this.broadcaster=new nr(this)}async beforeMigration(){await this.query("PRAGMA foreign_keys = OFF")}async afterMigration(){await this.query("PRAGMA foreign_keys = ON")}async executeSet(e){if(this.isReleased)throw new Qn.E;return(await this.connect()).executeSet(e,!1)}async query(e,t,n=!1){if(this.isReleased)throw new Qn.E;const r=await this.connect();this.driver.connection.logger.logQuery(e,t,this);const i=e.substr(0,e.indexOf(" "));try{let a;a=-1!==["BEGIN","ROLLBACK","COMMIT","CREATE","ALTER","DROP"].indexOf(i)?await r.execute(e,!1):-1!==["INSERT","UPDATE","DELETE"].indexOf(i)?await r.run(e,t,!1):await r.query(e,t||[]);const s=new rr;return(null==a?void 0:a.hasOwnProperty("values"))&&(s.raw=a.values,s.records=a.values),(null==a?void 0:a.hasOwnProperty("changes"))&&(s.affected=a.changes.changes,s.raw=a.changes.lastId||a.changes.changes),n?s:s.raw}catch(n){throw this.driver.connection.logger.logQueryError(n,e,t,this),new Jn.C(e,t,n)}}parametrize(e){return Object.keys(e).map((e=>`"${e}"=?`))}}class Nr extends Kn{constructor(e){if(super(e),this.database=this.options.database,this.driver=this.options.driver,!this.options.database)throw new st.lG("database");if(!this.options.driver)throw new st.lG("driver");this.sqlite=this.options.driver}async connect(){this.databaseConnection=this.createDatabaseConnection(),await this.databaseConnection}async disconnect(){this.queryRunner=void 0;return(await this.databaseConnection).close().then((()=>{this.databaseConnection=void 0}))}createQueryRunner(e){return this.queryRunner||(this.queryRunner=new Ar(this)),this.queryRunner}async createDatabaseConnection(){const e=this.options.mode||"no-encryption",t="no-encryption"!==e,n=void 0===this.options.version?1:this.options.version,r=await this.sqlite.createConnection(this.options.database,t,e,n);return await r.open(),await r.query("PRAGMA foreign_keys = ON"),this.options.journalMode&&-1!==["DELETE","TRUNCATE","PERSIST","MEMORY","WAL","OFF"].indexOf(this.options.journalMode)&&await r.query(`PRAGMA journal_mode = ${this.options.journalMode}`),r}loadDependencies(){if(this.sqlite=this.driver,!this.driver)throw new st.WZ("Capacitor","@capacitor-community/sqlite")}}class Cr extends er{constructor(e,t){super(),this.driver=e,this.connection=e.connection,this.mode=t,this.broadcaster=new nr(this)}async connect(){if(this.session)return Promise.resolve(this.session);const[e]=await this.driver.instanceDatabase.createSession({});return this.session=e,this.sessionTransaction=await e.transaction(),this.session}async release(){return this.isReleased=!0,this.session&&await this.session.delete(),this.session=void 0,Promise.resolve()}async startTransaction(e){this.isTransactionActive=!0;try{await this.broadcaster.broadcast("BeforeTransactionStart")}catch(e){throw this.isTransactionActive=!1,e}await this.connect(),await this.sessionTransaction.begin(),this.connection.logger.logQuery("START TRANSACTION"),await this.broadcaster.broadcast("AfterTransactionStart")}async commitTransaction(){if(!this.isTransactionActive||!this.sessionTransaction)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionCommit"),await this.sessionTransaction.commit(),this.connection.logger.logQuery("COMMIT"),this.isTransactionActive=!1,await this.broadcaster.broadcast("AfterTransactionCommit")}async rollbackTransaction(){if(!this.isTransactionActive||!this.sessionTransaction)throw new Yn.v;await this.broadcaster.broadcast("BeforeTransactionRollback"),await this.sessionTransaction.rollback(),this.connection.logger.logQuery("ROLLBACK"),this.isTransactionActive=!1,await this.broadcaster.broadcast("AfterTransactionRollback")}async query(e,t,n=!1){if(this.isReleased)throw new Qn.E;try{const r=+new Date;let i;await this.connect();const a=e.startsWith("SELECT"),s=a&&!this.isTransactionActive?this.driver.instanceDatabase:this.sessionTransaction;this.isTransactionActive||a||await this.sessionTransaction.begin();try{this.driver.connection.logger.logQuery(e,t,this),i=await s.run({sql:e,params:t?t.reduce(((e,t,n)=>(e["param"+n]=t,e)),{}):void 0,json:!0}),this.isTransactionActive||a||await this.sessionTransaction.commit()}catch(e){try{this.isTransactionActive||a||await this.sessionTransaction.rollback()}catch(e){}throw e}const o=this.driver.options.maxQueryExecutionTime,c=+new Date-r;o&&c>o&&this.driver.connection.logger.logQuerySlow(c,e,t,this);const l=new rr;return l.raw=i,l.records=i?i[0]:[],i&&i[1]&&i[1].rowCountExact&&(l.affected=parseInt(i[1].rowCountExact)),n?l:l.records}catch(n){throw this.driver.connection.logger.logQueryError(n,e,t,this),new Jn.C(e,t,n)}}async updateDDL(e,t){if(this.isReleased)throw new Qn.E;this.driver.connection.logger.logQuery(e,t,this);try{const n=+new Date,[r]=await this.driver.instanceDatabase.updateSchema(e);await r.promise();const i=this.driver.options.maxQueryExecutionTime,a=+new Date-n;i&&a>i&&this.driver.connection.logger.logQuerySlow(a,e,t,this)}catch(n){throw this.driver.connection.logger.logQueryError(n,e,t,this),new Jn.C(e,t,n)}}async stream(e,t,n,r){if(this.isReleased)throw new Qn.E;try{this.driver.connection.logger.logQuery(e,t,this);const i={sql:e,params:t?t.reduce(((e,t,n)=>(e["param"+n]=t,e)),{}):void 0,json:!0},a=this.driver.instanceDatabase.runStream(i);return n&&a.on("end",n),r&&a.on("error",r),a}catch(n){throw this.driver.connection.logger.logQueryError(n,e,t,this),new Jn.C(e,t,n)}}async getDatabases(){return Promise.resolve([])}async getSchemas(e){return Promise.resolve([])}async hasDatabase(e){throw new st.VR("Check database queries are not supported by Spanner driver.")}async getCurrentDatabase(){throw new st.VR("Check database queries are not supported by Spanner driver.")}async hasSchema(e){return!!(await this.query(`SELECT * FROM "information_schema"."schemata" WHERE "schema_name" = '${e}'`)).length}async getCurrentSchema(){throw new st.VR("Check schema queries are not supported by Spanner driver.")}async hasTable(e){const t=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`TABLES\` WHERE \`TABLE_CATALOG\` = '' AND \`TABLE_SCHEMA\` = '' AND \`TABLE_TYPE\` = 'BASE TABLE' AND \`TABLE_NAME\` = '${e instanceof ft?e.name:e}'`;return!!(await this.query(t)).length}async hasColumn(e,t){const n=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`COLUMNS\` WHERE \`TABLE_CATALOG\` = '' AND \`TABLE_SCHEMA\` = '' AND \`TABLE_NAME\` = '${e instanceof ft?e.name:e}' AND \`COLUMN_NAME\` = '${t}'`;return!!(await this.query(n)).length}async createDatabase(e,t){if(t){if(await this.hasDatabase(e))return Promise.resolve()}const n=`CREATE DATABASE "${e}"`,r=`DROP DATABASE "${e}"`;await this.executeQueries(new Xn(n),new Xn(r))}async dropDatabase(e,t){const n=t?`DROP DATABASE IF EXISTS "${e}"`:`DROP DATABASE "${e}"`,r=`CREATE DATABASE "${e}"`;await this.executeQueries(new Xn(n),new Xn(r))}async createSchema(e,t){return Promise.resolve()}async dropSchema(e,t,n){return Promise.resolve()}async createTable(e,t=!1,n=!0,r=!0){if(t){if(await this.hasTable(e))return Promise.resolve()}const i=[],a=[];i.push(this.createTableSql(e,n)),a.push(this.dropTableSql(e)),n&&e.foreignKeys.forEach((t=>a.push(this.dropForeignKeySql(e,t)))),r&&e.indices.forEach((t=>{t.name||(t.name=this.connection.namingStrategy.indexName(e,t.columnNames,t.where)),i.push(this.createIndexSql(e,t)),a.push(this.dropIndexSql(e,t))}));const s=e.columns.filter((e=>e.generatedType&&e.asExpression));for(const t of s){const n=this.insertTypeormMetadataSql({table:e.name,type:Gn.GENERATED_COLUMN,name:t.name,value:t.asExpression}),r=this.deleteTypeormMetadataSql({table:e.name,type:Gn.GENERATED_COLUMN,name:t.name});i.push(n),a.push(r)}await this.executeQueries(i,a)}async dropTable(e,t,n=!0,r=!0){if(t){if(!await this.hasTable(e))return Promise.resolve()}const i=n,a=this.getTablePath(e),s=await this.getCachedTable(a),o=[],c=[];r&&s.indices.forEach((e=>{o.push(this.dropIndexSql(s,e)),c.push(this.createIndexSql(s,e))})),n&&s.foreignKeys.forEach((e=>o.push(this.dropForeignKeySql(s,e)))),o.push(this.dropTableSql(s)),c.push(this.createTableSql(s,i));const l=s.columns.filter((e=>e.generatedType&&e.asExpression));for(const e of l){const t=this.deleteTypeormMetadataSql({table:s.name,type:Gn.GENERATED_COLUMN,name:e.name}),n=this.insertTypeormMetadataSql({table:s.name,type:Gn.GENERATED_COLUMN,name:e.name,value:e.asExpression});o.push(t),c.push(n)}await this.executeQueries(o,c)}async createView(e){const t=[],n=[];t.push(this.createViewSql(e)),t.push(await this.insertViewDefinitionSql(e)),n.push(this.dropViewSql(e)),n.push(await this.deleteViewDefinitionSql(e)),await this.executeQueries(t,n)}async dropView(e){const t=e instanceof Hn?e.name:e,n=await this.getCachedView(t),r=[],i=[];r.push(await this.deleteViewDefinitionSql(n)),r.push(this.dropViewSql(n)),i.push(await this.insertViewDefinitionSql(n)),i.push(this.createViewSql(n)),await this.executeQueries(r,i)}async renameTable(e,t){throw new st.VR("Rename table queries are not supported by Spanner driver.")}async addColumn(e,t){const n=e instanceof ft?e:await this.getCachedTable(e),r=n.clone(),i=[],a=[];i.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(t)}`)),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN ${this.driver.escape(t.name)}`));const s=r.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===t.name));if(s)i.push(this.createIndexSql(n,s)),a.push(this.dropIndexSql(n,s));else if(t.isUnique){const e=new ct({name:this.connection.namingStrategy.indexName(n,[t.name]),columnNames:[t.name],isUnique:!0});r.indices.push(e),r.uniques.push(new dt({name:e.name,columnNames:e.columnNames})),i.push(this.createIndexSql(n,e)),a.push(this.dropIndexSql(n,e))}if(t.generatedType&&t.asExpression){const e=this.insertTypeormMetadataSql({table:n.name,type:Gn.GENERATED_COLUMN,name:t.name,value:t.asExpression}),r=this.deleteTypeormMetadataSql({table:n.name,type:Gn.GENERATED_COLUMN,name:t.name});i.push(e),a.push(r)}await this.executeQueries(i,a),r.addColumn(t),this.replaceCachedTable(n,r)}async addColumns(e,t){for(const n of t)await this.addColumn(e,n)}async renameColumn(e,t,n){const r=e instanceof ft?e:await this.getCachedTable(e),i=t instanceof ot?t:r.columns.find((e=>e.name===t));if(!i)throw new st.VR(`Column "${t}" was not found in the "${r.name}" table.`);let a;return n instanceof ot?a=n:(a=i.clone(),a.name=n),this.changeColumn(r,i,a)}async changeColumn(e,t,n){const r=e instanceof ft?e:await this.getCachedTable(e);let i=r.clone();const a=[],s=[],o=t instanceof ot?t:r.columns.find((e=>e.name===t));if(!o)throw new st.VR(`Column "${t}" was not found in the "${r.name}" table.`);if(o.name!==n.name||o.type!==n.type||o.length!==n.length||o.isArray!==n.isArray||o.generatedType!==n.generatedType||o.asExpression!==n.asExpression)await this.dropColumn(r,o),await this.addColumn(r,n),i=r.clone();else if(n.precision===o.precision&&n.scale===o.scale||(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(n)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${n.name}" TYPE ${this.driver.createFullType(o)}`))),o.isNullable!==n.isNullable&&(n.isNullable?(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${o.name}" DROP NOT NULL`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${o.name}" SET NOT NULL`))):(a.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${o.name}" SET NOT NULL`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(r)} ALTER COLUMN "${o.name}" DROP NOT NULL`)))),n.isUnique!==o.isUnique)if(!0===n.isUnique){const e=new ct({name:this.connection.namingStrategy.indexName(r,[n.name]),columnNames:[n.name],isUnique:!0});i.indices.push(e),i.uniques.push(new dt({name:e.name,columnNames:e.columnNames})),a.push(this.createIndexSql(r,e)),s.push(this.dropIndexSql(r,e))}else{const e=i.indices.find((e=>1===e.columnNames.length&&!0===e.isUnique&&!!e.columnNames.find((e=>e===n.name))));i.indices.splice(i.indices.indexOf(e),1);const t=i.uniques.find((t=>t.name===e.name));i.uniques.splice(i.uniques.indexOf(t),1),a.push(this.dropIndexSql(r,e)),s.push(this.createIndexSql(r,e))}await this.executeQueries(a,s),this.replaceCachedTable(r,i)}async changeColumns(e,t){for(const{oldColumn:n,newColumn:r}of t)await this.changeColumn(e,n,r)}async dropColumn(e,t){const n=e instanceof ft?e:await this.getCachedTable(e),r=t instanceof ot?t:n.findColumnByName(t);if(!r)throw new st.VR(`Column "${t}" was not found in table "${n.name}"`);const i=n.clone(),a=[],s=[],o=i.indices.find((e=>1===e.columnNames.length&&e.columnNames[0]===r.name));o&&(i.indices.splice(i.indices.indexOf(o),1),a.push(this.dropIndexSql(n,o)),s.push(this.createIndexSql(n,o)));const c=i.checks.find((e=>!!e.columnNames&&1===e.columnNames.length&&e.columnNames[0]===r.name));if(c&&(i.checks.splice(i.checks.indexOf(c),1),a.push(this.dropCheckConstraintSql(n,c)),s.push(this.createCheckConstraintSql(n,c))),a.push(new Xn(`ALTER TABLE ${this.escapePath(n)} DROP COLUMN ${this.driver.escape(r.name)}`)),s.push(new Xn(`ALTER TABLE ${this.escapePath(n)} ADD ${this.buildCreateColumnSql(r)}`)),r.generatedType&&r.asExpression){const e=this.deleteTypeormMetadataSql({table:n.name,type:Gn.GENERATED_COLUMN,name:r.name}),t=this.insertTypeormMetadataSql({table:n.name,type:Gn.GENERATED_COLUMN,name:r.name,value:r.asExpression});a.push(e),s.push(t)}await this.executeQueries(a,s),i.removeColumn(r),this.replaceCachedTable(n,i)}async dropColumns(e,t){for(const n of t)await this.dropColumn(e,n)}async createPrimaryKey(e,t){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async updatePrimaryKeys(e,t){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async dropPrimaryKey(e){throw new Error("The keys of a table can't change; you can't add a key column to an existing table or remove a key column from an existing table.")}async createUniqueConstraint(e,t){throw new st.VR("Spanner does not support unique constraints. Use unique index instead.")}async createUniqueConstraints(e,t){throw new st.VR("Spanner does not support unique constraints. Use unique index instead.")}async dropUniqueConstraint(e,t){throw new st.VR("Spanner does not support unique constraints. Use unique index instead.")}async dropUniqueConstraints(e,t){throw new st.VR("Spanner does not support unique constraints. Use unique index instead.")}async createCheckConstraint(e,t){const n=e instanceof ft?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.checkConstraintName(n,t.expression));const r=this.createCheckConstraintSql(n,t),i=this.dropCheckConstraintSql(n,t);await this.executeQueries(r,i),n.addCheckConstraint(t)}async createCheckConstraints(e,t){const n=t.map((t=>this.createCheckConstraint(e,t)));await Promise.all(n)}async dropCheckConstraint(e,t){const n=e instanceof ft?e:await this.getCachedTable(e),r=t instanceof ht?t:n.checks.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied check constraint was not found in table ${n.name}`);const i=this.dropCheckConstraintSql(n,r),a=this.createCheckConstraintSql(n,r);await this.executeQueries(i,a),n.removeCheckConstraint(r)}async dropCheckConstraints(e,t){const n=t.map((t=>this.dropCheckConstraint(e,t)));await Promise.all(n)}async createExclusionConstraint(e,t){throw new st.VR("Spanner does not support exclusion constraints.")}async createExclusionConstraints(e,t){throw new st.VR("Spanner does not support exclusion constraints.")}async dropExclusionConstraint(e,t){throw new st.VR("Spanner does not support exclusion constraints.")}async dropExclusionConstraints(e,t){throw new st.VR("Spanner does not support exclusion constraints.")}async createForeignKey(e,t){const n=e instanceof ft?e:await this.getCachedTable(e);t.name||(t.name=this.connection.namingStrategy.foreignKeyName(n,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const r=this.createForeignKeySql(n,t),i=this.dropForeignKeySql(n,t);await this.executeQueries(r,i),n.addForeignKey(t)}async createForeignKeys(e,t){for(const n of t)await this.createForeignKey(e,n)}async dropForeignKey(e,t){const n=e instanceof ft?e:await this.getCachedTable(e),r=t instanceof lt?t:n.foreignKeys.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied foreign key was not found in table ${n.name}`);const i=this.dropForeignKeySql(n,r),a=this.createForeignKeySql(n,r);await this.executeQueries(i,a),n.removeForeignKey(r)}async dropForeignKeys(e,t){for(const n of t)await this.dropForeignKey(e,n)}async createIndex(e,t){const n=e instanceof ft?e:await this.getCachedTable(e);t.name||(t.name=this.generateIndexName(n,t));const r=this.createIndexSql(n,t),i=this.dropIndexSql(n,t);await this.executeQueries(r,i),n.addIndex(t)}async createIndices(e,t){for(const n of t)await this.createIndex(e,n)}async dropIndex(e,t){const n=e instanceof ft?e:await this.getCachedTable(e),r=t instanceof ct?t:n.indices.find((e=>e.name===t));if(!r)throw new st.VR(`Supplied index ${t} was not found in table ${n.name}`);r.name||(r.name=this.generateIndexName(n,r));const i=this.dropIndexSql(n,r),a=this.createIndexSql(n,r);await this.executeQueries(i,a),n.removeIndex(r)}async dropIndices(e,t){for(const n of t)await this.dropIndex(e,n)}async clearTable(e){await this.query(`DELETE FROM ${this.escapePath(e)} WHERE true`)}async clearDatabase(){const e=await this.query("SELECT concat('DROP INDEX `', INDEX_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`INDEXES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `INDEX_TYPE` = 'INDEX' AND `SPANNER_IS_MANAGED` = false"),t=await this.query("SELECT concat('ALTER TABLE `', TABLE_NAME, '`', ' DROP CONSTRAINT `', CONSTRAINT_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`TABLE_CONSTRAINTS` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `CONSTRAINT_TYPE` = 'FOREIGN KEY'"),n=await this.query("SELECT concat('DROP TABLE `', TABLE_NAME, '`') AS `query` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE'");if(!e.length&&!t.length&&!n.length)return;const r=this.isTransactionActive;r||await this.startTransaction();try{for(let t of e)await this.updateDDL(t.query);for(let e of t)await this.updateDDL(e.query);for(let e of n)await this.updateDDL(e.query);await this.commitTransaction()}catch(e){try{r||await this.rollbackTransaction()}catch(e){}throw e}}async executeMemoryUpSql(){for(const{query:e,parameters:t}of this.sqlInMemory.upQueries)this.isDMLQuery(e)?await this.query(e,t):await this.updateDDL(e,t)}async executeMemoryDownSql(){for(const{query:e,parameters:t}of this.sqlInMemory.downQueries.reverse())this.isDMLQuery(e)?await this.query(e,t):await this.updateDDL(e,t)}async loadViews(e){return Promise.resolve([])}async loadTables(e){if(e&&0===e.length)return[];const t=[];if(e&&e.length){const n=`SELECT \`TABLE_NAME\` FROM \`INFORMATION_SCHEMA\`.\`TABLES\` WHERE \`TABLE_CATALOG\` = '' AND \`TABLE_SCHEMA\` = '' AND \`TABLE_TYPE\` = 'BASE TABLE' AND \`TABLE_NAME\` IN (${e.map((e=>`'${e}'`)).join(", ")})`;t.push(...await this.query(n))}else{const e="SELECT `TABLE_NAME` FROM `INFORMATION_SCHEMA`.`TABLES` WHERE `TABLE_CATALOG` = '' AND `TABLE_SCHEMA` = '' AND `TABLE_TYPE` = 'BASE TABLE'";t.push(...await this.query(e))}if(!t.length)return[];const n=t.map((e=>`'${e.TABLE_NAME}'`)).join(", "),r=`SELECT * FROM \`INFORMATION_SCHEMA\`.\`COLUMNS\` WHERE \`TABLE_CATALOG\` = '' AND \`TABLE_SCHEMA\` = '' AND \`TABLE_NAME\` IN (${n})`,i=`SELECT \`KCU\`.\`TABLE_NAME\`, \`KCU\`.\`COLUMN_NAME\` FROM \`INFORMATION_SCHEMA\`.\`TABLE_CONSTRAINTS\` \`TC\` INNER JOIN \`INFORMATION_SCHEMA\`.\`KEY_COLUMN_USAGE\` \`KCU\` ON \`KCU\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` WHERE \`TC\`.\`TABLE_CATALOG\` = '' AND \`TC\`.\`TABLE_SCHEMA\` = '' AND \`TC\`.\`CONSTRAINT_TYPE\` = 'PRIMARY KEY' AND \`TC\`.\`TABLE_NAME\` IN (${n})`,a=`SELECT \`I\`.\`TABLE_NAME\`, \`I\`.\`INDEX_NAME\`, \`I\`.\`IS_UNIQUE\`, \`I\`.\`IS_NULL_FILTERED\`, \`IC\`.\`COLUMN_NAME\` FROM \`INFORMATION_SCHEMA\`.\`INDEXES\` \`I\` INNER JOIN \`INFORMATION_SCHEMA\`.\`INDEX_COLUMNS\` \`IC\` ON \`IC\`.\`INDEX_NAME\` = \`I\`.\`INDEX_NAME\` AND \`IC\`.\`TABLE_NAME\` = \`I\`.\`TABLE_NAME\` WHERE \`I\`.\`TABLE_CATALOG\` = '' AND \`I\`.\`TABLE_SCHEMA\` = '' AND \`I\`.\`TABLE_NAME\` IN (${n}) AND \`I\`.\`INDEX_TYPE\` = 'INDEX' AND \`I\`.\`SPANNER_IS_MANAGED\` = false`,s=`SELECT \`TC\`.\`TABLE_NAME\`, \`TC\`.\`CONSTRAINT_NAME\`, \`CC\`.\`CHECK_CLAUSE\`, \`CCU\`.\`COLUMN_NAME\`FROM \`INFORMATION_SCHEMA\`.\`TABLE_CONSTRAINTS\` \`TC\` INNER JOIN \`INFORMATION_SCHEMA\`.\`CONSTRAINT_COLUMN_USAGE\` \`CCU\` ON \`CCU\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` INNER JOIN \`INFORMATION_SCHEMA\`.\`CHECK_CONSTRAINTS\` \`CC\` ON \`CC\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` WHERE \`TC\`.\`TABLE_CATALOG\` = '' AND \`TC\`.\`TABLE_SCHEMA\` = '' AND \`TC\`.\`CONSTRAINT_TYPE\` = 'CHECK' AND \`TC\`.\`TABLE_NAME\` IN (${n}) AND \`TC\`.\`CONSTRAINT_NAME\` NOT LIKE 'CK_IS_NOT_NULL%'`,o=`SELECT \`TC\`.\`TABLE_NAME\`, \`TC\`.\`CONSTRAINT_NAME\`, \`KCU\`.\`COLUMN_NAME\`, \`CTU\`.\`TABLE_NAME\` AS \`REFERENCED_TABLE_NAME\`, \`CCU\`.\`COLUMN_NAME\` AS \`REFERENCED_COLUMN_NAME\`, \`RC\`.\`UPDATE_RULE\`, \`RC\`.\`DELETE_RULE\` FROM \`INFORMATION_SCHEMA\`.\`TABLE_CONSTRAINTS\` \`TC\` INNER JOIN \`INFORMATION_SCHEMA\`.\`KEY_COLUMN_USAGE\` \`KCU\` ON \`KCU\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` INNER JOIN \`INFORMATION_SCHEMA\`.\`CONSTRAINT_TABLE_USAGE\` \`CTU\` ON \`CTU\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` INNER JOIN \`INFORMATION_SCHEMA\`.\`REFERENTIAL_CONSTRAINTS\` \`RC\` ON \`RC\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` INNER JOIN \`INFORMATION_SCHEMA\`.\`CONSTRAINT_COLUMN_USAGE\` \`CCU\` ON \`CCU\`.\`CONSTRAINT_NAME\` = \`TC\`.\`CONSTRAINT_NAME\` WHERE \`TC\`.\`TABLE_CATALOG\` = '' AND \`TC\`.\`TABLE_SCHEMA\` = '' AND \`TC\`.\`CONSTRAINT_TYPE\` = 'FOREIGN KEY' AND \`TC\`.\`TABLE_NAME\` IN (${n})`,[c,l,u,d,h]=await Promise.all([this.query(r),this.query(i),this.query(a),this.query(s),this.query(o)]);return Promise.all(t.map((async e=>{const t=new ft;t.name=this.driver.buildTableName(e.TABLE_NAME),t.columns=await Promise.all(c.filter((t=>t.TABLE_NAME===e.TABLE_NAME)).map((async n=>{const r=u.filter((t=>t.TABLE_NAME===e.TABLE_NAME&&t.COLUMN_NAME===n.COLUMN_NAME&&!0===t.IS_UNIQUE)),i=this.connection.entityMetadatas.find((e=>this.getTablePath(t)===this.getTablePath(e))),a=r.length>0&&i&&i.indices.some((e=>r.some((t=>e.name===t.INDEX_NAME&&!1===e.synchronize)))),s=r.every((e=>u.some((t=>t.INDEX_NAME===e.INDEX_NAME&&t.COLUMN_NAME!==n.COLUMN_NAME)))),o=new ot;o.name=n.COLUMN_NAME;let c=n.SPANNER_TYPE.toLowerCase();if(-1!==c.indexOf("array")&&(o.isArray=!0,c=c.substring(c.indexOf("<")+1,c.indexOf(">"))),-1!==c.indexOf("(")?o.type=c.substring(0,c.indexOf("(")):o.type=c,-1!==this.driver.withLengthColumnTypes.indexOf(o.type)&&(o.length=c.substring(c.indexOf("(")+1,c.indexOf(")"))),"ALWAYS"===n.IS_GENERATED){o.asExpression=n.GENERATION_EXPRESSION,o.generatedType="STORED";const t=await this.selectTypeormMetadataSql({table:e.TABLE_NAME,type:Gn.GENERATED_COLUMN,name:o.name}),r=await this.query(t.query,t.parameters);r[0]&&r[0].value?o.asExpression=r[0].value:o.asExpression=""}return o.isUnique=r.length>0&&!a&&!s,o.isNullable="YES"===n.IS_NULLABLE,o.isPrimary=l.some((e=>e.TABLE_NAME===n.TABLE_NAME&&e.COLUMN_NAME===n.COLUMN_NAME)),o})));const n=h.filter((t=>t.TABLE_NAME===e.TABLE_NAME));t.foreignKeys=cn.m.uniq(n,(e=>e.CONSTRAINT_NAME)).map((e=>{const t=n.filter((t=>t.CONSTRAINT_NAME===e.CONSTRAINT_NAME));return new lt({name:e.CONSTRAINT_NAME,columnNames:cn.m.uniq(t.map((e=>e.COLUMN_NAME))),referencedDatabase:e.REFERENCED_TABLE_SCHEMA,referencedTableName:e.REFERENCED_TABLE_NAME,referencedColumnNames:cn.m.uniq(t.map((e=>e.REFERENCED_COLUMN_NAME))),onDelete:e.DELETE_RULE,onUpdate:e.UPDATE_RULE})}));const r=u.filter((t=>t.TABLE_NAME===e.TABLE_NAME));t.indices=cn.m.uniq(r,(e=>e.INDEX_NAME)).map((e=>{const n=r.filter((t=>t.INDEX_NAME===e.INDEX_NAME));return new ct({table:t,name:e.INDEX_NAME,columnNames:n.map((e=>e.COLUMN_NAME)),isUnique:e.IS_UNIQUE,isNullFiltered:e.IS_NULL_FILTERED})}));const i=d.filter((t=>t.TABLE_NAME===e.TABLE_NAME));return t.checks=cn.m.uniq(i,(e=>e.CONSTRAINT_NAME)).map((e=>{const t=i.filter((t=>t.CONSTRAINT_NAME===e.CONSTRAINT_NAME));return new ht({name:e.CONSTRAINT_NAME,columnNames:t.map((e=>e.COLUMN_NAME)),expression:e.CHECK_CLAUSE})})),t})))}createTableSql(e,t){const n=e.columns.map((e=>this.buildCreateColumnSql(e))).join(", ");let r=`CREATE TABLE ${this.escapePath(e)} (${n}`;if(e.columns.filter((e=>e.isUnique)).forEach((t=>{const n=e.indices.some((e=>1===e.columnNames.length&&!!e.isUnique&&-1!==e.columnNames.indexOf(t.name))),r=e.uniques.some((e=>1===e.columnNames.length&&-1!==e.columnNames.indexOf(t.name)));n||r||e.indices.push(new ct({name:this.connection.namingStrategy.uniqueConstraintName(e,[t.name]),columnNames:[t.name],isUnique:!0}))})),e.uniques.length>0&&e.uniques.forEach((t=>{e.indices.some((e=>e.name===t.name))||e.indices.push(new ct({name:t.name,columnNames:t.columnNames,isUnique:!0}))})),e.checks.length>0){r+=`, ${e.checks.map((t=>`CONSTRAINT \`${t.name?t.name:this.connection.namingStrategy.checkConstraintName(e,t.expression)}\` CHECK (${t.expression})`)).join(", ")}`}if(e.foreignKeys.length>0&&t){r+=`, ${e.foreignKeys.map((t=>{const n=t.columnNames.map((e=>`\`${e}\``)).join(", ");t.name||(t.name=this.connection.namingStrategy.foreignKeyName(e,t.columnNames,this.getTablePath(t),t.referencedColumnNames));const r=t.referencedColumnNames.map((e=>`\`${e}\``)).join(", ");return`CONSTRAINT \`${t.name}\` FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))} (${r})`})).join(", ")}`}r+=")";const i=e.columns.filter((e=>e.isPrimary));if(i.length>0){r+=` PRIMARY KEY (${i.map((e=>this.driver.escape(e.name))).join(", ")})`}return new Xn(r)}dropTableSql(e){return new Xn(`DROP TABLE ${this.escapePath(e)}`)}createViewSql(e){const t=e.materialized?"MATERIALIZED ":"",n=this.escapePath(e),r="string"==typeof e.expression?e.expression:e.expression(this.connection).getQuery();return new Xn(`CREATE ${t}VIEW ${n} SQL SECURITY INVOKER AS ${r}`)}async insertViewDefinitionSql(e){let{schema:t,tableName:n}=this.driver.parseTableName(e);const r=e.materialized?Gn.MATERIALIZED_VIEW:Gn.VIEW,i="string"==typeof e.expression?e.expression.trim():e.expression(this.connection).getQuery();return this.insertTypeormMetadataSql({type:r,schema:t,name:n,value:i})}dropViewSql(e){const t=e.materialized?"MATERIALIZED ":"";return new Xn(`DROP ${t}VIEW ${this.escapePath(e)}`)}async deleteViewDefinitionSql(e){let{schema:t,tableName:n}=this.driver.parseTableName(e);const r=e.materialized?Gn.MATERIALIZED_VIEW:Gn.VIEW;return this.deleteTypeormMetadataSql({type:r,schema:t,name:n})}createIndexSql(e,t){const n=t.columnNames.map((e=>this.driver.escape(e))).join(", ");let r="";return t.isUnique&&(r+="UNIQUE "),t.isNullFiltered&&(r+="NULL_FILTERED "),new Xn(`CREATE ${r}INDEX \`${t.name}\` ON ${this.escapePath(e)} (${n})`)}dropIndexSql(e,t){let n=t instanceof ct?t.name:t;return new Xn(`DROP INDEX \`${n}\``)}createCheckConstraintSql(e,t){return new Xn(`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT \`${t.name}\` CHECK (${t.expression})`)}dropCheckConstraintSql(e,t){const n=t instanceof ht?t.name:t;return new Xn(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT \`${n}\``)}createForeignKeySql(e,t){const n=t.columnNames.map((e=>this.driver.escape(e))).join(", "),r=t.referencedColumnNames.map((e=>this.driver.escape(e))).join(",");let i=`ALTER TABLE ${this.escapePath(e)} ADD CONSTRAINT \`${t.name}\` FOREIGN KEY (${n}) REFERENCES ${this.escapePath(this.getTablePath(t))} (${r})`;return new Xn(i)}dropForeignKeySql(e,t){const n=t instanceof lt?t.name:t;return new Xn(`ALTER TABLE ${this.escapePath(e)} DROP CONSTRAINT \`${n}\``)}escapePath(e){const{tableName:t}=this.driver.parseTableName(e);return`\`${t}\``}buildCreateColumnSql(e){let t=`${this.driver.escape(e.name)} ${this.connection.driver.createFullType(e)}`;return"STORED"===e.generatedType&&e.asExpression?t+=` AS (${e.asExpression}) STORED`:e.isNullable||(t+=" NOT NULL"),t}async executeQueries(e,t){if(e instanceof Xn&&(e=[e]),t instanceof Xn&&(t=[t]),this.sqlInMemory.upQueries.push(...e),this.sqlInMemory.downQueries.push(...t),!0===this.sqlMemoryMode)return Promise.resolve();for(const{query:t,parameters:n}of e)this.isDMLQuery(t)?await this.query(t,n):await this.updateDDL(t,n)}isDMLQuery(e){return e.startsWith("INSERT")||e.startsWith("UPDATE")||e.startsWith("DELETE")}}var Mr=__webpack_require__(1048).Buffer;class Rr{constructor(e){this.isReplicated=!1,this.treeSupport=!0,this.transactionSupport="none",this.supportedDataTypes=["bool","int64","float64","numeric","string","json","bytes","date","timestamp","array"],this.supportedUpsertType=void 0,this.spatialTypes=[],this.withLengthColumnTypes=["string","bytes"],this.withWidthColumnTypes=[],this.withPrecisionColumnTypes=[],this.withScaleColumnTypes=[],this.mappedDataTypes={createDate:"timestamp",createDateDefault:"",updateDate:"timestamp",updateDateDefault:"",deleteDate:"timestamp",deleteDateNullable:!0,version:"int64",treeLevel:"int64",migrationId:"int64",migrationName:"string",migrationTimestamp:"int64",cacheId:"string",cacheIdentifier:"string",cacheTime:"int64",cacheDuration:"int64",cacheQuery:"string",cacheResult:"string",metadataType:"string",metadataDatabase:"string",metadataSchema:"string",metadataTable:"string",metadataName:"string",metadataValue:"string"},this.dataTypeDefaults={},this.maxAliasLength=63,this.cteCapabilities={enabled:!0},this._isReturningSqlSupported={delete:!1,insert:!1,update:!1},this.connection=e,this.options=e.options,this.isReplicated=!!this.options.replication,this.loadDependencies()}async connect(){this.instance=this.spanner.instance(this.options.instanceId),this.instanceDatabase=this.instance.database(this.options.databaseId)}afterConnect(){return Promise.resolve()}async disconnect(){this.instanceDatabase.close()}createSchemaBuilder(){return new Wn(this.connection)}createQueryRunner(e){return new Cr(this,e)}escapeQueryWithParameters(e,t,n){const r=Object.keys(n).map((e=>n[e]));return t&&Object.keys(t).length?[e=(e=e.replace(/:(\.\.\.)?([A-Za-z0-9_.]+)/g,((e,n,i)=>{if(!t.hasOwnProperty(i))return e;let a=t[i];return null===a?e:n?a.map((e=>(r.push(e),this.createParameter(i,r.length-1)))).join(", "):a instanceof Function?a():(r.push(a),this.createParameter(i,r.length-1))}))).replace(/([ ]+)?=([ ]+)?:(\.\.\.)?([A-Za-z0-9_.]+)/g,((e,n,r,i,a)=>{if(!t.hasOwnProperty(a))return e;return null===t[a]?" IS NULL":e})),r]:[e,r]}escape(e){return`\`${e}\``}buildTableName(e,t,n){let r=[e];return n&&r.unshift(n),r.join(".")}parseTableName(e){const t=this.database,n=void 0;if(e instanceof ft||e instanceof Hn){const r=this.parseTableName(e.name);return{database:e.database||r.database||t,schema:e.schema||r.schema||n,tableName:r.tableName}}if(e instanceof lt){const r=this.parseTableName(e.referencedTableName);return{database:e.referencedDatabase||r.database||t,schema:e.referencedSchema||r.schema||n,tableName:r.tableName}}if(e instanceof Nn)return{database:e.database||t,schema:e.schema||n,tableName:e.tableName};const r=e.split(".");return{database:(r.length>1?r[0]:void 0)||t,schema:n,tableName:r.length>1?r[1]:r[0]}}preparePersistentValue(e,t){if(t.transformer&&(e=ln.W.transformTo(t.transformer,e)),null==e)return e;if("numeric"===t.type){return(this.options.driver||nt.load("spanner")).Spanner.numeric(e)}return"date"===t.type?on.mixedDateToDateString(e):"json"===t.type?e:"timestamp"===t.type||t.type===Date?on.mixedDateToDate(e):e}prepareHydratedValue(e,t){return null==e?t.transformer?ln.W.transformFrom(t.transformer,e):e:(t.type===Boolean||"bool"===t.type?e=!!e:"timestamp"===t.type||t.type===Date?e=new Date(e):"numeric"===t.type?e=e.value:"date"===t.type?e=on.mixedDateToDateString(e):"json"===t.type&&(e="string"==typeof e?JSON.parse(e):e),t.transformer&&(e=ln.W.transformFrom(t.transformer,e)),e)}normalizeType(e){return e.type===Number?"int64":e.type===String||"uuid"===e.type?"string":e.type===Date?"timestamp":e.type===Mr?"bytes":e.type===Boolean?"bool":e.type||""}normalizeDefault(e){return""===e.default?`"${e.default}"`:`${e.default}`}normalizeIsUnique(e){return e.entityMetadata.indices.some((t=>t.isUnique&&1===t.columns.length&&t.columns[0]===e))}getColumnLength(e){if(e.length)return e.length.toString();if("uuid"===e.generationStrategy)return"36";switch(e.type){case String:case"string":case"bytes":return"max";default:return""}}createFullType(e){let t=e.type;return this.getColumnLength(e)?t+=`(${this.getColumnLength(e)})`:e.width?t+=`(${e.width})`:null!==e.precision&&void 0!==e.precision&&null!==e.scale&&void 0!==e.scale?t+=`(${e.precision},${e.scale})`:null!==e.precision&&void 0!==e.precision&&(t+=`(${e.precision})`),e.isArray&&(t=`array<${t}>`),t}obtainMasterConnection(){return this.instanceDatabase}obtainSlaveConnection(){return this.instanceDatabase}createGeneratedMap(e,t,n){if(!t)return;if(void 0===t.insertId)return Object.keys(t).reduce(((n,r)=>{const i=e.findColumnWithDatabaseName(r);return i&&cn.m.mergeDeep(n,i.createValueMap(t[r])),n}),{});const r=e.generatedColumns.reduce(((e,r)=>{let i;return"increment"===r.generationStrategy&&t.insertId&&(i=t.insertId+n),cn.m.mergeDeep(e,r.createValueMap(i))}),{});return Object.keys(r).length>0?r:void 0}findChangedColumns(e,t){return t.filter((t=>{const n=e.find((e=>e.name===t.databaseName));if(!n)return!1;return n.name!==t.databaseName||n.type!==this.normalizeType(t)||n.length!==this.getColumnLength(t)||n.asExpression!==t.asExpression||n.generatedType!==t.generatedType||n.isPrimary!==t.isPrimary||!this.compareNullableValues(t,n)||n.isUnique!==this.normalizeIsUnique(t)}))}isReturningSqlSupported(e){return this._isReturningSqlSupported[e]}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return"@param"+t}loadDependencies(){try{const e=this.options.driver||nt.load("spanner");this.spanner=new e.Spanner({projectId:this.options.projectId})}catch(e){throw console.error(e),new sr.W("Spanner","@google-cloud/spanner")}}compareNullableValues(e,t){return!!e.generatedType||e.isNullable===t.isNullable}compareDefaultValues(e,t){return"string"==typeof e&&"string"==typeof t&&(e=e.replace(/^'+|'+$/g,""),t=t.replace(/^'+|'+$/g,"")),e===t}normalizeDatetimeFunction(e){if(!e)return e;if(-1!==e.toUpperCase().indexOf("CURRENT_TIMESTAMP")||-1!==e.toUpperCase().indexOf("NOW")){const t=e.match(/\(\d+\)/);return t?`CURRENT_TIMESTAMP${t[0]}`:"CURRENT_TIMESTAMP"}return e}escapeComment(e){return e?e=e.replace(/\u0000/g,""):e}}var xr=__webpack_require__(55854),kr=__webpack_require__(81465);class Ir{constructor(e){this.connection=e}async build(){const e={};this.connection.entityMetadatas.forEach((t=>{const n=[];t.primaryColumns.forEach((e=>{n.push(`&[${e.propertyName}]`)})),t.indices.forEach((e=>{const t=[];for(const n of e.columns)t.push(n.propertyName);const r=e.isUnique?"&":"";n.push(`${r}[${t.join("+")}]`),1===t.length&&n.push(`${r}${t.join("+")}`)})),e[t.tableName]=n.join(",")}));const t=this.connection.createQueryRunner(),n=this.connection.options;await t.applySchemas(e,n.version)}log(){return Promise.resolve(new Zn)}}class Or{constructor(e,t){this.isReleased=!1,this.isTransactionActive=!1,this.data={},this.connection=e,this.databaseConnection=t,this.broadcaster=new nr(this)}async beforeMigration(){}async afterMigration(){}async applySchemas(e,t){const n=this.connection.driver;n.dexie.isOpen()&&await n.dexie.close(),n.dexie.version(t).stores(e),await n.dexie.open()}async clearDatabase(){await this.databaseConnection.delete()}async connect(){}async release(){}async startTransaction(){throw Error("Dont start transaction from IndexedDbQueryRunner. Use IndexedEntityManager instead")}async commitTransaction(){throw Error("Dont start transaction from IndexedDbQueryRunner. Use IndexedEntityManager instead")}async rollbackTransaction(){throw Error("Dont start transaction from IndexedDbQueryRunner. Use IndexedEntityManager instead")}query(e,t){throw new st.VR("Executing SQL query is not supported by IndexedDb driver.")}stream(e,t,n,r){throw new st.VR("Stream is not supported by IndexedDb driver.")}async getDatabases(){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async getSchemas(e){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async getTable(e){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async getTables(e){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async getView(e){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async getViews(e){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}getReplicationMode(){return"master"}async hasDatabase(e){throw new st.VR("Check database queries are not supported by IndexedDb driver.")}async getCurrentDatabase(){throw new st.VR("Check database queries are not supported by IndexedDb driver.")}async hasSchema(e){throw new st.VR("Check schema queries are not supported by IndexedDb driver.")}async getCurrentSchema(){throw new st.VR("Check schema queries are not supported by IndexedDb driver.")}async hasTable(e){throw new st.VR("Check schema queries are not supported by IndexedDb driver.")}async hasColumn(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createDatabase(e){throw new st.VR("Database create queries are not supported by IndexedDb driver.")}async dropDatabase(e,t){throw new st.VR("Database drop queries are not supported by IndexedDb driver.")}async createSchema(e,t){throw new st.VR("Schema create queries are not supported by IndexedDb driver.")}async dropSchema(e,t){throw new st.VR("Schema drop queries are not supported by IndexedDb driver.")}async createTable(e){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropTable(e){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createView(e){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropView(e){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async renameTable(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async addColumn(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async addColumns(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async renameColumn(e,t,n){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async changeColumn(e,t,n){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async changeColumns(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropColumn(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropColumns(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createPrimaryKey(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async updatePrimaryKeys(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropPrimaryKey(e){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createUniqueConstraint(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createUniqueConstraints(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropUniqueConstraint(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropUniqueConstraints(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createCheckConstraint(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createCheckConstraints(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropCheckConstraint(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropCheckConstraints(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createExclusionConstraint(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createExclusionConstraints(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropExclusionConstraint(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropExclusionConstraints(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createForeignKey(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createForeignKeys(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropForeignKey(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropForeignKeys(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createIndex(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async createIndices(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropIndex(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async dropIndices(e,t){throw new st.VR("Schema update queries are not supported by IndexedDb driver.")}async clearTable(e){await this.databaseConnection._allTables[e].clear()}enableSqlMemory(){throw new st.VR("This operation is not supported by IndexedDb driver.")}disableSqlMemory(){throw new st.VR("This operation is not supported by IndexedDb driver.")}clearSqlMemory(){throw new st.VR("This operation is not supported by IndexedDb driver.")}getMemorySql(){throw new st.VR("This operation is not supported by IndexedDb driver.")}async executeMemoryUpSql(){throw new st.VR("This operation is not supported by IndexedDb driver.")}async executeMemoryDownSql(){throw new st.VR("This operation is not supported by IndexedDb driver.")}}class Pr{constructor(e){var t;this.connection=e,this.isReplicated=!1,this.treeSupport=!1,this.transactionSupport="simple",this.supportedDataTypes=["int","integer","tinyint","bigint","varchar","text","boolean","date","datetime"],this.spatialTypes=[],this.withLengthColumnTypes=[],this.withPrecisionColumnTypes=[],this.withScaleColumnTypes=[],this.mappedDataTypes={createDate:"datetime",createDatePrecision:6,createDateDefault:(new Date).toISOString(),updateDate:"datetime",updateDatePrecision:6,updateDateDefault:(new Date).toISOString(),deleteDate:"datetime",deleteDateNullable:!0,version:"int",treeLevel:"int",migrationId:"int",migrationName:"int",migrationTimestamp:"int",cacheId:"int",cacheIdentifier:"int",cacheTime:"int",cacheDuration:"int",cacheQuery:"int",cacheResult:"int",metadataType:"int",metadataDatabase:"int",metadataSchema:"int",metadataTable:"int",metadataName:"int",metadataValue:"int"},this.validOptionNames=[],this.cteCapabilities={enabled:!1},this.options=e.options,this.loadDependencies();const n=null!==(t=this.options.database)&&void 0!==t?t:"default";this.dexie=new kr.default(n,{...this.options.dexieJsConfig})}async connect(){this.queryRunner=new Or(this.connection,this.dexie)}afterConnect(){return Promise.resolve()}async disconnect(){return new Promise(((e,t)=>{if(!this.queryRunner)return t(new xr.e("indexeddb"));this.queryRunner.databaseConnection.close(),this.queryRunner=void 0}))}createSchemaBuilder(){return new Ir(this.connection)}createQueryRunner(e){return this.queryRunner}escapeQueryWithParameters(e,t,n){throw new st.VR("This operation is not supported by IndexedDB.")}escape(e){return e}buildTableName(e,t,n){return e}parseTableName(e){return gt.t.isEntityMetadata(e)?{tableName:e.tableName}:gt.t.isTable(e)||gt.t.isView(e)?{tableName:e.name}:gt.t.isTableForeignKey(e)?{tableName:e.referencedTableName}:{tableName:e}}preparePersistentValue(e,t){return t.transformer&&(e=ln.W.transformTo(t.transformer,e)),e}prepareHydratedValue(e,t){return t.transformer&&(e=ln.W.transformFrom(t.transformer,e)),e}normalizeType(e){return e.type===Number||"int"===e.type||"integer"===e.type||"tinyint"===e.type?"integer":e.type===String||"varchar"===e.type||"bigint"===e.type?"varchar":e.type===Date?"datetime":e.type===Boolean?"boolean":"uuid"===e.type?"varchar":e.type||""}normalizeDefault(e){const t=e.default;return"number"==typeof t?""+t:"boolean"==typeof t?t?"1":"0":"function"==typeof t?t():"string"==typeof t?`'${t}'`:null!=t?`${t}`:void 0}normalizeIsUnique(e){return e.entityMetadata.uniques.some((t=>1===t.columns.length&&t.columns[0]===e))}getColumnLength(e){return e.length?e.length.toString():""}createFullType(e){throw new st.VR("IndexedDB is schema-less, not supported by this driver.")}obtainMasterConnection(){return Promise.resolve()}obtainSlaveConnection(){return Promise.resolve()}createGeneratedMap(e,t){return e.objectIdColumn.createValueMap(t)}findChangedColumns(e,t){throw new st.VR("IndexedDB is schema-less, not supported by this driver.")}isReturningSqlSupported(){return!1}isUUIDGenerationSupported(){return!1}isFullTextColumnTypeSupported(){return!1}createParameter(e,t){return""}loadDependencies(){try{const e=__webpack_require__(81465);this.dexie=e}catch(e){throw new sr.W("IndexedDb","dexie")}}}class Lr{create(e){const{type:t}=e.options;if("indexeddb"===t)return new Pr(e);if("react-native"===t){const{ReactNativeDriver:t}=__webpack_require__(24611);return new t(e)}switch(t){case"mysql":case"mariadb":return new kt.MysqlDriver(e);case"postgres":return new kt.PostgresDriver(e);case"cockroachdb":return new kt.CockroachDriver(e);case"sap":return new kt.SapDriver(e);case"sqlite":return new kt.SqliteDriver(e);case"better-sqlite3":return new kt.BetterSqlite3Driver(e);case"cordova":return new or(e);case"nativescript":return new ur(e);case"sqljs":return new pr(e);case"oracle":return new kt.OracleDriver(e);case"mssql":return new kt.SqlServerDriver(e);case"mongodb":return new kt.MongoDriver(e);case"expo":return new mr(e);case"aurora-mysql":return new br(e);case"aurora-postgres":return new Tr(e);case"capacitor":return new Nr(e);case"spanner":return new Rr(e);default:throw new Vn.d(t,["aurora-mysql","aurora-postgres","better-sqlite3","capacitor","cockroachdb","cordova","expo","mariadb","mongodb","mssql","mysql","nativescript","oracle","postgres","react-native","sap","sqlite","sqljs","indexeddb","spanner"])}}}const Dr=new class{constructor(){this.instances=[]}get(e){let t=this.instances.find((t=>t.type===e));return t||(t={type:e,object:new e},this.instances.push(t)),t.object}};let Br,jr;function qr(e){if(Br)try{const t=Br.get(e);if(t)return t;if(!jr||!jr.fallback)return t}catch(e){if(!jr||!jr.fallbackOnErrors)throw e}return Dr.get(e)}var $r=__webpack_require__(1048).Buffer;class Ur{constructor(e){this["@instanceof"]=Symbol.for("ColumnMetadata"),this.length="",this.isPrimary=!1,this.isGenerated=!1,this.isNullable=!1,this.isSelect=!0,this.isInsert=!0,this.isUpdate=!0,this.zerofill=!1,this.unsigned=!1,this.isArray=!1,this.isVirtual=!1,this.isDiscriminator=!1,this.isTreeLevel=!1,this.isCreateDate=!1,this.isUpdateDate=!1,this.isDeleteDate=!1,this.isVersion=!1,this.isObjectId=!1,this.isNestedSetLeft=!1,this.isNestedSetRight=!1,this.isMaterializedPath=!1,this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,this.referencedColumn=e.referencedColumn,e.args.target&&(this.target=e.args.target),e.args.propertyName&&(this.propertyName=e.args.propertyName),e.args.options.name&&(this.givenDatabaseName=e.args.options.name),e.args.options.type&&(this.type=e.args.options.type),e.args.options.length&&(this.length=e.args.options.length?e.args.options.length.toString():""),e.args.options.width&&(this.width=e.args.options.width),e.args.options.charset&&(this.charset=e.args.options.charset),e.args.options.collation&&(this.collation=e.args.options.collation),e.args.options.primary&&(this.isPrimary=e.args.options.primary),null===e.args.options.default&&(this.isNullable=!0),void 0!==e.args.options.nullable&&(this.isNullable=e.args.options.nullable),void 0!==e.args.options.select&&(this.isSelect=e.args.options.select),void 0!==e.args.options.insert&&(this.isInsert=e.args.options.insert),void 0!==e.args.options.update&&(this.isUpdate=e.args.options.update),void 0!==e.args.options.readonly&&(this.isUpdate=!e.args.options.readonly),e.args.options.comment&&(this.comment=e.args.options.comment),void 0!==e.args.options.default&&(this.default=e.args.options.default),e.args.options.onUpdate&&(this.onUpdate=e.args.options.onUpdate),e.args.options.generatedIdentity&&(this.generatedIdentity=e.args.options.generatedIdentity),null!==e.args.options.scale&&void 0!==e.args.options.scale&&(this.scale=e.args.options.scale),e.args.options.zerofill&&(this.zerofill=e.args.options.zerofill,this.unsigned=!0),e.args.options.unsigned&&(this.unsigned=e.args.options.unsigned),null!==e.args.options.precision&&(this.precision=e.args.options.precision),e.args.options.enum&&(qt.B.isObject(e.args.options.enum)&&!Array.isArray(e.args.options.enum)?this.enum=Object.keys(e.args.options.enum).filter((t=>isNaN(+t)&&"function"!=typeof e.args.options.enum[t])).map((t=>e.args.options.enum[t])):this.enum=e.args.options.enum),e.args.options.enumName&&(this.enumName=e.args.options.enumName),e.args.options.primaryKeyConstraintName&&(this.primaryKeyConstraintName=e.args.options.primaryKeyConstraintName),e.args.options.foreignKeyConstraintName&&(this.foreignKeyConstraintName=e.args.options.foreignKeyConstraintName),e.args.options.asExpression&&(this.asExpression=e.args.options.asExpression,this.generatedType=e.args.options.generatedType?e.args.options.generatedType:"VIRTUAL"),e.args.options.hstoreType&&(this.hstoreType=e.args.options.hstoreType),e.args.options.array&&(this.isArray=e.args.options.array),e.args.mode&&(this.isVirtual="virtual"===e.args.mode,this.isTreeLevel="treeLevel"===e.args.mode,this.isCreateDate="createDate"===e.args.mode,this.isUpdateDate="updateDate"===e.args.mode,this.isDeleteDate="deleteDate"===e.args.mode,this.isVersion="version"===e.args.mode,this.isObjectId="objectId"===e.args.mode),e.args.options.transformer&&(this.transformer=e.args.options.transformer),e.args.options.spatialFeatureType&&(this.spatialFeatureType=e.args.options.spatialFeatureType),void 0!==e.args.options.srid&&(this.srid=e.args.options.srid),this.isTreeLevel&&(this.type=e.connection.driver.mappedDataTypes.treeLevel),this.isCreateDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.createDate),this.default||(this.default=()=>e.connection.driver.mappedDataTypes.createDateDefault),void 0===this.precision&&void 0===e.args.options.precision&&e.connection.driver.mappedDataTypes.createDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.createDatePrecision)),this.isUpdateDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.updateDate),this.default||(this.default=()=>e.connection.driver.mappedDataTypes.updateDateDefault),this.onUpdate||(this.onUpdate=e.connection.driver.mappedDataTypes.updateDateDefault),void 0===this.precision&&void 0===e.args.options.precision&&e.connection.driver.mappedDataTypes.updateDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.updateDatePrecision)),this.isDeleteDate&&(this.type||(this.type=e.connection.driver.mappedDataTypes.deleteDate),this.isNullable||(this.isNullable=e.connection.driver.mappedDataTypes.deleteDateNullable),void 0===this.precision&&void 0===e.args.options.precision&&e.connection.driver.mappedDataTypes.deleteDatePrecision&&(this.precision=e.connection.driver.mappedDataTypes.deleteDatePrecision)),this.isVersion&&(this.type=e.connection.driver.mappedDataTypes.version),e.closureType&&(this.closureType=e.closureType),e.nestedSetLeft&&(this.isNestedSetLeft=e.nestedSetLeft),e.nestedSetRight&&(this.isNestedSetRight=e.nestedSetRight),e.materializedPath&&(this.isMaterializedPath=e.materializedPath)}createValueMap(e,t=!1){if(this.embeddedMetadata){const n=[...this.embeddedMetadata.parentPropertyNames],r=(n,i)=>{const a=n.shift();return a?(i[a]={},r(n,i[a]),i):("increment"!==this.generationStrategy&&"rowid"!==this.generationStrategy||"bigint"!==this.type||null===e||(e=String(e)),i[t?this.databaseName:this.propertyName]=e,i)};return r(n,{})}return"increment"!==this.generationStrategy&&"rowid"!==this.generationStrategy||"bigint"!==this.type||null===e||(e=String(e)),{[t?this.databaseName:this.propertyName]:e}}getEntityValueMap(e,t){var n;if(this.embeddedMetadata){const t=[...this.embeddedMetadata.parentPropertyNames],n=this.embeddedMetadata.isArray,r=(e,t)=>{if(void 0===t)return{};const i=e.shift();if(i){const n=r(e,t[i]);return Object.keys(n).length>0?{[i]:n}:{}}return n&&Array.isArray(t)?t.map((e=>({[this.propertyName]:e[this.propertyName]}))):void 0!==t[this.propertyName]?{[this.propertyName]:t[this.propertyName]}:{}},i=r(t,e);return Object.keys(i).length>0?i:void 0}if(this.relationMetadata&&!(null===(n=Object.getOwnPropertyDescriptor(e,this.relationMetadata.propertyName))||void 0===n?void 0:n.get)&&e[this.relationMetadata.propertyName]&&qt.B.isObject(e[this.relationMetadata.propertyName])){const t=this.relationMetadata.joinColumns.reduce(((t,n)=>{const r=n.referencedColumn.getEntityValueMap(e[this.relationMetadata.propertyName]);return void 0===r?t:cn.m.mergeDeep(t,r)}),{});return Object.keys(t).length>0?{[this.propertyName]:t}:void 0}return void 0!==e[this.propertyName]?{[this.propertyName]:e[this.propertyName]}:void 0}getEntityValue(e,t=!1){if(null==e)return;let n;if(this.embeddedMetadata){const t=[...this.embeddedMetadata.parentPropertyNames],r=this.embeddedMetadata.isArray,i=(e,t)=>{const n=e.shift();return n&&t?i(e,t[n]):t},a=i(t,e);if(a)if(this.relationMetadata&&this.referencedColumn){const e=this.relationMetadata.getEntityValue(a);n=e&&qt.B.isObject(e)&&!gt.t.isFindOperator(e)&&!$r.isBuffer(e)?this.referencedColumn.getEntityValue(e):!a[this.propertyName]||!qt.B.isObject(a[this.propertyName])||gt.t.isFindOperator(a[this.propertyName])||$r.isBuffer(a[this.propertyName])||a[this.propertyName]instanceof Date?a[this.propertyName]:this.referencedColumn.getEntityValue(a[this.propertyName])}else n=this.referencedColumn?this.referencedColumn.getEntityValue(a[this.propertyName]):r&&Array.isArray(a)?a.map((e=>e[this.propertyName])):a[this.propertyName]}else if(this.relationMetadata&&this.referencedColumn){const t=this.relationMetadata.getEntityValue(e);n=t&&qt.B.isObject(t)&&!gt.t.isFindOperator(t)&&"function"!=typeof t&&!$r.isBuffer(t)?this.referencedColumn.getEntityValue(t):!e[this.propertyName]||!qt.B.isObject(e[this.propertyName])||gt.t.isFindOperator(e[this.propertyName])||"function"==typeof e[this.propertyName]||$r.isBuffer(e[this.propertyName])||e[this.propertyName]instanceof Date?e[this.propertyName]:this.referencedColumn.getEntityValue(e[this.propertyName])}else n=this.referencedColumn?this.referencedColumn.getEntityValue(e[this.propertyName]):e[this.propertyName];return t&&this.transformer&&(n=ln.W.transformTo(this.transformer,n)),n}setEntityValue(e,t){if(this.embeddedMetadata){const n=(e,r)=>{const i=e.shift();return i?(r[i.propertyName]||(r[i.propertyName]=i.create()),n(e,r[i.propertyName]),r):(r[this.propertyName]=t,r)};return n([...this.embeddedMetadata.embeddedMetadataTree],e)}!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.propertyName!==this.propertyName?(this.propertyName in e||(e[this.propertyName]={}),e[this.propertyName][this.referencedColumn.propertyName]=t):e[this.propertyName]=t}compareEntityValue(e,t){const n=this.getEntityValue(e);return qt.B.isObject(n)?n.equals(t):n===t}build(e){return this.propertyPath=this.buildPropertyPath(),this.propertyAliasName=this.propertyPath.replace(".","_"),this.databaseName=this.buildDatabaseName(e),this.databasePath=this.buildDatabasePath(),this.databaseNameWithoutPrefixes=e.namingStrategy.columnName(this.propertyName,this.givenDatabaseName,[]),this}buildPropertyPath(){let e="";return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length&&(e=this.embeddedMetadata.parentPropertyNames.join(".")+"."),e+=this.propertyName,!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.propertyName!==this.propertyName&&(e+="."+this.referencedColumn.propertyName),e}buildDatabasePath(){let e="";return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length&&(e=this.embeddedMetadata.parentPropertyNames.join(".")+"."),e+=this.databaseName,!this.entityMetadata.isJunction&&this.isVirtual&&this.referencedColumn&&this.referencedColumn.databaseName!==this.databaseName&&(e+="."+this.referencedColumn.databaseName),e}buildDatabaseName(e){let t=this.embeddedMetadata?this.embeddedMetadata.parentPrefixes:[];return"mongodb"===e.driver.options.type&&(t=[]),e.namingStrategy.columnName(this.propertyName,this.givenDatabaseName,t)}}class Fr{constructor(e){this.isUnique=!1,this.isSpatial=!1,this.isFulltext=!1,this.isNullFiltered=!1,this.synchronize=!0,this.columns=[],this.columnNamesWithOrderingMap={},this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,e.columns&&(this.columns=e.columns),e.args&&(this.target=e.args.target,null!==e.args.synchronize&&void 0!==e.args.synchronize&&(this.synchronize=e.args.synchronize),this.isUnique=!!e.args.unique,this.isSpatial=!!e.args.spatial,this.isFulltext=!!e.args.fulltext,this.isNullFiltered=!!e.args.nullFiltered,this.parser=e.args.parser,this.where=e.args.where,this.isSparse=e.args.sparse,this.isBackground=e.args.background,this.expireAfterSeconds=e.args.expireAfterSeconds,this.givenName=e.args.name,this.givenColumnNames=e.args.columns)}build(e){if(!1===this.synchronize)return this.name=this.givenName,this;const t={};if(this.givenColumnNames){let e=[];if(Array.isArray(this.givenColumnNames))e=this.givenColumnNames.map((e=>this.embeddedMetadata?this.embeddedMetadata.propertyPath+"."+e:e.trim())),e.forEach((e=>t[e]=1));else{const n=this.givenColumnNames(this.entityMetadata.propertiesMap);Array.isArray(n)?(e=n.map((e=>String(e))),e.forEach((e=>t[e]=1))):(e=Object.keys(n).map((e=>String(e))),Object.keys(n).forEach((e=>t[e]=n[e])))}this.columns=e.map((e=>{const t=this.entityMetadata.columns.find((t=>t.propertyPath===e));if(t)return[t];const n=this.entityMetadata.relations.find((t=>t.isWithJoinColumn&&t.propertyName===e));if(n)return n.joinColumns;const r=this.givenName?'"'+this.givenName+'" ':"",i=this.entityMetadata.targetName;throw new st.VR(`Index ${r}contains column that is missing in the entity (${i}): `+e)})).reduce(((e,t)=>e.concat(t)))}return this.columnNamesWithOrderingMap=Object.keys(t).reduce(((e,n)=>{const r=this.entityMetadata.columns.find((e=>e.propertyPath===n));return r&&(e[r.databasePath]=t[n]),e}),{}),this.name=this.givenName?this.givenName:e.indexName(this.entityMetadata.tableName,this.columns.map((e=>e.databaseName)),this.where),this}}class Vr{constructor(e){this.isTreeParent=!1,this.isTreeChildren=!1,this.isPrimary=!1,this.isLazy=!1,this.isEager=!1,this.persistenceEnabled=!0,this.isCascadeInsert=!1,this.isCascadeUpdate=!1,this.isCascadeRemove=!1,this.isCascadeSoftRemove=!1,this.isCascadeRecover=!1,this.isNullable=!0,this.createForeignKeyConstraints=!0,this.isOwning=!1,this.isOneToOne=!1,this.isOneToOneOwner=!1,this.isWithJoinColumn=!1,this.isOneToOneNotOwner=!1,this.isOneToMany=!1,this.isManyToOne=!1,this.isManyToMany=!1,this.isManyToManyOwner=!1,this.isManyToManyNotOwner=!1,this.foreignKeys=[],this.joinColumns=[],this.inverseJoinColumns=[],this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata;const t=e.args;this.target=t.target,this.propertyName=t.propertyName,this.relationType=t.relationType,t.inverseSideProperty&&(this.givenInverseSidePropertyFactory=t.inverseSideProperty),this.isLazy=t.isLazy||!1,this.isCascadeInsert=!0===t.options.cascade||Array.isArray(t.options.cascade)&&-1!==t.options.cascade.indexOf("insert"),this.isCascadeUpdate=!0===t.options.cascade||Array.isArray(t.options.cascade)&&-1!==t.options.cascade.indexOf("update"),this.isCascadeRemove=!0===t.options.cascade||Array.isArray(t.options.cascade)&&-1!==t.options.cascade.indexOf("remove"),this.isCascadeSoftRemove=!0===t.options.cascade||Array.isArray(t.options.cascade)&&-1!==t.options.cascade.indexOf("soft-remove"),this.isCascadeRecover=!0===t.options.cascade||Array.isArray(t.options.cascade)&&-1!==t.options.cascade.indexOf("recover"),this.isNullable=!1!==t.options.nullable&&!this.isPrimary,this.onDelete=t.options.onDelete,this.onUpdate=t.options.onUpdate,this.deferrable=t.options.deferrable,this.createForeignKeyConstraints=!1!==t.options.createForeignKeyConstraints,this.isEager=t.options.eager||!1,this.persistenceEnabled=!1!==t.options.persistence,this.orphanedRowAction=t.options.orphanedRowAction||"nullify",this.isTreeParent=t.isTreeParent||!1,this.isTreeChildren=t.isTreeChildren||!1,"function"==typeof t.type?this.type="function"==typeof t.type?t.type():t.type:gt.t.isEntitySchema(t.type)?this.type=t.type.options.name:qt.B.isObject(t.type)&&"string"==typeof t.type.name?this.type=t.type.name:this.type=t.type,this.isOneToOne="one-to-one"===this.relationType,this.isOneToMany="one-to-many"===this.relationType,this.isManyToOne="many-to-one"===this.relationType,this.isManyToMany="many-to-many"===this.relationType,this.isOneToOneNotOwner=!!this.isOneToOne,this.isManyToManyNotOwner=!!this.isManyToMany}getRelationIdMap(e){const t=(this.isOwning?this.joinColumns:this.inverseRelation.joinColumns).map((e=>e.referencedColumn));return Nn.getValueMap(e,t)}ensureRelationIdMap(e){if(qt.B.isObject(e))return e;const t=(this.isOwning?this.joinColumns:this.inverseRelation.joinColumns).map((e=>e.referencedColumn));if(t.length>1)throw new st.VR("Cannot create relation id map for a single value because relation contains multiple referenced columns.");return t[0].createValueMap(e)}getEntityValue(e,t=!1){if(null!=e){if(this.embeddedMetadata){const n=[...this.embeddedMetadata.parentPropertyNames],r=(e,t)=>{const n=e.shift();return n?t[n]?r(e,t[n]):void 0:t},i=r(n,e);return this.isLazy?void 0!==i["__"+this.propertyName+"__"]?i["__"+this.propertyName+"__"]:!0===t?i[this.propertyName]:void 0:i?i[this.isLazy?"__"+this.propertyName+"__":this.propertyName]:void 0}return this.isLazy?void 0!==e["__"+this.propertyName+"__"]?e["__"+this.propertyName+"__"]:!0===t?e[this.propertyName]:void 0:e[this.propertyName]}}setEntityValue(e,t){const n=this.isLazy?"__"+this.propertyName+"__":this.propertyName;if(this.embeddedMetadata){const r=(e,i)=>{const a=e.shift();return a?(i[a.propertyName]||(i[a.propertyName]=a.create()),r(e,i[a.propertyName]),i):(i[n]=t,i)};return r([...this.embeddedMetadata.embeddedMetadataTree],e)}e[n]=t}createValueMap(e){if(this.embeddedMetadata){const t=[...this.embeddedMetadata.parentPropertyNames],n=(t,r)=>{const i=t.shift();return i?(r[i]={},n(t,r[i]),r):(r[this.propertyName]=e,r)};return n(t,{})}return{[this.propertyName]:e}}build(){this.propertyPath=this.buildPropertyPath()}registerForeignKeys(...e){this.foreignKeys.push(...e)}registerJoinColumns(e=[],t=[]){this.joinColumns=e,this.inverseJoinColumns=t,this.isOwning=this.isManyToOne||(this.isManyToMany||this.isOneToOne)&&this.joinColumns.length>0,this.isOneToOneOwner=this.isOneToOne&&this.isOwning,this.isOneToOneNotOwner=this.isOneToOne&&!this.isOwning,this.isManyToManyOwner=this.isManyToMany&&this.isOwning,this.isManyToManyNotOwner=this.isManyToMany&&!this.isOwning,this.isWithJoinColumn=this.isManyToOne||this.isOneToOneOwner}registerJunctionEntityMetadata(e){this.junctionEntityMetadata=e,this.joinTableName=e.tableName,this.inverseRelation&&(this.inverseRelation.junctionEntityMetadata=e,this.joinTableName=e.tableName)}buildInverseSidePropertyPath(){if(this.givenInverseSidePropertyFactory){const e=this.inverseEntityMetadata.propertiesMap;if("function"==typeof this.givenInverseSidePropertyFactory)return this.givenInverseSidePropertyFactory(e);if("string"==typeof this.givenInverseSidePropertyFactory)return this.givenInverseSidePropertyFactory}else{if(this.isTreeParent&&this.entityMetadata.treeChildrenRelation)return this.entityMetadata.treeChildrenRelation.propertyName;if(this.isTreeChildren&&this.entityMetadata.treeParentRelation)return this.entityMetadata.treeParentRelation.propertyName}return""}buildPropertyPath(){return this.embeddedMetadata&&this.embeddedMetadata.parentPropertyNames.length?this.embeddedMetadata.parentPropertyNames.join(".")+"."+this.propertyName:this.propertyName}}class Hr{constructor(e){this.columns=[],this.relations=[],this.listeners=[],this.indices=[],this.uniques=[],this.relationIds=[],this.relationCounts=[],this.embeddeds=[],this.isAlwaysUsingConstructor=!0,this.isArray=!1,this.parentPropertyNames=[],this.parentPrefixes=[],this.embeddedMetadataTree=[],this.columnsFromTree=[],this.relationsFromTree=[],this.listenersFromTree=[],this.indicesFromTree=[],this.uniquesFromTree=[],this.relationIdsFromTree=[],this.relationCountsFromTree=[],this.entityMetadata=e.entityMetadata,this.type=e.args.type(),this.propertyName=e.args.propertyName,this.customPrefix=e.args.prefix,this.isArray=e.args.isArray}create(e){return"function"!=typeof this.type?{}:!(null==e?void 0:e.fromDeserializer)||this.isAlwaysUsingConstructor?new this.type:Object.create(this.type.prototype)}build(e){return this.embeddeds.forEach((t=>t.build(e))),this.prefix=this.buildPrefix(e),this.parentPropertyNames=this.buildParentPropertyNames(),this.parentPrefixes=this.buildParentPrefixes(),this.propertyPath=this.parentPropertyNames.join("."),this.embeddedMetadataTree=this.buildEmbeddedMetadataTree(),this.columnsFromTree=this.buildColumnsFromTree(),this.relationsFromTree=this.buildRelationsFromTree(),this.listenersFromTree=this.buildListenersFromTree(),this.indicesFromTree=this.buildIndicesFromTree(),this.uniquesFromTree=this.buildUniquesFromTree(),this.relationIdsFromTree=this.buildRelationIdsFromTree(),this.relationCountsFromTree=this.buildRelationCountsFromTree(),e.options.entitySkipConstructor&&(this.isAlwaysUsingConstructor=!e.options.entitySkipConstructor),this}buildPartialPrefix(){if(void 0===this.customPrefix||!0===this.customPrefix)return[this.propertyName];if(""===this.customPrefix||!1===this.customPrefix)return[];if("string"==typeof this.customPrefix)return[this.customPrefix];throw new st.VR(`Invalid prefix option given for ${this.entityMetadata.targetName}#${this.propertyName}`)}buildPrefix(e){if("mongodb"===e.driver.options.type)return this.propertyName;let t=[];return this.parentEmbeddedMetadata&&t.push(this.parentEmbeddedMetadata.buildPrefix(e)),t.push(...this.buildPartialPrefix()),t.join("_")}buildParentPropertyNames(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildParentPropertyNames().concat(this.propertyName):[this.propertyName]}buildParentPrefixes(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildParentPrefixes().concat(this.buildPartialPrefix()):this.buildPartialPrefix()}buildEmbeddedMetadataTree(){return this.parentEmbeddedMetadata?this.parentEmbeddedMetadata.buildEmbeddedMetadataTree().concat(this):[this]}buildColumnsFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildColumnsFromTree())),this.columns)}buildRelationsFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildRelationsFromTree())),this.relations)}buildListenersFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildListenersFromTree())),this.listeners)}buildIndicesFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildIndicesFromTree())),this.indices)}buildUniquesFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildUniquesFromTree())),this.uniques)}buildRelationIdsFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildRelationIdsFromTree())),this.relationIds)}buildRelationCountsFromTree(){return this.embeddeds.reduce(((e,t)=>e.concat(t.buildRelationCountsFromTree())),this.relationCounts)}}class zr{constructor(e){this.entityMetadata=e.entityMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.relationNameOrFactory=e.args.relation,this.alias=e.args.alias,this.queryBuilderFactory=e.args.queryBuilderFactory}setValue(e){const t=this.relation.getEntityValue(e);if(Array.isArray(t))e[this.propertyName]=t.map((e=>this.relation.inverseEntityMetadata.getEntityIdMixedMap(e))).filter((e=>null!=e));else{const n=this.relation.inverseEntityMetadata.getEntityIdMixedMap(t);void 0!==n&&(e[this.propertyName]=n)}}build(){const e="function"==typeof this.relationNameOrFactory?this.relationNameOrFactory(this.entityMetadata.propertiesMap):this.relationNameOrFactory,t=this.entityMetadata.findRelationWithPropertyPath(e);if(!t)throw new st.VR(`Cannot find relation ${e}. Wrong relation specified for @RelationId decorator.`);this.relation=t}}class Wr{constructor(e){this.entityMetadata=e.entityMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.relationNameOrFactory=e.args.relation,this.alias=e.args.alias,this.queryBuilderFactory=e.args.queryBuilderFactory}build(){const e="function"==typeof this.relationNameOrFactory?this.relationNameOrFactory(this.entityMetadata.propertiesMap):this.relationNameOrFactory,t=this.entityMetadata.findRelationWithPropertyPath(e);if(!t)throw new st.VR(`Cannot find relation ${e}. Wrong relation specified for @RelationCount decorator.`);this.relation=t}}class Kr{}Kr.AFTER_LOAD="after-load",Kr.BEFORE_INSERT="before-insert",Kr.AFTER_INSERT="after-insert",Kr.BEFORE_UPDATE="before-update",Kr.AFTER_UPDATE="after-update",Kr.BEFORE_REMOVE="before-remove",Kr.AFTER_REMOVE="after-remove",Kr.BEFORE_SOFT_REMOVE="before-soft-remove",Kr.AFTER_SOFT_REMOVE="after-soft-remove",Kr.BEFORE_RECOVER="before-recover",Kr.AFTER_RECOVER="after-recover";class Gr{constructor(e){this.columns=[],this.referencedColumns=[],this.columnNames=[],this.referencedColumnNames=[],this.entityMetadata=e.entityMetadata,this.referencedEntityMetadata=e.referencedEntityMetadata,this.columns=e.columns,this.referencedColumns=e.referencedColumns,this.onDelete=e.onDelete||"NO ACTION",this.onUpdate=e.onUpdate||"NO ACTION",this.deferrable=e.deferrable,this.givenName=e.name,e.namingStrategy&&this.build(e.namingStrategy)}build(e){this.columnNames=this.columns.map((e=>e.databaseName)),this.referencedColumnNames=this.referencedColumns.map((e=>e.databaseName)),this.referencedTablePath=this.referencedEntityMetadata.tablePath,this.name=this.givenName?this.givenName:e.foreignKeyName(this.entityMetadata.tableName,this.columnNames,this.referencedEntityMetadata.tableName,this.referencedColumnNames)}}class Qr{constructor(e){this.connection=e}build(e,t){var n,r;const i=this.collectReferencedColumns(e,t),a=this.collectInverseReferencedColumns(e,t),s=t.name||this.connection.namingStrategy.joinTableName(e.entityMetadata.tableNameWithoutPrefix,e.inverseEntityMetadata.tableNameWithoutPrefix,e.propertyPath,e.inverseRelation?e.inverseRelation.propertyName:""),o=new Nn({connection:this.connection,args:{target:"",name:s,type:"junction",database:t.database||e.entityMetadata.database,schema:t.schema||e.entityMetadata.schema}});o.build();const c=i.map((n=>{const r=t.joinColumns?t.joinColumns.find((e=>!(e.referencedColumnName&&e.referencedColumnName!==n.propertyName||!e.name))):void 0,i=r&&r.name?r.name:this.connection.namingStrategy.joinTableColumnName(e.entityMetadata.tableNameWithoutPrefix,n.propertyName,n.databaseName);return new Ur({connection:this.connection,entityMetadata:o,referencedColumn:n,args:{target:"",mode:"virtual",propertyName:i,options:{name:i,length:n.length||!Nt.I.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type||"uuid"!==n.generationStrategy&&"uuid"!==n.type?n.length:"36",width:n.width,type:n.type,precision:n.precision,scale:n.scale,charset:n.charset,collation:n.collation,zerofill:n.zerofill,unsigned:!!n.zerofill||n.unsigned,enum:n.enum,enumName:n.enumName,foreignKeyConstraintName:null==r?void 0:r.foreignKeyConstraintName,nullable:!1,primary:!0}}})})),l=a.map((n=>{const r=t.inverseJoinColumns?t.inverseJoinColumns.find((e=>!(e.referencedColumnName&&e.referencedColumnName!==n.propertyName||!e.name))):void 0,i=r&&r.name?r.name:this.connection.namingStrategy.joinTableInverseColumnName(e.inverseEntityMetadata.tableNameWithoutPrefix,n.propertyName,n.databaseName);return new Ur({connection:this.connection,entityMetadata:o,referencedColumn:n,args:{target:"",mode:"virtual",propertyName:i,options:{length:n.length||!Nt.I.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type||"uuid"!==n.generationStrategy&&"uuid"!==n.type?n.length:"36",width:n.width,type:n.type,precision:n.precision,scale:n.scale,charset:n.charset,collation:n.collation,zerofill:n.zerofill,unsigned:!!n.zerofill||n.unsigned,enum:n.enum,enumName:n.enumName,foreignKeyConstraintName:null==r?void 0:r.foreignKeyConstraintName,name:i,nullable:!1,primary:!0}}})}));return this.changeDuplicatedColumnNames(c,l),o.ownerColumns=c,o.inverseColumns=l,o.ownColumns=[...c,...l],o.ownColumns.forEach((t=>t.relationMetadata=e)),o.foreignKeys=e.createForeignKeyConstraints?[new Gr({entityMetadata:o,referencedEntityMetadata:e.entityMetadata,columns:c,referencedColumns:i,name:null===(n=c[0])||void 0===n?void 0:n.foreignKeyConstraintName,onDelete:"spanner"===this.connection.driver.options.type?"NO ACTION":e.onDelete||"CASCADE",onUpdate:"oracle"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type?"NO ACTION":e.onUpdate||"CASCADE"}),new Gr({entityMetadata:o,referencedEntityMetadata:e.inverseEntityMetadata,columns:l,referencedColumns:a,name:null===(r=l[0])||void 0===r?void 0:r.foreignKeyConstraintName,onDelete:"spanner"===this.connection.driver.options.type?"NO ACTION":e.inverseRelation?e.inverseRelation.onDelete:"CASCADE",onUpdate:"oracle"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type?"NO ACTION":e.inverseRelation?e.inverseRelation.onUpdate:"CASCADE"})]:[],o.ownIndices=[new Fr({entityMetadata:o,columns:c,args:{target:o.target,synchronize:!0}}),new Fr({entityMetadata:o,columns:l,args:{target:o.target,synchronize:!0}})],o}collectReferencedColumns(e,t){const n=!!t.joinColumns&&t.joinColumns.find((e=>!!e.referencedColumnName));return!t.joinColumns||t.joinColumns&&!n?e.entityMetadata.columns.filter((e=>e.isPrimary)):t.joinColumns.map((t=>{const n=e.entityMetadata.columns.find((e=>e.propertyName===t.referencedColumnName));if(!n)throw new st.VR(`Referenced column ${t.referencedColumnName} was not found in entity ${e.entityMetadata.name}`);return n}))}collectInverseReferencedColumns(e,t){const n=!!t.inverseJoinColumns,r=!!n&&t.inverseJoinColumns.find((e=>!!e.referencedColumnName));return!n||n&&!r?e.inverseEntityMetadata.primaryColumns:t.inverseJoinColumns.map((t=>{const n=e.inverseEntityMetadata.ownColumns.find((e=>e.propertyName===t.referencedColumnName));if(!n)throw new st.VR(`Referenced column ${t.referencedColumnName} was not found in entity ${e.inverseEntityMetadata.name}`);return n}))}changeDuplicatedColumnNames(e,t){e.forEach((e=>{t.forEach((t=>{if(e.givenDatabaseName===t.givenDatabaseName){const n=this.connection.namingStrategy.joinTableColumnDuplicationPrefix(e.propertyName,1);e.propertyName=n,e.givenDatabaseName=n;const r=this.connection.namingStrategy.joinTableColumnDuplicationPrefix(t.propertyName,2);t.propertyName=r,t.givenDatabaseName=r}}))}))}}class Jr{constructor(e){this.connection=e}build(e){const t=new Nn({parentClosureEntityMetadata:e,connection:this.connection,args:{target:"",name:e.treeOptions&&e.treeOptions.closureTableName?e.treeOptions.closureTableName:e.tableNameWithoutPrefix,type:"closure-junction"}});return t.build(),e.primaryColumns.forEach((n=>{t.ownColumns.push(new Ur({connection:this.connection,entityMetadata:t,closureType:"ancestor",referencedColumn:n,args:{target:"",mode:"virtual",propertyName:e.treeOptions&&e.treeOptions.ancestorColumnName?e.treeOptions.ancestorColumnName(n):n.propertyName+"_ancestor",options:{primary:!0,length:n.length,type:n.type}}})),t.ownColumns.push(new Ur({connection:this.connection,entityMetadata:t,closureType:"descendant",referencedColumn:n,args:{target:"",mode:"virtual",propertyName:e.treeOptions&&e.treeOptions.descendantColumnName?e.treeOptions.descendantColumnName(n):n.propertyName+"_descendant",options:{primary:!0,length:n.length,type:n.type}}}))})),t.ownIndices=[new Fr({entityMetadata:t,columns:[t.ownColumns[0]],args:{target:t.target,synchronize:!0}}),new Fr({entityMetadata:t,columns:[t.ownColumns[1]],args:{target:t.target,synchronize:!0}})],e.treeLevelColumn&&t.ownColumns.push(new Ur({connection:this.connection,entityMetadata:t,args:{target:"",mode:"virtual",propertyName:"level",options:{type:this.connection.driver.mappedDataTypes.treeLevel}}})),t.foreignKeys=[new Gr({entityMetadata:t,referencedEntityMetadata:e,columns:[t.ownColumns[0]],referencedColumns:e.primaryColumns,onDelete:"mssql"===this.connection.driver.options.type?"NO ACTION":"CASCADE"}),new Gr({entityMetadata:t,referencedEntityMetadata:e,columns:[t.ownColumns[1]],referencedColumns:e.primaryColumns,onDelete:"mssql"===this.connection.driver.options.type?"NO ACTION":"CASCADE"})],t}}class Yr{constructor(e){this.columns=[],this.columnNamesWithOrderingMap={},this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,e.columns&&(this.columns=e.columns),e.args&&(this.target=e.args.target,this.givenName=e.args.name,this.givenColumnNames=e.args.columns,this.deferrable=e.args.deferrable)}build(e){const t={};if(this.givenColumnNames){let e=[];if(Array.isArray(this.givenColumnNames))e=this.givenColumnNames.map((e=>this.embeddedMetadata?this.embeddedMetadata.propertyPath+"."+e:e.trim())),e.forEach((e=>t[e]=1));else{const n=this.givenColumnNames(this.entityMetadata.propertiesMap);Array.isArray(n)?(e=n.map((e=>String(e))),e.forEach((e=>t[e]=1))):(e=Object.keys(n).map((e=>String(e))),Object.keys(n).forEach((e=>t[e]=n[e])))}this.columns=e.map((e=>{const t=this.entityMetadata.columns.find((t=>t.propertyPath===e));if(t)return[t];const n=this.entityMetadata.relations.find((t=>t.isWithJoinColumn&&t.propertyName===e));if(n)return n.joinColumns;const r=this.givenName?'"'+this.givenName+'" ':"",i=this.entityMetadata.targetName;throw new st.VR(`Unique constraint ${r}contains column that is missing in the entity (${i}): `+e)})).reduce(((e,t)=>e.concat(t)))}return this.columnNamesWithOrderingMap=Object.keys(t).reduce(((e,n)=>{const r=this.entityMetadata.columns.find((e=>e.propertyPath===n));return r&&(e[r.databasePath]=t[n]),e}),{}),this.name=this.givenName?this.givenName:e.uniqueConstraintName(this.entityMetadata.tableName,this.columns.map((e=>e.databaseName))),this}}class Xr{constructor(e){this.connection=e}build(e,t){var n;const r=this.collectReferencedColumns(e,t),i=this.collectColumns(e,t,r);if(!r.length||!t.createForeignKeyConstraints)return{foreignKey:void 0,columns:i,uniqueConstraint:void 0};const a=new Gr({name:null===(n=e[0])||void 0===n?void 0:n.foreignKeyConstraintName,entityMetadata:t.entityMetadata,referencedEntityMetadata:t.inverseEntityMetadata,namingStrategy:this.connection.namingStrategy,columns:i,referencedColumns:r,onDelete:t.onDelete,onUpdate:t.onUpdate,deferrable:t.deferrable});if("oracle"===this.connection.driver.options.type&&i.every((e=>e.isPrimary)))return{foreignKey:a,columns:i,uniqueConstraint:void 0};if(r.length>0&&t.isOneToOne){const e=new Yr({entityMetadata:t.entityMetadata,columns:a.columns,args:{name:this.connection.namingStrategy.relationConstraintName(t.entityMetadata.tableName,a.columns.map((e=>e.databaseName))),target:t.entityMetadata.target}});return e.build(this.connection.namingStrategy),{foreignKey:a,columns:i,uniqueConstraint:e}}return{foreignKey:a,columns:i,uniqueConstraint:void 0}}collectReferencedColumns(e,t){const n=e.find((e=>!!e.referencedColumnName)),r=0===e.length&&t.isManyToOne,i=e.length>0&&!n;return r||i?t.inverseEntityMetadata.primaryColumns:e.map((e=>{const n=t.inverseEntityMetadata.ownColumns.find((t=>t.propertyName===e.referencedColumnName));if(!n)throw new st.VR(`Referenced column ${e.referencedColumnName} was not found in entity ${t.inverseEntityMetadata.name}`);return n}))}collectColumns(e,t,n){return n.map((n=>{const r=e.find((e=>!(e.referencedColumnName&&e.referencedColumnName!==n.propertyName||!e.name))),i=r?r.name:this.connection.namingStrategy.joinColumnName(t.propertyName,n.propertyName);let a=(t.embeddedMetadata?t.embeddedMetadata.columns:t.entityMetadata.ownColumns).find((e=>e.databaseNameWithoutPrefixes===i));return a||(a=new Ur({connection:this.connection,entityMetadata:t.entityMetadata,embeddedMetadata:t.embeddedMetadata,args:{target:"",mode:"virtual",propertyName:t.propertyName,options:{name:i,type:n.type,length:n.length||!Nt.I.isMySQLFamily(this.connection.driver)&&"aurora-mysql"!==this.connection.driver.options.type||"uuid"!==n.generationStrategy&&"uuid"!==n.type?n.length:"36",width:n.width,charset:n.charset,collation:n.collation,precision:n.precision,scale:n.scale,zerofill:n.zerofill,unsigned:n.unsigned,comment:n.comment,enum:n.enum,enumName:n.enumName,primary:t.isPrimary,nullable:t.isNullable}}}),t.entityMetadata.registerColumn(a)),a.referencedColumn=n,a.type=n.type,a.relationMetadata=t,a.build(this.connection),a}))}}class Zr{constructor(e){this.entityMetadata=e.entityMetadata,this.embeddedMetadata=e.embeddedMetadata,this.target=e.args.target,this.propertyName=e.args.propertyName,this.type=e.args.type}isAllowed(e){return this.entityMetadata.target===e.constructor||"function"==typeof this.entityMetadata.target&&e.constructor.prototype instanceof this.entityMetadata.target}execute(e){if(!this.embeddedMetadata)return e[this.propertyName]();this.callEntityEmbeddedMethod(e,this.embeddedMetadata.propertyPath.split("."))}callEntityEmbeddedMethod(e,t){const n=t.shift();n&&e[n]&&(0===t.length?Array.isArray(e[n])?e[n].map((e=>e[this.propertyName]())):e[n][this.propertyName]():e[n]&&this.callEntityEmbeddedMethod(e[n],t))}}class ei{constructor(e){this.entityMetadata=e.entityMetadata,e.args&&(this.target=e.args.target,this.expression=e.args.expression,this.givenName=e.args.name)}build(e){return this.name=this.givenName?this.givenName:e.checkConstraintName(this.entityMetadata.tableName,this.expression),this}}class ti{constructor(e){this.entityMetadata=e.entityMetadata,e.args&&(this.target=e.args.target,this.expression=e.args.expression,this.givenName=e.args.name)}build(e){return this.name=this.givenName?this.givenName:e.exclusionConstraintName(this.entityMetadata.tableName,this.expression),this}}class ni{constructor(e,t){this.connection=e,this.metadataArgsStorage=t,this.junctionEntityMetadataBuilder=new Qr(e),this.closureJunctionEntityMetadataBuilder=new Jr(e),this.relationJoinColumnBuilder=new Xr(e)}build(e){const t=(e?this.metadataArgsStorage.filterTables(e):this.metadataArgsStorage.tables).filter((e=>"regular"===e.type||"closure"===e.type||"entity-child"===e.type||"view"===e.type)).map((e=>this.createEntityMetadata(e)));return t.forEach((e=>this.computeParentEntityMetadata(t,e))),t.forEach((e=>{e.childEntityMetadatas=t.filter((t=>"function"==typeof e.target&&"function"==typeof t.target&&et.isInherited(t.target,e.target)))})),t.filter((e=>"entity-child"!==e.tableType)).forEach((e=>e.build())),t.filter((e=>"entity-child"===e.tableType)).forEach((e=>e.build())),t.filter((e=>"entity-child"!==e.tableType)).forEach((e=>this.computeEntityMetadataStep1(t,e))),t.filter((e=>"entity-child"===e.tableType)).forEach((e=>this.computeEntityMetadataStep1(t,e))),t.forEach((e=>this.computeEntityMetadataStep2(e))),t.forEach((e=>this.computeInverseProperties(e,t))),t.filter((e=>"entity-child"!==e.tableType)).forEach((e=>{e.relations.filter((e=>e.isOneToOne||e.isManyToOne)).forEach((t=>{const n=this.metadataArgsStorage.filterJoinColumns(t.target,t.propertyName),{foreignKey:r,columns:i,uniqueConstraint:a}=this.relationJoinColumnBuilder.build(n,t);if(r&&(t.registerForeignKeys(r),e.foreignKeys.push(r)),i&&t.registerJoinColumns(i),a)if(Nt.I.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type||"mssql"===this.connection.driver.options.type||"sap"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type){const n=new Fr({entityMetadata:a.entityMetadata,columns:a.columns,args:{target:a.target,name:a.name,unique:!0,synchronize:!0}});"mssql"===this.connection.driver.options.type&&(n.where=n.columns.map((e=>`${this.connection.driver.escape(e.databaseName)} IS NOT NULL`)).join(" AND ")),"spanner"===this.connection.driver.options.type&&(n.isNullFiltered=!0),t.embeddedMetadata?t.embeddedMetadata.indices.push(n):t.entityMetadata.ownIndices.push(n),this.computeEntityMetadataStep2(e)}else t.embeddedMetadata?t.embeddedMetadata.uniques.push(a):t.entityMetadata.ownUniques.push(a),this.computeEntityMetadataStep2(e);if(r&&"cockroachdb"===this.connection.driver.options.type){const n=new Fr({entityMetadata:t.entityMetadata,columns:r.columns,args:{target:t.entityMetadata.target,synchronize:!0}});t.embeddedMetadata?t.embeddedMetadata.indices.push(n):t.entityMetadata.ownIndices.push(n),this.computeEntityMetadataStep2(e)}})),e.relations.filter((e=>e.isManyToMany)).forEach((e=>{const n=this.metadataArgsStorage.findJoinTable(e.target,e.propertyName);if(!n)return;const r=this.junctionEntityMetadataBuilder.build(e,n);e.registerForeignKeys(...r.foreignKeys),e.registerJoinColumns(r.ownIndices[0].columns,r.ownIndices[1].columns),e.registerJunctionEntityMetadata(r),this.computeEntityMetadataStep2(r),this.computeInverseProperties(r,t),t.push(r)}))})),t.forEach((e=>{e.relationsWithJoinColumns=e.relations.filter((e=>e.isWithJoinColumn)),e.hasNonNullableRelations=e.relationsWithJoinColumns.some((e=>!e.isNullable||e.isPrimary))})),t.filter((e=>"closure-table"===e.treeType)).forEach((e=>{const n=this.closureJunctionEntityMetadataBuilder.build(e);e.closureJunctionTable=n,this.computeEntityMetadataStep2(n),this.computeInverseProperties(n,t),t.push(n)})),t.filter((e=>"STI"===e.inheritancePattern&&e.discriminatorColumn)).forEach((e=>this.createKeysForTableInheritance(e))),t.forEach((e=>{e.indices.forEach((e=>e.build(this.connection.namingStrategy)))})),t.forEach((e=>{e.uniques.forEach((e=>e.build(this.connection.namingStrategy)))})),t.forEach((e=>{e.checks.forEach((e=>e.build(this.connection.namingStrategy)))})),t.forEach((e=>{e.exclusions.forEach((e=>e.build(this.connection.namingStrategy)))})),t.filter((e=>"function"==typeof e.target)).forEach((e=>{e.relations.filter((e=>e.isLazy)).forEach((t=>{this.connection.relationLoader.enableLazyLoad(t,e.target.prototype)}))})),t.forEach((e=>{e.columns.forEach((t=>{const n=this.metadataArgsStorage.findGenerated(t.target,t.propertyName);n&&(t.isGenerated=!0,t.generationStrategy=n.strategy,"uuid"===n.strategy?t.type="uuid":"rowid"===n.strategy?t.type="int":t.type=t.type||Number,t.build(this.connection),this.computeEntityMetadataStep2(e))}))})),t}createEntityMetadata(e){const t="function"==typeof e.target?et.getInheritanceTree(e.target):[e.target],n=this.metadataArgsStorage.findInheritanceType(e.target),r=this.metadataArgsStorage.findTree(e.target);let i;return(n&&"STI"===n.pattern||"entity-child"===e.type)&&(i=this.metadataArgsStorage.filterSingleTableChildren(e.target).map((e=>e.target)).filter((e=>"function"==typeof e)),t.push(...i)),new Nn({connection:this.connection,args:e,inheritanceTree:t,tableTree:r,inheritancePattern:n?n.pattern:void 0})}computeParentEntityMetadata(e,t){"entity-child"===t.tableType&&(t.parentEntityMetadata=e.find((e=>-1!==e.inheritanceTree.indexOf(t.target)&&"STI"===e.inheritancePattern)))}computeEntityMetadataStep1(e,t){const n=this.metadataArgsStorage.findInheritanceType(t.target),r=this.metadataArgsStorage.findDiscriminatorValue(t.target);if(t.discriminatorValue=void 0!==r?r.value:t.target.name,t.embeddeds=this.createEmbeddedsRecursively(t,this.metadataArgsStorage.filterEmbeddeds(t.inheritanceTree)).map((e=>("STI"===t.inheritancePattern&&(e.columns=e.columns.map((e=>(e.isNullable=!0,e)))),e))),t.ownColumns=this.metadataArgsStorage.filterColumns(t.inheritanceTree).map((n=>{if("entity-child"===t.tableType)return t.parentEntityMetadata.ownColumns.find((e=>e.propertyName===n.propertyName));const r=new Ur({connection:this.connection,entityMetadata:t,args:n});return e.find((e=>"entity-child"===e.tableType&&e.target===n.target))&&(r.isNullable=!0),r})),n&&n.column){const e=n.column&&n.column.name?n.column.name:"type";let r=t.ownColumns.find((t=>t.propertyName===e));r?r.isDiscriminator=!0:(r=new Ur({connection:this.connection,entityMetadata:t,args:{target:t.target,mode:"virtual",propertyName:e,options:n.column||{name:e,type:"varchar",nullable:!1}}}),r.isVirtual=!0,r.isDiscriminator=!0,t.ownColumns.push(r))}if("entity-child"===t.tableType){const e=t.parentEntityMetadata.ownColumns.find((e=>e.isDiscriminator));e&&!t.ownColumns.find((t=>t===e))&&t.ownColumns.push(e)}const{namingStrategy:i}=this.connection;if("materialized-path"===t.treeType)t.ownColumns.push(new Ur({connection:this.connection,entityMetadata:t,materializedPath:!0,args:{target:t.target,mode:"virtual",propertyName:"mpath",options:{name:i.materializedPathColumnName,type:String,nullable:!0,default:""}}}));else if("nested-set"===t.treeType){const{left:e,right:n}=i.nestedSetColumnNames;t.ownColumns.push(new Ur({connection:this.connection,entityMetadata:t,nestedSetLeft:!0,args:{target:t.target,mode:"virtual",propertyName:e,options:{name:e,type:Number,nullable:!1,default:1}}})),t.ownColumns.push(new Ur({connection:this.connection,entityMetadata:t,nestedSetRight:!0,args:{target:t.target,mode:"virtual",propertyName:n,options:{name:n,type:Number,nullable:!1,default:2}}}))}if(t.ownRelations=this.metadataArgsStorage.filterRelations(t.inheritanceTree).map((e=>{if("entity-child"===t.tableType){const n=t.parentEntityMetadata.ownRelations.find((t=>t.propertyName===e.propertyName)),r="function"==typeof e.type?e.type():e.type;if(n.type!==r){const e=Object.create(n);return e.type=r,e}return n}return new Vr({entityMetadata:t,args:e})})),t.relationIds=this.metadataArgsStorage.filterRelationIds(t.inheritanceTree).map((e=>"entity-child"===t.tableType?t.parentEntityMetadata.relationIds.find((t=>t.propertyName===e.propertyName)):new zr({entityMetadata:t,args:e}))),t.relationCounts=this.metadataArgsStorage.filterRelationCounts(t.inheritanceTree).map((e=>"entity-child"===t.tableType?t.parentEntityMetadata.relationCounts.find((t=>t.propertyName===e.propertyName)):new Wr({entityMetadata:t,args:e}))),t.ownListeners=this.metadataArgsStorage.filterListeners(t.inheritanceTree).map((e=>new Zr({entityMetadata:t,args:e}))),t.checks=this.metadataArgsStorage.filterChecks(t.inheritanceTree).map((e=>new ei({entityMetadata:t,args:e}))),"postgres"===this.connection.driver.options.type&&(t.exclusions=this.metadataArgsStorage.filterExclusions(t.inheritanceTree).map((e=>new ti({entityMetadata:t,args:e})))),"cockroachdb"===this.connection.driver.options.type){t.ownIndices=this.metadataArgsStorage.filterIndices(t.inheritanceTree).filter((e=>!e.unique)).map((e=>new Fr({entityMetadata:t,args:e})));const e=this.metadataArgsStorage.filterIndices(t.inheritanceTree).filter((e=>e.unique)).map((e=>new Yr({entityMetadata:t,args:{target:e.target,name:e.name,columns:e.columns}})));t.ownUniques.push(...e)}else t.ownIndices=this.metadataArgsStorage.filterIndices(t.inheritanceTree).map((e=>new Fr({entityMetadata:t,args:e})));if(Nt.I.isMySQLFamily(this.connection.driver)||"aurora-mysql"===this.connection.driver.options.type||"sap"===this.connection.driver.options.type||"spanner"===this.connection.driver.options.type){const e=this.metadataArgsStorage.filterUniques(t.inheritanceTree).map((e=>new Fr({entityMetadata:t,args:{target:e.target,name:e.name,columns:e.columns,unique:!0,synchronize:!0}})));t.ownIndices.push(...e)}else{const e=this.metadataArgsStorage.filterUniques(t.inheritanceTree).map((e=>new Yr({entityMetadata:t,args:e})));t.ownUniques.push(...e)}}createEmbeddedsRecursively(e,t){return t.map((t=>{const n=new Hr({entityMetadata:e,args:t}),r="function"==typeof n.type?et.getInheritanceTree(n.type):[n.type];return n.columns=this.metadataArgsStorage.filterColumns(r).map((t=>new Ur({connection:this.connection,entityMetadata:e,embeddedMetadata:n,args:t}))),n.relations=this.metadataArgsStorage.filterRelations(r).map((t=>new Vr({entityMetadata:e,embeddedMetadata:n,args:t}))),n.listeners=this.metadataArgsStorage.filterListeners(r).map((t=>new Zr({entityMetadata:e,embeddedMetadata:n,args:t}))),n.indices=this.metadataArgsStorage.filterIndices(r).map((t=>new Fr({entityMetadata:e,embeddedMetadata:n,args:t}))),n.uniques=this.metadataArgsStorage.filterUniques(r).map((t=>new Yr({entityMetadata:e,embeddedMetadata:n,args:t}))),n.relationIds=this.metadataArgsStorage.filterRelationIds(r).map((t=>new zr({entityMetadata:e,args:t}))),n.relationCounts=this.metadataArgsStorage.filterRelationCounts(r).map((t=>new Wr({entityMetadata:e,args:t}))),n.embeddeds=this.createEmbeddedsRecursively(e,this.metadataArgsStorage.filterEmbeddeds(r)),n.embeddeds.forEach((e=>e.parentEmbeddedMetadata=n)),e.allEmbeddeds.push(n),n}))}computeEntityMetadataStep2(e){e.embeddeds.forEach((e=>e.build(this.connection))),e.embeddeds.forEach((e=>{e.columnsFromTree.forEach((e=>e.build(this.connection))),e.relationsFromTree.forEach((e=>e.build()))})),e.ownColumns.forEach((e=>e.build(this.connection))),e.ownRelations.forEach((e=>e.build())),e.relations=e.embeddeds.reduce(((e,t)=>e.concat(t.relationsFromTree)),e.ownRelations),e.eagerRelations=e.relations.filter((e=>e.isEager)),e.lazyRelations=e.relations.filter((e=>e.isLazy)),e.oneToOneRelations=e.relations.filter((e=>e.isOneToOne)),e.oneToManyRelations=e.relations.filter((e=>e.isOneToMany)),e.manyToOneRelations=e.relations.filter((e=>e.isManyToOne)),e.manyToManyRelations=e.relations.filter((e=>e.isManyToMany)),e.ownerOneToOneRelations=e.relations.filter((e=>e.isOneToOneOwner)),e.ownerManyToManyRelations=e.relations.filter((e=>e.isManyToManyOwner)),e.treeParentRelation=e.relations.find((e=>e.isTreeParent)),e.treeChildrenRelation=e.relations.find((e=>e.isTreeChildren)),e.columns=e.embeddeds.reduce(((e,t)=>e.concat(t.columnsFromTree)),e.ownColumns),e.listeners=e.embeddeds.reduce(((e,t)=>e.concat(t.listenersFromTree)),e.ownListeners),e.afterLoadListeners=e.listeners.filter((e=>e.type===Kr.AFTER_LOAD)),e.afterInsertListeners=e.listeners.filter((e=>e.type===Kr.AFTER_INSERT)),e.afterUpdateListeners=e.listeners.filter((e=>e.type===Kr.AFTER_UPDATE)),e.afterRemoveListeners=e.listeners.filter((e=>e.type===Kr.AFTER_REMOVE)),e.afterSoftRemoveListeners=e.listeners.filter((e=>e.type===Kr.AFTER_SOFT_REMOVE)),e.afterRecoverListeners=e.listeners.filter((e=>e.type===Kr.AFTER_RECOVER)),e.beforeInsertListeners=e.listeners.filter((e=>e.type===Kr.BEFORE_INSERT)),e.beforeUpdateListeners=e.listeners.filter((e=>e.type===Kr.BEFORE_UPDATE)),e.beforeRemoveListeners=e.listeners.filter((e=>e.type===Kr.BEFORE_REMOVE)),e.beforeSoftRemoveListeners=e.listeners.filter((e=>e.type===Kr.BEFORE_SOFT_REMOVE)),e.beforeRecoverListeners=e.listeners.filter((e=>e.type===Kr.BEFORE_RECOVER)),e.indices=e.embeddeds.reduce(((e,t)=>e.concat(t.indicesFromTree)),e.ownIndices),e.uniques=e.embeddeds.reduce(((e,t)=>e.concat(t.uniquesFromTree)),e.ownUniques),e.primaryColumns=e.columns.filter((e=>e.isPrimary)),e.nonVirtualColumns=e.columns.filter((e=>!e.isVirtual)),e.ancestorColumns=e.columns.filter((e=>"ancestor"===e.closureType)),e.descendantColumns=e.columns.filter((e=>"descendant"===e.closureType)),e.hasMultiplePrimaryKeys=e.primaryColumns.length>1,e.generatedColumns=e.columns.filter((e=>e.isGenerated||e.isObjectId)),e.hasUUIDGeneratedColumns=e.columns.filter((e=>e.isGenerated||"uuid"===e.generationStrategy)).length>0,e.createDateColumn=e.columns.find((e=>e.isCreateDate)),e.updateDateColumn=e.columns.find((e=>e.isUpdateDate)),e.deleteDateColumn=e.columns.find((e=>e.isDeleteDate)),e.versionColumn=e.columns.find((e=>e.isVersion)),e.discriminatorColumn=e.columns.find((e=>e.isDiscriminator)),e.treeLevelColumn=e.columns.find((e=>e.isTreeLevel)),e.nestedSetLeftColumn=e.columns.find((e=>e.isNestedSetLeft)),e.nestedSetRightColumn=e.columns.find((e=>e.isNestedSetRight)),e.materializedPathColumn=e.columns.find((e=>e.isMaterializedPath)),e.objectIdColumn=e.columns.find((e=>e.isObjectId)),e.foreignKeys.forEach((e=>e.build(this.connection.namingStrategy))),e.propertiesMap=e.createPropertiesMap(),e.relationIds.forEach((e=>e.build())),e.relationCounts.forEach((e=>e.build())),e.embeddeds.forEach((e=>{e.relationIdsFromTree.forEach((e=>e.build())),e.relationCountsFromTree.forEach((e=>e.build()))}))}computeInverseProperties(e,t){e.relations.forEach((n=>{const r=t.find((e=>e.target===n.type||"string"==typeof n.type&&(e.targetName===n.type||e.givenTableName===n.type)));if(!r)throw new st.VR("Entity metadata for "+e.name+"#"+n.propertyPath+" was not found. Check if you specified a correct entity object and if it's connected in the connection options.");n.inverseEntityMetadata=r,n.inverseSidePropertyPath=n.buildInverseSidePropertyPath(),n.inverseRelation=r.relations.find((e=>e.propertyPath===n.inverseSidePropertyPath))}))}createKeysForTableInheritance(e){e.indices.push(new Fr({entityMetadata:e,columns:[e.discriminatorColumn],args:{target:e.target,unique:!1}}))}}class ri extends st.VR{static createEntitySchemaIsRequiredException(e){return new ri(`EntitySchema is required for ${e} embedded field`)}static createTargetIsRequired(e){return new ri(`Target field is required for ${e} embedded EntitySchema`)}constructor(e){super(e)}}class ii{transform(e){const t=new tt;return e.forEach((e=>{const n=e.options,r={target:n.target||n.name,name:n.tableName,database:n.database,schema:n.schema,type:n.type||"regular",orderBy:n.orderBy,synchronize:n.synchronize,withoutRowid:!!n.withoutRowid,expression:n.expression};t.tables.push(r),this.transformColumnsRecursive(n,t)})),t}transformColumnsRecursive(e,t){Object.keys(e.columns).forEach((n=>{const r=e.columns[n];let i="regular";r.createDate&&(i="createDate"),r.updateDate&&(i="updateDate"),r.deleteDate&&(i="deleteDate"),r.version&&(i="version"),r.treeChildrenCount&&(i="treeChildrenCount"),r.treeLevel&&(i="treeLevel"),r.objectId&&(i="objectId");const a={target:e.target||e.name,mode:i,propertyName:n,options:{type:r.type,name:r.objectId?"_id":r.name,length:r.length,width:r.width,nullable:r.nullable,readonly:r.readonly,update:r.update,select:r.select,insert:r.insert,primary:r.primary,unique:r.unique,comment:r.comment,default:r.default,onUpdate:r.onUpdate,precision:r.precision,scale:r.scale,zerofill:r.zerofill,unsigned:r.unsigned,charset:r.charset,collation:r.collation,enum:r.enum,enumName:r.enumName,asExpression:r.asExpression,generatedType:r.generatedType,hstoreType:r.hstoreType,array:r.array,transformer:r.transformer,spatialFeatureType:r.spatialFeatureType,srid:r.srid}};if(t.columns.push(a),r.generated){const i={target:e.target||e.name,propertyName:n,strategy:"string"==typeof r.generated?r.generated:"increment"};t.generations.push(i)}r.unique&&t.uniques.push({target:e.target||e.name,columns:[n]})})),e.relations&&Object.keys(e.relations).forEach((n=>{const r=e.relations[n],i={target:e.target||e.name,propertyName:n,relationType:r.type,isLazy:r.lazy||!1,type:r.target,inverseSideProperty:r.inverseSide,isTreeParent:r.treeParent,isTreeChildren:r.treeChildren,options:{eager:r.eager||!1,cascade:r.cascade,nullable:r.nullable,onDelete:r.onDelete,onUpdate:r.onUpdate,deferrable:r.deferrable,createForeignKeyConstraints:r.createForeignKeyConstraints,persistence:r.persistence,orphanedRowAction:r.orphanedRowAction}};if(t.relations.push(i),r.joinColumn)if("boolean"==typeof r.joinColumn){const r={target:e.target||e.name,propertyName:n};t.joinColumns.push(r)}else{const i=Array.isArray(r.joinColumn)?r.joinColumn:[r.joinColumn];for(const r of i){const i={target:e.target||e.name,propertyName:n,name:r.name,referencedColumnName:r.referencedColumnName,foreignKeyConstraintName:r.foreignKeyConstraintName};t.joinColumns.push(i)}}if(r.joinTable)if("boolean"==typeof r.joinTable){const r={target:e.target||e.name,propertyName:n};t.joinTables.push(r)}else{const i={target:e.target||e.name,propertyName:n,name:r.joinTable.name,database:r.joinTable.database,schema:r.joinTable.schema,joinColumns:r.joinTable.joinColumn?[r.joinTable.joinColumn]:r.joinTable.joinColumns,inverseJoinColumns:r.joinTable.inverseJoinColumn?[r.joinTable.inverseJoinColumn]:r.joinTable.inverseJoinColumns};t.joinTables.push(i)}})),e.relationIds&&Object.keys(e.relationIds).forEach((n=>{const r=e.relationIds[n],i={propertyName:n,relation:r.relationName,target:e.target||e.name,alias:r.alias,queryBuilderFactory:r.queryBuilderFactory};t.relationIds.push(i)})),e.indices&&e.indices.forEach((n=>{const r={target:e.target||e.name,name:n.name,unique:!0===n.unique,spatial:!0===n.spatial,fulltext:!0===n.fulltext,nullFiltered:!0===n.nullFiltered,parser:n.parser,synchronize:!1!==n.synchronize,where:n.where,sparse:n.sparse,columns:n.columns};t.indices.push(r)})),e.uniques&&e.uniques.forEach((n=>{const r={target:e.target||e.name,name:n.name,columns:n.columns,deferrable:n.deferrable};t.uniques.push(r)})),e.checks&&e.checks.forEach((n=>{const r={target:e.target||e.name,name:n.name,expression:n.expression};t.checks.push(r)})),e.exclusions&&e.exclusions.forEach((n=>{const r={target:e.target||e.name,name:n.name,expression:n.expression};t.exclusions.push(r)})),e.embeddeds&&Object.keys(e.embeddeds).forEach((n=>{const r=e.embeddeds[n];if(!r.schema)throw ri.createEntitySchemaIsRequiredException(n);const i=r.schema.options;t.embeddeds.push({target:e.target||e.name,propertyName:n,isArray:!0===r.array,prefix:void 0!==r.prefix?r.prefix:void 0,type:()=>(null==i?void 0:i.target)||i.name}),this.transformColumnsRecursive(i,t)}))}}class ai{constructor(e){this.connection=e}async buildMigrations(e){const[t,n]=cn.m.splitClassesAndStrings(e);return[...t,...await(this.connection.logger,[])].map((e=>qr(e)))}async buildSubscribers(e){const[t,n]=cn.m.splitClassesAndStrings(e||[]),r=[...t,...await(this.connection.logger,[])];return _i().filterSubscribers(r).map((e=>qr(e.target)))}async buildEntityMetadatas(e){const[t,n]=cn.m.splitClassesAndStrings(e||[]),r=t.filter((e=>!gt.t.isEntitySchema(e))),i=t.filter((e=>gt.t.isEntitySchema(e))),a=[...r,...await(this.connection.logger,[])];a.forEach((e=>{gt.t.isEntitySchema(e)&&i.push(e)}));const s=new ni(this.connection,_i()).build(a),o=(new ii).transform(i);return[...s,...new ni(this.connection,o).build()]}}var si=__webpack_require__(17915);class oi{constructor(e){this.options=e}logQuery(e,t,n){if("all"===this.options||!0===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("query")){const n=e+(t&&t.length?" -- PARAMETERS: "+this.stringifyParams(t):"");console.log("query: "+n)}}logQueryError(e,t,n,r){if("all"===this.options||!0===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("error")){const r=t+(n&&n.length?" -- PARAMETERS: "+this.stringifyParams(n):"");console.log("query failed: "+r),console.log("error:",e)}}logQuerySlow(e,t,n,r){const i=t+(n&&n.length?" -- PARAMETERS: "+this.stringifyParams(n):"");console.log("query is slow: "+i),console.log("execution time: "+e)}logSchemaBuild(e,t){("all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("schema"))&&console.log(e)}logMigration(e,t){console.log(e)}log(e,t,n){switch(e){case"log":("all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("log"))&&console.log(t);break;case"info":("all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("info"))&&console.info(t);break;case"warn":("all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("warn"))&&console.warn(t)}}stringifyParams(e){try{return JSON.stringify(e)}catch(t){return e}}}class ci{constructor(e){this.options=e}logQuery(e,t,n){if("all"===this.options||!0===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("query")){const n=e+(t&&t.length?" -- PARAMETERS: "+this.stringifyParams(t):"");nt.logInfo("query:",nt.highlightSql(n))}}logQueryError(e,t,n,r){if("all"===this.options||!0===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("error")){const r=t+(n&&n.length?" -- PARAMETERS: "+this.stringifyParams(n):"");nt.logError("query failed:",nt.highlightSql(r)),nt.logError("error:",e)}}logQuerySlow(e,t,n,r){const i=t+(n&&n.length?" -- PARAMETERS: "+this.stringifyParams(n):"");nt.logWarn("query is slow:",nt.highlightSql(i)),nt.logWarn("execution time:",e)}logSchemaBuild(e,t){("all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("schema"))&&nt.log(e)}logMigration(e,t){nt.log(e)}log(e,t,n){switch(e){case"log":("all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("log"))&&nt.log(t);break;case"info":("all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("info"))&&nt.logInfo("INFO:",t);break;case"warn":("all"===this.options||Array.isArray(this.options)&&-1!==this.options.indexOf("warn"))&&console.warn(nt.warn(t))}}stringifyParams(e){try{return JSON.stringify(e)}catch(t){return e}}}class li{logQuery(){throw new Error("This logger is not applicable in a browser context")}logQueryError(){throw new Error("This logger is not applicable in a browser context")}logQuerySlow(){throw new Error("This logger is not applicable in a browser context")}logSchemaBuild(){throw new Error("This logger is not applicable in a browser context")}logMigration(){throw new Error("This logger is not applicable in a browser context")}log(){throw new Error("This logger is not applicable in a browser context")}}class ui extends li{}var di=__webpack_require__(20124),hi=__webpack_require__.n(di);class pi{constructor(){this.debugQueryLog=hi()("typeorm:query:log"),this.debugQueryError=hi()("typeorm:query:error"),this.debugQuerySlow=hi()("typeorm:query:slow"),this.debugSchemaBuild=hi()("typeorm:schema"),this.debugMigration=hi()("typeorm:migration"),this.debugLog=hi()("typeorm:log"),this.debugInfo=hi()("typeorm:info"),this.debugWarn=hi()("typeorm:warn")}logQuery(e,t,n){this.debugQueryLog.enabled&&(this.debugQueryLog(nt.highlightSql(e)+";"),t&&t.length&&this.debugQueryLog("parameters:",t))}logQueryError(e,t,n,r){this.debugQueryError.enabled&&(this.debugQueryError(nt.highlightSql(t)+";"),n&&n.length&&this.debugQueryError("parameters:",n),this.debugQueryError("error: ",e))}logQuerySlow(e,t,n,r){this.debugQuerySlow.enabled&&(this.debugQuerySlow(nt.highlightSql(t)+";"),n&&n.length&&this.debugQuerySlow("parameters:",n),this.debugQuerySlow("execution time:",e))}logSchemaBuild(e,t){this.debugSchemaBuild.enabled&&this.debugSchemaBuild(e)}logMigration(e,t){this.debugMigration.enabled&&this.debugMigration(e)}log(e,t,n){switch(e){case"log":this.debugLog.enabled&&this.debugLog(t);break;case"info":this.debugInfo.enabled&&this.debugInfo(t);break;case"warn":this.debugWarn.enabled&&this.debugWarn(t)}}}class fi{create(e,t){if(qt.B.isObject(e))return e;if(e)switch(e){case"simple-console":return new oi(t);case"file":return new ui(t);case"advanced-console":return new ci(t);case"debug":return new pi}return new ci(t)}}class mi{constructor(e,t){this.connection=e,this.clientType=t,this.redis=this.loadRedis()}async connect(){const e=this.connection.options.cache;if("redis"===this.clientType)this.client=this.redis.createClient({...null==e?void 0:e.options,legacyMode:!0}),"object"==typeof this.connection.options.cache&&this.connection.options.cache.ignoreErrors&&this.client.on("error",(e=>{this.connection.logger.log("warn",e)})),"connect"in this.client&&await this.client.connect();else if("ioredis"===this.clientType)e&&e.port?e.options?this.client=new this.redis(e.port,e.options):this.client=new this.redis(e.port):e&&e.options?this.client=new this.redis(e.options):this.client=new this.redis;else if("ioredis/cluster"===this.clientType)if(e&&e.options&&Array.isArray(e.options))this.client=new this.redis.Cluster(e.options);else{if(!(e&&e.options&&e.options.startupNodes))throw new It.V(`options.startupNodes required for ${this.clientType}.`);this.client=new this.redis.Cluster(e.options.startupNodes,e.options.options)}}async disconnect(){return new Promise(((e,t)=>{this.client.quit(((n,r)=>{if(n)return t(n);e(),this.client=void 0}))}))}async synchronize(e){}getFromCache(e,t){return new Promise(((t,n)=>{e.identifier?this.client.get(e.identifier,((e,r)=>{if(e)return n(e);t(JSON.parse(r))})):e.query?this.client.get(e.query,((e,r)=>{if(e)return n(e);t(JSON.parse(r))})):t(void 0)}))}isExpired(e){return e.time+e.duration<(new Date).getTime()}async storeInCache(e,t,n){return new Promise(((t,n)=>{e.identifier?this.client.set(e.identifier,JSON.stringify(e),"PX",e.duration,((e,r)=>{if(e)return n(e);t()})):e.query&&this.client.set(e.query,JSON.stringify(e),"PX",e.duration,((e,r)=>{if(e)return n(e);t()}))}))}async clear(e){return new Promise(((e,t)=>{this.client.flushdb(((n,r)=>{if(n)return t(n);e()}))}))}async remove(e,t){await Promise.all(e.map((e=>this.deleteKey(e))))}deleteKey(e){return new Promise(((t,n)=>{this.client.del(e,((e,r)=>{if(e)return n(e);t()}))}))}loadRedis(){try{return"ioredis/cluster"===this.clientType?nt.load("ioredis"):nt.load(this.clientType)}catch(e){throw new It.V(`Cannot use cache because ${this.clientType} is not installed. Please run "npm i ${this.clientType} --save".`)}}}var yi=__webpack_require__(77981);class gi{constructor(e){this.connection=e;const{schema:t}=this.connection.driver.options,n=this.connection.driver.database,r=("object"==typeof this.connection.options.cache?this.connection.options.cache:{}).tableName||"query-result-cache";this.queryResultCacheDatabase=n,this.queryResultCacheSchema=t,this.queryResultCacheTable=this.connection.driver.buildTableName(r,t,n)}async connect(){}async disconnect(){}async synchronize(e){e=this.getQueryRunner(e);const t=this.connection.driver;await e.hasTable(this.queryResultCacheTable)||await e.createTable(new ft({database:this.queryResultCacheDatabase,schema:this.queryResultCacheSchema,name:this.queryResultCacheTable,columns:[{name:"id",isPrimary:!0,isNullable:!1,type:t.normalizeType({type:t.mappedDataTypes.cacheId}),generationStrategy:"spanner"===t.options.type?"uuid":"increment",isGenerated:!0},{name:"identifier",type:t.normalizeType({type:t.mappedDataTypes.cacheIdentifier}),isNullable:!0},{name:"time",type:t.normalizeType({type:t.mappedDataTypes.cacheTime}),isPrimary:!1,isNullable:!1},{name:"duration",type:t.normalizeType({type:t.mappedDataTypes.cacheDuration}),isPrimary:!1,isNullable:!1},{name:"query",type:t.normalizeType({type:t.mappedDataTypes.cacheQuery}),isPrimary:!1,isNullable:!1},{name:"result",type:t.normalizeType({type:t.mappedDataTypes.cacheResult}),isNullable:!1}]}))}getFromCache(e,t){t=this.getQueryRunner(t);const n=this.connection.createQueryBuilder(t).select().from(this.queryResultCacheTable,"cache");return e.identifier?n.where(`${n.escape("cache")}.${n.escape("identifier")} = :identifier`).setParameters({identifier:"mssql"===this.connection.driver.options.type?new yt(e.identifier,"nvarchar"):e.identifier}).getRawOne():e.query?"oracle"===this.connection.driver.options.type?n.where(`dbms_lob.compare(${n.escape("cache")}.${n.escape("query")}, :query) = 0`,{query:e.query}).getRawOne():n.where(`${n.escape("cache")}.${n.escape("query")} = :query`).setParameters({query:"mssql"===this.connection.driver.options.type?new yt(e.query,"nvarchar"):e.query}).getRawOne():Promise.resolve(void 0)}isExpired(e){const t="string"==typeof e.duration?parseInt(e.duration):e.duration;return("string"==typeof e.time?parseInt(e.time):e.time)+t<(new Date).getTime()}async storeInCache(e,t,n){const r=void 0===n||"slave"===(null==n?void 0:n.getReplicationMode());(void 0===n||r)&&(n=this.connection.createQueryRunner("master"));let i=e;if("mssql"===this.connection.driver.options.type&&(i={identifier:new yt(e.identifier,"nvarchar"),time:new yt(e.time,"bigint"),duration:new yt(e.duration,"int"),query:new yt(e.query,"nvarchar"),result:new yt(e.result,"nvarchar")}),t&&t.identifier){const e=n.manager.createQueryBuilder().update(this.queryResultCacheTable).set(i);e.where(`${e.escape("identifier")} = :condition`,{condition:i.identifier}),await e.execute()}else if(t&&t.query){const e=n.manager.createQueryBuilder().update(this.queryResultCacheTable).set(i);"oracle"===this.connection.driver.options.type?e.where('dbms_lob.compare("query", :condition) = 0',{condition:i.query}):e.where(`${e.escape("query")} = :condition`,{condition:i.query}),await e.execute()}else"spanner"!==this.connection.driver.options.type||i.id||(i.id=(0,yi.A)()),await n.manager.createQueryBuilder().insert().into(this.queryResultCacheTable).values(i).execute();r&&await n.release()}async clear(e){return this.getQueryRunner(e).clearTable(this.queryResultCacheTable)}async remove(e,t){let n=t||this.getQueryRunner();await Promise.all(e.map((e=>{const t=n.manager.createQueryBuilder();return t.delete().from(this.queryResultCacheTable).where(`${t.escape("identifier")} = :identifier`,{identifier:e}).execute()}))),t||await n.release()}getQueryRunner(e){return e||this.connection.createQueryRunner()}}class bi{constructor(e){this.connection=e}create(){if(!this.connection.options.cache)throw new It.V("To use cache you need to enable it in connection options by setting cache: true or providing some caching options. Example: { host: ..., username: ..., cache: true }");const e=this.connection.options.cache;return e.provider&&"function"==typeof e.provider?e.provider(this.connection):"redis"===e.type||"ioredis"===e.type||"ioredis/cluster"===e.type?new mi(this.connection,e.type):new gi(this.connection)}}class vi{constructor(e){this.connection=e}load(e,t,n,r){return n&&n.isReleased&&(n=void 0),e.isManyToOne||e.isOneToOneOwner?this.loadManyToOneOrOneToOneOwner(e,t,n,r):e.isOneToMany||e.isOneToOneNotOwner?this.loadOneToManyOrOneToOneNotOwner(e,t,n,r):e.isManyToManyOwner?this.loadManyToManyOwner(e,t,n,r):this.loadManyToManyNotOwner(e,t,n,r)}loadManyToOneOrOneToOneOwner(e,t,n,r){const i=Array.isArray(t)?t:[t],a=e.entityMetadata.name,s=r||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.type,e.propertyName),o=s.expressionMap.mainAlias.name,c=e.entityMetadata.primaryColumns,l=(e.isOwning?e.joinColumns:e.inverseRelation.joinColumns).map((t=>`${e.entityMetadata.name}.${t.propertyName} = ${o}.${t.referencedColumn.propertyName}`)).join(" AND ");if(s.innerJoin(e.entityMetadata.target,a,l),1===c.length)s.where(`${a}.${c[0].propertyPath} IN (:...${a+"_"+c[0].propertyName})`),s.setParameter(a+"_"+c[0].propertyName,i.map((e=>c[0].getEntityValue(e,!0))));else{const e=i.map(((e,t)=>c.map(((n,r)=>{const i=a+"_entity_"+t+"_"+r;return s.setParameter(i,n.getEntityValue(e,!0)),a+"."+n.propertyPath+" = :"+i})).join(" AND "))).map((e=>"("+e+")")).join(" OR ");s.where(e)}return Ot.H.joinEagerRelations(s,s.alias,s.expressionMap.mainAlias.metadata),s.getMany()}loadOneToManyOrOneToOneNotOwner(e,t,n,r){const i=Array.isArray(t)?t:[t],a=e.inverseRelation.joinColumns,s=r||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.inverseRelation.entityMetadata.target,e.propertyName),o=s.expressionMap.mainAlias.name;if(1===a.length)s.where(`${o}.${a[0].propertyPath} IN (:...${o+"_"+a[0].propertyName})`),s.setParameter(o+"_"+a[0].propertyName,i.map((e=>a[0].referencedColumn.getEntityValue(e,!0))));else{const e=i.map(((e,t)=>a.map(((n,r)=>{const i=o+"_entity_"+t+"_"+r;return s.setParameter(i,n.referencedColumn.getEntityValue(e,!0)),o+"."+n.propertyPath+" = :"+i})).join(" AND "))).map((e=>"("+e+")")).join(" OR ");s.where(e)}return Ot.H.joinEagerRelations(s,s.alias,s.expressionMap.mainAlias.metadata),s.getMany()}loadManyToManyOwner(e,t,n,r){const i=Array.isArray(t)?t:[t],a=e.joinColumns.reduce(((e,t)=>(e[t.propertyName]=i.map((e=>t.referencedColumn.getEntityValue(e,!0))),e)),{}),s=r||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.type,e.propertyName),o=s.expressionMap.mainAlias.name,c=e.junctionEntityMetadata.tableName,l=e.joinColumns.map((e=>`${c}.${e.propertyName} IN (:...${e.propertyName})`)),u=e.inverseJoinColumns.map((e=>`${c}.${e.propertyName}=${o}.${e.referencedColumn.propertyName}`));return s.innerJoin(c,c,[...l,...u].join(" AND ")).setParameters(a),Ot.H.joinEagerRelations(s,s.alias,s.expressionMap.mainAlias.metadata),s.getMany()}loadManyToManyNotOwner(e,t,n,r){const i=Array.isArray(t)?t:[t],a=r||this.connection.createQueryBuilder(n).select(e.propertyName).from(e.type,e.propertyName),s=a.expressionMap.mainAlias.name,o=e.junctionEntityMetadata.tableName,c=e.inverseRelation.joinColumns.map((e=>`${o}.${e.propertyName} = ${s}.${e.referencedColumn.propertyName}`)),l=e.inverseRelation.inverseJoinColumns.map((e=>`${o}.${e.propertyName} IN (:...${e.propertyName})`)),u=e.inverseRelation.inverseJoinColumns.reduce(((e,t)=>(e[t.propertyName]=i.map((e=>t.referencedColumn.getEntityValue(e,!0))),e)),{});return a.innerJoin(o,o,[...c,...l].join(" AND ")).setParameters(u),Ot.H.joinEagerRelations(a,a.alias,a.expressionMap.mainAlias.metadata),a.getMany()}enableLazyLoad(e,t,n){const r=this,i="__"+e.propertyName+"__",a="__promise_"+e.propertyName+"__",s="__has_"+e.propertyName+"__",o=(e,t)=>(e[i]=t,e[s]=!0,delete e[a],t),c=(e,t)=>(delete e[s],delete e[i],e[a]=t,t.then((n=>e[a]===t?o(e,n):n)),t);Object.defineProperty(t,e.propertyName,{get:function(){if(!0===this[s]||void 0!==this[i])return Promise.resolve(this[i]);if(this[a])return this[a];const t=r.load(e,this,n).then((t=>e.isOneToOne||e.isManyToOne?0===t.length?null:t[0]:t));return c(this,t)},set:function(e){e instanceof Promise?c(this,e):o(this,e)},configurable:!0})}}class wi{constructor(e){this.connection=e}load(e,t,n){const r=Array.isArray(t)?t:[t],i=Array.isArray(n)?n:n?[n]:void 0;return e.isManyToMany?this.loadForManyToMany(e,r,i):e.isManyToOne||e.isOneToOneOwner?this.loadForManyToOneAndOneToOneOwner(e,r,i):this.loadForOneToManyAndOneToOneNotOwner(e,r,i)}async loadManyToManyRelationIdsAndGroup(e,t,n,r){const i=e.isManyToMany||e.isOneToMany,a=Array.isArray(t)?t:[t];if(!n&&!(n=await this.connection.relationLoader.load(e,t,void 0,r)).length)return a.map((e=>({entity:e,related:i?[]:void 0})));const s=await this.load(e,t,n),o=Array.isArray(n)?n:[n];let c=[],l=[];return e.isManyToManyOwner?(c=e.junctionEntityMetadata.inverseColumns.map((e=>e.referencedColumn)),l=e.junctionEntityMetadata.ownerColumns.map((e=>e.referencedColumn))):e.isManyToManyNotOwner?(c=e.junctionEntityMetadata.ownerColumns.map((e=>e.referencedColumn)),l=e.junctionEntityMetadata.inverseColumns.map((e=>e.referencedColumn))):e.isManyToOne||e.isOneToOneOwner?(c=e.joinColumns.map((e=>e.referencedColumn)),l=e.entityMetadata.primaryColumns):(e.isOneToMany||e.isOneToOneNotOwner)&&(c=e.inverseRelation.entityMetadata.primaryColumns,l=e.inverseRelation.joinColumns.map((e=>e.referencedColumn))),a.map((t=>{const n={entity:t,related:i?[]:void 0},r=s.filter((e=>l.every((n=>n.compareEntityValue(t,e[n.entityMetadata.name+"_"+n.propertyAliasName])))));return r.length?(o.forEach((t=>{r.forEach((r=>{c.every((n=>n.compareEntityValue(t,r[n.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+n.propertyPath.replace(".","_")])))&&(i?n.related.push(t):n.related=t)}))})),n):n}))}loadForManyToMany(e,t,n){const r=e.junctionEntityMetadata,i=r.name,a=e.isOwning?r.ownerColumns:r.inverseColumns,s=e.isOwning?r.inverseColumns:r.ownerColumns,o=this.connection.createQueryBuilder();a.forEach((e=>{const t=e.referencedColumn.entityMetadata.name+"_"+e.referencedColumn.propertyPath.replace(".","_");o.addSelect(i+"."+e.propertyPath,t)})),s.forEach((t=>{const n=t.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+t.referencedColumn.propertyPath.replace(".","_");o.addSelect(i+"."+t.propertyPath,n)}));let c="";if(1===a.length){const e=t.map((e=>a[0].referencedColumn.getEntityValue(e)));e.every((e=>"number"==typeof e))?c=`${i}.${a[0].propertyPath} IN (${e.join(", ")})`:(o.setParameter("values1",e),c=i+"."+a[0].propertyPath+" IN (:...values1)")}else c="("+t.map(((e,t)=>a.map((n=>{const r="entity1_"+t+"_"+n.propertyName;return o.setParameter(r,n.referencedColumn.getEntityValue(e)),i+"."+n.propertyPath+" = :"+r})).join(" AND "))).map((e=>"("+e+")")).join(" OR ")+")";let l="";if(n)if(1===s.length){const e=n.map((e=>s[0].referencedColumn.getEntityValue(e)));e.every((e=>"number"==typeof e))?l=`${i}.${s[0].propertyPath} IN (${e.join(", ")})`:(o.setParameter("values2",e),l=i+"."+s[0].propertyPath+" IN (:...values2)")}else l="("+n.map(((e,t)=>s.map((n=>{const r="entity2_"+t+"_"+n.propertyName;return o.setParameter(r,n.referencedColumn.getEntityValue(e)),i+"."+n.propertyPath+" = :"+r})).join(" AND "))).map((e=>"("+e+")")).join(" OR ")+")";const u=[c,l].filter((e=>e.length>0)).join(" AND ");return o.from(r.target,i).where(u).getRawMany()}loadForManyToOneAndOneToOneOwner(e,t,n){const r=e.entityMetadata.targetName,i=e.joinColumns.every((t=>!!e.entityMetadata.nonVirtualColumns.find((e=>e===t))));if(n&&i){let r=[];if(t.forEach((t=>{let i={};e.entityMetadata.primaryColumns.forEach((e=>{const n=e.entityMetadata.name+"_"+e.propertyPath.replace(".","_");i[n]=e.getEntityValue(t)})),n.forEach((n=>{e.joinColumns.forEach((r=>{const a=r.getEntityValue(t),s=r.referencedColumn.getEntityValue(n);if(void 0!==a&&void 0!==s&&a===s){const t=r.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+r.referencedColumn.propertyPath.replace(".","_");i[t]=s}}))})),Object.keys(i).length===e.entityMetadata.primaryColumns.length+e.joinColumns.length&&r.push(i)})),r.length===t.length)return Promise.resolve(r)}const a=this.connection.createQueryBuilder();e.entityMetadata.primaryColumns.forEach((e=>{const t=e.entityMetadata.name+"_"+e.propertyPath.replace(".","_");a.addSelect(r+"."+e.propertyPath,t)})),e.joinColumns.forEach((t=>{const n=t.referencedColumn.entityMetadata.name+"_"+e.propertyPath.replace(".","_")+"_"+t.referencedColumn.propertyPath.replace(".","_");a.addSelect(r+"."+t.propertyPath,n)}));let s="";if(1===e.entityMetadata.primaryColumns.length){const n=t.map((t=>e.entityMetadata.primaryColumns[0].getEntityValue(t)));n.every((e=>"number"==typeof e))?s=`${r}.${e.entityMetadata.primaryColumns[0].propertyPath} IN (${n.join(", ")})`:(a.setParameter("values",n),s=r+"."+e.entityMetadata.primaryColumns[0].propertyPath+" IN (:...values)")}else s=t.map(((t,n)=>e.entityMetadata.primaryColumns.map(((e,i)=>{const s="entity"+n+"_"+i;return a.setParameter(s,e.getEntityValue(t)),r+"."+e.propertyPath+" = :"+s})).join(" AND "))).map((e=>"("+e+")")).join(" OR ");return a.from(e.entityMetadata.target,r).where(s).getRawMany()}loadForOneToManyAndOneToOneNotOwner(e,t,n){if((e=e.inverseRelation).entityMetadata.primaryColumns.length===e.joinColumns.length){if(e.entityMetadata.primaryColumns.every((t=>-1!==e.joinColumns.indexOf(t))))return Promise.resolve(t.map((t=>{const n={};return e.joinColumns.forEach((function(r){const i=r.referencedColumn.getEntityValue(t),a=r.referencedColumn.entityMetadata.name+"_"+r.referencedColumn.propertyPath.replace(".","_"),s=r.entityMetadata.name+"_"+e.inverseRelation.propertyPath.replace(".","_")+"_"+r.propertyPath.replace(".","_");n[a]=i,n[s]=i})),n})))}const r=e.entityMetadata.targetName,i=this.connection.createQueryBuilder();e.entityMetadata.primaryColumns.forEach((t=>{const n=t.entityMetadata.name+"_"+e.inverseRelation.propertyPath.replace(".","_")+"_"+t.propertyPath.replace(".","_");i.addSelect(r+"."+t.propertyPath,n)})),e.joinColumns.forEach((e=>{const t=e.referencedColumn.entityMetadata.name+"_"+e.referencedColumn.propertyPath.replace(".","_");i.addSelect(r+"."+e.propertyPath,t)}));let a="";if(1===e.joinColumns.length){const n=t.map((t=>e.joinColumns[0].referencedColumn.getEntityValue(t)));n.every((e=>"number"==typeof e))?a=`${r}.${e.joinColumns[0].propertyPath} IN (${n.join(", ")})`:(i.setParameter("values",n),a=r+"."+e.joinColumns[0].propertyPath+" IN (:...values)")}else a=t.map(((t,n)=>e.joinColumns.map(((e,a)=>{const s="entity"+n+"_"+a;return i.setParameter(s,e.referencedColumn.getEntityValue(t)),r+"."+e.propertyPath+" = :"+s})).join(" AND "))).map((e=>"("+e+")")).join(" OR ");return i.from(e.entityMetadata.target,r).where(a).getRawMany()}}class Ei{constructor(e){this["@instanceof"]=Symbol.for("DataSource"),this.migrations=[],this.subscribers=[],this.entityMetadatas=[],this.name=e.name||"default",this.options=e,this.logger=(new fi).create(this.options.logger,this.options.logging),this.driver=(new Lr).create(this),this.manager=this.createEntityManager(),this.namingStrategy=e.namingStrategy||new at,this.metadataTableName=e.metadataTableName||"typeorm_metadata",this.queryResultCache=e.cache?new bi(this).create():void 0,this.relationLoader=new vi(this),this.relationIdLoader=new wi(this),this.isInitialized=!1}get isConnected(){return this.isInitialized}get mongoManager(){if(!gt.t.isMongoEntityManager(this.manager))throw new st.VR("MongoEntityManager is only available for MongoDB databases.");return this.manager}get sqljsManager(){if(!gt.t.isSqljsEntityManager(this.manager))throw new st.VR("SqljsEntityManager is only available for Sqljs databases.");return this.manager}setOptions(e){return Object.assign(this.options,e),(e.logger||e.logging)&&(this.logger=(new fi).create(e.logger||this.options.logger,e.logging||this.options.logging)),e.namingStrategy&&(this.namingStrategy=e.namingStrategy),e.cache&&(this.queryResultCache=new bi(this).create()),this}async initialize(){if(this.isInitialized)throw new st.tX(this.name);await this.driver.connect(),this.queryResultCache&&await this.queryResultCache.connect(),qt.B.assign(this,{isInitialized:!0});try{await this.buildMetadatas(),await this.driver.afterConnect(),this.options.dropSchema&&await this.dropDatabase(),this.options.migrationsRun&&await this.runMigrations({transaction:this.options.migrationsTransactionMode}),this.options.synchronize&&await this.synchronize()}catch(e){throw await this.close(),e}return this}async connect(){return this.initialize()}async destroy(){if(!this.isInitialized)throw new st.Xp(this.name);await this.driver.disconnect(),this.queryResultCache&&await this.queryResultCache.disconnect(),qt.B.assign(this,{isInitialized:!1})}async close(){return this.destroy()}async synchronize(e=!1){if(!this.isInitialized)throw new st.Xp(this.name);e&&await this.dropDatabase();const t=this.driver.createSchemaBuilder();await t.build()}async dropDatabase(){const e=this.createQueryRunner();try{if("mssql"===this.driver.options.type||Nt.I.isMySQLFamily(this.driver)||"aurora-mysql"===this.driver.options.type||Nt.I.isSQLiteFamily(this.driver)){const t=[];if(this.entityMetadatas.forEach((e=>{e.database&&-1===t.indexOf(e.database)&&t.push(e.database)})),0===t.length&&this.driver.database&&t.push(this.driver.database),0===t.length)await e.clearDatabase();else for(const n of t)await e.clearDatabase(n)}else await e.clearDatabase()}finally{await e.release()}}async runMigrations(e){if(!this.isInitialized)throw new st.Xp(this.name);const t=new bt(this);t.transaction=e&&e.transaction||"all",t.fake=e&&e.fake||!1;return await t.executePendingMigrations()}async undoLastMigration(e){if(!this.isInitialized)throw new st.Xp(this.name);const t=new bt(this);t.transaction=e&&e.transaction||"all",t.fake=e&&e.fake||!1,await t.undoLastMigration()}async showMigrations(){if(!this.isInitialized)throw new st.Xp(this.name);const e=new bt(this);return await e.showMigrations()}hasMetadata(e){return!!this.findMetadata(e)}getMetadata(e){const t=this.findMetadata(e);if(!t)throw new st.Yg(e);return t}getRepository(e){return this.manager.getRepository(e)}getTreeRepository(e){return this.manager.getTreeRepository(e)}getMongoRepository(e){if("mongodb"!==this.driver.options.type)throw new st.VR("You can use getMongoRepository only for MongoDB connections.");return this.manager.getRepository(e)}getCustomRepository(e){return this.manager.getCustomRepository(e)}async transaction(e,t){const n=(t||{}).entitiesToLock;return this.manager.transaction(e,t,n)}async query(e,t,n){if(gt.t.isMongoEntityManager(this.manager))throw new st.VR("Queries aren't supported by MongoDB.");if(n&&n.isReleased)throw new st.hz;const r=n||this.createQueryRunner();try{return await r.query(e,t)}finally{n||await r.release()}}createQueryBuilder(e,t,n){if(gt.t.isMongoEntityManager(this.manager))throw new st.VR("Query Builder is not supported by MongoDB.");if(t){t=Nt.I.buildAlias(this.driver,t);const r=this.getMetadata(e);return new si.w(this,n).select(t).from(r.target,t)}return new si.w(this,e)}createQueryRunner(e="master"){const t=this.driver.createQueryRunner(e),n=this.createEntityManager(t);return Object.assign(t,{manager:n}),t}getManyToManyMetadata(e,t){const n=this.getMetadata(e).findRelationWithPropertyPath(t);if(!n)throw new st.VR(`Relation "${t}" was not found in ${e} entity.`);if(!n.isManyToMany)throw new st.VR(`Relation "${e}#${t}" does not have a many-to-many relationship.You can use this method only on many-to-many relations.`);return n.junctionEntityMetadata}createEntityManager(e){return(new Fn).create(this,e)}findMetadata(e){return this.entityMetadatas.find((t=>t.target===e||(gt.t.isEntitySchema(e)?t.name===e.options.name:"string"==typeof e?-1!==e.indexOf(".")?t.tablePath===e:t.name===e||t.tableName===e:!(!qt.B.isObject(e)||"string"!=typeof e.name)&&(-1!==e.name.indexOf(".")?t.tablePath===e.name:t.name===e.name||t.tableName===e.name))))}async buildMetadatas(){const e=new ai(this),t=new Ct,n=qt.B.mixedListToArray(this.options.subscribers||[]),r=await e.buildSubscribers(n);qt.B.assign(this,{subscribers:r});const i=qt.B.mixedListToArray(this.options.entities||[]),a=await e.buildEntityMetadatas(i);qt.B.assign(this,{entityMetadatas:a});const s=qt.B.mixedListToArray(this.options.migrations||[]),o=await e.buildMigrations(s);qt.B.assign(this,{migrations:o}),t.validateMany(this.entityMetadatas.filter((e=>"view"!==e.tableType)),this.driver);for(let e of a)gt.t.isBaseEntityConstructor(e.target)&&e.target.useDataSource(this)}}__webpack_require__(1430),__webpack_require__(47037);function _i(){const e=nt.getGlobalVariable();return e.typeormMetadataArgsStorage||(e.typeormMetadataArgsStorage=new tt),e.typeormMetadataArgsStorage}var Si=__webpack_require__(80345);function Ti(e,t){return function(n,r){let i;"string"==typeof e||"function"==typeof e?i=e:e&&(t=e,i=e.type),t||(t={});const a=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",n,r):void 0;if(!i&&a&&(i=a),!t.type&&i&&(t.type=i),"hstore"!==t.type||t.hstoreType||(t.hstoreType=a===Object?"object":"string"),"function"==typeof e)_i().embeddeds.push({target:n.constructor,propertyName:r,isArray:a===Array||!0===t.array,prefix:void 0!==t.prefix?t.prefix:void 0,type:e});else{if(!t.type)throw new Si.N(n,r);!0===t.unique&&_i().uniques.push({target:n.constructor,columns:[r]}),_i().columns.push({target:n.constructor,propertyName:r,mode:"regular",options:t}),t.generated&&_i().generations.push({target:n.constructor,propertyName:r,strategy:"string"==typeof t.generated?t.generated:"increment"})}}}var Ai=__webpack_require__(52806);function Ni(e,t){return function(n,r){let i;"string"==typeof e||e===String||e===Boolean||e===Number?i=e:t=Object.assign({},e),t||(t={});const a=Reflect&&Reflect.getMetadata?Reflect.getMetadata("design:type",n,r):void 0;if(!i&&a&&(i=a),!t.type&&i&&(t.type=i),!t.type)throw new Si.N(n,r);if(t.nullable)throw new Ai.k(n,r);t.primary=!0,_i().columns.push({target:n.constructor,propertyName:r,mode:"regular",options:t}),t.generated&&_i().generations.push({target:n.constructor,propertyName:r,strategy:"string"==typeof t.generated?t.generated:"increment"})}}function Ci(e,t){const n=(qt.B.isObject(e)?e:t)||{},r="string"==typeof e?e:n.name;return function(e){_i().tables.push({target:e,name:r,type:"regular",orderBy:n.orderBy?n.orderBy:void 0,engine:n.engine?n.engine:void 0,database:n.database?n.database:void 0,schema:n.schema?n.schema:void 0,synchronize:n.synchronize,withoutRowid:n.withoutRowid})}}function Mi(e,t,n){const r="string"==typeof e?e:void 0,i="string"==typeof e?t:e;let a=qt.B.isObject(e)&&!Array.isArray(e)?e:n;return a||(a=qt.B.isObject(t)&&!Array.isArray(t)?t:n),function(e,t){_i().indices.push({target:t?e.constructor:e,name:r,columns:t?[t]:i,synchronize:!a||!1!==a.synchronize,where:a?a.where:void 0,unique:!(!a||!a.unique),spatial:!(!a||!a.spatial),fulltext:!(!a||!a.fulltext),nullFiltered:!(!a||!a.nullFiltered),parser:a?a.parser:void 0,sparse:!(!a||!a.sparse),background:!(!a||!a.background),expireAfterSeconds:a?a.expireAfterSeconds:void 0})}}Dn.q;__webpack_require__(50504),__webpack_require__(7109),__webpack_require__(98947),__webpack_require__(61035),__webpack_require__(29225);var Ri=__webpack_require__(62392);Ri.A;var xi=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},ki=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ii=class{};xi([Ni("varchar"),ki("design:type",String)],Ii.prototype,"id",void 0),xi([Ti("varchar"),ki("design:type",String)],Ii.prototype,"name",void 0),xi([Ti({name:"decimalsStr",type:"varchar"}),ki("design:type",String)],Ii.prototype,"decimalsStr",void 0),xi([Ti("varchar"),ki("design:type",String)],Ii.prototype,"contractAddress",void 0),xi([Ti({name:"chainIdStr",type:"varchar"}),ki("design:type",String)],Ii.prototype,"chainIdStr",void 0),xi([Ti({name:"currencyCodeStr",type:"varchar"}),ki("design:type",String)],Ii.prototype,"currencyCodeStr",void 0),xi([Ti({name:"blockchainStr",type:"varchar"}),ki("design:type",String)],Ii.prototype,"blockchainStr",void 0),xi([Ti({name:"imageURLStr",type:"varchar",nullable:!0}),ki("design:type",String)],Ii.prototype,"imageURLStr",void 0),xi([Ti({name:"lastUpdated",nullable:!0}),ki("design:type",Number)],Ii.prototype,"lastUpdated",void 0),Ii=xi([Ci("erc20"),Mi("IDX_ERC20_ADDR_CHAIN",["contractAddress","chainIdStr"],{unique:!0})],Ii);class Oi{constructor(e,t,n,r,i,a,s,o){this.name=e,this.decimals=t,this.contractAddress=n,this.chainId=r,this.currencyCode=i,this.blockchain=a,this.lastUpdated=s,this.imageURL=o,this.id=function(e,t){return[e,t].join("/")}(n,r.toString())}get asDMO(){return{id:this.id,name:this.name,decimalsStr:this.decimals.toString(),contractAddress:this.contractAddress,chainIdStr:this.chainId.toString(),currencyCodeStr:this.currencyCode.rawValue,blockchainStr:this.blockchain.rawValue,imageURLStr:this.imageURL?.toString(),lastUpdated:this.lastUpdated??Date.now()}}static fromDMO(e){return new Oi(e.name,BigInt(e.decimalsStr),e.contractAddress,BigInt(e.chainIdStr),new k(e.currencyCodeStr),new O(e.blockchainStr),e.lastUpdated??Date.now(),function(e,t){if(e)try{return new URL(e,t)}catch{return}}(e.imageURLStr))}}var Pi;function Li(e){return JSON.stringify(e,((e,t)=>"bigint"==typeof t?`bigint:${t.toString()}`:t))}function Di(e){return JSON.parse(e,((e,t)=>"string"==typeof t&&t.startsWith("bigint:")?BigInt(t.substr(7)):t))}!function(e){e[e.PENDING=1]="PENDING",e[e.FAILED=2]="FAILED",e[e.CONFIRMED=3]="CONFIRMED",e[e.DROPPED=4]="DROPPED",e[e.DROPPED_BY_RELAYER=5]="DROPPED_BY_RELAYER",e[e.REPLACED=6]="REPLACED"}(Pi||(Pi={}));var Bi=__webpack_require__(1048).Buffer;const ji={from:function(e){const t=e?e.split(",").map(Number):[];return Bi.from(new Uint8Array(t))},to:e=>e?.toString()},qi={from:e=>e?Di(e):[],to:e=>Li(e)};__webpack_require__(1048).Buffer;var $i,Ui,Fi=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},Vi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Hi=class{};Fi([Ni(),Vi("design:type",String)],Hi.prototype,"id",void 0),Fi([Ti(),Vi("design:type",String)],Hi.prototype,"fromAddress",void 0),Fi([Ti({nullable:!0}),Vi("design:type",String)],Hi.prototype,"toAddress",void 0),Fi([Ti(),Vi("design:type",String)],Hi.prototype,"nonce",void 0),Fi([Ti({type:"int"}),Vi("design:type",Number)],Hi.prototype,"chainId",void 0),Fi([Ti({type:"varchar",transformer:ji}),Vi("design:type","function"==typeof($i="undefined"!=typeof Uint8Array&&Uint8Array)?$i:Object)],Hi.prototype,"signedTxData",void 0),Fi([Ti(),Vi("design:type",String)],Hi.prototype,"txHash",void 0),Fi([Ti(),Vi("design:type",String)],Hi.prototype,"weiValue",void 0),Fi([Ti({nullable:!0}),Vi("design:type",String)],Hi.prototype,"erc20Value",void 0),Fi([Ti(),Vi("design:type",String)],Hi.prototype,"blockchainStr",void 0),Fi([Ti(),Vi("design:type",String)],Hi.prototype,"currencyCodeStr",void 0),Fi([Ti({type:"int"}),Vi("design:type","function"==typeof(Ui=void 0!==Pi&&Pi)?Ui:Object)],Hi.prototype,"state",void 0),Fi([Ti(),Vi("design:type",String)],Hi.prototype,"notFoundCount",void 0),Hi=Fi([Ci("ethereum_signed_tx"),Mi("IDX_ETH_STATE_CHAIN",["state","chainId"]),Mi("IDX_ETH_STATE_CHAIN_FROM",["state","chainId","fromAddress"]),Mi("IDX_ETH_CHAIN_FROM_NONCE",["chainId","fromAddress","nonce"]),Mi("IDX_ETH_CHAIN_NONCE_FROM_CURR_STATE",["chainId","nonce","fromAddress","currencyCodeStr","state"]),Mi("IDX_ETH_CHAIN_NONCE_FROM_TO_STATE",["chainId","nonce","fromAddress","toAddress","state"]),Mi("IDX_TXHASH",["txHash"])],Hi);__webpack_require__(1048).Buffer;var zi,Wi,Ki=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},Gi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Qi=class{};Ki([Ni(),Gi("design:type",String)],Qi.prototype,"id",void 0),Ki([Ti(),Gi("design:type",String)],Qi.prototype,"fromAddress",void 0),Ki([Ti({nullable:!0}),Gi("design:type",String)],Qi.prototype,"toAddress",void 0),Ki([Ti({type:"int"}),Gi("design:type",Number)],Qi.prototype,"chainId",void 0),Ki([Ti({type:"varchar",transformer:ji}),Gi("design:type","function"==typeof(zi="undefined"!=typeof Uint8Array&&Uint8Array)?zi:Object)],Qi.prototype,"signedTxData",void 0),Ki([Ti(),Gi("design:type",String)],Qi.prototype,"txHash",void 0),Ki([Ti(),Gi("design:type",String)],Qi.prototype,"transferValue",void 0),Ki([Ti(),Gi("design:type",String)],Qi.prototype,"blockchainStr",void 0),Ki([Ti(),Gi("design:type",String)],Qi.prototype,"currencyCodeStr",void 0),Ki([Ti({type:"int"}),Gi("design:type","function"==typeof(Wi=void 0!==Pi&&Pi)?Wi:Object)],Qi.prototype,"state",void 0),Ki([Ti(),Gi("design:type",String)],Qi.prototype,"recentBlockHash",void 0),Ki([Ti({default:0}),Gi("design:type",Number)],Qi.prototype,"lastValidBlockHeight",void 0),Ki([Ti(),Gi("design:type",String)],Qi.prototype,"notFoundCount",void 0),Qi=Ki([Ci("solana_signed_tx"),Mi("IDX_SOL_STATE_CHAIN",["state","chainId"]),Mi("IDX_SOL_HASH_CHAIN",["txHash","chainId"]),Mi("IDX_SOL_HASH_CHAIN_ADDR",["txHash","chainId","fromAddress"]),Mi("IDX_SOL_CHAIN_RECENT_ADDR",["chainId","recentBlockHash","fromAddress"]),Mi("IDX_SOL_CHAIN_RECENT_ADDR_CURR_STATE",["chainId","recentBlockHash","fromAddress","currencyCodeStr","state"]),Mi("IDX_SOL_CHAIN_RECENT_ADDR_TO_STATE",["chainId","recentBlockHash","fromAddress","toAddress","state"])],Qi);var Ji=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},Yi=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Xi=class{};Ji([Ni(),Yi("design:type",String)],Xi.prototype,"id",void 0),Ji([Ti(),Yi("design:type",String)],Xi.prototype,"name",void 0),Ji([Ti(),Yi("design:type",String)],Xi.prototype,"decimalsStr",void 0),Ji([Ti(),Yi("design:type",String)],Xi.prototype,"mintAddress",void 0),Ji([Ti(),Yi("design:type",String)],Xi.prototype,"chainIdStr",void 0),Ji([Ti(),Yi("design:type",String)],Xi.prototype,"currencyCodeStr",void 0),Ji([Ti(),Yi("design:type",String)],Xi.prototype,"blockchainStr",void 0),Ji([Ti({nullable:!0}),Yi("design:type",String)],Xi.prototype,"imageURLStr",void 0),Xi=Ji([Ci("spl"),Mi("IDX_SPL_CHAIN",["chainIdStr"]),Mi("IDX_SPL_ADDR_CHAIN",["mintAddress","chainIdStr"])],Xi);__webpack_require__(1048).Buffer;var Zi,ea,ta=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},na=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ra=class{};ta([Ni(),na("design:type",String)],ra.prototype,"id",void 0),ta([Ti({type:"varchar",transformer:ji}),na("design:type","function"==typeof(Zi="undefined"!=typeof Uint8Array&&Uint8Array)?Zi:Object)],ra.prototype,"signedTransactionData",void 0),ta([Ti(),na("design:type",String)],ra.prototype,"txHash",void 0),ta([Ti(),na("design:type",String)],ra.prototype,"networkStr",void 0),ta([Ti(),na("design:type",String)],ra.prototype,"currencyCodeStr",void 0),ta([Ti(),na("design:type",String)],ra.prototype,"blockchainStr",void 0),ta([Ti({type:"int"}),na("design:type","function"==typeof(ea=void 0!==Pi&&Pi)?ea:Object)],ra.prototype,"state",void 0),ta([Ti(),na("design:type",String)],ra.prototype,"notFoundCount",void 0),ra=ta([Ci("utxo_signed_tx"),Mi("IDX_UTXO_BLOCKCHAIN_CURRENCY_NETWORK_STATE",["blockchainStr","currencyCodeStr","networkStr","state"])],ra);var ia;!function(e){e.standalone="standalone",e.hw_wallet="hw_wallet",e.walletlink="basic",e.dapp_provider="dapp_provider"}(ia||(ia={}));class aa extends I{constructor(e){super({blockchain:e.blockchain,networkSetting:e.networkSetting,refreshInterval:e.refreshInterval,currencyCode:e.currencyCode,decimals:e.decimals,imageURL:e.imageURL,defaultReceiveType:e.defaultReceiveType,supportsMultiWallet:!1,isSyncingRequired:!0}),Object.assign(this,e)}displayName(e){return e.isTestnet?`Testnet ${this.currencyName}`:this.currencyName}}const sa="BTC",oa=new P("BitcoinSegWit"),ca=new P("BitcoinBRDSegWit"),la=new P("BitcoinLegacy"),ua=new P("BitcoinBRDLegacy"),da=new O(sa),ha=le.forMainnetOnlyBlockchain(da);new aa({supportedAddressTypes:[oa,la,ca,ua],blockchain:da,currencyName:"Bitcoin",currencyCode:k.BTC,decimals:8n,imageURL:"https://wallet-api-production.s3.amazonaws.com/uploads/tokens/btc_288.png",defaultReceiveType:oa,txResubmitterInterval:120n,maxSubmissionAttempts:5n,qrCodeUriMainnetScheme:"bitcoin",qrCodeUriTestnetScheme:"bitcoin",networkSetting:ha,refreshInterval:480n,isDerivationPathSupported:function(e,t){switch(e.rawValue){case ua.rawValue:case ca.rawValue:return!t;default:return!0}}});const pa="DOGE",fa=new P("DogeCoin"),ma=new O(pa),ya=le.forMainnetOnlyBlockchain(ma),ga=(new aa({supportedAddressTypes:[fa],blockchain:ma,currencyName:"Dogecoin",currencyCode:new k("DOGE"),decimals:8n,imageURL:"https://wallet-api-production.s3.amazonaws.com/uploads/tokens/doge_288.png",defaultReceiveType:fa,txResubmitterInterval:30n,maxSubmissionAttempts:5n,qrCodeUriMainnetScheme:"dogecoin",qrCodeUriTestnetScheme:"dogecoin",networkSetting:ya,refreshInterval:BigInt(480)}),"LTC"),ba=new P("LitecoinSegwit"),va=new P("LitecoinLegacy"),wa=new P("LitecoinBRD"),Ea=new O(ga),_a=le.forMainnetOnlyBlockchain(Ea);new aa({supportedAddressTypes:[ba,va,wa],blockchain:Ea,currencyName:"Litecoin",currencyCode:new k("LTC"),decimals:8n,imageURL:"https://wallet-api-production.s3.amazonaws.com/uploads/tokens/ltc_288.png",defaultReceiveType:ba,txResubmitterInterval:30n,maxSubmissionAttempts:5n,qrCodeUriMainnetScheme:"litecoin",qrCodeUriTestnetScheme:"litecoin",networkSetting:_a,refreshInterval:BigInt(480),isDerivationPathSupported:function(e,t){return e.rawValue!==wa.rawValue||!t}});var Sa;!function(e){e.MNEMONIC="mnemonic",e.PRIME="prime",e.PRIVATE_KEY="private_key",e.WALLET_LINK="wallet_link",e.LEDGER="ledger",e.TREZOR="trezor",e.DAPP_PROVIDER="dapp_provider",e.SCW="smart_contract_wallet"}(Sa||(Sa={}));Sa.MNEMONIC,Sa.PRIVATE_KEY,Sa.WALLET_LINK,Sa.LEDGER,Sa.TREZOR,Sa.DAPP_PROVIDER,Sa.SCW,Sa.PRIME,Sa.LEDGER,Sa.TREZOR,Sa.PRIVATE_KEY,Sa.SCW,Sa.MNEMONIC,Sa.PRIME,Sa.PRIVATE_KEY,Sa.LEDGER,Sa.TREZOR,Sa.DAPP_PROVIDER,Sa.MNEMONIC,Sa.PRIVATE_KEY,Sa.MNEMONIC,Sa.MNEMONIC;var Ta,Aa,Na=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},Ca=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ma=class{};Na([Ni("varchar"),Ca("design:type",String)],Ma.prototype,"id",void 0),Na([Ti("datetime"),Ca("design:type","function"==typeof(Ta="undefined"!=typeof Date&&Date)?Ta:Object)],Ma.prototype,"createdAt",void 0),Na([Ti("varchar"),Ca("design:type","function"==typeof(Aa=void 0!==Sa&&Sa)?Aa:Object)],Ma.prototype,"type",void 0),Na([Ti("varchar",{nullable:!0}),Ca("design:type",Object)],Ma.prototype,"primaryAddressChain",void 0),Na([Ti("varchar",{nullable:!0}),Ca("design:type",String)],Ma.prototype,"primaryAddress",void 0),Na([Ti(),Ca("design:type",String)],Ma.prototype,"nickname",void 0),Na([Ti({nullable:!0,default:!1}),Ca("design:type",Boolean)],Ma.prototype,"isDeleted",void 0),Na([Ti("boolean",{default:!0}),Ca("design:type",Boolean)],Ma.prototype,"hasCompletedBackupFlow",void 0),Na([Ti("varchar",{nullable:!0}),Ca("design:type",String)],Ma.prototype,"provider",void 0),Na([Ti("varchar",{nullable:!0}),Ca("design:type",String)],Ma.prototype,"dappProviderUserId",void 0),Ma=Na([Ci("account"),Mi("IDX_ACCOUNT",["type","primaryAddress","primaryAddressChain"]),Mi("IDX_ACCOUNT_CreatedAt",["createdAt"])],Ma);var Ra=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},xa=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ka=class{};Ra([Ni(),xa("design:type",String)],ka.prototype,"id",void 0),Ra([Ti(),xa("design:type",String)],ka.prototype,"indexStr",void 0),Ra([Ti(),xa("design:type",String)],ka.prototype,"address",void 0),Ra([Ti({nullable:!0}),xa("design:type",String)],ka.prototype,"balanceStr",void 0),Ra([Ti(),xa("design:type",String)],ka.prototype,"currencyCodeStr",void 0),Ra([Ti(),xa("design:type",String)],ka.prototype,"isChangeAddressStr",void 0),Ra([Ti(),xa("design:type",String)],ka.prototype,"networkStr",void 0),Ra([Ti(),xa("design:type",String)],ka.prototype,"typeStr",void 0),Ra([Ti(),xa("design:type",String)],ka.prototype,"derivationPath",void 0),Ra([Ti(),xa("design:type",String)],ka.prototype,"isUsedStr",void 0),Ra([Ti(),xa("design:type",String)],ka.prototype,"blockchainStr",void 0),Ra([Ti({nullable:!0}),xa("design:type",String)],ka.prototype,"contractAddress",void 0),Ra([Ti({nullable:!0}),xa("design:type",String)],ka.prototype,"accountId",void 0),Ra([Ti({nullable:!0,default:!1}),xa("design:type",Boolean)],ka.prototype,"isDeleted",void 0),ka=Ra([Ci("address"),Mi("IDX_ADDRESS_ADDRESS",["address"]),Mi("IDX_ADDRESS_USEDSTR",["isUsedStr"]),Mi("IDX_ADDRESS_BLOCKCHAIN",["blockchainStr"]),Mi("IDX_ADDRESS_BLOCKCHAIN_CURRENCY_NETWORK_ACCOUNTID",["blockchainStr","currencyCodeStr","networkStr","accountId"]),Mi("IDX_ADDRESS_BLOCKCHAIN_NETWORK_ACCOUNTID",["blockchainStr","networkStr","accountId"]),Mi("IDX_ADDRESS_BLOCKCHAIN_CURRENCY_NETWORK",["blockchainStr","currencyCodeStr","networkStr"]),Mi("IDX_ADDRESS_BLOCKCHAIN_CURRENCY_NETWORK_TYPE",["blockchainStr","currencyCodeStr","networkStr","typeStr","accountId"]),Mi("IDX_ADDRESS_BLOCKCHAIN_CURRENCY_NETWORK_BALANCE",["blockchainStr","currencyCodeStr","networkStr","balanceStr"]),Mi("IDX_ADDRESS_BLOCKCHAIN_NETWORK",["blockchainStr","networkStr"]),Mi("IDX_ADDRESS_BLOCKCHAIN_ADDRESS_NETWORK",["blockchainStr","address","networkStr"]),Mi("IDX_ADDRESS_BLOCKCHAIN_CURR_ADDRESS_NETWORK_ACCOUNTID",["blockchainStr","currencyCodeStr","address","networkStr","accountId"]),Mi("IDX_ADDRESS_BLOCKCHAIN_CURR_NETWORK_USED_ACCOUNTID",["blockchainStr","currencyCodeStr","networkStr","isUsedStr","accountId"]),Mi("IDX_ADDRESS_BLOCKCHAIN_CURR_NETWORK_TYPE_CHANGED_USED_ACCOUNTID",["blockchainStr","currencyCodeStr","networkStr","typeStr","isChangeAddressStr","isUsedStr","accountId"]),Mi("IDX_ADDRESS_BLOCKCHAIN_CURR_NETWORK_TYPE_CHANGED_INDEX_ACCOUNTID",["blockchainStr","currencyCodeStr","networkStr","typeStr","isChangeAddressStr","indexStr","accountId"])],ka);var Ia,Oa;!function(e){e[e.userSpam=0]="userSpam",e[e.userSpamVisible=1]="userSpamVisible",e[e.userVisible=2]="userVisible",e[e.userHidden=3]="userHidden",e[e.spam=100]="spam",e[e.whitelist=101]="whitelist"}(Ia||(Ia={})),function(e){e[e.wallet=0]="wallet",e[e.collectible=1]="collectible"}(Oa||(Oa={}));var Pa,La,Da=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},Ba=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ja=class{};Da([Ni(),Ba("design:type",String)],ja.prototype,"id",void 0),Da([Ti(),Ba("design:type",String)],ja.prototype,"blockchainStr",void 0),Da([Ti(),Ba("design:type",String)],ja.prototype,"currencyCodeStr",void 0),Da([Ti(),Ba("design:type",String)],ja.prototype,"networkStr",void 0),Da([Ti({type:"int"}),Ba("design:type","function"==typeof(Pa=void 0!==Ia&&Ia)?Pa:Object)],ja.prototype,"status",void 0),Da([Ti({type:"int"}),Ba("design:type","function"==typeof(La=void 0!==Oa&&Oa)?La:Object)],ja.prototype,"type",void 0),Da([Ti({nullable:!0}),Ba("design:type",String)],ja.prototype,"contractAddress",void 0),ja=Da([Ci("curated_asset_setting"),Mi("IDX_CURATED_ASSET_SETTINGS",["currencyCodeStr","contractAddress","blockchainStr","networkStr"])],ja);var qa,$a=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},Ua=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Fa=class{};$a([Ni(),Ua("design:type",String)],Fa.prototype,"id",void 0),$a([Ti(),Ua("design:type",String)],Fa.prototype,"blockchainStr",void 0),$a([Ti({type:"int"}),Ua("design:type","function"==typeof(qa=void 0!==Ia&&Ia)?qa:Object)],Fa.prototype,"status",void 0),$a([Ti(),Ua("design:type",String)],Fa.prototype,"networkStr",void 0),$a([Ti(),Ua("design:type",String)],Fa.prototype,"contractAddress",void 0),$a([Ti(),Ua("design:type",String)],Fa.prototype,"primaryAddress",void 0),$a([Ti({nullable:!0}),Ua("design:type",String)],Fa.prototype,"tokenId",void 0),Fa=$a([Ci("user_collectible_setting"),Mi("IDX_USER_COLLECTIBLE_SETTING",["primaryAddress","contractAddress","blockchainStr","networkStr","tokenId"])],Fa);var Va,Ha=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},za=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Wa=class{};Ha([Ni(),za("design:type",String)],Wa.prototype,"id",void 0),Ha([Ti(),za("design:type",String)],Wa.prototype,"blockchainStr",void 0),Ha([Ti(),za("design:type",String)],Wa.prototype,"currencyCodeStr",void 0),Ha([Ti(),za("design:type",String)],Wa.prototype,"networkStr",void 0),Ha([Ti({type:"int"}),za("design:type","function"==typeof(Va=void 0!==Ia&&Ia)?Va:Object)],Wa.prototype,"status",void 0),Ha([Ti({nullable:!0}),za("design:type",String)],Wa.prototype,"contractAddress",void 0),Ha([Ti(),za("design:type",String)],Wa.prototype,"primaryAddress",void 0),Wa=Ha([Ci("user_wallet_setting"),Mi("IDX_PRIMARY_CURRENCY_CONTRACT_BLOCKCHAIN_NETWORK",["primaryAddress","currencyCodeStr","contractAddress","blockchainStr","networkStr"])],Wa);var Ka,Ga,Qa=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},Ja=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Ya=class{};Qa([Ni(),Ja("design:type",String)],Ya.prototype,"id",void 0),Qa([Ti(),Ja("design:type",String)],Ya.prototype,"txHash",void 0),Qa([Ti(),Ja("design:type",String)],Ya.prototype,"networkStr",void 0),Qa([Ti(),Ja("design:type",String)],Ya.prototype,"blockchainStr",void 0),Qa([Ti(),Ja("design:type",String)],Ya.prototype,"accountId",void 0),Qa([Ti(),Ja("design:type",String)],Ya.prototype,"walletIndexStr",void 0),Qa([Ti({type:"datetime"}),Ja("design:type","function"==typeof(Ka="undefined"!=typeof Date&&Date)?Ka:Object)],Ya.prototype,"createdAt",void 0),Qa([Ti({type:"datetime"}),Ja("design:type","function"==typeof(Ga="undefined"!=typeof Date&&Date)?Ga:Object)],Ya.prototype,"updatedAt",void 0),Ya=Qa([Ci("last_synced_tx_hash"),Mi("IDX_BLOCKCHAIN_NETWORK_ACCOUNTID_WALLETINDEX",["blockchainStr","networkStr","accountId","walletIndexStr"],{unique:!0}),Mi("IDX_BLOCKCHAIN_ACCOUNTID_WALLETINDEX",["blockchainStr","accountId","walletIndexStr"])],Ya);var Xa,Za=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},es=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let ts=class{};Za([Ni("varchar"),es("design:type",String)],ts.prototype,"id",void 0),Za([Ti("datetime"),es("design:type","function"==typeof(Xa="undefined"!=typeof Date&&Date)?Xa:Object)],ts.prototype,"createdAt",void 0),Za([Ti("varchar"),es("design:type",String)],ts.prototype,"value",void 0),ts=Za([Ci("secrets")],ts);var ns=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},rs=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let is=class{};ns([Ni(),rs("design:type",String)],is.prototype,"id",void 0),ns([Ti(),rs("design:type",String)],is.prototype,"blockchainStr",void 0),ns([Ti(),rs("design:type",String)],is.prototype,"currencyCodeStr",void 0),ns([Ti({nullable:!0}),rs("design:type",String)],is.prototype,"contractAddressStr",void 0),ns([Ti(),rs("design:type",String)],is.prototype,"chainIdStr",void 0),ns([Ti(),rs("design:type",String)],is.prototype,"selectedCountStr",void 0),is=ns([Ci("swap_asset_stats"),Mi("IDX_SWAP_STATS_ID",["id"]),Mi("IDX_SWAP_STATS_BLOCKCHAIN_CURRENCY_CHAIN_CONTRACT",["blockchainStr","currencyCodeStr","chainIdStr","contractAddressStr"])],is);__webpack_require__(39216);const as=new P(B),ss=new O(j),os=function(){const e=new ce("Solana",H(F.whitelisted.SOLANA_MAINNET)),t=[];for(const e of Object.values(F.whitelisted))isNaN(e.chainId)||t.push(F.fromChainId(BigInt(e.chainId)));const n=[e],r=[];return t.filter((e=>e.chainId!==F.whitelisted.SOLANA_MAINNET.chainId)).map((e=>new ce(e.displayName,H(e)))).sort(((e,t)=>e.name.localeCompare(t.name,"en-US"))).forEach((e=>{const t=new ce(e.name,e.network);e.network.isTestnet?r.push(t):n.push(t)})),new le(ss,e,n,r)}();new class extends I{displayName(){return B}imageURLForNetwork(){return q}currencyCodeForNetwork(){return this.currencyCode}feeDecimalForNetwork(){return this.decimals}}({blockchain:ss,networkSetting:os,refreshInterval:30n,currencyCode:k.SOL,decimals:9n,imageURL:q,defaultReceiveType:as,supportsMultiWallet:!0,isSyncingRequired:!1});new de("solanaSwapStep",ue.string),new We("storedBlockchainDeprecationStatus");const cs=[D,j],ls=[sa,pa,ga];new Map([[D,!0],[j,!0]]),new Map([[sa,!1],[pa,!1],[ga,!1]]);function us(e){return ls.includes(e)}const ds=W()((function(e){return new hs(new Map(e.map((function(e){const t=e.split("//",2),n=de.create(t[0]),r=t[1];let i;switch(n.kind){case ue.string:i=r;break;case ue.bigint:i=BigInt(r);break;case ue.boolean:i=JSON.parse(r);break;case ue.number:i=parseInt(r,10);break;default:throw new Error(`Invalid TxOrUserOpMetadataKey.kind: ${n.kind}`)}return[n,i]}))))}),(function(e){return e.sort().join(",")}));class hs{constructor(e=new Map){this.metadataMap=new Map(Array.from(e.entries()).map((([e,t])=>[e.rawValue,t])))}get(e){return this.metadataMap.get(e.rawValue)}has(e){return this.metadataMap.has(e.rawValue)}get rawValue(){return Array.from(this.metadataMap.entries()).map((([e,t])=>[e,t.toString()].join("//")))}get rawMap(){return this.metadataMap}static isEqual(e,t){const n=e.rawMap,r=t.rawMap;return n.size===r.size&&Array.from(n.entries()).every((([e,t])=>"bigint"==typeof t?t===r.get(e):r.get(e)===t))}static create(e){return ds(e)}toMutableMap(){return new Map(Array.from(this.metadataMap.entries()).map((([e,t])=>[de.create(e),t])))}mergeMetadata(e){const t=new Map(this.toMutableMap());for(const[n,r]of e.toMutableMap().entries())t.set(n,r);return new hs(t)}}class ps{constructor(e,t,n,r,i,a,s){this.baseFeePerGas=e,this.data=t,this.gasLimit=n,this.maxFeePerGas=r,this.maxPriorityFeePerGas=i,this.txSubmissionType=a,this.l1GasFee=s}static isEqual(e,t){return e?t?e.baseFeePerGas===t.baseFeePerGas&&e.data.equals(t.data)&&e.gasLimit===t.gasLimit&&e.maxFeePerGas===t.maxFeePerGas&&e.maxPriorityFeePerGas===t.maxPriorityFeePerGas&&e.txSubmissionType===t.txSubmissionType&&e.l1GasFee===t.l1GasFee:!e:!t}get lowerBoundValue(){return(this.baseFeePerGas+this.maxPriorityFeePerGas)*this.gasLimit+(this.l1GasFee??0n)}}class fs{constructor(e,t,n=void 0){this.txSubmissionType=e,this.feeRate=t,this.utxos=n}static isEqual(e,t){return e?t?e.txSubmissionType===t.txSubmissionType&&e.utxos===t.utxos&&e.feeRate===t.feeRate:!e:!t}}function ms(e,t){const n=void 0===e?"":e,r=void 0===t?"":t,i="string"==typeof n?new k(n):n,a="string"==typeof r?new k(r):r;return k.isEqual(i,a)}function ys(e,t){return null==e&&null==t||e===t}function gs(e){return Ze(e,6,4)}var bs;!function(e){e.SEND="send",e.SWAP="swap",e.CASHOUT="cashout"}(bs||(bs={}));var vs,ws,Es,_s,Ss=__webpack_require__(1048).Buffer,Ts=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},As=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};const Ns=W()((function(e){return e?Di(e):void 0}));let Cs=class{};Ts([Ni(),As("design:type",String)],Cs.prototype,"id",void 0),Ts([Ti({type:"datetime"}),As("design:type","function"==typeof(vs="undefined"!=typeof Date&&Date)?vs:Object)],Cs.prototype,"createdAt",void 0),Ts([Ti({type:"datetime",nullable:!0}),As("design:type","function"==typeof(ws="undefined"!=typeof Date&&Date)?ws:Object)],Cs.prototype,"confirmedAt",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"blockchainStr",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"currencyCodeStr",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"feeCurrencyCodeStr",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"feeCurrencyDecimal",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toAddress",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toDomain",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"fromAddress",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"fromDomain",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"amount",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"fromAmount",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toAmount",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"fee",void 0),Ts([Ti({type:"int"}),As("design:type","function"==typeof(Es=void 0!==Pi&&Pi)?Es:Object)],Cs.prototype,"state",void 0),Ts([Ti({type:"varchar",transformer:qi}),As("design:type",Array)],Cs.prototype,"metadataStrArray",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"networkStr",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"accountId",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"walletIndex",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"txOrUserOpHash",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"userOpHash",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"txHash",void 0),Ts([Ti(),As("design:type",Boolean)],Cs.prototype,"isSent",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"contractAddress",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"tokenName",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"tokenDecimal",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"nonce",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"gasLimit",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"maxFeePerGas",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"maxPriorityFeePerGas",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"baseFeePerGas",void 0),Ts([Ti({type:"varchar",nullable:!0}),As("design:type",Object)],Cs.prototype,"txSubmissionType",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"lowerBoundValue",void 0),Ts([Ti({type:"varchar",transformer:ji,nullable:!0}),As("design:type","function"==typeof(_s=void 0!==Ss&&Ss)?_s:Object)],Cs.prototype,"data",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"type",void 0),Ts([Ti({type:"varchar",nullable:!0}),As("design:type",String)],Cs.prototype,"primaryAction",void 0),Ts([Ti({type:"varchar",nullable:!0}),As("design:type",String)],Cs.prototype,"transfersStr",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toAssetHistoricalPrice",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"fromAssetHistoricalPrice",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"nativeAssetHistoricalPrice",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"fromAssetImage",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toAssetImage",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"fromProfileImage",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toProfileImage",void 0),Ts([Ti({nullable:!0}),As("design:type",Boolean)],Cs.prototype,"isContractExecution",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toNetwork",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toCurrencyCode",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toContractAddress",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toTokenName",void 0),Ts([Ti({type:"varchar",nullable:!0}),As("design:type",String)],Cs.prototype,"source",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toTokenDecimal",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"protocolFeeAmount",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"coinbaseFeeAmount",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"coinbaseFeeDecimal",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"coinbaseFeeAssetAddress",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"coinbaseFeeCurrencyCode",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"coinbaseFeeName",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"protocolFeeDecimal",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"protocolFeeCurrencyCode",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"protocolFeeName",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"fromTokenId",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toTokenId",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"toWalletId",void 0),Ts([Ti(),As("design:type",String)],Cs.prototype,"walletId",void 0),Ts([Ti({nullable:!0}),As("design:type",String)],Cs.prototype,"l1GasFee",void 0),Ts([Ti({nullable:!0,type:"varchar",transformer:qi}),As("design:type",Array)],Cs.prototype,"utxos",void 0),Ts([Ti({default:!1}),As("design:type",Boolean)],Cs.prototype,"deleted",void 0),Ts([Ti({nullable:!0}),As("design:type",Boolean)],Cs.prototype,"isSpam",void 0),Cs=Ts([Ci("tx_or_userop_history"),Mi("IDX_txOrUserOpHash_ACCOUNTID_WALLETINDEX_UNIQUE",["txOrUserOpHash","accountId","walletIndex"],{unique:!0}),Mi("IDX_TXUSEROP_BLOCK_CURR_NETWORK_2",["blockchainStr","currencyCodeStr","networkStr"]),Mi("IDX_TXUSEROP_CURR_NETWORK_2",["currencyCodeStr","networkStr"]),Mi("IDX_TXUSEROP_TX_HASH_2",["txHash"]),Mi("IDX_TXUSEROP_TX_HASH_WALLET_2",["txHash","walletId"]),Mi("IDX_TXUSEROP_ITEM_HASH",["txOrUserOpHash"]),Mi("IDX_TXUSEROP_BLOCK_CURR_NETWORK_ADDR_2",["blockchainStr","currencyCodeStr","networkStr","fromAddress"]),Mi("IDX_TXUSEROP_WALLETID_ACCOUNTID",["txOrUserOpHash","walletId","accountId"]),Mi("IDX_TXUSEROP_CREATED_AT_2",["createdAt"]),Mi("IDX_TXUSEROP_SOFT_DELETED",["deleted"]),Mi("IDX_TXUSEROP_WALLETID",["walletId"])],Cs);class Ms{constructor(e){this.id=e.id,this.createdAt=e.createdAt,this.confirmedAt=e.confirmedAt,this.blockchain=e.blockchain,this.currencyCode=e.currencyCode,this.feeCurrencyCode=e.feeCurrencyCode,this.feeCurrencyDecimal=e.feeCurrencyDecimal,this.toAddress=e.toAddress,this.toDomain=e.toDomain,this.fromAddress=e.fromAddress,this.fromDomain=e.fromDomain,this.amount=e.amount,this.fee=e.fee,this.state=e.state,this.metadata=e.metadata,this.network=e.network,this.accountId=e.accountId,this.walletIndex=BigInt(e.walletIndex),this.txOrUserOpHash=e.userOpHash??e.txHash,this.userOpHash=e.userOpHash,this.txHash=e.txHash,this.isSent=e.isSent,this.contractAddress=e.contractAddress,this.tokenName=e.tokenName,this.tokenDecimal=e.tokenDecimal,this.walletId=e.walletId,this.nonce=e.nonce,this.pendingEthTxData=e.pendingEthTxData,this.pendingUTXOTxData=e.pendingUTXOTxData,this.type=e.type,this.deleted=e.deleted??!1,this.isSpam=e.isSpam,this.primaryAction=e.primaryAction,this.toAssetHistoricalPrice=e.toAssetHistoricalPrice,this.fromAssetHistoricalPrice=e.fromAssetHistoricalPrice,this.nativeAssetHistoricalPrice=e.nativeAssetHistoricalPrice,this.fromAssetImage=e.fromAssetImage,this.toAssetImage=e.toAssetImage,this.fromProfileImage=e.fromProfileImage,this.toProfileImage=e.toProfileImage,this.fromAmount=e.fromAmount,this.toAmount=e.toAmount,this.isContractExecution=e.isContractExecution,this.toNetwork=e.toNetwork,this.toCurrencyCode=e.toCurrencyCode,this.toContractAddress=e.toContractAddress,this.toTokenName=e.toTokenName,this.toTokenDecimal=e.toTokenDecimal,this.coinbaseFeeAmount=e.coinbaseFeeAmount,this.coinbaseFeeDecimal=e.coinbaseFeeDecimal,this.coinbaseFeeAssetAddress=e.coinbaseFeeAssetAddress,this.coinbaseFeeCurrencyCode=e.coinbaseFeeCurrencyCode,this.coinbaseFeeName=e.coinbaseFeeName,this.protocolFeeAmount=e.protocolFeeAmount,this.protocolFeeDecimal=e.protocolFeeDecimal,this.protocolFeeCurrencyCode=e.protocolFeeCurrencyCode,this.protocolFeeName=e.protocolFeeName,this.toWalletId=e.toWalletId,this.fromTokenId=e.fromTokenId,this.toTokenId=e.toTokenId,this.source=e.source,"transfers"in e&&(this.transfersObj=e.transfers),"transfersStr"in e&&(this.transfersStr=e.transfersStr)}get transfers(){return this.transfersObj?this.transfersObj:Ns(this.transfersStr)}static hasSameTxHash(e,t){return e.txHash===t.txHash}static isEqual(e,t){const n=function(e,t){const n=ys(e.fromAddress,t.fromAddress),r=ys(e.toAddress,t.toAddress),i=ys(e.toDomain,t.toDomain),a=ys(e.fromDomain,t.fromDomain),s=ys(e.contractAddress,t.contractAddress),o=ys(e.toContractAddress,t.toContractAddress);return n&&r&&i&&a&&s&&o}(e,t),r=function(e,t){const n=ys(e.amount,t.amount),r=ms(e.currencyCode,t.currencyCode),i=ys(e.fromAmount,t.fromAmount),a=ys(e.isContractExecution,t.isContractExecution),s=ys(e.isSent,t.isSent),o=ys(e.primaryAction,t.primaryAction),c=ys(e.state,t.state),l=ys(e.toAmount,t.toAmount),u=ms(e.toCurrencyCode,t.toCurrencyCode),d=ys(e.tokenDecimal,t.tokenDecimal),h=ys(e.tokenName,t.tokenName),p=ys(e.txHash,t.txHash),f=ys(e.type,t.type),m=ys(e.deleted,t.deleted);return n&&r&&i&&a&&m&&s&&o&&c&&l&&u&&d&&h&&p&&f}(e,t),i=function(e,t){const n=ms(e.coinbaseFeeCurrencyCode,t.coinbaseFeeCurrencyCode),r=ys(e.coinbaseFeeAmount,t.coinbaseFeeAmount),i=ys(e.coinbaseFeeDecimal,t.coinbaseFeeDecimal),a=ys(e.coinbaseFeeName,t.coinbaseFeeName),s=ys(e.coinbaseFeeAssetAddress,t.coinbaseFeeAssetAddress);return n&&r&&i&&a&&s}(e,t),a=function(e,t){const n=ys(e.fee,t.fee),r=ms(e.feeCurrencyCode,t.feeCurrencyCode),i=ys(e.feeCurrencyDecimal,t.feeCurrencyDecimal);return n&&r&&i}(e,t),s=function(e,t){const n=ys(e.toAssetHistoricalPrice,t.toAssetHistoricalPrice),r=ys(e.fromAssetHistoricalPrice,t.fromAssetHistoricalPrice),i=ys(e.nativeAssetHistoricalPrice,t.nativeAssetHistoricalPrice);return n&&r&&i}(e,t),o=function(e,t){const n=ys(e.id,t.id),r=ys(e.toTokenName,t.toTokenName),i=ys(e.toTokenDecimal,t.toTokenDecimal),a=ys(e.fromTokenId,t.fromTokenId),s=ys(e.toTokenId,t.toTokenId),o=ys(e.fromAssetImage,t.fromAssetImage),c=ys(e.toAssetImage,t.toAssetImage),l=ys(e.fromProfileImage,t.fromProfileImage),u=ys(e.toProfileImage,t.toProfileImage),d=ys(e.source,t.source),h=hs.isEqual(e.metadata,t.metadata);return n&&r&&i&&a&&s&&o&&c&&l&&u&&d&&h}(e,t),c=function(e,t){const n=null===e.toNetwork||void 0===e.toNetwork,r=null===t.toNetwork||void 0===t.toNetwork,i=n&&r,a=!!e.toNetwork&&!!t.toNetwork&&ae.isEqual(e.toNetwork,t.toNetwork),s=i||a,o=O.isEqual(e.blockchain,t.blockchain);return ae.isEqual(e.network,t.network)&&s&&o}(e,t),l=function(e,t){const n=null===e.nonce||void 0===e.nonce,r=null===t.nonce||void 0===t.nonce,i=n&&r,a=!i&&e.nonce===t.nonce;return i||a}(e,t),u=function(e,t){const n=ps.isEqual(e.pendingEthTxData,t.pendingEthTxData),r=fs.isEqual(e.pendingUTXOTxData,t.pendingUTXOTxData);return n&&r}(e,t),d=function(e,t){const n=ms(e.protocolFeeCurrencyCode,t.protocolFeeCurrencyCode),r=ys(e.protocolFeeAmount,t.protocolFeeAmount),i=ys(e.protocolFeeDecimal,t.protocolFeeDecimal),a=ys(e.protocolFeeName,t.protocolFeeName);return n&&r&&i&&a}(e,t),h=function(e,t){const n=e.createdAt.getTime()===t.createdAt.getTime(),r=e.confirmedAt?.getTime()===t.confirmedAt?.getTime();return n&&r}(e,t),p=function(e,t){return Li(e.transfers)===Li(t.transfers)}(e,t);return n&&r&&i&&a&&s&&o&&c&&l&&u&&d&&h&&p}static fromDMO(e){let t,n;e.gasLimit&&e.maxFeePerGas&&e.maxPriorityFeePerGas&&e.baseFeePerGas&&e.txSubmissionType&&e.lowerBoundValue&&e.data?t=new ps(BigInt(e.baseFeePerGas),Ss.from(e.data),BigInt(e.gasLimit),BigInt(e.maxFeePerGas),BigInt(e.maxPriorityFeePerGas),e.txSubmissionType,e.l1GasFee?BigInt(e.l1GasFee):void 0):e.utxos&&e.txSubmissionType&&e.baseFeePerGas&&(n=new fs(e.txSubmissionType,BigInt(e.baseFeePerGas),e?.utxos?.map((function(e){const[t,n]=e.split(":");return{hash:t,index:BigInt(n)}}))));const r=new O(e.blockchainStr),i=Ms.inferTxSource(e.type,e.source,e.state,r,e.confirmedAt);return new Ms({id:e.id,createdAt:e.createdAt,confirmedAt:e.confirmedAt,blockchain:r,currencyCode:new k(e.currencyCodeStr),feeCurrencyCode:new k(e.feeCurrencyCodeStr),feeCurrencyDecimal:BigInt(e.feeCurrencyDecimal),toAddress:e.toAddress,toDomain:e.toDomain,fromAddress:e.fromAddress,fromDomain:e.fromDomain,amount:BigInt(e.amount),fee:BigInt(e.fee),state:e.state,metadata:hs.create(e.metadataStrArray),network:ae.create(e.networkStr),accountId:e.accountId,walletIndex:BigInt(e.walletIndex),txOrUserOpHash:e.txOrUserOpHash,userOpHash:e.userOpHash,txHash:e.txHash,isSent:e.isSent,contractAddress:e.contractAddress,tokenName:e.tokenName,tokenDecimal:BigInt(e.tokenDecimal),walletId:e.walletId,nonce:e.nonce?BigInt(e.nonce):void 0,pendingEthTxData:t,pendingUTXOTxData:n,type:e.type?e.type:void 0,transfersStr:e.transfersStr,deleted:e.deleted,isSpam:e.isSpam,primaryAction:e.primaryAction??void 0,toAssetHistoricalPrice:e.toAssetHistoricalPrice,fromAssetHistoricalPrice:e.fromAssetHistoricalPrice,nativeAssetHistoricalPrice:e.nativeAssetHistoricalPrice,fromAssetImage:e.fromAssetImage,toAssetImage:e.toAssetImage,fromAmount:e.fromAmount,toAmount:e.toAmount,fromProfileImage:e.fromProfileImage,toProfileImage:e.toProfileImage,isContractExecution:e.isContractExecution,toNetwork:e.toNetwork?ae.create(e.toNetwork):void 0,toCurrencyCode:e.toCurrencyCode?new k(e.toCurrencyCode):void 0,toContractAddress:e.toContractAddress,toTokenName:e.toTokenName,toTokenDecimal:e.toTokenDecimal?BigInt(e.toTokenDecimal):void 0,coinbaseFeeAmount:e.coinbaseFeeAmount,coinbaseFeeDecimal:e.coinbaseFeeDecimal?BigInt(e.coinbaseFeeDecimal):void 0,coinbaseFeeAssetAddress:e.coinbaseFeeAssetAddress,coinbaseFeeCurrencyCode:e.coinbaseFeeCurrencyCode?new k(e.coinbaseFeeCurrencyCode):void 0,coinbaseFeeName:e.coinbaseFeeName,protocolFeeAmount:e.protocolFeeAmount,protocolFeeDecimal:e.protocolFeeDecimal?BigInt(e.protocolFeeDecimal):void 0,protocolFeeCurrencyCode:e.protocolFeeCurrencyCode?new k(e.protocolFeeCurrencyCode):void 0,protocolFeeName:e.protocolFeeName,toWalletId:e.toWalletId,fromTokenId:e.fromTokenId,toTokenId:e.toTokenId,source:i})}get asDMO(){const e=Ms.inferTxSource(this.type,this.source,this.state,this.blockchain,this.confirmedAt);return{id:this.id,createdAt:this.createdAt,confirmedAt:this.confirmedAt,blockchainStr:this.blockchain.rawValue,currencyCodeStr:this.currencyCode.rawValue,feeCurrencyCodeStr:this.feeCurrencyCode.rawValue,feeCurrencyDecimal:this.feeCurrencyDecimal.toString(),toAddress:this.toAddress,toDomain:this.toDomain,fromAddress:this.fromAddress,fromDomain:this.fromDomain,amount:this.amount.toString(),fee:this.fee.toString(),state:this.state,metadataStrArray:this.metadata.rawValue,networkStr:this.network.rawValue,accountId:this.accountId,walletIndex:this.walletIndex.toString(),userOpHash:this.userOpHash,txOrUserOpHash:this.userOpHash??this.txHash,txHash:this.txHash,isSent:this.isSent,contractAddress:this.contractAddress,tokenName:this.tokenName,tokenDecimal:this.tokenDecimal.toString(),nonce:this.nonce?.toString(),gasLimit:this.pendingEthTxData?.gasLimit.toString(),maxFeePerGas:this.pendingEthTxData?.maxFeePerGas.toString(),maxPriorityFeePerGas:this.pendingEthTxData?.maxPriorityFeePerGas.toString(),baseFeePerGas:this.pendingEthTxData?.baseFeePerGas.toString()??this.pendingUTXOTxData?.feeRate.toString(),txSubmissionType:this.pendingEthTxData?.txSubmissionType??this.pendingUTXOTxData?.txSubmissionType,lowerBoundValue:this.pendingEthTxData?.lowerBoundValue.toString(),data:this.pendingEthTxData?.data,l1GasFee:this.pendingEthTxData?.l1GasFee?.toString(),type:this.type,transfersStr:this.transfers?Li(this.transfers):void 0,walletId:this.walletId,deleted:this.deleted??!1,isSpam:this.isSpam,utxos:this.pendingUTXOTxData?.utxos?.map((function(e){return`${e.hash}:${e.index}`})),primaryAction:this.primaryAction,toAssetHistoricalPrice:this.toAssetHistoricalPrice,fromAssetHistoricalPrice:this.fromAssetHistoricalPrice,nativeAssetHistoricalPrice:this.nativeAssetHistoricalPrice,fromAssetImage:this.fromAssetImage,toAssetImage:this.toAssetImage,fromProfileImage:this.fromProfileImage,toProfileImage:this.toProfileImage,fromAmount:this.fromAmount,toAmount:this.toAmount,isContractExecution:this.isContractExecution,toNetwork:this.toNetwork?.rawValue,toCurrencyCode:this.toCurrencyCode?.rawValue,toContractAddress:this.toContractAddress,toTokenName:this.toTokenName,toTokenDecimal:this.toTokenDecimal?.toString(),coinbaseFeeAmount:this.coinbaseFeeAmount,coinbaseFeeDecimal:this.coinbaseFeeDecimal?.toString(),coinbaseFeeAssetAddress:this.coinbaseFeeAssetAddress,coinbaseFeeCurrencyCode:this.coinbaseFeeCurrencyCode?.rawValue,coinbaseFeeName:this.coinbaseFeeName,protocolFeeAmount:this.protocolFeeAmount,protocolFeeDecimal:this.protocolFeeDecimal?.toString(),protocolFeeCurrencyCode:this.protocolFeeCurrencyCode?.rawValue,protocolFeeName:this.protocolFeeName,toWalletId:this.toWalletId,fromTokenId:this.fromTokenId,toTokenId:this.toTokenId,source:this.source??e}}static inferTxSource(e,t,n,r,i){if(t)return t;switch(!0){case!(i&&n.valueOf()!==Pi.PENDING.valueOf()):return;case us(r.rawValue):return"V2";case!e:return"ETHERSCAN";default:return"V2"}}get sponsoredTxId(){if(this.isSponsored())return this.metadata.get(fe)}get gaslessSwapHash(){if(this.isGaslessSwap())return this.metadata.get(ye)}entityDisplayName(e,t=!0){if(this.isTronReceiveTx&&this.tronFromAddress)return e?gs(this.tronFromAddress):this.tronFromAddress;if(this.isVANReceiveTx&&this.vanSenderName)return e?Ze(this.vanSenderName,6,10):this.vanSenderName;if(this.isCashout()&&this.metadata.has(_e))return function(e){if(!e.has(_e))return"";const t=e.get(_e);return["ACH_BANK_ACCOUNT","PAYMENT_METHOD_TYPE_ACH","PAYMENT_METHOD_TYPE_RTP"].includes(t)?"Bank Account":"Coinbase Account"}(this.metadata);if(this.isSent)return t&&this.toDomain?this.toDomain:this.toAddress?e?gs(this.toAddress):this.toAddress:"";if(this.isConsumerTransfer())return"Coinbase.com";if(this.fromDomain)return this.fromDomain;const n=this.fromAddress??"";if(e)return gs(n);const r=this.metadata.get(pe),i=this.fromAddress;return"number"==typeof r&&r>1&&i?`${i} and ${r-1}`:n}isSponsored(){return"SPONSORED"===this.type||this.metadata.has(fe)||this.metadata.has(be)}get isTronReceiveTx(){return!0===this.metadata.get(Re)}get tronTxStatus(){return this.metadata.get(xe)}get tronFromAddress(){return this.metadata.get(ke)??""}get tronTxHash(){return this.metadata.get(Oe)??""}get tronDestinationTransactionHash(){return this.metadata.get(Pe)??""}get tronTxProviderKycLink(){const e=this.metadata.get(Le)??"";return decodeURIComponent(e)}get tronReceiptLink(){const e=this.metadata.get(Ie)??"";return decodeURIComponent(e)}get isVANReceiveTx(){return!0===this.metadata.get(De)}get vanTxStatus(){return this.metadata.get(Be)}get vanOriginAmount(){return this.metadata.get(qe)??""}get vanOriginCurrency(){return this.metadata.get($e)??""}get vanSenderName(){return this.metadata.get(Ue)??""}get vanProviderName(){return this.metadata.get(Fe)??""}get vanReceiptLink(){const e=this.metadata.get(je)??"";return decodeURIComponent(e)}get txSource(){return this.metadata.get(Ye)??""}isSoftDeleted(){return Boolean(this.deleted)}isRelayed(){return(this.isSponsored()||this.isGaslessSwap())&&this.isSoftDeleted()}isConsumerTransfer(){return this.metadata.has(he)}isCashout(){return"CASHOUT"===this.type||this.metadata.has(we)||"CASHOUT"===this.primaryAction}isSponsoredCashout(){return this.isCashout()&&this.metadata.has(Ee)}isPendingSCWCashout(){return this.isCashout()&&!this.txHash&&this.state===Pi.PENDING}isNFTTransfer(){return 0n===this.tokenDecimal}isGaslessSwap(){return"GASLESS"===this.type||this.metadata.has(ye)||"SWAP"===this.primaryAction&&this.metadata.has(ge)}isUSDCRewardTx(){return!0===this.metadata.get(Ve)}isCBStakeTX(){return this.metadata.has(ve)}isNFTTransaction(){return"NFT"===this.metadata.get(Se)&&Boolean(this.toTokenId||this.fromTokenId)}isFungibleTokenTransaction(){return"FUNGIBLE_TKN"===this.metadata.get(Se)}getPendingTxMetadata(){const e=this.metadata.get(Ae)?.toString()||"",t=this.metadata.get(Ce)?.toString(),n=new k(t||this.blockchain.rawValue),r=BigInt(this.metadata.get(Ne)||"0"),i=(this.metadata.get(Te)?.toString()||"").replaceAll("~","/"),a=BigInt(this.metadata.get(Me)||"0");let s;switch(this.metadata.get(Ye)){case"dex":s="SWAP";break;case"stake":s="STAKE";break;case"bridge":s="BRIDGE";break;case"cashout":s="CASHOUT";break;default:s="SEND"}return this.isTronReceiveTx||"SEND"===s||e&&a||(s="UNKNOWN"),this.isTronReceiveTx&&(s="RECEIVE"),{txType:s,tokenName:e,tokenCurrencyCode:n,tokenDecimal:r,tokenImage:i,cryptoAmount:a}}static async createSubmittedTx(e,t,n,r,i="original"){const a=new Map(e.metadata);return a.set(me,!1),e.asTransaction(t,n,r,a,i)}static async createRelayedTx(e,t,n,r,i="original",a=bs.SEND){const s=new Map(e.metadata);let o,c;switch(a){case bs.CASHOUT:o=Ee,c="CASHOUT";break;case bs.SEND:o=fe,c="SPONSORED";break;default:o=ye,c="GASLESS"}return s.set(o,t),e.asTransaction(t,n,r,s,i,c)}}__webpack_require__(22563);const Rs={blue:{primary:"blue60",primaryForeground:"gray0",primaryWash:"blue0"},teal:{primary:"teal60",primaryWash:"teal0",primaryForeground:"gray0"},purple:{primary:"purple70",primaryForeground:"gray0",primaryWash:"purple0"},pink:{primary:"pink60",primaryForeground:"gray0",primaryWash:"pink0",negative:"red50"},green:{primary:"green60",primaryForeground:"gray0",primaryWash:"green0",positive:"green40"}};var xs,ks=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},Is=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let Os=class{};ks([Ni(),Is("design:type",String)],Os.prototype,"id",void 0),ks([Ti("datetime"),Is("design:type","function"==typeof(xs="undefined"!=typeof Date&&Date)?xs:Object)],Os.prototype,"createdAt",void 0),ks([Ti(),Is("design:type",String)],Os.prototype,"accountId",void 0),ks([Ti(),Is("design:type",String)],Os.prototype,"walletIndex",void 0),ks([Ti({nullable:!0}),Is("design:type",String)],Os.prototype,"hardwareDerivationPath",void 0),ks([Ti(),Is("design:type",String)],Os.prototype,"nickname",void 0),ks([Ti(),Is("design:type",Boolean)],Os.prototype,"isHidden",void 0),ks([Ti({nullable:!0}),Is("design:type",String)],Os.prototype,"themeColor",void 0),ks([Ti({nullable:!0}),Is("design:type",Number)],Os.prototype,"avatarIndex",void 0),ks([Ti({nullable:!0}),Is("design:type",String)],Os.prototype,"walletAddress",void 0),Os=ks([Ci("wallet_group"),Mi("IDX_WALLET_GROUP",["accountId","walletIndex","hardwareDerivationPath","isHidden"]),Mi("IDX_WALLET_GROUP_CreatedAt",["createdAt"]),Mi("IDX_WALLET_GROUP_Theme",["themeColor"])],Os);__webpack_require__(59092),__webpack_require__(84213);var Ps=__webpack_require__(82823),Ls=__webpack_require__.n(Ps);__webpack_require__(89029);var Ds=__webpack_require__(14041),Bs=__webpack_require__(43144),js=__webpack_require__(39907);var qs=function(e){const t=new Error(e);if(void 0===t.stack)try{throw t}catch(e){}return t},$s=qs;var Us=function(e){return!!e&&"function"==typeof e.then};var Fs=function(e,t){if(null!=e)return e;throw $s(null!=t?t:"Got unexpected null or undefined")};function Vs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Hs{getValue(){throw $s("BaseLoadable")}toPromise(){throw $s("BaseLoadable")}valueMaybe(){throw $s("BaseLoadable")}valueOrThrow(){throw $s(`Loadable expected value, but in "${this.state}" state`)}promiseMaybe(){throw $s("BaseLoadable")}promiseOrThrow(){throw $s(`Loadable expected promise, but in "${this.state}" state`)}errorMaybe(){throw $s("BaseLoadable")}errorOrThrow(){throw $s(`Loadable expected error, but in "${this.state}" state`)}is(e){return e.state===this.state&&e.contents===this.contents}map(e){throw $s("BaseLoadable")}}class zs extends Hs{constructor(e){super(),Vs(this,"state","hasValue"),Vs(this,"contents",void 0),this.contents=e}getValue(){return this.contents}toPromise(){return Promise.resolve(this.contents)}valueMaybe(){return this.contents}valueOrThrow(){return this.contents}promiseMaybe(){}errorMaybe(){}map(e){try{const t=e(this.contents);return Us(t)?Js(t):Zs(t)?t:Gs(t)}catch(t){return Us(t)?Js(t.next((()=>this.map(e)))):Qs(t)}}}class Ws extends Hs{constructor(e){super(),Vs(this,"state","hasError"),Vs(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return Promise.reject(this.contents)}valueMaybe(){}promiseMaybe(){}errorMaybe(){return this.contents}errorOrThrow(){return this.contents}map(e){return this}}class Ks extends Hs{constructor(e){super(),Vs(this,"state","loading"),Vs(this,"contents",void 0),this.contents=e}getValue(){throw this.contents}toPromise(){return this.contents}valueMaybe(){}promiseMaybe(){return this.contents}promiseOrThrow(){return this.contents}errorMaybe(){}map(e){return Js(this.contents.then((t=>{const n=e(t);if(Zs(n)){const e=n;switch(e.state){case"hasValue":case"loading":return e.contents;case"hasError":throw e.contents}}return n})).catch((t=>{if(Us(t))return t.then((()=>this.map(e).contents));throw t})))}}function Gs(e){return Object.freeze(new zs(e))}function Qs(e){return Object.freeze(new Ws(e))}function Js(e){return Object.freeze(new Ks(e))}function Ys(){return Object.freeze(new Ks(new Promise((()=>{}))))}function Xs(e){const t=function(e){return e.every((e=>"hasValue"===e.state))?Gs(e.map((e=>e.contents))):e.some((e=>"hasError"===e.state))?Qs(Fs(e.find((e=>"hasError"===e.state)),"Invalid loadable passed to loadableAll").contents):Js(Promise.all(e.map((e=>e.contents))))}((Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((t=>e[t]))).map((e=>Zs(e)?e:Us(e)?Js(e):Gs(e))));return Array.isArray(e)?t:t.map((t=>Object.getOwnPropertyNames(e).reduce(((e,n,r)=>({...e,[n]:t[r]})),{})))}function Zs(e){return e instanceof Hs}const eo={of:e=>Us(e)?Js(e):Zs(e)?e:Gs(e),error:e=>Qs(e),loading:()=>Ys(),all:Xs,isLoadable:Zs};var to={loadableWithValue:Gs,loadableWithError:Qs,loadableWithPromise:Js,loadableLoading:Ys,loadableAll:Xs,isLoadable:Zs,RecoilLoadable:eo},no=to.loadableWithValue,ro=to.loadableWithError,io=to.loadableWithPromise,ao=to.loadableLoading,so=to.loadableAll,oo=to.isLoadable,co=to.RecoilLoadable,lo=Object.freeze({__proto__:null,loadableWithValue:no,loadableWithError:ro,loadableWithPromise:io,loadableLoading:ao,loadableAll:so,isLoadable:oo,RecoilLoadable:co});const uo={RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED:!0,RECOIL_GKS_ENABLED:new Set(["recoil_hamt_2020","recoil_sync_external_store","recoil_suppress_rerender_in_callback","recoil_memory_managament_2020"])};void 0!==js&&null!=(null==js?void 0:"MISSING_ENV_VAR")&&(function(e,t){var n,r;const i=null===(n="MISSING_ENV_VAR"[e])||void 0===n||null===(r=n.toLowerCase())||void 0===r?void 0:r.trim();if(null!=i&&""!==i){if(!["true","false"].includes(i))throw $s(`process.env.${e} value must be 'true', 'false', or empty: ${i}`);t("true"===i)}}("RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED",(e=>{uo.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED=e})),function(e,t){var n;const r=null===(n="MISSING_ENV_VAR"[e])||void 0===n?void 0:n.trim();null!=r&&""!==r&&t(r.split(/\s*,\s*|\s+/))}("RECOIL_GKS_ENABLED",(e=>{e.forEach((e=>{uo.RECOIL_GKS_ENABLED.add(e)}))})));var ho=uo;function po(e){return ho.RECOIL_GKS_ENABLED.has(e)}po.setPass=e=>{ho.RECOIL_GKS_ENABLED.add(e)},po.setFail=e=>{ho.RECOIL_GKS_ENABLED.delete(e)},po.clear=()=>{ho.RECOIL_GKS_ENABLED.clear()};var fo=po;var mo,yo,go,bo=function(e,t,{error:n}={}){return null};const vo=null!==(mo=Ds.createMutableSource)&&void 0!==mo?mo:Ds.unstable_createMutableSource,wo=null!==(yo=Ds.useMutableSource)&&void 0!==yo?yo:Ds.unstable_useMutableSource,Eo=null!==(go=Ds.useSyncExternalStore)&&void 0!==go?go:Ds.unstable_useSyncExternalStore;let _o=!1;var So={createMutableSource:vo,useMutableSource:wo,useSyncExternalStore:Eo,currentRendererSupportsUseSyncExternalStore:function(){var e;const{ReactCurrentDispatcher:t,ReactCurrentOwner:n}=Ds.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,r=null!=(null!==(e=null==t?void 0:t.current)&&void 0!==e?e:n.currentDispatcher).useSyncExternalStore;return!Eo||r||_o||(_o=!0,bo("A React renderer without React 18+ API support is being used with React 18+.")),r},reactMode:function(){return fo("recoil_transition_support")?{mode:"TRANSITION_SUPPORT",early:!0,concurrent:!0}:fo("recoil_sync_external_store")&&null!=Eo?{mode:"SYNC_EXTERNAL_STORE",early:!0,concurrent:!1}:fo("recoil_mutable_source")&&null!=wo&&"undefined"!=typeof window&&!window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE?fo("recoil_suppress_rerender_in_callback")?{mode:"MUTABLE_SOURCE",early:!0,concurrent:!0}:{mode:"MUTABLE_SOURCE",early:!1,concurrent:!1}:fo("recoil_suppress_rerender_in_callback")?{mode:"LEGACY",early:!0,concurrent:!1}:{mode:"LEGACY",early:!1,concurrent:!1}},isFastRefreshEnabled:function(){return!1}};class To{constructor(e){Vs(this,"key",void 0),this.key=e}toJSON(){return{key:this.key}}}class Ao extends To{}class No extends To{}var Co={AbstractRecoilValue:To,RecoilState:Ao,RecoilValueReadOnly:No,isRecoilValue:function(e){return e instanceof Ao||e instanceof No}},Mo=Co.AbstractRecoilValue,Ro=Co.RecoilState,xo=Co.RecoilValueReadOnly,ko=Co.isRecoilValue,Io=Object.freeze({__proto__:null,AbstractRecoilValue:Mo,RecoilState:Ro,RecoilValueReadOnly:xo,isRecoilValue:ko});var Oo=function(e,...t){0};var Po=function(e,t){return function*(){let n=0;for(const r of e)yield t(r,n++)}()};const{isFastRefreshEnabled:Lo}=So;class Do{}const Bo=new Do,jo=new Map,qo=new Map;class $o extends Error{}const Uo=new Map;function Fo(e){return Uo.get(e)}var Vo={nodes:jo,recoilValues:qo,registerNode:function(e){ho.RECOIL_DUPLICATE_ATOM_KEY_CHECKING_ENABLED&&function(e){if(jo.has(e)){const t=`Duplicate atom key "${e}". This is a FATAL ERROR in\n      production. But it is safe to ignore this warning if it occurred because of\n      hot module replacement.`;console.warn(t)}}(e.key),jo.set(e.key,e);const t=null==e.set?new Io.RecoilValueReadOnly(e.key):new Io.RecoilState(e.key);return qo.set(e.key,t),t},getNode:function(e){const t=jo.get(e);if(null==t)throw new $o(`Missing definition for RecoilValue: "${e}""`);return t},getNodeMaybe:function(e){return jo.get(e)},deleteNodeConfigIfPossible:function(e){var t;if(!fo("recoil_memory_managament_2020"))return;const n=jo.get(e);var r;null!=n&&null!==(t=n.shouldDeleteConfigOnRelease)&&void 0!==t&&t.call(n)&&(jo.delete(e),null===(r=Fo(e))||void 0===r||r(),Uo.delete(e))},setConfigDeletionHandler:function(e,t){fo("recoil_memory_managament_2020")&&(void 0===t?Uo.delete(e):Uo.set(e,t))},getConfigDeletionHandler:Fo,recoilValuesForKeys:function(e){return Po(e,(e=>Fs(qo.get(e))))},NodeMissingError:$o,DefaultValue:Do,DEFAULT_VALUE:Bo};var Ho={enqueueExecution:function(e,t){t()}};var zo,Wo,Ko=(zo=function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n={},r=Math.pow(2,5),i=r-1,a=r/2,s=r/4,o={},c=function(e){return function(){return e}},l=n.hash=function(e){var n=void 0===e?"undefined":t(e);if("number"===n)return e;"string"!==n&&(e+="");for(var r=0,i=0,a=e.length;i<a;++i)r=(r<<5)-r+e.charCodeAt(i)|0;return r},u=function(e,t){return t>>>e&i},d=function(e){return 1<<e},h=function(e,t){return n=e&t-1,n=(n=(858993459&(n-=n>>1&1431655765))+(n>>2&858993459))+(n>>4)&252645135,127&(n+=n>>8)+(n>>16);var n},p=function(e,t,n,r){var i=r;if(!e){var a=r.length;i=new Array(a);for(var s=0;s<a;++s)i[s]=r[s]}return i[t]=n,i},f=function(e,t,n){var r=n.length-1,i=0,a=0,s=n;if(e)i=a=t;else for(s=new Array(r);i<t;)s[a++]=n[i++];for(++i;i<=r;)s[a++]=n[i++];return e&&(s.length=r),s},m={__hamt_isEmpty:!0},y=function(e){return e===m||e&&e.__hamt_isEmpty},g=function(e,t,n,r){return{type:1,edit:e,hash:t,key:n,value:r,_modify:S}},b=function(e,t,n){return{type:2,edit:e,hash:t,children:n,_modify:T}},v=function(e,t,n){return{type:3,edit:e,mask:t,children:n,_modify:A}},w=function(e,t,n){return{type:4,edit:e,size:t,children:n,_modify:N}},E=function e(t,n,r,i,a,s){if(r===a)return b(t,r,[s,i]);var o=u(n,r),c=u(n,a);return v(t,d(o)|d(c),o===c?[e(t,n+5,r,i,a,s)]:o<c?[i,s]:[s,i])},_=function(e,t){return e===t.edit},S=function(e,t,n,r,i,a,s){if(t(a,this.key)){var c=r(this.value);return c===this.value?this:c===o?(--s.value,m):_(e,this)?(this.value=c,this):g(e,i,a,c)}var l=r();return l===o?this:(++s.value,E(e,n,this.hash,this,i,g(e,i,a,l)))},T=function(e,t,n,r,i,a,s){if(i===this.hash){var c=function(e,t,n,r,i,a,s,c){for(var l=i.length,u=0;u<l;++u){var d=i[u];if(n(s,d.key)){var h=d.value,m=a(h);return m===h?i:m===o?(--c.value,f(e,u,i)):p(e,u,g(t,r,s,m),i)}}var y=a();return y===o?i:(++c.value,p(e,l,g(t,r,s,y),i))}(_(e,this),e,t,this.hash,this.children,r,a,s);return c===this.children?this:c.length>1?b(e,this.hash,c):c[0]}var l=r();return l===o?this:(++s.value,E(e,n,this.hash,this,i,g(e,i,a,l)))},A=function(e,t,n,r,i,s,o){var c=this.mask,l=this.children,g=u(n,i),b=d(g),E=h(c,b),S=c&b,T=S?l[E]:m,A=T._modify(e,t,n+5,r,i,s,o);if(T===A)return this;var N,C=_(e,this),M=c,R=void 0;if(S&&y(A)){if(!(M&=~b))return m;if(l.length<=2&&((N=l[1^E])===m||1===N.type||2===N.type))return l[1^E];R=f(C,E,l)}else if(S||y(A))R=p(C,E,A,l);else{if(l.length>=a)return function(e,t,n,r,i){for(var a=[],s=r,o=0,c=0;s;++c)1&s&&(a[c]=i[o++]),s>>>=1;return a[t]=n,w(e,o+1,a)}(e,g,A,c,l);M|=b,R=function(e,t,n,r){var i=r.length;if(e){for(var a=i;a>=t;)r[a--]=r[a];return r[t]=n,r}for(var s=0,o=0,c=new Array(i+1);s<t;)c[o++]=r[s++];for(c[t]=n;s<i;)c[++o]=r[s++];return c}(C,E,A,l)}return C?(this.mask=M,this.children=R,this):v(e,M,R)},N=function(e,t,n,r,i,a,o){var c=this.size,l=this.children,d=u(n,i),h=l[d],f=(h||m)._modify(e,t,n+5,r,i,a,o);if(h===f)return this;var g=_(e,this),b=void 0;if(y(h)&&!y(f))++c,b=p(g,d,f,l);else if(!y(h)&&y(f)){if(--c<=s)return function(e,t,n,r){for(var i=new Array(t-1),a=0,s=0,o=0,c=r.length;o<c;++o)if(o!==n){var l=r[o];l&&!y(l)&&(i[a++]=l,s|=1<<o)}return v(e,s,i)}(e,c,d,l);b=p(g,d,m,l)}else b=p(g,d,f,l);return g?(this.size=c,this.children=b,this):w(e,c,b)};function C(e,t,n,r,i){this._editable=e,this._edit=t,this._config=n,this._root=r,this._size=i}m._modify=function(e,t,n,r,i,a,s){var c=r();return c===o?m:(++s.value,g(e,i,a,c))},C.prototype.setTree=function(e,t){return this._editable?(this._root=e,this._size=t,this):e===this._root?this:new C(this._editable,this._edit,this._config,e,t)};var M=n.tryGetHash=function(e,t,n,r){for(var i=r._root,a=0,s=r._config.keyEq;;)switch(i.type){case 1:return s(n,i.key)?i.value:e;case 2:if(t===i.hash)for(var o=i.children,c=0,l=o.length;c<l;++c){var p=o[c];if(s(n,p.key))return p.value}return e;case 3:var f=u(a,t),m=d(f);if(i.mask&m){i=i.children[h(i.mask,m)],a+=5;break}return e;case 4:if(i=i.children[u(a,t)]){a+=5;break}return e;default:return e}};C.prototype.tryGetHash=function(e,t,n){return M(e,t,n,this)};var R=n.tryGet=function(e,t,n){return M(e,n._config.hash(t),t,n)};C.prototype.tryGet=function(e,t){return R(e,t,this)};var x=n.getHash=function(e,t,n){return M(void 0,e,t,n)};C.prototype.getHash=function(e,t){return x(e,t,this)},n.get=function(e,t){return M(void 0,t._config.hash(e),e,t)},C.prototype.get=function(e,t){return R(t,e,this)};var k=n.has=function(e,t,n){return M(o,e,t,n)!==o};C.prototype.hasHash=function(e,t){return k(e,t,this)};var I=n.has=function(e,t){return k(t._config.hash(e),e,t)};C.prototype.has=function(e){return I(e,this)};var O=function(e,t){return e===t};n.make=function(e){return new C(0,0,{keyEq:e&&e.keyEq||O,hash:e&&e.hash||l},m,0)},n.empty=n.make();var P=n.isEmpty=function(e){return e&&!!y(e._root)};C.prototype.isEmpty=function(){return P(this)};var L=n.modifyHash=function(e,t,n,r){var i={value:r._size},a=r._root._modify(r._editable?r._edit:NaN,r._config.keyEq,0,e,t,n,i);return r.setTree(a,i.value)};C.prototype.modifyHash=function(e,t,n){return L(n,e,t,this)};var D=n.modify=function(e,t,n){return L(e,n._config.hash(t),t,n)};C.prototype.modify=function(e,t){return D(t,e,this)};var B=n.setHash=function(e,t,n,r){return L(c(n),e,t,r)};C.prototype.setHash=function(e,t,n){return B(e,t,n,this)};var j=n.set=function(e,t,n){return B(n._config.hash(e),e,t,n)};C.prototype.set=function(e,t){return j(e,t,this)};var q=c(o),$=n.removeHash=function(e,t,n){return L(q,e,t,n)};C.prototype.removeHash=C.prototype.deleteHash=function(e,t){return $(e,t,this)};var U=n.remove=function(e,t){return $(t._config.hash(e),e,t)};C.prototype.remove=C.prototype.delete=function(e){return U(e,this)};var F=n.beginMutation=function(e){return new C(e._editable+1,e._edit+1,e._config,e._root,e._size)};C.prototype.beginMutation=function(){return F(this)};var V=n.endMutation=function(e){return e._editable=e._editable&&e._editable-1,e};C.prototype.endMutation=function(){return V(this)};var H=n.mutate=function(e,t){var n=F(t);return e(n),V(n)};C.prototype.mutate=function(e){return H(e,this)};var z=function(e){return e&&W(e[0],e[1],e[2],e[3],e[4])},W=function(e,t,n,r,i){for(;n<e;){var a=t[n++];if(a&&!y(a))return K(a,r,[e,t,n,r,i])}return z(i)},K=function(e,t,n){switch(e.type){case 1:return{value:t(e),rest:n};case 2:case 4:case 3:var r=e.children;return W(r.length,r,0,t,n);default:return z(n)}},G={done:!0};function Q(e){this.v=e}Q.prototype.next=function(){if(!this.v)return G;var e=this.v;return this.v=z(e.rest),e},Q.prototype[Symbol.iterator]=function(){return this};var J=function(e,t){return new Q(K(e._root,t))},Y=function(e){return[e.key,e.value]},X=n.entries=function(e){return J(e,Y)};C.prototype.entries=C.prototype[Symbol.iterator]=function(){return X(this)};var Z=function(e){return e.key},ee=n.keys=function(e){return J(e,Z)};C.prototype.keys=function(){return ee(this)};var te=function(e){return e.value},ne=n.values=C.prototype.values=function(e){return J(e,te)};C.prototype.values=function(){return ne(this)};var re=n.fold=function(e,t,n){var r=n._root;if(1===r.type)return e(t,r.value,r.key);for(var i=[r.children],a=void 0;a=i.pop();)for(var s=0,o=a.length;s<o;){var c=a[s++];c&&c.type&&(1===c.type?t=e(t,c.value,c.key):i.push(c.children))}return t};C.prototype.fold=function(e,t){return re(e,t,this)};var ie=n.forEach=function(e,t){return re((function(n,r,i){return e(r,i,t)}),null,t)};C.prototype.forEach=function(e){return ie(e,this)};var ae=n.count=function(e){return e._size};C.prototype.count=function(){return ae(this)},Object.defineProperty(C.prototype,"size",{get:C.prototype.count}),e.exports?e.exports=n:(void 0).hamt=n},zo(Wo={exports:{}},Wo.exports),Wo.exports);class Go{constructor(e){Vs(this,"_map",void 0),this._map=new Map(null==e?void 0:e.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(e){return this._map.get(e)}has(e){return this._map.has(e)}set(e,t){return this._map.set(e,t),this}delete(e){return this._map.delete(e),this}clone(){return Jo(this)}toMap(){return new Map(this._map)}}class Qo{constructor(e){if(Vs(this,"_hamt",Ko.empty.beginMutation()),e instanceof Qo){const t=e._hamt.endMutation();e._hamt=t.beginMutation(),this._hamt=t.beginMutation()}else if(e)for(const[t,n]of e.entries())this._hamt.set(t,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(e){return this._hamt.get(e)}has(e){return this._hamt.has(e)}set(e,t){return this._hamt.set(e,t),this}delete(e){return this._hamt.delete(e),this}clone(){return Jo(this)}toMap(){return new Map(this._hamt)}}function Jo(e){return fo("recoil_hamt_2020")?new Qo(e):new Go(e)}var Yo=Jo,Xo=Object.freeze({__proto__:null,persistentMap:Yo});var Zo=function(e,...t){const n=new Set;e:for(const r of e){for(const e of t)if(e.has(r))continue e;n.add(r)}return n};var ec=function(e,t){const n=new Map;return e.forEach(((e,r)=>{n.set(r,t(e,r))})),n};function tc(e,t,n,r){const{nodeDeps:i,nodeToNodeSubscriptions:a}=n,s=i.get(e);if(s&&r&&s!==r.nodeDeps.get(e))return;i.set(e,t);const o=null==s?t:Zo(t,s);for(const t of o){a.has(t)||a.set(t,new Set);Fs(a.get(t)).add(e)}if(s){const n=Zo(s,t);for(const t of n){if(!a.has(t))return;const n=Fs(a.get(t));n.delete(e),0===n.size&&a.delete(t)}}}var nc={cloneGraph:function(e){return{nodeDeps:ec(e.nodeDeps,(e=>new Set(e))),nodeToNodeSubscriptions:ec(e.nodeToNodeSubscriptions,(e=>new Set(e)))}},graph:function(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}},saveDepsToStore:function(e,t,n,r){var i,a,s,o;const c=n.getState();r!==c.currentTree.version&&r!==(null===(i=c.nextTree)||void 0===i?void 0:i.version)&&r!==(null===(a=c.previousTree)||void 0===a?void 0:a.version)&&bo("Tried to save dependencies to a discarded tree");const l=n.getGraph(r);if(tc(e,t,l),r===(null===(s=c.previousTree)||void 0===s?void 0:s.version)){tc(e,t,n.getGraph(c.currentTree.version),l)}if(r===(null===(o=c.previousTree)||void 0===o?void 0:o.version)||r===c.currentTree.version){var u;const r=null===(u=c.nextTree)||void 0===u?void 0:u.version;if(void 0!==r){tc(e,t,n.getGraph(r),l)}}}};let rc=0;let ic=0;let ac=0;var sc={getNextTreeStateVersion:()=>rc++,getNextStoreID:()=>ic++,getNextComponentID:()=>ac++};const{persistentMap:oc}=Xo,{graph:cc}=nc,{getNextTreeStateVersion:lc}=sc;function uc(){const e=lc();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:oc(),nonvalidatedAtoms:oc()}}var dc={makeEmptyTreeState:uc,makeEmptyStoreState:function(){const e=uc();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(e.version,cc()),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}},getNextTreeStateVersion:lc};class hc{}var pc={RetentionZone:hc,retentionZone:function(){return new hc}};var fc={setByAddingToSet:function(e,t){const n=new Set(e);return n.add(t),n},setByDeletingFromSet:function(e,t){const n=new Set(e);return n.delete(t),n},mapBySettingInMap:function(e,t,n){const r=new Map(e);return r.set(t,n),r},mapByUpdatingInMap:function(e,t,n){const r=new Map(e);return r.set(t,n(r.get(t))),r},mapByDeletingFromMap:function(e,t){const n=new Map(e);return n.delete(t),n},mapByDeletingMultipleFromMap:function(e,t){const n=new Map(e);return t.forEach((e=>n.delete(e))),n}};var mc=function*(e,t){let n=0;for(const r of e)t(r,n++)&&(yield r)};var yc=function(e,t){return new Proxy(e,{get:(e,n)=>(!(n in e)&&n in t&&(e[n]=t[n]()),e[n]),ownKeys:e=>Object.keys(e)})};const{getNode:gc,getNodeMaybe:bc,recoilValuesForKeys:vc}=Vo,{RetentionZone:wc}=pc,{setByAddingToSet:Ec}=fc,_c=Object.freeze(new Set);class Sc extends Error{}function Tc(e,t,n,r){const i=e.getState();if(i.nodeCleanupFunctions.has(n))return;const a=gc(n),s=function(e,t,n){if(!fo("recoil_memory_managament_2020"))return()=>{};const{nodesRetainedByZone:r}=e.getState().retention;function i(e){let n=r.get(e);n||r.set(e,n=new Set),n.add(t)}if(n instanceof wc)i(n);else if(Array.isArray(n))for(const e of n)i(e);return()=>{if(!fo("recoil_memory_managament_2020"))return;const{retention:r}=e.getState();function i(e){const n=r.nodesRetainedByZone.get(e);null==n||n.delete(t),n&&0===n.size&&r.nodesRetainedByZone.delete(e)}if(n instanceof wc)i(n);else if(Array.isArray(n))for(const e of n)i(e)}}(e,n,a.retainedBy),o=a.init(e,t,r);i.nodeCleanupFunctions.set(n,(()=>{o(),s()}))}function Ac(e,t,n){return gc(n).peek(e,t)}function Nc(e,t,n){const r=new Set,i=Array.from(n),a=e.getGraph(t.version);for(let e=i.pop();e;e=i.pop()){var s;r.add(e);const t=null!==(s=a.nodeToNodeSubscriptions.get(e))&&void 0!==s?s:_c;for(const e of t)r.has(e)||i.push(e)}return r}var Cc={getNodeLoadable:function(e,t,n){return Tc(e,t,n,"get"),gc(n).get(e,t)},peekNodeLoadable:Ac,setNodeValue:function(e,t,n,r){const i=gc(n);if(null==i.set)throw new Sc(`Attempt to set read-only RecoilValue: ${n}`);const a=i.set;return Tc(e,t,n,"set"),a(e,t,r)},initializeNode:function(e,t,n){Tc(e,e.getState().currentTree,t,n)},cleanUpNode:function(e,t){var n;const r=e.getState();null===(n=r.nodeCleanupFunctions.get(t))||void 0===n||n(),r.nodeCleanupFunctions.delete(t)},setUnvalidatedAtomValue_DEPRECATED:function(e,t,n){var r;const i=bc(t);return null==i||null===(r=i.invalidate)||void 0===r||r.call(i,e),{...e,atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,n),dirtyAtoms:Ec(e.dirtyAtoms,t)}},peekNodeInfo:function(e,t,n){const r=e.getState(),i=e.getGraph(t.version),a=gc(n).nodeType;return yc({type:a},{loadable:()=>Ac(e,t,n),isActive:()=>r.knownAtoms.has(n)||r.knownSelectors.has(n),isSet:()=>"selector"!==a&&t.atomValues.has(n),isModified:()=>t.dirtyAtoms.has(n),deps:()=>{var e;return vc(null!==(e=i.nodeDeps.get(n))&&void 0!==e?e:[])},subscribers:()=>{var i,a;return{nodes:vc(mc(Nc(e,t,new Set([n])),(e=>e!==n))),components:Po(null!==(i=null===(a=r.nodeToComponentSubscriptions.get(n))||void 0===a?void 0:a.values())&&void 0!==i?i:[],(([e])=>({name:e})))}}})},getDownstreamNodes:Nc};let Mc=null;var Rc={setInvalidateMemoizedSnapshot:function(e){Mc=e},invalidateMemoizedSnapshot:function(){var e;null===(e=Mc)||void 0===e||e()}};const{getDownstreamNodes:xc,getNodeLoadable:kc,setNodeValue:Ic}=Cc,{getNextComponentID:Oc}=sc,{getNode:Pc,getNodeMaybe:Lc}=Vo,{DefaultValue:Dc}=Vo,{reactMode:Bc}=So,{AbstractRecoilValue:jc,RecoilState:qc,RecoilValueReadOnly:$c,isRecoilValue:Uc}=Io,{invalidateMemoizedSnapshot:Fc}=Rc;function Vc(e,t,n){if("set"===n.type){const{recoilValue:r,valueOrUpdater:i}=n,a=function(e,t,{key:n},r){if("function"==typeof r){const i=kc(e,t,n);if("loading"===i.state){const e=`Tried to set atom or selector "${n}" using an updater function while the current state is pending, this is not currently supported.`;throw bo(e),$s(e)}if("hasError"===i.state)throw i.contents;return r(i.contents)}return r}(e,t,r,i),s=Ic(e,t,r.key,a);for(const[e,n]of s.entries())Hc(t,e,n)}else if("setLoadable"===n.type){const{recoilValue:{key:e},loadable:r}=n;Hc(t,e,r)}else if("markModified"===n.type){const{recoilValue:{key:e}}=n;t.dirtyAtoms.add(e)}else if("setUnvalidated"===n.type){var r;const{recoilValue:{key:e},unvalidatedValue:i}=n,a=Lc(e);null==a||null===(r=a.invalidate)||void 0===r||r.call(a,t),t.atomValues.delete(e),t.nonvalidatedAtoms.set(e,i),t.dirtyAtoms.add(e)}else bo(`Unknown action ${n.type}`)}function Hc(e,t,n){"hasValue"===n.state&&n.contents instanceof Dc?e.atomValues.delete(t):e.atomValues.set(t,n),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function zc(e,t){e.replaceState((n=>{const r=Gc(n);for(const n of t)Vc(e,r,n);return Qc(e,r),Fc(),r}))}function Wc(e,t){if(Kc.length){const n=Kc[Kc.length-1];let r=n.get(e);r||n.set(e,r=[]),r.push(t)}else zc(e,[t])}const Kc=[];function Gc(e){return{...e,atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)}}function Qc(e,t){const n=xc(e,t,t.dirtyAtoms);for(const e of n){var r,i;null===(r=Lc(e))||void 0===r||null===(i=r.invalidate)||void 0===i||i.call(r,t)}}function Jc(e,t,n){Wc(e,{type:"set",recoilValue:t,valueOrUpdater:n})}var Yc={RecoilValueReadOnly:$c,AbstractRecoilValue:jc,RecoilState:qc,getRecoilValueAsLoadable:function(e,{key:t},n=e.getState().currentTree){var r,i;const a=e.getState();n.version!==a.currentTree.version&&n.version!==(null===(r=a.nextTree)||void 0===r?void 0:r.version)&&n.version!==(null===(i=a.previousTree)||void 0===i?void 0:i.version)&&bo("Tried to read from a discarded tree");const s=kc(e,n,t);return"loading"===s.state&&s.contents.catch((()=>{})),s},setRecoilValue:Jc,setRecoilValueLoadable:function(e,t,n){if(n instanceof Dc)return Jc(e,t,n);Wc(e,{type:"setLoadable",recoilValue:t,loadable:n})},markRecoilValueModified:function(e,t){Wc(e,{type:"markModified",recoilValue:t})},setUnvalidatedRecoilValue:function(e,t,n){Wc(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:n})},subscribeToRecoilValue:function(e,{key:t},n,r=null){const i=Oc(),a=e.getState();a.nodeToComponentSubscriptions.has(t)||a.nodeToComponentSubscriptions.set(t,new Map),Fs(a.nodeToComponentSubscriptions.get(t)).set(i,[null!=r?r:"<not captured>",n]);const s=Bc();if(s.early&&("LEGACY"===s.mode||"MUTABLE_SOURCE"===s.mode)){const r=e.getState().nextTree;r&&r.dirtyAtoms.has(t)&&n(r)}return{release:()=>{const n=e.getState(),r=n.nodeToComponentSubscriptions.get(t);void 0!==r&&r.has(i)?(r.delete(i),0===r.size&&n.nodeToComponentSubscriptions.delete(t)):bo(`Subscription missing at release time for atom ${t}. This is a bug in Recoil.`)}}},isRecoilValue:Uc,applyAtomValueWrites:function(e,t){const n=e.clone();return t.forEach(((e,t)=>{"hasValue"===e.state&&e.contents instanceof Dc?n.delete(t):n.set(t,e)})),n},batchStart:function(){const e=new Map;return Kc.push(e),()=>{for(const[t,n]of e)zc(t,n);Kc.pop()!==e&&bo("Incorrect order of batch popping")}},writeLoadableToTreeState:Hc,invalidateDownstreams:Qc,copyTreeState:Gc,refreshRecoilValue:function(e,t){var n;const{currentTree:r}=e.getState(),i=Pc(t.key);null===(n=i.clearCache)||void 0===n||n.call(i,e,r)}};var Xc=function(e,t,n){const r=e.entries();let i=r.next();for(;!i.done;){const a=i.value;if(t.call(n,a[1],a[0],e))return!0;i=r.next()}return!1};const{cleanUpNode:Zc}=Cc,{deleteNodeConfigIfPossible:el,getNode:tl}=Vo,{RetentionZone:nl}=pc,rl=new Set;function il(e,t){const n=e.getState(),r=n.currentTree;if(n.nextTree)return void bo("releaseNodesNowOnCurrentTree should only be called at the end of a batch");const i=new Set;for(const e of t)if(e instanceof nl)for(const t of sl(n,e))i.add(t);else i.add(e);const a=function(e,t){const n=e.getState(),r=n.currentTree,i=e.getGraph(r.version),a=new Set,s=new Set;return o(t),a;function o(t){const c=new Set,l=function(e,t,n,r,i){const a=e.getGraph(t.version),s=[],o=new Set;for(;n.size>0;)c(Fs(n.values().next().value));return s;function c(e){if(r.has(e)||i.has(e))return void n.delete(e);if(o.has(e))return;const t=a.nodeToNodeSubscriptions.get(e);if(t)for(const e of t)c(e);o.add(e),n.delete(e),s.push(e)}}(e,r,t,a,s);for(const e of l){var u;if("recoilRoot"===tl(e).retainedBy){s.add(e);continue}if((null!==(u=n.retention.referenceCounts.get(e))&&void 0!==u?u:0)>0){s.add(e);continue}if(ol(e).some((e=>n.retention.referenceCounts.get(e)))){s.add(e);continue}const t=i.nodeToNodeSubscriptions.get(e);t&&Xc(t,(e=>s.has(e)))?s.add(e):(a.add(e),c.add(e))}const d=new Set;for(const e of c)for(const t of null!==(h=i.nodeDeps.get(e))&&void 0!==h?h:rl){var h;a.has(t)||d.add(t)}d.size&&o(d)}}(e,i);for(const t of a)al(e,r,t)}function al(e,t,n){if(!fo("recoil_memory_managament_2020"))return;Zc(e,n);const r=e.getState();r.knownAtoms.delete(n),r.knownSelectors.delete(n),r.nodeTransactionSubscriptions.delete(n),r.retention.referenceCounts.delete(n);const i=ol(n);for(const e of i){var a;null===(a=r.retention.nodesRetainedByZone.get(e))||void 0===a||a.delete(n)}t.atomValues.delete(n),t.dirtyAtoms.delete(n),t.nonvalidatedAtoms.delete(n);const s=r.graphsByVersion.get(t.version);if(s){const e=s.nodeDeps.get(n);if(void 0!==e){s.nodeDeps.delete(n);for(const t of e){var o;null===(o=s.nodeToNodeSubscriptions.get(t))||void 0===o||o.delete(n)}}s.nodeToNodeSubscriptions.delete(n)}el(n)}function sl(e,t){var n;return null!==(n=e.retention.nodesRetainedByZone.get(t))&&void 0!==n?n:rl}function ol(e){const t=tl(e).retainedBy;return void 0===t||"components"===t||"recoilRoot"===t?[]:t instanceof nl?[t]:t}function cl(e,t){if(!fo("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),function(e,t){const n=e.getState();n.nextTree?n.retention.retainablesToCheckForRelease.add(t):il(e,new Set([t]))}(e,t)}var ll={SUSPENSE_TIMEOUT_MS:12e4,updateRetainCount:function(e,t,n){var r;if(!fo("recoil_memory_managament_2020"))return;const i=e.getState().retention.referenceCounts,a=(null!==(r=i.get(t))&&void 0!==r?r:0)+n;0===a?cl(e,t):i.set(t,a)},updateRetainCountToZero:cl,releaseScheduledRetainablesNow:function(e){if(!fo("recoil_memory_managament_2020"))return;const t=e.getState();il(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()},retainedByOptionWithDefault:function(e){return void 0===e?"recoilRoot":e}};const{unstable_batchedUpdates:ul}=Bs;var dl={unstable_batchedUpdates:ul};const{unstable_batchedUpdates:hl}=dl;var pl={unstable_batchedUpdates:hl};const{batchStart:fl}=Yc,{unstable_batchedUpdates:ml}=pl;let yl=ml||(e=>e());var gl={getBatcher:()=>yl,setBatcher:e=>{yl=e},batchUpdates:e=>{yl((()=>{let t=()=>{};try{t=fl(),e()}finally{t()}}))}};var bl=function*(e){for(const t of e)for(const e of t)yield e};const vl="undefined"==typeof Window||"undefined"==typeof window,wl="undefined"!=typeof navigator&&"ReactNative"===navigator.product;var El={isSSR:vl,isReactNative:wl,isWindow:e=>!vl&&(e===window||e instanceof Window)};var _l={memoizeWithArgsHash:function(e,t){let n;return(...r)=>{n||(n={});const i=t(...r);return Object.hasOwnProperty.call(n,i)||(n[i]=e(...r)),n[i]}},memoizeOneWithArgsHash:function(e,t){let n,r;return(...i)=>{const a=t(...i);return n===a||(n=a,r=e(...i)),r}},memoizeOneWithArgsHashAndInvalidation:function(e,t){let n,r;return[(...i)=>{const a=t(...i);return n===a||(n=a,r=e(...i)),r},()=>{n=null}]}};const{batchUpdates:Sl}=gl,{initializeNode:Tl,peekNodeInfo:Al}=Cc,{graph:Nl}=nc,{getNextStoreID:Cl}=sc,{DEFAULT_VALUE:Ml,recoilValues:Rl,recoilValuesForKeys:xl}=Vo,{AbstractRecoilValue:kl,getRecoilValueAsLoadable:Il,setRecoilValue:Ol,setUnvalidatedRecoilValue:Pl}=Yc,{updateRetainCount:Ll}=ll,{setInvalidateMemoizedSnapshot:Dl}=Rc,{getNextTreeStateVersion:Bl,makeEmptyStoreState:jl}=dc,{isSSR:ql}=El,{memoizeOneWithArgsHashAndInvalidation:$l}=_l;class Ul{constructor(e,t){Vs(this,"_store",void 0),Vs(this,"_refCount",1),Vs(this,"getLoadable",(e=>(this.checkRefCount_INTERNAL(),Il(this._store,e)))),Vs(this,"getPromise",(e=>(this.checkRefCount_INTERNAL(),this.getLoadable(e).toPromise()))),Vs(this,"getNodes_UNSTABLE",(e=>{if(this.checkRefCount_INTERNAL(),!0===(null==e?void 0:e.isModified)){if(!1===(null==e?void 0:e.isInitialized))return[];const t=this._store.getState().currentTree;return xl(t.dirtyAtoms)}const t=this._store.getState().knownAtoms,n=this._store.getState().knownSelectors;return null==(null==e?void 0:e.isInitialized)?Rl.values():!0===e.isInitialized?xl(bl([t,n])):mc(Rl.values(),(({key:e})=>!t.has(e)&&!n.has(e)))})),Vs(this,"getInfo_UNSTABLE",(({key:e})=>(this.checkRefCount_INTERNAL(),Al(this._store,this._store.getState().currentTree,e)))),Vs(this,"map",(e=>{this.checkRefCount_INTERNAL();const t=new zl(this,Sl);return e(t),t})),Vs(this,"asyncMap",(async e=>{this.checkRefCount_INTERNAL();const t=new zl(this,Sl);return t.retain(),await e(t),t.autoRelease_INTERNAL(),t})),this._store={storeID:Cl(),parentStoreID:t,getState:()=>e,replaceState:t=>{e.currentTree=t(e.currentTree)},getGraph:t=>{const n=e.graphsByVersion;if(n.has(t))return Fs(n.get(t));const r=Nl();return n.set(t,r),r},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw $s("Cannot subscribe to Snapshots")}};for(const e of this._store.getState().knownAtoms)Tl(this._store,e,"get"),Ll(this._store,e,1);this.autoRelease_INTERNAL()}retain(){this._refCount<=0&&bo("Attempt to retain() Snapshot that was already released."),this._refCount++;let e=!1;return()=>{e||(e=!0,this._release())}}autoRelease_INTERNAL(){ql||window.setTimeout((()=>this._release()),10)}_release(){if(this._refCount--,0===this._refCount){if(this._store.getState().nodeCleanupFunctions.forEach((e=>e())),this._store.getState().nodeCleanupFunctions.clear(),!fo("recoil_memory_managament_2020"))return}else this._refCount}isRetained(){return this._refCount>0}checkRefCount_INTERNAL(){fo("recoil_memory_managament_2020")&&this._refCount}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}getStoreID(){return this.checkRefCount_INTERNAL(),this._store.storeID}}function Fl(e,t,n=!1){const r=e.getState(),i=n?Bl():t.version;return{currentTree:{version:n?i:t.version,stateID:n?i:t.stateID,transactionMetadata:{...t.transactionMetadata},dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()},commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(r.knownAtoms),knownSelectors:new Set(r.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:(new Map).set(i,e.getGraph(t.version)),retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map(Po(r.nodeCleanupFunctions.entries(),(([e])=>[e,()=>{}])))}}const[Vl,Hl]=$l(((e,t)=>{var n;const r=e.getState(),i="latest"===t?null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree:Fs(r.previousTree);return new Ul(Fl(e,i),e.storeID)}),((e,t)=>{var n,r;return String(t)+String(e.storeID)+String(null===(n=e.getState().nextTree)||void 0===n?void 0:n.version)+String(e.getState().currentTree.version)+String(null===(r=e.getState().previousTree)||void 0===r?void 0:r.version)}));Dl(Hl);class zl extends Ul{constructor(e,t){super(Fl(e.getStore_INTERNAL(),e.getStore_INTERNAL().getState().currentTree,!0),e.getStoreID()),Vs(this,"_batch",void 0),Vs(this,"set",((e,t)=>{this.checkRefCount_INTERNAL();const n=this.getStore_INTERNAL();this._batch((()=>{Ll(n,e.key,1),Ol(this.getStore_INTERNAL(),e,t)}))})),Vs(this,"reset",(e=>{this.checkRefCount_INTERNAL();const t=this.getStore_INTERNAL();this._batch((()=>{Ll(t,e.key,1),Ol(this.getStore_INTERNAL(),e,Ml)}))})),Vs(this,"setUnvalidatedAtomValues_DEPRECATED",(e=>{this.checkRefCount_INTERNAL();const t=this.getStore_INTERNAL();Sl((()=>{for(const[n,r]of e.entries())Ll(t,n,1),Pl(t,new kl(n),r)}))})),this._batch=t}}var Wl={Snapshot:Ul,MutableSnapshot:zl,freshSnapshot:function(e){const t=new Ul(jl());return null!=e?t.map(e):t},cloneSnapshot:function(e,t="latest"){const n=Vl(e,t);return n.isRetained()?n:(Hl(),Vl(e,t))}},Kl=Wl.Snapshot,Gl=Wl.MutableSnapshot,Ql=Wl.freshSnapshot,Jl=Wl.cloneSnapshot,Yl=Object.freeze({__proto__:null,Snapshot:Kl,MutableSnapshot:Gl,freshSnapshot:Ql,cloneSnapshot:Jl});var Xl=function(...e){const t=new Set;for(const n of e)for(const e of n)t.add(e);return t};const{useRef:Zl}=Ds;var eu=function(e){const t=Zl(e);return t.current===e&&"function"==typeof e&&(t.current=e()),t};const{getNextTreeStateVersion:tu,makeEmptyStoreState:nu}=dc,{cleanUpNode:ru,getDownstreamNodes:iu,initializeNode:au,setNodeValue:su,setUnvalidatedAtomValue_DEPRECATED:ou}=Cc,{graph:cu}=nc,{cloneGraph:lu}=nc,{getNextStoreID:uu}=sc,{createMutableSource:du,reactMode:hu}=So,{applyAtomValueWrites:pu}=Yc,{releaseScheduledRetainablesNow:fu}=ll,{freshSnapshot:mu}=Yl,{useCallback:yu,useContext:gu,useEffect:bu,useMemo:vu,useRef:wu,useState:Eu}=Ds;function _u(){throw $s("This component must be used inside a <RecoilRoot> component.")}const Su=Object.freeze({storeID:uu(),getState:_u,replaceState:_u,getGraph:_u,subscribeToTransactions:_u,addTransactionMetadata:_u});let Tu=!1;function Au(e){if(Tu)throw $s("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");const t=e.getState();if(null===t.nextTree){fo("recoil_memory_managament_2020")&&fo("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&fu(e);const n=t.currentTree.version,r=tu();t.nextTree={...t.currentTree,version:r,stateID:r,dirtyAtoms:new Set,transactionMetadata:{}},t.graphsByVersion.set(r,lu(Fs(t.graphsByVersion.get(n))))}}const Nu=Ds.createContext({current:Su}),Cu=()=>gu(Nu),Mu=Ds.createContext(null);function Ru(e,t,n){const r=iu(e,n,n.dirtyAtoms);for(const e of r){const r=t.nodeToComponentSubscriptions.get(e);if(r)for(const[e,[t,i]]of r)i(n)}}function xu(e){const t=e.getState(),n=t.currentTree,r=n.dirtyAtoms;if(r.size){for(const[n,i]of t.nodeTransactionSubscriptions)if(r.has(n))for(const[t,n]of i)n(e);for(const[n,r]of t.transactionSubscriptions)r(e);(!hu().early||t.suspendedComponentResolvers.size>0)&&(Ru(e,t,n),t.suspendedComponentResolvers.forEach((e=>e())),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach((e=>e(n))),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function ku({setNotifyBatcherOfChange:e}){const t=Cu(),[,n]=Eu([]);return e((()=>n({}))),bu((()=>(e((()=>n({}))),()=>{e((()=>{}))})),[e]),bu((()=>{Ho.enqueueExecution("Batcher",(()=>{!function(e){const t=e.getState();t.commitDepth++;try{const{nextTree:n}=t;if(null==n)return;t.previousTree=t.currentTree,t.currentTree=n,t.nextTree=null,xu(e),null!=t.previousTree?t.graphsByVersion.delete(t.previousTree.version):bo("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,fo("recoil_memory_managament_2020")&&null==n&&fu(e)}finally{t.commitDepth--}}(t.current)}))})),null}let Iu=0;function Ou({initializeState_DEPRECATED:e,initializeState:t,store_INTERNAL:n,children:r}){let i;const a=e=>{const t=i.current.graphsByVersion;if(t.has(e))return Fs(t.get(e));const n=cu();return t.set(e,n),n},s=(e,t)=>{if(null==t){const{transactionSubscriptions:t}=d.current.getState(),n=Iu++;return t.set(n,e),{release:()=>{t.delete(n)}}}{const{nodeTransactionSubscriptions:n}=d.current.getState();n.has(t)||n.set(t,new Map);const r=Iu++;return Fs(n.get(t)).set(r,e),{release:()=>{const e=n.get(t);e&&(e.delete(r),0===e.size&&n.delete(t))}}}},o=e=>{Au(d.current);for(const t of Object.keys(e))Fs(d.current.getState().nextTree).transactionMetadata[t]=e[t]},c=e=>{Au(d.current);const t=Fs(i.current.nextTree);let n;try{Tu=!0,n=e(t)}finally{Tu=!1}n!==t&&(i.current.nextTree=n,hu().early&&Ru(d.current,i.current,n),Fs(l.current)())},l=wu(null),u=yu((e=>{l.current=e}),[l]),d=eu((()=>null!=n?n:{storeID:uu(),getState:()=>i.current,replaceState:c,getGraph:a,subscribeToTransactions:s,addTransactionMetadata:o}));null!=n&&(d.current=n),i=eu((()=>null!=e?function(e,t){const n=nu();return t({set:(t,r)=>{const i=n.currentTree,a=su(e,i,t.key,r),s=new Set(a.keys()),o=i.nonvalidatedAtoms.clone();for(const e of s)o.delete(e);n.currentTree={...i,dirtyAtoms:Xl(i.dirtyAtoms,s),atomValues:pu(i.atomValues,a),nonvalidatedAtoms:o}},setUnvalidatedAtomValues:e=>{e.forEach(((e,t)=>{n.currentTree=ou(n.currentTree,t,e)}))}}),n}(d.current,e):null!=t?function(e){const t=mu(e),n=t.getStore_INTERNAL().getState();return t.retain(),n.nodeCleanupFunctions.forEach((e=>e())),n.nodeCleanupFunctions.clear(),n}(t):nu()));const h=vu((()=>null==du?void 0:du(i,(()=>i.current.currentTree.version))),[i]);return bu((()=>{const e=d.current;for(const t of new Set(e.getState().knownAtoms))au(e,t,"get");return()=>{for(const t of e.getState().knownAtoms)ru(e,t)}}),[d]),Ds.createElement(Nu.Provider,{value:d},Ds.createElement(Mu.Provider,{value:h},Ds.createElement(ku,{setNotifyBatcherOfChange:u}),r))}var Pu={RecoilRoot:function(e){const{override:t,...n}=e,r=Cu();return!1===t&&r.current!==Su?e.children:Ds.createElement(Ou,n)},useStoreRef:Cu,useRecoilMutableSource:function(){const e=gu(Mu);return null==e&&Oo("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),e},useRecoilStoreID:function(){return Cu().current.storeID},notifyComponents_FOR_TESTING:Ru,sendEndOfBatchNotifications_FOR_TESTING:xu};var Lu=function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0};const{useEffect:Du,useRef:Bu}=Ds;var ju=function(e){const t=Bu();return Du((()=>{t.current=e})),t.current};const{useStoreRef:qu}=Pu,{SUSPENSE_TIMEOUT_MS:$u}=ll,{updateRetainCount:Uu}=ll,{RetentionZone:Fu}=pc,{useEffect:Vu,useRef:Hu}=Ds,{isSSR:zu}=El;var Wu=function(e){if(fo("recoil_memory_managament_2020"))return function(e){const t=Array.isArray(e)?e:[e],n=t.map((e=>e instanceof Fu?e:e.key)),r=qu();Vu((()=>{if(!fo("recoil_memory_managament_2020"))return;const e=r.current;if(i.current&&!zu)window.clearTimeout(i.current),i.current=null;else for(const t of n)Uu(e,t,1);return()=>{for(const t of n)Uu(e,t,-1)}}),[r,...n]);const i=Hu(),a=ju(n);if(!(zu||void 0!==a&&Lu(a,n))){const e=r.current;for(const t of n)Uu(e,t,1);if(a)for(const t of a)Uu(e,t,-1);i.current&&window.clearTimeout(i.current),i.current=window.setTimeout((()=>{i.current=null;for(const t of n)Uu(e,t,-1)}),$u)}}(e)};var Ku=function(){return"<component name not available>"};const{batchUpdates:Gu}=gl,{DEFAULT_VALUE:Qu}=Vo,{currentRendererSupportsUseSyncExternalStore:Ju,reactMode:Yu,useMutableSource:Xu,useSyncExternalStore:Zu}=So,{useRecoilMutableSource:ed,useStoreRef:td}=Pu,{isRecoilValue:nd}=Io,{AbstractRecoilValue:rd,getRecoilValueAsLoadable:id,setRecoilValue:ad,setUnvalidatedRecoilValue:sd,subscribeToRecoilValue:od}=Yc,{useCallback:cd,useEffect:ld,useMemo:ud,useRef:dd,useState:hd}=Ds,{setByAddingToSet:pd}=fc,{isSSR:fd}=El;function md(e,t,n){if("hasValue"===e.state)return e.contents;if("loading"===e.state){throw new Promise((t=>{const r=n.current.getState().suspendedComponentResolvers;r.add(t),fd&&Us(e.contents)&&e.contents.finally((()=>{r.delete(t)}))}))}throw"hasError"===e.state?e.contents:$s(`Invalid value of loadable atom "${t.key}"`)}function yd(e){const t=td(),n=Ku(),r=cd((()=>{var n;const r=t.current,i=r.getState(),a=Yu().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return{loadable:id(r,e,a),key:e.key}}),[t,e]),i=cd((e=>{let t;return()=>{var n,r;const i=e();return null!==(n=t)&&void 0!==n&&n.loadable.is(i.loadable)&&(null===(r=t)||void 0===r?void 0:r.key)===i.key?t:(t=i,i)}}),[]),a=ud((()=>i(r)),[r,i]),s=cd((r=>{const i=t.current;return od(i,e,r,n).release}),[t,e,n]);return Zu(s,a,a).loadable}function gd(e){const t=td(),n=cd((()=>{var n;const r=t.current,i=r.getState(),a=Yu().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return id(r,e,a)}),[t,e]),r=cd((()=>n()),[n]),i=Ku(),a=cd(((r,a)=>{const s=t.current;return od(s,e,(()=>{if(!fo("recoil_suppress_rerender_in_callback"))return a();const e=n();c.current.is(e)||a(),c.current=e}),i).release}),[t,e,i,n]),s=ed();if(null==s)throw $s("Recoil hooks must be used in components contained within a <RecoilRoot> component.");const o=Xu(s,r,a),c=dd(o);return ld((()=>{c.current=o})),o}function bd(e){const t=td(),n=Ku(),r=cd((()=>{var n;const r=t.current,i=r.getState(),a=Yu().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return id(r,e,a)}),[t,e]),i=cd((()=>({loadable:r(),key:e.key})),[r,e.key]),a=cd((e=>{const t=i();return e.loadable.is(t.loadable)&&e.key===t.key?e:t}),[i]);ld((()=>{const r=od(t.current,e,(e=>{o(a)}),n);return o(a),r.release}),[n,e,t,a]);const[s,o]=hd(i);return s.key!==e.key?i().loadable:s.loadable}function vd(e){const t=td(),[,n]=hd([]),r=Ku(),i=cd((()=>{var n;const r=t.current,i=r.getState(),a=Yu().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree;return id(r,e,a)}),[t,e]),a=i(),s=dd(a);return ld((()=>{s.current=a})),ld((()=>{const a=t.current,o=a.getState(),c=od(a,e,(e=>{var t;if(!fo("recoil_suppress_rerender_in_callback"))return n([]);const r=i();null!==(t=s.current)&&void 0!==t&&t.is(r)||n(r),s.current=r}),r);if(o.nextTree)a.getState().queuedComponentCallbacks_DEPRECATED.push((()=>{s.current=null,n([])}));else{var l;if(!fo("recoil_suppress_rerender_in_callback"))return n([]);const e=i();null!==(l=s.current)&&void 0!==l&&l.is(e)||n(e),s.current=e}return c.release}),[r,i,e,t]),a}function wd(e){return fo("recoil_memory_managament_2020")&&Wu(e),{TRANSITION_SUPPORT:bd,SYNC_EXTERNAL_STORE:Ju()?yd:bd,MUTABLE_SOURCE:gd,LEGACY:vd}[Yu().mode](e)}function Ed(e){const t=td();return md(wd(e),e,t)}function _d(e){const t=td();return cd((n=>{ad(t.current,e,n)}),[t,e])}function Sd(e){return fo("recoil_memory_managament_2020")&&Wu(e),bd(e)}function Td(e){const t=td();return md(Sd(e),e,t)}var Ad={recoilComponentGetRecoilValueCount_FOR_TESTING:{current:0},useRecoilInterface:function(){const e=Ku(),t=td(),[,n]=hd([]),r=dd(new Set);r.current=new Set;const i=dd(new Set),a=dd(new Map),s=cd((e=>{const t=a.current.get(e);t&&(t.release(),a.current.delete(e))}),[a]),o=cd(((e,t)=>{a.current.has(t)&&n([])}),[]);return ld((()=>{const n=t.current;Zo(r.current,i.current).forEach((t=>{if(a.current.has(t))return void Oo(`Double subscription to RecoilValue "${t}"`);const r=od(n,new rd(t),(e=>o(e,t)),e);a.current.set(t,r);n.getState().nextTree?n.getState().queuedComponentCallbacks_DEPRECATED.push((()=>{o(n.getState(),t)})):o(n.getState(),t)})),Zo(i.current,r.current).forEach((e=>{s(e)})),i.current=r.current})),ld((()=>{const n=a.current;return Zo(r.current,new Set(n.keys())).forEach((r=>{const i=od(t.current,new rd(r),(e=>o(e,r)),e);n.set(r,i)})),()=>n.forEach(((e,t)=>s(t)))}),[e,t,s,o]),ud((()=>{function e(e){return n=>{ad(t.current,e,n)}}function n(e){var n;r.current.has(e.key)||(r.current=pd(r.current,e.key));const i=t.current.getState();return id(t.current,e,Yu().early&&null!==(n=i.nextTree)&&void 0!==n?n:i.currentTree)}function i(e){return md(n(e),e,t)}return{getRecoilValue:i,getRecoilValueLoadable:n,getRecoilState:function(t){return[i(t),e(t)]},getRecoilStateLoadable:function(t){return[n(t),e(t)]},getSetRecoilState:e,getResetRecoilState:function(e){return()=>ad(t.current,e,Qu)}}}),[r,t])},useRecoilState:function(e){return[Ed(e),_d(e)]},useRecoilStateLoadable:function(e){return[wd(e),_d(e)]},useRecoilValue:Ed,useRecoilValueLoadable:wd,useResetRecoilState:function(e){const t=td();return cd((()=>{ad(t.current,e,Qu)}),[t,e])},useSetRecoilState:_d,useSetUnvalidatedAtomValues:function(){const e=td();return(t,n={})=>{Gu((()=>{e.current.addTransactionMetadata(n),t.forEach(((t,n)=>sd(e.current,new rd(n),t)))}))}},useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Sd,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Td,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:function(e){return[Td(e),_d(e)]}};var Nd=function(e,t){const n=new Map;for(const[r,i]of e)t(i,r)&&n.set(r,i);return n};var Cd=function(e,t){const n=new Set;for(const r of e)t(r)&&n.add(r);return n};var Md=function(...e){const t=new Map;for(let n=0;n<e.length;n++){const r=e[n].keys();let i;for(;!(i=r.next()).done;)t.set(i.value,e[n].get(i.value))}return t};const{batchUpdates:Rd}=gl,{DEFAULT_VALUE:xd,getNode:kd,nodes:Id}=Vo,{useStoreRef:Od}=Pu,{AbstractRecoilValue:Pd,setRecoilValueLoadable:Ld}=Yc,{SUSPENSE_TIMEOUT_MS:Dd}=ll,{cloneSnapshot:Bd}=Yl,{useCallback:jd,useEffect:qd,useRef:$d,useState:Ud}=Ds,{isSSR:Fd}=El;function Vd(e){const t=Od();qd((()=>t.current.subscribeToTransactions(e).release),[e,t])}function Hd(e){const t=e.atomValues.toMap(),n=ec(Nd(t,((e,t)=>{const n=kd(t).persistence_UNSTABLE;return null!=n&&"none"!==n.type&&"hasValue"===e.state})),(e=>e.contents));return Md(e.nonvalidatedAtoms.toMap(),n)}function zd(e,t){var n;const r=e.getState(),i=null!==(n=r.nextTree)&&void 0!==n?n:r.currentTree,a=t.getStore_INTERNAL().getState().currentTree;Rd((()=>{const n=new Set;for(const e of[i.atomValues.keys(),a.atomValues.keys()])for(const t of e){var r,s;(null===(r=i.atomValues.get(t))||void 0===r?void 0:r.contents)!==(null===(s=a.atomValues.get(t))||void 0===s?void 0:s.contents)&&kd(t).shouldRestoreFromSnapshots&&n.add(t)}n.forEach((t=>{Ld(e,new Pd(t),a.atomValues.has(t)?Fs(a.atomValues.get(t)):xd)})),e.replaceState((e=>({...e,stateID:t.getID()})))}))}var Wd={useRecoilSnapshot:function(){const e=Od(),[t,n]=Ud((()=>Bd(e.current))),r=ju(t),i=$d(),a=$d();if(Vd(jd((e=>n(Bd(e))),[])),qd((()=>{const e=t.retain();var n;i.current&&!Fd&&(window.clearTimeout(i.current),i.current=null,null===(n=a.current)||void 0===n||n.call(a),a.current=null);return()=>{window.setTimeout(e,10)}}),[t]),r!==t&&!Fd){var s;if(i.current)window.clearTimeout(i.current),i.current=null,null===(s=a.current)||void 0===s||s.call(a),a.current=null;a.current=t.retain(),i.current=window.setTimeout((()=>{var e;i.current=null,null===(e=a.current)||void 0===e||e.call(a),a.current=null}),Dd)}return t},gotoSnapshot:zd,useGotoRecoilSnapshot:function(){const e=Od();return jd((t=>zd(e.current,t)),[e])},useRecoilTransactionObserver:function(e){Vd(jd((t=>{const n=Bd(t,"latest"),r=Bd(t,"previous");e({snapshot:n,previousSnapshot:r})}),[e]))},useTransactionObservation_DEPRECATED:function(e){Vd(jd((t=>{let n=t.getState().previousTree;const r=t.getState().currentTree;n||(bo("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),n=t.getState().currentTree);const i=Hd(r),a=Hd(n),s=ec(Id,(e=>{var t,n,r,i;return{persistence_UNSTABLE:{type:null!==(t=null===(n=e.persistence_UNSTABLE)||void 0===n?void 0:n.type)&&void 0!==t?t:"none",backButton:null!==(r=null===(i=e.persistence_UNSTABLE)||void 0===i?void 0:i.backButton)&&void 0!==r&&r}}})),o=Cd(r.dirtyAtoms,(e=>i.has(e)||a.has(e)));e({atomValues:i,previousAtomValues:a,atomInfo:s,modifiedAtoms:o,transactionMetadata:{...r.transactionMetadata}})}),[e]))},useTransactionSubscription_DEPRECATED:Vd};const{peekNodeInfo:Kd}=Cc,{useStoreRef:Gd}=Pu;var Qd=function(){const e=Gd();return({key:t})=>Kd(e.current,e.current.getState().currentTree,t)};const{reactMode:Jd}=So,{RecoilRoot:Yd,useStoreRef:Xd}=Pu,{useMemo:Zd}=Ds;var eh=function(){"MUTABLE_SOURCE"===Jd().mode&&console.warn("Warning: There are known issues using useRecoilBridgeAcrossReactRoots() in recoil_mutable_source rendering mode.  Please consider upgrading to recoil_sync_external_store mode.");const e=Xd().current;return Zd((()=>function({children:t}){return Ds.createElement(Yd,{store_INTERNAL:e},t)}),[e])};const{loadableWithValue:th}=lo,{initializeNode:nh}=Cc,{DEFAULT_VALUE:rh,getNode:ih}=Vo,{copyTreeState:ah,getRecoilValueAsLoadable:sh,invalidateDownstreams:oh,writeLoadableToTreeState:ch}=Yc;function lh(e){return"atom"===ih(e.key).nodeType}class uh{constructor(e,t){Vs(this,"_store",void 0),Vs(this,"_treeState",void 0),Vs(this,"_changes",void 0),Vs(this,"get",(e=>{if(this._changes.has(e.key))return this._changes.get(e.key);if(!lh(e))throw $s("Reading selectors within atomicUpdate is not supported");const t=sh(this._store,e,this._treeState);if("hasValue"===t.state)return t.contents;throw"hasError"===t.state?t.contents:$s(`Expected Recoil atom ${e.key} to have a value, but it is in a loading state.`)})),Vs(this,"set",((e,t)=>{if(!lh(e))throw $s("Setting selectors within atomicUpdate is not supported");if("function"==typeof t){const n=this.get(e);this._changes.set(e.key,t(n))}else nh(this._store,e.key,"set"),this._changes.set(e.key,t)})),Vs(this,"reset",(e=>{this.set(e,rh)})),this._store=e,this._treeState=t,this._changes=new Map}newTreeState_INTERNAL(){if(0===this._changes.size)return this._treeState;const e=ah(this._treeState);for(const[t,n]of this._changes)ch(e,t,th(n));return oh(this._store,e),e}}var dh=function(e){return t=>{e.replaceState((n=>{const r=new uh(e,n);return t(r),r.newTreeState_INTERNAL()}))}},hh=dh,ph=Object.freeze({__proto__:null,atomicUpdater:hh});var fh=function(e,t){if(!e)throw new Error(t)};const{atomicUpdater:mh}=ph,{batchUpdates:yh}=gl,{DEFAULT_VALUE:gh}=Vo,{useStoreRef:bh}=Pu,{refreshRecoilValue:vh,setRecoilValue:wh}=Yc,{cloneSnapshot:Eh}=Yl,{gotoSnapshot:_h}=Wd,{useCallback:Sh}=Ds;class Th{}const Ah=new Th;function Nh(e,t,n,r){let i,a=Ah;var s;(yh((()=>{const s="useRecoilCallback() expects a function that returns a function: it accepts a function of the type (RecoilInterface) => (Args) => ReturnType and returns a callback function (Args) => ReturnType, where RecoilInterface is an object {snapshot, set, ...} and Args and ReturnType are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if("function"!=typeof t)throw $s(s);const o=yc({...null!=r?r:{},set:(t,n)=>wh(e,t,n),reset:t=>wh(e,t,gh),refresh:t=>vh(e,t),gotoSnapshot:t=>_h(e,t),transact_UNSTABLE:t=>mh(e)(t)},{snapshot:()=>{const t=Eh(e);return i=t.retain(),t}}),c=t(o);if("function"!=typeof c)throw $s(s);a=c(...n)})),a instanceof Th&&fh(!1),Us(a))?a=a.finally((()=>{var e;null===(e=i)||void 0===e||e()})):null===(s=i)||void 0===s||s();return a}var Ch={recoilCallback:Nh,useRecoilCallback:function(e,t){const n=bh();return Sh(((...t)=>Nh(n.current,e,t)),null!=t?[...t,n]:void 0)}};const{useStoreRef:Mh}=Pu,{refreshRecoilValue:Rh}=Yc,{useCallback:xh}=Ds;var kh=function(e){const t=Mh();return xh((()=>{const n=t.current;Rh(n,e)}),[e,t])};const{atomicUpdater:Ih}=ph,{useStoreRef:Oh}=Pu,{useMemo:Ph}=Ds;var Lh=function(e,t){const n=Oh();return Ph((()=>(...t)=>{Ih(n.current)((n=>{e(n)(...t)}))}),null!=t?[...t,n]:void 0)};var Dh=class{constructor(e){Vs(this,"value",void 0),this.value=e}},Bh=Object.freeze({__proto__:null,WrappedValue:Dh});const{isFastRefreshEnabled:jh}=So;class qh extends Error{}var $h=class{constructor(e){var t,n,r;Vs(this,"_name",void 0),Vs(this,"_numLeafs",void 0),Vs(this,"_root",void 0),Vs(this,"_onHit",void 0),Vs(this,"_onSet",void 0),Vs(this,"_mapNodeValue",void 0),this._name=null==e?void 0:e.name,this._numLeafs=0,this._root=null,this._onHit=null!==(t=null==e?void 0:e.onHit)&&void 0!==t?t:()=>{},this._onSet=null!==(n=null==e?void 0:e.onSet)&&void 0!==n?n:()=>{},this._mapNodeValue=null!==(r=null==e?void 0:e.mapNodeValue)&&void 0!==r?r:e=>e}size(){return this._numLeafs}root(){return this._root}get(e,t){var n;return null===(n=this.getLeafNode(e,t))||void 0===n?void 0:n.value}getLeafNode(e,t){if(null==this._root)return;let n=this._root;for(;n;){if(null==t||t.onNodeVisit(n),"leaf"===n.type)return this._onHit(n),n;const r=this._mapNodeValue(e(n.nodeKey));n=n.branches.get(r)}}set(e,t,n){const r=()=>{var r,i,a,s;let o,c;for(const[t,r]of e){var l,u,d;const e=this._root;if("leaf"===(null==e?void 0:e.type))throw this.invalidCacheError();const i=o;if(o=i?i.branches.get(c):e,o=null!==(l=o)&&void 0!==l?l:{type:"branch",nodeKey:t,parent:i,branches:new Map,branchKey:c},"branch"!==o.type||o.nodeKey!==t)throw this.invalidCacheError();null==i||i.branches.set(c,o),null==n||null===(u=n.onNodeVisit)||void 0===u||u.call(n,o),c=this._mapNodeValue(r),this._root=null!==(d=this._root)&&void 0!==d?d:o}const h=o?null===(r=o)||void 0===r?void 0:r.branches.get(c):this._root;if(null!=h&&("leaf"!==h.type||h.branchKey!==c))throw this.invalidCacheError();const p={type:"leaf",value:t,parent:o,branchKey:c};null===(i=o)||void 0===i||i.branches.set(c,p),this._root=null!==(a=this._root)&&void 0!==a?a:p,this._numLeafs++,this._onSet(p),null==n||null===(s=n.onNodeVisit)||void 0===s||s.call(n,p)};try{r()}catch(e){if(!(e instanceof qh))throw e;this.clear(),r()}}delete(e){const t=this.root();if(!t)return!1;if(e===t)return this._root=null,this._numLeafs=0,!0;let n=e.parent,r=e.branchKey;for(;n;){var i;if(n.branches.delete(r),n===t)return 0===n.branches.size?(this._root=null,this._numLeafs=0):this._numLeafs--,!0;if(n.branches.size>0)break;r=null===(i=n)||void 0===i?void 0:i.branchKey,n=n.parent}for(;n!==t;n=n.parent)if(null==n)return!1;return this._numLeafs--,!0}clear(){this._numLeafs=0,this._root=null}invalidCacheError(){const e=jh()?"Possible Fast Refresh module reload detected.  This may also be caused by an selector returning inconsistent values. Resetting cache.":"Invalid cache values.  This happens when selectors do not return consistent values for the same input dependency values.  That may also be caused when using Fast Refresh to change a selector implementation.  Resetting cache.";throw bo(e+(null!=this._name?` - ${this._name}`:"")),new qh}},Uh=$h,Fh=Object.freeze({__proto__:null,TreeCache:Uh});var Vh=class{constructor(e){var t;Vs(this,"_maxSize",void 0),Vs(this,"_size",void 0),Vs(this,"_head",void 0),Vs(this,"_tail",void 0),Vs(this,"_map",void 0),Vs(this,"_keyMapper",void 0),this._maxSize=e.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=null!==(t=e.mapKey)&&void 0!==t?t:e=>e}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(e){return this._map.has(this._keyMapper(e))}get(e){const t=this._keyMapper(e),n=this._map.get(t);if(n)return this.set(e,n.value),n.value}set(e,t){const n=this._keyMapper(e);this._map.get(n)&&this.delete(e);const r=this.head(),i={key:e,right:r,left:null,value:t};r?r.left=i:this._tail=i,this._map.set(n,i),this._head=i,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){const e=this.tail();e&&this.delete(e.key)}delete(e){const t=this._keyMapper(e);if(!this._size||!this._map.has(t))return;const n=Fs(this._map.get(t)),r=n.right,i=n.left;r&&(r.left=n.left),i&&(i.right=n.right),n===this.head()&&(this._head=r),n===this.tail()&&(this._tail=i),this._map.delete(t),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},Hh=Object.freeze({__proto__:null,LRUCache:Vh});const{LRUCache:zh}=Hh,{TreeCache:Wh}=Fh;var Kh=function({name:e,maxSize:t,mapNodeValue:n=(e=>e)}){const r=new zh({maxSize:t}),i=new Wh({name:e,mapNodeValue:n,onHit:e=>{r.set(e,!0)},onSet:e=>{const n=r.tail();r.set(e,!0),n&&i.size()>t&&i.delete(n.key)}});return i};function Gh(e,t,n){if("string"==typeof e&&!e.includes('"')&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if(!0!==(null==t?void 0:t.allowFunctions))throw $s("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`}if(null===e)return"null";var r;if("object"!=typeof e)return null!==(r=JSON.stringify(e))&&void 0!==r?r:"";if(Us(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map(((e,n)=>Gh(e,t,n.toString())))}]`;if("function"==typeof e.toJSON)return Gh(e.toJSON(n),t,n);if(e instanceof Map){const r={};for(const[n,i]of e)r["string"==typeof n?n:Gh(n,t)]=i;return Gh(r,t,n)}return e instanceof Set?Gh(Array.from(e).sort(((e,n)=>Gh(e,t).localeCompare(Gh(n,t)))),t,n):void 0!==Symbol&&null!=e[Symbol.iterator]&&"function"==typeof e[Symbol.iterator]?Gh(Array.from(e),t,n):`{${Object.keys(e).filter((t=>void 0!==e[t])).sort().map((n=>`${Gh(n,t)}:${Gh(e[n],t,n)}`)).join(",")}}`}var Qh=function(e,t={allowFunctions:!1}){return Gh(e,t)};const{TreeCache:Jh}=Fh,Yh={equality:"reference",eviction:"keep-all",maxSize:1/0};var Xh=function({equality:e=Yh.equality,eviction:t=Yh.eviction,maxSize:n=Yh.maxSize}=Yh,r){const i=function(e){switch(e){case"reference":return e=>e;case"value":return e=>Qh(e)}throw $s(`Unrecognized equality policy ${e}`)}(e);return function(e,t,n,r){switch(e){case"keep-all":return new Jh({name:r,mapNodeValue:n});case"lru":return Kh({name:r,maxSize:Fs(t),mapNodeValue:n});case"most-recent":return Kh({name:r,maxSize:1,mapNodeValue:n})}throw $s(`Unrecognized eviction policy ${e}`)}(t,n,i,r)};const{isReactNative:Zh,isWindow:ep}=El;var tp={startPerfBlock:function(e){return()=>null}};const{isLoadable:np,loadableWithError:rp,loadableWithPromise:ip,loadableWithValue:ap}=lo,{WrappedValue:sp}=Bh,{getNodeLoadable:op,peekNodeLoadable:cp,setNodeValue:lp}=Cc,{saveDepsToStore:up}=nc,{DEFAULT_VALUE:dp,getConfigDeletionHandler:hp,getNode:pp,registerNode:fp}=Vo,{isRecoilValue:mp}=Io,{markRecoilValueModified:yp}=Yc,{retainedByOptionWithDefault:gp}=ll,{recoilCallback:bp}=Ch,{startPerfBlock:vp}=tp;class wp{}const Ep=new wp,_p=[],Sp=new Map,Tp=(()=>{let e=0;return()=>e++})();function Ap(e){let t=null;const{key:n,get:r,cachePolicy_UNSTABLE:i}=e,a=null!=e.set?e.set:void 0;const s=new Set,o=Xh(null!=i?i:{equality:"reference",eviction:"keep-all"},n),c=gp(e.retainedBy_UNSTABLE),l=new Map;let u=0;function d(){return!fo("recoil_memory_managament_2020")||u>0}function h(e){return e.getState().knownSelectors.add(n),u++,()=>{u--}}function p(){return void 0!==hp(n)&&!d()}function f(e,t,n,r,i){C(t,r,i),m(e,n)}function m(e,t){N(e,t)&&A(e),y(t,!0)}function y(e,n){const r=Sp.get(e);if(null!=r){for(const e of r)yp(e,Fs(t));n&&Sp.delete(e)}}function g(e,t){let n=Sp.get(t);null==n&&Sp.set(t,n=new Set),n.add(e)}function b(e,t,n,r,i,a){return t.then((r=>{if(!d())throw A(e),Ep;null!=a.loadingDepKey&&a.loadingDepPromise===t?n.atomValues.set(a.loadingDepKey,ap(r)):e.getState().knownSelectors.forEach((e=>{n.atomValues.delete(e)}));const s=E(e,n);if(s&&"loading"!==s.state){if((N(e,i)||null==T(e))&&m(e,i),"hasValue"===s.state)return s.contents;throw s.contents}if(!N(e,i)){const t=S(e,n);if(null!=t)return t.loadingLoadable.contents}const[o,c]=w(e,n,i);if("loading"!==o.state&&f(e,n,i,o,c),"hasError"===o.state)throw o.contents;return o.contents})).catch((t=>{if(t instanceof wp)throw Ep;if(!d())throw A(e),Ep;const a=rp(t);throw f(e,n,i,a,r),t}))}function v(e,t,r,i){var a,o,c,l,u,d,h;(N(e,i)||t.version===(null===(a=e.getState())||void 0===a||null===(o=a.currentTree)||void 0===o?void 0:o.version)||t.version===(null===(c=e.getState())||void 0===c||null===(l=c.nextTree)||void 0===l?void 0:l.version))&&up(n,r,e,null!==(u=null===(d=e.getState())||void 0===d||null===(h=d.nextTree)||void 0===h?void 0:h.version)&&void 0!==u?u:e.getState().currentTree.version);for(const e of r)s.add(e)}function w(e,i,a){const s=vp(n);let o=!0,c=!0;const l=()=>{s(),c=!1};let u,h,p=!1;const m={loadingDepKey:null,loadingDepPromise:null},g=new Map;function w({key:t}){const n=op(e,i,t);switch(g.set(t,n),o||(v(e,i,new Set(g.keys()),a),function(e,t){N(e,t)&&(Fs(T(e)).stateVersions.clear(),y(t,!1))}(e,a)),n.state){case"hasValue":return n.contents;case"hasError":throw n.contents;case"loading":throw m.loadingDepKey=t,m.loadingDepPromise=n.contents,n.contents}throw $s("Invalid Loadable state")}const E=n=>(...r)=>{if(c)throw $s("Callbacks from getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can work with Recoil state without a subscription.");return null==t&&fh(!1),bp(e,n,r,{node:t})};try{u=r({get:w,getCallback:E}),u=mp(u)?w(u):u,np(u)&&("hasError"===u.state&&(p=!0),u=u.contents),Us(u)?u=function(e,t,n,r,i,a){return t.then((t=>{if(!d())throw A(e),Ep;const a=ap(t);return f(e,n,i,a,r),t})).catch((t=>{if(!d())throw A(e),Ep;if(Us(t))return b(e,t,n,r,i,a);const s=rp(t);throw f(e,n,i,s,r),t}))}(e,u,i,g,a,m).finally(l):l(),u=u instanceof sp?u.value:u}catch(t){u=t,Us(u)?u=b(e,u,i,g,a,m).finally(l):(p=!0,l())}return h=p?rp(u):Us(u)?ip(u):ap(u),o=!1,function(e,t,n){if(N(e,t)){const t=T(e);null!=t&&(t.depValuesDiscoveredSoFarDuringAsyncWork=n)}}(e,a,g),v(e,i,new Set(g.keys()),a),[h,g]}function E(e,t){let r=t.atomValues.get(n);if(null!=r)return r;const i=new Set;try{r=o.get((n=>("string"!=typeof n&&fh(!1),op(e,t,n).contents)),{onNodeVisit:e=>{"branch"===e.type&&e.nodeKey!==n&&i.add(e.nodeKey)}})}catch(e){throw $s(`Problem with cache lookup for selector "${n}": ${e.message}`)}var a;r&&(t.atomValues.set(n,r),v(e,t,i,null===(a=T(e))||void 0===a?void 0:a.executionID));return r}function _(e,t){const n=E(e,t);if(null!=n)return A(e),n;const r=S(e,t);var i;if(null!=r)return"loading"===(null===(i=r.loadingLoadable)||void 0===i?void 0:i.state)&&g(e,r.executionID),r.loadingLoadable;const a=Tp(),[s,o]=w(e,t,a);return"loading"===s.state?(!function(e,t,n,r,i){l.set(e,{depValuesDiscoveredSoFarDuringAsyncWork:r,executionID:t,loadingLoadable:n,stateVersions:new Map([[i.version,!0]])})}(e,a,s,o,t),g(e,a)):(A(e),C(t,s,o)),s}function S(e,t){const n=bl([l.has(e)?[Fs(l.get(e))]:[],Po(mc(l,(([t])=>t!==e)),(([,e])=>e))]);function r(n){for(const[r,i]of n)if(!op(e,t,r).is(i))return!0;return!1}for(const e of n){if(e.stateVersions.get(t.version)||!r(e.depValuesDiscoveredSoFarDuringAsyncWork))return e.stateVersions.set(t.version,!0),e;e.stateVersions.set(t.version,!1)}}function T(e){return l.get(e)}function A(e){l.delete(e)}function N(e,t){var n;return t===(null===(n=T(e))||void 0===n?void 0:n.executionID)}function C(e,t,r){e.atomValues.set(n,t);try{o.set(function(e){return Array.from(e.entries()).map((([e,t])=>[e,t.contents]))}(r),t)}catch(e){throw $s(`Problem with setting cache for selector "${n}": ${e.message}`)}}function M(e,t){const r=t.atomValues.get(n);return null!=r?r:o.get((n=>{var r;return"string"!=typeof n&&fh(!1),null===(r=cp(e,t,n))||void 0===r?void 0:r.contents}))}function R(e,t){return function(e){if(_p.includes(n)){const e=`Recoil selector has circular dependencies: ${_p.slice(_p.indexOf(n)).join(" \u2192 ")}`;return rp($s(e))}_p.push(n);try{return e()}finally{_p.pop()}}((()=>_(e,t)))}function x(e){e.atomValues.delete(n)}function k(e,n){null==t&&fh(!1);for(const t of s){var r;const i=pp(t);null===(r=i.clearCache)||void 0===r||r.call(i,e,n)}s.clear(),x(n),o.clear(),yp(e,t)}if(null!=a){return t=fp({key:n,nodeType:"selector",peek:M,get:R,set:(e,t,r)=>{let i=!1;const s=new Map;function o({key:r}){if(i)throw $s("Recoil: Async selector sets are not currently supported.");const a=op(e,t,r);if("hasValue"===a.state)return a.contents;if("loading"===a.state){const e=`Getting value of asynchronous atom or selector "${r}" in a pending state while setting selector "${n}" is not yet supported.`;throw bo(e),$s(e)}throw a.contents}function c(n,r){if(i){const e="Recoil: Async selector sets are not currently supported.";throw bo(e),$s(e)}const a="function"==typeof r?r(o(n)):r;lp(e,t,n.key,a).forEach(((e,t)=>s.set(t,e)))}const l=a({set:c,get:o,reset:function(e){c(e,dp)}},r);if(void 0!==l)throw Us(l)?$s("Recoil: Async selector sets are not currently supported."):$s("Recoil: selector set should be a void function.");return i=!0,s},init:h,invalidate:x,clearCache:k,shouldDeleteConfigOnRelease:p,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:c})}return t=fp({key:n,nodeType:"selector",peek:M,get:R,init:h,invalidate:x,clearCache:k,shouldDeleteConfigOnRelease:p,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:c})}Ap.value=e=>new sp(e);var Np=Ap;const{isLoadable:Cp,loadableWithError:Mp,loadableWithPromise:Rp,loadableWithValue:xp}=lo,{WrappedValue:kp}=Bh,{peekNodeInfo:Ip}=Cc,{DEFAULT_VALUE:Op,DefaultValue:Pp,getConfigDeletionHandler:Lp,registerNode:Dp,setConfigDeletionHandler:Bp}=Vo,{isRecoilValue:jp}=Io,{getRecoilValueAsLoadable:qp,markRecoilValueModified:$p,setRecoilValue:Up,setRecoilValueLoadable:Fp}=Yc,{retainedByOptionWithDefault:Vp}=ll,Hp=e=>e instanceof kp?e.value:e;function zp(e){const{key:t,persistence_UNSTABLE:n}=e,r=Vp(e.retainedBy_UNSTABLE);let i=0;function a(e){return Rp(e.then((e=>(o=xp(e),e))).catch((e=>{throw o=Mp(e),e})))}let s,o=Us(e.default)?a(e.default):Cp(e.default)?"loading"===e.default.state?a(e.default.contents):e.default:xp(Hp(e.default));l(o.contents);const c=new Map;function l(e){return e}function u(e,n){var r,i;return null!==(r=null!==(i=n.atomValues.get(t))&&void 0!==i?i:s)&&void 0!==r?r:o}const d=Dp({key:t,nodeType:"atom",peek:u,get:function(e,r){if(r.atomValues.has(t))return Fs(r.atomValues.get(t));if(r.nonvalidatedAtoms.has(t)){if(null!=s)return s;if(null==n)return Oo(`Tried to restore a persisted value for atom ${t} but it has no persistence settings.`),o;const e=r.nonvalidatedAtoms.get(t),i=n.validator(e,Op),a=i instanceof Pp?o:xp(i);return s=a,s}return o},set:function(e,n,r){if(n.atomValues.has(t)){const e=Fs(n.atomValues.get(t));if("hasValue"===e.state&&r===e.contents)return new Map}else if(!n.nonvalidatedAtoms.has(t)&&r instanceof Pp)return new Map;return s=void 0,(new Map).set(t,xp(r))},init:function(n,r,a){var s;if(i++,n.getState().knownAtoms.add(t),"loading"===o.state){const f=()=>{var e;(null!==(e=n.getState().nextTree)&&void 0!==e?e:n.getState().currentTree).atomValues.has(t)||$p(n,d)};o.contents.finally(f)}const l=null!==(s=e.effects)&&void 0!==s?s:e.effects_UNSTABLE;if(null!=l){let m=Op,y=!0,g=!1,b=null;function v(e){if(y&&e.key===t){const e=m;return e instanceof Pp?u(n,r):Us(e)?Rp(e.then((e=>e instanceof Pp?o.toPromise():e))):xp(e)}return qp(n,e)}function w(e){return v(e).toPromise()}function E(e){var r;const i=Ip(n,null!==(r=n.getState().nextTree)&&void 0!==r?r:n.getState().currentTree,e.key);return!y||e.key!==t||m instanceof Pp?i:{...i,isSet:!0,loadable:v(e)}}const _=e=>t=>{if(y){const n=v(d),r="hasValue"===n.state?n.contents:Op;m="function"==typeof t?t(r):t,Us(m)&&(m=m.then((t=>(b={effect:e,value:t},t))))}else{if(Us(t))throw $s("Setting atoms to async values is not implemented.");"function"!=typeof t&&(b={effect:e,value:Hp(t)}),Up(n,d,"function"==typeof t?n=>{const r=Hp(t(n));return b={effect:e,value:r},r}:Hp(t))}},S=e=>()=>_(e)(Op),T=e=>r=>{var i;const{release:a}=n.subscribeToTransactions((n=>{var i;let{currentTree:a,previousTree:s}=n.getState();s||(bo("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),s=a);const c=null!==(i=a.atomValues.get(t))&&void 0!==i?i:o;if("hasValue"===c.state){var l,u,d,h;const n=c.contents,i=null!==(l=s.atomValues.get(t))&&void 0!==l?l:o,p="hasValue"===i.state?i.contents:Op;(null===(u=b)||void 0===u?void 0:u.effect)!==e||(null===(d=b)||void 0===d?void 0:d.value)!==n?r(n,p,!a.atomValues.has(t)):(null===(h=b)||void 0===h?void 0:h.effect)===e&&(b=null)}}),t);c.set(n,[...null!==(i=c.get(n))&&void 0!==i?i:[],a])};for(const A of l)try{const N=A({node:d,storeID:n.storeID,parentStoreID_UNSTABLE:n.parentStoreID,trigger:a,setSelf:_(A),resetSelf:S(A),onSet:T(A),getPromise:w,getLoadable:v,getInfo_UNSTABLE:E});var h;if(null!=N)c.set(n,[...null!==(h=c.get(n))&&void 0!==h?h:[],N])}catch(C){m=C,g=!0}if(y=!1,!(m instanceof Pp)){var p;const M=g?Mp(m):Us(m)?Rp(function(e,n){const r=n.then((n=>{var i,a;return(null===(a=(null!==(i=e.getState().nextTree)&&void 0!==i?i:e.getState().currentTree).atomValues.get(t))||void 0===a?void 0:a.contents)===r&&Up(e,d,n),n})).catch((n=>{var i,a;throw(null===(a=(null!==(i=e.getState().nextTree)&&void 0!==i?i:e.getState().currentTree).atomValues.get(t))||void 0===a?void 0:a.contents)===r&&Fp(e,d,Mp(n)),n}));return r}(n,m)):xp(Hp(m));M.contents,r.atomValues.set(t,M),null===(p=n.getState().nextTree)||void 0===p||p.atomValues.set(t,M)}}return()=>{var e;i--,null===(e=c.get(n))||void 0===e||e.forEach((e=>e())),c.delete(n)}},invalidate:function(){s=void 0},shouldDeleteConfigOnRelease:function(){return void 0!==Lp(t)&&i<=0},dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:r});return d}function Wp(e){const{...t}=e,n="default"in e?e.default:new Promise((()=>{}));return jp(n)?function(e){const t=Wp({...e,default:Op,persistence_UNSTABLE:void 0===e.persistence_UNSTABLE?void 0:{...e.persistence_UNSTABLE,validator:t=>t instanceof Pp?t:Fs(e.persistence_UNSTABLE).validator(t,Op)},effects:e.effects,effects_UNSTABLE:e.effects_UNSTABLE}),n=Np({key:`${e.key}__withFallback`,get:({get:n})=>{const r=n(t);return r instanceof Pp?e.default:r},set:({set:e},n)=>e(t,n),cachePolicy_UNSTABLE:{eviction:"most-recent"},dangerouslyAllowMutability:e.dangerouslyAllowMutability});return Bp(n.key,Lp(e.key)),n}({...t,default:n}):zp({...t,default:n})}Wp.value=e=>new kp(e);var Kp=Wp;var Gp=class{constructor(e){var t;Vs(this,"_map",void 0),Vs(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=null!==(t=null==e?void 0:e.mapKey)&&void 0!==t?t:e=>e}size(){return this._map.size}has(e){return this._map.has(this._keyMapper(e))}get(e){return this._map.get(this._keyMapper(e))}set(e,t){this._map.set(this._keyMapper(e),t)}delete(e){this._map.delete(this._keyMapper(e))}clear(){this._map.clear()}},Qp=Object.freeze({__proto__:null,MapCache:Gp});const{LRUCache:Jp}=Hh,{MapCache:Yp}=Qp,Xp={equality:"reference",eviction:"none",maxSize:1/0};var Zp=function({equality:e=Xp.equality,eviction:t=Xp.eviction,maxSize:n=Xp.maxSize}=Xp){const r=function(e){switch(e){case"reference":return e=>e;case"value":return e=>Qh(e)}throw $s(`Unrecognized equality policy ${e}`)}(e);return function(e,t,n){switch(e){case"keep-all":return new Yp({mapKey:n});case"lru":return new Jp({mapKey:n,maxSize:Fs(t)});case"most-recent":return new Jp({mapKey:n,maxSize:1})}throw $s(`Unrecognized eviction policy ${e}`)}(t,n,r)};const{setConfigDeletionHandler:ef}=Vo;var tf=function(e){var t,n;const r=Zp({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return t=>{var n,i;const a=r.get(t);if(null!=a)return a;const{cachePolicyForParams_UNSTABLE:s,...o}=e,c="default"in e?e.default:new Promise((()=>{})),l=Kp({...o,key:`${e.key}__${null!==(n=Qh(t))&&void 0!==n?n:"void"}`,default:"function"==typeof c?c(t):c,retainedBy_UNSTABLE:"function"==typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE,effects:"function"==typeof e.effects?e.effects(t):"function"==typeof e.effects_UNSTABLE?e.effects_UNSTABLE(t):null!==(i=e.effects)&&void 0!==i?i:e.effects_UNSTABLE});return r.set(t,l),ef(l.key,(()=>{r.delete(t)})),l}};const{setConfigDeletionHandler:nf}=Vo;let rf=0;var af=function(e){var t,n;const r=Zp({equality:null!==(t=null===(n=e.cachePolicyForParams_UNSTABLE)||void 0===n?void 0:n.equality)&&void 0!==t?t:"value",eviction:"keep-all"});return t=>{var n;let i;try{i=r.get(t)}catch(t){throw $s(`Problem with cache lookup for selector ${e.key}: ${t.message}`)}if(null!=i)return i;const a=`${e.key}__selectorFamily/${null!==(n=Qh(t,{allowFunctions:!0}))&&void 0!==n?n:"void"}/${rf++}`,s=n=>e.get(t)(n),o=e.cachePolicy_UNSTABLE,c="function"==typeof e.retainedBy_UNSTABLE?e.retainedBy_UNSTABLE(t):e.retainedBy_UNSTABLE;let l;if(null!=e.set){const n=e.set;l=Np({key:a,get:s,set:(e,r)=>n(t)(e,r),cachePolicy_UNSTABLE:o,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:c})}else l=Np({key:a,get:s,cachePolicy_UNSTABLE:o,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:c});return r.set(t,l),nf(l.key,(()=>{r.delete(t)})),l}};const sf=af({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});var of=function(e){return sf(e)};const cf=af({key:"__error",get:e=>()=>{throw $s(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});var lf=function(e){return cf(e)};var uf=function(e){return e};const{loadableWithError:df,loadableWithPromise:hf,loadableWithValue:pf}=lo;function ff(e,t){const n=Array(t.length).fill(void 0),r=Array(t.length).fill(void 0);for(const[i,a]of t.entries())try{n[i]=e(a)}catch(e){r[i]=e}return[n,r]}function mf(e){return null!=e&&!Us(e)}function yf(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map((t=>e[t]))}function gf(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce(((e,n,r)=>({...e,[n]:t[r]})),{})}function bf(e,t,n){return gf(e,n.map(((e,n)=>null==e?pf(t[n]):Us(e)?hf(e):df(e))))}const vf=af({key:"__waitForNone",get:e=>({get:t})=>{const n=yf(e),[r,i]=ff(t,n);return bf(e,r,i)},dangerouslyAllowMutability:!0}),wf=af({key:"__waitForAny",get:e=>({get:t})=>{const n=yf(e),[r,i]=ff(t,n);return i.some((e=>!Us(e)))?bf(e,r,i):new Promise((t=>{for(const[n,a]of i.entries())Us(a)&&a.then((a=>{r[n]=a,i[n]=void 0,t(bf(e,r,i))})).catch((a=>{i[n]=a,t(bf(e,r,i))}))}))},dangerouslyAllowMutability:!0}),Ef=af({key:"__waitForAll",get:e=>({get:t})=>{const n=yf(e),[r,i]=ff(t,n);if(i.every((e=>null==e)))return gf(e,r);const a=i.find(mf);if(null!=a)throw a;return Promise.all(i).then((t=>{return gf(e,(n=r,t.map(((e,t)=>void 0===e?n[t]:e))));var n}))},dangerouslyAllowMutability:!0}),_f=af({key:"__waitForAllSettled",get:e=>({get:t})=>{const n=yf(e),[r,i]=ff(t,n);return i.every((e=>!Us(e)))?bf(e,r,i):Promise.all(i.map(((e,t)=>Us(e)?e.then((e=>{r[t]=e,i[t]=void 0})).catch((e=>{r[t]=void 0,i[t]=e})):null))).then((()=>bf(e,r,i)))},dangerouslyAllowMutability:!0});var Sf={waitForNone:vf,waitForAny:wf,waitForAll:Ef,waitForAllSettled:_f,noWait:af({key:"__noWait",get:e=>({get:t})=>{try{return Np.value(pf(t(e)))}catch(e){return Np.value(Us(e)?hf(e):df(e))}},dangerouslyAllowMutability:!0})};const{RecoilLoadable:Tf}=lo,{DefaultValue:Af}=Vo,{RecoilRoot:Nf,useRecoilStoreID:Cf}=Pu,{isRecoilValue:Mf}=Io,{retentionZone:Rf}=pc,{freshSnapshot:xf}=Yl,{useRecoilState:kf,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:If,useRecoilStateLoadable:Of,useRecoilValue:Pf,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Lf,useRecoilValueLoadable:Df,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Bf,useResetRecoilState:jf,useSetRecoilState:qf}=Ad,{useGotoRecoilSnapshot:$f,useRecoilSnapshot:Uf,useRecoilTransactionObserver:Ff}=Wd,{useRecoilCallback:Vf}=Ch,{noWait:Hf,waitForAll:zf,waitForAllSettled:Wf,waitForAny:Kf,waitForNone:Gf}=Sf;var Qf={DefaultValue:Af,isRecoilValue:Mf,RecoilLoadable:Tf,RecoilEnv:ho,RecoilRoot:Nf,useRecoilStoreID:Cf,useRecoilBridgeAcrossReactRoots_UNSTABLE:eh,atom:Kp,selector:Np,atomFamily:tf,selectorFamily:af,constSelector:of,errorSelector:lf,readOnlySelector:uf,noWait:Hf,waitForNone:Gf,waitForAny:Kf,waitForAll:zf,waitForAllSettled:Wf,useRecoilValue:Pf,useRecoilValueLoadable:Df,useRecoilState:kf,useRecoilStateLoadable:Of,useSetRecoilState:qf,useResetRecoilState:jf,useGetRecoilValueInfo_UNSTABLE:Qd,useRecoilRefresher_UNSTABLE:kh,useRecoilValueLoadable_TRANSITION_SUPPORT_UNSTABLE:Bf,useRecoilValue_TRANSITION_SUPPORT_UNSTABLE:Lf,useRecoilState_TRANSITION_SUPPORT_UNSTABLE:If,useRecoilCallback:Vf,useRecoilTransaction_UNSTABLE:Lh,useGotoRecoilSnapshot:$f,useRecoilSnapshot:Uf,useRecoilTransactionObserver_UNSTABLE:Ff,snapshot_UNSTABLE:xf,useRetain:Wu,retentionZone:Rf},Jf=Qf.atom,Yf=Qf.selector;const Xf=Jf({key:"exchangeRates",default:[]});Jf({key:"primeExchangeRates",default:{}}),Jf({key:"didLoadCachedExchangeRates",default:!1});Yf({key:"exchangeRatesMapSelector",get:function({get:e}){return function(e){const t={};return e.forEach((e=>{t[function({chainId:e,networkId:t,contractAddress:n,currencyCode:r}){const i=t||e?.toString();return`${i||"x"}-${n||"x"}-${i&&n?"x":r.code}`}(e)]=e.rate})),t}(e(Xf))},cachePolicy_UNSTABLE:{eviction:"most-recent"}});new Map;new Set([k.BTC.value,k.SOL.value]);__webpack_require__(53142);var Zf=function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},em=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};let tm=class{};Zf([Ni(),em("design:type",String)],tm.prototype,"id",void 0),Zf([Ti(),em("design:type",String)],tm.prototype,"primaryAddress",void 0),Zf([Ti(),em("design:type",String)],tm.prototype,"addresses",void 0),Zf([Ti(),em("design:type",String)],tm.prototype,"displayName",void 0),Zf([Ti(),em("design:type",String)],tm.prototype,"currencyCodeStr",void 0),Zf([Ti({nullable:!0}),em("design:type",String)],tm.prototype,"contractAddress",void 0),Zf([Ti({nullable:!0}),em("design:type",String)],tm.prototype,"imageURLStr",void 0),Zf([Ti({nullable:!0}),em("design:type",String)],tm.prototype,"balanceStr",void 0),Zf([Ti(),em("design:type",String)],tm.prototype,"decimalsStr",void 0),Zf([Ti(),em("design:type",String)],tm.prototype,"blockchainStr",void 0),Zf([Ti({nullable:!0}),em("design:type",String)],tm.prototype,"minimumBalanceStr",void 0),Zf([Ti(),em("design:type",String)],tm.prototype,"networkStr",void 0),Zf([Ti({nullable:!0}),em("design:type",String)],tm.prototype,"selectedIndexStr",void 0),Zf([Ti({nullable:!0}),em("design:type",String)],tm.prototype,"accountId",void 0),Zf([Ti({nullable:!0}),em("design:type",String)],tm.prototype,"assetUUID",void 0),Zf([Ti({nullable:!0}),em("design:type",String)],tm.prototype,"lastBalanceUpdateTxHash",void 0),Zf([Ti({nullable:!0}),em("design:type",Boolean)],tm.prototype,"isSpam",void 0),Zf([Ti({nullable:!0}),em("design:type",Boolean)],tm.prototype,"isWhitelist",void 0),Zf([Ti({nullable:!0,default:!1}),em("design:type",Boolean)],tm.prototype,"isDeleted",void 0),tm=Zf([Ci("wallet"),Mi("IDX_WALLET",["blockchainStr","currencyCodeStr","networkStr","contractAddress","selectedIndexStr","accountId"]),Mi("IDX_WALLET_BLOCKCHAIN",["blockchainStr"]),Mi("IDX_WALLET_ACCOUNT_ID",["accountId"])],tm);const nm=[Ma,ka,ja,Ii,Hi,Ya,Qi,Xi,ts,is,Cs,Fa,Wa,ra,tm,Os];class rm{createQueryBuilder(e,t){const n={where:(e,t)=>n};return n.andWhere=n.where,n.getMany=async()=>Promise.resolve([]),n.getOne=async()=>Promise.resolve(null),n}get target(){return""}hasId(e){return!1}getId(e){return null}create(){}merge(e,...t){}async preload(e){return Promise.resolve(void 0)}async save(e,t){return Promise.resolve([])}async remove(e,t){return Promise.resolve(void 0)}async softRemove(e,t){return Promise.resolve([])}async recover(e,t){return Promise.resolve([])}async insert(e){return Promise.resolve(void 0)}async update(e,t){return Promise.resolve(void 0)}async upsert(e,t){throw new Error("Method not implemented.")}async delete(e){throw new Error("Method not implemented.")}async softDelete(e){return Promise.resolve(void 0)}async restore(e){return Promise.resolve(void 0)}async count(e){return Promise.resolve(0)}async find(e){return Promise.resolve([])}async findAndCount(e){return Promise.resolve([[],0])}async findByIds(e,t){return Promise.resolve([])}async findOne(e,t){return Promise.resolve(void 0)}async findOneOrFail(e,t){throw new Error("Method not implemented.")}async query(e,t){return Promise.resolve(void 0)}async clear(){return Promise.resolve()}async increment(e,t){return Promise.resolve(void 0)}async decrement(e,t){return Promise.resolve(void 0)}batchUpsert(e,t,n){return e.map((async()=>Promise.resolve(void 0)))}isNull(){return!0}}let im=!0;const am="walletExt",sm={type:"indexeddb",dropSchema:!!"MISSING_ENV_VAR".JEST_WORKER_ID,version:53,name:am,database:am,entities:nm,synchronize:!0,dexieJsConfig:{autoOpen:!0}};let om,cm;const{openDatabase:lm,deleteDatabase:um,tryGetRepository:dm}={openDatabase:async function(){return cm||(cm=async function(){return om=new Ei(sm),await om.initialize(),om}(),cm)},deleteDatabase:async function(){const e=await lm();await e.dropDatabase(),cm=void 0,om=void 0},tryGetRepository:function(e){return im&&void 0!==om?om.getRepository(e):new rm}};var hm=__webpack_require__(34767);hm.TT.ios,hm.TT.android,hm.TT.extension,hm.TT.web;let pm;function fm(){if(!pm)throw new Error("cb-wallet-data initialization error: setApplicationMetadata must be called prior to getApplicationMetadata.");return pm}function mm(){return fm().platform}var ym;__webpack_require__(75857);function gm(){return dm(ym.v2)}!function(e){e.v2="tx_or_userop_history"}(ym||(ym={}));!function({query:e}){const t=new Map}({query:async function({pageSize:e,offset:t,options:n}){const r=mm();let i={order:{createdAt:"DESC"},where:{txHash:(a="",new Dn.q("not",a))}};var a;return n.skipPagination||!1||"ios"!==r&&"android"!==r||(i={...i,skip:t,where:{...i.where,accountId:n.accountId,walletIndex:n.walletIndex.toString()}},void 0!==e&&(i.take=e)),(await gm().find(i)).map(Ms.fromDMO).filter((e=>!e.deleted))}});__webpack_require__(63793),__webpack_require__(70156);var bm=__webpack_require__(1048).Buffer;const vm=/^[a-f0-9]*$/;function wm(e){const t=_m(e).toLowerCase();if(!t.match(vm))throw new Error(`"${e}" is not a hexadecimal string`);return t}function Em(e){return 0===e.length?bm.alloc(0):bm.from(function(e,t=!0){let n=wm(e);return n.length%2==1&&(n=`0${n}`),t?`0x${n}`:n}(e,!1),"hex")}function _m(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2):e}new class{constructor(){this.storedERC20s={},this.isInitialized=!1,this.hydrationPromise=Promise.resolve()}async hydrateFromDatabase(){this.isInitialized?await this.hydrationPromise:(this.isInitialized=!0,this.hydrationPromise=async function(){return(await Sm().find()).reduce((function(e,t){return e[t.id]=Oi.fromDMO(t),e}),{})}(),this.storedERC20s=await this.hydrationPromise)}setItem(e){this.isInitialized&&(this.storedERC20s[e.id]=e)}getItem(e){const t=this.storedERC20s[e];return{cachedERC20:t,isStale:!!t&&Date.now()-t.lastUpdated>36e5}}};function Sm(){return dm("erc20")}class Tm{constructor(){this.storageScope="CBStore.plaintext"}set(e,t){if("undefined"==typeof window||void 0===window.localStorage)return;if(null==t)return void localStorage.removeItem(this.scopedKey(e.name));const n=Li(t);localStorage.setItem(this.scopedKey(e.name),n)}get(e){if("undefined"==typeof window||void 0===window.localStorage)return;const t=localStorage.getItem(this.scopedKey(e.name));if(null==t)return;const n=Di(t),r=Tm.mappedPrototypes.get(e.name);if(r){const e=Object.create(r);return Object.assign(e,n),e}return n}clear(e){if("undefined"==typeof window||void 0===window.localStorage)return;const t=this.scopedKey(""),n=[];for(let r=0;r<localStorage.length;r++){const i=localStorage.key(r);"string"!=typeof i||!i.startsWith(t)||e?.exceptions&&!this.shouldKeyBeCleared(i,e.exceptions)||n.push(i)}n.forEach((e=>localStorage.removeItem(e)))}scopedKey(e){return`${this.storageScope}:${e}`}shouldKeyBeCleared(e,t){for(const n of t)if(this.scopedKey(n.name)===e)return!1;return!0}}Tm.mappedPrototypes=new Map;class Am{constructor(){this.storage=new Map}set(e,t){this.storage.set(e.name,t)}get(e){return this.storage.get(e.name)}clear(){this.storage.clear()}}const Nm=new class{constructor(){this.localStorage=new Tm,this.memoryStorage=new Am,this.isOpen=!0}open(){this.isOpen=!0}set(e,t){this.isOpen&&this.storageForKey(e).set(e,t)}get(e){return this.storageForKey(e).get(e)}has(e){const t=this.get(e);return null!=t}clear(e){this.isOpen=!1,this.deleteAllEntries([ze.LocalStorage,ze.Memory],e)}deleteAllEntries(e,t){e.forEach((e=>{e===ze.LocalStorage&&this.localStorage.clear(t),e===ze.Memory&&this.memoryStorage.clear()}))}storageForKey(e){switch(e.kind){case ze.LocalStorage:return this.localStorage;case ze.Memory:return this.memoryStorage;default:throw new Error("Switch statements must be exhaustive")}}},Cm=new We("userId");const Mm=new We("accessToken"),Rm=new We("refreshToken");let xm;async function km(e){const t=Nm.get(Rm);if(!t)throw new Error("Attempted to refresh access token without a refresh token. This can't work.");let n;try{return xm||(xm=async function(e){const{result:t}=await Gm("refreshAccessToken",{refreshToken:e});return t}(t)),n=await xm,e(n),n.token}finally{xm=void 0}}Number.MAX_SAFE_INTEGER;const Im=new class{constructor(){this.getRetailAccessToken=void 0,this.refreshRetailAccessToken=void 0}getWalletAccessToken(){return Nm.get(Mm)}async refreshWalletAccessToken(e){return km(e)}async getAuthedHeaders({withRetailToken:e=!1,withXCbwAuthorizationHeader:t=!1}={}){const{platform:n}=fm(),r=this.getWalletAccessToken(),i={Authorization:`Bearer ${r}`};if(t&&(i["X-Cbw-Authorization"]=`Bearer ${r}`),e&&n!==hm.TT.web){const e=await(this.getRetailAccessToken?.());if(!e)throw new Error("Failed to get retail access token.");i.Authorization=`Bearer ${e}`}return i}async refreshAccessTokens({onRefreshWalletAccessToken:e,shouldRefreshWalletAccessToken:t=!0}){t?await this.refreshWalletAccessToken(e):await(this.refreshRetailAccessToken?.())}};let Om=new AbortController;const Pm=Object.freeze({CB_WALLET_API:{production:d,staging:d,development:h,local:null},ONRAMP_API:{production:f,staging:f,development:m,local:y},OFFRAMP_API:{production:g,staging:g,development:b,local:v}}),Lm=["ONRAMP_API","OFFRAMP_API"];function Dm(){const{platform:e}=fm();return e===hm.TT.extension?"production":e===hm.TT.web?"MISSING_ENV_VAR".RELEASE_STAGE??"MISSING_ENV_VAR".NEXT_PUBLIC_RELEASE_STAGE??"local":"MISSING_ENV_VAR".RELEASE_STAGE??"development"}const Bm=new We("baseUrl");class jm extends Error{constructor(e,t,n,r,i,a,s){super(n),this.status=e,this.code=t,this.message=n,this.description=r,this.errorDetail=i,this.endpoint=a,this.errorData=s}}class qm extends Error{constructor(e,t){super(e),this.message=e,this.endpoint=t}}const $m=.01;function Um(e){if(!function(e=$m){return Math.random()<=e}())return null;const t=Date.now(),{version:n}=fm();return(0,hm.br)({name:"network_request",resource:(r=e,r.replace(/\?.*$/,"")),start:t,meta:{version:n??"0.0.0"}});var r}const Fm=new We("chaosTestingServiceGroups"),Vm={header:{}},Hm=new We("chaosTestingProviderGroups");async function zm(e,t,n){const{method:r,authenticated:i,retried:a,apiVersion:s=2,isThirdParty:o=!1,service:c="rpc",forceDevEnvironment:l,walletApi:d="CB_WALLET_API",withRetailToken:p=!1}=n,{version:f,platform:m,appsFlyerAppID:y}=fm(),g=Nm.get(Fm)||"",b=Nm.get(Hm)||"",v=function(e,t){const{platform:n}=fm(),r=Dm();let i=t||"CB_WALLET_API"===e&&Nm.get(Bm)===h?"development":"production";return("local"===r||"localhost"===r)&&n===hm.TT.web&&Lm.includes(e)&&(i="local"),Pm[e][i]}(d,l),w=o?new URL(e):new URL(`${v}/${c}/v${s}/${e}`);"OFFRAMP_API"===d&&(w.pathname=`/${c}/${e}`),"GET"===r&&t&&(w.search=t);const E=w.toString().replace(/\/$/,""),_=i?await Im.getAuthedHeaders({withRetailToken:p,withXCbwAuthorizationHeader:Lm.includes(d)}):null,S=Um(e),T={Accept:"application/json",...n.skipBlockingHeaders?{}:{"X-App-Version":f??"","X-Platform-Name":m??"","X-Appsflyer-Id":y??""},..._,...i&&u?Vm.header:null,...n.additionalHeaders,...g?{"X-Cb-Egw-Simulate-Killswitch":g.replace(/, *$/,"")}:null,...b?{"X-Cb-Egw-Simulate-Killswitch-Downstream":b.replace(/, *$/,"")}:null,...(0,hm.DD)(),...(A=S,A?(0,hm.Po)(A):{})};var A;const N=["POST","DELETE"].includes(r)?{method:r,body:t}:null,C={headers:T,signal:Om.signal,...N};let M;try{M=await fetch(E,C)}catch(t){if(t instanceof Error)throw new qm(t.message,e);throw t}if(M.status>=400){if(i&&401===M.status&&!a){const r=M.headers.get("www-authenticate"),i=!Lm.includes(d)||!!r?.includes("coinbase-wallet");return await Im.refreshAccessTokens({onRefreshWalletAccessToken:n.setAuthTokens,shouldRefreshWalletAccessToken:i}),zm(e,t,{...n,retried:!0})}await async function(e){let t;try{const n=await e.json();t="message"in n?{...n,code:"code"in n?String(n.code):""}:n.error}catch{throw new jm(e.status,"",`Failed to parse network response from ${e.url}. The status code is ${e.status}`,void 0,void 0,e.url)}throw new jm(e.status,t?.code,t?.message??t?.error,t?.description,t?.errorDetail??t?.details,e.url,t?.data)}(M)}let R=null;return n.isTextResponse&&M.ok?R=await M.text():M.ok&&(R=await M.json()),function(e,t={}){var n;if(e)try{const r=Date.now();(0,hm.om)([e],{duration:r-(n=e.start,Math.ceil(n/1e6)),...t})}catch(e){reportError(e)}}(S,{error:Number(Boolean(M.status>=400))}),{status:M.status,body:R,headers:Object.fromEntries(M.headers?.entries()??[])}}async function Wm(e,t,n){const r=Nm.get(Cm);return zm(e,t,{...n,additionalHeaders:{"Content-Type":"application/json",...n.skipBlockingHeaders?{}:{"X-Wallet-User-Id":r},...n.skipBlockingHeaders?{}:{"X-Release-Stage":Dm()},...n.additionalHeaders??{},...n.walletAccountType?{"X-Wallet-Account-Type":n.walletAccountType}:{}}})}async function Km(e,t,{returnHeaders:n,...r}){const i=(a=t,0===Object.keys(a).length?void 0:JSON.stringify(t,Qm));var a;const s=await Wm(e,i,r);return n?s:s.body}async function Gm(e,t,n){return Km(e,t,{method:"POST",...n})}function Qm(e,t){return"bigint"==typeof t?t.toString():t}function Jm(e){const t=Xm(e);if(t)throw new Error(t)}function Ym(e){if(Jm(e),!e||"string"!=typeof e.result)throw new Error("unexpected response");return e.result}function Xm(e){return e?.error&&"string"==typeof e.error.message?e.error.message:null}Error;class Zm extends Error{constructor(e,t){super(t),this.name=e,this.message=t}}Zm.unableToFindGasPrice=new Zm("UnableToFindGasPrice",""),Zm.unableToEstimateGas=new Zm("UnableToEstimateGas",""),Zm.unableToCalculateBalance=new Zm("UnableToCalculateBalance",""),Zm.unableToFindWallet=new Zm("UnableToFindWallet",""),Zm.unableToFindSignedTx=new Zm("UnableToFindSignedTx",""),Zm.invalidERC20=new Zm("InvalidERC20",""),Zm.incorrectNonceProvided=new Zm("IncorrectNonceProvided","Unable to determine nonce or incorrect nonce provided"),Zm.transactionSignatureMissing=new Zm("TransactionSignatureMissing","Tx signature missing"),Zm.unableToGetERC20Details=new Zm("UnableToGetERC20Details",""),Zm.invalidConfiguration=new Zm("InvalidConfiguration",""),Zm.unsupportedAccessToEstimatedFeeOn1559Tx=new Zm("UnsupportedAccessToEstimatedFee","1559 tx estimated fee should be represented as a range"),Zm.unsupported1559Property=new Zm("UnsupportedAccessToEstimatedFee","This property does not exist on legacy transactions"),Zm.unsupportedUserOpProperty=new Zm("UnsupportedUserOpProperty","This property does not exist on a ethereum user operation"),Zm.userRejectedWalletLinkRequest=new Zm("UserRejectedWalletLinkRequest","User rejected walletlink request"),Zm.nonceTooLowError=new Zm("nonceTooLow","Original transaction successful");class ey{constructor(e){this.value=e}get overEstimated(){return this.value>ey.minimumGasLimit.value?new ey(15n*this.value/10n):this}get overEstimatedReduced(){return this.value>ey.minimumGasLimit.value?new ey(25n*this.value/20n):this}}ey.defaultGasLimit=new ey(5000000n),ey.maximumOptimismTxGasLimit=new ey(15000000n),ey.minimumGasLimit=new ey(21000n);var ty;__webpack_require__(1048).Buffer;!function(e){e.balanceOf="70a08231",e.name="06fdde03",e.symbol="95d89b41",e.decimals="313ce567"}(ty||(ty={}));function ny(e){if(!Number.isInteger(e))throw new Error(`chainId is invalid ${e}`);const t=Xe.get(e.toString());if(!t)throw new Error(`unknown chain id ${e}`);return t.rpcUrl}function ry(e,t){if(e){if(!t)return e;try{const n=new URL(t).origin,r=new URL(e);return r.searchParams.append("client-project-name",n),r.toString()}catch(e){return}}}var iy=__webpack_require__(10328);W()((async function(e,t){const{seedFromRecoveryPhrase:n,findMatchingWordList:r}=await __webpack_require__.e(2114).then(__webpack_require__.bind(__webpack_require__,42114));return n(e,t||r(e))}),(function(e,t){return t?`${e}-${t[0]}`:e}));var ay=__webpack_require__(67620),sy=__webpack_require__(9642),oy=__webpack_require__(77673),cy=__webpack_require__(1048).Buffer;const ly=cy.from("\x19Ethereum Signed Message:\n","utf8");class uy{constructor(e,t=ly){this._prefix=null,this._message=e,this._prefix=t}get message(){return this._message}get prefixedMessage(){return this._prefix?(0,oy.So)(cy.concat([this._prefix,cy.from(String(this._message.length),"utf8"),this._message])):this._message}async sign(e){const t=(await(0,sy.r)()).keyFromPrivate(e).sign(this.prefixedMessage,{canonical:!0});return uy.buildSignatureBuffer(t)}static buildSignatureBuffer(e,t=!1){const n=cy.alloc(65);let r=0;const i=(0,oy.TI)(e.r);r+=32-i.length,r+=i.copy(n,r);const a=(0,oy.TI)(e.s);if(r+=32-a.length,r+=a.copy(n,r),t)n.writeUInt8(e.recoveryParam,r);else{const t=e.recoveryParam??0;n.writeUInt8(t+27,r)}return n}static recoverRSVFromBuffer(e){if(65!==e.length)throw new Error("Invalid signature");return{r:(0,oy.p4)(e.slice(0,32)),s:(0,oy.p4)(e.slice(32,64)),v:e[64]}}async ecRecover(e){if(65!==e.length)throw new Error("Invalid signature");const t=await(0,sy.r)(),n=e[e.length-1]-27,r={r:e.slice(0,32),s:e.slice(32,64)},i=t.recoverPubKey(this.prefixedMessage,r,n),a=cy.from(i.encode("hex",!0),"hex");return ay.Address.from(a).getAddress()}}new(Ls())(21e3);const dy={"x-tpp-routing-rule":"urn:routing-rule:function:wallet-mev-dex"};async function hy(e,t,n=!1){const r=n?dy:{},i=await async function(e,t,n,r={}){return Gm(n,{jsonrpc:"2.0",id:1,method:e,params:t},{isThirdParty:!0,authenticated:!1,additionalHeaders:r})}("eth_sendRawTransaction",[(0,oy.Ex)(e)],t,r),a=(0,oy.So)(e),s=Xm(i);if(s){const e=s.toLowerCase();if(e.includes("known transaction")||e.includes("already imported"))return a;if(e.includes("nonce too low")||e.includes("nonce is too low"))throw new Error("nonce too low");if(e.includes("insufficient funds"))throw new Error("insufficient funds")}if(Ym(i).match(/^0x0*$/))throw new Error("transaction could not be submited");return a}var py,fy,my,yy;!function(e){e.requestEthereumAccounts="requestEthereumAccounts",e.hideRequestEthereumAccounts="hideRequestEthereumAccounts",e.switchEthereumChain="switchEthereumChain",e.addEthereumChain="addEthereumChain",e.watchAsset="watchAsset",e.selectProvider="selectProvider"}(py||(py={})),function(e){e.requestEthereumAccountsResponse="requestEthereumAccountsResponse",e.addEthereumChainDeny="addEthereumChainDeny",e.addEthereumChainApprove="addEthereumChainApprove",e.switchEthereumChainDeny="switchEthereumChainDeny",e.switchEthereumChainApprove="switchEthereumChainApprove",e.signEthereumMessageSuccess="signEthereumMessageSuccess",e.signEthereumTransactionSuccess="signEthereumTransactionSuccess",e.submitEthereumTransactionSuccess="submitEthereumTransactionSuccess",e.watchAssetApprove="watchAssetApprove",e.watchAssetDeny="watchAssetDeny",e.selectProviderApprove="selectProviderApprove",e.selectProviderDeny="selectProviderDeny",e.dappChainSwitched="dappChainSwitched"}(fy||(fy={})),function(e){e.troubleshootConnection="troubleshootConnection"}(my||(my={})),function(e){e.web3RequestCanceled="web3RequestCanceled",e.parentDisconnected="parentDisconnect"}(yy||(yy={}));var gy=__webpack_require__(26537);const by="walletlink_sdk.snackbar_shown",vy="walletlink_sdk.snackbar_cancel_connection_clicked",wy="walletlink_sdk.snackbar_need_help_clicked",Ey="walletlink_sdk.snackbar_reset_connection_clicked";class _y{constructor(e){this.attached=!1,this._nextRequestId=0,this.standalone=null,this.cancelLinkCallbacks=new Map,this.onAccountsCallbacks=new Map,this.onApproveSwitchCallbacks=new Map,this.onApproveWatchAssetCallbacks=new Map,this.onApproveSelectProviderCallbacks=new Map,this.onSignMessageResultCallbacks=new Map,this.onSignTransactionResultCallbacks=new Map,this.onSubmitTransactionResultCallbacks=new Map,this.snackbar=new gy.q({darkMode:e.darkMode}),this.sessionIdHash=c.Session.hash(e.session.id),this._idBase=iy.randomBytes(16).toString("hex"),this.resetConnectionCallback=e.resetConnectionCallback,this.storage=e.storage,this.walletLinkInPageAnalytics=e.walletLinkInPageAnalytics}attach(){if(this.attached)throw new Error("WalletLinkUI is already attached");const e="walletlink-ui-container",t=document.documentElement,n=t.querySelectorAll(`html > .${e}`);for(const e of n)t.removeChild(e);const r=document.createElement("div");r.className=e,t.appendChild(r),this.snackbar.attach(r),this.attached=!0,window.addEventListener("message",(e=>{if("extensionUIResponse"!==e.data.type)return;if(a("In page got ui response from popup",e.data.data.action),a(e),e.data.data.action===yy.parentDisconnected)return void this.resetConnectionCallback();if("string"!=typeof e.data.data.id)return;const{id:t}=e.data.data;switch(e.data.data.action){case yy.web3RequestCanceled:case fy.addEthereumChainDeny:case fy.switchEthereumChainDeny:case fy.watchAssetDeny:case fy.selectProviderDeny:this.cancelLinkCallbacks.get(t)?.(e.data.data.error??o.standardErrors.provider.userRejectedRequest({})),this.cancelLinkCallbacks.delete(t);break;case fy.requestEthereumAccountsResponse:this.onAccountsCallbacks.get(t)?.(e.data.data.addresses),this.onAccountsCallbacks.delete(t);break;case fy.watchAssetApprove:this.onApproveWatchAssetCallbacks.get(t)?.(),this.onApproveWatchAssetCallbacks.delete(t);break;case fy.selectProviderApprove:this.onApproveSelectProviderCallbacks.get(t)?.(e.data.data.selectedProviderKey),this.onApproveSelectProviderCallbacks.delete(t);break;case fy.addEthereumChainApprove:{const n=ry(e.data.data.rpcUrl,window.location.origin);this.onApproveSwitchCallbacks.get(t)?.(n??""),this.onApproveSwitchCallbacks.delete(t);break}case fy.switchEthereumChainApprove:{const n=e.data.data.chainId,r=ry(x.fromChainId(BigInt(n)).rpcUrl,window.location.origin);this.onApproveSwitchCallbacks.get(t)?.(r??""),this.onApproveSwitchCallbacks.delete(t);break}case fy.signEthereumMessageSuccess:this.onSignMessageResultCallbacks.get(t)?.({method:"signEthereumMessage",result:e.data.data.signature}),this.onSignMessageResultCallbacks.delete(t);break;case fy.signEthereumTransactionSuccess:this.onSignTransactionResultCallbacks.get(t)?.({method:"signEthereumTransaction",result:e.data.data.signedTxData}),this.onSignTransactionResultCallbacks.delete(t);break;case fy.submitEthereumTransactionSuccess:this.onSignTransactionResultCallbacks.get(t)?.({method:"submitEthereumTransaction",result:e.data.data.txHash}),this.onSubmitTransactionResultCallbacks.delete(t)}}))}setConnected(e){}requestEthereumAccounts(e){const n=this.makeLinkRequestId();this.cancelLinkCallbacks.set(n,e.onCancel),this.onAccountsCallbacks.set(n,e.onAccounts),window.postMessage({type:"extensionUIRequest",data:{id:n,action:py.requestEthereumAccounts,dappInfo:{dappLogoURL:(0,t.getFavicon)()}}},"*")}watchAsset(e){const n=this.makeLinkRequestId();this.cancelLinkCallbacks.set(n,e.onCancel),this.onApproveWatchAssetCallbacks.set(n,e.onApprove),window.postMessage({type:"extensionUIRequest",data:{id:n,action:py.watchAsset,type:e.type,chainId:e.chainId,options:{address:e.address,symbol:e.symbol,decimals:e.decimals,image:e.image},dappInfo:{dappLogoURL:(0,t.getFavicon)()}}},"*")}selectProvider(e){const n=this.makeLinkRequestId();this.cancelLinkCallbacks.set(n,e.onCancel),this.onApproveSelectProviderCallbacks.set(n,e.onApprove),window.postMessage({type:"extensionUIRequest",data:{id:n,action:py.selectProvider,providers:e.providerOptions,dappInfo:{dappLogoURL:(0,t.getFavicon)()}}},"*")}addEthereumChain(e){if(x.isWhitelisted(e.chainId))this.switchEthereumChain(e);else{const n=this.makeLinkRequestId();this.cancelLinkCallbacks.set(n,e.onCancel),this.onApproveSwitchCallbacks.set(n,e.onApprove),window.postMessage({type:"extensionUIRequest",data:{id:n,action:py.addEthereumChain,chainId:e.chainId,rpcUrls:e.rpcUrls,blockExplorerUrls:e.blockExplorerUrls,chainName:e.chainName,iconUrls:e.iconUrls,nativeCurrency:e.nativeCurrency,dappInfo:{dappLogoURL:(0,t.getFavicon)()}}},"*")}}switchEthereumChain(e){if(!x.fromChainId(BigInt(e.chainId)))return e.onCancel(o.standardErrors.provider.unsupportedChain(e.chainId));const n=this.makeLinkRequestId();this.cancelLinkCallbacks.set(n,e.onCancel),this.onApproveSwitchCallbacks.set(n,e.onApprove),window.postMessage({type:"extensionUIRequest",data:{id:n,action:py.switchEthereumChain,chainId:e.chainId,...e.address&&{address:e.address},dappInfo:{dappLogoURL:(0,t.getFavicon)()}}},"*")}signEthereumMessage(e){const n=this.makeLinkRequestId();this.cancelLinkCallbacks.set(n,e.onCancel),this.onSignMessageResultCallbacks.set(n,e.onSuccess),window.postMessage({type:"extensionUIRequest",data:{id:n,action:e.request.method,request:e.request,dappInfo:{dappLogoURL:(0,t.getFavicon)()}}},"*")}signEthereumTransaction(e){const n=this.makeLinkRequestId();this.cancelLinkCallbacks.set(n,e.onCancel),this.onSignTransactionResultCallbacks.set(n,e.onSuccess),window.postMessage({type:"extensionUIRequest",data:{id:n,action:e.request.method,request:e.request,dappInfo:{dappLogoURL:(0,t.getFavicon)()}}},"*")}troubleshootConnection(){const e=this.makeLinkRequestId();window.postMessage({type:"extensionUIRequest",data:{id:e,action:my.troubleshootConnection,dappInfo:{dappLogoURL:(0,t.getFavicon)()}}},"*")}submitEthereumTransaction(e){hy(Em(e.request.params.signedTransaction),ny(Number(e.request.params.chainId))).then((n=>{e.onSuccess({method:"submitEthereumTransaction",result:(0,t.hexStringFromBuffer)(n)})})).catch((()=>{e.onCancel()}))}ethereumAddressFromSignedMessage(e){const n=e.request.params;(async function(e,t,n=!0){return(n?new uy(e):new uy(e,null)).ecRecover(t)})(Em(n.message),Em(n.signature),n.addPrefix).then((n=>{e.onSuccess({method:"ethereumAddressFromSignedMessage",result:(0,t.ensureAddressString)(n)})}))}hideRequestEthereumAccounts(){}showConnecting({isUnlinkedErrorState:e,onResetConnection:t,onCancel:n}){const r=e=>{this.walletLinkInPageAnalytics.log(Ey,{sessionIdHash:this.sessionIdHash,connectionState:e}),t()},i=()=>{this.walletLinkInPageAnalytics.log(wy,{sessionIdHash:this.sessionIdHash}),this.troubleshootConnection()},a=e=>({isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>r(e)}),s={isRed:!1,info:"Need help?",svgWidth:"10",svgHeight:"11",path:"M6 0.5C2.69 0.5 0 3.19 0 6.5C0 9.81 2.69 12.5 6 12.5C9.31 12.5 12 9.81 12 6.5C12 3.19 9.31 0.5 6 0.5ZM5.82 9.88C5.36 9.88 4.99 9.54 4.99 9.1C4.99 8.66 5.36 8.32 5.82 8.32C6.27 8.32 6.64 8.66 6.64 9.1C6.63 9.53 6.27 9.88 5.82 9.88ZM7.37 6.16C6.94 6.57 6.48 6.94 6.43 7.42V7.64H5.22V7.37C5.22 6.67 5.69 6.23 6.11 5.81C6.44 5.5 6.72 5.21 6.72 4.85C6.72 4.44 6.5 4.18 6.03 4.18C5.53 4.18 5.2 4.54 5.14 5.11H3.89C3.94 3.86 4.84 3.12 6.11 3.12C7.43 3.12 8.11 3.79 8.11 4.74C8.11 5.37 7.76 5.78 7.37 6.16Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>i()},o={isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:()=>{this.walletLinkInPageAnalytics.log(vy,{sessionIdHash:this.sessionIdHash}),n()}};let c;return c=e?{autoExpand:!0,message:"Connection lost",menuItems:[a("unlinked_error_state"),s]}:{message:"Confirm on phone",menuItems:[o,a("stable_state"),s]},this.walletLinkInPageAnalytics.log(by,{isStandalone:this.isStandalone()}),this.snackbar.presentItem(c)}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!0}inlineAddEthereumChain(e){return!!this.isStandalone()}inlineSwitchEthereumChain(){return!!this.isStandalone()}inlineWatchAsset(){return!0}setStandalone(e){this.standalone=e}isStandalone(){return this.standalone??"true"===this.storage.getItem("IsStandaloneSigning")}makeLinkRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,n=`${this._idBase}${(0,t.prepend0x)(e.toString(16))}`;return this.cancelLinkCallbacks.get(n)&&this.cancelLinkCallbacks.delete(n),n}setConnectDisabled(e){}setAppSrc(e){}}if(void 0===window.coinbaseWalletExtension)throw new Error("Wallet link extension undefined");window.coinbaseWalletRelay=function(r,i,o){if(void 0===r)throw new Error("Relay event manager undefined");if(void 0===i)throw new Error("Storage undefined");a("Constructed wallet link relay");const c=new s,l=new n.WalletLinkRelay({linkAPIUrl:"https://www.walletlink.org",version:e.Ay.VERSION,darkMode:!1,uiConstructor:e=>{const t={linkAPIUrl:e.linkAPIUrl,version:e.version,darkMode:e.darkMode,session:e.session,resetConnectionCallback:()=>{l.resetAndReload()},walletLinkInPageAnalytics:c,storage:i};return new _y(t)},diagnosticLogger:c,storage:i,relayEventManager:r,reloadOnDisconnect:o});return l.setAppInfo(document.location.host,(0,t.getFavicon)()),l.attachUI(),l}(window.coinbaseWalletRequestProvider.relayEventManager,window.coinbaseWalletRequestProvider.storage,window.coinbaseWalletExtension.reloadOnDisconnect)})()})();
//# sourceMappingURL=requestRelay.js.map