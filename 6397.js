"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[6397],{82733:(e,t,n)=>{n.d(t,{gw:()=>c,je:()=>r,jm:()=>d,bW:()=>p,_t:()=>b,KR:()=>u,UV:()=>f,D3:()=>o,bj:()=>h,cZ:()=>l});var c,r,s=n(34767),a=n(2897),i=n(55452);function o(e){return(0,i.gd)("watchlist_button",{...e,action:s.X2.click,componentType:s.I5.button,context:a.xj.WATCHLIST,loggingId:"fbf1ca9e-a59b-4e87-924a-ec8a55a55884"})}function u(e){return(0,i.gd)("watchlist_card",{...e,action:s.X2.view,componentType:s.I5.card,context:a.xj.WATCHLIST,loggingId:"0c9101be-6954-47f9-b50b-5cbdc929efbb"})}function d(e){return(0,i.gd)("watchlist_card",{...e,action:s.X2.click,componentType:s.I5.card,context:a.xj.WATCHLIST,loggingId:"0c9101be-6954-47f9-b50b-5cbdc929efbb"})}function l(e){return(0,i.gd)("watchlist_null_card",{...e,action:s.X2.click,componentType:s.I5.card,context:a.xj.WATCHLIST,loggingId:"3dd827e3-b2e8-4581-87f6-5cddfca209fd"})}function h(){return(0,i.gd)("watchlist_discover_button",{action:s.X2.click,componentType:s.I5.card,context:a.xj.WATCHLIST,loggingId:"70b8d118-c9e1-493c-9351-e630b37550b7",componentName:"back"})}function f(e){return(0,i.gd)("watchlist_discover_card",{...e,action:s.X2.view,componentType:s.I5.card,context:a.xj.WATCHLIST,loggingId:"6d497349-1e42-452e-996d-52fef8123392"})}function p(e){return(0,i.gd)("watchlist_discover_card",{...e,action:s.X2.click,componentType:s.I5.card,context:a.xj.WATCHLIST,loggingId:"6d497349-1e42-452e-996d-52fef8123392"})}function b(e){return(0,i.gd)("watchlist_asset_unwatchable",{...e,action:s.X2.view,componentType:s.I5.button,context:a.xj.WATCHLIST,loggingId:"6f5d3360-efe6-4a75-b06f-b8cf22f18de0"})}!function(e){e.L1="l1",e.L2="l2"}(c||(c={})),function(e){e.ASSET="coins",e.NFT="nfts"}(r||(r={}))},95734:(e,t,n)=>{n.d(t,{M:()=>s});var c=n(14041),r=n(8867);function s(){const{formatNumber:e}=(0,r.A)();return(0,c.useCallback)((function(t,n){return`${e(t,{style:"percent",maximumFractionDigits:n,minimumFractionDigits:n})}`}),[e])}},7800:(e,t,n)=>{n.d(t,{v:()=>a,P:()=>i});var c=n(99633);const r=new Map,s=(0,c.atom)({key:"assetsMap",default:r});function a(){return(0,c.useRecoilValue)(s)}function i(){return(0,c.useSetRecoilState)(s)}},37341:(e,t,n)=>{n.d(t,{e:()=>a});var c=n(14041),r=n(16139),s=n(1513);function a(e){const t=(0,r.A)(),n=(0,c.useMemo)((()=>new s.Q(e)),[e]);return(0,c.useEffect)((()=>{t([n])}),[n,t]),n}},16139:(e,t,n)=>{n.d(t,{A:()=>s});var c=n(14041),r=n(7800);function s(){const e=(0,r.P)();return(0,c.useCallback)((function(t){const n=new Map;for(const e of t)n.set(e.id,e);e((e=>new Map([...e,...n])))}),[e])}},1513:(e,t,n)=>{n.d(t,{Q:()=>r});var c=n(23349);class r extends c.V{constructor(e){super(e.name,e.currencyCode,e.address,e.decimals,e.imageURL,e.chainId,e.blockchain),this.uuid=e.uuid,this.numOfBuys=e.numOfBuys,this.numOfSells=e.numOfSells}equals(e){return e instanceof r&&(super.equals(e)&&this.uuid===e.uuid)}}},42626:(e,t,n)=>{n.d(t,{Km:()=>o,ck:()=>i,nV:()=>u});var c=n(31208),r=n(58524),s=n(74146);const a=`${r.V2}/api/v3/coinbase.asset_stats_service.AssetStatsService/GetPriceChartForResolutions`,i="RESOLUTION_DAY",o=["RESOLUTION_HOUR",i,"RESOLUTION_WEEK","RESOLUTION_MONTH","RESOLUTION_YEAR","RESOLUTION_ALL"];async function u(e,t,n,r){let i;try{return i=r?await(0,s.TB)("getPriceCharts",{q:e},{apiVersion:4}):await(0,s.hm)(`${a}`,{q:e},{isThirdParty:!0}),function(e){const{priceCharts:[t],latestPrice:n}=e,{currency:c,priceChart:{coinbaseUuid:r,symbol:s}}=t,a=(e=>{const t=4,c=2;if(!e){if(Number(n?.price)>=1)return t;const e=n?.price.match(/^0\.0*/)?.[0]?.replace(/^0\./,"").length??0;return e>0?e+c:t}return e})(e.unitPriceScale),i=e.priceCharts.find((e=>"RESOLUTION_ALL"===e.resolution));if(!i){const t=e.priceCharts.find((e=>"RESOLUTION_YEAR"===e.resolution));t&&e.priceCharts.push({...t,resolution:"RESOLUTION_ALL"})}const u=n||d(e.priceCharts),l=s,h=r,f=function({priceCharts:e,latestPrice:t,currency:n,unitPriceScale:c=4}){const r=new Map,s=new Map;o.forEach((e=>{r.set(e,e.replace("RESOLUTION_","").toLowerCase())}));const a=e.reduce((function(e,t){const{resolution:n,priceChart:c}=t,{yAxisScalingFactor:a,percentChange:i,prices:o}=c,u=o.map((e=>[e.price,Number(e.timestamp)]));s.set(n,Number(i));const d={yAxisScalingFactor:a,percentChange:i,prices:u};return e[r.get(n)]=d,e}),{}),i=[...s.entries()].reduce((function(e,[t,n]){return e[r.get(t)]=n,e}),{}),u=t||d(e),l={amount:u.price,currency:n,scale:c},h={amount:l,percentChange:i,timestamp:u.timestamp},f=u?.price,p=300,b={hour:12,day:300,week:1800,month:7200,year:86400,all:86400},m=e=>{const t=Object.entries(e).reduce((function(e,[t,n]){const c=b[t],r=n.prices;if(r.length<p){const s=[];for(let e=0;e<r.length-1;e++){const t=r[e],n=r[e+1];if(s.push(t),!n)continue;const a=t[1],i=n[1];if(i>a+c){const e=Math.floor((i-a)/c);for(let r=1;r<e;r++){const i=a+c*r,o=r/e,u=Number(t[0])+(Number(n[0])-Number(t[0]))*o;s.push([u.toString(),i])}}}r.length>0&&s.push(r[r.length-1]),e[t]={...n,prices:s}}else e[t]=n;return e}),{});return t},g=m(a);function w(e,t){return t[1]-e[1]}return{...Object.entries(g).reduce((function(e,[t,n]){return e[t]={...n,prices:n.prices.sort(w)},e}),{}),latestPrice:h,latest:f}}({priceCharts:e.priceCharts,latestPrice:u,currency:c,unitPriceScale:a});return{base:l,baseId:h,currency:c,prices:f,unitPriceScale:a}}(i)}catch(e){(0,c.dC)(t??"",n)}}function d(e){return e[0].priceChart.prices[0]}},54996:(e,t,n)=>{n.d(t,{o2:()=>d});n(14041);var c=n(71847),r=n(98053),s=n(84632),a=n(42626),i=n(1048).Buffer;const o="coinbase_asset_prices",u=3e4;function d({assetId:e,onlyPercentChangeResolutions:t,address:n,networkId:d,enabled:l}){const{data:h,isFetched:f}=function({assetId:e,onlyPercentChangeResolutions:t,address:n,networkId:d,isNative:l=!1,enabled:h=!0}){const f=(0,c.x)("pricecharts_v4"),{code:p}=(0,s.n)(),b={...e?{uuid:e}:{},currency:p.rawValue,resolutions:a.Km,address:n,networkId:d,isNative:l};t&&(b.resolutions=t);const m=i.from(JSON.stringify(b),"utf-8").toString("base64"),{data:g,isFetched:w}=(0,r.I)([o,m],(async function(){const n=await(0,a.nV)(m,e,p.rawValue,f);return t&&n?function(e){const t={prices:[],yaxisScalingFactor:1};return{baseId:e.baseId,base:e.base,currency:e.currency,prices:{latest:e.prices.latest,latestPrice:e.prices.latestPrice,hour:t,day:t,month:t,week:t,year:t,all:t},unitPriceScale:e.unitPriceScale}}(n):n}),{staleTime:u,notifyOnChangeProps:["data"],enabled:h});return{data:g,isFetched:w}}({assetId:e,onlyPercentChangeResolutions:t,address:n,networkId:d,enabled:l});return{data:h,isFetched:f}}},3887:(e,t,n)=>{n.d(t,{Qv:()=>f,SS:()=>s,qN:()=>d,w7:()=>h,wq:()=>l});var c=n(42066),r=n(74146);const s="watchlist/getWatchlist",a="watchlist/isWatching",i="watchlist/addToWatchlist",o="watchlist/removeFromWatchlist";function u(e){let t={};return Object.keys(e).forEach((n=>{(e[n]||0===e[n])&&(t={...t,[n]:e[n]})})),t}async function d({walletAddress:e}){const t={walletAddress:e},{result:n}=await(0,r.hm)(s,t,{authenticated:!0,setAuthTokens:c.PR});return n}async function l({networkId:e,chainId:t,contractAddress:n,symbol:s,uuid:i,walletAddress:o}){const d={networkId:e,chainId:t,contractAddress:n,uuid:i,symbol:s,walletAddress:o},{result:l}=await(0,r.hm)(a,u(d),{authenticated:!0,setAuthTokens:c.PR});return l}async function h({blockchain:e,networkId:t,chainId:n,contractAddress:s,symbol:a,type:o,uuid:d,walletAddress:l}){const h={blockchain:e,networkId:t,chainId:n?.toString(),contractAddress:s,symbol:a,type:o,uuid:d,walletAddress:l},{result:f}=await(0,r.TB)(i,u(h),{authenticated:!0,setAuthTokens:c.PR});return f}async function f({networkId:e,chainId:t,contractAddress:n,symbol:s,type:a,walletAddress:i}){const d={networkId:e,chainId:t,contractAddress:n,symbol:s,type:a,walletAddress:i},{result:l}=await(0,r.TB)(o,u(d),{authenticated:!0,setAuthTokens:c.PR});return l}}}]);
//# sourceMappingURL=6397.js.map