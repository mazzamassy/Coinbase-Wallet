/*! For license information please see 4292.js.LICENSE.txt */
"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[4292],{33098:(e,r,t)=>{t.d(r,{nq:()=>j});var n=t(14041),a=t(41783),o=t(79637),i=t(41092),s=t(13394),c=t(65063);class l extends Error{}function u({fn:e,validate:r,interval:t,maxAttempts:n}){let a,o=0;const i=async(s,c)=>{const u=await e();return o++,r(u)?s(u):n&&o===n?c(new l("Max attempts reached")):void(a=setTimeout(i,t,s,c))};return{promise:new Promise(i),cancel:()=>a&&clearTimeout(a)}}var d=t(87432);var f=t(54343),m=t(72707);function h(){const e=function(){const e=(0,n.useRef)(void 0),r=(0,n.useRef)(!1);return(0,d.y)((function(){return()=>{e.current&&e.current()}})),(0,n.useCallback)((async t=>{if(r.current)return null;const{promise:n,cancel:a}=u(t);return e.current=a,r.current=!0,n}),[])}();return(0,n.useCallback)((async function({userOpHash:r,client:t}){return e({fn:async function(){return(0,m.b)(t,{hash:r})},validate:e=>!!e,interval:f.d7})}),[e])}var p=t(99172),y=t(98837),g=t(31860),v=t(93652),b=t(35017),w=t(7861);function E(e){if(!(0,w.z)().chains.find((r=>r.id===e))){const e=new Error("chain id is not supported by wagmi config");throw(0,b.gf)({isHandled:!1,severity:"error",error:e,context:"scw-error"}),e}const r=(0,v.K)((0,w.z)(),{chainId:e});if(!r){const e=new Error("wagmi client for chainId does not exist");throw(0,b.gf)({isHandled:!1,severity:"error",error:e,context:"scw-error"}),e}return r}class S extends Error{constructor(e){super(e.message),this.code=e.code??"UnknownError",this.stack=e.stack,this.name="PasskeyError",Object.setPrototypeOf(this,S.prototype)}}function k(e){return e instanceof S&&("UserCancelled"===e.code||e.message.includes("Cancelled by user")||e.message.includes("Unable to get sync account"))}function O(e){return e instanceof S&&(!!e.message.includes("NotAllowedError")||!!e.message.includes("Unable to create key during registration"))}var P;!function(e){e.PASSKEY_USER_CANCELLED="passkey_user_cancelled",e.PASSKEY_FAILED_AUTH="passkey_failed_auth",e.PASSKEY_NO_CREDENTIALS="passkey_no_credentials",e.PASSKEY_NO_ACCOUNT="passkey_no_account",e.PASSKEY_NOT_SUPPORTED_DUE_TO_OS_VERSION="passkey_not_supported_due_to_os_version",e.PASSKEY_NOT_SUPPORTED="passkey_not_supported",e.UNEXPECTED="passkey_unexpected"}(P||(P={}));var x,C=t(16308);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function L(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?A(Object(t),!0).forEach((function(r){_(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=T(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==T(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function G(){G=function(){return r};var e,r={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,r,t){e[r]=t.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,r,t){return Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[r]}try{l({},"")}catch(e){l=function(e,r,t){return e[r]=t}}function u(e,r,t,n){var o=r&&r.prototype instanceof g?r:g,i=Object.create(o.prototype),s=new _(n||[]);return a(i,"_invoke",{value:x(e,t,s)}),i}function d(e,r,t){try{return{type:"normal",arg:e.call(r,t)}}catch(e){return{type:"throw",arg:e}}}r.wrap=u;var f="suspendedStart",m="suspendedYield",h="executing",p="completed",y={};function g(){}function v(){}function b(){}var w={};l(w,i,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(I([])));S&&S!==t&&n.call(S,i)&&(w=S);var k=b.prototype=g.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(r){l(e,r,(function(e){return this._invoke(r,e)}))}))}function P(e,r){function t(a,o,i,s){var c=d(e[a],e,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==T(u)&&n.call(u,"__await")?r.resolve(u.__await).then((function(e){t("next",e,i,s)}),(function(e){t("throw",e,i,s)})):r.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return t("throw",e,i,s)}))}s(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new r((function(r,a){t(e,n,r,a)}))}return o=o?o.then(a,a):a()}})}function x(r,t,n){var a=f;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===p){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var c=C(s,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var l=d(r,t,n);if("normal"===l.type){if(a=n.done?p:m,l.arg===y)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=p,n.method="throw",n.arg=l.arg)}}}function C(r,t){var n=t.method,a=r.iterator[n];if(a===e)return t.delegate=null,"throw"===n&&r.iterator.return&&(t.method="return",t.arg=e,C(r,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var o=d(a,r.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,y;var i=o.arg;return i?i.done?(t[r.resultName]=i.value,t.next=r.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,y):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function A(e){var r={tryLoc:e[0]};1 in e&&(r.catchLoc=e[1]),2 in e&&(r.finallyLoc=e[2],r.afterLoc=e[3]),this.tryEntries.push(r)}function L(e){var r=e.completion||{};r.type="normal",delete r.arg,e.completion=r}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function I(r){if(r||""===r){var t=r[i];if(t)return t.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,o=function t(){for(;++a<r.length;)if(n.call(r,a))return t.value=r[a],t.done=!1,t;return t.value=e,t.done=!0,t};return o.next=o}}throw new TypeError(T(r)+" is not iterable")}return v.prototype=b,a(k,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:v,configurable:!0}),v.displayName=l(b,c,"GeneratorFunction"),r.isGeneratorFunction=function(e){var r="function"==typeof e&&e.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},r.awrap=function(e){return{__await:e}},O(P.prototype),l(P.prototype,s,(function(){return this})),r.AsyncIterator=P,r.async=function(e,t,n,a,o){void 0===o&&(o=Promise);var i=new P(u(e,t,n,a),o);return r.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},O(k),l(k,c,"Generator"),l(k,i,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var r=Object(e),t=[];for(var n in r)t.push(n);return t.reverse(),function e(){for(;t.length;){var n=t.pop();if(n in r)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=I,_.prototype={constructor:_,reset:function(r){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!r)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var t=this;function a(n,a){return s.type="throw",s.arg=r,t.next=n,a&&(t.method="next",t.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,r){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=r,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),y},finish:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),L(t),y}},catch:function(e){for(var r=this.tryEntries.length-1;r>=0;--r){var t=this.tryEntries[r];if(t.tryLoc===e){var n=t.completion;if("throw"===n.type){var a=n.arg;L(t)}return a}}throw Error("illegal catch attempt")},delegateYield:function(r,t,n){return this.delegate={iterator:I(r),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=e),y}},r}function I(e,r,t,n,a,o,i){try{var s=e[o](i),c=s.value}catch(e){return void t(e)}s.done?r(c):Promise.resolve(c).then(n,a)}function M(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function i(e){I(o,n,a,i,s,"next",e)}function s(e){I(o,n,a,i,s,"throw",e)}i(void 0)}))}}function D(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o,i,s=[],c=!0,l=!1;try{if(o=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=o.call(t)).done)&&(s.push(n.value),s.length!==r);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,r)||function(e,r){if(e){if("string"==typeof e)return U(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?U(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}e=t.hmd(e),(x="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&x(e);var F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};function j(e){return e.message.includes("replacement underpriced")}var N,B,H="You have a previous transaction that got stuck, please try going through the send flow to drop the previous transaction.";function K(e){var r,t=e.wallet,l=e.unsignedTxOrUserOp,u=e.signSuccess,d=e.signError,f=e.handleUnlock,m=e.unlockSuccess,v=e.unlockError,b=e.onRetryableError,w=e.skipSubmit,S=void 0!==w&&w,P=e.txSubmissionType,x=void 0===P?"original":P,T=e.source,A=void 0===T?"rn":T,_=e.onSubmit,I=e.waitForTxHash,U=e.chainId,F=D((0,n.useState)(!1),2),N=F[0],B=F[1],K=(0,y.O)(),R=(0,c.t)(),V=h(),Y=t.network.asChain();U&&(Y=p.lg.fromChainId({chainId:BigInt(U)}).asChain());var q=(0,n.useCallback)(function(){var e=M(G().mark((function e(r){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l&&K([l.asTransaction(r.txHash,r.nonce,t,l.metadata,x)]);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),[K,x,l,t]),W=(0,n.useCallback)((function(){R(t.blockchain.rawValue,Y)&&(0,o.L)({wallet:t})}),[t,R,Y]),Z=(0,n.useCallback)((function(e){_&&_(e),q(e),W()}),[_,q,W]),J=(0,n.useCallback)(function(){var e=M(G().mark((function e(){var r,n,o,c,f,m,h,p,y,v,w,P,T;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,(0,g.Z)({unsignedTxOrUserOp:l,wallet:t,txSubmissionType:x,skipSubmit:S,onSubmit:Z,source:A});case 5:if(r=e.sent,!I){e.next=14;break}return m=E(null!==(n=null===(o=Y)||void 0===o?void 0:o.chainId)&&void 0!==n?n:-1),e.next=10,V({userOpHash:r.txHash,client:m});case 10:h=e.sent,u(L(L({},r),{},{txHash:null!==(c=null==h||null===(f=h.receipt)||void 0===f?void 0:f.transactionHash)&&void 0!==c?c:r.txHash})),e.next=15;break;case 14:u(r);case 15:e.next=32;break;case 17:if(e.prev=17,e.t0=e.catch(0),(0,s.gf)({error:e.t0,context:"sign_and_submit_transaction_error",isHandled:!1,severity:"error"}),!k(e.t0)&&!O(e.t0)){e.next=22;break}return e.abrupt("return");case 22:if(!j(e.t0)||!(0,i.a)(l)){e.next=30;break}return y=e.t0 instanceof C.C?e.t0.details:e.t0.message,v=l.maxFeePerGas.toString(),w=l.maxPriorityFeePerGas.toString(),P=e.t0 instanceof C.C?JSON.parse(JSON.stringify(e.t0.walk())):void 0,(0,a.fZ)({errorMessage:y,chainId:null===(p=Y)||void 0===p?void 0:p.chainId,source:A,maxFeePerGas:v,maxPriorityFeePerGas:w,errorDetails:P}),b?null==b||b({unsignedTxOrUserOp:l,error:e.t0}):((0,s.gf)({error:e.t0,context:"sign_and_submit_transaction_unhandled_retryable_error",isHandled:!1,severity:"error"}),d(new Error(H))),e.abrupt("return");case 30:T=e.t0 instanceof C.C?new Error(e.t0.details):e.t0,d(T);case 32:return e.prev=32,B(!1),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[0,17,32,35]])})));return function(){return e.apply(this,arguments)}}(),[l,t,x,S,Z,A,I,null===(r=Y)||void 0===r?void 0:r.chainId,V,u,d,b]),z=(0,n.useCallback)((function(){return B(!0),f({unlockSuccess:function(){null==m||m(),J()},unlockError:function(e){e&&(null==v||v(e)),B(!1)}})}),[f,J,v,m]);return(0,n.useMemo)((function(){return{signAndSubmitScw:z,isSignAndSubmitScwLoading:N}}),[N,z])}F(K,"useState{[isLoading, setIsLoading](false)}\nuseSaveTransactions{saveTransactions}\nuseShouldRefreshBalancesAfterTxSubmit{shouldRefreshBalancesAfterTxSubmit}\nusePollForUserOpReceiptByUserOpHash{pollForUserOpReceiptByUserOpHash}\nuseCallback{saveTransaction}\nuseCallback{refreshBalancesForWallet}\nuseCallback{submitSuccess}\nuseCallback{signAndSubmit}\nuseCallback{signAndSubmitScw}\nuseMemo{}",(function(){return[y.O,c.t,h]})),(N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(N.register(j,"isStuckUserOpError","/workspaces/libs/data/hooks/useSignAndSubmitScw/useSignAndSubmitScw.tsx"),N.register(H,"stuckUserOpMessageUnhandled","/workspaces/libs/data/hooks/useSignAndSubmitScw/useSignAndSubmitScw.tsx"),N.register(K,"useSignAndSubmitScw","/workspaces/libs/data/hooks/useSignAndSubmitScw/useSignAndSubmitScw.tsx")),(B="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&B(e)},22608:(e,r,t)=>{t.d(r,{G:()=>c});t(34767),t(55452);var n=t(21455);var a,o=t(6939);e=t.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var i,s;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function c(e){var r=e.error,t=e.type;if(r)try{switch(!0){case"gasPriceError"===t:case"paymasterError"===t:case"insufficientFundsError"===t:case"paymasterStubError"===t:case"walletPrepareCallsError"===t:return{message:r.message,name:r.name};case"magicSpendQuoteSignatureError"===t:var a=r;return{code:a.code,name:a.name,message:a.message};case"magicSpendSignatureCommitError"===t:var i=r;return{code:i.code,name:i.name,message:i.message};case"userOpGasError"===t:var s=function(e){let r,t,n,a;const i=e.walk((e=>"UnknownNodeError"===e.name));i&&(r=i.name,t=i.shortMessage,n=i.docsPath);const s=e.walk((e=>"RpcRequestError"===e.name));s&&(r=s.name,t=s.details,n=s.docsPath,a=s.code);const c=e.walk((e=>"SmartAccountInsufficientFundsError"===e.name));c instanceof o.Cc&&(r=c.name,t=c.shortMessage,n=c.docsPath);const l=e.walk((e=>"InitCodeDidNotDeploySenderError"===e.name));l&&(r=l.name,t=l.shortMessage,n=l.docsPath);const u=e.walk((e=>"InvalidSmartAccountNonceError"===e.name));u&&(r=u.name,t=u.shortMessage,n=u.docsPath);const d=e.walk((e=>"PaymasterDataRejectedError"===e.name));d&&(r=d.name,t=d.shortMessage,n=d.docsPath);const f=e.walk((e=>"PaymasterDepositTooLowError"===e.name));f&&(r=f.name,t=f.shortMessage,n=f.docsPath);const m=e.walk((e=>"PaymasterNotDeployedError"===e.name));m&&(r=m.name,t=m.shortMessage,n=m.docsPath);const h=e.walk((e=>"PaymasterValidationRevertedError"===e.name));h&&(r=h.name,t=h.shortMessage,n=h.docsPath);const p=e.walk((e=>"PaymasterValidityPeriodError"===e.name));p&&(r=p.name,t=p.shortMessage,n=p.docsPath);const y=e.walk((e=>"SenderAddressMismatchError"===e.name));y&&(r=y.name,t=y.shortMessage,n=y.docsPath);const g=e.walk((e=>"SenderAlreadyDeployedError"===e.name));g&&(r=g.name,t=g.shortMessage,n=g.docsPath);const v=e.walk((e=>"SenderNotDeployedError"===e.name));v&&(r=v.name,t=v.shortMessage,n=v.docsPath);const b=e.walk((e=>"SmartAccountSignatureValidityPeriodError"===e.name));b&&(r=b.name,t=b.shortMessage,n=b.docsPath);const w=e.walk((e=>"SmartAccountValidationRevertedError"===e.name));w&&(r=w.name,t=w.shortMessage,n=w.docsPath);const E=e.walk((e=>"InitCodeRevertedError"===e.name));return E&&(r=E.name,t=E.shortMessage,n=E.docsPath),{name:r,details:t,docsPath:n,code:a}}(r);return{message:s.details,name:s.name,docsPath:s.docsPath};case"nonceError"===t:var c=r;return{message:c.shortMessage,name:c.name,docsPath:c.docsPath};case"byteCodeError"===t:var l=r;return{name:l.name,message:l.message};default:return void(0,n.K1)(r)}}catch(e){return void(0,n.K1)(r)}}(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&i.register(c,"handleUseUnsignedUserOpErrors","/workspaces/libs/data/scw/features/sign/transaction/utils/handleUseUnsignedUserOpErrors.tsx"),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},76825:(e,r,t)=>{t.d(r,{r:()=>Y});var n=t(14041),a=t(32183),o=t(8867),i=t(84213),s=t(46122),c=t(26182),l=t(77547),u=t(13620),d=t(91635),f=t(35333);var m=t(4244),h=t(68228),p=t(68197),y=t(33098),g=t(22608);const v=(0,a.YK)({genericError:{id:"PR2F1h",defaultMessage:"{message}"},rpcError:{id:"3bL3yP",defaultMessage:'Reverted with message: "{message}"'}});function b(){const{formatMessage:e}=(0,o.A)();return(0,n.useCallback)((function({userOpError:r}){if(r?.gasPriceError){const t=(0,g.G)({error:r?.gasPriceError,type:"gasPriceError"});return e(v.genericError,{message:t?.name||"get4337GasPricesError"})}if(r?.userOpGasError){const t=(0,g.G)({error:r?.userOpGasError,type:"userOpGasError"});return"RpcRequestError"===t?.name?e(v.rpcError,{message:t?.message||"estimateUserOperationGasError"}):e(v.genericError,{message:t?.name||"estimateUserOperationGasError"})}if(r?.walletPrepareCallsError)return e(v.genericError,{message:r?.walletPrepareCallsError?.message||"walletPrepareCallsError"})}),[e])}var w=t(7077),E=t(52689),S=t(72137),k=t(5104),O=t(84632),P=t(24117),x=t(99172);const C=(0,a.YK)({notEnoughBalanceForTransaction:{id:"wtowzI",defaultMessage:"You have {fiatTotalAvailableBalance} in {cryptoSymbol} on {chainName}, but you need at least {fiatTotalTransactionCost} for this transaction. Please deposit more {cryptoSymbol} on {chainName}."},notEnoughBalanceForGas:{id:"hIdzKF",defaultMessage:"You have {fiatTotalAvailableBalance} in {cryptoSymbol} on {chainName}, but you need {fiatTotalGasCost} due to gas fees. Please deposit more {cryptoSymbol} on {chainName}."}});function T(){const{formatMessage:e,formatters:r}=(0,o.A)(),t=(0,P.gs)(),a=(0,O.n)();return(0,n.useCallback)((function({userOp:n,chainId:o,balance:i}){const s=x.lg.fromChainId({chainId:BigInt(o)}),c=s.asChain(),l=c?.baseAssetCurrencyCode??"",u=BigInt(c?.baseAssetDecimal??18),d=(0,k.W)(n),f=n.calls.reduce(((e,r)=>e+r.value),0n),h=f?d+f:d,p={fromCurrencyCode:new E.j(l),decimals:u,network:s,exchangeRatesMap:t??{},formatters:r,fiatCurrency:a,formatZeroBalance:!0};return f&&h>i?new S.vU(e(C.notEnoughBalanceForTransaction,{cryptoSymbol:l,chainName:c?.displayName??"",fiatTotalAvailableBalance:(0,w.c)({...p,value:i,round:m.e1.Down}),fiatTotalTransactionCost:(0,w.c)({...p,value:h,round:m.e1.Up})})):n&&d>i?new S.IJ(e(C.notEnoughBalanceForGas,{cryptoSymbol:l,chainName:c?.displayName??"",fiatTotalAvailableBalance:(0,w.c)({...p,value:i,round:m.e1.Down}),fiatTotalGasCost:(0,w.c)({...p,value:d,round:m.e1.Up})})):void 0}),[t,e,r,a])}var A=t(86072),L=t(23804),_=t(52303);var G,I=t(89029),M=t.n(I);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function U(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function F(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?U(Object(t),!0).forEach((function(r){j(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function j(e,r,t){return(r=function(e){var r=function(e,r){if("object"!=D(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==D(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function N(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o,i,s=[],c=!0,l=!1;try{if(o=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=o.call(t)).done)&&(s.push(n.value),s.length!==r);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,r)||function(e,r){if(e){if("string"==typeof e)return B(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?B(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}e=t.hmd(e),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&G(e);var H,K,R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},V=(0,a.YK)({errorCancel:{id:"8gdsKY",defaultMessage:[{type:0,value:"Cancel"}]},errorConfirm:{id:"c7nwmM",defaultMessage:[{type:0,value:"Confirm"}]},getMoreCurrencyError:{id:"BB36LS",defaultMessage:[{type:0,value:"may be required for the transaction. Please deposit more"}]},sendKilledError:{id:"R6qUvO",defaultMessage:[{type:0,value:"This feature is currently unavailable. Try again later."}]},unableToEstimateGasError:{id:"iAStha",defaultMessage:[{type:0,value:"Unable to estimate network fee."}]},genericError:{id:"OlEpDj",defaultMessage:[{type:0,value:"Something went wrong."}]},learnMore:{id:"9DtuSP",defaultMessage:[{type:0,value:"Learn more"}]},stuckUserOpMessage:{id:"Uy3etL",defaultMessage:[{type:0,value:"You have a previous transaction that got stuck. Retry to cancel that previous transaction and submit this one in its place."}]}});function Y(){var e=(0,m.J9)(),r=(0,o.A)().formatMessage,t=(0,n.useRef)(!1),a=(0,p.s)("kill_send"),g=(0,h.F)("kill_send"),v=(0,p.s)("kill_dapp_tx"),w=(0,h.F)("kill_dapp_tx"),E=b(),S=T();return(0,n.useCallback)((function(n){var o,m,h,p,b,k,O=n.wallet,P=n.unsignedTxOrUserOp,x=n.error,C=n.primeError,T=n.feeWallet,G=n.flow,I=n.isTxSponsored,D=void 0!==I&&I,U=n.isAuxiliaryFundsEnabled,j=void 0!==U&&U,B=P,H=P;if(P&&T){var K=function(e){const r=(0,f.D)(e);let t,n;(0,_._)(e)&&e.lowerBoundFee?(t=e.lowerBoundFee<e.upperBoundFee?e.lowerBoundFee:e.upperBoundFee,n=e.upperBoundFee):(t=e.estimatedFee,n=e.estimatedFee),r&&(n+=e.extraFee??0n);return{minFee:t,maxFee:n}}(P),R=K.minFee,Y=K.maxFee;if(e.fiatValue({currencyCode:null==P?void 0:P.feeCurrencyCode,decimals:null==P?void 0:P.feeCurrencyDecimal,value:R,contractAddress:void 0,network:O.network,blockchain:O.blockchain})||"sync"===G){var q=null==O||null===(o=O.network.asChain())||void 0===o?void 0:o.chainId,W=q?BigInt(q):void 0,Z=null==O?void 0:O.blockchain.rawValue,J=null==T||null===(m=T.network.asChain())||void 0===m?void 0:m.chainId,z=J?BigInt(J):void 0,$=null==T?void 0:T.blockchain.rawValue,Q="dappTx"===G&&(w(Z)||w($)||v(W)||v(z)),X="send"===G&&(g(Z)||g($)||a(W)||a(z)),ee=e.formatToCrypto({currencyCode:P.feeCurrencyCode,decimals:P.feeCurrencyDecimal,value:BigInt(Y),includeCode:!0,maxDisplayDecimals:8n}),re=function({feeCurrencyCode:e,feeDecimal:r,feeValue:t,currencyFormatter:n,wallet:a}){const o=n.fiatValue({currencyCode:e,decimals:r,value:BigInt(t),contractAddress:void 0,network:a.network,blockchain:a.blockchain});return o?.lessThan(new(M())(.01))&&o?.greaterThan(new(M())(0))?`<${n.fiatValueString(new(M())(.01),!0)}`:n.formatToFiat({fromCurrencyCode:e,decimals:r,value:BigInt(t),isAbbreviated:!1,contractAddress:void 0,network:a.network,blockchain:a.blockchain})}({feeCurrencyCode:P.feeCurrencyCode,feeDecimal:P.feeCurrencyDecimal,feeValue:BigInt(Y),currencyFormatter:e,wallet:O}),te={getMoreCurrencyError:{type:"getMoreCurrencyError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:"".concat(ee,"  (").concat(re,") ").concat(r(V.getMoreCurrencyError)," ").concat(null!==(h=null===(p=O.network)||void 0===p||null===(p=p.asChain())||void 0===p?void 0:p.baseAssetCurrencyCode)&&void 0!==h?h:O.blockchain.rawValue,".")},sendKilledError:{type:"sendKilledError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:r(V.sendKilledError)},unableToEstimateGasError:{type:"unableToEstimateGasError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:r(V.unableToEstimateGasError)},stuckUserOpError:{type:"stuckUserOpError",isDismissible:!1,showErrorIcon:!0,isDisabled:!1,message:r(V.stuckUserOpMessage)},genericError:{type:"genericError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:"".concat((null==x?void 0:x.message)||r(V.genericError))},genericPrimeError:{type:"genericPrimeError",isDismissible:!1,showErrorIcon:!0,isDisabled:!0,message:"".concat(null==C?void 0:C.message)}};if(C)return te.genericPrimeError;if(Q||X)return te.sendKilledError;var ne=B.network.asChain(),ae=null!==(b=null===(k=Array.from(P.metadata,(function(e){var r=N(e,2);return{name:r[0],value:r[1]}})).find((function(e){return"txSource"===e.name.keyName})))||void 0===k?void 0:k.value)&&void 0!==b?b:"",oe=0n,ie=0n;if(P instanceof l.D?(oe=B.maxFeePerGas/BigInt(Math.pow(10,9)),ie=B.gasLimit):P instanceof u.U&&(oe=H.gasPrice/BigInt(Math.pow(10,9)),ie=H.gasLimit),"sync"===G&&P instanceof d.f){var se,ce=S({userOp:P,chainId:null!=J?J:0,balance:null!==(se=T.balance)&&void 0!==se?se:0n});if(ce)return F(F({},te.getMoreCurrencyError),{},{message:ce.message})}if(x){var le,ue,de,fe,me;if(!t.current)t.current=!0,(0,i.NZ)({blockchain:s.AA.rawValue,chainName:null!==(le=null==ne?void 0:ne.displayName)&&void 0!==le?le:"",chainId:null!==(ue=null==ne||null===(de=ne.chainId)||void 0===de?void 0:de.toString(10))&&void 0!==ue?ue:"",errorType:"Error",errorMessage:"".concat(x.name," -- ").concat(null==x?void 0:x.message),txSource:ae.toLocaleString(),gasPriceInGwei:null===(fe=oe)||void 0===fe?void 0:fe.toString(),gasLimit:null===(me=B.gasLimit)||void 0===me?void 0:me.toString()});if(P instanceof d.f&&(0,y.nq)(x))return te.stuckUserOpError;if(P instanceof d.f&&x instanceof A.T){var he,pe,ye,ge=S({userOp:P,chainId:null!==(he=null==ne?void 0:ne.chainId)&&void 0!==he?he:0,balance:null!==(pe=T.balance)&&void 0!==pe?pe:0n});if(ge)return F(F({},te.getMoreCurrencyError),{},{message:ge.message});var ve=E({userOpError:x.errorData});return ve&&null!==(ye=x.errorData)&&void 0!==ye&&ye.userOpGasError?F(F({},te.unableToEstimateGasError),{},{message:null!=ve?ve:te.unableToEstimateGasError.message}):F(F({},te.genericError),{},ve?{message:ve}:{message:r(V.genericError)})}return x===c.c.unableToEstimateGas?te.unableToEstimateGasError:te.genericError}var be,we,Ee,Se=L.u.isEqual(O,T)?Y+P.transferValue:Y,ke=void 0===T.balance||T.balance<Se,Oe=function(e,r){return!!(0,f.D)(e)&&!!e.feePayerAddress&&e.feePayerAddress!==r.primaryAddress}(P,O);if(!(Oe||D||j)&&(ke||P.transferValue<0n)){var Pe,xe,Ce,Te,Ae;if(!t.current)t.current=!0,(0,i.NZ)({blockchain:s.AA.rawValue,chainName:null!==(Pe=null==ne?void 0:ne.displayName)&&void 0!==Pe?Pe:"",chainId:null!==(xe=null==ne||null===(Ce=ne.chainId)||void 0===Ce?void 0:Ce.toString(10))&&void 0!==xe?xe:"",errorType:"InsufficientBalance",errorMessage:"Insufficient balance to pay gas fee",txSource:ae.toLocaleString(),gasPriceInGwei:null===(Te=oe)||void 0===Te?void 0:Te.toString(),gasLimit:null===(Ae=ie)||void 0===Ae?void 0:Ae.toString(),balanceUndefined:void 0===T.balance});return te.getMoreCurrencyError}if(t.current)t.current=!0,(0,i.WV)({blockchain:s.AA.rawValue,chainName:null!==(be=null==ne?void 0:ne.displayName)&&void 0!==be?be:"",chainId:null!==(we=null==ne||null===(Ee=ne.chainId)||void 0===Ee?void 0:Ee.toString(10))&&void 0!==we?we:""})}}}),[e,w,v,g,a,r,E,S])}R(Y,"useCurrencyFormatter{currencyFormatter}\nuseIntl{{ formatMessage }}\nuseRef{hasDispatchedGasAnalyticsEvent}\nuseKillSwitchByEthNetwork{isSendKilledByEthNetwork}\nuseKillSwitchByBlockchain{isSendKilledByBlockchain}\nuseKillSwitchByEthNetwork{isDappTxKilledByEthNetwork}\nuseKillSwitchByBlockchain{isDappTxKilledByBlockchain}\nuseErrorMessageForUnsignedUserOpError{getErrorMessageForUnsignedUserOpError}\nuseGetInsufficientFundsErrorForUserOp{getInsufficientFundsErrorForUserOp}\nuseCallback{}",(function(){return[m.J9,o.A,p.s,h.F,p.s,h.F,b,T]})),(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(V,"messages","/workspaces/libs/data/stores/Transactions/hooks/useGetTransactionDetailsErrors.tsx"),H.register(Y,"useGetTransactionDetailsErrors","/workspaces/libs/data/stores/Transactions/hooks/useGetTransactionDetailsErrors.tsx")),(K="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&K(e)},35333:(e,r,t)=>{t.d(r,{D:()=>a});var n=t(16191);function a(e){return e instanceof n.K}},64292:(e,r,t)=>{t.d(r,{Z:()=>a});var n=t(76825);function a({wallet:e,unsignedTxOrUserOp:r,error:t,primeError:a,feeWallet:o,flow:i,isTxSponsored:s=!1,isAuxiliaryFundsEnabled:c=!1}){return(0,n.r)()({wallet:e,unsignedTxOrUserOp:r,error:t,primeError:a,feeWallet:o,flow:i,isTxSponsored:s,isAuxiliaryFundsEnabled:c})}}}]);
//# sourceMappingURL=4292.js.map