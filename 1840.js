/*! For license information please see 1840.js.LICENSE.txt */
"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[1840],{41840:(e,t,r)=>{r.r(t),r.d(t,{Stake:()=>P});var n,a=r(14041),o=r(86090),i=r(55452),s=r(13394),l=r(99172),c=r(79071),u=r.n(c),d=r(24905),f=r(92271),p=r(7610),y=r(15654),g=r(34767),v=r(53363),m=r(39289),h=r(66491),b=r(46171),k=r(13041),w=r(31085);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var T,L,M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};function E(){var e=(0,v.X)();return(0,w.jsx)(b.Im.Provider,{defaultStep:e,children:(0,w.jsx)(k.A,{})})}function P(){var e=(0,o.g)(),t=e.stakeType,r=e.currencyCode,n=e.targetCurrencyCode,c=e.chainId,v=e.tokenId,k=(0,a.useMemo)((function(){return A(A({},b.LX),{},{stakeType:t,currencyCode:r,targetCurrencyCode:n,network:l.lg.fromChainId({chainId:BigInt(null!=c?c:"1")}),tokenId:null!=v?v:""})}),[c,r,t,n,v]),C=(0,a.useCallback)((function(e){var n=e.error,a=e.errorHash;(0,i.$s)("stake.full_screen_error.viewed",{errorHash:a,errorMessage:n.message,action:g.X2.view,componentType:g.I5.page,currencyCode:r,chainId:c,context:t});var o=(0,s.Gp)(n,"stake log global error");(0,s.gf)({error:o,metadata:{error:null==n?void 0:n.message},context:"bridge-error",severity:"error",isHandled:!1})}),[c,r,t]),S=(0,a.useCallback)((function(e){var t=e.error;return(0,w.jsx)(h.U,{error:t})}),[]);return(0,w.jsx)(y.T,{height:d.fG,children:(0,w.jsx)(f.t,{onError:C,renderFallback:S,children:(0,w.jsx)(p.e,{fallback:(0,w.jsx)(m.$,{}),children:(0,w.jsx)(b.Zd.Provider,{onSubmit:u(),initialValues:k,children:(0,w.jsx)(E,{})})})})})}M(E,"useDefaultStep{defaultStep}",(function(){return[v.X]})),M(P,"useParams{{ stakeType, currencyCode, targetCurrencyCode, chainId, tokenId }}\nuseMemo{initialFormValues}\nuseCallback{logGlobalError}\nuseCallback{renderFallback}",(function(){return[o.g]})),(T="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(T.register(E,"StakeContent","/workspaces/apps/extension/src/screens/Stake/Stake.tsx"),T.register(P,"Stake","/workspaces/apps/extension/src/screens/Stake/Stake.tsx")),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&L(e)},13041:(e,t,r)=>{r.d(t,{A:()=>h});var n,a=r(33396),o=r(25071),i=r(34627),s=r(20495),l=r(94955),c=r(59311),u=r(57691),d=r(57571),f=r(60527),p=r(74989),y=r(46171),g=r(31085);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var v,m;"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function h(){return(0,g.jsxs)(y.Im.Steps,{children:[(0,g.jsx)(a.yQ,{component:(0,g.jsx)(c.J,{})},"learn"),(0,g.jsx)(a.yQ,{component:(0,g.jsx)(l.b,{})},"entry"),(0,g.jsx)(a.yQ,{component:(0,g.jsx)(i.U,{})},"confirmationPreview"),(0,g.jsx)(a.yQ,{component:(0,g.jsx)(u.A,{})},"phoneConfirmation"),(0,g.jsx)(a.yQ,{component:(0,g.jsx)(p.f,{})},"status"),(0,g.jsx)(a.yQ,{component:(0,g.jsx)(s.Y,{})},"depositGas"),(0,g.jsx)(a.yQ,{component:(0,g.jsx)(d.V,{})},"selectAsset"),(0,g.jsx)(a.yQ,{component:(0,g.jsx)(f.I,{})},"selectProvider"),(0,g.jsx)(a.yQ,{component:(0,g.jsx)(o.q,{})},"claimConfirmation")]})}(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&v.register(h,"StakeStepper","/workspaces/apps/extension/src/screens/Stake/StakeStepper.tsx"),(m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&m(e)},25071:(e,t,r)=>{r.d(t,{q:()=>ee});var n,a=r(14041),o=r(32183),i=r(8867),s=r(86090),l=r(65393),c=r(52303),u=r(13394),d=r(63164),f=r(2688),p=r(39060),y=r(62872),g=r(53404),v=r(70210),m=r(7427),h=r(70359),b=r(396),k=r(24475),w=r(3093),C=r(79119),S=r(94975),A=r(78154),x=r(70918),T=r(32451),L=r(78392),M=r(17065),E=r(4118),P=r(33396),I=r(37121),j=r(52365),O=r(15654),F=r(55799),G=r(28672),D=r(5950),B=r(86700),H=r(46171),N=r(72502),W=r(54),R=r(31085);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(){q=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),s=new P(n||[]);return a(i,"_invoke",{value:T(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",y="executing",g="completed",v={};function m(){}function h(){}function b(){}var k={};c(k,i,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(I([])));C&&C!==r&&n.call(C,i)&&(k=C);var S=b.prototype=m.prototype=Object.create(k);function A(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,o,i,s){var l=d(e[a],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==V(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function T(t,r,n){var a=f;return function(o,i){if(a===y)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var l=L(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=y;var c=d(t,r,n);if("normal"===c.type){if(a=n.done?g:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=g,n.method="throw",n.arg=c.arg)}}}function L(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(V(t)+" is not iterable")}return h.prototype=b,a(S,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},A(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new x(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(S),c(S,l,"Generator"),c(S,i,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function K(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var Z,J,$="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},X=(0,o.YK)({claimTitle:{id:"ISNPhP",defaultMessage:[{type:0,value:"Claim"}]},unstakeTitle:{id:"dy9tzc",defaultMessage:[{type:0,value:"Unstake"}]},aprLabel:{id:"e4Bven",defaultMessage:[{type:1,value:"rate"},{type:0,value:" APR"}]},questionsLabel:{id:"nZnLXA",defaultMessage:[{type:0,value:"Questions about staking?"}]},readFAQsLabel:{id:"VidkL6",defaultMessage:[{type:0,value:"Read FAQs"}]}});function ee(){var e=Y((0,a.useState)(!1),2),t=e[0],r=e[1],n=(0,I.A)(H.Zd),o=n.stakeType,i=n.network,s=n.tokenId,l=(0,x.h)(),c=(0,b.u)(l,{network:i.value,stakeType:k.V.STAKE,currencyCodes:[h.mv]}),u=(0,A.F)(l,i.value);if(!u)throw new Error("Transaction data was missing in StakeClaimConfirmation");var d=(0,a.useCallback)((function(){r(!0)}),[]),f=(0,N.v)({sourceWallet:c[0],feeWallet:u,stakeType:o.value,tokenId:s.value,handleSuccess:d}),p=f.generateTransactions,y=f.isGenerateTransactionsLoading;return(0,a.useEffect)((function(){p()}),[]),!t||y?(0,R.jsx)(O.T,{alignItems:"center",justifyContent:"center",height:"100%",children:(0,R.jsx)(M.y,{color:"primary"})}):(0,R.jsx)(te,{wallet:c[0]})}function te(e){var t,r,n,o=e.wallet,h=(0,i.A)().formatMessage,b=(0,s.W6)().goBack,k=(0,P.lE)(H.Im).goToStep,M=(0,I.A)(H.Zd),O=M.unsignedStakeTxResult,V=M.stakeTxData,U=M.currencyCode,z=M.stakeType,Q=M.network,Z=M.tokenId,J=M.ledgerStakeError,$=(0,x.h)(),ee=(0,A.F)($,Q.value),te=Y((0,a.useState)(null),2),re=te[0],ne=te[1],ae=(0,a.useMemo)((function(){var e;return{currencyCode:U.value,chainId:null===(e=Q.value.asChain())||void 0===e?void 0:e.chainId}}),[U,Q.value]),oe=(0,l.Dw)(ae),ie=(0,l.Ve)(ae),se=(0,l.Nv)(ae),le=(0,l.ES)(ae),ce=(0,D.s)();if(!(V.value&&null!=O&&null!==(t=O.value)&&void 0!==t&&t.transaction&&null!=O&&null!==(r=O.value)&&void 0!==r&&r.wallet&&ee))throw new Error("Transaction data was missing in StakeClaimConfirmation");(0,B.c)((0,T.y9)(T.fO.stake),T.yW.load_claim_preview,{type:"end"});var ue=(0,E.z)((0,T.y9)(T.fO.stake),T.yW.trigger_claim,{logMetric:!0}).start,de=(0,m.vQ)(O.value.wallet.accountId),fe=(0,N.v)({sourceWallet:o,feeWallet:ee,shouldIgnoreSuccessRedirect:!0,stakeType:z.value,tokenId:Z.value}),pe=fe.generateTransactions,ye=fe.isGenerateTransactionsLoading,ge=Y((0,a.useState)(new Date),2),ve=ge[0],me=ge[1],he=(0,a.useCallback)(function(){var e,t=(e=q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:me(new Date);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){K(o,n,a,i,s,"next",e)}function s(e){K(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}(),[pe]);(0,y.G)(he,{interval:W.u});var be=(0,a.useCallback)((function(e){(0,l.U9)(_(_({},ae),{},{canceledFromError:e})),b()}),[b,ae]),ke=(0,a.useCallback)((function(){k("status")}),[k]),we=(0,a.useCallback)((function(e){ne(e)}),[]),Ce=(0,a.useCallback)((function(){(0,l.V7)(ae)}),[ae]),Se=(0,a.useCallback)((function(e){(0,l.GF)(ae),ne(e)}),[ae]),Ae=(0,v.D)({wallet:O.value.wallet,unsignedTxOrUserOp:O.value.transaction,unlockSuccess:Ce,unlockError:Se,signSuccess:ke,signError:we,handleUnlock:ce(de.id)}),xe=Ae.signAndSubmitStandalone,Te=Ae.isSignAndSubmitStandaloneLoading,Le=(0,a.useCallback)((function(){(0,l.FD)(ae),k("status")}),[k,ae]),Me=(0,a.useCallback)((function(){(0,l.IO)(ae)}),[ae]),Ee=(0,a.useCallback)((function(e){(0,l.V_)(ae),(0,u.gf)({error:new Error(e.message),context:"ledger-error",severity:"error",isHandled:!1}),J.onChange(e),k("status")}),[k,J,ae]),Pe=(0,g.LK)({unsignedTxOrUserOp:O.value.transaction,onSignSuccess:Le,onSignError:Ee,flow:g.nl.Stake}),Ie=Pe.signAndSubmitLedger,je=Pe.isHardwareWalletSigning,Oe=Pe.hardwareWalletScreen,Fe=(0,a.useCallback)((function(){k("phoneConfirmation")}),[k]),Ge=ye||Te||je,De=(0,C.f)(V.value),Be=(0,S.A)(null==O?void 0:O.value.transaction,null==O?void 0:O.value.wallet),He=(0,a.useCallback)((function(e){var t=e.networkEstimatedFee,r=e.networkBaseFee,n=e.networkMaxFee;oe({networkEstimatedFee:t,networkBaseFee:r,networkMaxFee:n});try{var a;if((0,c._)(null==O||null===(a=O.value)||void 0===a?void 0:a.transaction)){var o=Be,i=o.lowerBoundFee,s=o.upperBoundFee;if(!i||!s)throw new Error("No valid lower and upper bound fees for bridge 1559 transaction");ie(Be)}else{if(!Be.estimatedFee)throw new Error("No valid estimated fee for claim transaction");se(Be)}}catch(e){le(Be)}}),[oe,null==O||null===(n=O.value)||void 0===n?void 0:n.transaction,Be,ie,se,le]),Ne=(0,w.l)({stakeType:z.value,stakeTxData:V.value,unsignedStakeTx:O.value.transaction,isPageLoading:Ge,lastUpdateTime:ve,rowItemsAnalytics:He}),We=(0,d.m)($,{stakeTxData:V.value,unsignedStakeTx:O.value.transaction}),Re=(0,a.useCallback)((function(){(0,l.AG)(ae)}),[ae]),Ve=(0,f.O)({account:de,buttonAnalyticsCallbacks:{triggerAnalyticsConfirm:Re},signAndSubmitStandalone:xe,signAndSubmitLedger:Ie,signAndSubmitWalletlink:Fe,markStartPerf:ue}),Ue=(0,p.i)({isLoading:Ge,transactionDetailError:We,buttonAnalyticsCallbacks:{triggerAnalyticsConfirm:Re},onCancelButtonPressed:be,context:p.k.CLAIM,getHandleSubmitPressed:Ve}),_e=De.secondaryItem.iconSourceOrName,ze=(0,a.useMemo)((function(){return{currencyCode:_e.currencyCode,iconUrl:_e.iconUrl,showNetworkIcon:!0,network:null==_e?void 0:_e.network}}),[_e.currencyCode,_e.iconUrl,null==_e?void 0:_e.network]);return je?Oe:(0,R.jsx)(G.Z,{headerText:h(X.claimTitle),detailRowItems:Ne,error:We,buttonProps:Ue,onPrimaryButtonDisabled:Me,handleBackButton:b,signAndSubmitError:re,height:"100%",topSection:(0,R.jsx)(F.a,{bordered:!0,children:(0,R.jsx)(j.l,{title:De.secondaryItem.title,detail:De.secondaryItem.detail,subdetail:De.secondaryItem.subDetail,media:(0,R.jsx)(L.E,{asset:ze})})})})}$(ee,"useState{[isInitialized, setIsInitialized](false)}\nuseFields{{ stakeType, network, tokenId }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseEarnableWallets{earnableWallets}\nuseGetFeeWallet{feeWallet}\nuseCallback{handleSuccess}\nuseGenerateStakeTransaction{{ generateTransactions, isGenerateTransactionsLoading }}\nuseEffect{}",(function(){return[I.A,x.h,b.u,A.F,N.v]})),$(te,"useIntl{{ formatMessage }}\nuseHistory{{ goBack }}\nuseStepper{{ goToStep }}\nuseFields{{\n    unsignedStakeTxResult,\n    stakeTxData,\n    currencyCode,\n    stakeType,\n    network,\n    tokenId,\n    ledgerStakeError,\n  }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseGetFeeWallet{feeWallet}\nuseState{[signAndSubmitError, setSignAndSubmitError](null)}\nuseMemo{analyticsMetadata}\nuseClaimConfirmationStepViewed{triggerAnalyticsConfirmationStepViewed}\nuseStakeConfirmationGasFeeViewed1559{triggerAnalyticsGasFeeViewed1559}\nuseStakeConfirmationGasFeeViewedLegacy{triggerAnalyticsGasFeeViewedLegacy}\nuseStakeConfirmationGasFeeNotShown{triggerAnalyticsGasFeeNotShown}\nuseHandleUnlockForSigning{handleUnlock}\nusePerfMarkOnMount{}\nuseExtensionPerfMark{{ start: markStartClaimPerf }}\nuseAccountById{account}\nuseGenerateStakeTransaction{{ generateTransactions, isGenerateTransactionsLoading }}\nuseState{[lastUpdateTime, setLastUpdateTime](new Date())}\nuseCallback{refreshNetworkFeeCallback}\nuseIntervalForPromises{}\nuseCallback{handleCancel}\nuseCallback{onStandaloneSigningSuccess}\nuseCallback{onSigningError}\nuseCallback{handleUnlockSuccess}\nuseCallback{handleUnlockError}\nuseSignAndSubmitStandalone{{ signAndSubmitStandalone, isSignAndSubmitStandaloneLoading }}\nuseCallback{handleLedgerSigningSuccess}\nuseCallback{handlePrimaryButtonDisabled}\nuseCallback{handleLedgerSigningError}\nuseSignAndSubmitLedger{{ signAndSubmitLedger, isHardwareWalletSigning, hardwareWalletScreen }}\nuseCallback{signAndSubmitWalletlink}\nuseTransactionOverviewItems{overViewItems}\nuseAnalyticsFeeData{analyticsFeeData}\nuseCallback{rowItemsAnalytics}\nuseTransactionDetailRowItems{transactionDetailRowItems}\nuseTransactionDetailErrors{transactionDetailError}\nuseCallback{triggerAnalyticsConfirm}\nuseGetHandleSubmitPressed{getHandleSubmitPressed}\nuseTransactionDetailButtons{buttonProps}\nuseMemo{assetLike}",(function(){return[i.A,s.W6,P.lE,I.A,x.h,A.F,l.Dw,l.Ve,l.Nv,l.ES,D.s,B.c,E.z,m.vQ,N.v,y.G,v.D,g.LK,C.f,S.A,w.l,d.m,f.O,p.i]})),(Z="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(Z.register(X,"messages","/workspaces/apps/extension/src/screens/Stake/steps/ClaimConfirmationStep/ClaimConfirmationStep.tsx"),Z.register(ee,"ClaimConfirmationStep","/workspaces/apps/extension/src/screens/Stake/steps/ClaimConfirmationStep/ClaimConfirmationStep.tsx"),Z.register(te,"ClaimConfirmationInitialized","/workspaces/apps/extension/src/screens/Stake/steps/ClaimConfirmationStep/ClaimConfirmationStep.tsx")),(J="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&J(e)},34627:(e,t,r)=>{r.d(t,{U:()=>te});var n,a=r(14041),o=r(32183),i=r(8867),s=r(65393),l=r(52303),c=r(4244),u=r(13394),d=r(63164),f=r(2688),p=r(39060),y=r(62872),g=r(53404),v=r(70210),m=r(7427),h=r(70359),b=r(7548),k=r(24475),w=r(3093),C=r(79119),S=r(94975),A=r(78154),x=r(70918),T=r(32451),L=r(4118),M=r(33396),E=r(37121),P=r(98055),I=r(72162),j=r(26893),O=r(28672),F=r(28162),G=r(5950),D=r(86700),B=r(64654),H=r(46171),N=r(72502),W=r(54),R=r(31085);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function z(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==V(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(){q=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),s=new P(n||[]);return a(i,"_invoke",{value:T(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",y="executing",g="completed",v={};function m(){}function h(){}function b(){}var k={};c(k,i,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(I([])));C&&C!==r&&n.call(C,i)&&(k=C);var S=b.prototype=m.prototype=Object.create(k);function A(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,o,i,s){var l=d(e[a],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==V(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function T(t,r,n){var a=f;return function(o,i){if(a===y)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var l=L(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=y;var c=d(t,r,n);if("normal"===c.type){if(a=n.done?g:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=g,n.method="throw",n.arg=c.arg)}}}function L(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(V(t)+" is not iterable")}return h.prototype=b,a(S,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},A(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new x(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(S),c(S,l,"Generator"),c(S,i,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function K(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function Y(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){K(o,n,a,i,s,"next",e)}function s(e){K(o,n,a,i,s,"throw",e)}i(void 0)}))}}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var J,$,X="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},ee=(0,o.YK)({earnTitle:{id:"K79kK4",defaultMessage:[{type:0,value:"Earn yield"}]},unstakeTitle:{id:"dy9tzc",defaultMessage:[{type:0,value:"Unstake"}]},questionsLabel:{id:"nZnLXA",defaultMessage:[{type:0,value:"Questions about staking?"}]},seeFAQButton:{id:"1zZBMs",defaultMessage:[{type:0,value:"See FAQ"}]},readFAQsLabel:{id:"wVpK/U",defaultMessage:[{type:0,value:"Read FAQs"}]}});function te(){var e,t,r,n,o,V,U,z,K,Z,J,$=(0,i.A)().formatMessage,X=(0,M.lE)(H.Im),te=X.goBack,re=X.goToStep,ne=Q((0,a.useState)(null),2),ae=ne[0],oe=ne[1],ie=(0,c.J9)().formatToCrypto,se=(0,E.A)(H.Zd),le=se.unsignedApproveTxResult,ce=se.unsignedStakeTxResult,ue=se.stakeTxData,de=se.cryptoAmount,fe=se.currencyCode,pe=se.stakeType,ye=se.ledgerStakeError,ge=se.targetCurrencyCode,ve=Q((0,a.useState)(new Date),2),me=ve[0],he=ve[1],be=(0,x.h)(),ke=(0,k.X)(be,{currencyCode:fe.value,targetCurrencyCode:ge.value,stakeType:pe.value}),we=ke.sourceWallet,Ce=ke.targetWallet,Se=(0,A.F)(be,null!==(e=null==we?void 0:we.network)&&void 0!==e?e:B.t0),Ae=(0,b.a)({targetCurrencyCode:pe.value===k.V.STAKE?ge.value:fe.value}).earnRate,xe=(0,F.i)();if(!(ue.value&&null!=ce&&null!==(t=ce.value)&&void 0!==t&&t.transaction&&null!=ce&&null!==(r=ce.value)&&void 0!==r&&r.wallet&&we&&Se))throw new Error("Transaction data was missing in ConfirmationPreviewStep");var Te=(0,m.vQ)(we.accountId),Le=(0,a.useMemo)((function(){var e;return{currencyCode:we.currencyCode.code,chainId:null===(e=we.network.asChain())||void 0===e?void 0:e.chainId,contractAddress:we.contractAddress,cryptoAmount:ie({currencyCode:we.currencyCode,decimals:we.decimals,value:de.value,includeCode:!1}),targetCurrencyCode:ge.value}}),[we.currencyCode,we.network,we.contractAddress,we.decimals,ie,de.value,ge]),Me=(0,s.fO)(Le),Ee=(0,s.Ve)(Le),Pe=(0,s.Nv)(Le),Ie=(0,s.ES)(Le);(0,D.c)((0,T.y9)(T.fO.stake),T.yW.load_preview,{type:"end"});var je=(0,L.z)((0,T.y9)(T.fO.stake),T.yW.trigger_stake,{logMetric:!0}).start,Oe=(0,N.v)({sourceWallet:we,feeWallet:Se,targetWallet:Ce,shouldIgnoreSuccessRedirect:!0,amount:de.value,stakeType:pe.value}),Fe=Oe.generateTransactions,Ge=Oe.isGenerateTransactionsLoading,De=(0,G.s)(),Be=(0,a.useCallback)((function(){(0,s.XC)(Le),re("status")}),[re,Le]),He=(0,a.useCallback)((function(e){(0,s.L$)(Le),oe(e)}),[Le]),Ne=(0,a.useCallback)((function(){(0,s.pM)(Le),re("status")}),[Le,re]),We=(0,a.useCallback)((function(e){(0,s.Az)(Le),oe(e)}),[Le]),Re=(0,v.D)({wallet:ce.value.wallet,unsignedTxOrUserOp:ce.value.transaction,unsignedApproveTxOrUserOp:null==le||null===(n=le.value)||void 0===n?void 0:n.transaction,unlockSuccess:Ne,unlockError:We,signSuccess:Be,signError:He,handleUnlock:De(null===(o=ce.value)||void 0===o||null===(o=o.wallet)||void 0===o?void 0:o.accountId)}),Ve=Re.signAndSubmitStandalone,Ue=Re.isSignAndSubmitStandaloneLoading,_e=(0,a.useCallback)(Y(q().mark((function e(){return q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe();case 2:he(new Date);case 3:case"end":return e.stop()}}),e)}))),[Fe]);(0,y.G)(_e,{interval:W.u});var ze=(0,d.m)(be,{stakeTxData:ue.value,unsignedApproveTx:null===(V=le.value)||void 0===V?void 0:V.transaction,unsignedStakeTx:ce.value.transaction}),qe=(0,S.A)(null===(U=ce.value)||void 0===U?void 0:U.transaction,null===(z=ce.value)||void 0===z?void 0:z.wallet),Ke=(0,a.useCallback)((function(e){var t=e.networkEstimatedFee,r=e.networkBaseFee,n=e.networkMaxFee;Me({networkEstimatedFee:t,networkBaseFee:r,networkMaxFee:n});try{var a;if((0,l._)(null===(a=ce.value)||void 0===a?void 0:a.transaction)){var o=qe,i=o.lowerBoundFee,s=o.upperBoundFee;if(!i||!s)throw new Error("No valid lower and upper bound fees for bridge 1559 transaction");Ee(qe)}else{if(!qe.estimatedFee)throw new Error("No valid estimated fee for bridge transaction");Pe(qe)}}catch(e){Ie(qe)}}),[Me,null===(K=ce.value)||void 0===K?void 0:K.transaction,qe,Ee,Pe,Ie]),Ye=(0,a.useCallback)((function(e){(0,s.AQ)(_(_({},Le),{},{canceledFromError:e})),xe("abandonStakeConfirmation"),te()}),[te,Le,xe]),Qe=(0,a.useCallback)((function(){(0,s.re)(Le),chrome.tabs.create({url:h.xg[null==we?void 0:we.currencyCode.code]})}),[Le,we]),Ze=(0,a.useCallback)((function(){(0,s.YX)(Le)}),[Le]),Je=(0,a.useCallback)((function(){(0,s.Bi)(Le)}),[Le]),$e=(0,a.useCallback)((function(){(0,s.Tp)(Le),re("status")}),[re,Le]),Xe=(0,a.useCallback)((function(){(0,s.gH)(Le)}),[Le]),et=(0,a.useCallback)((function(e){(0,s.X8)(Le),(0,u.gf)({error:new Error(e.message),context:"ledger-error",severity:"error",isHandled:!1}),ye.onChange(e),re("status")}),[re,ye,Le]),tt=(0,g.LK)({unsignedTxOrUserOp:ce.value.transaction,unsignedApproveTxOrUserOp:null===(Z=le.value)||void 0===Z?void 0:Z.transaction,onSignSuccess:$e,onSignError:et,flow:g.nl.Stake}),rt=tt.signAndSubmitLedger,nt=tt.isHardwareWalletSigning,at=tt.hardwareWalletScreen,ot=(0,a.useCallback)((function(){re("phoneConfirmation")}),[re]),it=Ge||Ue||nt,st=(0,f.O)({account:Te,buttonAnalyticsCallbacks:{triggerAnalyticsConfirmAnyway:Je,triggerAnalyticsConfirm:Ze},signAndSubmitStandalone:Ve,signAndSubmitWalletlink:ot,signAndSubmitLedger:rt,markStartPerf:je}),lt=(0,p.i)({isLoading:it,transactionDetailError:ze,buttonAnalyticsCallbacks:{triggerAnalyticsConfirmAnyway:Je,triggerAnalyticsConfirm:Ze},onCancelButtonPressed:Ye,context:pe.value===k.V.STAKE?p.k.STAKE:p.k.UNSTAKE,getHandleSubmitPressed:st}),ct=(0,w.l)({stakeType:pe.value,stakeTxData:ue.value,unsignedApproveTx:null===(J=le.value)||void 0===J?void 0:J.transaction,unsignedStakeTx:ce.value.transaction,isPageLoading:it,lastUpdateTime:me,rowItemsAnalytics:Ke}),ut=(0,C.f)(ue.value),dt=(0,a.useMemo)((function(){return _(_({},ut.primaryItem),pe.value===k.V.UNSTAKE?{description:(0,R.jsx)(P.v,{as:"p",color:"positive",children:Ae})}:{})}),[ut.primaryItem,pe.value,Ae]),ft=(0,a.useMemo)((function(){return _(_({},ut.secondaryItem),pe.value===k.V.STAKE?{description:(0,R.jsx)(P.v,{as:"p",color:"positive",children:Ae})}:{})}),[ut.secondaryItem,pe.value,Ae]);return nt?at:(0,R.jsx)(O.Z,{headerText:$(pe.value===k.V.STAKE?ee.earnTitle:ee.unstakeTitle),headerAction:(0,R.jsx)(I.N_,{testID:"stake-confirmation-faq-link",onPress:Qe,children:$(ee.readFAQsLabel)}),detailRowItems:ct,error:ze,buttonProps:lt,onPrimaryButtonDisabled:Xe,handleBackButton:te,signAndSubmitError:ae,height:"100%",topSection:(0,R.jsx)(j.w,{primaryItem:dt,secondaryItem:ft,error:ze})})}X(te,"useIntl{{ formatMessage }}\nuseStepper{{ goBack, goToStep }}\nuseState{[signAndSubmitError, setSignAndSubmitError](null)}\nuseCurrencyFormatter{{ formatToCrypto }}\nuseFields{{\n    unsignedApproveTxResult,\n    unsignedStakeTxResult,\n    stakeTxData,\n    cryptoAmount,\n    currencyCode,\n    stakeType,\n    ledgerStakeError,\n    targetCurrencyCode,\n  }}\nuseState{[lastUpdateTime, setLastUpdateTime](new Date())}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseSelectStakeWallet{{ sourceWallet, targetWallet }}\nuseGetFeeWallet{feeWallet}\nuseGetEarnRate{{ earnRate }}\nuseLaunchSprig{launchSprig}\nuseAccountById{account}\nuseMemo{analyticsMetadata}\nuseConfirmationStepViewed{triggerAnalyticsConfirmationStepViewed}\nuseStakeConfirmationGasFeeViewed1559{triggerAnalyticsGasFeeViewed1559}\nuseStakeConfirmationGasFeeViewedLegacy{triggerAnalyticsGasFeeViewedLegacy}\nuseStakeConfirmationGasFeeNotShown{triggerAnalyticsGasFeeNotShown}\nusePerfMarkOnMount{}\nuseExtensionPerfMark{{ start: markStartStakePerf }}\nuseGenerateStakeTransaction{{ generateTransactions, isGenerateTransactionsLoading }}\nuseHandleUnlockForSigning{handleUnlock}\nuseCallback{onStandaloneSigningSuccess}\nuseCallback{onStandaloneSigningError}\nuseCallback{handleUnlockSuccess}\nuseCallback{handleUnlockError}\nuseSignAndSubmitStandalone{{ signAndSubmitStandalone, isSignAndSubmitStandaloneLoading }}\nuseCallback{refreshNetworkFeeCallback}\nuseIntervalForPromises{}\nuseTransactionDetailErrors{transactionDetailError}\nuseAnalyticsFeeData{analyticsFeeData}\nuseCallback{rowItemsAnalytics}\nuseCallback{handleCancel}\nuseCallback{handleFAQPress}\nuseCallback{triggerAnalyticsConfirm}\nuseCallback{triggerAnalyticsConfirmAnyway}\nuseCallback{handleLedgerSigningSuccess}\nuseCallback{handlePrimaryButtonDisabled}\nuseCallback{handleLedgerSigningError}\nuseSignAndSubmitLedger{{ signAndSubmitLedger, isHardwareWalletSigning, hardwareWalletScreen }}\nuseCallback{signAndSubmitWalletlink}\nuseGetHandleSubmitPressed{getHandleSubmitPressed}\nuseTransactionDetailButtons{buttonProps}\nuseTransactionDetailRowItems{transactionDetailRowItems}\nuseTransactionOverviewItems{overViewItems}\nuseMemo{detailOverviewPrimaryItem}\nuseMemo{detailOverviewSectionItem}",(function(){return[i.A,M.lE,c.J9,E.A,x.h,k.X,A.F,b.a,F.i,m.vQ,s.fO,s.Ve,s.Nv,s.ES,D.c,L.z,N.v,G.s,v.D,y.G,d.m,S.A,g.LK,f.O,p.i,w.l,C.f]})),(J="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(J.register(ee,"messages","/workspaces/apps/extension/src/screens/Stake/steps/ConfirmationPreviewStep/ConfirmationPreviewStep.tsx"),J.register(te,"ConfirmationPreviewStep","/workspaces/apps/extension/src/screens/Stake/steps/ConfirmationPreviewStep/ConfirmationPreviewStep.tsx")),($="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&$(e)},20495:(e,t,r)=>{r.d(t,{Y:()=>V});var n,a=r(14041),o=r(32183),i=r(8867),s=r(86090),l=r(8239),c=r(4244),u=r(86431),d=r(62872),f=r(81732),p=r(24475),y=r(78154),g=r(70918),v=r(79734),m=r(21983),h=r(24905),b=r(33396),k=r(37121),w=r(22115),C=r(85581),S=r(34107),A=r(15654),x=r(84492),T=r(60149),L=r(97541),M=r(67209),E=r(72162),P=r(41690),I=r(46171),j=r(72502),O=r(31085);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function G(){G=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),s=new P(n||[]);return a(i,"_invoke",{value:T(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",y="executing",g="completed",v={};function m(){}function h(){}function b(){}var k={};c(k,i,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(I([])));C&&C!==r&&n.call(C,i)&&(k=C);var S=b.prototype=m.prototype=Object.create(k);function A(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,o,i,s){var l=d(e[a],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==F(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function T(t,r,n){var a=f;return function(o,i){if(a===y)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var l=L(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=y;var c=d(t,r,n);if("normal"===c.type){if(a=n.done?g:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=g,n.method="throw",n.arg=c.arg)}}}function L(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function I(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(F(t)+" is not iterable")}return h.prototype=b,a(S,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},A(x.prototype),c(x.prototype,s,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new x(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(S),c(S,l,"Generator"),c(S,i,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;E(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:I(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function D(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function B(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){D(o,n,a,i,s,"next",e)}function s(e){D(o,n,a,i,s,"throw",e)}i(void 0)}))}}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var H,N,W="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},R=(0,o.YK)({title:{id:"/OJF46",defaultMessage:[{type:0,value:"Let's top up your "},{type:1,value:"cryptoSymbol"},{type:0,value:" balance"}]},main:{id:"GJmTtm",defaultMessage:[{type:0,value:"Buy or transfer from Coinbase"}]},finePrint:{id:"NtJETL",defaultMessage:[{type:0,value:"Coinbase.com\u2019s account link feature is subject to coinbase.com "},{type:1,value:"userAgreement"},{type:0,value:" and "},{type:1,value:"privacyPolicy"},{type:0,value:"."}]},userAgreement:{id:"V6jvi1",defaultMessage:[{type:0,value:"User Agreement"}]},privacyPolicy:{id:"0ROee6",defaultMessage:[{type:0,value:"Privacy Policy"}]},cbPayButton:{id:"kR8Mqy",defaultMessage:[{type:0,value:"Buy with Coinbase Onramp"}]},transferButton:{id:"IykAaN",defaultMessage:[{type:0,value:"Transfer from another wallet"}]},defaultError:{id:"fnBlFk",defaultMessage:[{type:0,value:"Buy or transfer funds from Coinbase or another wallet."}]},zeroBalanceSubtitle:{id:"ZZAIvI",defaultMessage:[{type:0,value:"You need "},{type:1,value:"cryptoSymbol"},{type:0,value:" before you can make a transaction on the "},{type:1,value:"networkName"},{type:0,value:" network."}]},notEnoughBalanceSubtitle:{id:"R6shrI",defaultMessage:[{type:0,value:"You need an additional ~"},{type:1,value:"cryptoAmountNeeded"},{type:0,value:" ("},{type:1,value:"fiatAmountNeeded"},{type:0,value:") to cover the network fee."}]}});function V(){var e,t,r,n=(0,i.A)().formatMessage,o=(0,s.W6)(),F=(0,b.lE)(I.Im).goBack,D=(0,c.J9)(),H=(0,k.A)(I.Zd),N=H.currencyCode,W=H.targetCurrencyCode,V=H.stakeType,U=H.formDepositAmount,_=H.cryptoAmount,z=H.network,q=(0,g.h)(),K=(0,p.X)(q,{currencyCode:N.value,targetCurrencyCode:W.value,chainId:null===(e=z.value.asChain())||void 0===e?void 0:e.chainId.toString(),stakeType:V.value}),Y=K.sourceWallet,Q=K.targetWallet;if(!Y||!Q)throw new Error("Wallet is required");var Z=(0,a.useMemo)((function(){var e;return{currencyCode:Y.currencyCode.code,chainId:null===(e=Y.network.asChain())||void 0===e?void 0:e.chainId,contractAddress:Y.contractAddress,targetCurrencyCode:W.value}}),[Y.contractAddress,Y.currencyCode.code,Y.network,W.value]),J=(0,y.F)(q,z.value);if(!J)throw new Error("Could not find a valid fee wallet for the select source chain");(0,l.pO)(Z);var $=(0,j.v)({sourceWallet:Y,feeWallet:J,targetWallet:Q,amount:_.value,stakeType:V.value,shouldIgnoreSuccessRedirect:!0}),X=$.generateTransactions,ee=$.isGenerateTransactionsLoading,te=(0,a.useCallback)(B(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null!=J&&J.balance&&J.balance>0n)){e.next=3;break}return e.next=3,X();case 3:case"end":return e.stop()}}),e)}))),[X,J]);(0,d.G)(te,{interval:3e4});var re=(0,f.aR)({asset:null==J?void 0:J.currencyCode.rawValue,chainId:null==J||null===(t=J.network.asChain())||void 0===t?void 0:t.chainId,walletGroupId:q}),ne=(0,a.useMemo)((function(){if(null==J||!J.currencyCode||!U.value)return 0;var e=D.fiatValue({currencyCode:null==J?void 0:J.currencyCode,decimals:null==J?void 0:J.decimals,value:U.value,contractAddress:null==J?void 0:J.contractAddress,network:null==J?void 0:J.network,blockchain:null==J?void 0:J.blockchain}),t=null==e?void 0:e.toNumber();return t?t+(25-t%25)%25:0}),[D,J,U.value]),ae=(0,u.Gj)({widgetParameters:{destinationWallets:re,presetFiatAmount:ne}}),oe=ae.cbPayInstance,ie=ae.isCBPayInstanceReady,se=(0,a.useCallback)(B(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,l.ON)(Z),e.abrupt("return",null===(t=oe.current)||void 0===t?void 0:t.open());case 2:case"end":return e.stop()}}),e)}))),[Z,oe]),le=(0,a.useCallback)((function(){(0,l.m2)(Z),o.push(P.Q.RECEIVE)}),[Z,o]),ce=(0,a.useCallback)((function(){F()}),[F]),ue=(0,a.useCallback)(B(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",chrome.tabs.create({url:v.i1,active:!1}));case 1:case"end":return e.stop()}}),e)}))),[]),de=(0,a.useCallback)(B(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",chrome.tabs.create({url:v.WO,active:!1}));case 1:case"end":return e.stop()}}),e)}))),[]),fe=(0,a.useMemo)((function(){var e,t;if(void 0!==U.value){var r=void 0!==(null==J?void 0:J.balance)&&null!=J&&J.currencyCode?D.formatToCrypto({currencyCode:J.currencyCode,decimals:J.decimals,value:U.value,network:J.network}):"",a=void 0!==(null==J?void 0:J.balance)&&null!=J&&J.currencyCode?D.formatToFiat({fromCurrencyCode:J.currencyCode,decimals:J.decimals,value:U.value,isAbbreviated:!1,contractAddress:J.contractAddress,network:J.network,blockchain:J.blockchain,includeCode:!0,formatZeroBalance:!0}):"";return n(R.notEnoughBalanceSubtitle,{cryptoAmountNeeded:r,fiatAmountNeeded:a})}return n(R.zeroBalanceSubtitle,{cryptoSymbol:null===(e=J.network.asChain())||void 0===e?void 0:e.baseAssetCurrencyCode,networkName:null===(t=J.network.asChain())||void 0===t?void 0:t.displayName})}),[D,J,U.value,n]);return(0,O.jsxs)(A.T,{height:h.pA,children:[(0,O.jsx)(m.u,{onBack:ce,spacingBottom:0}),(0,O.jsxs)(A.T,{alignItems:"center",width:"100%",spacingHorizontal:2,children:[(0,O.jsx)(T.f,{as:"h1",spacingBottom:1,align:"center",children:n(R.title,{cryptoSymbol:null===(r=J.network.asChain())||void 0===r?void 0:r.baseAssetCurrencyCode})}),(0,O.jsx)(L.K,{as:"p",color:"foregroundMuted",align:"center",testID:"deposit-gas-message",children:fe}),(0,O.jsx)(x.z,{alignItems:"center",justifyContent:"center",spacingVertical:6,children:(0,O.jsx)(S.g,{name:"primeEarn"})})]}),(0,O.jsxs)(A.T,{alignItems:"center",width:"100%",children:[(0,O.jsxs)(w.e,{accessibilityLabel:"Transfer Funds",block:!0,direction:"vertical",children:[(0,O.jsx)(C.$,{onPress:se,loading:ee||!ie,testID:"deposit-gas-cb-pay-button",children:(0,O.jsx)(x.z,{alignItems:"center",gap:1,children:n(R.cbPayButton)})}),(0,O.jsx)(C.$,{onPress:le,variant:"secondary",testID:"deposit-gas-transfer-button",children:n(R.transferButton)})]}),(0,O.jsx)(M.V,{as:"p",color:"foregroundMuted",align:"center",spacingTop:2,children:n(R.finePrint,{userAgreement:(0,O.jsx)(E.N_,{variant:"legal",color:"primary",onPress:ue,children:n(R.userAgreement)}),privacyPolicy:(0,O.jsx)(E.N_,{variant:"legal",color:"primary",onPress:de,children:n(R.privacyPolicy)})})})]})]})}W(V,"useIntl{{ formatMessage }}\nuseHistory{history}\nuseStepper{{ goBack }}\nuseCurrencyFormatter{currencyFormatter}\nuseFields{{ currencyCode, targetCurrencyCode, stakeType, formDepositAmount, cryptoAmount, network }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseSelectStakeWallet{{ sourceWallet, targetWallet }}\nuseMemo{analyticsMetadata}\nuseGetFeeWallet{feeWallet}\nuseDepositGasStepViewed{}\nuseGenerateStakeTransaction{{ generateTransactions, isGenerateTransactionsLoading }}\nuseCallback{refreshNetworkFeeCallback}\nuseIntervalForPromises{}\nuseDestinationWallets{destinationWallets}\nuseMemo{nextMultipleOf25}\nuseCoinbasePay{{ cbPayInstance, isCBPayInstanceReady }}\nuseCallback{handleConnectCoinbaseClick}\nuseCallback{handleTransferClick}\nuseCallback{handleBackClick}\nuseCallback{handleClickUserAgreement}\nuseCallback{handleClickPrivacyPolicy}\nuseMemo{subtitle}",(function(){return[i.A,s.W6,b.lE,c.J9,k.A,g.h,p.X,y.F,l.pO,j.v,d.G,f.aR,u.Gj]})),(H="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(H.register(R,"messages","/workspaces/apps/extension/src/screens/Stake/steps/DepositGasStep/DepositGasStep.tsx"),H.register(V,"DepositGasStep","/workspaces/apps/extension/src/screens/Stake/steps/DepositGasStep/DepositGasStep.tsx")),(N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&N(e)},94955:(e,t,r)=>{r.d(t,{b:()=>le});var n=r(14041),a=r(32183),o=r(8867),i=r(86090),s=r(65393),l=r(96295),c=r(4244),u=r(61516),d=r(97416),f=r(66181),p=r(14928),y=r(81894);function g(){const e=(0,f.l)((0,p.T)("kill_staking_top_up")),t=(0,y.s)(d.r.feb_2023_stake_top_up);return!e&&t}var v=r(61096),m=r(88),h=r(11554),b=r(70359),k=r(7548);function w(){const e=(0,f.l)((0,p.T)("kill_stake_multi_provider"));return(0,n.useMemo)((()=>!e),[e])}var C,S=r(41015),A=r(24475),x=r(8612),T=r(78154),L=r(70918),M=r(32451),E=r(89703),P=r(78392),I=r(10058),j=r(50215),O=r(4681),F=r(88589),G=r(20027),D=r(4118),B=r(33396),H=r(37121),N=r(85581),W=r(52365),R=r(2673),V=r(55799),U=r(15654),_=r(84492),z=r(35001),q=r(72162),K=r(94330),Y=r(39262),Q=r(28162),Z=r(86700),J=r(64654),$=r(46171),X=r(72502),ee=r(31085);function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return re(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}e=r.hmd(e),(C="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&C(e);var ne,ae,oe="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},ie=(0,a.YK)({earnTitle:{id:"RAYgXb",defaultMessage:[{type:0,value:"Earn yield"}]},stakeLabel:{id:"IcRvLD",defaultMessage:[{type:0,value:"Stake"}]},unstakingTitle:{id:"QSnExS",defaultMessage:[{type:0,value:"Unstake"}]},availableAmount:{id:"O4zzOB",defaultMessage:[{type:0,value:"Available"}]},maxButton:{id:"Pm9NLv",defaultMessage:[{type:0,value:"Max"}]},previewButton:{id:"dhicuL",defaultMessage:[{type:0,value:"Preview"}]},topUpButtonText:{id:"nuMeii",defaultMessage:[{type:0,value:"Top up your "},{type:1,value:"cryptoSymbol"},{type:0,value:" balance"}]},learnMoreLabel:{id:"wVpK/U",defaultMessage:[{type:0,value:"Read FAQs"}]},arrowDownAccessibilityLabel:{id:"JtMmZ+",defaultMessage:[{type:0,value:"To"}]},toLabel:{id:"JPdzL+",defaultMessage:[{type:0,value:"To"}]}}),se={spacingVertical:0},le=(0,n.memo)(oe((function(){var e,t,r,a=(0,o.A)().formatMessage,d=(0,i.W6)().goBack,f=te((0,n.useState)(!1),2),p=f[0],y=f[1],C=(0,B.lE)($.Im).goToStep,re=(0,Q.i)(),ne=(0,H.A)($.Zd),ae=ne.currencyCode,oe=ne.stakeType,le=ne.isFiat,ce=ne.cryptoAmount,ue=ne.enteredAmount,de=ne.shouldUpdateCryptoAmount,fe=ne.targetCurrencyCode,pe=ne.network,ye=(0,c.J9)(),ge=g(),ve=(0,S.$)(),me=w(),he=(0,L.h)(),be=(0,A.X)(he,{currencyCode:ae.value,targetCurrencyCode:fe.value,stakeType:oe.value,chainId:null===(e=pe.value.asChain())||void 0===e?void 0:e.chainId.toString()}),ke=be.sourceWallet,we=be.targetWallet,Ce=be.isLoading,Se=(0,k.a)({targetCurrencyCode:oe.value===A.V.STAKE?fe.value:ae.value,chainId:null===(t=pe.value.asChain())||void 0===t?void 0:t.chainId.toString()}).earnRate,Ae=(0,v.Dy)({txType:v.Ir.STAKE,wallet:ke}),xe=Ae.gasEstimate,Te=Ae.refetch,Le=Ae.isFetched,Me=(0,m.oD)(),Ee=(0,x.X)(he,{network:pe.value}),Pe=(0,T.F)(he,pe.value);if(!Pe)throw new Error("Could not find a valid fee wallet for the select source chain");var Ie=(0,D.z)((0,M.y9)(M.fO.stake),M.yW.load_preview,{logMetric:!0}).start;(0,Z.c)((0,M.y9)(M.fO.stake),M.yW.launch_stake,{type:"end"});var je=(0,n.useMemo)((function(){return oe.value===A.V.STAKE}),[oe]),Oe=(0,n.useMemo)((function(){var e;return{currencyCode:null==ke?void 0:ke.currencyCode.code,chainId:null==ke||null===(e=ke.network.asChain())||void 0===e?void 0:e.chainId,contractAddress:null==ke?void 0:ke.contractAddress,targetCurrencyCode:fe.value}}),[null==ke?void 0:ke.contractAddress,null==ke?void 0:ke.currencyCode.code,null==ke?void 0:ke.network,fe.value]);(0,s.iD)(Oe),(0,n.useEffect)((function(){if(je&&we){var e,t=null===(e=we.network.asChain())||void 0===e?void 0:e.chainId;Me({code:we.currencyCode,chainId:t?BigInt(t):1n,networkId:(0,h.S)({network:we.network,blockchain:we.blockchain})||l.Fd,contractAddress:we.contractAddress})}}),[Me,we,je]);var Fe=(0,n.useCallback)((function(e){y(e),(0,s.Eo)(Oe)}),[Oe]),Ge=(0,n.useCallback)((function(){(0,s.TN)(Oe)}),[Oe]),De=(0,n.useCallback)((function(){(0,s.qP)(Oe),re("abandonStakeEntry"),d()}),[d,Oe,re]),Be=(0,n.useMemo)((function(){var e;return{currencyCode:null==ke?void 0:ke.currencyCode.code,network:null==ke?void 0:ke.network,iconUrl:null==ke||null===(e=ke.imageURL)||void 0===e?void 0:e.toString(),showNetworkIconOverride:!(null==ke||!ke.contractAddress)}}),[null==ke?void 0:ke.contractAddress,null==ke?void 0:ke.currencyCode.code,null==ke?void 0:ke.imageURL,null==ke?void 0:ke.network]),He=(0,n.useMemo)((function(){var e;return{currencyCode:null==we?void 0:we.currencyCode.code,network:null==we?void 0:we.network,iconUrl:null==we||null===(e=we.imageURL)||void 0===e?void 0:e.toString(),showNetworkIconOverride:!(null==we||!we.contractAddress)}}),[null==we?void 0:we.contractAddress,null==we?void 0:we.currencyCode.code,null==we?void 0:we.imageURL,null==we?void 0:we.network]),Ne=void 0!==(null==ke?void 0:ke.balance)?ye.formatToFiat({fromCurrencyCode:ke.currencyCode,decimals:ke.decimals,value:ke.balance,isAbbreviated:!1,contractAddress:ke.contractAddress,network:ke.network,blockchain:ke.blockchain}):"",We=(0,X.v)({sourceWallet:ke,feeWallet:Pe,targetWallet:we,amount:ce.value,stakeType:oe.value,shouldIgnoreSuccessRedirect:!1}),Re=We.generateTransactions,Ve=We.generateTransactionsError,Ue=We.isGenerateTransactionsLoading,_e=(0,n.useMemo)((function(){return(!ge||ae.value!==l.fz)&&p||0n===ce.value||Ue||Boolean(Ee)||Ce}),[ge,ae,p,ce.value,Ue,Ee,Ce]);(0,n.useEffect)((function(){_e||(0,s.uK)(Oe)}),[_e,Oe]);var ze=Ee||(null==Ve||null===(r=Ve.code)||void 0===r?void 0:r.includes("MinerFee")),qe=(0,n.useCallback)((function(){if(null==ke||!ke.balance)throw new Error("Could not find a balance for source wallet");!Le||null!=ke&&ke.contractAddress||Te();var e=ke.balance-xe<=0n?ke.balance:ke.balance-xe,t=ke.contractAddress?ke.balance:e;(0,s.RM)(Oe),ce.onChange(t),ue.onChange((0,u.ej)({currencyFormatter:ye,wallet:ke,newAmount:t,isCrypto:!le.value,includeCode:!1,preserveEndingZeros:!0}))}),[ce,ye,ue,le.value,ke,Oe,Le,Te,xe]),Ke=(0,n.useCallback)((function(){Ie(),Re(),(0,s.Wu)(Oe)}),[Ie,Re,Oe]),Ye=(0,n.useMemo)((function(){return null!=Ee?Ee:Ve}),[Ve,Ee]),Qe=(0,n.useMemo)((function(){return Ye?(ze||(V.a,G.r),(0,ee.jsx)(z.m,{content:(0,ee.jsx)(F.e,{network:null==ke?void 0:ke.network,zeroBaseAssetError:Ee}),children:(0,ee.jsx)(V.a,{children:(0,ee.jsx)(G.r,{error:Ye,hasTooltip:!0})})})):null}),[Ye,null==ke?void 0:ke.network,Ee,ze]),Ze=(0,n.useMemo)((function(){var e;return ge&&p&&ae.value===l.fz||(null==Ve||null===(e=Ve.code)||void 0===e?void 0:e.includes("MinerFee"))||Ee}),[ae.value,null==Ve?void 0:Ve.code,p,ge,Ee]),Je=(0,n.useCallback)((function(){(0,s.$g)(Oe),C("depositGas")}),[C,Oe]),$e=(0,n.useMemo)((function(){var e;return Ze?a(ie.topUpButtonText,{cryptoSymbol:null==ke||null===(e=ke.network.asChain())||void 0===e?void 0:e.baseAssetCurrencyCode}):a(ie.previewButton)}),[Ze,a,null==ke?void 0:ke.network]),Xe=(0,n.useMemo)((function(){return Ze?Je:Ke}),[Ze,Ke,Je]),et=(0,n.useCallback)((function(){var e;(0,s.ci)(Oe),chrome.tabs.create({url:b.xg[null!==(e=null==ke?void 0:ke.currencyCode.code)&&void 0!==e?e:""]})}),[Oe,null==ke?void 0:ke.currencyCode.code]),tt=(0,n.useCallback)((function(e){var t;if(null==ke||!ke.balance)throw new Error("Could not find a balance for source wallet");var r=(null!==(t=ke.balance)&&void 0!==t?t:0n)*BigInt(e*J.c$)/BigInt(J.c$);ce.onChange(r),ue.onChange((0,u.ej)({currencyFormatter:ye,wallet:ke,newAmount:r,isCrypto:!le.value,includeCode:!1,preserveEndingZeros:!0}))}),[ke,ce,ue,ye,le.value]),rt=(0,n.useCallback)((function(){C("selectAsset")}),[C]),nt=(0,n.useCallback)((function(){C("selectProvider")}),[C]),at=(0,n.useMemo)((function(){return ae.value!==b.mv}),[ae]);return(0,ee.jsx)(O.ff,{height:"100%",header:(0,ee.jsx)(I.jq,{variant:"secondary",title:a(oe.value===A.V.STAKE?ie.earnTitle:ie.unstakingTitle),actions:(0,ee.jsx)(q.N_,{onPress:et,children:a(ie.learnMoreLabel)}),handleBack:De}),children:(0,ee.jsxs)(U.T,{justifyContent:"space-between",height:"100%",children:[(0,ee.jsxs)(U.T,{height:"50%",justifyContent:"center",children:[ke?(0,ee.jsx)(E.J$,{context:"stake",wallet:ke,isFiat:le,cryptoAmount:ce,enteredAmount:ue,shouldUpdateCryptoAmount:de,onInsufficientFund:Fe,analyticsSwitchDisplay:Ge,txType:v.Ir.STAKE,isTopUpEnabled:ge&&ae.value===l.fz,fiatValueDisplay:Ne}):null,(0,ee.jsx)(V.a,{justifyContent:"center",height:J.VZ,spacingHorizontal:3,spacingTop:1,children:Qe})]}),(0,ee.jsxs)(U.T,{height:"50%",justifyContent:"flex-end",gap:1,spacingBottom:3,children:[(0,ee.jsx)(W.l,{compact:me,outerSpacing:se,testID:"stake-entry-selector",accessory:je&&ve?"arrow":void 0,title:a(je?ie.stakeLabel:ie.unstakingTitle),description:me?(0,ee.jsx)(K.C,{as:"p",color:"foregroundMuted",children:null==ke?void 0:ke.currencyCode.code}):(0,ee.jsxs)(_.z,{gap:.5,children:[(0,ee.jsx)(K.C,{as:"p",color:"foregroundMuted",children:"".concat(null==ke?void 0:ke.currencyCode.code," \xb7")}),(0,ee.jsx)(K.C,{as:"p",color:"positive",children:Se})]}),detail:(0,ee.jsx)(U.T,{alignItems:"flex-end",children:(0,ee.jsx)(Y.w,{as:"p",children:Ne})}),subdetail:(0,ee.jsx)(U.T,{alignItems:"flex-end",children:(0,ee.jsx)(K.C,{as:"p",color:"foregroundMuted",children:a(ie.availableAmount)})}),onPress:je&&ve?rt:void 0,media:(0,ee.jsx)(P.E,{asset:Be})}),je&&me?(0,ee.jsx)(V.a,{alignItems:"center",children:(0,ee.jsx)(R.I,{name:"verticalLine",size:"s",spacingStart:4,color:"foregroundMuted"})}):null,je&&me?(0,ee.jsx)(W.l,{compact:!0,outerSpacing:se,testID:"stake-entry-provider-selector",accessory:at?"arrow":void 0,title:a(ie.toLabel),description:(0,ee.jsxs)(_.z,{gap:.5,children:[(0,ee.jsx)(K.C,{as:"p",color:"foregroundMuted",children:"".concat(null==we?void 0:we.currencyCode.code," \xb7")}),(0,ee.jsx)(K.C,{as:"p",color:"positive",children:Se})]}),onPress:at?nt:void 0,media:(0,ee.jsx)(P.E,{asset:He})}):null,(0,ee.jsxs)(U.T,{spacingHorizontal:3,gap:2,spacingTop:me?2:0,children:[(0,ee.jsx)(j.G,{onPressMaxButton:qe,onPressPercentageButton:tt}),(0,ee.jsx)(N.$,{block:!0,disabled:!Ze&&_e,onPress:Xe,loading:Ue,variant:Ze?"secondary":"primary",testID:"entry-step-cta-button",children:$e})]})]})]})})}),"useIntl{{ formatMessage }}\nuseHistory{{ goBack }}\nuseState{[hasInsufficientFund, setHasInsufficientFund](false)}\nuseStepper{{ goToStep }}\nuseLaunchSprig{launchSprig}\nuseFields{{\n    currencyCode,\n    stakeType,\n    isFiat,\n    cryptoAmount,\n    enteredAmount,\n    shouldUpdateCryptoAmount,\n    targetCurrencyCode,\n    network,\n  }}\nuseCurrencyFormatter{currencyFormatter}\nuseIsStakingTopUpEnabled{isStakeTopUpEnabled}\nuseIsWETHStakeEligible{isWETHSTakeEligible}\nuseIsStakeMultiProviderEligible{isStakeMultiProviderEligible}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseSelectStakeWallet{{\n    sourceWallet,\n    targetWallet,\n    isLoading: isStakeWalletsLoading,\n  }}\nuseGetEarnRate{{ earnRate }}\nuseGetGasEstimate{{ gasEstimate, refetch, isFetched }}\nuseAddTrackedExchangeRate{addTrackedRate}\nuseBaseAssetZeroBalanceError{zeroBaseAssetError}\nuseGetFeeWallet{feeWallet}\nuseExtensionPerfMark{{ start: markStartLoadPreviewPerf }}\nusePerfMarkOnMount{}\nuseMemo{isStake}\nuseMemo{analyticsMetadata}\nuseEntryStepViewed{}\nuseEffect{}\nuseCallback{handleInsufficientFund}\nuseCallback{triggerAnalyticsSwitchDisplay}\nuseCallback{handleGoBack}\nuseMemo{sourceAssetLike}\nuseMemo{targetAssetLike}\nuseGenerateStakeTransaction{{ generateTransactions, generateTransactionsError, isGenerateTransactionsLoading }}\nuseMemo{isPreviewButtonDisabled}\nuseEffect{}\nuseCallback{handlePressMaxButton}\nuseCallback{handlePressPreview}\nuseMemo{errorToDisplay}\nuseMemo{errorComponent}\nuseMemo{isDepositGasButtonVisible}\nuseCallback{handleDepositGasPress}\nuseMemo{buttonText}\nuseMemo{handleCTAPress}\nuseCallback{handleLearnMorePress}\nuseCallback{handlePressPercentageButton}\nuseCallback{handlePressSelectAsset}\nuseCallback{handlePressSelectProvider}\nuseMemo{hasMultiProvider}",(function(){return[o.A,i.W6,B.lE,Q.i,H.A,c.J9,g,S.$,w,L.h,A.X,k.a,v.Dy,m.oD,x.X,T.F,D.z,Z.c,s.iD,X.v]})));(ne="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(ne.register(ie,"messages","/workspaces/apps/extension/src/screens/Stake/steps/EntryStep/EntryStep.tsx"),ne.register(se,"listCellOuterSpacing","/workspaces/apps/extension/src/screens/Stake/steps/EntryStep/EntryStep.tsx"),ne.register(le,"EntryStep","/workspaces/apps/extension/src/screens/Stake/steps/EntryStep/EntryStep.tsx")),(ae="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&ae(e)},59311:(e,t,r)=>{r.d(t,{J:()=>D});var n=r(14041),a=r(32183),o=r(8867),i=r(86090),s=r(65393),l=r(70359),c=r(96295),u=r(7548),d=r(72019);const f=(0,a.YK)({stakingTitle:{id:"t3wAw/",defaultMessage:"Earn {rate} on your {currencyCode}"},earnRewardsLabel:{id:"yUuhDt",defaultMessage:"Earn on {currencyCode} with staking"},ethEarnRewardsDescription:{id:"cmddz2",defaultMessage:"Stake your ETH with Coinbase to start earning."},maticEarnRewardsDescription:{id:"+tAMoP",defaultMessage:"Stake with Lido, a popular staking service."},unstakeLabel:{id:"XuNNLd",defaultMessage:"Unstake at anytime"},ethUnstakeDescription:{id:"cr2lqN",defaultMessage:"Staked ETH is held as cbETH, which you can unstake, sell, or deposit in DeFi."},maticUnstakeDescription:{id:"kb19It",defaultMessage:"After you unstake, your MATIC will be claimable in 3\u20134 days."},safeAndSecureLabel:{id:"P4xgkB",defaultMessage:"Safe and secure"},safeAndSecureDescription:{id:"kmvB/Q",defaultMessage:"Coinbase\u2019s best-in-class security has kept funds safe for 10+ years."},noHiddenFeesLabel:{id:"46t5Ym",defaultMessage:"No hidden fees"},noHiddenFeesDescription:{id:"9MyzK6",defaultMessage:"You get the same yield here as you do on Lido. There\u2019s no Coinbase fee."},stakeButton:{id:"kIyFYU",defaultMessage:"Start earning"},faqButton:{id:"UoeLR6",defaultMessage:"Read FAQs"},multiProviderStakeLabel:{id:"/gY5Zv",defaultMessage:"Stake with Coinbase or Rocket Pool"},multiProviderStakeDescription:{id:"LVF3fq",defaultMessage:"Stake your ETH with Coinbase or Rocket Pool to start earning."},multiProviderRewardsLabel:{id:"pdkEA5",defaultMessage:"Earn staking rewards"},multiProviderRewardsDescription:{id:"l01HV1",defaultMessage:"Earn staking rewards simply by holding cbETH or rETH."},multiProviderLockupLabel:{id:"Cq9pd0",defaultMessage:"Flexible with no lockup"},multiProviderLockupDescription:{id:"1T46IR",defaultMessage:"Swap back to ETH or use your tokens in DeFi any time."},delegatorStakingLabel:{id:"1/37zJ",defaultMessage:"Get rewarded for staking"},delegatorStakingDescription:{id:"D0ap0Q",defaultMessage:"Earn staking rewards while helping secure the Ethereum network. Rate updates daily."},delegatorStakingOptionsLabel:{id:"dpxRrW",defaultMessage:"Multiple options to choose from"},delegatorStakingOptionsDescription:{id:"Gh95X4",defaultMessage:"Select from high rewards, flexible, or decentralized on the confirmation step."},delegatorStakingUnstakeLabel:{id:"nB3eP9",defaultMessage:"Unstake with ease"},delegatorStakingUnstakeDescription:{id:"d2ZuWy",defaultMessage:"Unstaking takes up to 1 day to process; liquid staking offers instant liquidity."}});function p({currencyCode:e,chainId:t,targetCurrencyCode:r}){const{formatMessage:a}=(0,o.A)(),{earnRate:i}=(0,u.a)({targetCurrencyCode:r??l.bk[e],chainId:t}),s=(0,d.P)();return(0,n.useMemo)((()=>{switch(e){case l.R1:case c.fz:return{earnRate:i,illustrationName:"ethStakeOrWrap",listItems:[{label:a(s?f.delegatorStakingLabel:f.multiProviderStakeLabel,{currencyCode:e}),description:a(s?f.delegatorStakingDescription:f.multiProviderStakeDescription),testID:"learn-step-earn-rewards"},{label:a(s?f.delegatorStakingOptionsLabel:f.multiProviderRewardsLabel),description:a(s?f.delegatorStakingOptionsDescription:f.multiProviderRewardsDescription),testID:"learn-step-unstake"},{label:a(s?f.delegatorStakingUnstakeLabel:f.multiProviderLockupLabel),description:a(s?f.delegatorStakingUnstakeDescription:f.multiProviderLockupDescription),testID:"learn-step-fees"}]};case l.mv:return{earnRate:i,illustrationName:"transferCoins",listItems:[{label:a(f.earnRewardsLabel,{currencyCode:e}),description:a(f.maticEarnRewardsDescription),testID:"learn-step-earn-rewards"},{label:a(f.unstakeLabel),description:a(f.maticUnstakeDescription),testID:"learn-step-unstake"},{label:a(f.noHiddenFeesLabel),description:a(f.noHiddenFeesDescription),testID:"learn-step-fees"}]};default:throw new Error("Invalid currency code for staking nux")}}),[e,i,a,s])}var y,g=r(32451),v=r(66656),m=r(21983),h=r(4118),b=r(24905),k=r(59706),w=r(33396),C=r(85581),S=r(66692),A=r(2673),x=r(34107),T=r(55799),L=r(15654),M=r(51190),E=r(46171),P=r(53363),I=r(31085);e=r.hmd(e),(y="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&y(e);var j,O,F="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},G=(0,a.YK)({stakingTitle:{id:"t3wAw/",defaultMessage:[{type:0,value:"Earn "},{type:1,value:"rate"},{type:0,value:" on your "},{type:1,value:"currencyCode"}]},stakeButton:{id:"kIyFYU",defaultMessage:[{type:0,value:"Start earning"}]},faqButton:{id:"UoeLR6",defaultMessage:[{type:0,value:"Read FAQs"}]}}),D=(0,n.memo)(F((function(){var e=(0,o.A)().formatMessage,t=(0,i.W6)().goBack,r=(0,i.g)(),a=r.currencyCode,c=r.chainId,u=(0,w.lE)(E.Im).goToStep,d=p({currencyCode:a,chainId:c}),f=d.earnRate,y=d.listItems,j=d.illustrationName;if(!a)throw new Error("Asset is required");(0,s._s)({currencyCode:a});var O=(0,h.z)((0,g.y9)(g.fO.stake),g.yW.launch_stake,{logMetric:!0}).start,F=(0,n.useCallback)((function(){(0,s.Yd)({currencyCode:a}),t()}),[t,a]),D=(0,n.useCallback)((function(){(0,s.Lg)({currencyCode:a}),v.i.set(P.B[a],(new Date).toISOString()),O(),u("entry")}),[a,O,u]),B=(0,n.useCallback)((function(){(0,s.K0)({currencyCode:a}),chrome.tabs.create({url:l.xg[a]})}),[a]),H=(0,n.useMemo)((function(){return(0,I.jsx)(T.a,{justifyContent:"flex-start",height:"100%",children:(0,I.jsx)(A.I,{name:"checkmark",size:"s",color:"foreground"})})}),[]);return(0,I.jsxs)(L.T,{height:b.fG,justifyContent:"space-between",children:[(0,I.jsx)(m.u,{onBack:F}),(0,I.jsxs)(L.T,{overflow:"scroll",children:[(0,I.jsxs)(L.T,{alignItems:"center",gap:2,spacingHorizontal:2,children:["ethStakeOrWrap"===j?(0,I.jsx)(x.g,{name:j,dimension:"240x120"}):(0,I.jsx)(k.t,{illustration:"TransferCoinsMiami",children:(0,I.jsx)(x.g,{name:j,dimension:"240x120"})}),(0,I.jsx)(T.a,{children:(0,I.jsx)(M._,{as:"span",align:"center",testID:"stake-nux-title",children:e(G.stakingTitle,{currencyCode:a,rate:(0,I.jsx)(M._,{as:"span",color:"positive",children:f})})})})]}),y.map((function(e){var t=e.label,r=e.description,n=e.testID;return(0,I.jsx)(S.g,{title:t,description:r,media:H,testID:n},n)}))]}),(0,I.jsxs)(L.T,{flexShrink:0,gap:2,spacingHorizontal:2,spacingBottom:2,children:[(0,I.jsx)(C.$,{onPress:D,testID:"learn-step-stake-button",children:e(G.stakeButton)}),(0,I.jsx)(C.$,{variant:"secondary",onPress:B,testID:"learn-step-faq-button",children:e(G.faqButton)})]})]})}),"useIntl{{ formatMessage }}\nuseHistory{{ goBack }}\nuseParams{{ currencyCode, chainId }}\nuseStepper{{ goToStep }}\nuseGetStakeNux{{ earnRate, listItems, illustrationName }}\nuseLearnStepViewed{}\nuseExtensionPerfMark{{ start: markStartPerf }}\nuseCallback{handleGoBack}\nuseCallback{handleStakePress}\nuseCallback{handleFAQPress}\nuseMemo{checkMarkIcon}",(function(){return[o.A,i.W6,i.g,w.lE,p,s._s,h.z]})));(j="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(j.register(G,"messages","/workspaces/apps/extension/src/screens/Stake/steps/LearnStep/LearnStep.tsx"),j.register(D,"LearnStep","/workspaces/apps/extension/src/screens/Stake/steps/LearnStep/LearnStep.tsx")),(O="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&O(e)},57691:(e,t,r)=>{r.d(t,{A:()=>I});var n=r(14041),a=r(32183),o=r(8867),i=r(86090),s=r(65393),l=r(87432),c=r(18647),u=r(21413),d=r(33396),f=r(37121),p=r(46171),y=r(4244),g=r(22202),v=r(70918),m=r(46845);function h(){const e=(0,i.W6)(),{formatToCrypto:t}=(0,y.J9)(),[r,a]=(0,n.useState)(null),{goBack:o,goToStep:l}=(0,d.lE)(p.Im),c=(0,g.b)(),{cryptoAmount:u,stakeTxData:{value:h},unsignedStakeTxResult:{value:b},unsignedApproveTxResult:{value:k}}=(0,f.A)(p.Zd),w=k?.transaction,C=b?.transaction,S=(0,v.h)(),A=(0,m.J)(S,C),x=(0,n.useMemo)((()=>({currencyCode:h?.quote.fromAsset?.currencyCode.code??h?.quote.toAsset.currencyCode.code,chainId:Number(h?.chainId),contractAddress:h?.quote.fromAsset?.address?.rawValue??h?.quote.toAsset.address?.rawValue,cryptoAmount:h&&t({currencyCode:h.quote.fromAsset?.currencyCode??h.quote.toAsset.currencyCode,decimals:h?.quote.fromAsset?.decimals??h?.quote.toAsset.decimals,value:u.value,includeCode:!1}),targetCurrencyCode:h?.quote.toAsset.currencyCode.code})),[h,u,t]),T=(0,n.useCallback)((()=>{(0,s.mC)(x),l("status"),a(null)}),[l,x]),L=(0,n.useCallback)((t=>{"UserRejectedWalletLinkRequest"===t.name?(0,s.K1)(x):(0,s.jF)(x),a({errorMessage:t.message,onPrimaryButtonPress:()=>{a(null),o()},onSecondaryButtonPress:()=>e.replace("/portfolio"),secondaryButtonText:"Go Back Home",primaryButtonText:"Try Again"})}),[o,e,x]),M=(0,n.useCallback)((async()=>{if(!A||!C)return null;if(w)try{await c({unsignedTxOrUserOp:w,wallet:A})}catch(e){L(e)}try{await c({unsignedTxOrUserOp:C,wallet:A}),T()}catch(e){L(e)}}),[L,T,c,w,C,A]);return(0,n.useMemo)((()=>({signAndSubmitViaWalletlink:M,errorStateProps:r})),[r,M])}var b,k=r(31085);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(){A=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),s=new j(n||[]);return a(i,"_invoke",{value:M(e,r,s)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",p="suspendedYield",y="executing",g="completed",v={};function m(){}function h(){}function b(){}var k={};c(k,i,(function(){return this}));var C=Object.getPrototypeOf,S=C&&C(C(O([])));S&&S!==r&&n.call(S,i)&&(k=S);var x=b.prototype=m.prototype=Object.create(k);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(a,o,i,s){var l=d(e[a],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==w(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(u).then((function(e){c.value=e,i(c)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function M(t,r,n){var a=f;return function(o,i){if(a===y)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var l=E(s,n);if(l){if(l===v)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===f)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=y;var c=d(t,r,n);if("normal"===c.type){if(a=n.done?g:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=g,n.method="throw",n.arg=c.arg)}}}function E(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,E(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=d(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function O(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(w(t)+" is not iterable")}return h.prototype=b,a(x,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},T(L.prototype),c(L.prototype,s,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new L(u(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},T(x),c(x,l,"Generator"),c(x,i,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return s.type="throw",s.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;I(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),v}},t}function x(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){x(o,n,a,i,s,"next",e)}function s(e){x(o,n,a,i,s,"throw",e)}i(void 0)}))}}e=r.hmd(e),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&b(e);var L,M,E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},P=(0,a.YK)({title:{id:"VwWGjG",defaultMessage:[{type:0,value:"Confirm on phone"}]},description:{id:"In3vOT",defaultMessage:[{type:0,value:"Open Coinbase Wallet on your phone to confirm this transaction."}]},retry:{id:"jvhzSF",defaultMessage:[{type:0,value:"Resend notification"}]},dontSeeNotification:{id:"epKk4O",defaultMessage:[{type:0,value:"Don't see the notification?"}]}});function I(){var e,t,r,a=(0,i.W6)(),y=(0,o.A)().formatMessage,g=(0,d.lE)(p.Im),v=g.goBack,m=g.hasPreviousStep,b=(0,f.A)(p.Zd),w=b.stakeTxData.value,x=b.stakeType.value,L=b.targetCurrencyCode.value,M=(0,n.useMemo)((function(){var e,t,r,n,a;return{currencyCode:null!==(e=null==w||null===(t=w.quote.fromAsset)||void 0===t?void 0:t.currencyCode.code)&&void 0!==e?e:null==w?void 0:w.quote.toAsset.currencyCode.code,chainId:Number(null==w?void 0:w.chainId),contractAddress:null!==(r=null==w||null===(n=w.quote.fromAsset)||void 0===n||null===(n=n.address)||void 0===n?void 0:n.rawValue)&&void 0!==r?r:null==w||null===(a=w.quote.toAsset.address)||void 0===a?void 0:a.rawValue,context:x,targetCurrencyCode:L}}),[null==w?void 0:w.chainId,null==w||null===(e=w.quote.fromAsset)||void 0===e||null===(e=e.address)||void 0===e?void 0:e.rawValue,null==w||null===(t=w.quote.fromAsset)||void 0===t?void 0:t.currencyCode.code,null==w||null===(r=w.quote.toAsset.address)||void 0===r?void 0:r.rawValue,null==w?void 0:w.quote.toAsset.currencyCode.code,x,L]);(0,s.jW)(M);var E=(0,n.useRef)(!1),I=(0,n.useCallback)((function(){(0,s.nO)(M),m?v():a.goBack()}),[m,v,a,M]),j=h(),O=j.signAndSubmitViaWalletlink,F=j.errorStateProps,G=(0,n.useCallback)(T(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,s.SD)(M),e.next=3,O();case 3:case"end":return e.stop()}}),e)}))),[O,M]);(0,l.y)((function(){F||O()}));var D=(0,n.useMemo)((function(){return{label:y(P.retry),onClick:(e=T(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.current=!0,e.next=3,G();case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})};var e}),[y,G]);return F&&!E.current?(0,k.jsx)(c.W,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},F)):(0,k.jsx)(u._,{title:y(P.title),description:y(P.description),onDismiss:I,secondaryActionLabel:y(P.dontSeeNotification),retryAction:D})}E(I,"useHistory{history}\nuseIntl{{ formatMessage }}\nuseStepper{{ goBack, hasPreviousStep }}\nuseFields{{\n    stakeTxData: { value: stakeTxData },\n    stakeType: { value: stakeType },\n    targetCurrencyCode: { value: targetCurrencyCode },\n  }}\nuseMemo{analyticsMetadata}\nusePhoneConfirmationStepViewed{}\nuseRef{isUserCancelled}\nuseCallback{onDismiss}\nuseSignAndSubmitViaWalletlink{{ signAndSubmitViaWalletlink, errorStateProps }}\nuseCallback{retryAction}\nuseOnMount{}\nuseMemo{retryActionProps}",(function(){return[i.W6,o.A,d.lE,f.A,s.jW,h,l.y]})),(L="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(L.register(P,"messages","/workspaces/apps/extension/src/screens/Stake/steps/PhoneConfirmationStep/PhoneConfirmationStep.tsx"),L.register(I,"PhoneConfirmationStep","/workspaces/apps/extension/src/screens/Stake/steps/PhoneConfirmationStep/PhoneConfirmationStep.tsx")),(M="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&M(e)},57571:(e,t,r)=>{r.d(t,{V:()=>h});var n,a,o,i=r(14041),s=r(65393),l=r(99172),c=r(70359),u=r(396),d=r(70918),f=r(23804),p=r(33396),y=r(37121),g=r(58570),v=r(46171),m=r(31085);function h(){var e=(0,p.lE)(v.Im),t=e.goBack,r=e.goToStep,n=(0,y.A)(v.Zd),a=n.currencyCode,o=n.stakeType,h=n.network,b=n.targetCurrencyCode,k=(0,d.h)(),w=(0,u.u)(k,{network:h.value,stakeType:o.value}),C=(0,i.useMemo)((function(){return w.find((function(e){return e.currencyCode.code===a.value&&l.lg.isEqual(h.value,e.network)}))}),[a,w,h]),S=(0,i.useCallback)((function(e){var t;e instanceof f.u&&void 0!==e.balance&&e.balance>0n&&(c.bk[e.currencyCode.code]!==c.bk[a.value]&&b.onChange(c.bk[e.currencyCode.code]),a.onChange(e.currencyCode.code),(0,s.nY)({currencyCode:e.currencyCode.code,chainId:null===(t=h.value.asChain())||void 0===t?void 0:t.chainId}),r("entry"))}),[a,r,h.value,b]);return(0,m.jsx)(g.j,{testIdPrefix:"stake",wallets:w,onBack:t,onSelect:S,network:h.value,targetAssetId:null==C?void 0:C.id,context:g.P.Stake})}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(h,"useStepper{{ goBack, goToStep }}\nuseFields{{ currencyCode, stakeType, network, targetCurrencyCode }}\nuseActiveWalletGroupId{activeWalletGroupId}\nuseEarnableWallets{earnWallets}\nuseMemo{selectedWallet}\nuseCallback{handleSelect}",(function(){return[p.lE,y.A,d.h,u.u]})),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&a.register(h,"SelectAssetStep","/workspaces/apps/extension/src/screens/Stake/steps/SelectAssetStep/SelectAssetStep.tsx"),(o="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&o(e)},60527:(e,t,r)=>{r.d(t,{I:()=>V});var n,a=r(14041),o=r(32183),i=r(8867),s=r(65393),l=r(96295),c=r(42716),u=r(70359),d=r(74827),f=r(99633),p=r(78392),y=r(21983),g=r(24905),v=r(33396),m=r(37121),h=r(85581),b=r(52365),k=r(2673),w=r(15654),C=r(84492),S=r(55799),A=r(10297),x=r(41250),T=r(94330),L=r(67209),M=r(60149),E=r(46171),P=r(31085);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function F(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==I(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var G,D,B="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},H=(0,o.YK)({fromTitle:{id:"e7Q6b/",defaultMessage:[{type:0,value:"Choose asset"}]},earnTitle:{id:"RAYgXb",defaultMessage:[{type:0,value:"Earn yield"}]},stakingProviderTitle:{id:"TytYpN",defaultMessage:[{type:0,value:"Choose a staking provider"}]},recommendedLabel:{id:"u4eBaC",defaultMessage:[{type:0,value:"Recommended"}]},decentralizedLabel:{id:"rwBEaL",defaultMessage:[{type:0,value:"Decentralized"}]},coinbaseLabel:{id:"lLZS3w",defaultMessage:[{type:0,value:"Coinbase"}]},rocketPoolLabel:{id:"bOyHek",defaultMessage:[{type:0,value:"Rocket Pool"}]},learnMoreLabel:{id:"1Smmc+",defaultMessage:[{type:0,value:"Learn more"}]},coinbaseDescriptionOne:{id:"UiPRkQ",defaultMessage:[{type:0,value:"The cbETH token represents ETH staked through Coinbase, a trusted, public company."}]},coinbaseDescriptionTwo:{id:"L9BS5g",defaultMessage:[{type:0,value:"cbETH automatically accrues staking rewards, with no lock up."}]},rocketPoolDescriptionOne:{id:"hR58GC",defaultMessage:[{type:0,value:"The rETH token represents ETH staked through Rocket Pool, a decentralized staking service."}]},rocketPoolDescriptionTwo:{id:"Qj9RdF",defaultMessage:[{type:0,value:"rETH automatically accrues staking rewards, with no lock up."}]},continueButton:{id:"PFVlTT",defaultMessage:[{type:0,value:"Continue"}]}}),N=F(F({},u.Td,H.recommendedLabel),u.zJ,H.decentralizedLabel),W=F(F({},u.Td,H.coinbaseLabel),u.zJ,H.rocketPoolLabel);function R(e){var t,r=e.chainId,n=e.currencyCode,o=e.onPressProvider,s=e.isSelected,l=e.imageURL,c=e.network,y=(0,i.A)().formatMessage,g=j((0,f.useRecoilState)(d.y4),1)[0],v=(0,a.useMemo)((function(){return n===u.Td}),[n]),m=(0,a.useMemo)((function(){return{currencyCode:n,network:c,iconUrl:l,showNetworkIconOverride:!0}}),[n,l,c]);return(0,P.jsx)(A.t,{onPress:o,testID:"pressable-provider-".concat(n,"-").concat(r),children:(0,P.jsxs)(w.T,{borderColor:s?"primary":"secondary",bordered:!0,borderRadius:"roundedLarge",children:[(0,P.jsxs)(C.z,{justifyContent:"space-between",spacingTop:2,spacingHorizontal:2,children:[(0,P.jsx)(S.a,{background:s?"primary":"secondary",spacingVertical:.5,spacingHorizontal:1,borderRadius:"roundedFull",children:(0,P.jsx)(x.a,{as:"p",color:"foreground",children:y(N[n])})}),s?(0,P.jsx)(S.a,{justifyContent:"center",children:(0,P.jsx)(k.I,{name:"checkmark",size:"s"})}):null]}),(0,P.jsx)(b.l,{compact:!0,title:y(W[n]),description:(0,P.jsxs)(C.z,{gap:.5,children:[(0,P.jsx)(T.C,{as:"p",color:"foregroundMuted",children:"".concat(n," \xb7")}),(0,P.jsx)(T.C,{as:"p",color:"positive",children:null===(t=g[n])||void 0===t?void 0:t[r]})]}),media:(0,P.jsx)(p.E,{asset:m})}),(0,P.jsxs)(w.T,{gap:1,spacingHorizontal:2,spacingBottom:2,children:[(0,P.jsxs)(C.z,{gap:1,children:[(0,P.jsx)(S.a,{children:(0,P.jsx)(L.V,{as:"p",children:"\u2022"})}),(0,P.jsx)(L.V,{as:"p",children:y(v?H.coinbaseDescriptionOne:H.rocketPoolDescriptionOne)})]}),(0,P.jsxs)(C.z,{gap:1,children:[(0,P.jsx)(S.a,{children:(0,P.jsx)(L.V,{as:"p",children:"\u2022"})}),(0,P.jsx)(L.V,{as:"p",children:y(v?H.coinbaseDescriptionTwo:H.rocketPoolDescriptionTwo)})]})]})]})})}function V(){var e,t,r=(0,i.A)().formatMessage,n=(0,v.lE)(E.Im),o=n.goBack,d=n.goToStep,f=(0,m.A)(E.Zd),p=f.currencyCode,b=f.network,k=f.targetCurrencyCode,C=null!==(e=null===(t=b.value.asChain())||void 0===t?void 0:t.chainId.toString())&&void 0!==e?e:"1",S=(0,c.Uq)({chainId:C,type:c.f3.WITHDRAW}),A=S.earnSourceAssets,x=S.isLoading,T=j((0,a.useState)(k.value),2),L=T[0],I=T[1],O=(0,a.useCallback)((function(e){return L===e}),[L]),F=(0,a.useCallback)((function(e){return function(){I(e)}}),[]),G=(0,a.useCallback)((function(){(0,s.$G)({currencyCode:p.value,chainId:C}),k.onChange(L),d("entry")}),[C,p.value,d,L,k]),D=(0,a.useMemo)((function(){return A.filter((function(e){return u.KS[e.currencyCode.code]===l.fz})).map((function(e){return(0,P.jsx)(R,{chainId:C,currencyCode:e.currencyCode.code,onPressProvider:F(e.currencyCode.code),isSelected:O(e.currencyCode.code),imageURL:e.imageURL,network:b.value},"".concat(C,"-").concat(e.currencyCode.code))}))}),[C,A,F,O,b]);return(0,P.jsxs)(w.T,{height:g.fG,justifyContent:"space-between",children:[(0,P.jsx)(y.u,{onBack:o}),(0,P.jsx)(w.T,{overflow:"scroll",children:(0,P.jsxs)(w.T,{spacingHorizontal:3,gap:2,children:[(0,P.jsx)(M.f,{as:"p",children:r(H.stakingProviderTitle)}),D]})}),(0,P.jsx)(w.T,{flexShrink:0,gap:2,spacingHorizontal:2,spacingBottom:2,children:(0,P.jsx)(h.$,{onPress:G,testID:"stake-select-provider-continue-button",disabled:x,children:r(H.continueButton)})})]})}B(R,"useIntl{{ formatMessage }}\nuseRecoilState{[earnAssetsRatesMap]}\nuseMemo{isCBETH}\nuseMemo{assetLike}",(function(){return[i.A,f.useRecoilState]})),B(V,"useIntl{{ formatMessage }}\nuseStepper{{ goBack, goToStep }}\nuseFields{{ currencyCode, network, targetCurrencyCode }}\nuseEarnSourceAssets{{ earnSourceAssets: earnProviders, isLoading }}\nuseState{[selectedCurrencyCode, setSelectedCurrencyCode](targetCurrencyCode.value)}\nuseCallback{isSelectedCurrencyCode}\nuseCallback{handleSelectProvider}\nuseCallback{handleContinue}\nuseMemo{providers}",(function(){return[i.A,v.lE,m.A,c.Uq]})),(G="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(G.register(H,"messages","/workspaces/apps/extension/src/screens/Stake/steps/SelectProviderStep/SelectProviderStep.tsx"),G.register(N,"CURRENCY_CODE_MESSAGE_MAP","/workspaces/apps/extension/src/screens/Stake/steps/SelectProviderStep/SelectProviderStep.tsx"),G.register(W,"CURRENCY_CODE_TITLE_MAP","/workspaces/apps/extension/src/screens/Stake/steps/SelectProviderStep/SelectProviderStep.tsx"),G.register(R,"Provider","/workspaces/apps/extension/src/screens/Stake/steps/SelectProviderStep/SelectProviderStep.tsx"),G.register(V,"SelectProviderStep","/workspaces/apps/extension/src/screens/Stake/steps/SelectProviderStep/SelectProviderStep.tsx")),(D="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&D(e)},74989:(e,t,r)=>{r.d(t,{f:()=>F});var n,a=r(14041),o=r(32183),i=r(8867),s=r(86090),l=r(65393),c=r(11649),u=r(70359),d=r(19994),f=r(7548),p=r(24475),y=r(32451),g=r(66446),v=r(52617),m=r(4118),h=r(33396),b=r(37121),k=r(87755),w=r(28162),C=r(46171),S=r(58773),A=r(31085);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function M(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var E,P,I="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},j=(0,o.YK)({stakingTitle:{id:"GmtrvI",defaultMessage:[{type:0,value:"You're staking"}]},unstakingTitle:{id:"aAZva+",defaultMessage:[{type:0,value:"You're unstaking"}]},disclaimer:{id:"VKV79V",defaultMessage:[{type:0,value:"Staked "},{type:1,value:"currencyCode"},{type:0,value:" will appear in the DeFi tab. You can unstake at any time."}]},failureTitle:{id:"r2aIcy",defaultMessage:[{type:0,value:"Stake failed"}]},failureDescriptionUnknownError:{id:"KlxoqU",defaultMessage:[{type:0,value:"Unknown error while sending transaction"}]},tryAgain:{id:"thF7qm",defaultMessage:[{type:0,value:"Try again"}]},goBackHome:{id:"fwpfJu",defaultMessage:[{type:0,value:"Go back home"}]},done:{id:"Nv+PvS",defaultMessage:[{type:0,value:"Done"}]},viewTransaction:{id:"LkAmOx",defaultMessage:[{type:0,value:"View transaction"}]},aprDescription:{id:"Cv/yjD",defaultMessage:[{type:0,value:"Earns "},{type:1,value:"rate"}]},claimMatic:{id:"DC4wPQ",defaultMessage:[{type:0,value:"Claim your MATIC in 3-4 days"}]},claimTitle:{id:"JHtf8u",defaultMessage:[{type:0,value:"You're claiming"}]}}),O=M(M(M({},p.V.CLAIM,j.claimTitle),p.V.STAKE,j.stakingTitle),p.V.UNSTAKE,j.unstakingTitle);function F(){var e,t,r,n,o,x,T=(0,i.A)().formatMessage,M=(0,s.W6)(),E=(0,b.A)(C.Zd),P=E.stakeType.value,I=E.ledgerStakeError,F=I.value,G=I.onChange,D=E.stakeTxData.value,B=E.network.value,H=(0,h.lE)(C.Im).goBack,N=(0,f.a)({targetCurrencyCode:null!==(e=null==D?void 0:D.quote.toAsset.currencyCode.code)&&void 0!==e?e:"",chainId:null===(t=B.asChain())||void 0===t?void 0:t.chainId.toString()}).earnRate,W=(0,w.i)();if(!D)throw new Error("stakeTxData was missing in StatusStep");(0,l.or)({currencyCode:null===(r=D.quote.fromAsset)||void 0===r?void 0:r.currencyCode.code,chainId:Number(null===(n=D.quote.fromAsset)||void 0===n?void 0:n.chainId),contractAddress:null===(o=D.quote.fromAsset)||void 0===o||null===(o=o.address)||void 0===o?void 0:o.rawValue});var R=(0,m.z)((0,y.y9)(y.fO.stake),y.yW.trigger_stake,{logMetric:!0}).end,V=(0,m.z)((0,y.y9)(y.fO.stake),y.yW.trigger_claim,{logMetric:!0}).end;(0,c.X)((function(){F?G(void 0):(R(),V(),W("stakeSuccess"))}));var U=(0,d.g)(D),_=U.sourceFiatAmount,z=U.sourceCryptoAmount,q=U.targetCryptoAmount,K=U.targetFiatAmount,Y=(0,a.useMemo)((function(){var e="(".concat(_||K,")");return"".concat(null!=z?z:q," ").concat(e)}),[z,_,q,K]),Q=(0,a.useCallback)((function(){M.replace("/portfolio")}),[M]),Z=(0,a.useCallback)((function(){M.replace("/transactions")}),[M]),J=(0,a.useMemo)((function(){return{key:"done-button",name:"doneButton",onPress:Q,loading:!1,variant:"primary",block:!0,children:T(j.done)}}),[T,Q]),$=(0,a.useMemo)((function(){return{key:"view-transactions-button",name:"viewTransactionsButton",onPress:Z,loading:!1,testID:"stake-status-view-transactions-button",variant:"secondary",block:!0,children:T(j.viewTransaction)}}),[T,Z]);if(F){var X,ee,te,re=F;return(0,A.jsx)(g.v,L(L({spacing:2,elevation:1},S.V6),{},{children:(0,A.jsx)(k.D,{handleBack:H,statusCode:null!==(X=re.statusCode)&&void 0!==X?X:void 0,errorId:null!==(ee=re.id)&&void 0!==ee?ee:void 0,errorMessage:null!==(te=re.message)&&void 0!==te?te:void 0})}))}return(0,A.jsx)(v.x,{status:v.n.SUCCESS,title:T(O[P]),subtitle:Y,description:N&&P===p.V.STAKE?T(j.aprDescription,{rate:N}):void 0,descriptionColor:P===p.V.STAKE?"positive":void 0,disclaimer:P===p.V.STAKE?T(j.disclaimer,{currencyCode:null===(x=D.quote.fromAsset)||void 0===x?void 0:x.currencyCode.code}):void 0,timeEstimation:D.quote.toAsset.currencyCode.code===u.mv&&P===p.V.STAKE?T(j.claimMatic):void 0,primaryButtonProps:J,secondaryButtonProps:$})}I(F,"useIntl{{ formatMessage }}\nuseHistory{history}\nuseFields{{\n    stakeType: { value: stakeType },\n    ledgerStakeError: { value: ledgerStakeError, onChange: ledgerStakeOnChange },\n    stakeTxData: { value: stakeTxData },\n    network: { value: network },\n  }}\nuseStepper{{ goBack }}\nuseGetEarnRate{{ earnRate }}\nuseLaunchSprig{launchSprig}\nuseStatusStepViewed{}\nuseExtensionPerfMark{{ end: markEndStakePerf }}\nuseExtensionPerfMark{{ end: markEndClaimPerf }}\nuseOnUnmount{}\nuseFormatStakeAmounts{{ sourceFiatAmount, sourceCryptoAmount, targetCryptoAmount, targetFiatAmount }}\nuseMemo{formattedAmount}\nuseCallback{goToPortfolio}\nuseCallback{goToTransactions}\nuseMemo{primaryButtonProps: ButtonProps}\nuseMemo{secondaryButtonProps: ButtonProps}",(function(){return[i.A,s.W6,b.A,h.lE,f.a,w.i,l.or,m.z,m.z,c.X,d.g]})),(E="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(E.register(j,"messages","/workspaces/apps/extension/src/screens/Stake/steps/StatusStep/StatusStep.tsx"),E.register(O,"TITLE_MAP","/workspaces/apps/extension/src/screens/Stake/steps/StatusStep/StatusStep.tsx"),E.register(F,"StatusStep","/workspaces/apps/extension/src/screens/Stake/steps/StatusStep/StatusStep.tsx")),(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&P(e)},63164:(e,t,r)=>{r.d(t,{m:()=>C});var n,a=r(14041),o=r(32183),i=r(8867),s=r(84213),l=r(77547),c=r(13620),u=r(16191),d=r(4244),f=r(72940),p=r(27301),y=r(52689),g=r(99172),v=r(57822),m=r(34767);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var h,b,k="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},w=(0,o.YK)({notEnoughBalanceForMinerFeeMessage:{id:"IZUdH3",defaultMessage:[{type:0,value:"You have "},{type:1,value:"fiatTotalAvailableBalance"},{type:0,value:" in "},{type:1,value:"cryptoSymbol"},{type:0,value:", but you need a total of "},{type:1,value:"fiatTotalTransactionValue"},{type:0,value:" to proceed."}]},learnMore:{id:"9DtuSP",defaultMessage:[{type:0,value:"Learn more"}]}});function C(e,t){var r=t.stakeTxData,n=t.unsignedStakeTx,o=t.unsignedApproveTx,h=(0,i.A)().formatMessage,b=(0,d.J9)(),k=(0,f.VL)({unsignedEthTx:n,unsignedApproveTx:o}),C=k.networkMaxFee,S=k.networkEstimatedFee,A=(0,a.useRef)(!1),x=(0,v.e)(e).find((function(e){return y.j.isEqual(e.currencyCode,n.feeCurrencyCode)&&p.J.isEqual(e.blockchain,n.blockchain)&&g.lg.isEqual(e.network,n.network)})),T=(0,a.useMemo)((function(){var e,t=r.tx.from===(null==x?void 0:x.primaryAddress)?BigInt(null!==(e=r.tx.value)&&void 0!==e?e:0):0n;return(n instanceof c.U?S:C)+t}),[r.tx.from,r.tx.value,x,n,S,C]),L=(0,a.useMemo)((function(){return void 0!==(null==x?void 0:x.balance)&&x.balance>=T}),[x,T]),M=(0,a.useMemo)((function(){return{notEnoughBalanceForMinerFee:{type:"notEnoughBalanceForMinerFee",isDismissible:!1,showErrorIcon:!0,message:h(w.notEnoughBalanceForMinerFeeMessage,{cryptoSymbol:n.feeCurrencyCode.code,fiatTotalAvailableBalance:void 0!==(null==x?void 0:x.balance)&&null!=x&&x.currencyCode?b.formatToFiat({fromCurrencyCode:x.currencyCode,decimals:x.decimals,value:x.balance,isAbbreviated:!1,contractAddress:x.contractAddress,network:x.network,blockchain:x.blockchain,includeCode:!0,formatZeroBalance:!0}):"",fiatTotalTransactionValue:x?b.formatToFiat({fromCurrencyCode:n.feeCurrencyCode,decimals:n.feeCurrencyDecimal,value:T,isAbbreviated:!1,contractAddress:void 0,network:x.network,blockchain:x.blockchain}):""}),analytics:{eventName:"stake.confirmation_preview_step.not_enough_eth_balance",eventProperties:{componentType:m.I5.text,action:m.X2.render,totalEthereumRequired:Number(T)}}}}}),[h,n.feeCurrencyCode,n.feeCurrencyDecimal,x,b,T]);return(0,a.useMemo)((function(){var e=n.network.asChain(),t=BigInt(0),r=BigInt(0),a=BigInt(0);if(n instanceof l.D?(t=n.maxFeePerGas/BigInt(Math.pow(10,9)),r=BigInt(n.gasLimit)):(n instanceof c.U&&(t=n.gasPrice/BigInt(Math.pow(10,9)),r=n.gasLimit),n instanceof u.K&&(a=n.estimatedFee)),!L)return A.current||(A.current=!0,(0,s.NZ)({blockchain:n.blockchain.rawValue,chainName:e.displayName,chainId:e.chainId.toString(10),errorType:"InsufficientBalance",errorMessage:"Insufficient balance to pay gas fee",txSource:"stake".toLocaleString(),gasPriceInGwei:t.toString(),gasLimit:r.toString(),solanaGasPrice:a.toString()})),M.notEnoughBalanceForMinerFee}),[M.notEnoughBalanceForMinerFee,L,n])}k(C,"useIntl{{ formatMessage }}\nuseCurrencyFormatter{currencyFormatter}\nuseCalculateNetworkFees{{ networkMaxFee, networkEstimatedFee }}\nuseRef{hasDispatchedGasAnalyticsEvent}\nuseWalletsForWalletGroupId{wallets}\nuseMemo{totalBaseAssetRequired}\nuseMemo{hasEnoughBalance}\nuseMemo{errors: ErrorMap}\nuseMemo{}",(function(){return[i.A,d.J9,f.VL,v.e]})),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(h.register(w,"messages","/workspaces/libs/data/hooks/Stake/useTransactionDetailErrors.tsx"),h.register(C,"useTransactionDetailErrors","/workspaces/libs/data/hooks/Stake/useTransactionDetailErrors.tsx")),(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&b(e)},50215:(e,t,r)=>{r.d(t,{G:()=>v});var n,a=r(14041),o=r(32183),i=r(8867),s=r(22115),l=r(85581),c=r(31085);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);var u,d,f="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},p=(0,o.YK)({maxButton:{id:"Pm9NLv",defaultMessage:[{type:0,value:"Max"}]}}),y="25%",g="50%";function v(e){var t=e.onPressMaxButton,r=e.onPressPercentageButton,n=(0,i.A)().formatMessage,o=(0,a.useCallback)((function(e){return function(){r(e)}}),[r]);return(0,c.jsxs)(s.e,{accessibilityLabel:"Percentage buttons",block:!0,children:[(0,c.jsx)(l.$,{compact:!0,variant:"secondary",onPress:o(.25),testID:"percentage-button-twenty-five-percent",children:y}),(0,c.jsx)(l.$,{compact:!0,variant:"secondary",onPress:o(.5),testID:"percentage-button-fifty-percent",children:g}),(0,c.jsx)(l.$,{compact:!0,variant:"secondary",onPress:t,testID:"percentage-button-max",children:n(p.maxButton)})]})}f(v,"useIntl{{ formatMessage }}\nuseCallback{handlePressPercentageButton}",(function(){return[i.A]})),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(u.register(p,"messages","/workspaces/libs/wallet-cds-extension/components/PercentageButtons/PercentageButtons.tsx"),u.register(y,"TWENTY_FIVE_PERCENT","/workspaces/libs/wallet-cds-extension/components/PercentageButtons/PercentageButtons.tsx"),u.register(g,"FIFTY_PERCENT","/workspaces/libs/wallet-cds-extension/components/PercentageButtons/PercentageButtons.tsx"),u.register(v,"PercentageButtons","/workspaces/libs/wallet-cds-extension/components/PercentageButtons/PercentageButtons.tsx")),(d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&d(e)},17065:(e,t,r)=>{r.d(t,{y:()=>o});var n,a=r(31085);e=r.hmd(e),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&n(e);"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;function o(e){var t=e.color;return(0,a.jsx)("div",{className:l,style:{color:t}})}var i,s,l="sromg8e";r(53627),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(o,"Spinner","/workspaces/libs/wallet-cds-extension/components/Spinner.tsx"),i.register(l,"spinnerStyle","/workspaces/libs/wallet-cds-extension/components/Spinner.tsx")),(s="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&s(e)},57641:(e,t,r)=>{function n(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}r.d(t,{A:()=>n})},81092:(e,t,r)=>{function n(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}r.d(t,{A:()=>n})},95286:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(81092);function a(e){(0,n.A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}},53627:(e,t,r)=>{r.r(t)},64654:(e,t,r)=>{r.d(t,{VZ:()=>o,c$:()=>s,t0:()=>i});var n=r(96295),a=r(99172);const o=40,i=a.lg.fromChainId({chainPrefix:n.RC,chainId:1n}),s=10**18},46171:(e,t,r)=>{r.d(t,{Im:()=>s,LX:()=>l,Zd:()=>c});var n=r(99172),a=r(24475),o=r(33396),i=r(40019);const s=(0,o.KT)({steps:["learn","entry","confirmationPreview","status","phoneConfirmation","depositGas","selectAsset","selectProvider","claimConfirmation"],defaultStep:"learn"}),l={network:new n.lg("ETHEREUM_CHAIN:1",!1),cryptoAmount:0n,enteredAmount:"",stakeTxData:void 0,ledgerStakeError:void 0,unsignedApproveTxResult:void 0,unsignedStakeTxResult:void 0,signedApproveTx:void 0,signedStakeTx:void 0,nonce:void 0,quote:void 0,stakeType:a.V.STAKE,currencyCode:"",isFiat:!0,shouldUpdateCryptoAmount:!1,formDepositAmount:0n,targetCurrencyCode:"",tokenId:""},c=(0,i.A)({initialValues:l})},53363:(e,t,r)=>{r.d(t,{B:()=>w,X:()=>C});var n=r(14041),a=r(86090),o=r(96295),i=r(70359),s=r(24475),l=r(32451),c=r(98226),u=r(66656),d=r(95286),f=r(57641),p=r(81092);function y(e){(0,p.A)(1,arguments);var t=(0,d.A)(e);return t.setHours(0,0,0,0),t}var g=864e5;function v(e,t){var r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function m(e,t){(0,p.A)(2,arguments);var r=(0,d.A)(e),n=(0,d.A)(t),a=v(r,n),o=Math.abs(function(e,t){(0,p.A)(2,arguments);var r=y(e),n=y(t),a=r.getTime()-(0,f.A)(r),o=n.getTime()-(0,f.A)(n);return Math.round((a-o)/g)}(r,n));r.setDate(r.getDate()-a*o);var i=a*(o-Number(v(r,n)===-a));return 0===i?0:i}var h=r(4118);const b=new c.J("learnStepViewed"),k=new c.J("learnStepMaticViewed"),w={[o.fz]:b,[i.R1]:b,[i.mv]:k};function C(){const{tokenId:e,stakeType:t,currencyCode:r}=(0,a.g)(),o=u.i.get(w[r]??b),i=(0,n.useMemo)((()=>!!o&&m(new Date,new Date(o))<=30),[o]),{start:c}=(0,h.z)(l.fO.stake,l.yW.launch_stake,{logMetric:!0}),{start:d}=(0,h.z)(l.fO.stake,l.yW.load_claim_preview,{logMetric:!0});return t===s.V.CLAIM&&e?(d(),"claimConfirmation"):i||t===s.V.UNSTAKE?(c(),"entry"):"learn"}},72502:(e,t,r)=>{r.d(t,{v:()=>_});var n=r(14041),a=r(65393),o=r(59659),i=r(32183),s=r(8867),l=r(96295),c=r(4244),u=r(72940),d=r(62396),f=r(26746),p=r(13394),y=r(99172),g=r(70359),v=r(24475),m=r(2775),h=r(23349);class b{constructor(e){this.fromAmount=e.fromAmount?BigInt(e.fromAmount):0n,this.toAmount=e.toAmount?BigInt(e.toAmount):0n,this.fromAsset=e.fromAsset?.currencyCode?new h.V(e.fromAsset.name,e.fromAsset.currencyCode,e.fromAsset.address,e.fromAsset.decimals,e.fromAsset.imageURL,e.fromAsset.chainId,e.fromAsset.blockchain):void 0,this.toAsset=new h.V(e.toAsset.name,e.toAsset.currencyCode,e.toAsset.address,e.toAsset.decimals,e.toAsset.imageURL,e.toAsset.chainId,e.toAsset.blockchain),this.slippage=e.slippage}}var k=r(1048).Buffer;class w{constructor(e){this.tx=e.tx,this.approveTx=e.approveTx,this.quote=new b(e.quote),this.chainId=BigInt(e.chainId),this.workflowName=e.workflowName}get stakeHexEncodedTxData(){return k.from((0,m.LL)(this.tx.data),"hex")}get chainPrimaryAssetValue(){return this.tx.value?BigInt(this.tx.value):0n}}var C=r(83257),S=r(74146),A=r(46122),x=r(13129),T=r(76116),L=r(8387),M=r(1048).Buffer;async function E(e,t,r,n,a){const{tx:o}=t,i=o.value?BigInt(o.value):0n,s=o.gas?BigInt(o.gas):void 0,l=await(0,x.F_)(Number(t.chainId));if(l.error)throw l.error;g.yQ.set(A.kV,a);const c=(0,L.X)({baseMetadata:g.yQ,imageURL:t.quote.toAsset.imageURL,name:t.quote.toAsset.name,currencyCode:t.quote.toAsset.currencyCode.rawValue,decimals:BigInt(t.quote.toAsset.decimals),amount:t.quote.toAmount});return n?(0,T.Z)({wallet:e,recipientAddress:o.to,metadata:c,transactionAmount:{kind:"Amount",value:i},txOrUserOpConfig:{txType:"1559",nonce:r,dataBuffer:M.from((0,m.LL)(o.data),"hex"),selectedMaxFeePerGas:BigInt(l.normalMaxFeePerGas),selectedMaxPriorityFeePerGas:BigInt(l.normalPriorityFee),selectedGasLimit:s,selectedBaseFeePerGas:BigInt(l.baseFee)}}):(0,T.Z)({wallet:e,recipientAddress:t.tx.to,metadata:c,transactionAmount:{kind:"Amount",value:BigInt(t.tx.value)},txOrUserOpConfig:{txType:"Legacy",nonce:r,dataBuffer:t.stakeHexEncodedTxData,selectedGasPrice:BigInt(t.tx.gasPrice),selectedGasLimit:BigInt(t.tx.gas)}})}const P={[v.V.STAKE]:"earn/ethereum_kiln/stake",[v.V.UNSTAKE]:"earn/ethereum_kiln/unstake",[v.V.CLAIM]:"earn/ethereum_kiln/claim"};async function I({sourceWallet:e,feeWallet:t,amount:r,userAddress:n,chainId:a,is1559Enabled:o,stakeType:i,stakeTxDataOverride:s}){let l=s;if(!l){const e={amount:r.toString(),userAddress:n},{result:t}=await(0,S.hm)(P[i],e);l=new w(t)}const c=await(0,f.Wp)(n,y.lg.fromChainId({chainId:a}));let u,d=c;l.approveTx&&(u=await(0,C.e)(t,l.approveTx,c,o,g.yQ),d=c+1n);const v=await E(e,l,d,o,i);return"Failure"===u?.kind&&((0,p.gf)({context:"stake",error:new Error(`error building approveTx: ${u.err}`),severity:"error",isHandled:!1}),Object.assign(u.transaction,{gasLimit:l.approveTx?.gas?BigInt(l.approveTx?.gas):void 0})),"Failure"===v?.kind&&((0,p.gf)({context:"stake",error:new Error(`error building swapTx: ${v.err}`),severity:"error",isHandled:!1}),Object.assign(v.transaction,{gasLimit:BigInt(l.tx.gas)})),{stakeTxData:l,unsignedStakeTx:v,unsignedApproveTx:u}}const j={[g.R1]:{[g.Td]:!0,[g.zJ]:!0},[g.Td]:{[l.fz]:!0},[g.zJ]:{[l.fz]:!0},[l.fz]:{[g.Td]:!0,[g.zJ]:!0,[l.fz]:!1},[g.mv]:{[g.Sg]:!1},[g.Sg]:{[g.mv]:!1}};const O="earn/trade",F="earn/claim",G="5",D={[l.fz]:O,[g.R1]:O,[g.zJ]:O,[g.Td]:O,[g.mv]:"earn/deposit",[g.Sg]:"earn/withdraw"};async function B({sourceWallet:e,targetWallet:t,feeWallet:r,amount:n,userAddress:a,chainId:o,currencyCode:i,is1559Enabled:s,source:l,stakeType:c,tokenId:u}){const d=c===v.V.CLAIM,m=(h=e.currencyCode.code,b=t?.currencyCode.code??"",!!j[h]?.[b]);var h,b;const k=d?{userAddress:a,chainId:o.toString(),tokenId:u}:{fromAddress:a,from:e.contractAddress??e.currencyCode.code,to:t?.contractAddress??t?.currencyCode.code,amount:n.toString(),chainId:o.toString(),currencyCode:i,amountReference:"from",source:l,userAddress:a,...m?{slippagePercentage:G}:void 0},A=d?F:D[e.currencyCode.code],{result:x}=await(0,S.hm)(A??O,k),T=new w(x),L=await(0,f.Wp)(a,y.lg.fromChainId({chainId:o}));let M,P=L;T.approveTx&&(M=await(0,C.e)(r,T.approveTx,L,s,g.yQ),P=L+1n);const I=await E(e,T,P,s,c);return"Failure"===M?.kind&&((0,p.gf)({context:"stake",error:new Error(`error building approveTx: ${M.err}`),severity:"error",isHandled:!1}),Object.assign(M.transaction,{gasLimit:T.approveTx?.gas?BigInt(T.approveTx?.gas):void 0})),"Failure"===I?.kind&&((0,p.gf)({context:"stake",error:new Error(`error building swapTx: ${I.err}`),isHandled:!1,severity:"error"}),Object.assign(I.transaction,{gasLimit:BigInt(T.tx.gas)})),{stakeTxData:T,unsignedStakeTx:I,unsignedApproveTx:M}}var H=r(36760),N=r(21599);const W=(0,i.YK)({cbPayNotEnoughBalanceForMinerFeeMessage:{id:"z6rH3y",defaultMessage:"You need an additional ~{cryptoAmountNeeded} ({fiatAmountNeeded}) on the {networkName} network to cover the network fee."},cbPayZeroBalanceForMinerFeeMessage:{id:"cjf4F1",defaultMessage:"You need {cryptoSymbol} before you can make a transaction on the {networkName} network."},notEnoughBalanceForMinerFeeMessage:{id:"8YvB19",defaultMessage:"You have {fiatTotalAvailableBalance} in {cryptoSymbol}, but you need {fiatTotalTransactionValue} due to gas fees"},depositMinerFeeMessage:{id:"mLulYH",defaultMessage:"You must deposit {fiatDifferenceValue} in {cryptoSymbol} to complete this transaction."},minStakeAmountMessage:{id:"+ZZsYn",defaultMessage:"You must stake at least {cryptoAmount} ETH (~ {fiatAmount})"}});var R=r(33396),V=r(37121),U=r(46171);function _({sourceWallet:e,targetWallet:t,feeWallet:r,shouldIgnoreSuccessRedirect:i,amount:f,stakeType:p,tokenId:y,handleSuccess:g}){const{goToStep:m}=(0,R.lE)(U.Im),h=(0,o.f)(),{unsignedApproveTxResult:b,unsignedStakeTxResult:k,stakeTxData:w,quote:C,formDepositAmount:S}=(0,V.A)(U.Zd),A=(0,n.useMemo)((()=>({currencyCode:e?.currencyCode.code,chainId:e?.network.asChain()?.chainId,contractAddress:e?.contractAddress,targetCurrencyCode:t?.currencyCode.code})),[e?.contractAddress,e?.currencyCode.code,e?.network,t?.currencyCode.code]),x=(0,n.useCallback)((e=>{w.onChange(e.stakeTxData),b.onChange(e.unsignedApproveTx),k.onChange(e.unsignedStakeTx),C.onChange(e.stakeTxData.quote)}),[C,w,b,k]),T=(0,n.useCallback)((function(){g?g():i||m("confirmationPreview")}),[g,i,m]),L=(0,n.useCallback)((e=>{(0,a.dz)(A),h(e)}),[h,A]),M=(0,n.useCallback)((e=>{S.onChange(e)}),[S]),E=(0,n.useCallback)((()=>{(0,a.Lu)(A)}),[A]),P=(0,n.useCallback)((()=>{(0,a.MB)(A)}),[A]),j=(0,n.useCallback)((()=>{(0,a.id)(A)}),[A]),{generateTransactions:O,generateTransactionsError:F,generateDepositAmount:G,isGenerateTransactionsLoading:D}=function({targetWallet:e,amount:t,stakeType:r,sourceWallet:a,feeWallet:i,onSuccess:f,updateFormData:p,onNotEnoughData:y,onRefreshFail:g,shouldIgnoreSuccessRedirect:m,onNotEnoughBalanceForMinerFee:h,onError:b,handleSetDepositAmount:k,tokenId:w,stakeTxDataOverride:C}){const S=(0,c.J9)(),[A,x]=(0,n.useState)(!1),[T,L]=(0,n.useState)(),[M,E]=(0,n.useState)(),P=(0,o.f)(),{formatMessage:j}=(0,s.A)();(0,n.useEffect)((function(){L(void 0)}),[t]);const O=(0,n.useCallback)((function({stakeTxData:e,unsignedStakeTx:n,unsignedApproveTx:o}){p?.({stakeTxData:e,unsignedStakeTx:n,unsignedApproveTx:o});const s=i?.contractAddress===a?.contractAddress&&r===v.V.STAKE?t:0n,{hasEnoughBalance:l,totalFeeAssetRequired:c}=(0,u.qw)({feeWallet:i,transactionAmount:s,unsignedTxOrUserOp:n.transaction,unsignedApproveEthTxOrUserOp:o?.transaction});if(!m&&l||r===v.V.CLAIM)return void f?.({stakeTxData:e,unsignedStakeTx:n,unsignedApproveTx:o});const d=void 0!==i?.balance&&i?.currencyCode?S.formatToCrypto({currencyCode:i.currencyCode,decimals:i.decimals,value:c-i.balance,network:i.network}):"",y=void 0!==i?.balance&&i?.currencyCode?S.formatToFiat({fromCurrencyCode:i.currencyCode,decimals:i.decimals,value:BigInt(c)-(i.balance??0n),isAbbreviated:!1,contractAddress:i.contractAddress,network:i.network,blockchain:i.blockchain,includeCode:!0,formatZeroBalance:!0}):"",g=0n===i?.balance,b=g?j(W.cbPayZeroBalanceForMinerFeeMessage,{cryptoSymbol:i?.currencyCode.code,networkName:i?.displayName}):j(W.cbPayNotEnoughBalanceForMinerFeeMessage,{cryptoAmountNeeded:d,fiatAmountNeeded:y,networkName:i?.network?.asChain()?.displayName}),w=j(W.depositMinerFeeMessage,{cryptoSymbol:i?.currencyCode.code,fiatDifferenceValue:S.formatToFiat({fromCurrencyCode:i.currencyCode,decimals:i.decimals,value:BigInt(c)-(i.balance??0n),isAbbreviated:!1,contractAddress:i.contractAddress,network:i.network,blockchain:i.blockchain,includeCode:!0,formatZeroBalance:!0})}),C=g?"zeroBalanceForMinerFee":"notEnoughBalanceForMinerFee";h?.({errorMessage:b,balance:Number(a?.balance??0),totalRequired:c-(i.balance??0n)}),k?.(BigInt(c)-(i.balance??0n)),E(new Error(w)),L({message:b,code:C})}),[p,i,a?.contractAddress,a?.balance,r,t,m,S,j,h,k,f]),F=(0,H.j)(a);return{generateTransactions:(0,n.useCallback)((async function(n=!1){const o=a?.primaryAddress,s=a?.network,c=a?.accountId,u=c?d.g.parseAccountTypeFromId(c):void 0,f=(0,N.e)(u),p={network:Boolean(s),sourceWallet:Boolean(a),address:Boolean(o),targetWallet:Boolean(e)};if(!s||!a||!o||!i||!e&&r!==v.V.CLAIM)return n?void g?.(p):(y?.(p),P(new Error("Not enough data provided to generate transactions")));const h=a.id===e?.id||r===v.V.CLAIM&&a.currencyCode.code===l.fz,k=h?I:B;try{x(!0);const n=await k({feeWallet:i,sourceWallet:a,targetWallet:e,amount:t??0n,stakeType:r,userAddress:o,chainId:BigInt(a.network.asChain()?.chainId??1),currencyCode:a.currencyCode.code,is1559Enabled:F,source:f,tokenId:w,stakeTxDataOverride:m&&h?C:void 0});O(n)}catch(e){b?(L(e),b(e)):P(e)}finally{x(!1)}}),[a,e,i,r,y,P,g,t,F,w,m,C,O,b]),generateTransactionsError:T,generateDepositAmount:M,isGenerateTransactionsLoading:A}}({amount:f,sourceWallet:e,targetWallet:t,feeWallet:r,stakeType:p,updateFormData:x,onSuccess:T,onNotEnoughBalanceForMinerFee:P,onNotEnoughData:j,shouldIgnoreSuccessRedirect:i,onError:L,handleSetDepositAmount:M,onRefreshFail:E,tokenId:y});return(0,n.useMemo)((()=>({generateTransactions:O,generateTransactionsError:F,generateDepositAmount:G,isGenerateTransactionsLoading:D})),[O,F,G,D])}},54:(e,t,r)=>{r.d(t,{u:()=>n});const n=31e3},19994:(e,t,r)=>{r.d(t,{g:()=>o});var n=r(14041),a=r(4244);function o(e){const t=(0,a.J9)(),{quote:r}=e,o=(0,n.useMemo)((()=>{if(!r.fromAsset)return;const e=t.fiatValue({currencyCode:r.fromAsset.currencyCode,decimals:r.fromAsset.decimals,value:r.fromAmount,contractAddress:r.fromAsset.address?.rawValue,network:r.fromAsset.network,blockchain:r.fromAsset.blockchain,digitsToFixed:2});return e?t.fiatValueString(e):void 0}),[r.fromAsset,r.fromAmount,t]),i=(0,n.useMemo)((()=>{if(r.fromAsset)return t.formatToCrypto({currencyCode:r.fromAsset.currencyCode,decimals:r.fromAsset.decimals,value:r.fromAmount,includeCode:!0,maxDisplayDecimals:8n,minDisplayDecimals:0n})}),[t,r.fromAmount,r.fromAsset]),s=(0,n.useMemo)((()=>{const e=t.fiatValue({currencyCode:r.toAsset.currencyCode,decimals:r.toAsset.decimals,value:r.toAmount,contractAddress:r.toAsset.address?.rawValue,network:r.toAsset.network,blockchain:r.toAsset.blockchain,digitsToFixed:2});if(e)return t.fiatValueString(e)}),[t,r.toAsset,r.toAmount]),l=(0,n.useMemo)((()=>t.formatToCrypto({currencyCode:r.toAsset.currencyCode,decimals:r.toAsset.decimals,value:r.toAmount,includeCode:!0,maxDisplayDecimals:8n,minDisplayDecimals:0n})),[t,r.toAmount,r.toAsset.currencyCode,r.toAsset.decimals]);return(0,n.useMemo)((()=>({sourceFiatAmount:o,sourceCryptoAmount:i,targetFiatAmount:s,targetCryptoAmount:l})),[i,o,l,s])}},41015:(e,t,r)=>{r.d(t,{$:()=>s});var n=r(14041),a=r(97416),o=r(81894),i=r(4419);function s(){const e=(0,i.R)(),t=(0,o.s)(a.r.feb_2023_weth_stake);return(0,n.useMemo)((()=>e&&t),[e,t])}},3093:(e,t,r)=>{r.d(t,{l:()=>A});var n=r(14041),a=r(32183),o=r(8867),i=r(96295),s=r(51676),l=r(13620),c=r(4244),u=r(72940),d=r(87432),f=r(24475),p=r(70918),y=r(52197),g=r(34565),v=r(81454),m=r(16238),h=r.n(m),b=r(70359);const k=(0,a.YK)({networkFeeLabel:{id:"9wby6m",defaultMessage:"Network fee (est.)"},networkFeeTooltip:{id:"iDAUkN",defaultMessage:"The network fee (also called a gas fee) goes to network participants who process transactions, not Coinbase. It may be less than our estimate."},coinbaseFeeLabel:{id:"69w8Iv",defaultMessage:"Coinbase fee"},coinbaseFeeTooltip:{id:"gCadXc",defaultMessage:'Coinbase doesn\u2019t charge a transaction fee for staking assets. Information about commission charges can be found by clicking "Read FAQs" on the upper right hand corner of the screen. Stated APR is net of commissions.'},transactionSpeedLabel:{id:"b+2ECB",defaultMessage:"Time (est.)"},maxFeeLabel:{id:"zoMLPL",defaultMessage:"Max: {maxFeeEstimate}"},contractAddressLabel:{id:"55yK3k",defaultMessage:"{currencyCode} contract"},contractAddressTooltip:{id:"vXyOJS",defaultMessage:"This is the smart contract address for {currencyCode}. Please open the contract in a block explorer and verify it is the correct asset."},timeLabel:{id:"8eOBTQ",defaultMessage:"Time (est.)"},minutesText:{id:"c1upgx",defaultMessage:"> {minutes} minutes"},exchangeRateLabel:{id:"+GA3RT",defaultMessage:"Exchange rate"},exchangeRateTooltip:{id:"5zdmMv",defaultMessage:"The exchange rate shows how much staked {fromAsset} you\u2019ll get for 1 {toAsset}. Right now, 1 {toAsset} is worth {rate} {fromAsset}. This means if you decide to unstake 1 {toAsset}, you\u2019ll get {rate} {fromAsset} back."},freeLabel:{id:"gL7LCA",defaultMessage:"Free"},slippageToleranceLabel:{id:"vFrVSa",defaultMessage:"Slippage tolerance"},slippageToleranceTooltip:{id:"1cvIa7",defaultMessage:"We swap crypto using a 3rd party decentralized exchange (DEX). Your swap will execute within {slippagePercentage} of the quoted price or will be canceled and your funds returned."},lockupPeriodLabel:{id:"vrjdJP",defaultMessage:"Lockup period"},noneText:{id:"uSCSrR",defaultMessage:"None"},walletLabel:{id:"iOErts",defaultMessage:"Wallet"},unstakePeriodLabel:{id:"Tuzdjv",defaultMessage:"Unstaking period"},unstakePeriod:{id:"sJ81jA",defaultMessage:"3-4 days"},instantLabel:{id:"KLD1od",defaultMessage:"Instant"},delegatorUnstakePeriodLabel:{id:"+4V8wv",defaultMessage:"Up to 4 days"},instantToolTip:{id:"BvckiD",defaultMessage:"You can unstake at any time with no wait."},delegatorUnstakePeriodToolTip:{id:"2U/mVi",defaultMessage:"You can unstake at any time but it takes up to 4 days for your request to be processed. After that waiting period, you can claim your ETH."},maticUnstakePeriodToolTip:{id:"hojZyH",defaultMessage:"You can unstake at any time but it takes 3\u20134 days (80 checkpoints) for your request to be processed. After that waiting period, you can claim your MATIC."},methodLabel:{id:"D5cU0d",defaultMessage:"Staking method"},earnLabel:{id:"PyjbkQ",defaultMessage:"Earn"},rewardsLabel:{id:"cmUNGL",defaultMessage:"Rewards"},paidInLabel:{id:"CaFFtk",defaultMessage:"Paid in {currencyCode} after unstake"},accruesDailyLabel:{id:"fAilsx",defaultMessage:"Accrues daily"},rewardsTooltipETH:{id:"Doj9h1",defaultMessage:"You'll realize your rewards in ETH after unstaking."},rewardsTooltipMatic:{id:"SH6O87",defaultMessage:"You'll realize your rewards in MATIC after unstaking. You must claim your MATIC in 3-4 days to get the reward."},receiveLabel:{id:"nqy/8Q",defaultMessage:"Receive"}}),w={[b.mv]:k.unstakePeriod,[i.fz]:k.delegatorUnstakePeriodLabel},C={[b.R1]:{[b.Td]:!0,[b.zJ]:!0},[b.Td]:{[i.fz]:!0},[b.zJ]:{[i.fz]:!0},[i.fz]:{[b.Td]:!0,[b.zJ]:!0,[i.fz]:!1},[b.mv]:{[b.Sg]:!1},[b.Sg]:{[b.mv]:!1}},S={[b.mv]:k.maticUnstakePeriodToolTip,[i.fz]:k.delegatorUnstakePeriodToolTip};function A({stakeTxData:e,unsignedApproveTx:t,unsignedStakeTx:r,lastUpdateTime:a,rowItemsAnalytics:m,isPageLoading:A,feeWalletSubdetail:x,earnDetail:T,stakeType:L=f.V.STAKE,getPrimeNetworkFeeDetailTextPreFormatted:M}){const{formatMessage:E,formatNumber:P}=(0,o.A)(),I=(0,p.h)(),j=(0,y.j)(I).get(i.fz)?.address,O=(0,v.V)(),{formatToCrypto:F}=(0,c.J9)(),{networkBaseFee:G,networkMaxFee:D,networkEstimatedFee:B}=(0,u.VL)({unsignedApproveTx:t,unsignedEthTx:r}),H=r instanceof l.U;(0,d.y)((()=>{m?.({networkEstimatedFee:B.toString(),networkMaxFee:D.toString(),networkBaseFee:G.toString()})}));const N=(0,n.useMemo)((()=>{if(H){return O({currencyCode:r.feeCurrencyCode,currencyDecimal:r.feeCurrencyDecimal,network:r.network,blockchain:r.blockchain,amount:B,error:"Could not calculate estimated fee"})}return`${O({currencyCode:r.feeCurrencyCode,currencyDecimal:r.feeCurrencyDecimal,network:r.network,blockchain:r.blockchain,amount:G,error:"Could not calculate base fee"})}-${O({currencyCode:r.feeCurrencyCode,currencyDecimal:r.feeCurrencyDecimal,network:r.network,blockchain:r.blockchain,amount:D,error:"Could not calculate max fee"})}`}),[H,O,r,G,D,B]),W=(0,n.useMemo)((()=>M?.(N)),[N,M]),R=(0,n.useMemo)((()=>H?null:x),[H,x]),{toAsset:V,fromAsset:U,fromAmount:_,toAmount:z}=e.quote,q=U?.currencyCode.code??"",K=(0,n.useMemo)((()=>{const e=_??0n,t=(0,g.eH)(L===f.V.STAKE?z:e);return(0,g.eH)(L===f.V.STAKE?e:z).div(t).toNumber().toFixed(3)}),[z,_,L]),Y=(0,n.useMemo)((()=>{const e=L===f.V.STAKE?U?.currencyCode.code:V.currencyCode.code;return`1 ${L===f.V.STAKE?V.currencyCode.code:U?.currencyCode.code} = ${K} ${e}`}),[V.currencyCode.code,U?.currencyCode.code,K,L]),Q=(0,n.useMemo)((()=>{const e=L===f.V.STAKE?U?.currencyCode.code:V.currencyCode.code,t=L===f.V.STAKE?V.currencyCode.code:U?.currencyCode.code;return E(k.exchangeRateTooltip,{fromAsset:e,toAsset:t,rate:K})}),[L,V,U,K,E]),Z=P(.01*Number(e.quote.slippage??"0.5"),{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),J=(0,n.useMemo)((()=>!!C[q]?.[V?.currencyCode.code??""]),[q,V?.currencyCode.code]),$=(0,n.useMemo)((()=>{const e=s.ay.fromChainId(V.chainId)?.blockExplorerUrl;return{text:j??"",blockExplorerUrl:`${e}/address/${j}`}}),[j,V.chainId]),X=(0,n.useMemo)((()=>w[q]),[q]),ee=(0,n.useMemo)((()=>S[q]),[q]),te=(0,n.useMemo)((()=>V?.currencyCode.code===i.fz?E(k.accruesDailyLabel):E(k.paidInLabel,{currencyCode:b.KS[V.currencyCode.code]})),[E,V.currencyCode.code]),re=(0,n.useMemo)((()=>E(U?.currencyCode.code===b.mv?k.rewardsTooltipMatic:k.rewardsTooltipETH)),[E,U?.currencyCode.code]),ne=(0,n.useMemo)((()=>F({currencyCode:V.currencyCode,decimals:V.decimals,value:z,includeCode:!0,maxDisplayDecimals:4n})),[F,z,V.currencyCode,V.decimals]);return(0,n.useMemo)((()=>h()([L===f.V.STAKE?{label:E(k.earnLabel),detailTextComponent:T}:null,L===f.V.STAKE?{label:E(k.unstakePeriodLabel),detailText:E(X),tooltipText:ee&&E(ee)}:null,L===f.V.STAKE?{label:E(k.rewardsLabel),detailText:te,tooltipText:re}:null,L!==f.V.CLAIM&&J?{label:E(k.exchangeRateLabel),detailText:Y,isPageLoading:A,tooltipText:Q}:null,L===f.V.CLAIM?{label:E(k.walletLabel),detailText:$,isPageLoading:A}:null,J?{label:E(k.receiveLabel),detailText:ne,isPageLoading:A}:null,J?{label:E(k.slippageToleranceLabel),detailText:Z,isPageLoading:A,tooltipText:E(k.slippageToleranceTooltip,{slippagePercentage:Z})}:null,{label:E(k.coinbaseFeeLabel),detailText:E(k.freeLabel),isPageLoading:A,tooltipText:E(k.coinbaseFeeTooltip)},{label:E(k.networkFeeLabel),detailTextPreFormatted:W,detailText:W?void 0:N,lastUpdateTime:a,isPageLoading:A,subDetailText:R,tooltipText:E(k.networkFeeTooltip)}])),[L,E,T,X,ee,te,re,J,Y,A,Q,$,ne,Z,W,N,a,R])}},79119:(e,t,r)=>{r.d(t,{f:()=>i});var n=r(14041),a=r(70359),o=r(19994);function i(e){const{sourceFiatAmount:t,sourceCryptoAmount:r,targetFiatAmount:i,targetCryptoAmount:s}=(0,o.g)(e),{quote:l}=e;if(!s)throw new Error("Could not display overview items on stake confirmation page, missing crypto amounts");const c=(0,n.useCallback)((function(e){if(e)return e.currencyCode.code===a.Td?a.zd:e.name}),[]);return{primaryItem:{title:c(l.fromAsset)??c(l.toAsset),iconSourceOrName:{iconUrl:l.fromAsset?.imageURL??l.toAsset?.imageURL,currencyCode:l.fromAsset?.currencyCode?.code??l.toAsset?.currencyCode?.code,network:l.fromAsset?.network??l.toAsset?.network,showNetworkIcon:l.fromAsset?!!l.fromAsset.address:!!l.toAsset?.address},detail:t??i,subDetail:r??s,isAsset:!0,testID:"primary"},secondaryItem:{title:c(l.toAsset),iconSourceOrName:{iconUrl:l.toAsset.imageURL,currencyCode:l.toAsset.currencyCode?.code,network:l.toAsset.network,showNetworkIcon:!!l.toAsset?.address},detail:i,subDetail:s,isAsset:!0,testID:"secondary"}}}}}]);
//# sourceMappingURL=1840.js.map