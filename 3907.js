"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[3907],{83992:(e,t,o)=>{var a,n,r,s=o(38851),l=o(66430),c=o(10168);function i(e){var t=e.mutationKey,o=e.mutationFn,a=e.onSuccess;return(0,s.n)({mutationKey:t,mutationFn:o,onSuccess:a,retry:function(e,t){return!(t instanceof c.I&&!t.shouldRetry)&&e<l.a_}})}e=o.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(i,"useMutation{}",(function(){return[s.n]})),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(i,"useMutationWithRetry","/workspaces/libs/data/scw/api/utils/useMutationWithRetry.tsx"),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},68611:(e,t,o)=>{o.d(t,{l:()=>u});var a,n,r,s=o(14041),l=o(56622),c=o.n(l),i=o(39037);function u(e){var t=e.wallets,o=e.query;return(0,s.useMemo)((function(){return null!=t&&t.length?0===o.length?t:function({wallets:e,query:t}){if(!t)return e;const o=e.reduce((function(e,o){return null!==(0,i.b)(t,o.currencyCode.code,o.displayName,o.contractAddress).relevance&&e.push(o),e}),[]);return c()(o,["relevance","coverage"],["asc","desc"])}({wallets:t,query:o}):[]}),[t,o])}e=o.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(u,"useMemo{}"),(n="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&n.register(u,"useWalletSearch","/workspaces/libs/data/stores/Wallets/hooks/useWalletSearch.tsx"),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},95195:(e,t,o)=>{o.d(t,{N:()=>w});var a,n=o(14041),r=o(32183),s=o(8867),l=o(66181),c=o(26205),i=o(79071),u=o.n(i),d=o(55799),f=o(37573),p=o(31085);function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?y(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,a=Array(t);o<t;o++)a[o]=e[o];return a}e=o.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var b,h,m="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},v=(0,r.YK)({crypto:{id:"ezw1uG",defaultMessage:[{type:0,value:"Crypto"}]},NFTs:{id:"3+R4k5",defaultMessage:[{type:0,value:"NFTs"}]}}),w=(0,n.memo)(m((function(e){var t=e.isNFTSelected,o=e.onChange,a=e.from,r=(0,s.A)().formatMessage,i=(0,c.$)(),y=(0,l.l)("kill_switch_nft_portfolio_tab_extension")||"Send"===a&&i,b=(0,n.useCallback)((function(){o("crypto")}),[o]),h=(0,n.useCallback)((function(){o("nft")}),[o]),m=(0,n.useMemo)((function(){return t?"nfts":"crypto"}),[t]),w=(0,n.useMemo)((function(){return[{id:"crypto",label:r(v.crypto),onPress:b}].concat(g(y?[]:[{id:"nfts",label:r(v.NFTs),onPress:h}]))}),[r,b,h,y]);return(0,p.jsx)(d.a,{spacingBottom:2,spacingHorizontal:2,offsetTop:3,spacingTop:4,children:(0,p.jsx)(f.a,{testID:"crypto-ntf-selector-nav",value:m,tabs:w,onChange:u()})})}),"useIntl{{ formatMessage }}\nuseIsNFTSendKilled{killNftSend}\nuseKillSwitch{}\nuseCallback{handleGoToPortfolio}\nuseCallback{handleGoToPortfolioNFT}\nuseMemo{value}\nuseMemo{tabs}",(function(){return[s.A,c.$,l.l]})));(b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(b.register(v,"messages","/workspaces/libs/wallet-cds-extension/components/CryptoNFTSelector/CryptoNFTSelector.tsx"),b.register(w,"CryptoNFTSelector","/workspaces/libs/wallet-cds-extension/components/CryptoNFTSelector/CryptoNFTSelector.tsx")),(h="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&h(e)},83260:(e,t,o)=>{o.d(t,{A:()=>m});var a,n=o(14041),r=o(32183),s=o(8867),l=o(25885),c=o(70846),i=o(2673),u=o(84492),d=o(55799),f=o(35001),p=o(28118),g=o(98055),y=o(31085);e=o.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var b="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},h=(0,r.YK)({chainDisplayName:{id:"GzartR",defaultMessage:[{type:0,value:"On "},{type:1,value:"name"}]},chainTitleWithSuffix:{id:"iNKvVW",defaultMessage:[{type:1,value:"name"},{type:0,value:" "},{type:1,value:"suffix"}]},chainTitle:{id:"Nust95",defaultMessage:[{type:1,value:"name"}]},tooltipText:{id:"v9mnGS",defaultMessage:[{type:0,value:"Switch networks"}]},mainnet:{id:"+cFBPN",defaultMessage:[{type:0,value:"Mainnet"}]},testnet:{id:"uSA5bo",defaultMessage:[{type:0,value:"Testnet"}]}});function m(e){var t=e.network,o=e.onPress,a=e.chainDetails,r=(0,s.A)().formatMessage,l=(0,c.T1)({chainDetails:a});(0,c.Pd)({chainDetails:a});var b=(0,n.useCallback)((function(){l(),o()}),[o,l]);if(!t)return null;var m=t.asChain(),v=r(h.chainDisplayName,{name:null==m?void 0:m.displayName}),w=null!=m&&m.isTestnet?r(h.chainTitleWithSuffix,{name:v,suffix:r(h.testnet)}):r(h.chainTitle,{name:v});return(0,y.jsx)(p.o,{background:"transparent",onPress:b,testID:"network-selection-sub-header",children:(0,y.jsx)(d.a,{alignItems:"center",justifyContent:"center",children:(0,y.jsx)(f.m,{content:r(h.tooltipText),placement:"bottom",children:(0,y.jsxs)(u.z,{alignItems:"center",justifyContent:"center",background:"secondary",borderRadius:"roundedFull",spacingHorizontal:1,flexShrink:1,height:28,children:[null!=m&&m.chainImageUrl?(0,y.jsx)(x,{src:null==m?void 0:m.chainImageUrl,alt:"".concat(null==m?void 0:m.displayName," icon")}):null,(0,y.jsxs)(u.z,{alignItems:"center",children:[(0,y.jsx)(g.v,{testID:"network-selection-current-network",as:"p",color:"foreground",children:w}),(0,y.jsx)(i.I,{name:"caretRight",size:"xs",color:"foreground",spacingStart:.5})]})]})})})})}b(m,"useIntl{{\n    formatMessage\n  }}\nuseNetworkSwitcherOpen{triggerNetworkSwitcherOpen}\nuseNetworkSwitcherViewed{}\nuseCallback{onOpenNetworkSelection}",(function(){return[s.A,c.T1,c.Pd]}));var v,w,x=(0,l.I)("img")({name:"Image",class:"ic7twu",propsAsIs:!1});o(26745),(v="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(v.register(h,"messages","/workspaces/libs/wallet-cds-extension/components/NetworkSelectionSubHeader.tsx"),v.register(m,"NetworkSelectionSubHeader","/workspaces/libs/wallet-cds-extension/components/NetworkSelectionSubHeader.tsx"),v.register(x,"Image","/workspaces/libs/wallet-cds-extension/components/NetworkSelectionSubHeader.tsx")),(w="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&w(e)},60479:(e,t,o)=>{o.d(t,{g:()=>p});var a,n=o(32183),r=o(8867),s=o(69120),l=o(55799),c=o(31085);e=o.hmd(e),(a="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&a(e);var i,u,d="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},f=(0,n.YK)({searchInputPlaceholder:{id:"D8ckHq",defaultMessage:[{type:0,value:"Search"}]}});function p(e){var t=e.query,o=e.onChange,a=e.autoFocus,n=void 0===a||a,i=(0,r.A)().formatMessage;return(0,c.jsx)(l.a,{spacingHorizontal:2,spacingBottom:1,children:(0,c.jsx)(s.D,{name:"search-asset",value:t,onChangeText:o,type:"text",placeholder:i(f.searchInputPlaceholder),testID:"search-asset-text-input",autoFocus:n})})}d(p,"useIntl{{ formatMessage }}",(function(){return[r.A]})),(i="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(i.register(f,"messages","/workspaces/libs/wallet-cds-extension/components/SearchAssetBar.tsx"),i.register(p,"SearchAssetBar","/workspaces/libs/wallet-cds-extension/components/SearchAssetBar.tsx")),(u="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&u(e)},26745:(e,t,o)=>{o.r(t)},56328:(e,t,o)=>{o.d(t,{j:()=>l});var a=o(33396);const n=["loading","entry","username","backup","verify","password","success","import","importOrLink","link","scanQr","select-device","select-account","ledger-signing","ledger-connect-device","trezor-connect-device","ledger-success","hwTroubleConnecting","subdomain-cta","subdomain-education","subdomain-claim-success","subdomain-avatar","subdomain-basic-profile"],r=new URLSearchParams(window.location.search).get("step"),s=n.find((e=>e===r)),l=(0,a.KT)({steps:n,defaultStep:s??"loading"})},95974:(e,t,o)=>{o.d(t,{A:()=>r});var a=o(33396),n=o(56328);function r(){return(0,a.lE)(n.j)}},64593:(e,t,o)=>{o.d(t,{q:()=>M});var a=o(13394),n=o(31700),r=(o(74740),o(89962));o(83992),o(10168);const s="scw/getAccounts";function l(e){return{address:(0,r.bv)(e.baseContractAddress),factoryCalldata:e.deploymentMeta?.factoryCalldata,factoryAddress:e.deploymentMeta.factoryAddress,signers:e.signers,contracts:e.contracts,accountChanges:e.accountChanges}}var c=o(62396),i=o(92212),u=o(42066),d=o(58732),f=o(74146),p=o(50259);const g="scwDataForAccount",y=36e5;async function b(e){return n.qQ.fetchQuery({queryKey:[g,e],queryFn:async()=>async function(e){if(!c.g.isSCWAccount(e))return;const t=c.g.parseAddressFromId(e);return h(t)}(e),staleTime:y})}async function h(e){const{accounts:t}=await(0,f.hm)(s,{baseContractAddress:e},{authenticated:!0,setAuthTokens:u.PR,apiVersion:3});if(!t?.length)throw new Error(`No scw account received from backend for account ${await(0,i.o)(c.g.generateID(p.CO.SCW,"ETH",e))}`);const o=t.find((t=>(0,d.L)(t.baseContractAddress,e)));if(!o)throw new Error(`Incorrect scw account from server for client account ${await(0,i.o)(c.g.generateID(p.CO.SCW,"ETH",e))}`);if(!o?.signers?.length)throw new Error(`No signers found for account ${await(0,i.o)(c.g.generateID(p.CO.SCW,"ETH",e))}`);return l(o)}var m=o(30666),v=o(55459),w=o(65846),x=o(92517),H=o(38903);function L(e){return(0,w.di)((0,x.S)((0,H.nj)(e)),0,16)}const S=L("Coinbase Wallet"),C=L("com.coinbase.wallet"),k="0x00";function G(e){if(v.Z.getIsFeatureEnabled("scw_data_suffix")){const o=(t=C)?(0,m.xW)([S,k,t]):S;return(0,m.xW)([e,o])}var t;return e}async function M(e){const t=await b(e);if(!t){const e=new Error("scw data for account undefined");throw(0,a.gf)({context:"scw-error",error:e,isHandled:!1,severity:"error"}),e}return{txType:"UserOp",accountInitCode:G((0,m.xW)([t.factoryAddress,t.factoryCalldata])),paymentMethod:"WALLET"}}},10168:(e,t,o)=>{o.d(t,{I:()=>a});class a extends Error{constructor(e,t=!1){super(e),this.message=e,this.shouldRetry=t,this.shouldRetry=t}}},36760:(e,t,o)=>{o.d(t,{j:()=>r});var a=o(14041),n=o(46122);function r(e){return(0,a.useMemo)((()=>!!e&&(0,n.US)(e.network)),[e])}},58732:(e,t,o)=>{function a(e,t){return e?.toLowerCase()===t?.toLowerCase()}o.d(t,{L:()=>a})},39037:(e,t,o)=>{function a(e,t,o,a){const n=e.toLowerCase(),r=t.toLowerCase().indexOf(n),s=o?o.toLowerCase().indexOf(n):-1,l=a?a.toLowerCase().indexOf(n):-1;return r>=0&&(r<=s||s<=-1)?{relevance:r,coverage:n.length/t.length}:o&&s>=0?{relevance:s,coverage:n.length/o.length}:a&&l>=0?{relevance:l,coverage:n.length/a.length}:{relevance:null,coverage:0}}o.d(t,{b:()=>a})},19253:(e,t,o)=>{function a(e){return e||0===e?e.toString().replace(/[^#a-z0-9%()., _-]/gi,""):""}o.d(t,{p:()=>a})}}]);
//# sourceMappingURL=3907.js.map