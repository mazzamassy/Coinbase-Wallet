"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[2344],{54261:(e,t,s)=>{s.d(t,{Fu:()=>m,Io:()=>_,OM:()=>d,Q$:()=>S});s(31208);var r=s(58524),a=s(74146),n=s(78370);const o=`${r.V2}/v3/coinbase.asset_metadata_service.v2.public.AssetMetadataPublicService`,i=`${r.V2}/api/v3/coinbase.asset_stats_service.AssetStatsService`,c="getQuote",u="assets/getAssetsDetails",l="quote/getQuote";async function d(e){const t={q:e};try{return await(0,a.hm)(`${o}/GetAssetV2`,t,{isThirdParty:!0})}catch(e){if(e instanceof n.H&&404===e.status)return;throw e}}async function _(e){const t={q:e};try{return await(0,a.hm)(`${i}/ListAssetStats`,t,{isThirdParty:!0})}catch(e){if(e instanceof n.H&&404===e.status)return;throw e}}async function S(e){try{return await(0,a.TB)(u,e)}catch(e){if(e instanceof n.H&&404===e.status)return;throw e}}async function m({params:e,isQuoteV3Enabled:t}){let s;try{return s=t?await(0,a.TB)(c,e,{apiVersion:3}):await(0,a.TB)(l,e),s}catch(e){if(e instanceof n.H&&404===e.status)return;throw e}}},52344:(e,t,s)=>{s.d(t,{Q:()=>N});var r,a,n,o,i=s(71847),c=s(11554),u=s(14041),l=s(32550),d=s(13394),_=s(98053),S=s(84632),m=s(54261);!function(e){e.Usd="USD"}(r||(r={})),function(e){e.SORT_FIELD_UNSPECIFIED="SORT_FIELD_UNSPECIFIED",e.SORT_FIELD_MARKET_CAP="SORT_FIELD_MARKET_CAP",e.SORT_FIELD_ASSET_NAME="SORT_FIELD_ASSET_NAME",e.SORT_FIELD_PERCENT_CHANGE="SORT_FIELD_PERCENT_CHANGE",e.SORT_FIELD_RANK="SORT_FIELD_RANK",e.SORT_FIELD_PRICE="SORT_FIELD_PRICE",e.SORT_FIELD_VOLUME="SORT_FIELD_VOLUME"}(a||(a={})),function(e){e.SORT_ORDER_UNSPECIFIED="SORT_ORDER_UNSPECIFIED",e.SORT_ORDER_ASCENDING="SORT_ORDER_ASCENDING",e.SORT_ORDER_DESCENDING="SORT_ORDER_DESCENDING"}(n||(n={})),function(e){e.RESOLUTION_UNSPECIFIED="RESOLUTION_UNSPECIFIED",e.RESOLUTION_HOUR="RESOLUTION_HOUR",e.RESOLUTION_DAY="RESOLUTION_DAY",e.RESOLUTION_WEEK="RESOLUTION_WEEK",e.RESOLUTION_MONTH="RESOLUTION_MONTH",e.RESOLUTION_YEAR="RESOLUTION_YEAR",e.RESOLUTION_ALL="RESOLUTION_ALL"}(o||(o={}));var E=s(31208),I=s(3514),f=s.n(I),y=s(1048).Buffer;const b="coinbase_asset_v3",h=6e5;var O=s(62953),p=s(9492);const R="coinbase_asset_static",T="coinbase_asset_dynamic";function N({network:e,blockchain:t,contractAddress:s,assetSymbol:r,uuid:I,suspense:N=!1}){const A=(0,i.x)("asset_metadata_v4_migration"),g=e?.asChain()?.chainId,k=e?.asChain()?.isCustomNetwork?void 0:(0,c.S)({network:e,blockchain:t}),C=Boolean(k&&s||k&&r||g&&s||g&&r)&&A,{asset:U,isFetched:v}=function({assetSymbol:e,uuid:t,shouldUseV4:s=!1,suspense:r=!1}){const{code:i}=(0,S.n)(),c=(0,u.useMemo)((()=>{const s={currency:i.rawValue,resolution:o.RESOLUTION_DAY,sort_order:n.SORT_ORDER_ASCENDING,sort_field:a.SORT_FIELD_RANK};return t?s.uuids=[t]:s.query=e,y.from(JSON.stringify(s),"utf-8").toString("base64")}),[e,i.rawValue,t]),I=(0,u.useMemo)((()=>t?y.from(JSON.stringify({uuid:t}),"utf-8").toString("base64"):y.from(JSON.stringify({symbol:e}),"utf-8").toString("base64")),[e,t]),O=(0,u.useMemo)((()=>[b,c]),[c]),p=(0,u.useMemo)((()=>[b,I]),[I]),R=(0,l.jE)(),T={enabled:!s,staleTime:h,suspense:r},N=(0,u.useCallback)((function(s){return t?s.assetUuid===t:s.assetSymbol.toUpperCase()===e.toUpperCase()}),[e,t]),A=(0,u.useCallback)((e=>{try{if(!e)return;const t=(e?.assetStats??[]).find(N);if(t){const e=t.price,s=t.marketCap;return{latest:e,market_cap:s,volume_24h:t.volume24h,listed:t.categories?.includes("listed")??!1}}}catch(e){return(0,d.gf)(e),R.removeQueries(O),{latest:"",market_cap:"",volume_24h:"",listed:!1}}}),[N,R,O]),g=(0,u.useCallback)((e=>{try{if(!e)return;const t=e.asset,s=t.uuid,r=t.symbol,a=t.primaryColor,n=t.name,o=t.description,i=t.iconUrl,c=[];return t?.whitePaper&&c.push({title:"",link:t.whitePaper,type:"white_paper",icon_url:""}),t?.officialWebsite&&c.push({title:"",link:t.officialWebsite,type:"website",icon_url:""}),{id:s,symbol:r,color:a,name:n,description:o,image_url:i,resource_urls:c}}catch(e){return(0,d.gf)(e),R.removeQueries(p),{id:"",symbol:"",color:"",name:"",description:"",image_url:"",resource_urls:[]}}}),[R,p]),k=(0,u.useCallback)((function(s){(0,E.mA)(e,t,s);const r=(0,d.Gp)(s,"useAsset"),a={assetSymbol:e,uuid:t??""};(0,d.gf)({error:r,...a,context:"asset_http_error",severity:"error",isHandled:!1})}),[e,t]),C=(0,u.useCallback)((function(s){(0,E.o_)(e,t,s);const r=(0,d.Gp)(s,"useAsset"),a={assetSymbol:e,uuid:t??""};(0,d.gf)({error:r,...a,context:"asset_http_error",severity:"error",isHandled:!1})}),[e,t]),U={queryKey:O,queryFn:async()=>(0,m.Io)(c),select:A,onError:k,...T},v={queryKey:p,queryFn:async()=>(0,m.OM)(I),select:g,onError:C,...T},{data:D,isFetched:w}=(0,_.I)(U),{data:L,isFetched:F}=(0,_.I)(v);return{asset:!w||!F||f()(D)&&f()(L)?void 0:{...D,...L},isFetched:w&&F}}({assetSymbol:r,uuid:I,shouldUseV4:C,suspense:N}),{asset:D,isFetched:w}=function({networkId:e,contractAddress:t,assetSymbol:s,chainId:r,shouldUseV4:a,suspense:n=!1}){const o=(0,l.jE)(),c=!t,S=(0,u.useMemo)((()=>({networkId:e,contractAddresses:t?[t]:[],nativeAssetSymbols:c?[s]:[],chainId:r?r.toString():void 0})),[e,t,c,s,r]),E=(0,u.useMemo)((()=>[R,(0,p.t)(JSON.stringify(S))]),[S]),I=(0,u.useCallback)((e=>{try{if(!e)return;return function(e){const t=e.result?.assets?.[0];if(t){const{coinbaseUuid:e,symbol:s,name:r,color:a,description:n,imageUrl:o,coinbaseListed:i}=t,c=[];return t?.whitePaperUrl&&c.push({title:"",link:t.whitePaperUrl,type:"white_paper",icon_url:""}),t?.websiteUrl&&c.push({title:"",link:t.websiteUrl,type:"website",icon_url:""}),{id:e,symbol:s,color:a,name:r,description:n,image_url:o,resource_urls:c,listed:i}}}(e)}catch(e){return(0,d.gf)(e),o.removeQueries(E),{id:"",symbol:"",color:"",name:"",description:"",image_url:"",resource_urls:[],listed:!1}}}),[o,E]),y=(0,u.useCallback)((function(a){(0,O.dE)({assetSymbol:s,contractAddress:t,networkId:e,chainId:r,err:a});const n=(0,d.Gp)(a,"useAssetV4"),o={networkId:e,contractAddress:t,assetSymbol:s,chainId:r};(0,d.gf)({error:n,...o,context:"asset_http_error",severity:"error",isHandled:!1})}),[s,r,t,e]),b=(0,u.useCallback)((function(){(0,O.jr)({assetSymbol:s,contractAddress:t,networkId:e,chainId:r})}),[s,r,t,e]),h=(0,u.useMemo)((()=>({networkId:e,contractAddresses:t?[t]:[],nativeAssetSymbols:c?[s]:[],chainId:r?r.toString():void 0})),[e,t,c,s,r]),N=(0,u.useMemo)((()=>[T,(0,p.t)(JSON.stringify(h))]),[h]),A=(0,u.useCallback)((e=>{try{if(!e)return;return function(e){const t=e.results?.[0];if(t)return{latest:t.price?t.price.toString():"",market_cap:t.marketCap?t.marketCap.toString():"",volume_24h:t.volume24h?t.volume24h.toString():""}}(e)}catch(e){return(0,d.gf)(e),o.removeQueries(N),{latest:"",market_cap:"",volume_24h:""}}}),[o,N]),g=(0,u.useCallback)((function(a){(0,O.Ol)({assetSymbol:s,contractAddress:t,networkId:e,chainId:r,err:a});const n=(0,d.Gp)(a,"useAssetV4"),o={networkId:e,contractAddress:t,assetSymbol:s,chainId:r};(0,d.gf)({error:n,...o,context:"asset_http_error",severity:"error",isHandled:!1})}),[s,r,t,e]),k=(0,u.useCallback)((function(){(0,O.a0)({assetSymbol:s,contractAddress:t,networkId:e,chainId:r})}),[s,r,t,e]),C={queryKey:E,queryFn:async()=>(0,m.Q$)(S),select:I,onError:y,onSuccess:b,enabled:a,staleTime:18e5,suspense:n},U=(0,i.x)("quotes_v3"),v={queryKey:N,queryFn:async()=>(0,m.Fu)({params:h,isQuoteV3Enabled:U}),select:A,onError:g,onSuccess:k,enabled:a,staleTime:6e5,suspense:n},{data:D,isFetched:w}=(0,_.I)(C),{data:L,isFetched:F}=(0,_.I)(v);return{asset:!w||!F||f()(L)&&f()(D)?void 0:{...L,...D},isFetched:F&&w}}({networkId:k,contractAddress:s,assetSymbol:r,chainId:g,shouldUseV4:C,suspense:N});return{asset:C?D:U,isFetched:C?w:v}}},31208:(e,t,s)=>{s.d(t,{o_:()=>o,mA:()=>n,dC:()=>i});var r,a=s(55452);function n(e,t,s){(0,a.Np)("price_chart.asset_stats_v3.load_failed",{loggingId:"2f4f42b8-c663-4e20-9192-5e1590a4be7a",tokenSymbol:e,uuid:t,error:String(s)})}function o(e,t,s){(0,a.Np)("price_chart.asset_metadata_v3.load_failed",{loggingId:"9f213d12-3dff-4b34-8404-1ea214674b88",tokenSymbol:e,uuid:t,error:String(s)})}function i(e,t){(0,a.N8)({metricName:"price_chart.prices.load_failed",metricType:r.count,value:1,tags:{baseAssetSymbol:e,currencyCode:t}})}!function(e){e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram"}(r||(r={}))}}]);
//# sourceMappingURL=2344.js.map