"use strict";(self.webpackChunkcb_wallet_extension=self.webpackChunkcb_wallet_extension||[]).push([[562],{86431:(e,n,t)=>{t.d(n,{Gj:()=>C});var s=t(14041),a=t(28345),r=t(34767),c=t(55452);function o(e){(0,c.$s)("onboarding.cbpay.stream",{action:r.X2.unknown,componentType:r.I5.modal,...e})}t(84213);var i=t(71847),d=t(66181),u=t(13394),p=t(74146);const l="https://api.wallet.coinbase.com/payment-provider-proxy/cdp/onramp/v1/token";const m=t(65012).XP.map((e=>e.name));var h=t(58524),y=t(79071),I=t.n(y),w=t(87432);const f={open:async()=>{},destroy:I()},E="https://pay.coinbase.com",N="https://pay-dev.cbhq.net",v=[E,N];function C({widgetParameters:e,appId:n=h.Wx??"wallet",onEvent:t,onEventError:r,onSuccess:c,onExit:y,onReady:I,closeOnExit:C,closeOnSuccess:k,experienceLoggedOut:b="popup",experienceLoggedIn:O="popup",embeddedContentStyles:T,enableOnrampSDK:A,isProduction:g=!0}){const[S,_]=(0,s.useState)(!A),x=(0,s.useRef)(f),P=(0,d.l)("kill_cbpay_buy_default_experiment"),B=(0,i.x)("cb_onramp_session_token"),L=P?e.defaultExperience:"buy",M=g?E:N,R=(0,s.useCallback)((function(e){if(!v.includes(e.origin))return;let n;try{n=JSON.parse(e.data).data}catch(e){r?.(e)}if(n.eventName&&"success"===n.eventName&&c?.(),n.eventName&&"analytics"!==n.eventName&&o({CBPayEventName:n.eventName}),n.eventName&&"analytics"===n.eventName){const{event:e}=n;o({CBPayEventName:e.name,...e.metadata})}}),[r,c]);return(0,w.y)((function(){if(!A)return window.addEventListener("message",R),()=>{window.removeEventListener("message",R)}})),(0,s.useEffect)((function(){return A?((0,a.mp)({appId:n,widgetParameters:{...e,defaultExperience:L},closeOnExit:C,closeOnSuccess:k,experienceLoggedOut:b,experienceLoggedIn:O,embeddedContentStyles:T,onEvent:function(e){o({CBPayEventName:e.eventName}),t?.(e)},onExit:y,onSuccess:c},((e,n)=>{n&&(_(!0),x.current={open:async()=>n.open(),destroy:n.destroy},I?.())})),()=>{x.current?.destroy()}):(x.current={open:async function(){const t=await async function({appId:e,host:n,widgetParameters:t,defaultExperience:s,isSessionTokenEnabled:r}){let c=(0,a.aw)({...t,appId:e,defaultExperience:s,host:n});if(r){const e={...t,destinationWallets:void 0},n=function({widgetParameters:e}){return e.destinationWallets.reduce((function(e,n){let t=Array.from(new Set([...n.blockchains||[],...n.supportedNetworks||[]]));0===t.length&&(t=m);const s=t.map((e=>"avalanche-c-chain"===e?"avacchain":e)),a={address:n.address,blockchains:s};return e.addresses.push(a),n.assets?.forEach((n=>{e.assets.includes(n)||e.assets.push(n)})),e}),{addresses:[],assets:e.defaultAsset?[e.defaultAsset]:[]})}({widgetParameters:t}),s=await async function(e){try{const n=await(0,p.TB)(l,e,{isThirdParty:!0});if(!n.token)throw new Error("No token returned from CB Onramp Session Token API");return n.token}catch(e){return void(0,u.gf)({error:e,context:"cb_onramp_session_token",severity:"error",isHandled:!1})}}(n);s&&(c=(0,a.aw)({...e,sessionToken:s}))}return c}({appId:n,host:M,defaultExperience:L,widgetParameters:e,isSessionTokenEnabled:B});window.open(t,"_blank")},destroy:()=>{x.current=f}},I?.())}),[n,C,k,L,T,A,O,b,M,B,t,y,I,c,e]),{cbPayInstance:x,isCBPayInstanceReady:S}}},65012:(e,n,t)=>{t.d(n,{Bu:()=>c,CM:()=>o,XP:()=>r,to:()=>d,yi:()=>i});var s=t(51676),a=t(10611);const r=Object.freeze([{currencyCode:"ETH",name:"ethereum",chainId:s.ay.whitelisted.ETHEREUM_MAINNET.chainId},{currencyCode:"AVAX",name:"avalanche-c-chain",chainId:s.ay.whitelisted.AVALANCHE_MAINNET.chainId},{currencyCode:"POL",name:"polygon",chainId:s.ay.whitelisted.POLYGON_MAINNET.chainId},{currencyCode:"OP",name:"optimism",chainId:s.ay.whitelisted.OPTIMISM_MAINNET.chainId},{currencyCode:"ARB",name:"arbitrum",chainId:s.ay.whitelisted.ARBITRUM_MAINNET.chainId},{currencyCode:"BASE",name:"base",chainId:s.ay.whitelisted.BASE_MAINNET.chainId},{currencyCode:"SOL",name:"solana",chainId:a.D.whitelisted.SOLANA_MAINNET.chainId},{currencyCode:"BTC",name:"bitcoin",chainId:null},{currencyCode:"DOGE",name:"dogecoin",chainId:null},{currencyCode:"LTC",name:"litecoin",chainId:null}]),c=Object.fromEntries(r.map((e=>[e.currencyCode,e]))),o=Object.fromEntries(r.filter((e=>!!e.chainId)).map((e=>[e.chainId,e]))),i=r.filter((e=>!["BTC","DOGE","LTC","SOL"].includes(e.currencyCode))).map((e=>e.currencyCode)),d=["BTC","DOGE","LTC"]},81732:(e,n,t)=>{t.d(n,{aR:()=>o});var s=t(51676),a=t(65012),r=t(52197);const c=Object.values(s.ay.whitelisted).filter((e=>!e.isTestnet&&!!a.CM[e.chainId]));function o({asset:e,chainId:n,networks:t,walletGroupId:s}){const o=function({primaryReceiveAddresses:e,asset:n,chainId:t,networks:s}){const r=i({asset:n,chainId:t});return Array.from(e).reduce((function(e,[o,{address:i}]){const d={address:i};if(a.to.includes(o)&&(d.supportedNetworks=[a.Bu[o].name],n!==o&&(n||t||s&&!s.includes(o))||(d.assets=n?[n]:void 0,e.push(d))),"SOL"===o){(!n||r&&"SOL"!==r)&&!!(n||r&&r!==o)||s&&!s.includes(o)||(d.assets=n?[n]:void 0,d.supportedNetworks=[a.Bu.SOL.name],e.push(d))}if("ETH"===o){const t=s?.filter((e=>a.yi.includes(e))).map((e=>a.Bu[e].name));n?r||s?r&&a.yi.includes(r)?(d.assets=[n],d.supportedNetworks=[a.Bu[r].name],e.push(d)):!r&&t&&t.length>0&&!a.to.includes(n)&&"SOL"!==n&&(d.assets=[n],d.supportedNetworks=t,e.push(d)):(d.assets=[n],d.supportedNetworks=c.map((e=>a.CM[e.chainId].name)),e.push(d)):n||(r&&a.yi.includes(r)?(d.supportedNetworks=[a.Bu[r].name],e.push(d)):!r&&t&&t.length>0?(d.supportedNetworks=t,e.push(d)):r||s||(d.supportedNetworks=c.map((e=>a.CM[e.chainId].name)),e.push(d)))}return e}),[])}({primaryReceiveAddresses:(0,r.j)(s),asset:e,chainId:n,networks:t});return o}function i({asset:e,chainId:n}){return n&&a.CM[n]?a.CM[n].currencyCode:e&&a.to.includes(e)?e:void 0}}}]);
//# sourceMappingURL=562.js.map